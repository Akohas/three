/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var self=self||{};// File:src/Three.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */var THREE={REVISION:'77'};//\nif(true){!(__WEBPACK_AMD_DEFINE_FACTORY__ = (THREE),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else if('undefined'!==typeof exports&&'undefined'!==typeof module){module.exports=THREE;}// Polyfills\nif(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52);}//\nif(Math.sign===undefined){// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\nMath.sign=function(x){return x<0?-1:x>0?1:+x;};}if(Function.prototype.name===undefined){// Missing in IE9-11.\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\nObject.defineProperty(Function.prototype,'name',{get:function(){return this.toString().match(/^\\s*function\\s*(\\S*)\\s*\\(/)[1];}});}if(Object.assign===undefined){// Missing in IE.\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n(function(){Object.assign=function(target){'use strict';if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(Object.prototype.hasOwnProperty.call(source,nextKey)){output[nextKey]=source[nextKey];}}}}return output;};})();}//\nObject.assign(THREE,{// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\nMOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},// GL STATE CONSTANTS\nCullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,// SHADOWING TYPES\nBasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,// MATERIAL CONSTANTS\n// side\nFrontSide:0,BackSide:1,DoubleSide:2,// shading\nFlatShading:1,SmoothShading:2,// colors\nNoColors:0,FaceColors:1,VertexColors:2,// blending modes\nNoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,// custom blending equations\n// (numbers start from 100 not to clash with other\n// mappings to OpenGL constants defined in Texture.js)\nAddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,MaxEquation:104,// custom blending destination factors\nZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,// custom blending source factors\n//ZeroFactor: 200,\n//OneFactor: 201,\n//SrcAlphaFactor: 204,\n//OneMinusSrcAlphaFactor: 205,\n//DstAlphaFactor: 206,\n//OneMinusDstAlphaFactor: 207,\nDstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,// depth modes\nNeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,// TEXTURE CONSTANTS\nMultiplyOperation:0,MixOperation:1,AddOperation:2,// Tone Mapping modes\nNoToneMapping:0,// do not do any tone mapping, not even exposure (required for special purpose passes.)\nLinearToneMapping:1,// only apply exposure.\nReinhardToneMapping:2,Uncharted2ToneMapping:3,// John Hable\nCineonToneMapping:4,// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n// Mapping modes\nUVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,// Wrapping modes\nRepeatWrapping:1000,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,// Filters\nNearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,// Data types\nUnsignedByteType:1009,ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,// Pixel types\n//UnsignedByteType: 1009,\nUnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,// Pixel formats\nAlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\nRGBEFormat:THREE.RGBAFormat,//1024;\nDepthFormat:1026,// DDS / ST3C Compressed texture formats\nRGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,// PVRTC compressed texture formats\nRGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,// ETC compressed texture formats\nRGB_ETC1_Format:2151,// Loop styles for AnimationAction\nLoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,// Interpolation\nInterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,// Interpolant ending modes\nZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,// Triangle Draw modes\nTrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,// Texture Encodings\nLinearEncoding:3000,// No encoding at all.\nsRGBEncoding:3001,GammaEncoding:3007,// uses GAMMA_FACTOR, for backwards compatibility with WebGLRenderer.gammaInput/gammaOutput\n// The following Texture Encodings are for RGB-only (no alpha) HDR light emission sources.\n// These encodings should not specified as output encodings except in rare situations.\nRGBEEncoding:3002,// AKA Radiance.\nLogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,// MaxRange is 256.\n// Depth packing strategies\nBasicDepthPacking:3200,// for writing to float textures for high precision or for visualizing results in RGB buffers\nRGBADepthPacking:3201// for packing into RGBA buffers.\n});// File:src/math/Color.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Color=function(r,g,b){if(g===undefined&&b===undefined){// r is THREE.Color, hex or string\nreturn this.set(r);}return this.setRGB(r,g,b);};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(value){if(value instanceof THREE.Color){this.copy(value);}else if(typeof value==='number'){this.setHex(value);}else if(typeof value==='string'){this.setStyle(value);}return this;},setScalar:function(scalar){this.r=scalar;this.g=scalar;this.b=scalar;},setHex:function(hex){hex=Math.floor(hex);this.r=(hex>>16&255)/255;this.g=(hex>>8&255)/255;this.b=(hex&255)/255;return this;},setRGB:function(r,g,b){this.r=r;this.g=g;this.b=b;return this;},setHSL:function(){function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*6*(2/3-t);return p;}return function(h,s,l){// h,s,l ranges are in 0.0 - 1.0\nh=THREE.Math.euclideanModulo(h,1);s=THREE.Math.clamp(s,0,1);l=THREE.Math.clamp(l,0,1);if(s===0){this.r=this.g=this.b=l;}else{var p=l<=0.5?l*(1+s):l+s-l*s;var q=2*l-p;this.r=hue2rgb(q,p,h+1/3);this.g=hue2rgb(q,p,h);this.b=hue2rgb(q,p,h-1/3);}return this;};}(),setStyle:function(style){function handleAlpha(string){if(string===undefined)return;if(parseFloat(string)<1){console.warn('THREE.Color: Alpha component of '+style+' will be ignored.');}}var m;if(m=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(style)){// rgb / hsl\nvar color;var name=m[1];var components=m[2];switch(name){case'rgb':case'rgba':if(color=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)){// rgb(255,0,0) rgba(255,0,0,0.5)\nthis.r=Math.min(255,parseInt(color[1],10))/255;this.g=Math.min(255,parseInt(color[2],10))/255;this.b=Math.min(255,parseInt(color[3],10))/255;handleAlpha(color[5]);return this;}if(color=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)){// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\nthis.r=Math.min(100,parseInt(color[1],10))/100;this.g=Math.min(100,parseInt(color[2],10))/100;this.b=Math.min(100,parseInt(color[3],10))/100;handleAlpha(color[5]);return this;}break;case'hsl':case'hsla':if(color=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)){// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\nvar h=parseFloat(color[1])/360;var s=parseInt(color[2],10)/100;var l=parseInt(color[3],10)/100;handleAlpha(color[5]);return this.setHSL(h,s,l);}break;}}else if(m=/^\\#([A-Fa-f0-9]+)$/.exec(style)){// hex color\nvar hex=m[1];var size=hex.length;if(size===3){// #ff0\nthis.r=parseInt(hex.charAt(0)+hex.charAt(0),16)/255;this.g=parseInt(hex.charAt(1)+hex.charAt(1),16)/255;this.b=parseInt(hex.charAt(2)+hex.charAt(2),16)/255;return this;}else if(size===6){// #ff0000\nthis.r=parseInt(hex.charAt(0)+hex.charAt(1),16)/255;this.g=parseInt(hex.charAt(2)+hex.charAt(3),16)/255;this.b=parseInt(hex.charAt(4)+hex.charAt(5),16)/255;return this;}}if(style&&style.length>0){// color keywords\nvar hex=THREE.ColorKeywords[style];if(hex!==undefined){// red\nthis.setHex(hex);}else{// unknown color\nconsole.warn('THREE.Color: Unknown color '+style);}}return this;},clone:function(){return new this.constructor(this.r,this.g,this.b);},copy:function(color){this.r=color.r;this.g=color.g;this.b=color.b;return this;},copyGammaToLinear:function(color,gammaFactor){if(gammaFactor===undefined)gammaFactor=2.0;this.r=Math.pow(color.r,gammaFactor);this.g=Math.pow(color.g,gammaFactor);this.b=Math.pow(color.b,gammaFactor);return this;},copyLinearToGamma:function(color,gammaFactor){if(gammaFactor===undefined)gammaFactor=2.0;var safeInverse=gammaFactor>0?1.0/gammaFactor:1.0;this.r=Math.pow(color.r,safeInverse);this.g=Math.pow(color.g,safeInverse);this.b=Math.pow(color.b,safeInverse);return this;},convertGammaToLinear:function(){var r=this.r,g=this.g,b=this.b;this.r=r*r;this.g=g*g;this.b=b*b;return this;},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this;},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0;},getHexString:function(){return('000000'+this.getHex().toString(16)).slice(-6);},getHSL:function(optionalTarget){// h,s,l ranges are in 0.0 - 1.0\nvar hsl=optionalTarget||{h:0,s:0,l:0};var r=this.r,g=this.g,b=this.b;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var hue,saturation;var lightness=(min+max)/2.0;if(min===max){hue=0;saturation=0;}else{var delta=max-min;saturation=lightness<=0.5?delta/(max+min):delta/(2-max-min);switch(max){case r:hue=(g-b)/delta+(g<b?6:0);break;case g:hue=(b-r)/delta+2;break;case b:hue=(r-g)/delta+4;break;}hue/=6;}hsl.h=hue;hsl.s=saturation;hsl.l=lightness;return hsl;},getStyle:function(){return'rgb('+(this.r*255|0)+','+(this.g*255|0)+','+(this.b*255|0)+')';},offsetHSL:function(h,s,l){var hsl=this.getHSL();hsl.h+=h;hsl.s+=s;hsl.l+=l;this.setHSL(hsl.h,hsl.s,hsl.l);return this;},add:function(color){this.r+=color.r;this.g+=color.g;this.b+=color.b;return this;},addColors:function(color1,color2){this.r=color1.r+color2.r;this.g=color1.g+color2.g;this.b=color1.b+color2.b;return this;},addScalar:function(s){this.r+=s;this.g+=s;this.b+=s;return this;},multiply:function(color){this.r*=color.r;this.g*=color.g;this.b*=color.b;return this;},multiplyScalar:function(s){this.r*=s;this.g*=s;this.b*=s;return this;},lerp:function(color,alpha){this.r+=(color.r-this.r)*alpha;this.g+=(color.g-this.g)*alpha;this.b+=(color.b-this.b)*alpha;return this;},equals:function(c){return c.r===this.r&&c.g===this.g&&c.b===this.b;},fromArray:function(array,offset){if(offset===undefined)offset=0;this.r=array[offset];this.g=array[offset+1];this.b=array[offset+2];return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this.r;array[offset+1]=this.g;array[offset+2]=this.b;return array;}};THREE.ColorKeywords={'aliceblue':0xF0F8FF,'antiquewhite':0xFAEBD7,'aqua':0x00FFFF,'aquamarine':0x7FFFD4,'azure':0xF0FFFF,'beige':0xF5F5DC,'bisque':0xFFE4C4,'black':0x000000,'blanchedalmond':0xFFEBCD,'blue':0x0000FF,'blueviolet':0x8A2BE2,'brown':0xA52A2A,'burlywood':0xDEB887,'cadetblue':0x5F9EA0,'chartreuse':0x7FFF00,'chocolate':0xD2691E,'coral':0xFF7F50,'cornflowerblue':0x6495ED,'cornsilk':0xFFF8DC,'crimson':0xDC143C,'cyan':0x00FFFF,'darkblue':0x00008B,'darkcyan':0x008B8B,'darkgoldenrod':0xB8860B,'darkgray':0xA9A9A9,'darkgreen':0x006400,'darkgrey':0xA9A9A9,'darkkhaki':0xBDB76B,'darkmagenta':0x8B008B,'darkolivegreen':0x556B2F,'darkorange':0xFF8C00,'darkorchid':0x9932CC,'darkred':0x8B0000,'darksalmon':0xE9967A,'darkseagreen':0x8FBC8F,'darkslateblue':0x483D8B,'darkslategray':0x2F4F4F,'darkslategrey':0x2F4F4F,'darkturquoise':0x00CED1,'darkviolet':0x9400D3,'deeppink':0xFF1493,'deepskyblue':0x00BFFF,'dimgray':0x696969,'dimgrey':0x696969,'dodgerblue':0x1E90FF,'firebrick':0xB22222,'floralwhite':0xFFFAF0,'forestgreen':0x228B22,'fuchsia':0xFF00FF,'gainsboro':0xDCDCDC,'ghostwhite':0xF8F8FF,'gold':0xFFD700,'goldenrod':0xDAA520,'gray':0x808080,'green':0x008000,'greenyellow':0xADFF2F,'grey':0x808080,'honeydew':0xF0FFF0,'hotpink':0xFF69B4,'indianred':0xCD5C5C,'indigo':0x4B0082,'ivory':0xFFFFF0,'khaki':0xF0E68C,'lavender':0xE6E6FA,'lavenderblush':0xFFF0F5,'lawngreen':0x7CFC00,'lemonchiffon':0xFFFACD,'lightblue':0xADD8E6,'lightcoral':0xF08080,'lightcyan':0xE0FFFF,'lightgoldenrodyellow':0xFAFAD2,'lightgray':0xD3D3D3,'lightgreen':0x90EE90,'lightgrey':0xD3D3D3,'lightpink':0xFFB6C1,'lightsalmon':0xFFA07A,'lightseagreen':0x20B2AA,'lightskyblue':0x87CEFA,'lightslategray':0x778899,'lightslategrey':0x778899,'lightsteelblue':0xB0C4DE,'lightyellow':0xFFFFE0,'lime':0x00FF00,'limegreen':0x32CD32,'linen':0xFAF0E6,'magenta':0xFF00FF,'maroon':0x800000,'mediumaquamarine':0x66CDAA,'mediumblue':0x0000CD,'mediumorchid':0xBA55D3,'mediumpurple':0x9370DB,'mediumseagreen':0x3CB371,'mediumslateblue':0x7B68EE,'mediumspringgreen':0x00FA9A,'mediumturquoise':0x48D1CC,'mediumvioletred':0xC71585,'midnightblue':0x191970,'mintcream':0xF5FFFA,'mistyrose':0xFFE4E1,'moccasin':0xFFE4B5,'navajowhite':0xFFDEAD,'navy':0x000080,'oldlace':0xFDF5E6,'olive':0x808000,'olivedrab':0x6B8E23,'orange':0xFFA500,'orangered':0xFF4500,'orchid':0xDA70D6,'palegoldenrod':0xEEE8AA,'palegreen':0x98FB98,'paleturquoise':0xAFEEEE,'palevioletred':0xDB7093,'papayawhip':0xFFEFD5,'peachpuff':0xFFDAB9,'peru':0xCD853F,'pink':0xFFC0CB,'plum':0xDDA0DD,'powderblue':0xB0E0E6,'purple':0x800080,'red':0xFF0000,'rosybrown':0xBC8F8F,'royalblue':0x4169E1,'saddlebrown':0x8B4513,'salmon':0xFA8072,'sandybrown':0xF4A460,'seagreen':0x2E8B57,'seashell':0xFFF5EE,'sienna':0xA0522D,'silver':0xC0C0C0,'skyblue':0x87CEEB,'slateblue':0x6A5ACD,'slategray':0x708090,'slategrey':0x708090,'snow':0xFFFAFA,'springgreen':0x00FF7F,'steelblue':0x4682B4,'tan':0xD2B48C,'teal':0x008080,'thistle':0xD8BFD8,'tomato':0xFF6347,'turquoise':0x40E0D0,'violet':0xEE82EE,'wheat':0xF5DEB3,'white':0xFFFFFF,'whitesmoke':0xF5F5F5,'yellow':0xFFFF00,'yellowgreen':0x9ACD32};// File:src/math/Quaternion.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */THREE.Quaternion=function(x,y,z,w){this._x=x||0;this._y=y||0;this._z=z||0;this._w=w!==undefined?w:1;};THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x;},set x(value){this._x=value;this.onChangeCallback();},get y(){return this._y;},set y(value){this._y=value;this.onChangeCallback();},get z(){return this._z;},set z(value){this._z=value;this.onChangeCallback();},get w(){return this._w;},set w(value){this._w=value;this.onChangeCallback();},set:function(x,y,z,w){this._x=x;this._y=y;this._z=z;this._w=w;this.onChangeCallback();return this;},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w);},copy:function(quaternion){this._x=quaternion.x;this._y=quaternion.y;this._z=quaternion.z;this._w=quaternion.w;this.onChangeCallback();return this;},setFromEuler:function(euler,update){if(euler instanceof THREE.Euler===false){throw new Error('THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.');}// http://www.mathworks.com/matlabcentral/fileexchange/\n// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n//\tcontent/SpinCalc.m\nvar c1=Math.cos(euler._x/2);var c2=Math.cos(euler._y/2);var c3=Math.cos(euler._z/2);var s1=Math.sin(euler._x/2);var s2=Math.sin(euler._y/2);var s3=Math.sin(euler._z/2);var order=euler.order;if(order==='XYZ'){this._x=s1*c2*c3+c1*s2*s3;this._y=c1*s2*c3-s1*c2*s3;this._z=c1*c2*s3+s1*s2*c3;this._w=c1*c2*c3-s1*s2*s3;}else if(order==='YXZ'){this._x=s1*c2*c3+c1*s2*s3;this._y=c1*s2*c3-s1*c2*s3;this._z=c1*c2*s3-s1*s2*c3;this._w=c1*c2*c3+s1*s2*s3;}else if(order==='ZXY'){this._x=s1*c2*c3-c1*s2*s3;this._y=c1*s2*c3+s1*c2*s3;this._z=c1*c2*s3+s1*s2*c3;this._w=c1*c2*c3-s1*s2*s3;}else if(order==='ZYX'){this._x=s1*c2*c3-c1*s2*s3;this._y=c1*s2*c3+s1*c2*s3;this._z=c1*c2*s3-s1*s2*c3;this._w=c1*c2*c3+s1*s2*s3;}else if(order==='YZX'){this._x=s1*c2*c3+c1*s2*s3;this._y=c1*s2*c3+s1*c2*s3;this._z=c1*c2*s3-s1*s2*c3;this._w=c1*c2*c3-s1*s2*s3;}else if(order==='XZY'){this._x=s1*c2*c3-c1*s2*s3;this._y=c1*s2*c3-s1*c2*s3;this._z=c1*c2*s3+s1*s2*c3;this._w=c1*c2*c3+s1*s2*s3;}if(update!==false)this.onChangeCallback();return this;},setFromAxisAngle:function(axis,angle){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n// assumes axis is normalized\nvar halfAngle=angle/2,s=Math.sin(halfAngle);this._x=axis.x*s;this._y=axis.y*s;this._z=axis.z*s;this._w=Math.cos(halfAngle);this.onChangeCallback();return this;},setFromRotationMatrix:function(m){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nvar te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10],trace=m11+m22+m33,s;if(trace>0){s=0.5/Math.sqrt(trace+1.0);this._w=0.25/s;this._x=(m32-m23)*s;this._y=(m13-m31)*s;this._z=(m21-m12)*s;}else if(m11>m22&&m11>m33){s=2.0*Math.sqrt(1.0+m11-m22-m33);this._w=(m32-m23)/s;this._x=0.25*s;this._y=(m12+m21)/s;this._z=(m13+m31)/s;}else if(m22>m33){s=2.0*Math.sqrt(1.0+m22-m11-m33);this._w=(m13-m31)/s;this._x=(m12+m21)/s;this._y=0.25*s;this._z=(m23+m32)/s;}else{s=2.0*Math.sqrt(1.0+m33-m11-m22);this._w=(m21-m12)/s;this._x=(m13+m31)/s;this._y=(m23+m32)/s;this._z=0.25*s;}this.onChangeCallback();return this;},setFromUnitVectors:function(){// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n// assumes direction vectors vFrom and vTo are normalized\nvar v1,r;var EPS=0.000001;return function(vFrom,vTo){if(v1===undefined)v1=new THREE.Vector3();r=vFrom.dot(vTo)+1;if(r<EPS){r=0;if(Math.abs(vFrom.x)>Math.abs(vFrom.z)){v1.set(-vFrom.y,vFrom.x,0);}else{v1.set(0,-vFrom.z,vFrom.y);}}else{v1.crossVectors(vFrom,vTo);}this._x=v1.x;this._y=v1.y;this._z=v1.z;this._w=r;return this.normalize();};}(),inverse:function(){return this.conjugate().normalize();},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this;},dot:function(v){return this._x*v._x+this._y*v._y+this._z*v._z+this._w*v._w;},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w;},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w);},normalize:function(){var l=this.length();if(l===0){this._x=0;this._y=0;this._z=0;this._w=1;}else{l=1/l;this._x=this._x*l;this._y=this._y*l;this._z=this._z*l;this._w=this._w*l;}this.onChangeCallback();return this;},multiply:function(q,p){if(p!==undefined){console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.');return this.multiplyQuaternions(q,p);}return this.multiplyQuaternions(this,q);},premultiply:function(q){return this.multiplyQuaternions(q,this);},multiplyQuaternions:function(a,b){// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\nvar qax=a._x,qay=a._y,qaz=a._z,qaw=a._w;var qbx=b._x,qby=b._y,qbz=b._z,qbw=b._w;this._x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby;this._y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz;this._z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx;this._w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz;this.onChangeCallback();return this;},slerp:function(qb,t){if(t===0)return this;if(t===1)return this.copy(qb);var x=this._x,y=this._y,z=this._z,w=this._w;// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\nvar cosHalfTheta=w*qb._w+x*qb._x+y*qb._y+z*qb._z;if(cosHalfTheta<0){this._w=-qb._w;this._x=-qb._x;this._y=-qb._y;this._z=-qb._z;cosHalfTheta=-cosHalfTheta;}else{this.copy(qb);}if(cosHalfTheta>=1.0){this._w=w;this._x=x;this._y=y;this._z=z;return this;}var sinHalfTheta=Math.sqrt(1.0-cosHalfTheta*cosHalfTheta);if(Math.abs(sinHalfTheta)<0.001){this._w=0.5*(w+this._w);this._x=0.5*(x+this._x);this._y=0.5*(y+this._y);this._z=0.5*(z+this._z);return this;}var halfTheta=Math.atan2(sinHalfTheta,cosHalfTheta);var ratioA=Math.sin((1-t)*halfTheta)/sinHalfTheta,ratioB=Math.sin(t*halfTheta)/sinHalfTheta;this._w=w*ratioA+this._w*ratioB;this._x=x*ratioA+this._x*ratioB;this._y=y*ratioA+this._y*ratioB;this._z=z*ratioA+this._z*ratioB;this.onChangeCallback();return this;},equals:function(quaternion){return quaternion._x===this._x&&quaternion._y===this._y&&quaternion._z===this._z&&quaternion._w===this._w;},fromArray:function(array,offset){if(offset===undefined)offset=0;this._x=array[offset];this._y=array[offset+1];this._z=array[offset+2];this._w=array[offset+3];this.onChangeCallback();return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this._x;array[offset+1]=this._y;array[offset+2]=this._z;array[offset+3]=this._w;return array;},onChange:function(callback){this.onChangeCallback=callback;return this;},onChangeCallback:function(){}};Object.assign(THREE.Quaternion,{slerp:function(qa,qb,qm,t){return qm.copy(qa).slerp(qb,t);},slerpFlat:function(dst,dstOffset,src0,srcOffset0,src1,srcOffset1,t){// fuzz-free, array-based Quaternion SLERP operation\nvar x0=src0[srcOffset0+0],y0=src0[srcOffset0+1],z0=src0[srcOffset0+2],w0=src0[srcOffset0+3],x1=src1[srcOffset1+0],y1=src1[srcOffset1+1],z1=src1[srcOffset1+2],w1=src1[srcOffset1+3];if(w0!==w1||x0!==x1||y0!==y1||z0!==z1){var s=1-t,cos=x0*x1+y0*y1+z0*z1+w0*w1,dir=cos>=0?1:-1,sqrSin=1-cos*cos;// Skip the Slerp for tiny steps to avoid numeric problems:\nif(sqrSin>Number.EPSILON){var sin=Math.sqrt(sqrSin),len=Math.atan2(sin,cos*dir);s=Math.sin(s*len)/sin;t=Math.sin(t*len)/sin;}var tDir=t*dir;x0=x0*s+x1*tDir;y0=y0*s+y1*tDir;z0=z0*s+z1*tDir;w0=w0*s+w1*tDir;// Normalize in case we just did a lerp:\nif(s===1-t){var f=1/Math.sqrt(x0*x0+y0*y0+z0*z0+w0*w0);x0*=f;y0*=f;z0*=f;w0*=f;}}dst[dstOffset]=x0;dst[dstOffset+1]=y0;dst[dstOffset+2]=z0;dst[dstOffset+3]=w0;}});// File:src/math/Vector2.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */THREE.Vector2=function(x,y){this.x=x||0;this.y=y||0;};THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x;},set width(value){this.x=value;},get height(){return this.y;},set height(value){this.y=value;},//\nset:function(x,y){this.x=x;this.y=y;return this;},setScalar:function(scalar){this.x=scalar;this.y=scalar;return this;},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;default:throw new Error('index is out of range: '+index);}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;default:throw new Error('index is out of range: '+index);}},clone:function(){return new this.constructor(this.x,this.y);},copy:function(v){this.x=v.x;this.y=v.y;return this;},add:function(v,w){if(w!==undefined){console.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');return this.addVectors(v,w);}this.x+=v.x;this.y+=v.y;return this;},addScalar:function(s){this.x+=s;this.y+=s;return this;},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this;},addScaledVector:function(v,s){this.x+=v.x*s;this.y+=v.y*s;return this;},sub:function(v,w){if(w!==undefined){console.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');return this.subVectors(v,w);}this.x-=v.x;this.y-=v.y;return this;},subScalar:function(s){this.x-=s;this.y-=s;return this;},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this;},multiply:function(v){this.x*=v.x;this.y*=v.y;return this;},multiplyScalar:function(scalar){if(isFinite(scalar)){this.x*=scalar;this.y*=scalar;}else{this.x=0;this.y=0;}return this;},divide:function(v){this.x/=v.x;this.y/=v.y;return this;},divideScalar:function(scalar){return this.multiplyScalar(1/scalar);},min:function(v){this.x=Math.min(this.x,v.x);this.y=Math.min(this.y,v.y);return this;},max:function(v){this.x=Math.max(this.x,v.x);this.y=Math.max(this.y,v.y);return this;},clamp:function(min,max){// This function assumes min < max, if this assumption isn't true it will not operate correctly\nthis.x=Math.max(min.x,Math.min(max.x,this.x));this.y=Math.max(min.y,Math.min(max.y,this.y));return this;},clampScalar:function(){var min,max;return function clampScalar(minVal,maxVal){if(min===undefined){min=new THREE.Vector2();max=new THREE.Vector2();}min.set(minVal,minVal);max.set(maxVal,maxVal);return this.clamp(min,max);};}(),clampLength:function(min,max){var length=this.length();return this.multiplyScalar(Math.max(min,Math.min(max,length))/length);},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this;},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this;},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this;},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this;},negate:function(){this.x=-this.x;this.y=-this.y;return this;},dot:function(v){return this.x*v.x+this.y*v.y;},lengthSq:function(){return this.x*this.x+this.y*this.y;},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y);},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y);},normalize:function(){return this.divideScalar(this.length());},angle:function(){// computes the angle in radians with respect to the positive x-axis\nvar angle=Math.atan2(this.y,this.x);if(angle<0)angle+=2*Math.PI;return angle;},distanceTo:function(v){return Math.sqrt(this.distanceToSquared(v));},distanceToSquared:function(v){var dx=this.x-v.x,dy=this.y-v.y;return dx*dx+dy*dy;},setLength:function(length){return this.multiplyScalar(length/this.length());},lerp:function(v,alpha){this.x+=(v.x-this.x)*alpha;this.y+=(v.y-this.y)*alpha;return this;},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1);},equals:function(v){return v.x===this.x&&v.y===this.y;},fromArray:function(array,offset){if(offset===undefined)offset=0;this.x=array[offset];this.y=array[offset+1];return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this.x;array[offset+1]=this.y;return array;},fromAttribute:function(attribute,index,offset){if(offset===undefined)offset=0;index=index*attribute.itemSize+offset;this.x=attribute.array[index];this.y=attribute.array[index+1];return this;},rotateAround:function(center,angle){var c=Math.cos(angle),s=Math.sin(angle);var x=this.x-center.x;var y=this.y-center.y;this.x=x*c-y*s+center.x;this.y=x*s+y*c+center.y;return this;}};// File:src/math/Vector3.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.Vector3=function(x,y,z){this.x=x||0;this.y=y||0;this.z=z||0;};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(x,y,z){this.x=x;this.y=y;this.z=z;return this;},setScalar:function(scalar){this.x=scalar;this.y=scalar;this.z=scalar;return this;},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setZ:function(z){this.z=z;return this;},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;default:throw new Error('index is out of range: '+index);}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error('index is out of range: '+index);}},clone:function(){return new this.constructor(this.x,this.y,this.z);},copy:function(v){this.x=v.x;this.y=v.y;this.z=v.z;return this;},add:function(v,w){if(w!==undefined){console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');return this.addVectors(v,w);}this.x+=v.x;this.y+=v.y;this.z+=v.z;return this;},addScalar:function(s){this.x+=s;this.y+=s;this.z+=s;return this;},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this;},addScaledVector:function(v,s){this.x+=v.x*s;this.y+=v.y*s;this.z+=v.z*s;return this;},sub:function(v,w){if(w!==undefined){console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');return this.subVectors(v,w);}this.x-=v.x;this.y-=v.y;this.z-=v.z;return this;},subScalar:function(s){this.x-=s;this.y-=s;this.z-=s;return this;},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this;},multiply:function(v,w){if(w!==undefined){console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');return this.multiplyVectors(v,w);}this.x*=v.x;this.y*=v.y;this.z*=v.z;return this;},multiplyScalar:function(scalar){if(isFinite(scalar)){this.x*=scalar;this.y*=scalar;this.z*=scalar;}else{this.x=0;this.y=0;this.z=0;}return this;},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this;},applyEuler:function(){var quaternion;return function applyEuler(euler){if(euler instanceof THREE.Euler===false){console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.');}if(quaternion===undefined)quaternion=new THREE.Quaternion();return this.applyQuaternion(quaternion.setFromEuler(euler));};}(),applyAxisAngle:function(){var quaternion;return function applyAxisAngle(axis,angle){if(quaternion===undefined)quaternion=new THREE.Quaternion();return this.applyQuaternion(quaternion.setFromAxisAngle(axis,angle));};}(),applyMatrix3:function(m){var x=this.x,y=this.y,z=this.z;var e=m.elements;this.x=e[0]*x+e[3]*y+e[6]*z;this.y=e[1]*x+e[4]*y+e[7]*z;this.z=e[2]*x+e[5]*y+e[8]*z;return this;},applyMatrix4:function(m){// input: THREE.Matrix4 affine matrix\nvar x=this.x,y=this.y,z=this.z;var e=m.elements;this.x=e[0]*x+e[4]*y+e[8]*z+e[12];this.y=e[1]*x+e[5]*y+e[9]*z+e[13];this.z=e[2]*x+e[6]*y+e[10]*z+e[14];return this;},applyProjection:function(m){// input: THREE.Matrix4 projection matrix\nvar x=this.x,y=this.y,z=this.z;var e=m.elements;var d=1/(e[3]*x+e[7]*y+e[11]*z+e[15]);// perspective divide\nthis.x=(e[0]*x+e[4]*y+e[8]*z+e[12])*d;this.y=(e[1]*x+e[5]*y+e[9]*z+e[13])*d;this.z=(e[2]*x+e[6]*y+e[10]*z+e[14])*d;return this;},applyQuaternion:function(q){var x=this.x,y=this.y,z=this.z;var qx=q.x,qy=q.y,qz=q.z,qw=q.w;// calculate quat * vector\nvar ix=qw*x+qy*z-qz*y;var iy=qw*y+qz*x-qx*z;var iz=qw*z+qx*y-qy*x;var iw=-qx*x-qy*y-qz*z;// calculate result * inverse quat\nthis.x=ix*qw+iw*-qx+iy*-qz-iz*-qy;this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz;this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx;return this;},project:function(){var matrix;return function project(camera){if(matrix===undefined)matrix=new THREE.Matrix4();matrix.multiplyMatrices(camera.projectionMatrix,matrix.getInverse(camera.matrixWorld));return this.applyProjection(matrix);};}(),unproject:function(){var matrix;return function unproject(camera){if(matrix===undefined)matrix=new THREE.Matrix4();matrix.multiplyMatrices(camera.matrixWorld,matrix.getInverse(camera.projectionMatrix));return this.applyProjection(matrix);};}(),transformDirection:function(m){// input: THREE.Matrix4 affine matrix\n// vector interpreted as a direction\nvar x=this.x,y=this.y,z=this.z;var e=m.elements;this.x=e[0]*x+e[4]*y+e[8]*z;this.y=e[1]*x+e[5]*y+e[9]*z;this.z=e[2]*x+e[6]*y+e[10]*z;return this.normalize();},divide:function(v){this.x/=v.x;this.y/=v.y;this.z/=v.z;return this;},divideScalar:function(scalar){return this.multiplyScalar(1/scalar);},min:function(v){this.x=Math.min(this.x,v.x);this.y=Math.min(this.y,v.y);this.z=Math.min(this.z,v.z);return this;},max:function(v){this.x=Math.max(this.x,v.x);this.y=Math.max(this.y,v.y);this.z=Math.max(this.z,v.z);return this;},clamp:function(min,max){// This function assumes min < max, if this assumption isn't true it will not operate correctly\nthis.x=Math.max(min.x,Math.min(max.x,this.x));this.y=Math.max(min.y,Math.min(max.y,this.y));this.z=Math.max(min.z,Math.min(max.z,this.z));return this;},clampScalar:function(){var min,max;return function clampScalar(minVal,maxVal){if(min===undefined){min=new THREE.Vector3();max=new THREE.Vector3();}min.set(minVal,minVal,minVal);max.set(maxVal,maxVal,maxVal);return this.clamp(min,max);};}(),clampLength:function(min,max){var length=this.length();return this.multiplyScalar(Math.max(min,Math.min(max,length))/length);},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this;},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this;},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this;},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this;},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this;},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z;},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z;},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z);},normalize:function(){return this.divideScalar(this.length());},setLength:function(length){return this.multiplyScalar(length/this.length());},lerp:function(v,alpha){this.x+=(v.x-this.x)*alpha;this.y+=(v.y-this.y)*alpha;this.z+=(v.z-this.z)*alpha;return this;},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1);},cross:function(v,w){if(w!==undefined){console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');return this.crossVectors(v,w);}var x=this.x,y=this.y,z=this.z;this.x=y*v.z-z*v.y;this.y=z*v.x-x*v.z;this.z=x*v.y-y*v.x;return this;},crossVectors:function(a,b){var ax=a.x,ay=a.y,az=a.z;var bx=b.x,by=b.y,bz=b.z;this.x=ay*bz-az*by;this.y=az*bx-ax*bz;this.z=ax*by-ay*bx;return this;},projectOnVector:function(){var v1,dot;return function projectOnVector(vector){if(v1===undefined)v1=new THREE.Vector3();v1.copy(vector).normalize();dot=this.dot(v1);return this.copy(v1).multiplyScalar(dot);};}(),projectOnPlane:function(){var v1;return function projectOnPlane(planeNormal){if(v1===undefined)v1=new THREE.Vector3();v1.copy(this).projectOnVector(planeNormal);return this.sub(v1);};}(),reflect:function(){// reflect incident vector off plane orthogonal to normal\n// normal is assumed to have unit length\nvar v1;return function reflect(normal){if(v1===undefined)v1=new THREE.Vector3();return this.sub(v1.copy(normal).multiplyScalar(2*this.dot(normal)));};}(),angleTo:function(v){var theta=this.dot(v)/Math.sqrt(this.lengthSq()*v.lengthSq());// clamp, to handle numerical problems\nreturn Math.acos(THREE.Math.clamp(theta,-1,1));},distanceTo:function(v){return Math.sqrt(this.distanceToSquared(v));},distanceToSquared:function(v){var dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz;},setFromSpherical:function(s){var sinPhiRadius=Math.sin(s.phi)*s.radius;this.x=sinPhiRadius*Math.sin(s.theta);this.y=Math.cos(s.phi)*s.radius;this.z=sinPhiRadius*Math.cos(s.theta);return this;},setFromMatrixPosition:function(m){return this.setFromMatrixColumn(m,3);},setFromMatrixScale:function(m){var sx=this.setFromMatrixColumn(m,0).length();var sy=this.setFromMatrixColumn(m,1).length();var sz=this.setFromMatrixColumn(m,2).length();this.x=sx;this.y=sy;this.z=sz;return this;},setFromMatrixColumn:function(m,index){if(typeof m==='number'){console.warn('THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).');var temp=m;m=index;index=temp;}return this.fromArray(m.elements,index*4);},equals:function(v){return v.x===this.x&&v.y===this.y&&v.z===this.z;},fromArray:function(array,offset){if(offset===undefined)offset=0;this.x=array[offset];this.y=array[offset+1];this.z=array[offset+2];return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this.x;array[offset+1]=this.y;array[offset+2]=this.z;return array;},fromAttribute:function(attribute,index,offset){if(offset===undefined)offset=0;index=index*attribute.itemSize+offset;this.x=attribute.array[index];this.y=attribute.array[index+1];this.z=attribute.array[index+2];return this;}};// File:src/math/Vector4.js\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.Vector4=function(x,y,z,w){this.x=x||0;this.y=y||0;this.z=z||0;this.w=w!==undefined?w:1;};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(x,y,z,w){this.x=x;this.y=y;this.z=z;this.w=w;return this;},setScalar:function(scalar){this.x=scalar;this.y=scalar;this.z=scalar;this.w=scalar;return this;},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setZ:function(z){this.z=z;return this;},setW:function(w){this.w=w;return this;},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;case 3:this.w=value;break;default:throw new Error('index is out of range: '+index);}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error('index is out of range: '+index);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w);},copy:function(v){this.x=v.x;this.y=v.y;this.z=v.z;this.w=v.w!==undefined?v.w:1;return this;},add:function(v,w){if(w!==undefined){console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');return this.addVectors(v,w);}this.x+=v.x;this.y+=v.y;this.z+=v.z;this.w+=v.w;return this;},addScalar:function(s){this.x+=s;this.y+=s;this.z+=s;this.w+=s;return this;},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this;},addScaledVector:function(v,s){this.x+=v.x*s;this.y+=v.y*s;this.z+=v.z*s;this.w+=v.w*s;return this;},sub:function(v,w){if(w!==undefined){console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');return this.subVectors(v,w);}this.x-=v.x;this.y-=v.y;this.z-=v.z;this.w-=v.w;return this;},subScalar:function(s){this.x-=s;this.y-=s;this.z-=s;this.w-=s;return this;},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this;},multiplyScalar:function(scalar){if(isFinite(scalar)){this.x*=scalar;this.y*=scalar;this.z*=scalar;this.w*=scalar;}else{this.x=0;this.y=0;this.z=0;this.w=0;}return this;},applyMatrix4:function(m){var x=this.x,y=this.y,z=this.z,w=this.w;var e=m.elements;this.x=e[0]*x+e[4]*y+e[8]*z+e[12]*w;this.y=e[1]*x+e[5]*y+e[9]*z+e[13]*w;this.z=e[2]*x+e[6]*y+e[10]*z+e[14]*w;this.w=e[3]*x+e[7]*y+e[11]*z+e[15]*w;return this;},divideScalar:function(scalar){return this.multiplyScalar(1/scalar);},setAxisAngleFromQuaternion:function(q){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n// q is assumed to be normalized\nthis.w=2*Math.acos(q.w);var s=Math.sqrt(1-q.w*q.w);if(s<0.0001){this.x=1;this.y=0;this.z=0;}else{this.x=q.x/s;this.y=q.y/s;this.z=q.z/s;}return this;},setAxisAngleFromRotationMatrix:function(m){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nvar angle,x,y,z,// variables for result\nepsilon=0.01,// margin to allow for rounding errors\nepsilon2=0.1,// margin to distinguish between 0 and 180 degrees\nte=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];if(Math.abs(m12-m21)<epsilon&&Math.abs(m13-m31)<epsilon&&Math.abs(m23-m32)<epsilon){// singularity found\n// first check for identity matrix which must have +1 for all terms\n// in leading diagonal and zero in other terms\nif(Math.abs(m12+m21)<epsilon2&&Math.abs(m13+m31)<epsilon2&&Math.abs(m23+m32)<epsilon2&&Math.abs(m11+m22+m33-3)<epsilon2){// this singularity is identity matrix so angle = 0\nthis.set(1,0,0,0);return this;// zero angle, arbitrary axis\n}// otherwise this singularity is angle = 180\nangle=Math.PI;var xx=(m11+1)/2;var yy=(m22+1)/2;var zz=(m33+1)/2;var xy=(m12+m21)/4;var xz=(m13+m31)/4;var yz=(m23+m32)/4;if(xx>yy&&xx>zz){// m11 is the largest diagonal term\nif(xx<epsilon){x=0;y=0.707106781;z=0.707106781;}else{x=Math.sqrt(xx);y=xy/x;z=xz/x;}}else if(yy>zz){// m22 is the largest diagonal term\nif(yy<epsilon){x=0.707106781;y=0;z=0.707106781;}else{y=Math.sqrt(yy);x=xy/y;z=yz/y;}}else{// m33 is the largest diagonal term so base result on this\nif(zz<epsilon){x=0.707106781;y=0.707106781;z=0;}else{z=Math.sqrt(zz);x=xz/z;y=yz/z;}}this.set(x,y,z,angle);return this;// return 180 deg rotation\n}// as we have reached here there are no singularities so we can handle normally\nvar s=Math.sqrt((m32-m23)*(m32-m23)+(m13-m31)*(m13-m31)+(m21-m12)*(m21-m12));// used to normalize\nif(Math.abs(s)<0.001)s=1;// prevent divide by zero, should not happen if matrix is orthogonal and should be\n// caught by singularity test above, but I've left it in just in case\nthis.x=(m32-m23)/s;this.y=(m13-m31)/s;this.z=(m21-m12)/s;this.w=Math.acos((m11+m22+m33-1)/2);return this;},min:function(v){this.x=Math.min(this.x,v.x);this.y=Math.min(this.y,v.y);this.z=Math.min(this.z,v.z);this.w=Math.min(this.w,v.w);return this;},max:function(v){this.x=Math.max(this.x,v.x);this.y=Math.max(this.y,v.y);this.z=Math.max(this.z,v.z);this.w=Math.max(this.w,v.w);return this;},clamp:function(min,max){// This function assumes min < max, if this assumption isn't true it will not operate correctly\nthis.x=Math.max(min.x,Math.min(max.x,this.x));this.y=Math.max(min.y,Math.min(max.y,this.y));this.z=Math.max(min.z,Math.min(max.z,this.z));this.w=Math.max(min.w,Math.min(max.w,this.w));return this;},clampScalar:function(){var min,max;return function clampScalar(minVal,maxVal){if(min===undefined){min=new THREE.Vector4();max=new THREE.Vector4();}min.set(minVal,minVal,minVal,minVal);max.set(maxVal,maxVal,maxVal,maxVal);return this.clamp(min,max);};}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this;},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this;},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this;},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this;},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this;},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w;},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w);},normalize:function(){return this.divideScalar(this.length());},setLength:function(length){return this.multiplyScalar(length/this.length());},lerp:function(v,alpha){this.x+=(v.x-this.x)*alpha;this.y+=(v.y-this.y)*alpha;this.z+=(v.z-this.z)*alpha;this.w+=(v.w-this.w)*alpha;return this;},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1);},equals:function(v){return v.x===this.x&&v.y===this.y&&v.z===this.z&&v.w===this.w;},fromArray:function(array,offset){if(offset===undefined)offset=0;this.x=array[offset];this.y=array[offset+1];this.z=array[offset+2];this.w=array[offset+3];return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this.x;array[offset+1]=this.y;array[offset+2]=this.z;array[offset+3]=this.w;return array;},fromAttribute:function(attribute,index,offset){if(offset===undefined)offset=0;index=index*attribute.itemSize+offset;this.x=attribute.array[index];this.y=attribute.array[index+1];this.z=attribute.array[index+2];this.w=attribute.array[index+3];return this;}};// File:src/math/Euler.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */THREE.Euler=function(x,y,z,order){this._x=x||0;this._y=y||0;this._z=z||0;this._order=order||THREE.Euler.DefaultOrder;};THREE.Euler.RotationOrders=['XYZ','YZX','ZXY','XZY','YXZ','ZYX'];THREE.Euler.DefaultOrder='XYZ';THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x;},set x(value){this._x=value;this.onChangeCallback();},get y(){return this._y;},set y(value){this._y=value;this.onChangeCallback();},get z(){return this._z;},set z(value){this._z=value;this.onChangeCallback();},get order(){return this._order;},set order(value){this._order=value;this.onChangeCallback();},set:function(x,y,z,order){this._x=x;this._y=y;this._z=z;this._order=order||this._order;this.onChangeCallback();return this;},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order);},copy:function(euler){this._x=euler._x;this._y=euler._y;this._z=euler._z;this._order=euler._order;this.onChangeCallback();return this;},setFromRotationMatrix:function(m,order,update){var clamp=THREE.Math.clamp;// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nvar te=m.elements;var m11=te[0],m12=te[4],m13=te[8];var m21=te[1],m22=te[5],m23=te[9];var m31=te[2],m32=te[6],m33=te[10];order=order||this._order;if(order==='XYZ'){this._y=Math.asin(clamp(m13,-1,1));if(Math.abs(m13)<0.99999){this._x=Math.atan2(-m23,m33);this._z=Math.atan2(-m12,m11);}else{this._x=Math.atan2(m32,m22);this._z=0;}}else if(order==='YXZ'){this._x=Math.asin(-clamp(m23,-1,1));if(Math.abs(m23)<0.99999){this._y=Math.atan2(m13,m33);this._z=Math.atan2(m21,m22);}else{this._y=Math.atan2(-m31,m11);this._z=0;}}else if(order==='ZXY'){this._x=Math.asin(clamp(m32,-1,1));if(Math.abs(m32)<0.99999){this._y=Math.atan2(-m31,m33);this._z=Math.atan2(-m12,m22);}else{this._y=0;this._z=Math.atan2(m21,m11);}}else if(order==='ZYX'){this._y=Math.asin(-clamp(m31,-1,1));if(Math.abs(m31)<0.99999){this._x=Math.atan2(m32,m33);this._z=Math.atan2(m21,m11);}else{this._x=0;this._z=Math.atan2(-m12,m22);}}else if(order==='YZX'){this._z=Math.asin(clamp(m21,-1,1));if(Math.abs(m21)<0.99999){this._x=Math.atan2(-m23,m22);this._y=Math.atan2(-m31,m11);}else{this._x=0;this._y=Math.atan2(m13,m33);}}else if(order==='XZY'){this._z=Math.asin(-clamp(m12,-1,1));if(Math.abs(m12)<0.99999){this._x=Math.atan2(m32,m22);this._y=Math.atan2(m13,m11);}else{this._x=Math.atan2(-m23,m33);this._y=0;}}else{console.warn('THREE.Euler: .setFromRotationMatrix() given unsupported order: '+order);}this._order=order;if(update!==false)this.onChangeCallback();return this;},setFromQuaternion:function(){var matrix;return function(q,order,update){if(matrix===undefined)matrix=new THREE.Matrix4();matrix.makeRotationFromQuaternion(q);return this.setFromRotationMatrix(matrix,order,update);};}(),setFromVector3:function(v,order){return this.set(v.x,v.y,v.z,order||this._order);},reorder:function(){// WARNING: this discards revolution information -bhouston\nvar q=new THREE.Quaternion();return function(newOrder){q.setFromEuler(this);return this.setFromQuaternion(q,newOrder);};}(),equals:function(euler){return euler._x===this._x&&euler._y===this._y&&euler._z===this._z&&euler._order===this._order;},fromArray:function(array){this._x=array[0];this._y=array[1];this._z=array[2];if(array[3]!==undefined)this._order=array[3];this.onChangeCallback();return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;array[offset]=this._x;array[offset+1]=this._y;array[offset+2]=this._z;array[offset+3]=this._order;return array;},toVector3:function(optionalResult){if(optionalResult){return optionalResult.set(this._x,this._y,this._z);}else{return new THREE.Vector3(this._x,this._y,this._z);}},onChange:function(callback){this.onChangeCallback=callback;return this;},onChangeCallback:function(){}};// File:src/math/Line3.js\n/**\r\n * @author bhouston / http://clara.io\r\n */THREE.Line3=function(start,end){this.start=start!==undefined?start:new THREE.Vector3();this.end=end!==undefined?end:new THREE.Vector3();};THREE.Line3.prototype={constructor:THREE.Line3,set:function(start,end){this.start.copy(start);this.end.copy(end);return this;},clone:function(){return new this.constructor().copy(this);},copy:function(line){this.start.copy(line.start);this.end.copy(line.end);return this;},center:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.addVectors(this.start,this.end).multiplyScalar(0.5);},delta:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.subVectors(this.end,this.start);},distanceSq:function(){return this.start.distanceToSquared(this.end);},distance:function(){return this.start.distanceTo(this.end);},at:function(t,optionalTarget){var result=optionalTarget||new THREE.Vector3();return this.delta(result).multiplyScalar(t).add(this.start);},closestPointToPointParameter:function(){var startP=new THREE.Vector3();var startEnd=new THREE.Vector3();return function(point,clampToLine){startP.subVectors(point,this.start);startEnd.subVectors(this.end,this.start);var startEnd2=startEnd.dot(startEnd);var startEnd_startP=startEnd.dot(startP);var t=startEnd_startP/startEnd2;if(clampToLine){t=THREE.Math.clamp(t,0,1);}return t;};}(),closestPointToPoint:function(point,clampToLine,optionalTarget){var t=this.closestPointToPointParameter(point,clampToLine);var result=optionalTarget||new THREE.Vector3();return this.delta(result).multiplyScalar(t).add(this.start);},applyMatrix4:function(matrix){this.start.applyMatrix4(matrix);this.end.applyMatrix4(matrix);return this;},equals:function(line){return line.start.equals(this.start)&&line.end.equals(this.end);}};// File:src/math/Box2.js\n/**\r\n * @author bhouston / http://clara.io\r\n */THREE.Box2=function(min,max){this.min=min!==undefined?min:new THREE.Vector2(+Infinity,+Infinity);this.max=max!==undefined?max:new THREE.Vector2(-Infinity,-Infinity);};THREE.Box2.prototype={constructor:THREE.Box2,set:function(min,max){this.min.copy(min);this.max.copy(max);return this;},setFromPoints:function(points){this.makeEmpty();for(var i=0,il=points.length;i<il;i++){this.expandByPoint(points[i]);}return this;},setFromCenterAndSize:function(){var v1=new THREE.Vector2();return function(center,size){var halfSize=v1.copy(size).multiplyScalar(0.5);this.min.copy(center).sub(halfSize);this.max.copy(center).add(halfSize);return this;};}(),clone:function(){return new this.constructor().copy(this);},copy:function(box){this.min.copy(box.min);this.max.copy(box.max);return this;},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this;},isEmpty:function(){// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\nreturn this.max.x<this.min.x||this.max.y<this.min.y;},center:function(optionalTarget){var result=optionalTarget||new THREE.Vector2();return result.addVectors(this.min,this.max).multiplyScalar(0.5);},size:function(optionalTarget){var result=optionalTarget||new THREE.Vector2();return result.subVectors(this.max,this.min);},expandByPoint:function(point){this.min.min(point);this.max.max(point);return this;},expandByVector:function(vector){this.min.sub(vector);this.max.add(vector);return this;},expandByScalar:function(scalar){this.min.addScalar(-scalar);this.max.addScalar(scalar);return this;},containsPoint:function(point){if(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y){return false;}return true;},containsBox:function(box){if(this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y){return true;}return false;},getParameter:function(point,optionalTarget){// This can potentially have a divide by zero if the box\n// has a size dimension of 0.\nvar result=optionalTarget||new THREE.Vector2();return result.set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y));},intersectsBox:function(box){// using 6 splitting planes to rule out intersections.\nif(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y){return false;}return true;},clampPoint:function(point,optionalTarget){var result=optionalTarget||new THREE.Vector2();return result.copy(point).clamp(this.min,this.max);},distanceToPoint:function(){var v1=new THREE.Vector2();return function(point){var clampedPoint=v1.copy(point).clamp(this.min,this.max);return clampedPoint.sub(point).length();};}(),intersect:function(box){this.min.max(box.min);this.max.min(box.max);return this;},union:function(box){this.min.min(box.min);this.max.max(box.max);return this;},translate:function(offset){this.min.add(offset);this.max.add(offset);return this;},equals:function(box){return box.min.equals(this.min)&&box.max.equals(this.max);}};// File:src/math/Box3.js\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.Box3=function(min,max){this.min=min!==undefined?min:new THREE.Vector3(+Infinity,+Infinity,+Infinity);this.max=max!==undefined?max:new THREE.Vector3(-Infinity,-Infinity,-Infinity);};THREE.Box3.prototype={constructor:THREE.Box3,set:function(min,max){this.min.copy(min);this.max.copy(max);return this;},setFromArray:function(array){var minX=+Infinity;var minY=+Infinity;var minZ=+Infinity;var maxX=-Infinity;var maxY=-Infinity;var maxZ=-Infinity;for(var i=0,l=array.length;i<l;i+=3){var x=array[i];var y=array[i+1];var z=array[i+2];if(x<minX)minX=x;if(y<minY)minY=y;if(z<minZ)minZ=z;if(x>maxX)maxX=x;if(y>maxY)maxY=y;if(z>maxZ)maxZ=z;}this.min.set(minX,minY,minZ);this.max.set(maxX,maxY,maxZ);},setFromPoints:function(points){this.makeEmpty();for(var i=0,il=points.length;i<il;i++){this.expandByPoint(points[i]);}return this;},setFromCenterAndSize:function(){var v1=new THREE.Vector3();return function(center,size){var halfSize=v1.copy(size).multiplyScalar(0.5);this.min.copy(center).sub(halfSize);this.max.copy(center).add(halfSize);return this;};}(),setFromObject:function(){// Computes the world-axis-aligned bounding box of an object (including its children),\n// accounting for both the object's, and children's, world transforms\nvar v1=new THREE.Vector3();return function(object){var scope=this;object.updateMatrixWorld(true);this.makeEmpty();object.traverse(function(node){var geometry=node.geometry;if(geometry!==undefined){if(geometry instanceof THREE.Geometry){var vertices=geometry.vertices;for(var i=0,il=vertices.length;i<il;i++){v1.copy(vertices[i]);v1.applyMatrix4(node.matrixWorld);scope.expandByPoint(v1);}}else if(geometry instanceof THREE.BufferGeometry&&geometry.attributes['position']!==undefined){var positions=geometry.attributes['position'].array;for(var i=0,il=positions.length;i<il;i+=3){v1.fromArray(positions,i);v1.applyMatrix4(node.matrixWorld);scope.expandByPoint(v1);}}}});return this;};}(),clone:function(){return new this.constructor().copy(this);},copy:function(box){this.min.copy(box.min);this.max.copy(box.max);return this;},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this;},isEmpty:function(){// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\nreturn this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z;},center:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.addVectors(this.min,this.max).multiplyScalar(0.5);},size:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.subVectors(this.max,this.min);},expandByPoint:function(point){this.min.min(point);this.max.max(point);return this;},expandByVector:function(vector){this.min.sub(vector);this.max.add(vector);return this;},expandByScalar:function(scalar){this.min.addScalar(-scalar);this.max.addScalar(scalar);return this;},containsPoint:function(point){if(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y||point.z<this.min.z||point.z>this.max.z){return false;}return true;},containsBox:function(box){if(this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y&&this.min.z<=box.min.z&&box.max.z<=this.max.z){return true;}return false;},getParameter:function(point,optionalTarget){// This can potentially have a divide by zero if the box\n// has a size dimension of 0.\nvar result=optionalTarget||new THREE.Vector3();return result.set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y),(point.z-this.min.z)/(this.max.z-this.min.z));},intersectsBox:function(box){// using 6 splitting planes to rule out intersections.\nif(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y||box.max.z<this.min.z||box.min.z>this.max.z){return false;}return true;},intersectsSphere:function(){var closestPoint;return function intersectsSphere(sphere){if(closestPoint===undefined)closestPoint=new THREE.Vector3();// Find the point on the AABB closest to the sphere center.\nthis.clampPoint(sphere.center,closestPoint);// If that point is inside the sphere, the AABB and sphere intersect.\nreturn closestPoint.distanceToSquared(sphere.center)<=sphere.radius*sphere.radius;};}(),intersectsPlane:function(plane){// We compute the minimum and maximum dot product values. If those values\n// are on the same side (back or front) of the plane, then there is no intersection.\nvar min,max;if(plane.normal.x>0){min=plane.normal.x*this.min.x;max=plane.normal.x*this.max.x;}else{min=plane.normal.x*this.max.x;max=plane.normal.x*this.min.x;}if(plane.normal.y>0){min+=plane.normal.y*this.min.y;max+=plane.normal.y*this.max.y;}else{min+=plane.normal.y*this.max.y;max+=plane.normal.y*this.min.y;}if(plane.normal.z>0){min+=plane.normal.z*this.min.z;max+=plane.normal.z*this.max.z;}else{min+=plane.normal.z*this.max.z;max+=plane.normal.z*this.min.z;}return min<=plane.constant&&max>=plane.constant;},clampPoint:function(point,optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.copy(point).clamp(this.min,this.max);},distanceToPoint:function(){var v1=new THREE.Vector3();return function(point){var clampedPoint=v1.copy(point).clamp(this.min,this.max);return clampedPoint.sub(point).length();};}(),getBoundingSphere:function(){var v1=new THREE.Vector3();return function(optionalTarget){var result=optionalTarget||new THREE.Sphere();result.center=this.center();result.radius=this.size(v1).length()*0.5;return result;};}(),intersect:function(box){this.min.max(box.min);this.max.min(box.max);// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\nif(this.isEmpty())this.makeEmpty();return this;},union:function(box){this.min.min(box.min);this.max.max(box.max);return this;},applyMatrix4:function(){var points=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];return function(matrix){// transform of empty box is an empty box.\nif(this.isEmpty())return this;// NOTE: I am using a binary pattern to specify all 2^3 combinations below\npoints[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(matrix);// 000\npoints[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(matrix);// 001\npoints[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(matrix);// 010\npoints[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(matrix);// 011\npoints[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(matrix);// 100\npoints[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(matrix);// 101\npoints[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(matrix);// 110\npoints[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(matrix);// 111\nthis.setFromPoints(points);return this;};}(),translate:function(offset){this.min.add(offset);this.max.add(offset);return this;},equals:function(box){return box.min.equals(this.min)&&box.max.equals(this.max);}};// File:src/math/Matrix3.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n * @author tschw\r\n */THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);if(arguments.length>0){console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.');}};THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(n11,n12,n13,n21,n22,n23,n31,n32,n33){var te=this.elements;te[0]=n11;te[1]=n21;te[2]=n31;te[3]=n12;te[4]=n22;te[5]=n32;te[6]=n13;te[7]=n23;te[8]=n33;return this;},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this;},clone:function(){return new this.constructor().fromArray(this.elements);},copy:function(m){var me=m.elements;this.set(me[0],me[3],me[6],me[1],me[4],me[7],me[2],me[5],me[8]);return this;},setFromMatrix4:function(m){var me=m.elements;this.set(me[0],me[4],me[8],me[1],me[5],me[9],me[2],me[6],me[10]);return this;},applyToVector3Array:function(){var v1;return function(array,offset,length){if(v1===undefined)v1=new THREE.Vector3();if(offset===undefined)offset=0;if(length===undefined)length=array.length;for(var i=0,j=offset;i<length;i+=3,j+=3){v1.fromArray(array,j);v1.applyMatrix3(this);v1.toArray(array,j);}return array;};}(),applyToBuffer:function(){var v1;return function applyToBuffer(buffer,offset,length){if(v1===undefined)v1=new THREE.Vector3();if(offset===undefined)offset=0;if(length===undefined)length=buffer.length/buffer.itemSize;for(var i=0,j=offset;i<length;i++,j++){v1.x=buffer.getX(j);v1.y=buffer.getY(j);v1.z=buffer.getZ(j);v1.applyMatrix3(this);buffer.setXYZ(v1.x,v1.y,v1.z);}return buffer;};}(),multiplyScalar:function(s){var te=this.elements;te[0]*=s;te[3]*=s;te[6]*=s;te[1]*=s;te[4]*=s;te[7]*=s;te[2]*=s;te[5]*=s;te[8]*=s;return this;},determinant:function(){var te=this.elements;var a=te[0],b=te[1],c=te[2],d=te[3],e=te[4],f=te[5],g=te[6],h=te[7],i=te[8];return a*e*i-a*f*h-b*d*i+b*f*g+c*d*h-c*e*g;},getInverse:function(matrix,throwOnDegenerate){if(matrix instanceof THREE.Matrix4){console.error(\"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\");}var me=matrix.elements,te=this.elements,n11=me[0],n21=me[1],n31=me[2],n12=me[3],n22=me[4],n32=me[5],n13=me[6],n23=me[7],n33=me[8],t11=n33*n22-n32*n23,t12=n32*n13-n33*n12,t13=n23*n12-n22*n13,det=n11*t11+n21*t12+n31*t13;if(det===0){var msg=\"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";if(throwOnDegenerate||false){throw new Error(msg);}else{console.warn(msg);}return this.identity();}var detInv=1/det;te[0]=t11*detInv;te[1]=(n31*n23-n33*n21)*detInv;te[2]=(n32*n21-n31*n22)*detInv;te[3]=t12*detInv;te[4]=(n33*n11-n31*n13)*detInv;te[5]=(n31*n12-n32*n11)*detInv;te[6]=t13*detInv;te[7]=(n21*n13-n23*n11)*detInv;te[8]=(n22*n11-n21*n12)*detInv;return this;},transpose:function(){var tmp,m=this.elements;tmp=m[1];m[1]=m[3];m[3]=tmp;tmp=m[2];m[2]=m[6];m[6]=tmp;tmp=m[5];m[5]=m[7];m[7]=tmp;return this;},flattenToArrayOffset:function(array,offset){console.warn(\"THREE.Matrix3: .flattenToArrayOffset is deprecated \"+\"- just use .toArray instead.\");return this.toArray(array,offset);},getNormalMatrix:function(matrix4){return this.setFromMatrix4(matrix4).getInverse(this).transpose();},transposeIntoArray:function(r){var m=this.elements;r[0]=m[0];r[1]=m[3];r[2]=m[6];r[3]=m[1];r[4]=m[4];r[5]=m[7];r[6]=m[2];r[7]=m[5];r[8]=m[8];return this;},fromArray:function(array){this.elements.set(array);return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;var te=this.elements;array[offset]=te[0];array[offset+1]=te[1];array[offset+2]=te[2];array[offset+3]=te[3];array[offset+4]=te[4];array[offset+5]=te[5];array[offset+6]=te[6];array[offset+7]=te[7];array[offset+8]=te[8];return array;}};// File:src/math/Matrix4.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(arguments.length>0){console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.');}};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){var te=this.elements;te[0]=n11;te[4]=n12;te[8]=n13;te[12]=n14;te[1]=n21;te[5]=n22;te[9]=n23;te[13]=n24;te[2]=n31;te[6]=n32;te[10]=n33;te[14]=n34;te[3]=n41;te[7]=n42;te[11]=n43;te[15]=n44;return this;},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this;},clone:function(){return new THREE.Matrix4().fromArray(this.elements);},copy:function(m){this.elements.set(m.elements);return this;},copyPosition:function(m){var te=this.elements;var me=m.elements;te[12]=me[12];te[13]=me[13];te[14]=me[14];return this;},extractBasis:function(xAxis,yAxis,zAxis){xAxis.setFromMatrixColumn(this,0);yAxis.setFromMatrixColumn(this,1);zAxis.setFromMatrixColumn(this,2);return this;},makeBasis:function(xAxis,yAxis,zAxis){this.set(xAxis.x,yAxis.x,zAxis.x,0,xAxis.y,yAxis.y,zAxis.y,0,xAxis.z,yAxis.z,zAxis.z,0,0,0,0,1);return this;},extractRotation:function(){var v1;return function(m){if(v1===undefined)v1=new THREE.Vector3();var te=this.elements;var me=m.elements;var scaleX=1/v1.setFromMatrixColumn(m,0).length();var scaleY=1/v1.setFromMatrixColumn(m,1).length();var scaleZ=1/v1.setFromMatrixColumn(m,2).length();te[0]=me[0]*scaleX;te[1]=me[1]*scaleX;te[2]=me[2]*scaleX;te[4]=me[4]*scaleY;te[5]=me[5]*scaleY;te[6]=me[6]*scaleY;te[8]=me[8]*scaleZ;te[9]=me[9]*scaleZ;te[10]=me[10]*scaleZ;return this;};}(),makeRotationFromEuler:function(euler){if(euler instanceof THREE.Euler===false){console.error('THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');}var te=this.elements;var x=euler.x,y=euler.y,z=euler.z;var a=Math.cos(x),b=Math.sin(x);var c=Math.cos(y),d=Math.sin(y);var e=Math.cos(z),f=Math.sin(z);if(euler.order==='XYZ'){var ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e;te[4]=-c*f;te[8]=d;te[1]=af+be*d;te[5]=ae-bf*d;te[9]=-b*c;te[2]=bf-ae*d;te[6]=be+af*d;te[10]=a*c;}else if(euler.order==='YXZ'){var ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce+df*b;te[4]=de*b-cf;te[8]=a*d;te[1]=a*f;te[5]=a*e;te[9]=-b;te[2]=cf*b-de;te[6]=df+ce*b;te[10]=a*c;}else if(euler.order==='ZXY'){var ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce-df*b;te[4]=-a*f;te[8]=de+cf*b;te[1]=cf+de*b;te[5]=a*e;te[9]=df-ce*b;te[2]=-a*d;te[6]=b;te[10]=a*c;}else if(euler.order==='ZYX'){var ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e;te[4]=be*d-af;te[8]=ae*d+bf;te[1]=c*f;te[5]=bf*d+ae;te[9]=af*d-be;te[2]=-d;te[6]=b*c;te[10]=a*c;}else if(euler.order==='YZX'){var ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e;te[4]=bd-ac*f;te[8]=bc*f+ad;te[1]=f;te[5]=a*e;te[9]=-b*e;te[2]=-d*e;te[6]=ad*f+bc;te[10]=ac-bd*f;}else if(euler.order==='XZY'){var ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e;te[4]=-f;te[8]=d*e;te[1]=ac*f+bd;te[5]=a*e;te[9]=ad*f-bc;te[2]=bc*f-ad;te[6]=b*e;te[10]=bd*f+ac;}// last column\nte[3]=0;te[7]=0;te[11]=0;// bottom row\nte[12]=0;te[13]=0;te[14]=0;te[15]=1;return this;},makeRotationFromQuaternion:function(q){var te=this.elements;var x=q.x,y=q.y,z=q.z,w=q.w;var x2=x+x,y2=y+y,z2=z+z;var xx=x*x2,xy=x*y2,xz=x*z2;var yy=y*y2,yz=y*z2,zz=z*z2;var wx=w*x2,wy=w*y2,wz=w*z2;te[0]=1-(yy+zz);te[4]=xy-wz;te[8]=xz+wy;te[1]=xy+wz;te[5]=1-(xx+zz);te[9]=yz-wx;te[2]=xz-wy;te[6]=yz+wx;te[10]=1-(xx+yy);// last column\nte[3]=0;te[7]=0;te[11]=0;// bottom row\nte[12]=0;te[13]=0;te[14]=0;te[15]=1;return this;},lookAt:function(){var x,y,z;return function(eye,target,up){if(x===undefined){x=new THREE.Vector3();y=new THREE.Vector3();z=new THREE.Vector3();}var te=this.elements;z.subVectors(eye,target).normalize();if(z.lengthSq()===0){z.z=1;}x.crossVectors(up,z).normalize();if(x.lengthSq()===0){z.z+=0.0001;x.crossVectors(up,z).normalize();}y.crossVectors(z,x);te[0]=x.x;te[4]=y.x;te[8]=z.x;te[1]=x.y;te[5]=y.y;te[9]=z.y;te[2]=x.z;te[6]=y.z;te[10]=z.z;return this;};}(),multiply:function(m,n){if(n!==undefined){console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');return this.multiplyMatrices(m,n);}return this.multiplyMatrices(this,m);},premultiply:function(m){return this.multiplyMatrices(m,this);},multiplyMatrices:function(a,b){var ae=a.elements;var be=b.elements;var te=this.elements;var a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12];var a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13];var a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14];var a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15];var b11=be[0],b12=be[4],b13=be[8],b14=be[12];var b21=be[1],b22=be[5],b23=be[9],b24=be[13];var b31=be[2],b32=be[6],b33=be[10],b34=be[14];var b41=be[3],b42=be[7],b43=be[11],b44=be[15];te[0]=a11*b11+a12*b21+a13*b31+a14*b41;te[4]=a11*b12+a12*b22+a13*b32+a14*b42;te[8]=a11*b13+a12*b23+a13*b33+a14*b43;te[12]=a11*b14+a12*b24+a13*b34+a14*b44;te[1]=a21*b11+a22*b21+a23*b31+a24*b41;te[5]=a21*b12+a22*b22+a23*b32+a24*b42;te[9]=a21*b13+a22*b23+a23*b33+a24*b43;te[13]=a21*b14+a22*b24+a23*b34+a24*b44;te[2]=a31*b11+a32*b21+a33*b31+a34*b41;te[6]=a31*b12+a32*b22+a33*b32+a34*b42;te[10]=a31*b13+a32*b23+a33*b33+a34*b43;te[14]=a31*b14+a32*b24+a33*b34+a34*b44;te[3]=a41*b11+a42*b21+a43*b31+a44*b41;te[7]=a41*b12+a42*b22+a43*b32+a44*b42;te[11]=a41*b13+a42*b23+a43*b33+a44*b43;te[15]=a41*b14+a42*b24+a43*b34+a44*b44;return this;},multiplyToArray:function(a,b,r){var te=this.elements;this.multiplyMatrices(a,b);r[0]=te[0];r[1]=te[1];r[2]=te[2];r[3]=te[3];r[4]=te[4];r[5]=te[5];r[6]=te[6];r[7]=te[7];r[8]=te[8];r[9]=te[9];r[10]=te[10];r[11]=te[11];r[12]=te[12];r[13]=te[13];r[14]=te[14];r[15]=te[15];return this;},multiplyScalar:function(s){var te=this.elements;te[0]*=s;te[4]*=s;te[8]*=s;te[12]*=s;te[1]*=s;te[5]*=s;te[9]*=s;te[13]*=s;te[2]*=s;te[6]*=s;te[10]*=s;te[14]*=s;te[3]*=s;te[7]*=s;te[11]*=s;te[15]*=s;return this;},applyToVector3Array:function(){var v1;return function(array,offset,length){if(v1===undefined)v1=new THREE.Vector3();if(offset===undefined)offset=0;if(length===undefined)length=array.length;for(var i=0,j=offset;i<length;i+=3,j+=3){v1.fromArray(array,j);v1.applyMatrix4(this);v1.toArray(array,j);}return array;};}(),applyToBuffer:function(){var v1;return function applyToBuffer(buffer,offset,length){if(v1===undefined)v1=new THREE.Vector3();if(offset===undefined)offset=0;if(length===undefined)length=buffer.length/buffer.itemSize;for(var i=0,j=offset;i<length;i++,j++){v1.x=buffer.getX(j);v1.y=buffer.getY(j);v1.z=buffer.getZ(j);v1.applyMatrix4(this);buffer.setXYZ(v1.x,v1.y,v1.z);}return buffer;};}(),determinant:function(){var te=this.elements;var n11=te[0],n12=te[4],n13=te[8],n14=te[12];var n21=te[1],n22=te[5],n23=te[9],n24=te[13];var n31=te[2],n32=te[6],n33=te[10],n34=te[14];var n41=te[3],n42=te[7],n43=te[11],n44=te[15];//TODO: make this more efficient\n//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\nreturn n41*(+n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34)+n42*(+n11*n23*n34-n11*n24*n33+n14*n21*n33-n13*n21*n34+n13*n24*n31-n14*n23*n31)+n43*(+n11*n24*n32-n11*n22*n34-n14*n21*n32+n12*n21*n34+n14*n22*n31-n12*n24*n31)+n44*(-n13*n22*n31-n11*n23*n32+n11*n22*n33+n13*n21*n32-n12*n21*n33+n12*n23*n31);},transpose:function(){var te=this.elements;var tmp;tmp=te[1];te[1]=te[4];te[4]=tmp;tmp=te[2];te[2]=te[8];te[8]=tmp;tmp=te[6];te[6]=te[9];te[9]=tmp;tmp=te[3];te[3]=te[12];te[12]=tmp;tmp=te[7];te[7]=te[13];te[13]=tmp;tmp=te[11];te[11]=te[14];te[14]=tmp;return this;},flattenToArrayOffset:function(array,offset){console.warn(\"THREE.Matrix3: .flattenToArrayOffset is deprecated \"+\"- just use .toArray instead.\");return this.toArray(array,offset);},getPosition:function(){var v1;return function(){if(v1===undefined)v1=new THREE.Vector3();console.warn('THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.');return v1.setFromMatrixColumn(this,3);};}(),setPosition:function(v){var te=this.elements;te[12]=v.x;te[13]=v.y;te[14]=v.z;return this;},getInverse:function(m,throwOnDegenerate){// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\nvar te=this.elements,me=m.elements,n11=me[0],n21=me[1],n31=me[2],n41=me[3],n12=me[4],n22=me[5],n32=me[6],n42=me[7],n13=me[8],n23=me[9],n33=me[10],n43=me[11],n14=me[12],n24=me[13],n34=me[14],n44=me[15],t11=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44,t12=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44,t13=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44,t14=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34;var det=n11*t11+n21*t12+n31*t13+n41*t14;if(det===0){var msg=\"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";if(throwOnDegenerate||false){throw new Error(msg);}else{console.warn(msg);}return this.identity();}var detInv=1/det;te[0]=t11*detInv;te[1]=(n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44)*detInv;te[2]=(n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44)*detInv;te[3]=(n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43)*detInv;te[4]=t12*detInv;te[5]=(n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44)*detInv;te[6]=(n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44)*detInv;te[7]=(n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43)*detInv;te[8]=t13*detInv;te[9]=(n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44)*detInv;te[10]=(n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44)*detInv;te[11]=(n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43)*detInv;te[12]=t14*detInv;te[13]=(n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34)*detInv;te[14]=(n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34)*detInv;te[15]=(n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33)*detInv;return this;},scale:function(v){var te=this.elements;var x=v.x,y=v.y,z=v.z;te[0]*=x;te[4]*=y;te[8]*=z;te[1]*=x;te[5]*=y;te[9]*=z;te[2]*=x;te[6]*=y;te[10]*=z;te[3]*=x;te[7]*=y;te[11]*=z;return this;},getMaxScaleOnAxis:function(){var te=this.elements;var scaleXSq=te[0]*te[0]+te[1]*te[1]+te[2]*te[2];var scaleYSq=te[4]*te[4]+te[5]*te[5]+te[6]*te[6];var scaleZSq=te[8]*te[8]+te[9]*te[9]+te[10]*te[10];return Math.sqrt(Math.max(scaleXSq,scaleYSq,scaleZSq));},makeTranslation:function(x,y,z){this.set(1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1);return this;},makeRotationX:function(theta){var c=Math.cos(theta),s=Math.sin(theta);this.set(1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1);return this;},makeRotationY:function(theta){var c=Math.cos(theta),s=Math.sin(theta);this.set(c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1);return this;},makeRotationZ:function(theta){var c=Math.cos(theta),s=Math.sin(theta);this.set(c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1);return this;},makeRotationAxis:function(axis,angle){// Based on http://www.gamedev.net/reference/articles/article1199.asp\nvar c=Math.cos(angle);var s=Math.sin(angle);var t=1-c;var x=axis.x,y=axis.y,z=axis.z;var tx=t*x,ty=t*y;this.set(tx*x+c,tx*y-s*z,tx*z+s*y,0,tx*y+s*z,ty*y+c,ty*z-s*x,0,tx*z-s*y,ty*z+s*x,t*z*z+c,0,0,0,0,1);return this;},makeScale:function(x,y,z){this.set(x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1);return this;},compose:function(position,quaternion,scale){this.makeRotationFromQuaternion(quaternion);this.scale(scale);this.setPosition(position);return this;},decompose:function(){var vector,matrix;return function(position,quaternion,scale){if(vector===undefined){vector=new THREE.Vector3();matrix=new THREE.Matrix4();}var te=this.elements;var sx=vector.set(te[0],te[1],te[2]).length();var sy=vector.set(te[4],te[5],te[6]).length();var sz=vector.set(te[8],te[9],te[10]).length();// if determine is negative, we need to invert one scale\nvar det=this.determinant();if(det<0){sx=-sx;}position.x=te[12];position.y=te[13];position.z=te[14];// scale the rotation part\nmatrix.elements.set(this.elements);// at this point matrix is incomplete so we can't use .copy()\nvar invSX=1/sx;var invSY=1/sy;var invSZ=1/sz;matrix.elements[0]*=invSX;matrix.elements[1]*=invSX;matrix.elements[2]*=invSX;matrix.elements[4]*=invSY;matrix.elements[5]*=invSY;matrix.elements[6]*=invSY;matrix.elements[8]*=invSZ;matrix.elements[9]*=invSZ;matrix.elements[10]*=invSZ;quaternion.setFromRotationMatrix(matrix);scale.x=sx;scale.y=sy;scale.z=sz;return this;};}(),makeFrustum:function(left,right,bottom,top,near,far){var te=this.elements;var x=2*near/(right-left);var y=2*near/(top-bottom);var a=(right+left)/(right-left);var b=(top+bottom)/(top-bottom);var c=-(far+near)/(far-near);var d=-2*far*near/(far-near);te[0]=x;te[4]=0;te[8]=a;te[12]=0;te[1]=0;te[5]=y;te[9]=b;te[13]=0;te[2]=0;te[6]=0;te[10]=c;te[14]=d;te[3]=0;te[7]=0;te[11]=-1;te[15]=0;return this;},makePerspective:function(fov,aspect,near,far){var ymax=near*Math.tan(THREE.Math.DEG2RAD*fov*0.5);var ymin=-ymax;var xmin=ymin*aspect;var xmax=ymax*aspect;return this.makeFrustum(xmin,xmax,ymin,ymax,near,far);},makeOrthographic:function(left,right,top,bottom,near,far){var te=this.elements;var w=1.0/(right-left);var h=1.0/(top-bottom);var p=1.0/(far-near);var x=(right+left)*w;var y=(top+bottom)*h;var z=(far+near)*p;te[0]=2*w;te[4]=0;te[8]=0;te[12]=-x;te[1]=0;te[5]=2*h;te[9]=0;te[13]=-y;te[2]=0;te[6]=0;te[10]=-2*p;te[14]=-z;te[3]=0;te[7]=0;te[11]=0;te[15]=1;return this;},equals:function(matrix){var te=this.elements;var me=matrix.elements;for(var i=0;i<16;i++){if(te[i]!==me[i])return false;}return true;},fromArray:function(array){this.elements.set(array);return this;},toArray:function(array,offset){if(array===undefined)array=[];if(offset===undefined)offset=0;var te=this.elements;array[offset]=te[0];array[offset+1]=te[1];array[offset+2]=te[2];array[offset+3]=te[3];array[offset+4]=te[4];array[offset+5]=te[5];array[offset+6]=te[6];array[offset+7]=te[7];array[offset+8]=te[8];array[offset+9]=te[9];array[offset+10]=te[10];array[offset+11]=te[11];array[offset+12]=te[12];array[offset+13]=te[13];array[offset+14]=te[14];array[offset+15]=te[15];return array;}};// File:src/math/Ray.js\n/**\r\n * @author bhouston / http://clara.io\r\n */THREE.Ray=function(origin,direction){this.origin=origin!==undefined?origin:new THREE.Vector3();this.direction=direction!==undefined?direction:new THREE.Vector3();};THREE.Ray.prototype={constructor:THREE.Ray,set:function(origin,direction){this.origin.copy(origin);this.direction.copy(direction);return this;},clone:function(){return new this.constructor().copy(this);},copy:function(ray){this.origin.copy(ray.origin);this.direction.copy(ray.direction);return this;},at:function(t,optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.copy(this.direction).multiplyScalar(t).add(this.origin);},lookAt:function(v){this.direction.copy(v).sub(this.origin).normalize();return this;},recast:function(){var v1=new THREE.Vector3();return function(t){this.origin.copy(this.at(t,v1));return this;};}(),closestPointToPoint:function(point,optionalTarget){var result=optionalTarget||new THREE.Vector3();result.subVectors(point,this.origin);var directionDistance=result.dot(this.direction);if(directionDistance<0){return result.copy(this.origin);}return result.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);},distanceToPoint:function(point){return Math.sqrt(this.distanceSqToPoint(point));},distanceSqToPoint:function(){var v1=new THREE.Vector3();return function(point){var directionDistance=v1.subVectors(point,this.origin).dot(this.direction);// point behind the ray\nif(directionDistance<0){return this.origin.distanceToSquared(point);}v1.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);return v1.distanceToSquared(point);};}(),distanceSqToSegment:function(){var segCenter=new THREE.Vector3();var segDir=new THREE.Vector3();var diff=new THREE.Vector3();return function(v0,v1,optionalPointOnRay,optionalPointOnSegment){// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n// It returns the min distance between the ray and the segment\n// defined by v0 and v1\n// It can also set two optional targets :\n// - The closest point on the ray\n// - The closest point on the segment\nsegCenter.copy(v0).add(v1).multiplyScalar(0.5);segDir.copy(v1).sub(v0).normalize();diff.copy(this.origin).sub(segCenter);var segExtent=v0.distanceTo(v1)*0.5;var a01=-this.direction.dot(segDir);var b0=diff.dot(this.direction);var b1=-diff.dot(segDir);var c=diff.lengthSq();var det=Math.abs(1-a01*a01);var s0,s1,sqrDist,extDet;if(det>0){// The ray and segment are not parallel.\ns0=a01*b1-b0;s1=a01*b0-b1;extDet=segExtent*det;if(s0>=0){if(s1>=-extDet){if(s1<=extDet){// region 0\n// Minimum at interior points of ray and segment.\nvar invDet=1/det;s0*=invDet;s1*=invDet;sqrDist=s0*(s0+a01*s1+2*b0)+s1*(a01*s0+s1+2*b1)+c;}else{// region 1\ns1=segExtent;s0=Math.max(0,-(a01*s1+b0));sqrDist=-s0*s0+s1*(s1+2*b1)+c;}}else{// region 5\ns1=-segExtent;s0=Math.max(0,-(a01*s1+b0));sqrDist=-s0*s0+s1*(s1+2*b1)+c;}}else{if(s1<=-extDet){// region 4\ns0=Math.max(0,-(-a01*segExtent+b0));s1=s0>0?-segExtent:Math.min(Math.max(-segExtent,-b1),segExtent);sqrDist=-s0*s0+s1*(s1+2*b1)+c;}else if(s1<=extDet){// region 3\ns0=0;s1=Math.min(Math.max(-segExtent,-b1),segExtent);sqrDist=s1*(s1+2*b1)+c;}else{// region 2\ns0=Math.max(0,-(a01*segExtent+b0));s1=s0>0?segExtent:Math.min(Math.max(-segExtent,-b1),segExtent);sqrDist=-s0*s0+s1*(s1+2*b1)+c;}}}else{// Ray and segment are parallel.\ns1=a01>0?-segExtent:segExtent;s0=Math.max(0,-(a01*s1+b0));sqrDist=-s0*s0+s1*(s1+2*b1)+c;}if(optionalPointOnRay){optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin);}if(optionalPointOnSegment){optionalPointOnSegment.copy(segDir).multiplyScalar(s1).add(segCenter);}return sqrDist;};}(),intersectSphere:function(){var v1=new THREE.Vector3();return function(sphere,optionalTarget){v1.subVectors(sphere.center,this.origin);var tca=v1.dot(this.direction);var d2=v1.dot(v1)-tca*tca;var radius2=sphere.radius*sphere.radius;if(d2>radius2)return null;var thc=Math.sqrt(radius2-d2);// t0 = first intersect point - entrance on front of sphere\nvar t0=tca-thc;// t1 = second intersect point - exit point on back of sphere\nvar t1=tca+thc;// test to see if both t0 and t1 are behind the ray - if so, return null\nif(t0<0&&t1<0)return null;// test to see if t0 is behind the ray:\n// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n// in order to always return an intersect point that is in front of the ray.\nif(t0<0)return this.at(t1,optionalTarget);// else t0 is in front of the ray, so return the first collision point scaled by t0\nreturn this.at(t0,optionalTarget);};}(),intersectsSphere:function(sphere){return this.distanceToPoint(sphere.center)<=sphere.radius;},distanceToPlane:function(plane){var denominator=plane.normal.dot(this.direction);if(denominator===0){// line is coplanar, return origin\nif(plane.distanceToPoint(this.origin)===0){return 0;}// Null is preferable to undefined since undefined means.... it is undefined\nreturn null;}var t=-(this.origin.dot(plane.normal)+plane.constant)/denominator;// Return if the ray never intersects the plane\nreturn t>=0?t:null;},intersectPlane:function(plane,optionalTarget){var t=this.distanceToPlane(plane);if(t===null){return null;}return this.at(t,optionalTarget);},intersectsPlane:function(plane){// check if the ray lies on the plane first\nvar distToPoint=plane.distanceToPoint(this.origin);if(distToPoint===0){return true;}var denominator=plane.normal.dot(this.direction);if(denominator*distToPoint<0){return true;}// ray origin is behind the plane (and is pointing behind it)\nreturn false;},intersectBox:function(box,optionalTarget){var tmin,tmax,tymin,tymax,tzmin,tzmax;var invdirx=1/this.direction.x,invdiry=1/this.direction.y,invdirz=1/this.direction.z;var origin=this.origin;if(invdirx>=0){tmin=(box.min.x-origin.x)*invdirx;tmax=(box.max.x-origin.x)*invdirx;}else{tmin=(box.max.x-origin.x)*invdirx;tmax=(box.min.x-origin.x)*invdirx;}if(invdiry>=0){tymin=(box.min.y-origin.y)*invdiry;tymax=(box.max.y-origin.y)*invdiry;}else{tymin=(box.max.y-origin.y)*invdiry;tymax=(box.min.y-origin.y)*invdiry;}if(tmin>tymax||tymin>tmax)return null;// These lines also handle the case where tmin or tmax is NaN\n// (result of 0 * Infinity). x !== x returns true if x is NaN\nif(tymin>tmin||tmin!==tmin)tmin=tymin;if(tymax<tmax||tmax!==tmax)tmax=tymax;if(invdirz>=0){tzmin=(box.min.z-origin.z)*invdirz;tzmax=(box.max.z-origin.z)*invdirz;}else{tzmin=(box.max.z-origin.z)*invdirz;tzmax=(box.min.z-origin.z)*invdirz;}if(tmin>tzmax||tzmin>tmax)return null;if(tzmin>tmin||tmin!==tmin)tmin=tzmin;if(tzmax<tmax||tmax!==tmax)tmax=tzmax;//return point closest to the ray (positive side)\nif(tmax<0)return null;return this.at(tmin>=0?tmin:tmax,optionalTarget);},intersectsBox:function(){var v=new THREE.Vector3();return function(box){return this.intersectBox(box,v)!==null;};}(),intersectTriangle:function(){// Compute the offset origin, edges, and normal.\nvar diff=new THREE.Vector3();var edge1=new THREE.Vector3();var edge2=new THREE.Vector3();var normal=new THREE.Vector3();return function(a,b,c,backfaceCulling,optionalTarget){// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\nedge1.subVectors(b,a);edge2.subVectors(c,a);normal.crossVectors(edge1,edge2);// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\nvar DdN=this.direction.dot(normal);var sign;if(DdN>0){if(backfaceCulling)return null;sign=1;}else if(DdN<0){sign=-1;DdN=-DdN;}else{return null;}diff.subVectors(this.origin,a);var DdQxE2=sign*this.direction.dot(edge2.crossVectors(diff,edge2));// b1 < 0, no intersection\nif(DdQxE2<0){return null;}var DdE1xQ=sign*this.direction.dot(edge1.cross(diff));// b2 < 0, no intersection\nif(DdE1xQ<0){return null;}// b1+b2 > 1, no intersection\nif(DdQxE2+DdE1xQ>DdN){return null;}// Line intersects triangle, check if ray does.\nvar QdN=-sign*diff.dot(normal);// t < 0, no intersection\nif(QdN<0){return null;}// Ray intersects triangle.\nreturn this.at(QdN/DdN,optionalTarget);};}(),applyMatrix4:function(matrix4){this.direction.add(this.origin).applyMatrix4(matrix4);this.origin.applyMatrix4(matrix4);this.direction.sub(this.origin);this.direction.normalize();return this;},equals:function(ray){return ray.origin.equals(this.origin)&&ray.direction.equals(this.direction);}};// File:src/math/Sphere.js\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Sphere=function(center,radius){this.center=center!==undefined?center:new THREE.Vector3();this.radius=radius!==undefined?radius:0;};THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(center,radius){this.center.copy(center);this.radius=radius;return this;},setFromPoints:function(){var box=new THREE.Box3();return function(points,optionalCenter){var center=this.center;if(optionalCenter!==undefined){center.copy(optionalCenter);}else{box.setFromPoints(points).center(center);}var maxRadiusSq=0;for(var i=0,il=points.length;i<il;i++){maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(points[i]));}this.radius=Math.sqrt(maxRadiusSq);return this;};}(),clone:function(){return new this.constructor().copy(this);},copy:function(sphere){this.center.copy(sphere.center);this.radius=sphere.radius;return this;},empty:function(){return this.radius<=0;},containsPoint:function(point){return point.distanceToSquared(this.center)<=this.radius*this.radius;},distanceToPoint:function(point){return point.distanceTo(this.center)-this.radius;},intersectsSphere:function(sphere){var radiusSum=this.radius+sphere.radius;return sphere.center.distanceToSquared(this.center)<=radiusSum*radiusSum;},intersectsBox:function(box){return box.intersectsSphere(this);},intersectsPlane:function(plane){// We use the following equation to compute the signed distance from\n// the center of the sphere to the plane.\n//\n// distance = q * n - d\n//\n// If this distance is greater than the radius of the sphere,\n// then there is no intersection.\nreturn Math.abs(this.center.dot(plane.normal)-plane.constant)<=this.radius;},clampPoint:function(point,optionalTarget){var deltaLengthSq=this.center.distanceToSquared(point);var result=optionalTarget||new THREE.Vector3();result.copy(point);if(deltaLengthSq>this.radius*this.radius){result.sub(this.center).normalize();result.multiplyScalar(this.radius).add(this.center);}return result;},getBoundingBox:function(optionalTarget){var box=optionalTarget||new THREE.Box3();box.set(this.center,this.center);box.expandByScalar(this.radius);return box;},applyMatrix4:function(matrix){this.center.applyMatrix4(matrix);this.radius=this.radius*matrix.getMaxScaleOnAxis();return this;},translate:function(offset){this.center.add(offset);return this;},equals:function(sphere){return sphere.center.equals(this.center)&&sphere.radius===this.radius;}};// File:src/math/Frustum.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://clara.io\r\n */THREE.Frustum=function(p0,p1,p2,p3,p4,p5){this.planes=[p0!==undefined?p0:new THREE.Plane(),p1!==undefined?p1:new THREE.Plane(),p2!==undefined?p2:new THREE.Plane(),p3!==undefined?p3:new THREE.Plane(),p4!==undefined?p4:new THREE.Plane(),p5!==undefined?p5:new THREE.Plane()];};THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(p0,p1,p2,p3,p4,p5){var planes=this.planes;planes[0].copy(p0);planes[1].copy(p1);planes[2].copy(p2);planes[3].copy(p3);planes[4].copy(p4);planes[5].copy(p5);return this;},clone:function(){return new this.constructor().copy(this);},copy:function(frustum){var planes=this.planes;for(var i=0;i<6;i++){planes[i].copy(frustum.planes[i]);}return this;},setFromMatrix:function(m){var planes=this.planes;var me=m.elements;var me0=me[0],me1=me[1],me2=me[2],me3=me[3];var me4=me[4],me5=me[5],me6=me[6],me7=me[7];var me8=me[8],me9=me[9],me10=me[10],me11=me[11];var me12=me[12],me13=me[13],me14=me[14],me15=me[15];planes[0].setComponents(me3-me0,me7-me4,me11-me8,me15-me12).normalize();planes[1].setComponents(me3+me0,me7+me4,me11+me8,me15+me12).normalize();planes[2].setComponents(me3+me1,me7+me5,me11+me9,me15+me13).normalize();planes[3].setComponents(me3-me1,me7-me5,me11-me9,me15-me13).normalize();planes[4].setComponents(me3-me2,me7-me6,me11-me10,me15-me14).normalize();planes[5].setComponents(me3+me2,me7+me6,me11+me10,me15+me14).normalize();return this;},intersectsObject:function(){var sphere=new THREE.Sphere();return function(object){var geometry=object.geometry;if(geometry.boundingSphere===null)geometry.computeBoundingSphere();sphere.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);return this.intersectsSphere(sphere);};}(),intersectsSprite:function(){var sphere=new THREE.Sphere();return function(sprite){sphere.center.set(0,0,0);sphere.radius=0.7071067811865476;sphere.applyMatrix4(sprite.matrixWorld);return this.intersectsSphere(sphere);};}(),intersectsSphere:function(sphere){var planes=this.planes;var center=sphere.center;var negRadius=-sphere.radius;for(var i=0;i<6;i++){var distance=planes[i].distanceToPoint(center);if(distance<negRadius){return false;}}return true;},intersectsBox:function(){var p1=new THREE.Vector3(),p2=new THREE.Vector3();return function(box){var planes=this.planes;for(var i=0;i<6;i++){var plane=planes[i];p1.x=plane.normal.x>0?box.min.x:box.max.x;p2.x=plane.normal.x>0?box.max.x:box.min.x;p1.y=plane.normal.y>0?box.min.y:box.max.y;p2.y=plane.normal.y>0?box.max.y:box.min.y;p1.z=plane.normal.z>0?box.min.z:box.max.z;p2.z=plane.normal.z>0?box.max.z:box.min.z;var d1=plane.distanceToPoint(p1);var d2=plane.distanceToPoint(p2);// if both outside plane, no intersection\nif(d1<0&&d2<0){return false;}}return true;};}(),containsPoint:function(point){var planes=this.planes;for(var i=0;i<6;i++){if(planes[i].distanceToPoint(point)<0){return false;}}return true;}};// File:src/math/Plane.js\n/**\r\n * @author bhouston / http://clara.io\r\n */THREE.Plane=function(normal,constant){this.normal=normal!==undefined?normal:new THREE.Vector3(1,0,0);this.constant=constant!==undefined?constant:0;};THREE.Plane.prototype={constructor:THREE.Plane,set:function(normal,constant){this.normal.copy(normal);this.constant=constant;return this;},setComponents:function(x,y,z,w){this.normal.set(x,y,z);this.constant=w;return this;},setFromNormalAndCoplanarPoint:function(normal,point){this.normal.copy(normal);this.constant=-point.dot(this.normal);// must be this.normal, not normal, as this.normal is normalized\nreturn this;},setFromCoplanarPoints:function(){var v1=new THREE.Vector3();var v2=new THREE.Vector3();return function(a,b,c){var normal=v1.subVectors(c,b).cross(v2.subVectors(a,b)).normalize();// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\nthis.setFromNormalAndCoplanarPoint(normal,a);return this;};}(),clone:function(){return new this.constructor().copy(this);},copy:function(plane){this.normal.copy(plane.normal);this.constant=plane.constant;return this;},normalize:function(){// Note: will lead to a divide by zero if the plane is invalid.\nvar inverseNormalLength=1.0/this.normal.length();this.normal.multiplyScalar(inverseNormalLength);this.constant*=inverseNormalLength;return this;},negate:function(){this.constant*=-1;this.normal.negate();return this;},distanceToPoint:function(point){return this.normal.dot(point)+this.constant;},distanceToSphere:function(sphere){return this.distanceToPoint(sphere.center)-sphere.radius;},projectPoint:function(point,optionalTarget){return this.orthoPoint(point,optionalTarget).sub(point).negate();},orthoPoint:function(point,optionalTarget){var perpendicularMagnitude=this.distanceToPoint(point);var result=optionalTarget||new THREE.Vector3();return result.copy(this.normal).multiplyScalar(perpendicularMagnitude);},intersectLine:function(){var v1=new THREE.Vector3();return function(line,optionalTarget){var result=optionalTarget||new THREE.Vector3();var direction=line.delta(v1);var denominator=this.normal.dot(direction);if(denominator===0){// line is coplanar, return origin\nif(this.distanceToPoint(line.start)===0){return result.copy(line.start);}// Unsure if this is the correct method to handle this case.\nreturn undefined;}var t=-(line.start.dot(this.normal)+this.constant)/denominator;if(t<0||t>1){return undefined;}return result.copy(direction).multiplyScalar(t).add(line.start);};}(),intersectsLine:function(line){// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\nvar startSign=this.distanceToPoint(line.start);var endSign=this.distanceToPoint(line.end);return startSign<0&&endSign>0||endSign<0&&startSign>0;},intersectsBox:function(box){return box.intersectsPlane(this);},intersectsSphere:function(sphere){return sphere.intersectsPlane(this);},coplanarPoint:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.copy(this.normal).multiplyScalar(-this.constant);},applyMatrix4:function(){var v1=new THREE.Vector3();var m1=new THREE.Matrix3();return function(matrix,optionalNormalMatrix){var referencePoint=this.coplanarPoint(v1).applyMatrix4(matrix);// transform normal based on theory here:\n// http://www.songho.ca/opengl/gl_normaltransform.html\nvar normalMatrix=optionalNormalMatrix||m1.getNormalMatrix(matrix);var normal=this.normal.applyMatrix3(normalMatrix).normalize();// recalculate constant (like in setFromNormalAndCoplanarPoint)\nthis.constant=-referencePoint.dot(normal);return this;};}(),translate:function(offset){this.constant=this.constant-offset.dot(this.normal);return this;},equals:function(plane){return plane.normal.equals(this.normal)&&plane.constant===this.constant;}};// File:src/math/Spherical.js\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The poles (phi) are at the positive and negative y axis.\r\n * The equator starts at positive z.\r\n */THREE.Spherical=function(radius,phi,theta){this.radius=radius!==undefined?radius:1.0;this.phi=phi!==undefined?phi:0;// up / down towards top and bottom pole\nthis.theta=theta!==undefined?theta:0;// around the equator of the sphere\nreturn this;};THREE.Spherical.prototype={constructor:THREE.Spherical,set:function(radius,phi,theta){this.radius=radius;this.phi=phi;this.theta=theta;return this;},clone:function(){return new this.constructor().copy(this);},copy:function(other){this.radius.copy(other.radius);this.phi.copy(other.phi);this.theta.copy(other.theta);return this;},// restrict phi to be betwee EPS and PI-EPS\nmakeSafe:function(){var EPS=0.000001;this.phi=Math.max(EPS,Math.min(Math.PI-EPS,this.phi));return this;},setFromVector3:function(vec3){this.radius=vec3.length();if(this.radius===0){this.theta=0;this.phi=0;}else{this.theta=Math.atan2(vec3.x,vec3.z);// equator angle around y-up axis\nthis.phi=Math.acos(THREE.Math.clamp(vec3.y/this.radius,-1,1));// polar angle\n}return this;}};// File:src/math/Math.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){// http://www.broofa.com/Tools/Math.uuid.htm\nvar chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');var uuid=new Array(36);var rnd=0,r;return function(){for(var i=0;i<36;i++){if(i===8||i===13||i===18||i===23){uuid[i]='-';}else if(i===14){uuid[i]='4';}else{if(rnd<=0x02)rnd=0x2000000+Math.random()*0x1000000|0;r=rnd&0xf;rnd=rnd>>4;uuid[i]=chars[i===19?r&0x3|0x8:r];}}return uuid.join('');};}(),clamp:function(value,min,max){return Math.max(min,Math.min(max,value));},// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\neuclideanModulo:function(n,m){return(n%m+m)%m;},// Linear mapping from range <a1, a2> to range <b1, b2>\nmapLinear:function(x,a1,a2,b1,b2){return b1+(x-a1)*(b2-b1)/(a2-a1);},// http://en.wikipedia.org/wiki/Smoothstep\nsmoothstep:function(x,min,max){if(x<=min)return 0;if(x>=max)return 1;x=(x-min)/(max-min);return x*x*(3-2*x);},smootherstep:function(x,min,max){if(x<=min)return 0;if(x>=max)return 1;x=(x-min)/(max-min);return x*x*x*(x*(x*6-15)+10);},random16:function(){console.warn('THREE.Math.random16() has been deprecated. Use Math.random() instead.');return Math.random();},// Random integer from <low, high> interval\nrandInt:function(low,high){return low+Math.floor(Math.random()*(high-low+1));},// Random float from <low, high> interval\nrandFloat:function(low,high){return low+Math.random()*(high-low);},// Random float from <-range/2, range/2> interval\nrandFloatSpread:function(range){return range*(0.5-Math.random());},degToRad:function(degrees){return degrees*THREE.Math.DEG2RAD;},radToDeg:function(radians){return radians*THREE.Math.RAD2DEG;},isPowerOfTwo:function(value){return(value&value-1)===0&&value!==0;},nearestPowerOfTwo:function(value){return Math.pow(2,Math.round(Math.log(value)/Math.LN2));},nextPowerOfTwo:function(value){value--;value|=value>>1;value|=value>>2;value|=value>>4;value|=value>>8;value|=value>>16;value++;return value;}};// File:src/math/Spline.js\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Spline=function(points){this.points=points;var c=[],v3={x:0,y:0,z:0},point,intPoint,weight,w2,w3,pa,pb,pc,pd;this.initFromArray=function(a){this.points=[];for(var i=0;i<a.length;i++){this.points[i]={x:a[i][0],y:a[i][1],z:a[i][2]};}};this.getPoint=function(k){point=(this.points.length-1)*k;intPoint=Math.floor(point);weight=point-intPoint;c[0]=intPoint===0?intPoint:intPoint-1;c[1]=intPoint;c[2]=intPoint>this.points.length-2?this.points.length-1:intPoint+1;c[3]=intPoint>this.points.length-3?this.points.length-1:intPoint+2;pa=this.points[c[0]];pb=this.points[c[1]];pc=this.points[c[2]];pd=this.points[c[3]];w2=weight*weight;w3=weight*w2;v3.x=interpolate(pa.x,pb.x,pc.x,pd.x,weight,w2,w3);v3.y=interpolate(pa.y,pb.y,pc.y,pd.y,weight,w2,w3);v3.z=interpolate(pa.z,pb.z,pc.z,pd.z,weight,w2,w3);return v3;};this.getControlPointsArray=function(){var i,p,l=this.points.length,coords=[];for(i=0;i<l;i++){p=this.points[i];coords[i]=[p.x,p.y,p.z];}return coords;};// approximate length by summing linear segments\nthis.getLength=function(nSubDivisions){var i,index,nSamples,position,point=0,intPoint=0,oldIntPoint=0,oldPosition=new THREE.Vector3(),tmpVec=new THREE.Vector3(),chunkLengths=[],totalLength=0;// first point has 0 length\nchunkLengths[0]=0;if(!nSubDivisions)nSubDivisions=100;nSamples=this.points.length*nSubDivisions;oldPosition.copy(this.points[0]);for(i=1;i<nSamples;i++){index=i/nSamples;position=this.getPoint(index);tmpVec.copy(position);totalLength+=tmpVec.distanceTo(oldPosition);oldPosition.copy(position);point=(this.points.length-1)*index;intPoint=Math.floor(point);if(intPoint!==oldIntPoint){chunkLengths[intPoint]=totalLength;oldIntPoint=intPoint;}}// last point ends with total length\nchunkLengths[chunkLengths.length]=totalLength;return{chunks:chunkLengths,total:totalLength};};this.reparametrizeByArcLength=function(samplingCoef){var i,j,index,indexCurrent,indexNext,realDistance,sampling,position,newpoints=[],tmpVec=new THREE.Vector3(),sl=this.getLength();newpoints.push(tmpVec.copy(this.points[0]).clone());for(i=1;i<this.points.length;i++){//tmpVec.copy( this.points[ i - 1 ] );\n//linearDistance = tmpVec.distanceTo( this.points[ i ] );\nrealDistance=sl.chunks[i]-sl.chunks[i-1];sampling=Math.ceil(samplingCoef*realDistance/sl.total);indexCurrent=(i-1)/(this.points.length-1);indexNext=i/(this.points.length-1);for(j=1;j<sampling-1;j++){index=indexCurrent+j*(1/sampling)*(indexNext-indexCurrent);position=this.getPoint(index);newpoints.push(tmpVec.copy(position).clone());}newpoints.push(tmpVec.copy(this.points[i]).clone());}this.points=newpoints;};// Catmull-Rom\nfunction interpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5,v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1;}};// File:src/math/Triangle.js\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Triangle=function(a,b,c){this.a=a!==undefined?a:new THREE.Vector3();this.b=b!==undefined?b:new THREE.Vector3();this.c=c!==undefined?c:new THREE.Vector3();};THREE.Triangle.normal=function(){var v0=new THREE.Vector3();return function(a,b,c,optionalTarget){var result=optionalTarget||new THREE.Vector3();result.subVectors(c,b);v0.subVectors(a,b);result.cross(v0);var resultLengthSq=result.lengthSq();if(resultLengthSq>0){return result.multiplyScalar(1/Math.sqrt(resultLengthSq));}return result.set(0,0,0);};}();// static/instance method to calculate barycentric coordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTHREE.Triangle.barycoordFromPoint=function(){var v0=new THREE.Vector3();var v1=new THREE.Vector3();var v2=new THREE.Vector3();return function(point,a,b,c,optionalTarget){v0.subVectors(c,a);v1.subVectors(b,a);v2.subVectors(point,a);var dot00=v0.dot(v0);var dot01=v0.dot(v1);var dot02=v0.dot(v2);var dot11=v1.dot(v1);var dot12=v1.dot(v2);var denom=dot00*dot11-dot01*dot01;var result=optionalTarget||new THREE.Vector3();// collinear or singular triangle\nif(denom===0){// arbitrary location outside of triangle?\n// not sure if this is the best idea, maybe should be returning undefined\nreturn result.set(-2,-1,-1);}var invDenom=1/denom;var u=(dot11*dot02-dot01*dot12)*invDenom;var v=(dot00*dot12-dot01*dot02)*invDenom;// barycentric coordinates must always sum to 1\nreturn result.set(1-u-v,v,u);};}();THREE.Triangle.containsPoint=function(){var v1=new THREE.Vector3();return function(point,a,b,c){var result=THREE.Triangle.barycoordFromPoint(point,a,b,c,v1);return result.x>=0&&result.y>=0&&result.x+result.y<=1;};}();THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this;},setFromPointsAndIndices:function(points,i0,i1,i2){this.a.copy(points[i0]);this.b.copy(points[i1]);this.c.copy(points[i2]);return this;},clone:function(){return new this.constructor().copy(this);},copy:function(triangle){this.a.copy(triangle.a);this.b.copy(triangle.b);this.c.copy(triangle.c);return this;},area:function(){var v0=new THREE.Vector3();var v1=new THREE.Vector3();return function(){v0.subVectors(this.c,this.b);v1.subVectors(this.a,this.b);return v0.cross(v1).length()*0.5;};}(),midpoint:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();return result.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3);},normal:function(optionalTarget){return THREE.Triangle.normal(this.a,this.b,this.c,optionalTarget);},plane:function(optionalTarget){var result=optionalTarget||new THREE.Plane();return result.setFromCoplanarPoints(this.a,this.b,this.c);},barycoordFromPoint:function(point,optionalTarget){return THREE.Triangle.barycoordFromPoint(point,this.a,this.b,this.c,optionalTarget);},containsPoint:function(point){return THREE.Triangle.containsPoint(point,this.a,this.b,this.c);},closestPointToPoint:function(){var plane,edgeList,projectedPoint,closestPoint;return function closestPointToPoint(point,optionalTarget){if(plane===undefined){plane=new THREE.Plane();edgeList=[new THREE.Line3(),new THREE.Line3(),new THREE.Line3()];projectedPoint=new THREE.Vector3();closestPoint=new THREE.Vector3();}var result=optionalTarget||new THREE.Vector3();var minDistance=Infinity;// project the point onto the plane of the triangle\nplane.setFromCoplanarPoints(this.a,this.b,this.c);plane.projectPoint(point,projectedPoint);// check if the projection lies within the triangle\nif(this.containsPoint(projectedPoint)===true){// if so, this is the closest point\nresult.copy(projectedPoint);}else{// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\nedgeList[0].set(this.a,this.b);edgeList[1].set(this.b,this.c);edgeList[2].set(this.c,this.a);for(var i=0;i<edgeList.length;i++){edgeList[i].closestPointToPoint(projectedPoint,true,closestPoint);var distance=projectedPoint.distanceToSquared(closestPoint);if(distance<minDistance){minDistance=distance;result.copy(closestPoint);}}}return result;};}(),equals:function(triangle){return triangle.a.equals(this.a)&&triangle.b.equals(this.b)&&triangle.c.equals(this.c);}};// File:src/math/Interpolant.js\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n * @author tschw\r\n */THREE.Interpolant=function(parameterPositions,sampleValues,sampleSize,resultBuffer){this.parameterPositions=parameterPositions;this._cachedIndex=0;this.resultBuffer=resultBuffer!==undefined?resultBuffer:new sampleValues.constructor(sampleSize);this.sampleValues=sampleValues;this.valueSize=sampleSize;};THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(t){var pp=this.parameterPositions,i1=this._cachedIndex,t1=pp[i1],t0=pp[i1-1];validate_interval:{seek:{var right;linear_scan:{//- See http://jsperf.com/comparison-to-undefined/3\n//- slower code:\n//-\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\nforward_scan:if(!(t<t1)){for(var giveUpAt=i1+2;;){if(t1===undefined){if(t<t0)break forward_scan;// after end\ni1=pp.length;this._cachedIndex=i1;return this.afterEnd_(i1-1,t,t0);}if(i1===giveUpAt)break;// this loop\nt0=t1;t1=pp[++i1];if(t<t1){// we have arrived at the sought interval\nbreak seek;}}// prepare binary search on the right side of the index\nright=pp.length;break linear_scan;}//- slower code:\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\nif(!(t>=t0)){// looping?\nvar t1global=pp[1];if(t<t1global){i1=2;// + 1, using the scan for the details\nt0=t1global;}// linear reverse scan\nfor(var giveUpAt=i1-2;;){if(t0===undefined){// before start\nthis._cachedIndex=0;return this.beforeStart_(0,t,t1);}if(i1===giveUpAt)break;// this loop\nt1=t0;t0=pp[--i1-1];if(t>=t0){// we have arrived at the sought interval\nbreak seek;}}// prepare binary search on the left side of the index\nright=i1;i1=0;break linear_scan;}// the interval is valid\nbreak validate_interval;}// linear scan\n// binary search\nwhile(i1<right){var mid=i1+right>>>1;if(t<pp[mid]){right=mid;}else{i1=mid+1;}}t1=pp[i1];t0=pp[i1-1];// check boundary cases, again\nif(t0===undefined){this._cachedIndex=0;return this.beforeStart_(0,t,t1);}if(t1===undefined){i1=pp.length;this._cachedIndex=i1;return this.afterEnd_(i1-1,t0,t);}}// seek\nthis._cachedIndex=i1;this.intervalChanged_(i1,t0,t1);}// validate_interval\nreturn this.interpolate_(i1,t0,t,t1);},settings:null,// optional, subclass-specific settings structure\n// Note: The indirection allows central control of many interpolants.\n// --- Protected interface\nDefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_;},copySampleValue_:function(index){// copies a sample value to the result buffer\nvar result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,offset=index*stride;for(var i=0;i!==stride;++i){result[i]=values[offset+i];}return result;},// Template methods for derived classes:\ninterpolate_:function(i1,t0,t,t1){throw new Error(\"call to abstract method\");// implementations shall return this.resultBuffer\n},intervalChanged_:function(i1,t0,t1){// empty\n}};Object.assign(THREE.Interpolant.prototype,{beforeStart_://( 0, t, t0 ), returns this.resultBuffer\nTHREE.Interpolant.prototype.copySampleValue_,afterEnd_://( N-1, tN-1, t ), returns this.resultBuffer\nTHREE.Interpolant.prototype.copySampleValue_});// File:src/math/interpolants/CubicInterpolant.js\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n *\r\n * @author tschw\r\n */THREE.CubicInterpolant=function(parameterPositions,sampleValues,sampleSize,resultBuffer){THREE.Interpolant.call(this,parameterPositions,sampleValues,sampleSize,resultBuffer);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0;};THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(i1,t0,t1){var pp=this.parameterPositions,iPrev=i1-2,iNext=i1+1,tPrev=pp[iPrev],tNext=pp[iNext];if(tPrev===undefined){switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:// f'(t0) = 0\niPrev=i1;tPrev=2*t0-t1;break;case THREE.WrapAroundEnding:// use the other end of the curve\niPrev=pp.length-2;tPrev=t0+pp[iPrev]-pp[iPrev+1];break;default:// ZeroCurvatureEnding\n// f''(t0) = 0 a.k.a. Natural Spline\niPrev=i1;tPrev=t1;}}if(tNext===undefined){switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:// f'(tN) = 0\niNext=i1;tNext=2*t1-t0;break;case THREE.WrapAroundEnding:// use the other end of the curve\niNext=1;tNext=t1+pp[1]-pp[0];break;default:// ZeroCurvatureEnding\n// f''(tN) = 0, a.k.a. Natural Spline\niNext=i1-1;tNext=t0;}}var halfDt=(t1-t0)*0.5,stride=this.valueSize;this._weightPrev=halfDt/(t0-tPrev);this._weightNext=halfDt/(tNext-t1);this._offsetPrev=iPrev*stride;this._offsetNext=iNext*stride;},interpolate_:function(i1,t0,t,t1){var result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,o1=i1*stride,o0=o1-stride,oP=this._offsetPrev,oN=this._offsetNext,wP=this._weightPrev,wN=this._weightNext,p=(t-t0)/(t1-t0),pp=p*p,ppp=pp*p;// evaluate polynomials\nvar sP=-wP*ppp+2*wP*pp-wP*p;var s0=(1+wP)*ppp+(-1.5-2*wP)*pp+(-0.5+wP)*p+1;var s1=(-1-wN)*ppp+(1.5+wN)*pp+0.5*p;var sN=wN*ppp-wN*pp;// combine data linearly\nfor(var i=0;i!==stride;++i){result[i]=sP*values[oP+i]+s0*values[o0+i]+s1*values[o1+i]+sN*values[oN+i];}return result;}});// File:src/math/interpolants/DiscreteInterpolant.js\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n *\r\n * @author tschw\r\n */THREE.DiscreteInterpolant=function(parameterPositions,sampleValues,sampleSize,resultBuffer){THREE.Interpolant.call(this,parameterPositions,sampleValues,sampleSize,resultBuffer);};THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(i1,t0,t,t1){return this.copySampleValue_(i1-1);}});// File:src/math/interpolants/LinearInterpolant.js\n/**\r\n * @author tschw\r\n */THREE.LinearInterpolant=function(parameterPositions,sampleValues,sampleSize,resultBuffer){THREE.Interpolant.call(this,parameterPositions,sampleValues,sampleSize,resultBuffer);};THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(i1,t0,t,t1){var result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,offset1=i1*stride,offset0=offset1-stride,weight1=(t-t0)/(t1-t0),weight0=1-weight1;for(var i=0;i!==stride;++i){result[i]=values[offset0+i]*weight0+values[offset1+i]*weight1;}return result;}});// File:src/math/interpolants/QuaternionLinearInterpolant.js\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n *\r\n * @author tschw\r\n */THREE.QuaternionLinearInterpolant=function(parameterPositions,sampleValues,sampleSize,resultBuffer){THREE.Interpolant.call(this,parameterPositions,sampleValues,sampleSize,resultBuffer);};THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(i1,t0,t,t1){var result=this.resultBuffer,values=this.sampleValues,stride=this.valueSize,offset=i1*stride,alpha=(t-t0)/(t1-t0);for(var end=offset+stride;offset!==end;offset+=4){THREE.Quaternion.slerpFlat(result,0,values,offset-stride,values,offset,alpha);}return result;}});// File:src/core/Clock.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Clock=function(autoStart){this.autoStart=autoStart!==undefined?autoStart:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false;};THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=(performance||Date).now();this.oldTime=this.startTime;this.running=true;},stop:function(){this.getElapsedTime();this.running=false;},getElapsedTime:function(){this.getDelta();return this.elapsedTime;},getDelta:function(){var diff=0;if(this.autoStart&&!this.running){this.start();}if(this.running){var newTime=(performance||Date).now();diff=(newTime-this.oldTime)/1000;this.oldTime=newTime;this.elapsedTime+=diff;}return diff;}};// File:src/core/EventDispatcher.js\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */THREE.EventDispatcher=function(){};Object.assign(THREE.EventDispatcher.prototype,{addEventListener:function(type,listener){if(this._listeners===undefined)this._listeners={};var listeners=this._listeners;if(listeners[type]===undefined){listeners[type]=[];}if(listeners[type].indexOf(listener)===-1){listeners[type].push(listener);}},hasEventListener:function(type,listener){if(this._listeners===undefined)return false;var listeners=this._listeners;if(listeners[type]!==undefined&&listeners[type].indexOf(listener)!==-1){return true;}return false;},removeEventListener:function(type,listener){if(this._listeners===undefined)return;var listeners=this._listeners;var listenerArray=listeners[type];if(listenerArray!==undefined){var index=listenerArray.indexOf(listener);if(index!==-1){listenerArray.splice(index,1);}}},dispatchEvent:function(event){if(this._listeners===undefined)return;var listeners=this._listeners;var listenerArray=listeners[event.type];if(listenerArray!==undefined){event.target=this;var array=[],i=0;var length=listenerArray.length;for(i=0;i<length;i++){array[i]=listenerArray[i];}for(i=0;i<length;i++){array[i].call(this,event);}}}});// File:src/core/Layers.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Layers=function(){this.mask=1;};THREE.Layers.prototype={constructor:THREE.Layers,set:function(channel){this.mask=1<<channel;},enable:function(channel){this.mask|=1<<channel;},toggle:function(channel){this.mask^=1<<channel;},disable:function(channel){this.mask&=~(1<<channel);},test:function(layers){return(this.mask&layers.mask)!==0;}};// File:src/core/Raycaster.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://clara.io/\r\n * @author stephomi / http://stephaneginier.com/\r\n */(function(THREE){THREE.Raycaster=function(origin,direction,near,far){this.ray=new THREE.Ray(origin,direction);// direction is assumed to be normalized (for accurate distance calculations)\nthis.near=near||0;this.far=far||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn('THREE.Raycaster: params.PointCloud has been renamed to params.Points.');return this.Points;}}});};function ascSort(a,b){return a.distance-b.distance;}function intersectObject(object,raycaster,intersects,recursive){if(object.visible===false)return;object.raycast(raycaster,intersects);if(recursive===true){var children=object.children;for(var i=0,l=children.length;i<l;i++){intersectObject(children[i],raycaster,intersects,true);}}}//\nTHREE.Raycaster.prototype={constructor:THREE.Raycaster,linePrecision:1,set:function(origin,direction){// direction is assumed to be normalized (for accurate distance calculations)\nthis.ray.set(origin,direction);},setFromCamera:function(coords,camera){if(camera instanceof THREE.PerspectiveCamera){this.ray.origin.setFromMatrixPosition(camera.matrixWorld);this.ray.direction.set(coords.x,coords.y,0.5).unproject(camera).sub(this.ray.origin).normalize();}else if(camera instanceof THREE.OrthographicCamera){this.ray.origin.set(coords.x,coords.y,-1).unproject(camera);this.ray.direction.set(0,0,-1).transformDirection(camera.matrixWorld);}else{console.error('THREE.Raycaster: Unsupported camera type.');}},intersectObject:function(object,recursive){var intersects=[];intersectObject(object,this,intersects,recursive);intersects.sort(ascSort);return intersects;},intersectObjects:function(objects,recursive){var intersects=[];if(Array.isArray(objects)===false){console.warn('THREE.Raycaster.intersectObjects: objects is not an Array.');return intersects;}for(var i=0,l=objects.length;i<l;i++){intersectObject(objects[i],this,intersects,recursive);}intersects.sort(ascSort);return intersects;}};})(THREE);// File:src/core/Object3D.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */THREE.Object3D=function(){Object.defineProperty(this,'id',{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.type='Object3D';this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var position=new THREE.Vector3();var rotation=new THREE.Euler();var quaternion=new THREE.Quaternion();var scale=new THREE.Vector3(1,1,1);function onRotationChange(){quaternion.setFromEuler(rotation,false);}function onQuaternionChange(){rotation.setFromQuaternion(quaternion,undefined,false);}rotation.onChange(onRotationChange);quaternion.onChange(onQuaternionChange);Object.defineProperties(this,{position:{enumerable:true,value:position},rotation:{enumerable:true,value:rotation},quaternion:{enumerable:true,value:quaternion},scale:{enumerable:true,value:scale},modelViewMatrix:{value:new THREE.Matrix4()},normalMatrix:{value:new THREE.Matrix3()}});this.matrix=new THREE.Matrix4();this.matrixWorld=new THREE.Matrix4();this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new THREE.Layers();this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={};};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=true;Object.assign(THREE.Object3D.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(matrix){this.matrix.multiplyMatrices(matrix,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale);},setRotationFromAxisAngle:function(axis,angle){// assumes axis is normalized\nthis.quaternion.setFromAxisAngle(axis,angle);},setRotationFromEuler:function(euler){this.quaternion.setFromEuler(euler,true);},setRotationFromMatrix:function(m){// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nthis.quaternion.setFromRotationMatrix(m);},setRotationFromQuaternion:function(q){// assumes q is normalized\nthis.quaternion.copy(q);},rotateOnAxis:function(){// rotate object on axis in object space\n// axis is assumed to be normalized\nvar q1=new THREE.Quaternion();return function(axis,angle){q1.setFromAxisAngle(axis,angle);this.quaternion.multiply(q1);return this;};}(),rotateX:function(){var v1=new THREE.Vector3(1,0,0);return function(angle){return this.rotateOnAxis(v1,angle);};}(),rotateY:function(){var v1=new THREE.Vector3(0,1,0);return function(angle){return this.rotateOnAxis(v1,angle);};}(),rotateZ:function(){var v1=new THREE.Vector3(0,0,1);return function(angle){return this.rotateOnAxis(v1,angle);};}(),translateOnAxis:function(){// translate object by distance along axis in object space\n// axis is assumed to be normalized\nvar v1=new THREE.Vector3();return function(axis,distance){v1.copy(axis).applyQuaternion(this.quaternion);this.position.add(v1.multiplyScalar(distance));return this;};}(),translateX:function(){var v1=new THREE.Vector3(1,0,0);return function(distance){return this.translateOnAxis(v1,distance);};}(),translateY:function(){var v1=new THREE.Vector3(0,1,0);return function(distance){return this.translateOnAxis(v1,distance);};}(),translateZ:function(){var v1=new THREE.Vector3(0,0,1);return function(distance){return this.translateOnAxis(v1,distance);};}(),localToWorld:function(vector){return vector.applyMatrix4(this.matrixWorld);},worldToLocal:function(){var m1=new THREE.Matrix4();return function(vector){return vector.applyMatrix4(m1.getInverse(this.matrixWorld));};}(),lookAt:function(){// This routine does not support objects with rotated and/or translated parent(s)\nvar m1=new THREE.Matrix4();return function(vector){m1.lookAt(vector,this.position,this.up);this.quaternion.setFromRotationMatrix(m1);};}(),add:function(object){if(arguments.length>1){for(var i=0;i<arguments.length;i++){this.add(arguments[i]);}return this;}if(object===this){console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",object);return this;}if(object instanceof THREE.Object3D){if(object.parent!==null){object.parent.remove(object);}object.parent=this;object.dispatchEvent({type:'added'});this.children.push(object);}else{console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",object);}return this;},remove:function(object){if(arguments.length>1){for(var i=0;i<arguments.length;i++){this.remove(arguments[i]);}}var index=this.children.indexOf(object);if(index!==-1){object.parent=null;object.dispatchEvent({type:'removed'});this.children.splice(index,1);}},getObjectById:function(id){return this.getObjectByProperty('id',id);},getObjectByName:function(name){return this.getObjectByProperty('name',name);},getObjectByProperty:function(name,value){if(this[name]===value)return this;for(var i=0,l=this.children.length;i<l;i++){var child=this.children[i];var object=child.getObjectByProperty(name,value);if(object!==undefined){return object;}}return undefined;},getWorldPosition:function(optionalTarget){var result=optionalTarget||new THREE.Vector3();this.updateMatrixWorld(true);return result.setFromMatrixPosition(this.matrixWorld);},getWorldQuaternion:function(){var position=new THREE.Vector3();var scale=new THREE.Vector3();return function(optionalTarget){var result=optionalTarget||new THREE.Quaternion();this.updateMatrixWorld(true);this.matrixWorld.decompose(position,result,scale);return result;};}(),getWorldRotation:function(){var quaternion=new THREE.Quaternion();return function(optionalTarget){var result=optionalTarget||new THREE.Euler();this.getWorldQuaternion(quaternion);return result.setFromQuaternion(quaternion,this.rotation.order,false);};}(),getWorldScale:function(){var position=new THREE.Vector3();var quaternion=new THREE.Quaternion();return function(optionalTarget){var result=optionalTarget||new THREE.Vector3();this.updateMatrixWorld(true);this.matrixWorld.decompose(position,quaternion,result);return result;};}(),getWorldDirection:function(){var quaternion=new THREE.Quaternion();return function(optionalTarget){var result=optionalTarget||new THREE.Vector3();this.getWorldQuaternion(quaternion);return result.set(0,0,1).applyQuaternion(quaternion);};}(),raycast:function(){},traverse:function(callback){callback(this);var children=this.children;for(var i=0,l=children.length;i<l;i++){children[i].traverse(callback);}},traverseVisible:function(callback){if(this.visible===false)return;callback(this);var children=this.children;for(var i=0,l=children.length;i<l;i++){children[i].traverseVisible(callback);}},traverseAncestors:function(callback){var parent=this.parent;if(parent!==null){callback(parent);parent.traverseAncestors(callback);}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true;},updateMatrixWorld:function(force){if(this.matrixAutoUpdate===true)this.updateMatrix();if(this.matrixWorldNeedsUpdate===true||force===true){if(this.parent===null){this.matrixWorld.copy(this.matrix);}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);}this.matrixWorldNeedsUpdate=false;force=true;}// update children\nfor(var i=0,l=this.children.length;i<l;i++){this.children[i].updateMatrixWorld(force);}},toJSON:function(meta){// meta is '' when called from JSON.stringify\nvar isRootObject=meta===undefined||meta==='';var output={};// meta is a hash used to collect geometries, materials.\n// not providing it implies that this is the root object\n// being serialized.\nif(isRootObject){// initialize meta obj\nmeta={geometries:{},materials:{},textures:{},images:{}};output.metadata={version:4.4,type:'Object',generator:'Object3D.toJSON'};}// standard Object3D serialization\nvar object={};object.uuid=this.uuid;object.type=this.type;if(this.name!=='')object.name=this.name;if(JSON.stringify(this.userData)!=='{}')object.userData=this.userData;if(this.castShadow===true)object.castShadow=true;if(this.receiveShadow===true)object.receiveShadow=true;if(this.visible===false)object.visible=false;object.matrix=this.matrix.toArray();//\nif(this.geometry!==undefined){if(meta.geometries[this.geometry.uuid]===undefined){meta.geometries[this.geometry.uuid]=this.geometry.toJSON(meta);}object.geometry=this.geometry.uuid;}if(this.material!==undefined){if(meta.materials[this.material.uuid]===undefined){meta.materials[this.material.uuid]=this.material.toJSON(meta);}object.material=this.material.uuid;}//\nif(this.children.length>0){object.children=[];for(var i=0;i<this.children.length;i++){object.children.push(this.children[i].toJSON(meta).object);}}if(isRootObject){var geometries=extractFromCache(meta.geometries);var materials=extractFromCache(meta.materials);var textures=extractFromCache(meta.textures);var images=extractFromCache(meta.images);if(geometries.length>0)output.geometries=geometries;if(materials.length>0)output.materials=materials;if(textures.length>0)output.textures=textures;if(images.length>0)output.images=images;}output.object=object;return output;// extract data from the cache hash\n// remove metadata on each item\n// and return as array\nfunction extractFromCache(cache){var values=[];for(var key in cache){var data=cache[key];delete data.metadata;values.push(data);}return values;}},clone:function(recursive){return new this.constructor().copy(this,recursive);},copy:function(source,recursive){if(recursive===undefined)recursive=true;this.name=source.name;this.up.copy(source.up);this.position.copy(source.position);this.quaternion.copy(source.quaternion);this.scale.copy(source.scale);this.matrix.copy(source.matrix);this.matrixWorld.copy(source.matrixWorld);this.matrixAutoUpdate=source.matrixAutoUpdate;this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate;this.visible=source.visible;this.castShadow=source.castShadow;this.receiveShadow=source.receiveShadow;this.frustumCulled=source.frustumCulled;this.renderOrder=source.renderOrder;this.userData=JSON.parse(JSON.stringify(source.userData));if(recursive===true){for(var i=0;i<source.children.length;i++){var child=source.children[i];this.add(child.clone());}}return this;}});THREE.Object3DIdCount=0;// File:src/core/Face3.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Face3=function(a,b,c,normal,color,materialIndex){this.a=a;this.b=b;this.c=c;this.normal=normal instanceof THREE.Vector3?normal:new THREE.Vector3();this.vertexNormals=Array.isArray(normal)?normal:[];this.color=color instanceof THREE.Color?color:new THREE.Color();this.vertexColors=Array.isArray(color)?color:[];this.materialIndex=materialIndex!==undefined?materialIndex:0;};THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return new this.constructor().copy(this);},copy:function(source){this.a=source.a;this.b=source.b;this.c=source.c;this.normal.copy(source.normal);this.color.copy(source.color);this.materialIndex=source.materialIndex;for(var i=0,il=source.vertexNormals.length;i<il;i++){this.vertexNormals[i]=source.vertexNormals[i].clone();}for(var i=0,il=source.vertexColors.length;i<il;i++){this.vertexColors[i]=source.vertexColors[i].clone();}return this;}};// File:src/core/BufferAttribute.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.BufferAttribute=function(array,itemSize,normalized){this.uuid=THREE.Math.generateUUID();this.array=array;this.itemSize=itemSize;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=normalized===true;};THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize;},set needsUpdate(value){if(value===true)this.version++;},setDynamic:function(value){this.dynamic=value;return this;},copy:function(source){this.array=new source.array.constructor(source.array);this.itemSize=source.itemSize;this.dynamic=source.dynamic;return this;},copyAt:function(index1,attribute,index2){index1*=this.itemSize;index2*=attribute.itemSize;for(var i=0,l=this.itemSize;i<l;i++){this.array[index1+i]=attribute.array[index2+i];}return this;},copyArray:function(array){this.array.set(array);return this;},copyColorsArray:function(colors){var array=this.array,offset=0;for(var i=0,l=colors.length;i<l;i++){var color=colors[i];if(color===undefined){console.warn('THREE.BufferAttribute.copyColorsArray(): color is undefined',i);color=new THREE.Color();}array[offset++]=color.r;array[offset++]=color.g;array[offset++]=color.b;}return this;},copyIndicesArray:function(indices){var array=this.array,offset=0;for(var i=0,l=indices.length;i<l;i++){var index=indices[i];array[offset++]=index.a;array[offset++]=index.b;array[offset++]=index.c;}return this;},copyVector2sArray:function(vectors){var array=this.array,offset=0;for(var i=0,l=vectors.length;i<l;i++){var vector=vectors[i];if(vector===undefined){console.warn('THREE.BufferAttribute.copyVector2sArray(): vector is undefined',i);vector=new THREE.Vector2();}array[offset++]=vector.x;array[offset++]=vector.y;}return this;},copyVector3sArray:function(vectors){var array=this.array,offset=0;for(var i=0,l=vectors.length;i<l;i++){var vector=vectors[i];if(vector===undefined){console.warn('THREE.BufferAttribute.copyVector3sArray(): vector is undefined',i);vector=new THREE.Vector3();}array[offset++]=vector.x;array[offset++]=vector.y;array[offset++]=vector.z;}return this;},copyVector4sArray:function(vectors){var array=this.array,offset=0;for(var i=0,l=vectors.length;i<l;i++){var vector=vectors[i];if(vector===undefined){console.warn('THREE.BufferAttribute.copyVector4sArray(): vector is undefined',i);vector=new THREE.Vector4();}array[offset++]=vector.x;array[offset++]=vector.y;array[offset++]=vector.z;array[offset++]=vector.w;}return this;},set:function(value,offset){if(offset===undefined)offset=0;this.array.set(value,offset);return this;},getX:function(index){return this.array[index*this.itemSize];},setX:function(index,x){this.array[index*this.itemSize]=x;return this;},getY:function(index){return this.array[index*this.itemSize+1];},setY:function(index,y){this.array[index*this.itemSize+1]=y;return this;},getZ:function(index){return this.array[index*this.itemSize+2];},setZ:function(index,z){this.array[index*this.itemSize+2]=z;return this;},getW:function(index){return this.array[index*this.itemSize+3];},setW:function(index,w){this.array[index*this.itemSize+3]=w;return this;},setXY:function(index,x,y){index*=this.itemSize;this.array[index+0]=x;this.array[index+1]=y;return this;},setXYZ:function(index,x,y,z){index*=this.itemSize;this.array[index+0]=x;this.array[index+1]=y;this.array[index+2]=z;return this;},setXYZW:function(index,x,y,z,w){index*=this.itemSize;this.array[index+0]=x;this.array[index+1]=y;this.array[index+2]=z;this.array[index+3]=w;return this;},clone:function(){return new this.constructor().copy(this);}};//\nTHREE.Int8Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int8Array(array),itemSize);};THREE.Uint8Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint8Array(array),itemSize);};THREE.Uint8ClampedAttribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint8ClampedArray(array),itemSize);};THREE.Int16Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int16Array(array),itemSize);};THREE.Uint16Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint16Array(array),itemSize);};THREE.Int32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int32Array(array),itemSize);};THREE.Uint32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint32Array(array),itemSize);};THREE.Float32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Float32Array(array),itemSize);};THREE.Float64Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Float64Array(array),itemSize);};// Deprecated\nTHREE.DynamicBufferAttribute=function(array,itemSize){console.warn('THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.');return new THREE.BufferAttribute(array,itemSize).setDynamic(true);};// File:src/core/InstancedBufferAttribute.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.InstancedBufferAttribute=function(array,itemSize,meshPerAttribute){THREE.BufferAttribute.call(this,array,itemSize);this.meshPerAttribute=meshPerAttribute||1;};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.copy=function(source){THREE.BufferAttribute.prototype.copy.call(this,source);this.meshPerAttribute=source.meshPerAttribute;return this;};// File:src/core/InterleavedBuffer.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.InterleavedBuffer=function(array,stride){this.uuid=THREE.Math.generateUUID();this.array=array;this.stride=stride;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0;};THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length;},get count(){return this.array.length/this.stride;},set needsUpdate(value){if(value===true)this.version++;},setDynamic:function(value){this.dynamic=value;return this;},copy:function(source){this.array=new source.array.constructor(source.array);this.stride=source.stride;this.dynamic=source.dynamic;return this;},copyAt:function(index1,attribute,index2){index1*=this.stride;index2*=attribute.stride;for(var i=0,l=this.stride;i<l;i++){this.array[index1+i]=attribute.array[index2+i];}return this;},set:function(value,offset){if(offset===undefined)offset=0;this.array.set(value,offset);return this;},clone:function(){return new this.constructor().copy(this);}};// File:src/core/InstancedInterleavedBuffer.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.InstancedInterleavedBuffer=function(array,stride,meshPerAttribute){THREE.InterleavedBuffer.call(this,array,stride);this.meshPerAttribute=meshPerAttribute||1;};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;THREE.InstancedInterleavedBuffer.prototype.copy=function(source){THREE.InterleavedBuffer.prototype.copy.call(this,source);this.meshPerAttribute=source.meshPerAttribute;return this;};// File:src/core/InterleavedBufferAttribute.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.InterleavedBufferAttribute=function(interleavedBuffer,itemSize,offset){this.uuid=THREE.Math.generateUUID();this.data=interleavedBuffer;this.itemSize=itemSize;this.offset=offset;};THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn('THREE.BufferAttribute: .length has been deprecated. Please use .count.');return this.array.length;},get count(){return this.data.count;},setX:function(index,x){this.data.array[index*this.data.stride+this.offset]=x;return this;},setY:function(index,y){this.data.array[index*this.data.stride+this.offset+1]=y;return this;},setZ:function(index,z){this.data.array[index*this.data.stride+this.offset+2]=z;return this;},setW:function(index,w){this.data.array[index*this.data.stride+this.offset+3]=w;return this;},getX:function(index){return this.data.array[index*this.data.stride+this.offset];},getY:function(index){return this.data.array[index*this.data.stride+this.offset+1];},getZ:function(index){return this.data.array[index*this.data.stride+this.offset+2];},getW:function(index){return this.data.array[index*this.data.stride+this.offset+3];},setXY:function(index,x,y){index=index*this.data.stride+this.offset;this.data.array[index+0]=x;this.data.array[index+1]=y;return this;},setXYZ:function(index,x,y,z){index=index*this.data.stride+this.offset;this.data.array[index+0]=x;this.data.array[index+1]=y;this.data.array[index+2]=z;return this;},setXYZW:function(index,x,y,z,w){index=index*this.data.stride+this.offset;this.data.array[index+0]=x;this.data.array[index+1]=y;this.data.array[index+2]=z;this.data.array[index+3]=w;return this;}};// File:src/core/Geometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://clara.io\r\n */THREE.Geometry=function(){Object.defineProperty(this,'id',{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.type='Geometry';this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;// update flags\nthis.verticesNeedUpdate=false;this.elementsNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false;};Object.assign(THREE.Geometry.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(matrix){var normalMatrix=new THREE.Matrix3().getNormalMatrix(matrix);for(var i=0,il=this.vertices.length;i<il;i++){var vertex=this.vertices[i];vertex.applyMatrix4(matrix);}for(var i=0,il=this.faces.length;i<il;i++){var face=this.faces[i];face.normal.applyMatrix3(normalMatrix).normalize();for(var j=0,jl=face.vertexNormals.length;j<jl;j++){face.vertexNormals[j].applyMatrix3(normalMatrix).normalize();}}if(this.boundingBox!==null){this.computeBoundingBox();}if(this.boundingSphere!==null){this.computeBoundingSphere();}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this;},rotateX:function(){// rotate geometry around world x-axis\nvar m1;return function rotateX(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationX(angle);this.applyMatrix(m1);return this;};}(),rotateY:function(){// rotate geometry around world y-axis\nvar m1;return function rotateY(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationY(angle);this.applyMatrix(m1);return this;};}(),rotateZ:function(){// rotate geometry around world z-axis\nvar m1;return function rotateZ(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationZ(angle);this.applyMatrix(m1);return this;};}(),translate:function(){// translate geometry\nvar m1;return function translate(x,y,z){if(m1===undefined)m1=new THREE.Matrix4();m1.makeTranslation(x,y,z);this.applyMatrix(m1);return this;};}(),scale:function(){// scale geometry\nvar m1;return function scale(x,y,z){if(m1===undefined)m1=new THREE.Matrix4();m1.makeScale(x,y,z);this.applyMatrix(m1);return this;};}(),lookAt:function(){var obj;return function lookAt(vector){if(obj===undefined)obj=new THREE.Object3D();obj.lookAt(vector);obj.updateMatrix();this.applyMatrix(obj.matrix);};}(),fromBufferGeometry:function(geometry){var scope=this;var indices=geometry.index!==null?geometry.index.array:undefined;var attributes=geometry.attributes;var positions=attributes.position.array;var normals=attributes.normal!==undefined?attributes.normal.array:undefined;var colors=attributes.color!==undefined?attributes.color.array:undefined;var uvs=attributes.uv!==undefined?attributes.uv.array:undefined;var uvs2=attributes.uv2!==undefined?attributes.uv2.array:undefined;if(uvs2!==undefined)this.faceVertexUvs[1]=[];var tempNormals=[];var tempUVs=[];var tempUVs2=[];for(var i=0,j=0;i<positions.length;i+=3,j+=2){scope.vertices.push(new THREE.Vector3(positions[i],positions[i+1],positions[i+2]));if(normals!==undefined){tempNormals.push(new THREE.Vector3(normals[i],normals[i+1],normals[i+2]));}if(colors!==undefined){scope.colors.push(new THREE.Color(colors[i],colors[i+1],colors[i+2]));}if(uvs!==undefined){tempUVs.push(new THREE.Vector2(uvs[j],uvs[j+1]));}if(uvs2!==undefined){tempUVs2.push(new THREE.Vector2(uvs2[j],uvs2[j+1]));}}function addFace(a,b,c,materialIndex){var vertexNormals=normals!==undefined?[tempNormals[a].clone(),tempNormals[b].clone(),tempNormals[c].clone()]:[];var vertexColors=colors!==undefined?[scope.colors[a].clone(),scope.colors[b].clone(),scope.colors[c].clone()]:[];var face=new THREE.Face3(a,b,c,vertexNormals,vertexColors,materialIndex);scope.faces.push(face);if(uvs!==undefined){scope.faceVertexUvs[0].push([tempUVs[a].clone(),tempUVs[b].clone(),tempUVs[c].clone()]);}if(uvs2!==undefined){scope.faceVertexUvs[1].push([tempUVs2[a].clone(),tempUVs2[b].clone(),tempUVs2[c].clone()]);}}if(indices!==undefined){var groups=geometry.groups;if(groups.length>0){for(var i=0;i<groups.length;i++){var group=groups[i];var start=group.start;var count=group.count;for(var j=start,jl=start+count;j<jl;j+=3){addFace(indices[j],indices[j+1],indices[j+2],group.materialIndex);}}}else{for(var i=0;i<indices.length;i+=3){addFace(indices[i],indices[i+1],indices[i+2]);}}}else{for(var i=0;i<positions.length/3;i+=3){addFace(i,i+1,i+2);}}this.computeFaceNormals();if(geometry.boundingBox!==null){this.boundingBox=geometry.boundingBox.clone();}if(geometry.boundingSphere!==null){this.boundingSphere=geometry.boundingSphere.clone();}return this;},center:function(){this.computeBoundingBox();var offset=this.boundingBox.center().negate();this.translate(offset.x,offset.y,offset.z);return offset;},normalize:function(){this.computeBoundingSphere();var center=this.boundingSphere.center;var radius=this.boundingSphere.radius;var s=radius===0?1:1.0/radius;var matrix=new THREE.Matrix4();matrix.set(s,0,0,-s*center.x,0,s,0,-s*center.y,0,0,s,-s*center.z,0,0,0,1);this.applyMatrix(matrix);return this;},computeFaceNormals:function(){var cb=new THREE.Vector3(),ab=new THREE.Vector3();for(var f=0,fl=this.faces.length;f<fl;f++){var face=this.faces[f];var vA=this.vertices[face.a];var vB=this.vertices[face.b];var vC=this.vertices[face.c];cb.subVectors(vC,vB);ab.subVectors(vA,vB);cb.cross(ab);cb.normalize();face.normal.copy(cb);}},computeVertexNormals:function(areaWeighted){if(areaWeighted===undefined)areaWeighted=true;var v,vl,f,fl,face,vertices;vertices=new Array(this.vertices.length);for(v=0,vl=this.vertices.length;v<vl;v++){vertices[v]=new THREE.Vector3();}if(areaWeighted){// vertex normals weighted by triangle areas\n// http://www.iquilezles.org/www/articles/normals/normals.htm\nvar vA,vB,vC;var cb=new THREE.Vector3(),ab=new THREE.Vector3();for(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];vA=this.vertices[face.a];vB=this.vertices[face.b];vC=this.vertices[face.c];cb.subVectors(vC,vB);ab.subVectors(vA,vB);cb.cross(ab);vertices[face.a].add(cb);vertices[face.b].add(cb);vertices[face.c].add(cb);}}else{for(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];vertices[face.a].add(face.normal);vertices[face.b].add(face.normal);vertices[face.c].add(face.normal);}}for(v=0,vl=this.vertices.length;v<vl;v++){vertices[v].normalize();}for(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];var vertexNormals=face.vertexNormals;if(vertexNormals.length===3){vertexNormals[0].copy(vertices[face.a]);vertexNormals[1].copy(vertices[face.b]);vertexNormals[2].copy(vertices[face.c]);}else{vertexNormals[0]=vertices[face.a].clone();vertexNormals[1]=vertices[face.b].clone();vertexNormals[2]=vertices[face.c].clone();}}if(this.faces.length>0){this.normalsNeedUpdate=true;}},computeMorphNormals:function(){var i,il,f,fl,face;// save original normals\n// - create temp variables on first access\n//   otherwise just copy (for faster repeated calls)\nfor(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];if(!face.__originalFaceNormal){face.__originalFaceNormal=face.normal.clone();}else{face.__originalFaceNormal.copy(face.normal);}if(!face.__originalVertexNormals)face.__originalVertexNormals=[];for(i=0,il=face.vertexNormals.length;i<il;i++){if(!face.__originalVertexNormals[i]){face.__originalVertexNormals[i]=face.vertexNormals[i].clone();}else{face.__originalVertexNormals[i].copy(face.vertexNormals[i]);}}}// use temp geometry to compute face and vertex normals for each morph\nvar tmpGeo=new THREE.Geometry();tmpGeo.faces=this.faces;for(i=0,il=this.morphTargets.length;i<il;i++){// create on first access\nif(!this.morphNormals[i]){this.morphNormals[i]={};this.morphNormals[i].faceNormals=[];this.morphNormals[i].vertexNormals=[];var dstNormalsFace=this.morphNormals[i].faceNormals;var dstNormalsVertex=this.morphNormals[i].vertexNormals;var faceNormal,vertexNormals;for(f=0,fl=this.faces.length;f<fl;f++){faceNormal=new THREE.Vector3();vertexNormals={a:new THREE.Vector3(),b:new THREE.Vector3(),c:new THREE.Vector3()};dstNormalsFace.push(faceNormal);dstNormalsVertex.push(vertexNormals);}}var morphNormals=this.morphNormals[i];// set vertices to morph target\ntmpGeo.vertices=this.morphTargets[i].vertices;// compute morph normals\ntmpGeo.computeFaceNormals();tmpGeo.computeVertexNormals();// store morph normals\nvar faceNormal,vertexNormals;for(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];faceNormal=morphNormals.faceNormals[f];vertexNormals=morphNormals.vertexNormals[f];faceNormal.copy(face.normal);vertexNormals.a.copy(face.vertexNormals[0]);vertexNormals.b.copy(face.vertexNormals[1]);vertexNormals.c.copy(face.vertexNormals[2]);}}// restore original normals\nfor(f=0,fl=this.faces.length;f<fl;f++){face=this.faces[f];face.normal=face.__originalFaceNormal;face.vertexNormals=face.__originalVertexNormals;}},computeTangents:function(){console.warn('THREE.Geometry: .computeTangents() has been removed.');},computeLineDistances:function(){var d=0;var vertices=this.vertices;for(var i=0,il=vertices.length;i<il;i++){if(i>0){d+=vertices[i].distanceTo(vertices[i-1]);}this.lineDistances[i]=d;}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3();}this.boundingBox.setFromPoints(this.vertices);},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere();}this.boundingSphere.setFromPoints(this.vertices);},merge:function(geometry,matrix,materialIndexOffset){if(geometry instanceof THREE.Geometry===false){console.error('THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.',geometry);return;}var normalMatrix,vertexOffset=this.vertices.length,vertices1=this.vertices,vertices2=geometry.vertices,faces1=this.faces,faces2=geometry.faces,uvs1=this.faceVertexUvs[0],uvs2=geometry.faceVertexUvs[0];if(materialIndexOffset===undefined)materialIndexOffset=0;if(matrix!==undefined){normalMatrix=new THREE.Matrix3().getNormalMatrix(matrix);}// vertices\nfor(var i=0,il=vertices2.length;i<il;i++){var vertex=vertices2[i];var vertexCopy=vertex.clone();if(matrix!==undefined)vertexCopy.applyMatrix4(matrix);vertices1.push(vertexCopy);}// faces\nfor(i=0,il=faces2.length;i<il;i++){var face=faces2[i],faceCopy,normal,color,faceVertexNormals=face.vertexNormals,faceVertexColors=face.vertexColors;faceCopy=new THREE.Face3(face.a+vertexOffset,face.b+vertexOffset,face.c+vertexOffset);faceCopy.normal.copy(face.normal);if(normalMatrix!==undefined){faceCopy.normal.applyMatrix3(normalMatrix).normalize();}for(var j=0,jl=faceVertexNormals.length;j<jl;j++){normal=faceVertexNormals[j].clone();if(normalMatrix!==undefined){normal.applyMatrix3(normalMatrix).normalize();}faceCopy.vertexNormals.push(normal);}faceCopy.color.copy(face.color);for(var j=0,jl=faceVertexColors.length;j<jl;j++){color=faceVertexColors[j];faceCopy.vertexColors.push(color.clone());}faceCopy.materialIndex=face.materialIndex+materialIndexOffset;faces1.push(faceCopy);}// uvs\nfor(i=0,il=uvs2.length;i<il;i++){var uv=uvs2[i],uvCopy=[];if(uv===undefined){continue;}for(var j=0,jl=uv.length;j<jl;j++){uvCopy.push(uv[j].clone());}uvs1.push(uvCopy);}},mergeMesh:function(mesh){if(mesh instanceof THREE.Mesh===false){console.error('THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.',mesh);return;}mesh.matrixAutoUpdate&&mesh.updateMatrix();this.merge(mesh.geometry,mesh.matrix);},/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */mergeVertices:function(){var verticesMap={};// Hashmap for looking up vertices by position coordinates (and making sure they are unique)\nvar unique=[],changes=[];var v,key;var precisionPoints=4;// number of decimal points, e.g. 4 for epsilon of 0.0001\nvar precision=Math.pow(10,precisionPoints);var i,il,face;var indices,j,jl;for(i=0,il=this.vertices.length;i<il;i++){v=this.vertices[i];key=Math.round(v.x*precision)+'_'+Math.round(v.y*precision)+'_'+Math.round(v.z*precision);if(verticesMap[key]===undefined){verticesMap[key]=i;unique.push(this.vertices[i]);changes[i]=unique.length-1;}else{//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\nchanges[i]=changes[verticesMap[key]];}}// if faces are completely degenerate after merging vertices, we\n// have to remove them from the geometry.\nvar faceIndicesToRemove=[];for(i=0,il=this.faces.length;i<il;i++){face=this.faces[i];face.a=changes[face.a];face.b=changes[face.b];face.c=changes[face.c];indices=[face.a,face.b,face.c];var dupIndex=-1;// if any duplicate vertices are found in a Face3\n// we have to remove the face as nothing can be saved\nfor(var n=0;n<3;n++){if(indices[n]===indices[(n+1)%3]){dupIndex=n;faceIndicesToRemove.push(i);break;}}}for(i=faceIndicesToRemove.length-1;i>=0;i--){var idx=faceIndicesToRemove[i];this.faces.splice(idx,1);for(j=0,jl=this.faceVertexUvs.length;j<jl;j++){this.faceVertexUvs[j].splice(idx,1);}}// Use unique set of vertices\nvar diff=this.vertices.length-unique.length;this.vertices=unique;return diff;},sortFacesByMaterialIndex:function(){var faces=this.faces;var length=faces.length;// tag faces\nfor(var i=0;i<length;i++){faces[i]._id=i;}// sort faces\nfunction materialIndexSort(a,b){return a.materialIndex-b.materialIndex;}faces.sort(materialIndexSort);// sort uvs\nvar uvs1=this.faceVertexUvs[0];var uvs2=this.faceVertexUvs[1];var newUvs1,newUvs2;if(uvs1&&uvs1.length===length)newUvs1=[];if(uvs2&&uvs2.length===length)newUvs2=[];for(var i=0;i<length;i++){var id=faces[i]._id;if(newUvs1)newUvs1.push(uvs1[id]);if(newUvs2)newUvs2.push(uvs2[id]);}if(newUvs1)this.faceVertexUvs[0]=newUvs1;if(newUvs2)this.faceVertexUvs[1]=newUvs2;},toJSON:function(){var data={metadata:{version:4.4,type:'Geometry',generator:'Geometry.toJSON'}};// standard Geometry serialization\ndata.uuid=this.uuid;data.type=this.type;if(this.name!=='')data.name=this.name;if(this.parameters!==undefined){var parameters=this.parameters;for(var key in parameters){if(parameters[key]!==undefined)data[key]=parameters[key];}return data;}var vertices=[];for(var i=0;i<this.vertices.length;i++){var vertex=this.vertices[i];vertices.push(vertex.x,vertex.y,vertex.z);}var faces=[];var normals=[];var normalsHash={};var colors=[];var colorsHash={};var uvs=[];var uvsHash={};for(var i=0;i<this.faces.length;i++){var face=this.faces[i];var hasMaterial=true;var hasFaceUv=false;// deprecated\nvar hasFaceVertexUv=this.faceVertexUvs[0][i]!==undefined;var hasFaceNormal=face.normal.length()>0;var hasFaceVertexNormal=face.vertexNormals.length>0;var hasFaceColor=face.color.r!==1||face.color.g!==1||face.color.b!==1;var hasFaceVertexColor=face.vertexColors.length>0;var faceType=0;faceType=setBit(faceType,0,0);// isQuad\nfaceType=setBit(faceType,1,hasMaterial);faceType=setBit(faceType,2,hasFaceUv);faceType=setBit(faceType,3,hasFaceVertexUv);faceType=setBit(faceType,4,hasFaceNormal);faceType=setBit(faceType,5,hasFaceVertexNormal);faceType=setBit(faceType,6,hasFaceColor);faceType=setBit(faceType,7,hasFaceVertexColor);faces.push(faceType);faces.push(face.a,face.b,face.c);faces.push(face.materialIndex);if(hasFaceVertexUv){var faceVertexUvs=this.faceVertexUvs[0][i];faces.push(getUvIndex(faceVertexUvs[0]),getUvIndex(faceVertexUvs[1]),getUvIndex(faceVertexUvs[2]));}if(hasFaceNormal){faces.push(getNormalIndex(face.normal));}if(hasFaceVertexNormal){var vertexNormals=face.vertexNormals;faces.push(getNormalIndex(vertexNormals[0]),getNormalIndex(vertexNormals[1]),getNormalIndex(vertexNormals[2]));}if(hasFaceColor){faces.push(getColorIndex(face.color));}if(hasFaceVertexColor){var vertexColors=face.vertexColors;faces.push(getColorIndex(vertexColors[0]),getColorIndex(vertexColors[1]),getColorIndex(vertexColors[2]));}}function setBit(value,position,enabled){return enabled?value|1<<position:value&~(1<<position);}function getNormalIndex(normal){var hash=normal.x.toString()+normal.y.toString()+normal.z.toString();if(normalsHash[hash]!==undefined){return normalsHash[hash];}normalsHash[hash]=normals.length/3;normals.push(normal.x,normal.y,normal.z);return normalsHash[hash];}function getColorIndex(color){var hash=color.r.toString()+color.g.toString()+color.b.toString();if(colorsHash[hash]!==undefined){return colorsHash[hash];}colorsHash[hash]=colors.length;colors.push(color.getHex());return colorsHash[hash];}function getUvIndex(uv){var hash=uv.x.toString()+uv.y.toString();if(uvsHash[hash]!==undefined){return uvsHash[hash];}uvsHash[hash]=uvs.length/2;uvs.push(uv.x,uv.y);return uvsHash[hash];}data.data={};data.data.vertices=vertices;data.data.normals=normals;if(colors.length>0)data.data.colors=colors;if(uvs.length>0)data.data.uvs=[uvs];// temporal backward compatibility\ndata.data.faces=faces;return data;},clone:function(){/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/return new THREE.Geometry().copy(this);},copy:function(source){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];var vertices=source.vertices;for(var i=0,il=vertices.length;i<il;i++){this.vertices.push(vertices[i].clone());}var faces=source.faces;for(var i=0,il=faces.length;i<il;i++){this.faces.push(faces[i].clone());}for(var i=0,il=source.faceVertexUvs.length;i<il;i++){var faceVertexUvs=source.faceVertexUvs[i];if(this.faceVertexUvs[i]===undefined){this.faceVertexUvs[i]=[];}for(var j=0,jl=faceVertexUvs.length;j<jl;j++){var uvs=faceVertexUvs[j],uvsCopy=[];for(var k=0,kl=uvs.length;k<kl;k++){var uv=uvs[k];uvsCopy.push(uv.clone());}this.faceVertexUvs[i].push(uvsCopy);}}return this;},dispose:function(){this.dispatchEvent({type:'dispose'});}});THREE.GeometryIdCount=0;// File:src/core/DirectGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.DirectGeometry=function(){Object.defineProperty(this,'id',{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.type='DirectGeometry';this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];// this.lineDistances = [];\nthis.boundingBox=null;this.boundingSphere=null;// update flags\nthis.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false;};Object.assign(THREE.DirectGeometry.prototype,THREE.EventDispatcher.prototype,{computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn('THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.');},computeVertexNormals:function(){console.warn('THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.');},computeGroups:function(geometry){var group;var groups=[];var materialIndex;var faces=geometry.faces;for(var i=0;i<faces.length;i++){var face=faces[i];// materials\nif(face.materialIndex!==materialIndex){materialIndex=face.materialIndex;if(group!==undefined){group.count=i*3-group.start;groups.push(group);}group={start:i*3,materialIndex:materialIndex};}}if(group!==undefined){group.count=i*3-group.start;groups.push(group);}this.groups=groups;},fromGeometry:function(geometry){var faces=geometry.faces;var vertices=geometry.vertices;var faceVertexUvs=geometry.faceVertexUvs;var hasFaceVertexUv=faceVertexUvs[0]&&faceVertexUvs[0].length>0;var hasFaceVertexUv2=faceVertexUvs[1]&&faceVertexUvs[1].length>0;// morphs\nvar morphTargets=geometry.morphTargets;var morphTargetsLength=morphTargets.length;var morphTargetsPosition;if(morphTargetsLength>0){morphTargetsPosition=[];for(var i=0;i<morphTargetsLength;i++){morphTargetsPosition[i]=[];}this.morphTargets.position=morphTargetsPosition;}var morphNormals=geometry.morphNormals;var morphNormalsLength=morphNormals.length;var morphTargetsNormal;if(morphNormalsLength>0){morphTargetsNormal=[];for(var i=0;i<morphNormalsLength;i++){morphTargetsNormal[i]=[];}this.morphTargets.normal=morphTargetsNormal;}// skins\nvar skinIndices=geometry.skinIndices;var skinWeights=geometry.skinWeights;var hasSkinIndices=skinIndices.length===vertices.length;var hasSkinWeights=skinWeights.length===vertices.length;//\nfor(var i=0;i<faces.length;i++){var face=faces[i];this.vertices.push(vertices[face.a],vertices[face.b],vertices[face.c]);var vertexNormals=face.vertexNormals;if(vertexNormals.length===3){this.normals.push(vertexNormals[0],vertexNormals[1],vertexNormals[2]);}else{var normal=face.normal;this.normals.push(normal,normal,normal);}var vertexColors=face.vertexColors;if(vertexColors.length===3){this.colors.push(vertexColors[0],vertexColors[1],vertexColors[2]);}else{var color=face.color;this.colors.push(color,color,color);}if(hasFaceVertexUv===true){var vertexUvs=faceVertexUvs[0][i];if(vertexUvs!==undefined){this.uvs.push(vertexUvs[0],vertexUvs[1],vertexUvs[2]);}else{console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ',i);this.uvs.push(new THREE.Vector2(),new THREE.Vector2(),new THREE.Vector2());}}if(hasFaceVertexUv2===true){var vertexUvs=faceVertexUvs[1][i];if(vertexUvs!==undefined){this.uvs2.push(vertexUvs[0],vertexUvs[1],vertexUvs[2]);}else{console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ',i);this.uvs2.push(new THREE.Vector2(),new THREE.Vector2(),new THREE.Vector2());}}// morphs\nfor(var j=0;j<morphTargetsLength;j++){var morphTarget=morphTargets[j].vertices;morphTargetsPosition[j].push(morphTarget[face.a],morphTarget[face.b],morphTarget[face.c]);}for(var j=0;j<morphNormalsLength;j++){var morphNormal=morphNormals[j].vertexNormals[i];morphTargetsNormal[j].push(morphNormal.a,morphNormal.b,morphNormal.c);}// skins\nif(hasSkinIndices){this.skinIndices.push(skinIndices[face.a],skinIndices[face.b],skinIndices[face.c]);}if(hasSkinWeights){this.skinWeights.push(skinWeights[face.a],skinWeights[face.b],skinWeights[face.c]);}}this.computeGroups(geometry);this.verticesNeedUpdate=geometry.verticesNeedUpdate;this.normalsNeedUpdate=geometry.normalsNeedUpdate;this.colorsNeedUpdate=geometry.colorsNeedUpdate;this.uvsNeedUpdate=geometry.uvsNeedUpdate;this.groupsNeedUpdate=geometry.groupsNeedUpdate;return this;},dispose:function(){this.dispatchEvent({type:'dispose'});}});// File:src/core/BufferGeometry.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.BufferGeometry=function(){Object.defineProperty(this,'id',{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.type='BufferGeometry';this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity};};Object.assign(THREE.BufferGeometry.prototype,THREE.EventDispatcher.prototype,{getIndex:function(){return this.index;},setIndex:function(index){this.index=index;},addAttribute:function(name,attribute){if(attribute instanceof THREE.BufferAttribute===false&&attribute instanceof THREE.InterleavedBufferAttribute===false){console.warn('THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).');this.addAttribute(name,new THREE.BufferAttribute(arguments[1],arguments[2]));return;}if(name==='index'){console.warn('THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.');this.setIndex(attribute);return;}this.attributes[name]=attribute;return this;},getAttribute:function(name){return this.attributes[name];},removeAttribute:function(name){delete this.attributes[name];return this;},addGroup:function(start,count,materialIndex){this.groups.push({start:start,count:count,materialIndex:materialIndex!==undefined?materialIndex:0});},clearGroups:function(){this.groups=[];},setDrawRange:function(start,count){this.drawRange.start=start;this.drawRange.count=count;},applyMatrix:function(matrix){var position=this.attributes.position;if(position!==undefined){matrix.applyToVector3Array(position.array);position.needsUpdate=true;}var normal=this.attributes.normal;if(normal!==undefined){var normalMatrix=new THREE.Matrix3().getNormalMatrix(matrix);normalMatrix.applyToVector3Array(normal.array);normal.needsUpdate=true;}if(this.boundingBox!==null){this.computeBoundingBox();}if(this.boundingSphere!==null){this.computeBoundingSphere();}return this;},rotateX:function(){// rotate geometry around world x-axis\nvar m1;return function rotateX(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationX(angle);this.applyMatrix(m1);return this;};}(),rotateY:function(){// rotate geometry around world y-axis\nvar m1;return function rotateY(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationY(angle);this.applyMatrix(m1);return this;};}(),rotateZ:function(){// rotate geometry around world z-axis\nvar m1;return function rotateZ(angle){if(m1===undefined)m1=new THREE.Matrix4();m1.makeRotationZ(angle);this.applyMatrix(m1);return this;};}(),translate:function(){// translate geometry\nvar m1;return function translate(x,y,z){if(m1===undefined)m1=new THREE.Matrix4();m1.makeTranslation(x,y,z);this.applyMatrix(m1);return this;};}(),scale:function(){// scale geometry\nvar m1;return function scale(x,y,z){if(m1===undefined)m1=new THREE.Matrix4();m1.makeScale(x,y,z);this.applyMatrix(m1);return this;};}(),lookAt:function(){var obj;return function lookAt(vector){if(obj===undefined)obj=new THREE.Object3D();obj.lookAt(vector);obj.updateMatrix();this.applyMatrix(obj.matrix);};}(),center:function(){this.computeBoundingBox();var offset=this.boundingBox.center().negate();this.translate(offset.x,offset.y,offset.z);return offset;},setFromObject:function(object){// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\nvar geometry=object.geometry;if(object instanceof THREE.Points||object instanceof THREE.Line){var positions=new THREE.Float32Attribute(geometry.vertices.length*3,3);var colors=new THREE.Float32Attribute(geometry.colors.length*3,3);this.addAttribute('position',positions.copyVector3sArray(geometry.vertices));this.addAttribute('color',colors.copyColorsArray(geometry.colors));if(geometry.lineDistances&&geometry.lineDistances.length===geometry.vertices.length){var lineDistances=new THREE.Float32Attribute(geometry.lineDistances.length,1);this.addAttribute('lineDistance',lineDistances.copyArray(geometry.lineDistances));}if(geometry.boundingSphere!==null){this.boundingSphere=geometry.boundingSphere.clone();}if(geometry.boundingBox!==null){this.boundingBox=geometry.boundingBox.clone();}}else if(object instanceof THREE.Mesh){if(geometry instanceof THREE.Geometry){this.fromGeometry(geometry);}}return this;},updateFromObject:function(object){var geometry=object.geometry;if(object instanceof THREE.Mesh){var direct=geometry.__directGeometry;if(direct===undefined){return this.fromGeometry(geometry);}direct.verticesNeedUpdate=geometry.verticesNeedUpdate;direct.normalsNeedUpdate=geometry.normalsNeedUpdate;direct.colorsNeedUpdate=geometry.colorsNeedUpdate;direct.uvsNeedUpdate=geometry.uvsNeedUpdate;direct.groupsNeedUpdate=geometry.groupsNeedUpdate;geometry.verticesNeedUpdate=false;geometry.normalsNeedUpdate=false;geometry.colorsNeedUpdate=false;geometry.uvsNeedUpdate=false;geometry.groupsNeedUpdate=false;geometry=direct;}if(geometry.verticesNeedUpdate===true){var attribute=this.attributes.position;if(attribute!==undefined){attribute.copyVector3sArray(geometry.vertices);attribute.needsUpdate=true;}geometry.verticesNeedUpdate=false;}if(geometry.normalsNeedUpdate===true){var attribute=this.attributes.normal;if(attribute!==undefined){attribute.copyVector3sArray(geometry.normals);attribute.needsUpdate=true;}geometry.normalsNeedUpdate=false;}if(geometry.colorsNeedUpdate===true){var attribute=this.attributes.color;if(attribute!==undefined){attribute.copyColorsArray(geometry.colors);attribute.needsUpdate=true;}geometry.colorsNeedUpdate=false;}if(geometry.uvsNeedUpdate){var attribute=this.attributes.uv;if(attribute!==undefined){attribute.copyVector2sArray(geometry.uvs);attribute.needsUpdate=true;}geometry.uvsNeedUpdate=false;}if(geometry.lineDistancesNeedUpdate){var attribute=this.attributes.lineDistance;if(attribute!==undefined){attribute.copyArray(geometry.lineDistances);attribute.needsUpdate=true;}geometry.lineDistancesNeedUpdate=false;}if(geometry.groupsNeedUpdate){geometry.computeGroups(object.geometry);this.groups=geometry.groups;geometry.groupsNeedUpdate=false;}return this;},fromGeometry:function(geometry){geometry.__directGeometry=new THREE.DirectGeometry().fromGeometry(geometry);return this.fromDirectGeometry(geometry.__directGeometry);},fromDirectGeometry:function(geometry){var positions=new Float32Array(geometry.vertices.length*3);this.addAttribute('position',new THREE.BufferAttribute(positions,3).copyVector3sArray(geometry.vertices));if(geometry.normals.length>0){var normals=new Float32Array(geometry.normals.length*3);this.addAttribute('normal',new THREE.BufferAttribute(normals,3).copyVector3sArray(geometry.normals));}if(geometry.colors.length>0){var colors=new Float32Array(geometry.colors.length*3);this.addAttribute('color',new THREE.BufferAttribute(colors,3).copyColorsArray(geometry.colors));}if(geometry.uvs.length>0){var uvs=new Float32Array(geometry.uvs.length*2);this.addAttribute('uv',new THREE.BufferAttribute(uvs,2).copyVector2sArray(geometry.uvs));}if(geometry.uvs2.length>0){var uvs2=new Float32Array(geometry.uvs2.length*2);this.addAttribute('uv2',new THREE.BufferAttribute(uvs2,2).copyVector2sArray(geometry.uvs2));}if(geometry.indices.length>0){var TypeArray=geometry.vertices.length>65535?Uint32Array:Uint16Array;var indices=new TypeArray(geometry.indices.length*3);this.setIndex(new THREE.BufferAttribute(indices,1).copyIndicesArray(geometry.indices));}// groups\nthis.groups=geometry.groups;// morphs\nfor(var name in geometry.morphTargets){var array=[];var morphTargets=geometry.morphTargets[name];for(var i=0,l=morphTargets.length;i<l;i++){var morphTarget=morphTargets[i];var attribute=new THREE.Float32Attribute(morphTarget.length*3,3);array.push(attribute.copyVector3sArray(morphTarget));}this.morphAttributes[name]=array;}// skinning\nif(geometry.skinIndices.length>0){var skinIndices=new THREE.Float32Attribute(geometry.skinIndices.length*4,4);this.addAttribute('skinIndex',skinIndices.copyVector4sArray(geometry.skinIndices));}if(geometry.skinWeights.length>0){var skinWeights=new THREE.Float32Attribute(geometry.skinWeights.length*4,4);this.addAttribute('skinWeight',skinWeights.copyVector4sArray(geometry.skinWeights));}//\nif(geometry.boundingSphere!==null){this.boundingSphere=geometry.boundingSphere.clone();}if(geometry.boundingBox!==null){this.boundingBox=geometry.boundingBox.clone();}return this;},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3();}var positions=this.attributes.position.array;if(positions!==undefined){this.boundingBox.setFromArray(positions);}else{this.boundingBox.makeEmpty();}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this);}},computeBoundingSphere:function(){var box=new THREE.Box3();var vector=new THREE.Vector3();return function computeBoundingSphere(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere();}var positions=this.attributes.position.array;if(positions){var center=this.boundingSphere.center;box.setFromArray(positions);box.center(center);// hoping to find a boundingSphere with a radius smaller than the\n// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\nvar maxRadiusSq=0;for(var i=0,il=positions.length;i<il;i+=3){vector.fromArray(positions,i);maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(vector));}this.boundingSphere.radius=Math.sqrt(maxRadiusSq);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this);}}};}(),computeFaceNormals:function(){// backwards compatibility\n},computeVertexNormals:function(){var index=this.index;var attributes=this.attributes;var groups=this.groups;if(attributes.position){var positions=attributes.position.array;if(attributes.normal===undefined){this.addAttribute('normal',new THREE.BufferAttribute(new Float32Array(positions.length),3));}else{// reset existing normals to zero\nvar array=attributes.normal.array;for(var i=0,il=array.length;i<il;i++){array[i]=0;}}var normals=attributes.normal.array;var vA,vB,vC,pA=new THREE.Vector3(),pB=new THREE.Vector3(),pC=new THREE.Vector3(),cb=new THREE.Vector3(),ab=new THREE.Vector3();// indexed elements\nif(index){var indices=index.array;if(groups.length===0){this.addGroup(0,indices.length);}for(var j=0,jl=groups.length;j<jl;++j){var group=groups[j];var start=group.start;var count=group.count;for(var i=start,il=start+count;i<il;i+=3){vA=indices[i+0]*3;vB=indices[i+1]*3;vC=indices[i+2]*3;pA.fromArray(positions,vA);pB.fromArray(positions,vB);pC.fromArray(positions,vC);cb.subVectors(pC,pB);ab.subVectors(pA,pB);cb.cross(ab);normals[vA]+=cb.x;normals[vA+1]+=cb.y;normals[vA+2]+=cb.z;normals[vB]+=cb.x;normals[vB+1]+=cb.y;normals[vB+2]+=cb.z;normals[vC]+=cb.x;normals[vC+1]+=cb.y;normals[vC+2]+=cb.z;}}}else{// non-indexed elements (unconnected triangle soup)\nfor(var i=0,il=positions.length;i<il;i+=9){pA.fromArray(positions,i);pB.fromArray(positions,i+3);pC.fromArray(positions,i+6);cb.subVectors(pC,pB);ab.subVectors(pA,pB);cb.cross(ab);normals[i]=cb.x;normals[i+1]=cb.y;normals[i+2]=cb.z;normals[i+3]=cb.x;normals[i+4]=cb.y;normals[i+5]=cb.z;normals[i+6]=cb.x;normals[i+7]=cb.y;normals[i+8]=cb.z;}}this.normalizeNormals();attributes.normal.needsUpdate=true;}},merge:function(geometry,offset){if(geometry instanceof THREE.BufferGeometry===false){console.error('THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.',geometry);return;}if(offset===undefined)offset=0;var attributes=this.attributes;for(var key in attributes){if(geometry.attributes[key]===undefined)continue;var attribute1=attributes[key];var attributeArray1=attribute1.array;var attribute2=geometry.attributes[key];var attributeArray2=attribute2.array;var attributeSize=attribute2.itemSize;for(var i=0,j=attributeSize*offset;i<attributeArray2.length;i++,j++){attributeArray1[j]=attributeArray2[i];}}return this;},normalizeNormals:function(){var normals=this.attributes.normal.array;var x,y,z,n;for(var i=0,il=normals.length;i<il;i+=3){x=normals[i];y=normals[i+1];z=normals[i+2];n=1.0/Math.sqrt(x*x+y*y+z*z);normals[i]*=n;normals[i+1]*=n;normals[i+2]*=n;}},toNonIndexed:function(){if(this.index===null){console.warn('THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.');return this;}var geometry2=new THREE.BufferGeometry();var indices=this.index.array;var attributes=this.attributes;for(var name in attributes){var attribute=attributes[name];var array=attribute.array;var itemSize=attribute.itemSize;var array2=new array.constructor(indices.length*itemSize);var index=0,index2=0;for(var i=0,l=indices.length;i<l;i++){index=indices[i]*itemSize;for(var j=0;j<itemSize;j++){array2[index2++]=array[index++];}}geometry2.addAttribute(name,new THREE.BufferAttribute(array2,itemSize));}return geometry2;},toJSON:function(){var data={metadata:{version:4.4,type:'BufferGeometry',generator:'BufferGeometry.toJSON'}};// standard BufferGeometry serialization\ndata.uuid=this.uuid;data.type=this.type;if(this.name!=='')data.name=this.name;if(this.parameters!==undefined){var parameters=this.parameters;for(var key in parameters){if(parameters[key]!==undefined)data[key]=parameters[key];}return data;}data.data={attributes:{}};var index=this.index;if(index!==null){var array=Array.prototype.slice.call(index.array);data.data.index={type:index.array.constructor.name,array:array};}var attributes=this.attributes;for(var key in attributes){var attribute=attributes[key];var array=Array.prototype.slice.call(attribute.array);data.data.attributes[key]={itemSize:attribute.itemSize,type:attribute.array.constructor.name,array:array,normalized:attribute.normalized};}var groups=this.groups;if(groups.length>0){data.data.groups=JSON.parse(JSON.stringify(groups));}var boundingSphere=this.boundingSphere;if(boundingSphere!==null){data.data.boundingSphere={center:boundingSphere.center.toArray(),radius:boundingSphere.radius};}return data;},clone:function(){/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/return new THREE.BufferGeometry().copy(this);},copy:function(source){var index=source.index;if(index!==null){this.setIndex(index.clone());}var attributes=source.attributes;for(var name in attributes){var attribute=attributes[name];this.addAttribute(name,attribute.clone());}var groups=source.groups;for(var i=0,l=groups.length;i<l;i++){var group=groups[i];this.addGroup(group.start,group.count,group.materialIndex);}return this;},dispose:function(){this.dispatchEvent({type:'dispose'});}});THREE.BufferGeometry.MaxIndex=65535;// File:src/core/InstancedBufferGeometry.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type='InstancedBufferGeometry';this.maxInstancedCount=undefined;};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(start,count,instances){this.groups.push({start:start,count:count,instances:instances});};THREE.InstancedBufferGeometry.prototype.copy=function(source){var index=source.index;if(index!==null){this.setIndex(index.clone());}var attributes=source.attributes;for(var name in attributes){var attribute=attributes[name];this.addAttribute(name,attribute.clone());}var groups=source.groups;for(var i=0,l=groups.length;i<l;i++){var group=groups[i];this.addGroup(group.start,group.count,group.instances);}return this;};// File:src/core/Uniform.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Uniform=function(value){if(typeof value==='string'){console.warn('THREE.Uniform: Type parameter is no longer needed.');value=arguments[1];}this.value=value;this.dynamic=false;};THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(callback){this.dynamic=true;this.onUpdateCallback=callback;return this;}};// File:src/animation/AnimationAction.js\n/**\r\n *\r\n * Action provided by AnimationMixer for scheduling clip playback on specific\r\n * objects.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n *\r\n */THREE.AnimationAction=function(){throw new Error(\"THREE.AnimationAction: \"+\"Use mixer.clipAction for construction.\");};THREE.AnimationAction._new=function AnimationAction(mixer,clip,localRoot){this._mixer=mixer;this._clip=clip;this._localRoot=localRoot||null;var tracks=clip.tracks,nTracks=tracks.length,interpolants=new Array(nTracks);var interpolantSettings={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding};for(var i=0;i!==nTracks;++i){var interpolant=tracks[i].createInterpolant(null);interpolants[i]=interpolant;interpolant.settings=interpolantSettings;}this._interpolantSettings=interpolantSettings;this._interpolants=interpolants;// bound by the mixer\n// inside: PropertyMixer (managed by the mixer)\nthis._propertyBindings=new Array(nTracks);this._cacheIndex=null;// for the memory manager\nthis._byClipCacheIndex=null;// for the memory manager\nthis._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=THREE.LoopRepeat;this._loopCount=-1;// global mixer time when the action is to be started\n// it's set back to 'null' upon start of the action\nthis._startTime=null;// scaled local time of the action\n// gets clamped or wrapped to 0..clip.duration according to loop\nthis.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;// no. of repetitions when looping\nthis.paused=false;// false -> zero effective time scale\nthis.enabled=true;// true -> zero effective weight\nthis.clampWhenFinished=false;// keep feeding the last frame?\nthis.zeroSlopeAtStart=true;// for smooth interpolation w/o separate\nthis.zeroSlopeAtEnd=true;// clips for start, loop and end\n};THREE.AnimationAction._new.prototype={constructor:THREE.AnimationAction._new,// State & Scheduling\nplay:function(){this._mixer._activateAction(this);return this;},stop:function(){this._mixer._deactivateAction(this);return this.reset();},reset:function(){this.paused=false;this.enabled=true;this.time=0;// restart clip\nthis._loopCount=-1;// forget previous loops\nthis._startTime=null;// forget scheduling\nreturn this.stopFading().stopWarping();},isRunning:function(){var start=this._startTime;return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this);},// return true when play has been called\nisScheduled:function(){return this._mixer._isActiveAction(this);},startAt:function(time){this._startTime=time;return this;},setLoop:function(mode,repetitions){this.loop=mode;this.repetitions=repetitions;return this;},// Weight\n// set the weight stopping any scheduled fading\n// although .enabled = false yields an effective weight of zero, this\n// method does *not* change .enabled, because it would be confusing\nsetEffectiveWeight:function(weight){this.weight=weight;// note: same logic as when updated at runtime\nthis._effectiveWeight=this.enabled?weight:0;return this.stopFading();},// return the weight considering fading and .enabled\ngetEffectiveWeight:function(){return this._effectiveWeight;},fadeIn:function(duration){return this._scheduleFading(duration,0,1);},fadeOut:function(duration){return this._scheduleFading(duration,1,0);},crossFadeFrom:function(fadeOutAction,duration,warp){var mixer=this._mixer;fadeOutAction.fadeOut(duration);this.fadeIn(duration);if(warp){var fadeInDuration=this._clip.duration,fadeOutDuration=fadeOutAction._clip.duration,startEndRatio=fadeOutDuration/fadeInDuration,endStartRatio=fadeInDuration/fadeOutDuration;fadeOutAction.warp(1.0,startEndRatio,duration);this.warp(endStartRatio,1.0,duration);}return this;},crossFadeTo:function(fadeInAction,duration,warp){return fadeInAction.crossFadeFrom(this,duration,warp);},stopFading:function(){var weightInterpolant=this._weightInterpolant;if(weightInterpolant!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(weightInterpolant);}return this;},// Time Scale Control\n// set the weight stopping any scheduled warping\n// although .paused = true yields an effective time scale of zero, this\n// method does *not* change .paused, because it would be confusing\nsetEffectiveTimeScale:function(timeScale){this.timeScale=timeScale;this._effectiveTimeScale=this.paused?0:timeScale;return this.stopWarping();},// return the time scale considering warping and .paused\ngetEffectiveTimeScale:function(){return this._effectiveTimeScale;},setDuration:function(duration){this.timeScale=this._clip.duration/duration;return this.stopWarping();},syncWith:function(action){this.time=action.time;this.timeScale=action.timeScale;return this.stopWarping();},halt:function(duration){return this.warp(this._effectiveTimeScale,0,duration);},warp:function(startTimeScale,endTimeScale,duration){var mixer=this._mixer,now=mixer.time,interpolant=this._timeScaleInterpolant,timeScale=this.timeScale;if(interpolant===null){interpolant=mixer._lendControlInterpolant(),this._timeScaleInterpolant=interpolant;}var times=interpolant.parameterPositions,values=interpolant.sampleValues;times[0]=now;times[1]=now+duration;values[0]=startTimeScale/timeScale;values[1]=endTimeScale/timeScale;return this;},stopWarping:function(){var timeScaleInterpolant=this._timeScaleInterpolant;if(timeScaleInterpolant!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(timeScaleInterpolant);}return this;},// Object Accessors\ngetMixer:function(){return this._mixer;},getClip:function(){return this._clip;},getRoot:function(){return this._localRoot||this._mixer._root;},// Interna\n_update:function(time,deltaTime,timeDirection,accuIndex){// called by the mixer\nvar startTime=this._startTime;if(startTime!==null){// check for scheduled start of action\nvar timeRunning=(time-startTime)*timeDirection;if(timeRunning<0||timeDirection===0){return;// yet to come / don't decide when delta = 0\n}// start\nthis._startTime=null;// unschedule\ndeltaTime=timeDirection*timeRunning;}// apply time scale and advance time\ndeltaTime*=this._updateTimeScale(time);var clipTime=this._updateTime(deltaTime);// note: _updateTime may disable the action resulting in\n// an effective weight of 0\nvar weight=this._updateWeight(time);if(weight>0){var interpolants=this._interpolants;var propertyMixers=this._propertyBindings;for(var j=0,m=interpolants.length;j!==m;++j){interpolants[j].evaluate(clipTime);propertyMixers[j].accumulate(accuIndex,weight);}}},_updateWeight:function(time){var weight=0;if(this.enabled){weight=this.weight;var interpolant=this._weightInterpolant;if(interpolant!==null){var interpolantValue=interpolant.evaluate(time)[0];weight*=interpolantValue;if(time>interpolant.parameterPositions[1]){this.stopFading();if(interpolantValue===0){// faded out, disable\nthis.enabled=false;}}}}this._effectiveWeight=weight;return weight;},_updateTimeScale:function(time){var timeScale=0;if(!this.paused){timeScale=this.timeScale;var interpolant=this._timeScaleInterpolant;if(interpolant!==null){var interpolantValue=interpolant.evaluate(time)[0];timeScale*=interpolantValue;if(time>interpolant.parameterPositions[1]){this.stopWarping();if(timeScale===0){// motion has halted, pause\nthis.paused=true;}else{// warp done - apply final time scale\nthis.timeScale=timeScale;}}}}this._effectiveTimeScale=timeScale;return timeScale;},_updateTime:function(deltaTime){var time=this.time+deltaTime;if(deltaTime===0)return time;var duration=this._clip.duration,loop=this.loop,loopCount=this._loopCount;if(loop===THREE.LoopOnce){if(loopCount===-1){// just started\nthis.loopCount=0;this._setEndings(true,true,false);}handle_stop:{if(time>=duration){time=duration;}else if(time<0){time=0;}else break handle_stop;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:'finished',action:this,direction:deltaTime<0?-1:1});}}else{// repetitive Repeat or PingPong\nvar pingPong=loop===THREE.LoopPingPong;if(loopCount===-1){// just started\nif(deltaTime>=0){loopCount=0;this._setEndings(true,this.repetitions===0,pingPong);}else{// when looping in reverse direction, the initial\n// transition through zero counts as a repetition,\n// so leave loopCount at -1\nthis._setEndings(this.repetitions===0,true,pingPong);}}if(time>=duration||time<0){// wrap around\nvar loopDelta=Math.floor(time/duration);// signed\ntime-=duration*loopDelta;loopCount+=Math.abs(loopDelta);var pending=this.repetitions-loopCount;if(pending<0){// have to stop (switch state, clamp time, fire event)\nif(this.clampWhenFinished)this.paused=true;else this.enabled=false;time=deltaTime>0?duration:0;this._mixer.dispatchEvent({type:'finished',action:this,direction:deltaTime>0?1:-1});}else{// keep running\nif(pending===0){// entering the last round\nvar atStart=deltaTime<0;this._setEndings(atStart,!atStart,pingPong);}else{this._setEndings(false,false,pingPong);}this._loopCount=loopCount;this._mixer.dispatchEvent({type:'loop',action:this,loopDelta:loopDelta});}}if(pingPong&&(loopCount&1)===1){// invert time for the \"pong round\"\nthis.time=time;return duration-time;}}this.time=time;return time;},_setEndings:function(atStart,atEnd,pingPong){var settings=this._interpolantSettings;if(pingPong){settings.endingStart=THREE.ZeroSlopeEnding;settings.endingEnd=THREE.ZeroSlopeEnding;}else{// assuming for LoopOnce atStart == atEnd == true\nif(atStart){settings.endingStart=this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding;}else{settings.endingStart=THREE.WrapAroundEnding;}if(atEnd){settings.endingEnd=this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding;}else{settings.endingEnd=THREE.WrapAroundEnding;}}},_scheduleFading:function(duration,weightNow,weightThen){var mixer=this._mixer,now=mixer.time,interpolant=this._weightInterpolant;if(interpolant===null){interpolant=mixer._lendControlInterpolant(),this._weightInterpolant=interpolant;}var times=interpolant.parameterPositions,values=interpolant.sampleValues;times[0]=now;values[0]=weightNow;times[1]=now+duration;values[1]=weightThen;return this;}};// File:src/animation/AnimationClip.js\n/**\r\n *\r\n * Reusable set of Tracks that represent an animation.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */THREE.AnimationClip=function(name,duration,tracks){this.name=name;this.tracks=tracks;this.duration=duration!==undefined?duration:-1;this.uuid=THREE.Math.generateUUID();// this means it should figure out its duration by scanning the tracks\nif(this.duration<0){this.resetDuration();}// maybe only do these on demand, as doing them here could potentially slow down loading\n// but leaving these here during development as this ensures a lot of testing of these functions\nthis.trim();this.optimize();};THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){var tracks=this.tracks,duration=0;for(var i=0,n=tracks.length;i!==n;++i){var track=this.tracks[i];duration=Math.max(duration,track.times[track.times.length-1]);}this.duration=duration;},trim:function(){for(var i=0;i<this.tracks.length;i++){this.tracks[i].trim(0,this.duration);}return this;},optimize:function(){for(var i=0;i<this.tracks.length;i++){this.tracks[i].optimize();}return this;}};// Static methods:\nObject.assign(THREE.AnimationClip,{parse:function(json){var tracks=[],jsonTracks=json.tracks,frameTime=1.0/(json.fps||1.0);for(var i=0,n=jsonTracks.length;i!==n;++i){tracks.push(THREE.KeyframeTrack.parse(jsonTracks[i]).scale(frameTime));}return new THREE.AnimationClip(json.name,json.duration,tracks);},toJSON:function(clip){var tracks=[],clipTracks=clip.tracks;var json={'name':clip.name,'duration':clip.duration,'tracks':tracks};for(var i=0,n=clipTracks.length;i!==n;++i){tracks.push(THREE.KeyframeTrack.toJSON(clipTracks[i]));}return json;},CreateFromMorphTargetSequence:function(name,morphTargetSequence,fps,noLoop){var numMorphTargets=morphTargetSequence.length;var tracks=[];for(var i=0;i<numMorphTargets;i++){var times=[];var values=[];times.push((i+numMorphTargets-1)%numMorphTargets,i,(i+1)%numMorphTargets);values.push(0,1,0);var order=THREE.AnimationUtils.getKeyframeOrder(times);times=THREE.AnimationUtils.sortedArray(times,1,order);values=THREE.AnimationUtils.sortedArray(values,1,order);// if there is a key at the first frame, duplicate it as the\n// last frame as well for perfect loop.\nif(!noLoop&&times[0]===0){times.push(numMorphTargets);values.push(values[0]);}tracks.push(new THREE.NumberKeyframeTrack('.morphTargetInfluences['+morphTargetSequence[i].name+']',times,values).scale(1.0/fps));}return new THREE.AnimationClip(name,-1,tracks);},findByName:function(objectOrClipArray,name){var clipArray=objectOrClipArray;if(!Array.isArray(objectOrClipArray)){var o=objectOrClipArray;clipArray=o.geometry&&o.geometry.animations||o.animations;}for(var i=0;i<clipArray.length;i++){if(clipArray[i].name===name){return clipArray[i];}}return null;},CreateClipsFromMorphTargetSequences:function(morphTargets,fps,noLoop){var animationToMorphTargets={};// tested with https://regex101.com/ on trick sequences\n// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\nvar pattern=/^([\\w-]*?)([\\d]+)$/;// sort morph target names into animation groups based\n// patterns like Walk_001, Walk_002, Run_001, Run_002\nfor(var i=0,il=morphTargets.length;i<il;i++){var morphTarget=morphTargets[i];var parts=morphTarget.name.match(pattern);if(parts&&parts.length>1){var name=parts[1];var animationMorphTargets=animationToMorphTargets[name];if(!animationMorphTargets){animationToMorphTargets[name]=animationMorphTargets=[];}animationMorphTargets.push(morphTarget);}}var clips=[];for(var name in animationToMorphTargets){clips.push(THREE.AnimationClip.CreateFromMorphTargetSequence(name,animationToMorphTargets[name],fps,noLoop));}return clips;},// parse the animation.hierarchy format\nparseAnimation:function(animation,bones,nodeName){if(!animation){console.error(\"  no animation in JSONLoader data\");return null;}var addNonemptyTrack=function(trackType,trackName,animationKeys,propertyName,destTracks){// only return track if there are actually keys.\nif(animationKeys.length!==0){var times=[];var values=[];THREE.AnimationUtils.flattenJSON(animationKeys,times,values,propertyName);// empty keys are filtered out, so check again\nif(times.length!==0){destTracks.push(new trackType(trackName,times,values));}}};var tracks=[];var clipName=animation.name||'default';// automatic length determination in AnimationClip.\nvar duration=animation.length||-1;var fps=animation.fps||30;var hierarchyTracks=animation.hierarchy||[];for(var h=0;h<hierarchyTracks.length;h++){var animationKeys=hierarchyTracks[h].keys;// skip empty tracks\nif(!animationKeys||animationKeys.length===0)continue;// process morph targets in a way exactly compatible\n// with AnimationHandler.init( animation )\nif(animationKeys[0].morphTargets){// figure out all morph targets used in this track\nvar morphTargetNames={};for(var k=0;k<animationKeys.length;k++){if(animationKeys[k].morphTargets){for(var m=0;m<animationKeys[k].morphTargets.length;m++){morphTargetNames[animationKeys[k].morphTargets[m]]=-1;}}}// create a track for each morph target with all zero\n// morphTargetInfluences except for the keys in which\n// the morphTarget is named.\nfor(var morphTargetName in morphTargetNames){var times=[];var values=[];for(var m=0;m!==animationKeys[k].morphTargets.length;++m){var animationKey=animationKeys[k];times.push(animationKey.time);values.push(animationKey.morphTarget===morphTargetName?1:0);}tracks.push(new THREE.NumberKeyframeTrack('.morphTargetInfluence['+morphTargetName+']',times,values));}duration=morphTargetNames.length*(fps||1.0);}else{// ...assume skeletal animation\nvar boneName='.bones['+bones[h].name+']';addNonemptyTrack(THREE.VectorKeyframeTrack,boneName+'.position',animationKeys,'pos',tracks);addNonemptyTrack(THREE.QuaternionKeyframeTrack,boneName+'.quaternion',animationKeys,'rot',tracks);addNonemptyTrack(THREE.VectorKeyframeTrack,boneName+'.scale',animationKeys,'scl',tracks);}}if(tracks.length===0){return null;}var clip=new THREE.AnimationClip(clipName,duration,tracks);return clip;}});// File:src/animation/AnimationMixer.js\n/**\r\n *\r\n * Player for AnimationClips.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.AnimationMixer=function(root){this._root=root;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1.0;};Object.assign(THREE.AnimationMixer.prototype,THREE.EventDispatcher.prototype,{// return an action for a clip optionally using a custom root target\n// object (this method allocates a lot of dynamic memory in case a\n// previously unknown clip/root combination is specified)\nclipAction:function(clip,optionalRoot){var root=optionalRoot||this._root,rootUuid=root.uuid,clipObject=typeof clip==='string'?THREE.AnimationClip.findByName(root,clip):clip,clipUuid=clipObject!==null?clipObject.uuid:clip,actionsForClip=this._actionsByClip[clipUuid],prototypeAction=null;if(actionsForClip!==undefined){var existingAction=actionsForClip.actionByRoot[rootUuid];if(existingAction!==undefined){return existingAction;}// we know the clip, so we don't have to parse all\n// the bindings again but can just copy\nprototypeAction=actionsForClip.knownActions[0];// also, take the clip from the prototype action\nif(clipObject===null)clipObject=prototypeAction._clip;}// clip must be known when specified via string\nif(clipObject===null)return null;// allocate all resources required to run it\nvar newAction=new THREE.AnimationMixer._Action(this,clipObject,optionalRoot);this._bindAction(newAction,prototypeAction);// and make the action known to the memory manager\nthis._addInactiveAction(newAction,clipUuid,rootUuid);return newAction;},// get an existing action\nexistingAction:function(clip,optionalRoot){var root=optionalRoot||this._root,rootUuid=root.uuid,clipObject=typeof clip==='string'?THREE.AnimationClip.findByName(root,clip):clip,clipUuid=clipObject?clipObject.uuid:clip,actionsForClip=this._actionsByClip[clipUuid];if(actionsForClip!==undefined){return actionsForClip.actionByRoot[rootUuid]||null;}return null;},// deactivates all previously scheduled actions\nstopAllAction:function(){var actions=this._actions,nActions=this._nActiveActions,bindings=this._bindings,nBindings=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var i=0;i!==nActions;++i){actions[i].reset();}for(var i=0;i!==nBindings;++i){bindings[i].useCount=0;}return this;},// advance the time and update apply the animation\nupdate:function(deltaTime){deltaTime*=this.timeScale;var actions=this._actions,nActions=this._nActiveActions,time=this.time+=deltaTime,timeDirection=Math.sign(deltaTime),accuIndex=this._accuIndex^=1;// run active actions\nfor(var i=0;i!==nActions;++i){var action=actions[i];if(action.enabled){action._update(time,deltaTime,timeDirection,accuIndex);}}// update scene graph\nvar bindings=this._bindings,nBindings=this._nActiveBindings;for(var i=0;i!==nBindings;++i){bindings[i].apply(accuIndex);}return this;},// return this mixer's root target object\ngetRoot:function(){return this._root;},// free all resources specific to a particular clip\nuncacheClip:function(clip){var actions=this._actions,clipUuid=clip.uuid,actionsByClip=this._actionsByClip,actionsForClip=actionsByClip[clipUuid];if(actionsForClip!==undefined){// note: just calling _removeInactiveAction would mess up the\n// iteration state and also require updating the state we can\n// just throw away\nvar actionsToRemove=actionsForClip.knownActions;for(var i=0,n=actionsToRemove.length;i!==n;++i){var action=actionsToRemove[i];this._deactivateAction(action);var cacheIndex=action._cacheIndex,lastInactiveAction=actions[actions.length-1];action._cacheIndex=null;action._byClipCacheIndex=null;lastInactiveAction._cacheIndex=cacheIndex;actions[cacheIndex]=lastInactiveAction;actions.pop();this._removeInactiveBindingsForAction(action);}delete actionsByClip[clipUuid];}},// free all resources specific to a particular root target object\nuncacheRoot:function(root){var rootUuid=root.uuid,actionsByClip=this._actionsByClip;for(var clipUuid in actionsByClip){var actionByRoot=actionsByClip[clipUuid].actionByRoot,action=actionByRoot[rootUuid];if(action!==undefined){this._deactivateAction(action);this._removeInactiveAction(action);}}var bindingsByRoot=this._bindingsByRootAndName,bindingByName=bindingsByRoot[rootUuid];if(bindingByName!==undefined){for(var trackName in bindingByName){var binding=bindingByName[trackName];binding.restoreOriginalState();this._removeInactiveBinding(binding);}}},// remove a targeted clip from the cache\nuncacheAction:function(clip,optionalRoot){var action=this.existingAction(clip,optionalRoot);if(action!==null){this._deactivateAction(action);this._removeInactiveAction(action);}}});THREE.AnimationMixer._Action=THREE.AnimationAction._new;// Implementation details:\nObject.assign(THREE.AnimationMixer.prototype,{_bindAction:function(action,prototypeAction){var root=action._localRoot||this._root,tracks=action._clip.tracks,nTracks=tracks.length,bindings=action._propertyBindings,interpolants=action._interpolants,rootUuid=root.uuid,bindingsByRoot=this._bindingsByRootAndName,bindingsByName=bindingsByRoot[rootUuid];if(bindingsByName===undefined){bindingsByName={};bindingsByRoot[rootUuid]=bindingsByName;}for(var i=0;i!==nTracks;++i){var track=tracks[i],trackName=track.name,binding=bindingsByName[trackName];if(binding!==undefined){bindings[i]=binding;}else{binding=bindings[i];if(binding!==undefined){// existing binding, make sure the cache knows\nif(binding._cacheIndex===null){++binding.referenceCount;this._addInactiveBinding(binding,rootUuid,trackName);}continue;}var path=prototypeAction&&prototypeAction._propertyBindings[i].binding.parsedPath;binding=new THREE.PropertyMixer(THREE.PropertyBinding.create(root,trackName,path),track.ValueTypeName,track.getValueSize());++binding.referenceCount;this._addInactiveBinding(binding,rootUuid,trackName);bindings[i]=binding;}interpolants[i].resultBuffer=binding.buffer;}},_activateAction:function(action){if(!this._isActiveAction(action)){if(action._cacheIndex===null){// this action has been forgotten by the cache, but the user\n// appears to be still using it -> rebind\nvar rootUuid=(action._localRoot||this._root).uuid,clipUuid=action._clip.uuid,actionsForClip=this._actionsByClip[clipUuid];this._bindAction(action,actionsForClip&&actionsForClip.knownActions[0]);this._addInactiveAction(action,clipUuid,rootUuid);}var bindings=action._propertyBindings;// increment reference counts / sort out state\nfor(var i=0,n=bindings.length;i!==n;++i){var binding=bindings[i];if(binding.useCount++===0){this._lendBinding(binding);binding.saveOriginalState();}}this._lendAction(action);}},_deactivateAction:function(action){if(this._isActiveAction(action)){var bindings=action._propertyBindings;// decrement reference counts / sort out state\nfor(var i=0,n=bindings.length;i!==n;++i){var binding=bindings[i];if(--binding.useCount===0){binding.restoreOriginalState();this._takeBackBinding(binding);}}this._takeBackAction(action);}},// Memory manager\n_initMemoryManager:function(){this._actions=[];// 'nActiveActions' followed by inactive ones\nthis._nActiveActions=0;this._actionsByClip={};// inside:\n// {\n// \t\tknownActions: Array< _Action >\t- used as prototypes\n// \t\tactionByRoot: _Action\t\t\t- lookup\n// }\nthis._bindings=[];// 'nActiveBindings' followed by inactive ones\nthis._nActiveBindings=0;this._bindingsByRootAndName={};// inside: Map< name, PropertyMixer >\nthis._controlInterpolants=[];// same game as above\nthis._nActiveControlInterpolants=0;var scope=this;this.stats={actions:{get total(){return scope._actions.length;},get inUse(){return scope._nActiveActions;}},bindings:{get total(){return scope._bindings.length;},get inUse(){return scope._nActiveBindings;}},controlInterpolants:{get total(){return scope._controlInterpolants.length;},get inUse(){return scope._nActiveControlInterpolants;}}};},// Memory management for _Action objects\n_isActiveAction:function(action){var index=action._cacheIndex;return index!==null&&index<this._nActiveActions;},_addInactiveAction:function(action,clipUuid,rootUuid){var actions=this._actions,actionsByClip=this._actionsByClip,actionsForClip=actionsByClip[clipUuid];if(actionsForClip===undefined){actionsForClip={knownActions:[action],actionByRoot:{}};action._byClipCacheIndex=0;actionsByClip[clipUuid]=actionsForClip;}else{var knownActions=actionsForClip.knownActions;action._byClipCacheIndex=knownActions.length;knownActions.push(action);}action._cacheIndex=actions.length;actions.push(action);actionsForClip.actionByRoot[rootUuid]=action;},_removeInactiveAction:function(action){var actions=this._actions,lastInactiveAction=actions[actions.length-1],cacheIndex=action._cacheIndex;lastInactiveAction._cacheIndex=cacheIndex;actions[cacheIndex]=lastInactiveAction;actions.pop();action._cacheIndex=null;var clipUuid=action._clip.uuid,actionsByClip=this._actionsByClip,actionsForClip=actionsByClip[clipUuid],knownActionsForClip=actionsForClip.knownActions,lastKnownAction=knownActionsForClip[knownActionsForClip.length-1],byClipCacheIndex=action._byClipCacheIndex;lastKnownAction._byClipCacheIndex=byClipCacheIndex;knownActionsForClip[byClipCacheIndex]=lastKnownAction;knownActionsForClip.pop();action._byClipCacheIndex=null;var actionByRoot=actionsForClip.actionByRoot,rootUuid=(actions._localRoot||this._root).uuid;delete actionByRoot[rootUuid];if(knownActionsForClip.length===0){delete actionsByClip[clipUuid];}this._removeInactiveBindingsForAction(action);},_removeInactiveBindingsForAction:function(action){var bindings=action._propertyBindings;for(var i=0,n=bindings.length;i!==n;++i){var binding=bindings[i];if(--binding.referenceCount===0){this._removeInactiveBinding(binding);}}},_lendAction:function(action){// [ active actions |  inactive actions  ]\n// [  active actions >| inactive actions ]\n//                 s        a\n//                  <-swap->\n//                 a        s\nvar actions=this._actions,prevIndex=action._cacheIndex,lastActiveIndex=this._nActiveActions++,firstInactiveAction=actions[lastActiveIndex];action._cacheIndex=lastActiveIndex;actions[lastActiveIndex]=action;firstInactiveAction._cacheIndex=prevIndex;actions[prevIndex]=firstInactiveAction;},_takeBackAction:function(action){// [  active actions  | inactive actions ]\n// [ active actions |< inactive actions  ]\n//        a        s\n//         <-swap->\n//        s        a\nvar actions=this._actions,prevIndex=action._cacheIndex,firstInactiveIndex=--this._nActiveActions,lastActiveAction=actions[firstInactiveIndex];action._cacheIndex=firstInactiveIndex;actions[firstInactiveIndex]=action;lastActiveAction._cacheIndex=prevIndex;actions[prevIndex]=lastActiveAction;},// Memory management for PropertyMixer objects\n_addInactiveBinding:function(binding,rootUuid,trackName){var bindingsByRoot=this._bindingsByRootAndName,bindingByName=bindingsByRoot[rootUuid],bindings=this._bindings;if(bindingByName===undefined){bindingByName={};bindingsByRoot[rootUuid]=bindingByName;}bindingByName[trackName]=binding;binding._cacheIndex=bindings.length;bindings.push(binding);},_removeInactiveBinding:function(binding){var bindings=this._bindings,propBinding=binding.binding,rootUuid=propBinding.rootNode.uuid,trackName=propBinding.path,bindingsByRoot=this._bindingsByRootAndName,bindingByName=bindingsByRoot[rootUuid],lastInactiveBinding=bindings[bindings.length-1],cacheIndex=binding._cacheIndex;lastInactiveBinding._cacheIndex=cacheIndex;bindings[cacheIndex]=lastInactiveBinding;bindings.pop();delete bindingByName[trackName];remove_empty_map:{for(var _ in bindingByName)break remove_empty_map;delete bindingsByRoot[rootUuid];}},_lendBinding:function(binding){var bindings=this._bindings,prevIndex=binding._cacheIndex,lastActiveIndex=this._nActiveBindings++,firstInactiveBinding=bindings[lastActiveIndex];binding._cacheIndex=lastActiveIndex;bindings[lastActiveIndex]=binding;firstInactiveBinding._cacheIndex=prevIndex;bindings[prevIndex]=firstInactiveBinding;},_takeBackBinding:function(binding){var bindings=this._bindings,prevIndex=binding._cacheIndex,firstInactiveIndex=--this._nActiveBindings,lastActiveBinding=bindings[firstInactiveIndex];binding._cacheIndex=firstInactiveIndex;bindings[firstInactiveIndex]=binding;lastActiveBinding._cacheIndex=prevIndex;bindings[prevIndex]=lastActiveBinding;},// Memory management of Interpolants for weight and time scale\n_lendControlInterpolant:function(){var interpolants=this._controlInterpolants,lastActiveIndex=this._nActiveControlInterpolants++,interpolant=interpolants[lastActiveIndex];if(interpolant===undefined){interpolant=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);interpolant.__cacheIndex=lastActiveIndex;interpolants[lastActiveIndex]=interpolant;}return interpolant;},_takeBackControlInterpolant:function(interpolant){var interpolants=this._controlInterpolants,prevIndex=interpolant.__cacheIndex,firstInactiveIndex=--this._nActiveControlInterpolants,lastActiveInterpolant=interpolants[firstInactiveIndex];interpolant.__cacheIndex=firstInactiveIndex;interpolants[firstInactiveIndex]=interpolant;lastActiveInterpolant.__cacheIndex=prevIndex;interpolants[prevIndex]=lastActiveInterpolant;},_controlInterpolantsResultBuffer:new Float32Array(1)});// File:src/animation/AnimationObjectGroup.js\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n *\r\n * \t-\tInstead pass this object as 'root'.\r\n *\r\n * \t-\tYou can also add and remove objects later when the mixer\r\n * \t\tis running.\r\n *\r\n * Note:\r\n *\r\n *  \tObjects of this class appear as one object to the mixer,\r\n *  \tso cache control of the individual objects must be done\r\n *  \ton the group.\r\n *\r\n * Limitation:\r\n *\r\n * \t- \tThe animated properties must be compatible among the\r\n * \t\tall objects in the group.\r\n *\r\n *  -\tA single property can either be controlled through a\r\n *  \ttarget group or directly, but not both.\r\n *\r\n * @author tschw\r\n */THREE.AnimationObjectGroup=function(var_args){this.uuid=THREE.Math.generateUUID();// cached objects followed by the active ones\nthis._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;// threshold\n// note: read by PropertyBinding.Composite\nvar indices={};this._indicesByUUID=indices;// for bookkeeping\nfor(var i=0,n=arguments.length;i!==n;++i){indices[arguments[i].uuid]=i;}this._paths=[];// inside: string\nthis._parsedPaths=[];// inside: { we don't care, here }\nthis._bindings=[];// inside: Array< PropertyBinding >\nthis._bindingsIndicesByPath={};// inside: indices in these arrays\nvar scope=this;this.stats={objects:{get total(){return scope._objects.length;},get inUse(){return this.total-scope.nCachedObjects_;}},get bindingsPerObject(){return scope._bindings.length;}};};THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(var_args){var objects=this._objects,nObjects=objects.length,nCachedObjects=this.nCachedObjects_,indicesByUUID=this._indicesByUUID,paths=this._paths,parsedPaths=this._parsedPaths,bindings=this._bindings,nBindings=bindings.length;for(var i=0,n=arguments.length;i!==n;++i){var object=arguments[i],uuid=object.uuid,index=indicesByUUID[uuid];if(index===undefined){// unknown object -> add it to the ACTIVE region\nindex=nObjects++;indicesByUUID[uuid]=index;objects.push(object);// accounting is done, now do the same for all bindings\nfor(var j=0,m=nBindings;j!==m;++j){bindings[j].push(new THREE.PropertyBinding(object,paths[j],parsedPaths[j]));}}else if(index<nCachedObjects){var knownObject=objects[index];// move existing object to the ACTIVE region\nvar firstActiveIndex=--nCachedObjects,lastCachedObject=objects[firstActiveIndex];indicesByUUID[lastCachedObject.uuid]=index;objects[index]=lastCachedObject;indicesByUUID[uuid]=firstActiveIndex;objects[firstActiveIndex]=object;// accounting is done, now do the same for all bindings\nfor(var j=0,m=nBindings;j!==m;++j){var bindingsForPath=bindings[j],lastCached=bindingsForPath[firstActiveIndex],binding=bindingsForPath[index];bindingsForPath[index]=lastCached;if(binding===undefined){// since we do not bother to create new bindings\n// for objects that are cached, the binding may\n// or may not exist\nbinding=new THREE.PropertyBinding(object,paths[j],parsedPaths[j]);}bindingsForPath[firstActiveIndex]=binding;}}else if(objects[index]!==knownObject){console.error(\"Different objects with the same UUID \"+\"detected. Clean the caches or recreate your \"+\"infrastructure when reloading scenes...\");}// else the object is already where we want it to be\n}// for arguments\nthis.nCachedObjects_=nCachedObjects;},remove:function(var_args){var objects=this._objects,nObjects=objects.length,nCachedObjects=this.nCachedObjects_,indicesByUUID=this._indicesByUUID,bindings=this._bindings,nBindings=bindings.length;for(var i=0,n=arguments.length;i!==n;++i){var object=arguments[i],uuid=object.uuid,index=indicesByUUID[uuid];if(index!==undefined&&index>=nCachedObjects){// move existing object into the CACHED region\nvar lastCachedIndex=nCachedObjects++,firstActiveObject=objects[lastCachedIndex];indicesByUUID[firstActiveObject.uuid]=index;objects[index]=firstActiveObject;indicesByUUID[uuid]=lastCachedIndex;objects[lastCachedIndex]=object;// accounting is done, now do the same for all bindings\nfor(var j=0,m=nBindings;j!==m;++j){var bindingsForPath=bindings[j],firstActive=bindingsForPath[lastCachedIndex],binding=bindingsForPath[index];bindingsForPath[index]=firstActive;bindingsForPath[lastCachedIndex]=binding;}}}// for arguments\nthis.nCachedObjects_=nCachedObjects;},// remove & forget\nuncache:function(var_args){var objects=this._objects,nObjects=objects.length,nCachedObjects=this.nCachedObjects_,indicesByUUID=this._indicesByUUID,bindings=this._bindings,nBindings=bindings.length;for(var i=0,n=arguments.length;i!==n;++i){var object=arguments[i],uuid=object.uuid,index=indicesByUUID[uuid];if(index!==undefined){delete indicesByUUID[uuid];if(index<nCachedObjects){// object is cached, shrink the CACHED region\nvar firstActiveIndex=--nCachedObjects,lastCachedObject=objects[firstActiveIndex],lastIndex=--nObjects,lastObject=objects[lastIndex];// last cached object takes this object's place\nindicesByUUID[lastCachedObject.uuid]=index;objects[index]=lastCachedObject;// last object goes to the activated slot and pop\nindicesByUUID[lastObject.uuid]=firstActiveIndex;objects[firstActiveIndex]=lastObject;objects.pop();// accounting is done, now do the same for all bindings\nfor(var j=0,m=nBindings;j!==m;++j){var bindingsForPath=bindings[j],lastCached=bindingsForPath[firstActiveIndex],last=bindingsForPath[lastIndex];bindingsForPath[index]=lastCached;bindingsForPath[firstActiveIndex]=last;bindingsForPath.pop();}}else{// object is active, just swap with the last and pop\nvar lastIndex=--nObjects,lastObject=objects[lastIndex];indicesByUUID[lastObject.uuid]=index;objects[index]=lastObject;objects.pop();// accounting is done, now do the same for all bindings\nfor(var j=0,m=nBindings;j!==m;++j){var bindingsForPath=bindings[j];bindingsForPath[index]=bindingsForPath[lastIndex];bindingsForPath.pop();}}// cached or active\n}// if object is known\n}// for arguments\nthis.nCachedObjects_=nCachedObjects;},// Internal interface used by befriended PropertyBinding.Composite:\nsubscribe_:function(path,parsedPath){// returns an array of bindings for the given path that is changed\n// according to the contained objects in the group\nvar indicesByPath=this._bindingsIndicesByPath,index=indicesByPath[path],bindings=this._bindings;if(index!==undefined)return bindings[index];var paths=this._paths,parsedPaths=this._parsedPaths,objects=this._objects,nObjects=objects.length,nCachedObjects=this.nCachedObjects_,bindingsForPath=new Array(nObjects);index=bindings.length;indicesByPath[path]=index;paths.push(path);parsedPaths.push(parsedPath);bindings.push(bindingsForPath);for(var i=nCachedObjects,n=objects.length;i!==n;++i){var object=objects[i];bindingsForPath[i]=new THREE.PropertyBinding(object,path,parsedPath);}return bindingsForPath;},unsubscribe_:function(path){// tells the group to forget about a property path and no longer\n// update the array previously obtained with 'subscribe_'\nvar indicesByPath=this._bindingsIndicesByPath,index=indicesByPath[path];if(index!==undefined){var paths=this._paths,parsedPaths=this._parsedPaths,bindings=this._bindings,lastBindingsIndex=bindings.length-1,lastBindings=bindings[lastBindingsIndex],lastBindingsPath=path[lastBindingsIndex];indicesByPath[lastBindingsPath]=index;bindings[index]=lastBindings;bindings.pop();parsedPaths[index]=parsedPaths[lastBindingsIndex];parsedPaths.pop();paths[index]=paths[lastBindingsIndex];paths.pop();}}};// File:src/animation/AnimationUtils.js\n/**\r\n * @author tschw\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */THREE.AnimationUtils={// same as Array.prototype.slice, but also works on typed arrays\narraySlice:function(array,from,to){if(THREE.AnimationUtils.isTypedArray(array)){return new array.constructor(array.subarray(from,to));}return array.slice(from,to);},// converts an array to a specific type\nconvertArray:function(array,type,forceClone){if(!array||// let 'undefined' and 'null' pass\n!forceClone&&array.constructor===type)return array;if(typeof type.BYTES_PER_ELEMENT==='number'){return new type(array);// create typed array\n}return Array.prototype.slice.call(array);// create Array\n},isTypedArray:function(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView);},// returns an array by which times and values can be sorted\ngetKeyframeOrder:function(times){function compareTime(i,j){return times[i]-times[j];}var n=times.length;var result=new Array(n);for(var i=0;i!==n;++i)result[i]=i;result.sort(compareTime);return result;},// uses the array previously returned by 'getKeyframeOrder' to sort data\nsortedArray:function(values,stride,order){var nValues=values.length;var result=new values.constructor(nValues);for(var i=0,dstOffset=0;dstOffset!==nValues;++i){var srcOffset=order[i]*stride;for(var j=0;j!==stride;++j){result[dstOffset++]=values[srcOffset+j];}}return result;},// function for parsing AOS keyframe formats\nflattenJSON:function(jsonKeys,times,values,valuePropertyName){var i=1,key=jsonKeys[0];while(key!==undefined&&key[valuePropertyName]===undefined){key=jsonKeys[i++];}if(key===undefined)return;// no data\nvar value=key[valuePropertyName];if(value===undefined)return;// no data\nif(Array.isArray(value)){do{value=key[valuePropertyName];if(value!==undefined){times.push(key.time);values.push.apply(values,value);// push all elements\n}key=jsonKeys[i++];}while(key!==undefined);}else if(value.toArray!==undefined){// ...assume THREE.Math-ish\ndo{value=key[valuePropertyName];if(value!==undefined){times.push(key.time);value.toArray(values,values.length);}key=jsonKeys[i++];}while(key!==undefined);}else{// otherwise push as-is\ndo{value=key[valuePropertyName];if(value!==undefined){times.push(key.time);values.push(value);}key=jsonKeys[i++];}while(key!==undefined);}}};// File:src/animation/KeyframeTrack.js\n/**\r\n *\r\n * A timed sequence of keyframes for a specific property.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.KeyframeTrack=function(name,times,values,interpolation){if(name===undefined)throw new Error(\"track name is undefined\");if(times===undefined||times.length===0){throw new Error(\"no keyframes in track named \"+name);}this.name=name;this.times=THREE.AnimationUtils.convertArray(times,this.TimeBufferType);this.values=THREE.AnimationUtils.convertArray(values,this.ValueBufferType);this.setInterpolation(interpolation||this.DefaultInterpolation);this.validate();this.optimize();};THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(result){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),result);},InterpolantFactoryMethodLinear:function(result){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),result);},InterpolantFactoryMethodSmooth:function(result){return new THREE.CubicInterpolant(this.times,this.values,this.getValueSize(),result);},setInterpolation:function(interpolation){var factoryMethod;switch(interpolation){case THREE.InterpolateDiscrete:factoryMethod=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:factoryMethod=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:factoryMethod=this.InterpolantFactoryMethodSmooth;break;}if(factoryMethod===undefined){var message=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(this.createInterpolant===undefined){// fall back to default, unless the default itself is messed up\nif(interpolation!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation);}else{throw new Error(message);// fatal, in this case\n}}console.warn(message);return;}this.createInterpolant=factoryMethod;},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth;}},getValueSize:function(){return this.values.length/this.times.length;},// move all keyframes either forwards or backwards in time\nshift:function(timeOffset){if(timeOffset!==0.0){var times=this.times;for(var i=0,n=times.length;i!==n;++i){times[i]+=timeOffset;}}return this;},// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\nscale:function(timeScale){if(timeScale!==1.0){var times=this.times;for(var i=0,n=times.length;i!==n;++i){times[i]*=timeScale;}}return this;},// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\ntrim:function(startTime,endTime){var times=this.times,nKeys=times.length,from=0,to=nKeys-1;while(from!==nKeys&&times[from]<startTime)++from;while(to!==-1&&times[to]>endTime)--to;++to;// inclusive -> exclusive bound\nif(from!==0||to!==nKeys){// empty tracks are forbidden, so keep at least one keyframe\nif(from>=to)to=Math.max(to,1),from=to-1;var stride=this.getValueSize();this.times=THREE.AnimationUtils.arraySlice(times,from,to);this.values=THREE.AnimationUtils.arraySlice(this.values,from*stride,to*stride);}return this;},// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\nvalidate:function(){var valid=true;var valueSize=this.getValueSize();if(valueSize-Math.floor(valueSize)!==0){console.error(\"invalid value size in track\",this);valid=false;}var times=this.times,values=this.values,nKeys=times.length;if(nKeys===0){console.error(\"track is empty\",this);valid=false;}var prevTime=null;for(var i=0;i!==nKeys;i++){var currTime=times[i];if(typeof currTime==='number'&&isNaN(currTime)){console.error(\"time is not a valid number\",this,i,currTime);valid=false;break;}if(prevTime!==null&&prevTime>currTime){console.error(\"out of order keys\",this,i,currTime,prevTime);valid=false;break;}prevTime=currTime;}if(values!==undefined){if(THREE.AnimationUtils.isTypedArray(values)){for(var i=0,n=values.length;i!==n;++i){var value=values[i];if(isNaN(value)){console.error(\"value is not a valid number\",this,i,value);valid=false;break;}}}}return valid;},// removes equivalent sequential keys as common in morph target sequences\n// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\noptimize:function(){var times=this.times,values=this.values,stride=this.getValueSize(),writeIndex=1;for(var i=1,n=times.length-1;i<=n;++i){var keep=false;var time=times[i];var timeNext=times[i+1];// remove adjacent keyframes scheduled at the same time\nif(time!==timeNext&&(i!==1||time!==time[0])){// remove unnecessary keyframes same as their neighbors\nvar offset=i*stride,offsetP=offset-stride,offsetN=offset+stride;for(var j=0;j!==stride;++j){var value=values[offset+j];if(value!==values[offsetP+j]||value!==values[offsetN+j]){keep=true;break;}}}// in-place compaction\nif(keep){if(i!==writeIndex){times[writeIndex]=times[i];var readOffset=i*stride,writeOffset=writeIndex*stride;for(var j=0;j!==stride;++j){values[writeOffset+j]=values[readOffset+j];}}++writeIndex;}}if(writeIndex!==times.length){this.times=THREE.AnimationUtils.arraySlice(times,0,writeIndex);this.values=THREE.AnimationUtils.arraySlice(values,0,writeIndex*stride);}return this;}};// Static methods:\nObject.assign(THREE.KeyframeTrack,{// Serialization (in static context, because of constructor invocation\n// and automatic invocation of .toJSON):\nparse:function(json){if(json.type===undefined){throw new Error(\"track type undefined, can not parse\");}var trackType=THREE.KeyframeTrack._getTrackTypeForValueTypeName(json.type);if(json.times===undefined){var times=[],values=[];THREE.AnimationUtils.flattenJSON(json.keys,times,values,'value');json.times=times;json.values=values;}// derived classes can define a static parse method\nif(trackType.parse!==undefined){return trackType.parse(json);}else{// by default, we asssume a constructor compatible with the base\nreturn new trackType(json.name,json.times,json.values,json.interpolation);}},toJSON:function(track){var trackType=track.constructor;var json;// derived classes can define a static toJSON method\nif(trackType.toJSON!==undefined){json=trackType.toJSON(track);}else{// by default, we assume the data can be serialized as-is\njson={'name':track.name,'times':THREE.AnimationUtils.convertArray(track.times,Array),'values':THREE.AnimationUtils.convertArray(track.values,Array)};var interpolation=track.getInterpolation();if(interpolation!==track.DefaultInterpolation){json.interpolation=interpolation;}}json.type=track.ValueTypeName;// mandatory\nreturn json;},_getTrackTypeForValueTypeName:function(typeName){switch(typeName.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return THREE.NumberKeyframeTrack;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return THREE.VectorKeyframeTrack;case\"color\":return THREE.ColorKeyframeTrack;case\"quaternion\":return THREE.QuaternionKeyframeTrack;case\"bool\":case\"boolean\":return THREE.BooleanKeyframeTrack;case\"string\":return THREE.StringKeyframeTrack;}throw new Error(\"Unsupported typeName: \"+typeName);}});// File:src/animation/PropertyBinding.js\n/**\r\n *\r\n * A reference to a real property in the scene graph.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.PropertyBinding=function(rootNode,path,parsedPath){this.path=path;this.parsedPath=parsedPath||THREE.PropertyBinding.parseTrackName(path);this.node=THREE.PropertyBinding.findNode(rootNode,this.parsedPath.nodeName)||rootNode;this.rootNode=rootNode;};THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function getValue_unbound(targetArray,offset){this.bind();this.getValue(targetArray,offset);// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\n},setValue:function getValue_unbound(sourceArray,offset){this.bind();this.setValue(sourceArray,offset);},// create getter / setter pair for a property in the scene graph\nbind:function(){var targetObject=this.node,parsedPath=this.parsedPath,objectName=parsedPath.objectName,propertyName=parsedPath.propertyName,propertyIndex=parsedPath.propertyIndex;if(!targetObject){targetObject=THREE.PropertyBinding.findNode(this.rootNode,parsedPath.nodeName)||this.rootNode;this.node=targetObject;}// set fail state so we can just 'return' on error\nthis.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;// ensure there is a value node\nif(!targetObject){console.error(\"  trying to update node for track: \"+this.path+\" but it wasn't found.\");return;}if(objectName){var objectIndex=parsedPath.objectIndex;// special cases were we need to reach deeper into the hierarchy to get the face materials....\nswitch(objectName){case'materials':if(!targetObject.material){console.error('  can not bind to material as node does not have a material',this);return;}if(!targetObject.material.materials){console.error('  can not bind to material.materials as node.material does not have a materials array',this);return;}targetObject=targetObject.material.materials;break;case'bones':if(!targetObject.skeleton){console.error('  can not bind to bones as node does not have a skeleton',this);return;}// potential future optimization: skip this if propertyIndex is already an integer\n// and convert the integer string to a true integer.\ntargetObject=targetObject.skeleton.bones;// support resolving morphTarget names into indices.\nfor(var i=0;i<targetObject.length;i++){if(targetObject[i].name===objectIndex){objectIndex=i;break;}}break;default:if(targetObject[objectName]===undefined){console.error('  can not bind to objectName of node, undefined',this);return;}targetObject=targetObject[objectName];}if(objectIndex!==undefined){if(targetObject[objectIndex]===undefined){console.error(\"  trying to bind to objectIndex of objectName, but is undefined:\",this,targetObject);return;}targetObject=targetObject[objectIndex];}}// resolve property\nvar nodeProperty=targetObject[propertyName];if(!nodeProperty){var nodeName=parsedPath.nodeName;console.error(\"  trying to update property for track: \"+nodeName+'.'+propertyName+\" but it wasn't found.\",targetObject);return;}// determine versioning scheme\nvar versioning=this.Versioning.None;if(targetObject.needsUpdate!==undefined){// material\nversioning=this.Versioning.NeedsUpdate;this.targetObject=targetObject;}else if(targetObject.matrixWorldNeedsUpdate!==undefined){// node transform\nversioning=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=targetObject;}// determine how the property gets bound\nvar bindingType=this.BindingType.Direct;if(propertyIndex!==undefined){// access a sub element of the property array (only primitives are supported right now)\nif(propertyName===\"morphTargetInfluences\"){// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n// support resolving morphTarget names into indices.\nif(!targetObject.geometry){console.error('  can not bind to morphTargetInfluences becasuse node does not have a geometry',this);return;}if(!targetObject.geometry.morphTargets){console.error('  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets',this);return;}for(var i=0;i<this.node.geometry.morphTargets.length;i++){if(targetObject.geometry.morphTargets[i].name===propertyIndex){propertyIndex=i;break;}}}bindingType=this.BindingType.ArrayElement;this.resolvedProperty=nodeProperty;this.propertyIndex=propertyIndex;}else if(nodeProperty.fromArray!==undefined&&nodeProperty.toArray!==undefined){// must use copy for Object3D.Euler/Quaternion\nbindingType=this.BindingType.HasFromToArray;this.resolvedProperty=nodeProperty;}else if(nodeProperty.length!==undefined){bindingType=this.BindingType.EntireArray;this.resolvedProperty=nodeProperty;}else{this.propertyName=propertyName;}// select getter / setter\nthis.getValue=this.GetterByBindingType[bindingType];this.setValue=this.SetterByBindingTypeAndVersioning[bindingType][versioning];},unbind:function(){this.node=null;// back to the prototype version of getValue / setValue\n// note: avoiding to mutate the shape of 'this' via 'delete'\nthis.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound;}};Object.assign(THREE.PropertyBinding.prototype,{// prototype, continued\n// these are used to \"bind\" a nonexistent property\n_getValue_unavailable:function(){},_setValue_unavailable:function(){},// initial state of these methods that calls 'bind'\n_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(buffer,offset){buffer[offset]=this.node[this.propertyName];},function getValue_array(buffer,offset){var source=this.resolvedProperty;for(var i=0,n=source.length;i!==n;++i){buffer[offset++]=source[i];}},function getValue_arrayElement(buffer,offset){buffer[offset]=this.resolvedProperty[this.propertyIndex];},function getValue_toArray(buffer,offset){this.resolvedProperty.toArray(buffer,offset);}],SetterByBindingTypeAndVersioning:[[// Direct\nfunction setValue_direct(buffer,offset){this.node[this.propertyName]=buffer[offset];},function setValue_direct_setNeedsUpdate(buffer,offset){this.node[this.propertyName]=buffer[offset];this.targetObject.needsUpdate=true;},function setValue_direct_setMatrixWorldNeedsUpdate(buffer,offset){this.node[this.propertyName]=buffer[offset];this.targetObject.matrixWorldNeedsUpdate=true;}],[// EntireArray\nfunction setValue_array(buffer,offset){var dest=this.resolvedProperty;for(var i=0,n=dest.length;i!==n;++i){dest[i]=buffer[offset++];}},function setValue_array_setNeedsUpdate(buffer,offset){var dest=this.resolvedProperty;for(var i=0,n=dest.length;i!==n;++i){dest[i]=buffer[offset++];}this.targetObject.needsUpdate=true;},function setValue_array_setMatrixWorldNeedsUpdate(buffer,offset){var dest=this.resolvedProperty;for(var i=0,n=dest.length;i!==n;++i){dest[i]=buffer[offset++];}this.targetObject.matrixWorldNeedsUpdate=true;}],[// ArrayElement\nfunction setValue_arrayElement(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset];},function setValue_arrayElement_setNeedsUpdate(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset];this.targetObject.needsUpdate=true;},function setValue_arrayElement_setMatrixWorldNeedsUpdate(buffer,offset){this.resolvedProperty[this.propertyIndex]=buffer[offset];this.targetObject.matrixWorldNeedsUpdate=true;}],[// HasToFromArray\nfunction setValue_fromArray(buffer,offset){this.resolvedProperty.fromArray(buffer,offset);},function setValue_fromArray_setNeedsUpdate(buffer,offset){this.resolvedProperty.fromArray(buffer,offset);this.targetObject.needsUpdate=true;},function setValue_fromArray_setMatrixWorldNeedsUpdate(buffer,offset){this.resolvedProperty.fromArray(buffer,offset);this.targetObject.matrixWorldNeedsUpdate=true;}]]});THREE.PropertyBinding.Composite=function(targetGroup,path,optionalParsedPath){var parsedPath=optionalParsedPath||THREE.PropertyBinding.parseTrackName(path);this._targetGroup=targetGroup;this._bindings=targetGroup.subscribe_(path,parsedPath);};THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(array,offset){this.bind();// bind all binding\nvar firstValidIndex=this._targetGroup.nCachedObjects_,binding=this._bindings[firstValidIndex];// and only call .getValue on the first\nif(binding!==undefined)binding.getValue(array,offset);},setValue:function(array,offset){var bindings=this._bindings;for(var i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i){bindings[i].setValue(array,offset);}},bind:function(){var bindings=this._bindings;for(var i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i){bindings[i].bind();}},unbind:function(){var bindings=this._bindings;for(var i=this._targetGroup.nCachedObjects_,n=bindings.length;i!==n;++i){bindings[i].unbind();}}};THREE.PropertyBinding.create=function(root,path,parsedPath){if(!(root instanceof THREE.AnimationObjectGroup)){return new THREE.PropertyBinding(root,path,parsedPath);}else{return new THREE.PropertyBinding.Composite(root,path,parsedPath);}};THREE.PropertyBinding.parseTrackName=function(trackName){// matches strings in the form of:\n//    nodeName.property\n//    nodeName.property[accessor]\n//    nodeName.material.property[accessor]\n//    uuid.property[accessor]\n//    uuid.objectName[objectIndex].propertyName[propertyIndex]\n//    parentName/nodeName.property\n//    parentName/parentName/nodeName.property[index]\n//\t  .bone[Armature.DEF_cog].position\n// created and tested via https://regex101.com/#javascript\nvar re=/^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_.:\\- ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;var matches=re.exec(trackName);if(!matches){throw new Error(\"cannot parse trackName at all: \"+trackName);}if(matches.index===re.lastIndex){re.lastIndex++;}var results={// directoryName: matches[1], // (tschw) currently unused\nnodeName:matches[3],// allowed to be null, specified root node.\nobjectName:matches[5],objectIndex:matches[7],propertyName:matches[9],propertyIndex:matches[11]// allowed to be null, specifies that the whole property is set.\n};if(results.propertyName===null||results.propertyName.length===0){throw new Error(\"can not parse propertyName from trackName: \"+trackName);}return results;};THREE.PropertyBinding.findNode=function(root,nodeName){if(!nodeName||nodeName===\"\"||nodeName===\"root\"||nodeName===\".\"||nodeName===-1||nodeName===root.name||nodeName===root.uuid){return root;}// search into skeleton bones.\nif(root.skeleton){var searchSkeleton=function(skeleton){for(var i=0;i<skeleton.bones.length;i++){var bone=skeleton.bones[i];if(bone.name===nodeName){return bone;}}return null;};var bone=searchSkeleton(root.skeleton);if(bone){return bone;}}// search into node subtree.\nif(root.children){var searchNodeSubtree=function(children){for(var i=0;i<children.length;i++){var childNode=children[i];if(childNode.name===nodeName||childNode.uuid===nodeName){return childNode;}var result=searchNodeSubtree(childNode.children);if(result)return result;}return null;};var subTreeNode=searchNodeSubtree(root.children);if(subTreeNode){return subTreeNode;}}return null;};// File:src/animation/PropertyMixer.js\n/**\r\n *\r\n * Buffered scene graph property that allows weighted accumulation.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.PropertyMixer=function(binding,typeName,valueSize){this.binding=binding;this.valueSize=valueSize;var bufferType=Float64Array,mixFunction;switch(typeName){case'quaternion':mixFunction=this._slerp;break;case'string':case'bool':bufferType=Array,mixFunction=this._select;break;default:mixFunction=this._lerp;}this.buffer=new bufferType(valueSize*4);// layout: [ incoming | accu0 | accu1 | orig ]\n//\n// interpolators can use .buffer as their .result\n// the data then goes to 'incoming'\n//\n// 'accu0' and 'accu1' are used frame-interleaved for\n// the cumulative result and are compared to detect\n// changes\n//\n// 'orig' stores the original state of the property\nthis._mixBufferRegion=mixFunction;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0;};THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,// accumulate data in the 'incoming' region into 'accu<i>'\naccumulate:function(accuIndex,weight){// note: happily accumulating nothing when weight = 0, the caller knows\n// the weight and shouldn't have made the call in the first place\nvar buffer=this.buffer,stride=this.valueSize,offset=accuIndex*stride+stride,currentWeight=this.cumulativeWeight;if(currentWeight===0){// accuN := incoming * weight\nfor(var i=0;i!==stride;++i){buffer[offset+i]=buffer[i];}currentWeight=weight;}else{// accuN := accuN + incoming * weight\ncurrentWeight+=weight;var mix=weight/currentWeight;this._mixBufferRegion(buffer,offset,0,mix,stride);}this.cumulativeWeight=currentWeight;},// apply the state of 'accu<i>' to the binding when accus differ\napply:function(accuIndex){var stride=this.valueSize,buffer=this.buffer,offset=accuIndex*stride+stride,weight=this.cumulativeWeight,binding=this.binding;this.cumulativeWeight=0;if(weight<1){// accuN := accuN + original * ( 1 - cumulativeWeight )\nvar originalValueOffset=stride*3;this._mixBufferRegion(buffer,offset,originalValueOffset,1-weight,stride);}for(var i=stride,e=stride+stride;i!==e;++i){if(buffer[i]!==buffer[i+stride]){// value has changed -> update scene graph\nbinding.setValue(buffer,offset);break;}}},// remember the state of the bound property and copy it to both accus\nsaveOriginalState:function(){var binding=this.binding;var buffer=this.buffer,stride=this.valueSize,originalValueOffset=stride*3;binding.getValue(buffer,originalValueOffset);// accu[0..1] := orig -- initially detect changes against the original\nfor(var i=stride,e=originalValueOffset;i!==e;++i){buffer[i]=buffer[originalValueOffset+i%stride];}this.cumulativeWeight=0;},// apply the state previously taken via 'saveOriginalState' to the binding\nrestoreOriginalState:function(){var originalValueOffset=this.valueSize*3;this.binding.setValue(this.buffer,originalValueOffset);},// mix functions\n_select:function(buffer,dstOffset,srcOffset,t,stride){if(t>=0.5){for(var i=0;i!==stride;++i){buffer[dstOffset+i]=buffer[srcOffset+i];}}},_slerp:function(buffer,dstOffset,srcOffset,t,stride){THREE.Quaternion.slerpFlat(buffer,dstOffset,buffer,dstOffset,buffer,srcOffset,t);},_lerp:function(buffer,dstOffset,srcOffset,t,stride){var s=1-t;for(var i=0;i!==stride;++i){var j=dstOffset+i;buffer[j]=buffer[j]*s+buffer[srcOffset+i]*t;}}};// File:src/animation/tracks/BooleanKeyframeTrack.js\n/**\r\n *\r\n * A Track of Boolean keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.BooleanKeyframeTrack=function(name,times,values){THREE.KeyframeTrack.call(this,name,times,values);};THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:'bool',ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined// Note: Actually this track could have a optimized / compressed\n// representation of a single value and a custom interpolant that\n// computes \"firstValue ^ isOdd( index )\".\n});// File:src/animation/tracks/ColorKeyframeTrack.js\n/**\r\n *\r\n * A Track of keyframe values that represent color.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.ColorKeyframeTrack=function(name,times,values,interpolation){THREE.KeyframeTrack.call(this,name,times,values,interpolation);};THREE.ColorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.ColorKeyframeTrack,ValueTypeName:'color'// ValueBufferType is inherited\n// DefaultInterpolation is inherited\n// Note: Very basic implementation and nothing special yet.\n// However, this is the place for color space parameterization.\n});// File:src/animation/tracks/NumberKeyframeTrack.js\n/**\r\n *\r\n * A Track of numeric keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.NumberKeyframeTrack=function(name,times,values,interpolation){THREE.KeyframeTrack.call(this,name,times,values,interpolation);};THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:'number'// ValueBufferType is inherited\n// DefaultInterpolation is inherited\n});// File:src/animation/tracks/QuaternionKeyframeTrack.js\n/**\r\n *\r\n * A Track of quaternion keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.QuaternionKeyframeTrack=function(name,times,values,interpolation){THREE.KeyframeTrack.call(this,name,times,values,interpolation);};THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:'quaternion',// ValueBufferType is inherited\nDefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(result){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),result);},InterpolantFactoryMethodSmooth:undefined// not yet implemented\n});// File:src/animation/tracks/StringKeyframeTrack.js\n/**\r\n *\r\n * A Track that interpolates Strings\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.StringKeyframeTrack=function(name,times,values,interpolation){THREE.KeyframeTrack.call(this,name,times,values,interpolation);};THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:'string',ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});// File:src/animation/tracks/VectorKeyframeTrack.js\n/**\r\n *\r\n * A Track of vectored keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */THREE.VectorKeyframeTrack=function(name,times,values,interpolation){THREE.KeyframeTrack.call(this,name,times,values,interpolation);};THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:'vector'// ValueBufferType is inherited\n// DefaultInterpolation is inherited\n});// File:src/audio/Audio.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */THREE.Audio=function(listener){THREE.Object3D.call(this);this.type='Audio';this.context=listener.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(listener.getInput());this.autoplay=false;this.startTime=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType='empty';this.filters=[];};THREE.Audio.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Audio,getOutput:function(){return this.gain;},setNodeSource:function(audioNode){this.hasPlaybackControl=false;this.sourceType='audioNode';this.source=audioNode;this.connect();return this;},setBuffer:function(audioBuffer){this.source.buffer=audioBuffer;this.sourceType='buffer';if(this.autoplay)this.play();return this;},play:function(){if(this.isPlaying===true){console.warn('THREE.Audio: Audio is already playing.');return;}if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return;}var source=this.context.createBufferSource();source.buffer=this.source.buffer;source.loop=this.source.loop;source.onended=this.source.onended;source.start(0,this.startTime);source.playbackRate.value=this.playbackRate;this.isPlaying=true;this.source=source;return this.connect();},pause:function(){if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return;}this.source.stop();this.startTime=this.context.currentTime;return this;},stop:function(){if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return;}this.source.stop();this.startTime=0;return this;},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var i=1,l=this.filters.length;i<l;i++){this.filters[i-1].connect(this.filters[i]);}this.filters[this.filters.length-1].connect(this.getOutput());}else{this.source.connect(this.getOutput());}return this;},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var i=1,l=this.filters.length;i<l;i++){this.filters[i-1].disconnect(this.filters[i]);}this.filters[this.filters.length-1].disconnect(this.getOutput());}else{this.source.disconnect(this.getOutput());}return this;},getFilters:function(){return this.filters;},setFilters:function(value){if(!value)value=[];if(this.isPlaying===true){this.disconnect();this.filters=value;this.connect();}else{this.filters=value;}return this;},getFilter:function(){return this.getFilters()[0];},setFilter:function(filter){return this.setFilters(filter?[filter]:[]);},setPlaybackRate:function(value){if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return;}this.playbackRate=value;if(this.isPlaying===true){this.source.playbackRate.value=this.playbackRate;}return this;},getPlaybackRate:function(){return this.playbackRate;},onEnded:function(){this.isPlaying=false;},getLoop:function(){if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return false;}return this.source.loop;},setLoop:function(value){if(this.hasPlaybackControl===false){console.warn('THREE.Audio: this Audio has no playback control.');return;}this.source.loop=value;},getVolume:function(){return this.gain.gain.value;},setVolume:function(value){this.gain.gain.value=value;return this;}});// File:src/audio/AudioAnalyser.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.AudioAnalyser=function(audio,fftSize){this.analyser=audio.context.createAnalyser();this.analyser.fftSize=fftSize!==undefined?fftSize:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);audio.getOutput().connect(this.analyser);};Object.assign(THREE.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data;},getAverageFrequency:function(){var value=0,data=this.getFrequencyData();for(var i=0;i<data.length;i++){value+=data[i];}return value/data.length;}});// File:src/audio/AudioContext.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */Object.defineProperty(THREE,'AudioContext',{get:function(){var context;return function(){if(context===undefined){context=new(window.AudioContext||window.webkitAudioContext)();}return context;};}()});// File:src/audio/PositionalAudio.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.PositionalAudio=function(listener){THREE.Audio.call(this,listener);this.panner=this.context.createPanner();this.panner.connect(this.gain);};THREE.PositionalAudio.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.PositionalAudio,getOutput:function(){return this.panner;},getRefDistance:function(){return this.panner.refDistance;},setRefDistance:function(value){this.panner.refDistance=value;},getRolloffFactor:function(){return this.panner.rolloffFactor;},setRolloffFactor:function(value){this.panner.rolloffFactor=value;},getDistanceModel:function(){return this.panner.distanceModel;},setDistanceModel:function(value){this.panner.distanceModel=value;},getMaxDistance:function(){return this.panner.maxDistance;},setMaxDistance:function(value){this.panner.maxDistance=value;},updateMatrixWorld:function(){var position=new THREE.Vector3();return function updateMatrixWorld(force){THREE.Object3D.prototype.updateMatrixWorld.call(this,force);position.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(position.x,position.y,position.z);};}()});// File:src/audio/AudioListener.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.AudioListener=function(){THREE.Object3D.call(this);this.type='AudioListener';this.context=THREE.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;};THREE.AudioListener.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.AudioListener,getInput:function(){return this.gain;},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null;}},getFilter:function(){return this.filter;},setFilter:function(value){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);}else{this.gain.disconnect(this.context.destination);}this.filter=value;this.gain.connect(this.filter);this.filter.connect(this.context.destination);},getMasterVolume:function(){return this.gain.gain.value;},setMasterVolume:function(value){this.gain.gain.value=value;},updateMatrixWorld:function(){var position=new THREE.Vector3();var quaternion=new THREE.Quaternion();var scale=new THREE.Vector3();var orientation=new THREE.Vector3();return function updateMatrixWorld(force){THREE.Object3D.prototype.updateMatrixWorld.call(this,force);var listener=this.context.listener;var up=this.up;this.matrixWorld.decompose(position,quaternion,scale);orientation.set(0,0,-1).applyQuaternion(quaternion);listener.setPosition(position.x,position.y,position.z);listener.setOrientation(orientation.x,orientation.y,orientation.z,up.x,up.y,up.z);};}()});// File:src/cameras/Camera.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/THREE.Camera=function(){THREE.Object3D.call(this);this.type='Camera';this.matrixWorldInverse=new THREE.Matrix4();this.projectionMatrix=new THREE.Matrix4();};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var quaternion=new THREE.Quaternion();return function(optionalTarget){var result=optionalTarget||new THREE.Vector3();this.getWorldQuaternion(quaternion);return result.set(0,0,-1).applyQuaternion(quaternion);};}();THREE.Camera.prototype.lookAt=function(){// This routine does not support cameras with rotated and/or translated parent(s)\nvar m1=new THREE.Matrix4();return function(vector){m1.lookAt(this.position,vector,this.up);this.quaternion.setFromRotationMatrix(m1);};}();THREE.Camera.prototype.clone=function(){return new this.constructor().copy(this);};THREE.Camera.prototype.copy=function(source){THREE.Object3D.prototype.copy.call(this,source);this.matrixWorldInverse.copy(source.matrixWorldInverse);this.projectionMatrix.copy(source.projectionMatrix);return this;};// File:src/cameras/CubeCamera.js\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.CubeCamera=function(near,far,cubeResolution){THREE.Object3D.call(this);this.type='CubeCamera';var fov=90,aspect=1;var cameraPX=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPX.up.set(0,-1,0);cameraPX.lookAt(new THREE.Vector3(1,0,0));this.add(cameraPX);var cameraNX=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNX.up.set(0,-1,0);cameraNX.lookAt(new THREE.Vector3(-1,0,0));this.add(cameraNX);var cameraPY=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPY.up.set(0,0,1);cameraPY.lookAt(new THREE.Vector3(0,1,0));this.add(cameraPY);var cameraNY=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNY.up.set(0,0,-1);cameraNY.lookAt(new THREE.Vector3(0,-1,0));this.add(cameraNY);var cameraPZ=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPZ.up.set(0,-1,0);cameraPZ.lookAt(new THREE.Vector3(0,0,1));this.add(cameraPZ);var cameraNZ=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNZ.up.set(0,-1,0);cameraNZ.lookAt(new THREE.Vector3(0,0,-1));this.add(cameraNZ);var options={format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter};this.renderTarget=new THREE.WebGLRenderTargetCube(cubeResolution,cubeResolution,options);this.updateCubeMap=function(renderer,scene){if(this.parent===null)this.updateMatrixWorld();var renderTarget=this.renderTarget;var generateMipmaps=renderTarget.texture.generateMipmaps;renderTarget.texture.generateMipmaps=false;renderTarget.activeCubeFace=0;renderer.render(scene,cameraPX,renderTarget);renderTarget.activeCubeFace=1;renderer.render(scene,cameraNX,renderTarget);renderTarget.activeCubeFace=2;renderer.render(scene,cameraPY,renderTarget);renderTarget.activeCubeFace=3;renderer.render(scene,cameraNY,renderTarget);renderTarget.activeCubeFace=4;renderer.render(scene,cameraPZ,renderTarget);renderTarget.texture.generateMipmaps=generateMipmaps;renderTarget.activeCubeFace=5;renderer.render(scene,cameraNZ,renderTarget);renderer.setRenderTarget(null);};};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;// File:src/cameras/OrthographicCamera.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.OrthographicCamera=function(left,right,top,bottom,near,far){THREE.Camera.call(this);this.type='OrthographicCamera';this.zoom=1;this.left=left;this.right=right;this.top=top;this.bottom=bottom;this.near=near!==undefined?near:0.1;this.far=far!==undefined?far:2000;this.updateProjectionMatrix();};THREE.OrthographicCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.OrthographicCamera,copy:function(source){THREE.Camera.prototype.copy.call(this,source);this.left=source.left;this.right=source.right;this.top=source.top;this.bottom=source.bottom;this.near=source.near;this.far=source.far;this.zoom=source.zoom;return this;},updateProjectionMatrix:function(){var dx=(this.right-this.left)/(2*this.zoom);var dy=(this.top-this.bottom)/(2*this.zoom);var cx=(this.right+this.left)/2;var cy=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(cx-dx,cx+dx,cy+dy,cy-dy,this.near,this.far);},toJSON:function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);data.object.zoom=this.zoom;data.object.left=this.left;data.object.right=this.right;data.object.top=this.top;data.object.bottom=this.bottom;data.object.near=this.near;data.object.far=this.far;return data;}});// File:src/cameras/PerspectiveCamera.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author tschw\r\n */THREE.PerspectiveCamera=function(fov,aspect,near,far){THREE.Camera.call(this);this.type='PerspectiveCamera';this.fov=fov!==undefined?fov:50;this.zoom=1;this.near=near!==undefined?near:0.1;this.far=far!==undefined?far:2000;this.focus=10;this.aspect=aspect!==undefined?aspect:1;this.view=null;this.filmGauge=35;// width of the film (default in millimeters)\nthis.filmOffset=0;// horizontal film offset (same unit as gauge)\nthis.updateProjectionMatrix();};THREE.PerspectiveCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.PerspectiveCamera,copy:function(source){THREE.Camera.prototype.copy.call(this,source);this.fov=source.fov;this.zoom=source.zoom;this.near=source.near;this.far=source.far;this.focus=source.focus;this.aspect=source.aspect;this.view=source.view===null?null:Object.assign({},source.view);this.filmGauge=source.filmGauge;this.filmOffset=source.filmOffset;return this;},/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */setFocalLength:function(focalLength){// see http://www.bobatkins.com/photography/technical/field_of_view.html\nvar vExtentSlope=0.5*this.getFilmHeight()/focalLength;this.fov=THREE.Math.RAD2DEG*2*Math.atan(vExtentSlope);this.updateProjectionMatrix();},/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */getFocalLength:function(){var vExtentSlope=Math.tan(THREE.Math.DEG2RAD*0.5*this.fov);return 0.5*this.getFilmHeight()/vExtentSlope;},getEffectiveFOV:function(){return THREE.Math.RAD2DEG*2*Math.atan(Math.tan(THREE.Math.DEG2RAD*0.5*this.fov)/this.zoom);},getFilmWidth:function(){// film not completely covered in portrait format (aspect < 1)\nreturn this.filmGauge*Math.min(this.aspect,1);},getFilmHeight:function(){// film not completely covered in landscape format (aspect > 1)\nreturn this.filmGauge/Math.max(this.aspect,1);},/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   var w = 1920;\r\n\t *   var h = 1080;\r\n\t *   var fullWidth = w * 3;\r\n\t *   var fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */setViewOffset:function(fullWidth,fullHeight,x,y,width,height){this.aspect=fullWidth/fullHeight;this.view={fullWidth:fullWidth,fullHeight:fullHeight,offsetX:x,offsetY:y,width:width,height:height};this.updateProjectionMatrix();},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix();},updateProjectionMatrix:function(){var near=this.near,top=near*Math.tan(THREE.Math.DEG2RAD*0.5*this.fov)/this.zoom,height=2*top,width=this.aspect*height,left=-0.5*width,view=this.view;if(view!==null){var fullWidth=view.fullWidth,fullHeight=view.fullHeight;left+=view.offsetX*width/fullWidth;top-=view.offsetY*height/fullHeight;width*=view.width/fullWidth;height*=view.height/fullHeight;}var skew=this.filmOffset;if(skew!==0)left+=near*skew/this.getFilmWidth();this.projectionMatrix.makeFrustum(left,left+width,top-height,top,near,this.far);},toJSON:function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);data.object.fov=this.fov;data.object.zoom=this.zoom;data.object.near=this.near;data.object.far=this.far;data.object.focus=this.focus;data.object.aspect=this.aspect;if(this.view!==null)data.object.view=Object.assign({},this.view);data.object.filmGauge=this.filmGauge;data.object.filmOffset=this.filmOffset;return data;}});// File:src/cameras/StereoCamera.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.StereoCamera=function(){this.type='StereoCamera';this.aspect=1;this.cameraL=new THREE.PerspectiveCamera();this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new THREE.PerspectiveCamera();this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false;};Object.assign(THREE.StereoCamera.prototype,{update:function(){var focus,fov,aspect,near,far;var eyeRight=new THREE.Matrix4();var eyeLeft=new THREE.Matrix4();return function update(camera){var needsUpdate=focus!==camera.focus||fov!==camera.fov||aspect!==camera.aspect*this.aspect||near!==camera.near||far!==camera.far;if(needsUpdate){focus=camera.focus;fov=camera.fov;aspect=camera.aspect*this.aspect;near=camera.near;far=camera.far;// Off-axis stereoscopic effect based on\n// http://paulbourke.net/stereographics/stereorender/\nvar projectionMatrix=camera.projectionMatrix.clone();var eyeSep=0.064/2;var eyeSepOnProjection=eyeSep*near/focus;var ymax=near*Math.tan(THREE.Math.DEG2RAD*fov*0.5);var xmin,xmax;// translate xOffset\neyeLeft.elements[12]=-eyeSep;eyeRight.elements[12]=eyeSep;// for left eye\nxmin=-ymax*aspect+eyeSepOnProjection;xmax=ymax*aspect+eyeSepOnProjection;projectionMatrix.elements[0]=2*near/(xmax-xmin);projectionMatrix.elements[8]=(xmax+xmin)/(xmax-xmin);this.cameraL.projectionMatrix.copy(projectionMatrix);// for right eye\nxmin=-ymax*aspect-eyeSepOnProjection;xmax=ymax*aspect-eyeSepOnProjection;projectionMatrix.elements[0]=2*near/(xmax-xmin);projectionMatrix.elements[8]=(xmax+xmin)/(xmax-xmin);this.cameraR.projectionMatrix.copy(projectionMatrix);}this.cameraL.matrixWorld.copy(camera.matrixWorld).multiply(eyeLeft);this.cameraR.matrixWorld.copy(camera.matrixWorld).multiply(eyeRight);};}()});// File:src/lights/Light.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Light=function(color,intensity){THREE.Object3D.call(this);this.type='Light';this.color=new THREE.Color(color);this.intensity=intensity!==undefined?intensity:1;this.receiveShadow=undefined;};THREE.Light.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Light,copy:function(source){THREE.Object3D.prototype.copy.call(this,source);this.color.copy(source.color);this.intensity=source.intensity;return this;},toJSON:function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);data.object.color=this.color.getHex();data.object.intensity=this.intensity;if(this.groundColor!==undefined)data.object.groundColor=this.groundColor.getHex();if(this.distance!==undefined)data.object.distance=this.distance;if(this.angle!==undefined)data.object.angle=this.angle;if(this.decay!==undefined)data.object.decay=this.decay;if(this.penumbra!==undefined)data.object.penumbra=this.penumbra;return data;}});// File:src/lights/LightShadow.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.LightShadow=function(camera){this.camera=camera;this.bias=0;this.radius=1;this.mapSize=new THREE.Vector2(512,512);this.map=null;this.matrix=new THREE.Matrix4();};Object.assign(THREE.LightShadow.prototype,{copy:function(source){this.camera=source.camera.clone();this.bias=source.bias;this.radius=source.radius;this.mapSize.copy(source.mapSize);return this;},clone:function(){return new this.constructor().copy(this);}});// File:src/lights/AmbientLight.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.AmbientLight=function(color,intensity){THREE.Light.call(this,color,intensity);this.type='AmbientLight';this.castShadow=undefined;};THREE.AmbientLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.AmbientLight});// File:src/lights/DirectionalLight.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.DirectionalLight=function(color,intensity){THREE.Light.call(this,color,intensity);this.type='DirectionalLight';this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D();this.shadow=new THREE.DirectionalLightShadow();};THREE.DirectionalLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.DirectionalLight,copy:function(source){THREE.Light.prototype.copy.call(this,source);this.target=source.target.clone();this.shadow=source.shadow.clone();return this;}});// File:src/lights/DirectionalLightShadow.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.DirectionalLightShadow=function(light){THREE.LightShadow.call(this,new THREE.OrthographicCamera(-5,5,5,-5,0.5,500));};THREE.DirectionalLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.DirectionalLightShadow});// File:src/lights/HemisphereLight.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.HemisphereLight=function(skyColor,groundColor,intensity){THREE.Light.call(this,skyColor,intensity);this.type='HemisphereLight';this.castShadow=undefined;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new THREE.Color(groundColor);};THREE.HemisphereLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.HemisphereLight,copy:function(source){THREE.Light.prototype.copy.call(this,source);this.groundColor.copy(source.groundColor);return this;}});// File:src/lights/PointLight.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.PointLight=function(color,intensity,distance,decay){THREE.Light.call(this,color,intensity);this.type='PointLight';Object.defineProperty(this,'power',{get:function(){// intensity = power per solid angle.\n// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\nreturn this.intensity*4*Math.PI;},set:function(power){// intensity = power per solid angle.\n// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\nthis.intensity=power/(4*Math.PI);}});this.distance=distance!==undefined?distance:0;this.decay=decay!==undefined?decay:1;// for physically correct lights, should be 2.\nthis.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,0.5,500));};THREE.PointLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.PointLight,copy:function(source){THREE.Light.prototype.copy.call(this,source);this.distance=source.distance;this.decay=source.decay;this.shadow=source.shadow.clone();return this;}});// File:src/lights/SpotLight.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.SpotLight=function(color,intensity,distance,angle,penumbra,decay){THREE.Light.call(this,color,intensity);this.type='SpotLight';this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D();Object.defineProperty(this,'power',{get:function(){// intensity = power per solid angle.\n// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\nreturn this.intensity*Math.PI;},set:function(power){// intensity = power per solid angle.\n// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\nthis.intensity=power/Math.PI;}});this.distance=distance!==undefined?distance:0;this.angle=angle!==undefined?angle:Math.PI/3;this.penumbra=penumbra!==undefined?penumbra:0;this.decay=decay!==undefined?decay:1;// for physically correct lights, should be 2.\nthis.shadow=new THREE.SpotLightShadow();};THREE.SpotLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.SpotLight,copy:function(source){THREE.Light.prototype.copy.call(this,source);this.distance=source.distance;this.angle=source.angle;this.penumbra=source.penumbra;this.decay=source.decay;this.target=source.target.clone();this.shadow=source.shadow.clone();return this;}});// File:src/lights/SpotLightShadow.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.SpotLightShadow=function(){THREE.LightShadow.call(this,new THREE.PerspectiveCamera(50,1,0.5,500));};THREE.SpotLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.SpotLightShadow,update:function(light){var fov=THREE.Math.RAD2DEG*2*light.angle;var aspect=this.mapSize.width/this.mapSize.height;var far=light.distance||500;var camera=this.camera;if(fov!==camera.fov||aspect!==camera.aspect||far!==camera.far){camera.fov=fov;camera.aspect=aspect;camera.far=far;camera.updateProjectionMatrix();}}});// File:src/loaders/AudioLoader.js\n/**\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */THREE.AudioLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.AudioLoader.prototype={constructor:THREE.AudioLoader,load:function(url,onLoad,onProgress,onError){var loader=new THREE.XHRLoader(this.manager);loader.setResponseType('arraybuffer');loader.load(url,function(buffer){var context=THREE.AudioContext;context.decodeAudioData(buffer,function(audioBuffer){onLoad(audioBuffer);});},onProgress,onError);}};// File:src/loaders/Cache.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Cache={enabled:false,files:{},add:function(key,file){if(this.enabled===false)return;// console.log( 'THREE.Cache', 'Adding key:', key );\nthis.files[key]=file;},get:function(key){if(this.enabled===false)return;// console.log( 'THREE.Cache', 'Checking key:', key );\nreturn this.files[key];},remove:function(key){delete this.files[key];},clear:function(){this.files={};}};// File:src/loaders/Loader.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};};THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:undefined,extractUrlBase:function(url){var parts=url.split('/');if(parts.length===1)return'./';parts.pop();return parts.join('/')+'/';},initMaterials:function(materials,texturePath,crossOrigin){var array=[];for(var i=0;i<materials.length;++i){array[i]=this.createMaterial(materials[i],texturePath,crossOrigin);}return array;},createMaterial:function(){var color,textureLoader,materialLoader;return function(m,texturePath,crossOrigin){if(color===undefined)color=new THREE.Color();if(textureLoader===undefined)textureLoader=new THREE.TextureLoader();if(materialLoader===undefined)materialLoader=new THREE.MaterialLoader();// convert from old material format\nvar textures={};function loadTexture(path,repeat,offset,wrap,anisotropy){var fullPath=texturePath+path;var loader=THREE.Loader.Handlers.get(fullPath);var texture;if(loader!==null){texture=loader.load(fullPath);}else{textureLoader.setCrossOrigin(crossOrigin);texture=textureLoader.load(fullPath);}if(repeat!==undefined){texture.repeat.fromArray(repeat);if(repeat[0]!==1)texture.wrapS=THREE.RepeatWrapping;if(repeat[1]!==1)texture.wrapT=THREE.RepeatWrapping;}if(offset!==undefined){texture.offset.fromArray(offset);}if(wrap!==undefined){if(wrap[0]==='repeat')texture.wrapS=THREE.RepeatWrapping;if(wrap[0]==='mirror')texture.wrapS=THREE.MirroredRepeatWrapping;if(wrap[1]==='repeat')texture.wrapT=THREE.RepeatWrapping;if(wrap[1]==='mirror')texture.wrapT=THREE.MirroredRepeatWrapping;}if(anisotropy!==undefined){texture.anisotropy=anisotropy;}var uuid=THREE.Math.generateUUID();textures[uuid]=texture;return uuid;}//\nvar json={uuid:THREE.Math.generateUUID(),type:'MeshLambertMaterial'};for(var name in m){var value=m[name];switch(name){case'DbgColor':case'DbgIndex':case'opticalDensity':case'illumination':break;case'DbgName':json.name=value;break;case'blending':json.blending=THREE[value];break;case'colorAmbient':case'mapAmbient':console.warn('THREE.Loader.createMaterial:',name,'is no longer supported.');break;case'colorDiffuse':json.color=color.fromArray(value).getHex();break;case'colorSpecular':json.specular=color.fromArray(value).getHex();break;case'colorEmissive':json.emissive=color.fromArray(value).getHex();break;case'specularCoef':json.shininess=value;break;case'shading':if(value.toLowerCase()==='basic')json.type='MeshBasicMaterial';if(value.toLowerCase()==='phong')json.type='MeshPhongMaterial';break;case'mapDiffuse':json.map=loadTexture(value,m.mapDiffuseRepeat,m.mapDiffuseOffset,m.mapDiffuseWrap,m.mapDiffuseAnisotropy);break;case'mapDiffuseRepeat':case'mapDiffuseOffset':case'mapDiffuseWrap':case'mapDiffuseAnisotropy':break;case'mapLight':json.lightMap=loadTexture(value,m.mapLightRepeat,m.mapLightOffset,m.mapLightWrap,m.mapLightAnisotropy);break;case'mapLightRepeat':case'mapLightOffset':case'mapLightWrap':case'mapLightAnisotropy':break;case'mapAO':json.aoMap=loadTexture(value,m.mapAORepeat,m.mapAOOffset,m.mapAOWrap,m.mapAOAnisotropy);break;case'mapAORepeat':case'mapAOOffset':case'mapAOWrap':case'mapAOAnisotropy':break;case'mapBump':json.bumpMap=loadTexture(value,m.mapBumpRepeat,m.mapBumpOffset,m.mapBumpWrap,m.mapBumpAnisotropy);break;case'mapBumpScale':json.bumpScale=value;break;case'mapBumpRepeat':case'mapBumpOffset':case'mapBumpWrap':case'mapBumpAnisotropy':break;case'mapNormal':json.normalMap=loadTexture(value,m.mapNormalRepeat,m.mapNormalOffset,m.mapNormalWrap,m.mapNormalAnisotropy);break;case'mapNormalFactor':json.normalScale=[value,value];break;case'mapNormalRepeat':case'mapNormalOffset':case'mapNormalWrap':case'mapNormalAnisotropy':break;case'mapSpecular':json.specularMap=loadTexture(value,m.mapSpecularRepeat,m.mapSpecularOffset,m.mapSpecularWrap,m.mapSpecularAnisotropy);break;case'mapSpecularRepeat':case'mapSpecularOffset':case'mapSpecularWrap':case'mapSpecularAnisotropy':break;case'mapAlpha':json.alphaMap=loadTexture(value,m.mapAlphaRepeat,m.mapAlphaOffset,m.mapAlphaWrap,m.mapAlphaAnisotropy);break;case'mapAlphaRepeat':case'mapAlphaOffset':case'mapAlphaWrap':case'mapAlphaAnisotropy':break;case'flipSided':json.side=THREE.BackSide;break;case'doubleSided':json.side=THREE.DoubleSide;break;case'transparency':console.warn('THREE.Loader.createMaterial: transparency has been renamed to opacity');json.opacity=value;break;case'depthTest':case'depthWrite':case'colorWrite':case'opacity':case'reflectivity':case'transparent':case'visible':case'wireframe':json[name]=value;break;case'vertexColors':if(value===true)json.vertexColors=THREE.VertexColors;if(value==='face')json.vertexColors=THREE.FaceColors;break;default:console.error('THREE.Loader.createMaterial: Unsupported',name,value);break;}}if(json.type==='MeshBasicMaterial')delete json.emissive;if(json.type!=='MeshPhongMaterial')delete json.specular;if(json.opacity<1)json.transparent=true;materialLoader.setTextures(textures);return materialLoader.parse(json);};}()};THREE.Loader.Handlers={handlers:[],add:function(regex,loader){this.handlers.push(regex,loader);},get:function(file){var handlers=this.handlers;for(var i=0,l=handlers.length;i<l;i+=2){var regex=handlers[i];var loader=handlers[i+1];if(regex.test(file)){return loader;}}return null;}};// File:src/loaders/XHRLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.XHRLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(url,onLoad,onProgress,onError){if(this.path!==undefined)url=this.path+url;var scope=this;var cached=THREE.Cache.get(url);if(cached!==undefined){if(onLoad){setTimeout(function(){onLoad(cached);},0);}return cached;}var request=new XMLHttpRequest();request.overrideMimeType('text/plain');request.open('GET',url,true);request.addEventListener('load',function(event){var response=event.target.response;THREE.Cache.add(url,response);if(this.status===200){if(onLoad)onLoad(response);scope.manager.itemEnd(url);}else if(this.status===0){// Some browsers return HTTP Status 0 when using non-http protocol\n// e.g. 'file://' or 'data://'. Handle as success.\nconsole.warn('THREE.XHRLoader: HTTP Status 0 received.');if(onLoad)onLoad(response);scope.manager.itemEnd(url);}else{if(onError)onError(event);scope.manager.itemError(url);}},false);if(onProgress!==undefined){request.addEventListener('progress',function(event){onProgress(event);},false);}request.addEventListener('error',function(event){if(onError)onError(event);scope.manager.itemError(url);},false);if(this.responseType!==undefined)request.responseType=this.responseType;if(this.withCredentials!==undefined)request.withCredentials=this.withCredentials;request.send(null);scope.manager.itemStart(url);return request;},setPath:function(value){this.path=value;},setResponseType:function(value){this.responseType=value;},setWithCredentials:function(value){this.withCredentials=value;}};// File:src/loaders/FontLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.FontLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.FontLoader.prototype={constructor:THREE.FontLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.XHRLoader(this.manager);loader.load(url,function(text){var json;try{json=JSON.parse(text);}catch(e){console.warn('THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.');json=JSON.parse(text.substring(65,text.length-2));}var font=scope.parse(json);if(onLoad)onLoad(font);},onProgress,onError);},parse:function(json){return new THREE.Font(json);}};// File:src/loaders/ImageLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.ImageLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(url,onLoad,onProgress,onError){if(this.path!==undefined)url=this.path+url;var scope=this;var cached=THREE.Cache.get(url);if(cached!==undefined){scope.manager.itemStart(url);if(onLoad){setTimeout(function(){onLoad(cached);scope.manager.itemEnd(url);},0);}else{scope.manager.itemEnd(url);}return cached;}var image=document.createElement('img');image.addEventListener('load',function(event){THREE.Cache.add(url,this);if(onLoad)onLoad(this);scope.manager.itemEnd(url);},false);if(onProgress!==undefined){image.addEventListener('progress',function(event){onProgress(event);},false);}image.addEventListener('error',function(event){if(onError)onError(event);scope.manager.itemError(url);},false);if(this.crossOrigin!==undefined)image.crossOrigin=this.crossOrigin;scope.manager.itemStart(url);image.src=url;return image;},setCrossOrigin:function(value){this.crossOrigin=value;},setPath:function(value){this.path=value;}};// File:src/loaders/JSONLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.JSONLoader=function(manager){if(typeof manager==='boolean'){console.warn('THREE.JSONLoader: showStatus parameter has been removed from constructor.');manager=undefined;}this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;this.withCredentials=false;};THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,// Deprecated\nget statusDomElement(){if(this._statusDomElement===undefined){this._statusDomElement=document.createElement('div');}console.warn('THREE.JSONLoader: .statusDomElement has been removed.');return this._statusDomElement;},load:function(url,onLoad,onProgress,onError){var scope=this;var texturePath=this.texturePath&&typeof this.texturePath===\"string\"?this.texturePath:THREE.Loader.prototype.extractUrlBase(url);var loader=new THREE.XHRLoader(this.manager);loader.setWithCredentials(this.withCredentials);loader.load(url,function(text){var json=JSON.parse(text);var metadata=json.metadata;if(metadata!==undefined){var type=metadata.type;if(type!==undefined){if(type.toLowerCase()==='object'){console.error('THREE.JSONLoader: '+url+' should be loaded with THREE.ObjectLoader instead.');return;}if(type.toLowerCase()==='scene'){console.error('THREE.JSONLoader: '+url+' should be loaded with THREE.SceneLoader instead.');return;}}}var object=scope.parse(json,texturePath);onLoad(object.geometry,object.materials);},onProgress,onError);},setTexturePath:function(value){this.texturePath=value;},parse:function(json,texturePath){var geometry=new THREE.Geometry(),scale=json.scale!==undefined?1.0/json.scale:1.0;parseModel(scale);parseSkin();parseMorphing(scale);parseAnimations();geometry.computeFaceNormals();geometry.computeBoundingSphere();function parseModel(scale){function isBitSet(value,position){return value&1<<position;}var i,j,fi,offset,zLength,colorIndex,normalIndex,uvIndex,materialIndex,type,isQuad,hasMaterial,hasFaceVertexUv,hasFaceNormal,hasFaceVertexNormal,hasFaceColor,hasFaceVertexColor,vertex,face,faceA,faceB,hex,normal,uvLayer,uv,u,v,faces=json.faces,vertices=json.vertices,normals=json.normals,colors=json.colors,nUvLayers=0;if(json.uvs!==undefined){// disregard empty arrays\nfor(i=0;i<json.uvs.length;i++){if(json.uvs[i].length)nUvLayers++;}for(i=0;i<nUvLayers;i++){geometry.faceVertexUvs[i]=[];}}offset=0;zLength=vertices.length;while(offset<zLength){vertex=new THREE.Vector3();vertex.x=vertices[offset++]*scale;vertex.y=vertices[offset++]*scale;vertex.z=vertices[offset++]*scale;geometry.vertices.push(vertex);}offset=0;zLength=faces.length;while(offset<zLength){type=faces[offset++];isQuad=isBitSet(type,0);hasMaterial=isBitSet(type,1);hasFaceVertexUv=isBitSet(type,3);hasFaceNormal=isBitSet(type,4);hasFaceVertexNormal=isBitSet(type,5);hasFaceColor=isBitSet(type,6);hasFaceVertexColor=isBitSet(type,7);// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\nif(isQuad){faceA=new THREE.Face3();faceA.a=faces[offset];faceA.b=faces[offset+1];faceA.c=faces[offset+3];faceB=new THREE.Face3();faceB.a=faces[offset+1];faceB.b=faces[offset+2];faceB.c=faces[offset+3];offset+=4;if(hasMaterial){materialIndex=faces[offset++];faceA.materialIndex=materialIndex;faceB.materialIndex=materialIndex;}// to get face <=> uv index correspondence\nfi=geometry.faces.length;if(hasFaceVertexUv){for(i=0;i<nUvLayers;i++){uvLayer=json.uvs[i];geometry.faceVertexUvs[i][fi]=[];geometry.faceVertexUvs[i][fi+1]=[];for(j=0;j<4;j++){uvIndex=faces[offset++];u=uvLayer[uvIndex*2];v=uvLayer[uvIndex*2+1];uv=new THREE.Vector2(u,v);if(j!==2)geometry.faceVertexUvs[i][fi].push(uv);if(j!==0)geometry.faceVertexUvs[i][fi+1].push(uv);}}}if(hasFaceNormal){normalIndex=faces[offset++]*3;faceA.normal.set(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]);faceB.normal.copy(faceA.normal);}if(hasFaceVertexNormal){for(i=0;i<4;i++){normalIndex=faces[offset++]*3;normal=new THREE.Vector3(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]);if(i!==2)faceA.vertexNormals.push(normal);if(i!==0)faceB.vertexNormals.push(normal);}}if(hasFaceColor){colorIndex=faces[offset++];hex=colors[colorIndex];faceA.color.setHex(hex);faceB.color.setHex(hex);}if(hasFaceVertexColor){for(i=0;i<4;i++){colorIndex=faces[offset++];hex=colors[colorIndex];if(i!==2)faceA.vertexColors.push(new THREE.Color(hex));if(i!==0)faceB.vertexColors.push(new THREE.Color(hex));}}geometry.faces.push(faceA);geometry.faces.push(faceB);}else{face=new THREE.Face3();face.a=faces[offset++];face.b=faces[offset++];face.c=faces[offset++];if(hasMaterial){materialIndex=faces[offset++];face.materialIndex=materialIndex;}// to get face <=> uv index correspondence\nfi=geometry.faces.length;if(hasFaceVertexUv){for(i=0;i<nUvLayers;i++){uvLayer=json.uvs[i];geometry.faceVertexUvs[i][fi]=[];for(j=0;j<3;j++){uvIndex=faces[offset++];u=uvLayer[uvIndex*2];v=uvLayer[uvIndex*2+1];uv=new THREE.Vector2(u,v);geometry.faceVertexUvs[i][fi].push(uv);}}}if(hasFaceNormal){normalIndex=faces[offset++]*3;face.normal.set(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]);}if(hasFaceVertexNormal){for(i=0;i<3;i++){normalIndex=faces[offset++]*3;normal=new THREE.Vector3(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]);face.vertexNormals.push(normal);}}if(hasFaceColor){colorIndex=faces[offset++];face.color.setHex(colors[colorIndex]);}if(hasFaceVertexColor){for(i=0;i<3;i++){colorIndex=faces[offset++];face.vertexColors.push(new THREE.Color(colors[colorIndex]));}}geometry.faces.push(face);}}}function parseSkin(){var influencesPerVertex=json.influencesPerVertex!==undefined?json.influencesPerVertex:2;if(json.skinWeights){for(var i=0,l=json.skinWeights.length;i<l;i+=influencesPerVertex){var x=json.skinWeights[i];var y=influencesPerVertex>1?json.skinWeights[i+1]:0;var z=influencesPerVertex>2?json.skinWeights[i+2]:0;var w=influencesPerVertex>3?json.skinWeights[i+3]:0;geometry.skinWeights.push(new THREE.Vector4(x,y,z,w));}}if(json.skinIndices){for(var i=0,l=json.skinIndices.length;i<l;i+=influencesPerVertex){var a=json.skinIndices[i];var b=influencesPerVertex>1?json.skinIndices[i+1]:0;var c=influencesPerVertex>2?json.skinIndices[i+2]:0;var d=influencesPerVertex>3?json.skinIndices[i+3]:0;geometry.skinIndices.push(new THREE.Vector4(a,b,c,d));}}geometry.bones=json.bones;if(geometry.bones&&geometry.bones.length>0&&(geometry.skinWeights.length!==geometry.skinIndices.length||geometry.skinIndices.length!==geometry.vertices.length)){console.warn('When skinning, number of vertices ('+geometry.vertices.length+'), skinIndices ('+geometry.skinIndices.length+'), and skinWeights ('+geometry.skinWeights.length+') should match.');}}function parseMorphing(scale){if(json.morphTargets!==undefined){for(var i=0,l=json.morphTargets.length;i<l;i++){geometry.morphTargets[i]={};geometry.morphTargets[i].name=json.morphTargets[i].name;geometry.morphTargets[i].vertices=[];var dstVertices=geometry.morphTargets[i].vertices;var srcVertices=json.morphTargets[i].vertices;for(var v=0,vl=srcVertices.length;v<vl;v+=3){var vertex=new THREE.Vector3();vertex.x=srcVertices[v]*scale;vertex.y=srcVertices[v+1]*scale;vertex.z=srcVertices[v+2]*scale;dstVertices.push(vertex);}}}if(json.morphColors!==undefined&&json.morphColors.length>0){console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.');var faces=geometry.faces;var morphColors=json.morphColors[0].colors;for(var i=0,l=faces.length;i<l;i++){faces[i].color.fromArray(morphColors,i*3);}}}function parseAnimations(){var outputAnimations=[];// parse old style Bone/Hierarchy animations\nvar animations=[];if(json.animation!==undefined){animations.push(json.animation);}if(json.animations!==undefined){if(json.animations.length){animations=animations.concat(json.animations);}else{animations.push(json.animations);}}for(var i=0;i<animations.length;i++){var clip=THREE.AnimationClip.parseAnimation(animations[i],geometry.bones);if(clip)outputAnimations.push(clip);}// parse implicit morph animations\nif(geometry.morphTargets){// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\nvar morphAnimationClips=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(geometry.morphTargets,10);outputAnimations=outputAnimations.concat(morphAnimationClips);}if(outputAnimations.length>0)geometry.animations=outputAnimations;}if(json.materials===undefined||json.materials.length===0){return{geometry:geometry};}else{var materials=THREE.Loader.prototype.initMaterials(json.materials,texturePath,this.crossOrigin);return{geometry:geometry,materials:materials};}}};// File:src/loaders/LoadingManager.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.LoadingManager=function(onLoad,onProgress,onError){var scope=this;var isLoading=false,itemsLoaded=0,itemsTotal=0;this.onStart=undefined;this.onLoad=onLoad;this.onProgress=onProgress;this.onError=onError;this.itemStart=function(url){itemsTotal++;if(isLoading===false){if(scope.onStart!==undefined){scope.onStart(url,itemsLoaded,itemsTotal);}}isLoading=true;};this.itemEnd=function(url){itemsLoaded++;if(scope.onProgress!==undefined){scope.onProgress(url,itemsLoaded,itemsTotal);}if(itemsLoaded===itemsTotal){isLoading=false;if(scope.onLoad!==undefined){scope.onLoad();}}};this.itemError=function(url){if(scope.onError!==undefined){scope.onError(url);}};};THREE.DefaultLoadingManager=new THREE.LoadingManager();// File:src/loaders/BufferGeometryLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.BufferGeometryLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.XHRLoader(scope.manager);loader.load(url,function(text){onLoad(scope.parse(JSON.parse(text)));},onProgress,onError);},parse:function(json){var geometry=new THREE.BufferGeometry();var index=json.data.index;var TYPED_ARRAYS={'Int8Array':Int8Array,'Uint8Array':Uint8Array,'Uint8ClampedArray':Uint8ClampedArray,'Int16Array':Int16Array,'Uint16Array':Uint16Array,'Int32Array':Int32Array,'Uint32Array':Uint32Array,'Float32Array':Float32Array,'Float64Array':Float64Array};if(index!==undefined){var typedArray=new TYPED_ARRAYS[index.type](index.array);geometry.setIndex(new THREE.BufferAttribute(typedArray,1));}var attributes=json.data.attributes;for(var key in attributes){var attribute=attributes[key];var typedArray=new TYPED_ARRAYS[attribute.type](attribute.array);geometry.addAttribute(key,new THREE.BufferAttribute(typedArray,attribute.itemSize,attribute.normalized));}var groups=json.data.groups||json.data.drawcalls||json.data.offsets;if(groups!==undefined){for(var i=0,n=groups.length;i!==n;++i){var group=groups[i];geometry.addGroup(group.start,group.count,group.materialIndex);}}var boundingSphere=json.data.boundingSphere;if(boundingSphere!==undefined){var center=new THREE.Vector3();if(boundingSphere.center!==undefined){center.fromArray(boundingSphere.center);}geometry.boundingSphere=new THREE.Sphere(center,boundingSphere.radius);}return geometry;}};// File:src/loaders/MaterialLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.MaterialLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;this.textures={};};THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.XHRLoader(scope.manager);loader.load(url,function(text){onLoad(scope.parse(JSON.parse(text)));},onProgress,onError);},setTextures:function(value){this.textures=value;},getTexture:function(name){var textures=this.textures;if(textures[name]===undefined){console.warn('THREE.MaterialLoader: Undefined texture',name);}return textures[name];},parse:function(json){var material=new THREE[json.type]();if(json.uuid!==undefined)material.uuid=json.uuid;if(json.name!==undefined)material.name=json.name;if(json.color!==undefined)material.color.setHex(json.color);if(json.roughness!==undefined)material.roughness=json.roughness;if(json.metalness!==undefined)material.metalness=json.metalness;if(json.emissive!==undefined)material.emissive.setHex(json.emissive);if(json.specular!==undefined)material.specular.setHex(json.specular);if(json.shininess!==undefined)material.shininess=json.shininess;if(json.uniforms!==undefined)material.uniforms=json.uniforms;if(json.vertexShader!==undefined)material.vertexShader=json.vertexShader;if(json.fragmentShader!==undefined)material.fragmentShader=json.fragmentShader;if(json.vertexColors!==undefined)material.vertexColors=json.vertexColors;if(json.shading!==undefined)material.shading=json.shading;if(json.blending!==undefined)material.blending=json.blending;if(json.side!==undefined)material.side=json.side;if(json.opacity!==undefined)material.opacity=json.opacity;if(json.transparent!==undefined)material.transparent=json.transparent;if(json.alphaTest!==undefined)material.alphaTest=json.alphaTest;if(json.depthTest!==undefined)material.depthTest=json.depthTest;if(json.depthWrite!==undefined)material.depthWrite=json.depthWrite;if(json.colorWrite!==undefined)material.colorWrite=json.colorWrite;if(json.wireframe!==undefined)material.wireframe=json.wireframe;if(json.wireframeLinewidth!==undefined)material.wireframeLinewidth=json.wireframeLinewidth;// for PointsMaterial\nif(json.size!==undefined)material.size=json.size;if(json.sizeAttenuation!==undefined)material.sizeAttenuation=json.sizeAttenuation;// maps\nif(json.map!==undefined)material.map=this.getTexture(json.map);if(json.alphaMap!==undefined){material.alphaMap=this.getTexture(json.alphaMap);material.transparent=true;}if(json.bumpMap!==undefined)material.bumpMap=this.getTexture(json.bumpMap);if(json.bumpScale!==undefined)material.bumpScale=json.bumpScale;if(json.normalMap!==undefined)material.normalMap=this.getTexture(json.normalMap);if(json.normalScale!==undefined){var normalScale=json.normalScale;if(Array.isArray(normalScale)===false){// Blender exporter used to export a scalar. See #7459\nnormalScale=[normalScale,normalScale];}material.normalScale=new THREE.Vector2().fromArray(normalScale);}if(json.displacementMap!==undefined)material.displacementMap=this.getTexture(json.displacementMap);if(json.displacementScale!==undefined)material.displacementScale=json.displacementScale;if(json.displacementBias!==undefined)material.displacementBias=json.displacementBias;if(json.roughnessMap!==undefined)material.roughnessMap=this.getTexture(json.roughnessMap);if(json.metalnessMap!==undefined)material.metalnessMap=this.getTexture(json.metalnessMap);if(json.emissiveMap!==undefined)material.emissiveMap=this.getTexture(json.emissiveMap);if(json.emissiveIntensity!==undefined)material.emissiveIntensity=json.emissiveIntensity;if(json.specularMap!==undefined)material.specularMap=this.getTexture(json.specularMap);if(json.envMap!==undefined){material.envMap=this.getTexture(json.envMap);material.combine=THREE.MultiplyOperation;}if(json.reflectivity)material.reflectivity=json.reflectivity;if(json.lightMap!==undefined)material.lightMap=this.getTexture(json.lightMap);if(json.lightMapIntensity!==undefined)material.lightMapIntensity=json.lightMapIntensity;if(json.aoMap!==undefined)material.aoMap=this.getTexture(json.aoMap);if(json.aoMapIntensity!==undefined)material.aoMapIntensity=json.aoMapIntensity;// MultiMaterial\nif(json.materials!==undefined){for(var i=0,l=json.materials.length;i<l;i++){material.materials.push(this.parse(json.materials[i]));}}return material;}};// File:src/loaders/ObjectLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.ObjectLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;this.texturePath='';};THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(url,onLoad,onProgress,onError){if(this.texturePath===''){this.texturePath=url.substring(0,url.lastIndexOf('/')+1);}var scope=this;var loader=new THREE.XHRLoader(scope.manager);loader.load(url,function(text){scope.parse(JSON.parse(text),onLoad);},onProgress,onError);},setTexturePath:function(value){this.texturePath=value;},setCrossOrigin:function(value){this.crossOrigin=value;},parse:function(json,onLoad){var geometries=this.parseGeometries(json.geometries);var images=this.parseImages(json.images,function(){if(onLoad!==undefined)onLoad(object);});var textures=this.parseTextures(json.textures,images);var materials=this.parseMaterials(json.materials,textures);var object=this.parseObject(json.object,geometries,materials);if(json.animations){object.animations=this.parseAnimations(json.animations);}if(json.images===undefined||json.images.length===0){if(onLoad!==undefined)onLoad(object);}return object;},parseGeometries:function(json){var geometries={};if(json!==undefined){var geometryLoader=new THREE.JSONLoader();var bufferGeometryLoader=new THREE.BufferGeometryLoader();for(var i=0,l=json.length;i<l;i++){var geometry;var data=json[i];switch(data.type){case'PlaneGeometry':case'PlaneBufferGeometry':geometry=new THREE[data.type](data.width,data.height,data.widthSegments,data.heightSegments);break;case'BoxGeometry':case'BoxBufferGeometry':case'CubeGeometry':// backwards compatible\ngeometry=new THREE[data.type](data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments);break;case'CircleGeometry':case'CircleBufferGeometry':geometry=new THREE[data.type](data.radius,data.segments,data.thetaStart,data.thetaLength);break;case'CylinderGeometry':case'CylinderBufferGeometry':geometry=new THREE[data.type](data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength);break;case'ConeGeometry':case'ConeBufferGeometry':geometry=new THREE[data.type](data.radius,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength);break;case'SphereGeometry':case'SphereBufferGeometry':geometry=new THREE[data.type](data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength);break;case'DodecahedronGeometry':case'IcosahedronGeometry':case'OctahedronGeometry':case'TetrahedronGeometry':geometry=new THREE[data.type](data.radius,data.detail);break;case'RingGeometry':case'RingBufferGeometry':geometry=new THREE[data.type](data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength);break;case'TorusGeometry':case'TorusBufferGeometry':geometry=new THREE[data.type](data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc);break;case'TorusKnotGeometry':case'TorusKnotBufferGeometry':geometry=new THREE[data.type](data.radius,data.tube,data.tubularSegments,data.radialSegments,data.p,data.q);break;case'LatheGeometry':case'LatheBufferGeometry':geometry=new THREE[data.type](data.points,data.segments,data.phiStart,data.phiLength);break;case'BufferGeometry':geometry=bufferGeometryLoader.parse(data);break;case'Geometry':geometry=geometryLoader.parse(data.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+data.type+'\"');continue;}geometry.uuid=data.uuid;if(data.name!==undefined)geometry.name=data.name;geometries[data.uuid]=geometry;}}return geometries;},parseMaterials:function(json,textures){var materials={};if(json!==undefined){var loader=new THREE.MaterialLoader();loader.setTextures(textures);for(var i=0,l=json.length;i<l;i++){var material=loader.parse(json[i]);materials[material.uuid]=material;}}return materials;},parseAnimations:function(json){var animations=[];for(var i=0;i<json.length;i++){var clip=THREE.AnimationClip.parse(json[i]);animations.push(clip);}return animations;},parseImages:function(json,onLoad){var scope=this;var images={};function loadImage(url){scope.manager.itemStart(url);return loader.load(url,function(){scope.manager.itemEnd(url);});}if(json!==undefined&&json.length>0){var manager=new THREE.LoadingManager(onLoad);var loader=new THREE.ImageLoader(manager);loader.setCrossOrigin(this.crossOrigin);for(var i=0,l=json.length;i<l;i++){var image=json[i];var path=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(image.url)?image.url:scope.texturePath+image.url;images[image.uuid]=loadImage(path);}}return images;},parseTextures:function(json,images){function parseConstant(value){if(typeof value==='number')return value;console.warn('THREE.ObjectLoader.parseTexture: Constant should be in numeric form.',value);return THREE[value];}var textures={};if(json!==undefined){for(var i=0,l=json.length;i<l;i++){var data=json[i];if(data.image===undefined){console.warn('THREE.ObjectLoader: No \"image\" specified for',data.uuid);}if(images[data.image]===undefined){console.warn('THREE.ObjectLoader: Undefined image',data.image);}var texture=new THREE.Texture(images[data.image]);texture.needsUpdate=true;texture.uuid=data.uuid;if(data.name!==undefined)texture.name=data.name;if(data.mapping!==undefined)texture.mapping=parseConstant(data.mapping);if(data.offset!==undefined)texture.offset=new THREE.Vector2(data.offset[0],data.offset[1]);if(data.repeat!==undefined)texture.repeat=new THREE.Vector2(data.repeat[0],data.repeat[1]);if(data.minFilter!==undefined)texture.minFilter=parseConstant(data.minFilter);if(data.magFilter!==undefined)texture.magFilter=parseConstant(data.magFilter);if(data.anisotropy!==undefined)texture.anisotropy=data.anisotropy;if(Array.isArray(data.wrap)){texture.wrapS=parseConstant(data.wrap[0]);texture.wrapT=parseConstant(data.wrap[1]);}textures[data.uuid]=texture;}}return textures;},parseObject:function(){var matrix=new THREE.Matrix4();return function(data,geometries,materials){var object;function getGeometry(name){if(geometries[name]===undefined){console.warn('THREE.ObjectLoader: Undefined geometry',name);}return geometries[name];}function getMaterial(name){if(name===undefined)return undefined;if(materials[name]===undefined){console.warn('THREE.ObjectLoader: Undefined material',name);}return materials[name];}switch(data.type){case'Scene':object=new THREE.Scene();break;case'PerspectiveCamera':object=new THREE.PerspectiveCamera(data.fov,data.aspect,data.near,data.far);if(data.focus!==undefined)object.focus=data.focus;if(data.zoom!==undefined)object.zoom=data.zoom;if(data.filmGauge!==undefined)object.filmGauge=data.filmGauge;if(data.filmOffset!==undefined)object.filmOffset=data.filmOffset;if(data.view!==undefined)object.view=Object.assign({},data.view);break;case'OrthographicCamera':object=new THREE.OrthographicCamera(data.left,data.right,data.top,data.bottom,data.near,data.far);break;case'AmbientLight':object=new THREE.AmbientLight(data.color,data.intensity);break;case'DirectionalLight':object=new THREE.DirectionalLight(data.color,data.intensity);break;case'PointLight':object=new THREE.PointLight(data.color,data.intensity,data.distance,data.decay);break;case'SpotLight':object=new THREE.SpotLight(data.color,data.intensity,data.distance,data.angle,data.penumbra,data.decay);break;case'HemisphereLight':object=new THREE.HemisphereLight(data.color,data.groundColor,data.intensity);break;case'Mesh':var geometry=getGeometry(data.geometry);var material=getMaterial(data.material);if(geometry.bones&&geometry.bones.length>0){object=new THREE.SkinnedMesh(geometry,material);}else{object=new THREE.Mesh(geometry,material);}break;case'LOD':object=new THREE.LOD();break;case'Line':object=new THREE.Line(getGeometry(data.geometry),getMaterial(data.material),data.mode);break;case'PointCloud':case'Points':object=new THREE.Points(getGeometry(data.geometry),getMaterial(data.material));break;case'Sprite':object=new THREE.Sprite(getMaterial(data.material));break;case'Group':object=new THREE.Group();break;default:object=new THREE.Object3D();}object.uuid=data.uuid;if(data.name!==undefined)object.name=data.name;if(data.matrix!==undefined){matrix.fromArray(data.matrix);matrix.decompose(object.position,object.quaternion,object.scale);}else{if(data.position!==undefined)object.position.fromArray(data.position);if(data.rotation!==undefined)object.rotation.fromArray(data.rotation);if(data.scale!==undefined)object.scale.fromArray(data.scale);}if(data.castShadow!==undefined)object.castShadow=data.castShadow;if(data.receiveShadow!==undefined)object.receiveShadow=data.receiveShadow;if(data.visible!==undefined)object.visible=data.visible;if(data.userData!==undefined)object.userData=data.userData;if(data.children!==undefined){for(var child in data.children){object.add(this.parseObject(data.children[child],geometries,materials));}}if(data.type==='LOD'){var levels=data.levels;for(var l=0;l<levels.length;l++){var level=levels[l];var child=object.getObjectByProperty('uuid',level.object);if(child!==undefined){object.addLevel(child,level.distance);}}}return object;};}()};// File:src/loaders/TextureLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.TextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(url,onLoad,onProgress,onError){var texture=new THREE.Texture();var loader=new THREE.ImageLoader(this.manager);loader.setCrossOrigin(this.crossOrigin);loader.setPath(this.path);loader.load(url,function(image){texture.image=image;texture.needsUpdate=true;if(onLoad!==undefined){onLoad(texture);}},onProgress,onError);return texture;},setCrossOrigin:function(value){this.crossOrigin=value;},setPath:function(value){this.path=value;}};// File:src/loaders/CubeTextureLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.CubeTextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;};THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(urls,onLoad,onProgress,onError){var texture=new THREE.CubeTexture();var loader=new THREE.ImageLoader(this.manager);loader.setCrossOrigin(this.crossOrigin);loader.setPath(this.path);var loaded=0;function loadTexture(i){loader.load(urls[i],function(image){texture.images[i]=image;loaded++;if(loaded===6){texture.needsUpdate=true;if(onLoad)onLoad(texture);}},undefined,onError);}for(var i=0;i<urls.length;++i){loadTexture(i);}return texture;},setCrossOrigin:function(value){this.crossOrigin=value;},setPath:function(value){this.path=value;}};// File:src/loaders/BinaryTextureLoader.js\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;// override in sub classes\nthis._parser=null;};THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var texture=new THREE.DataTexture();var loader=new THREE.XHRLoader(this.manager);loader.setResponseType('arraybuffer');loader.load(url,function(buffer){var texData=scope._parser(buffer);if(!texData)return;if(undefined!==texData.image){texture.image=texData.image;}else if(undefined!==texData.data){texture.image.width=texData.width;texture.image.height=texData.height;texture.image.data=texData.data;}texture.wrapS=undefined!==texData.wrapS?texData.wrapS:THREE.ClampToEdgeWrapping;texture.wrapT=undefined!==texData.wrapT?texData.wrapT:THREE.ClampToEdgeWrapping;texture.magFilter=undefined!==texData.magFilter?texData.magFilter:THREE.LinearFilter;texture.minFilter=undefined!==texData.minFilter?texData.minFilter:THREE.LinearMipMapLinearFilter;texture.anisotropy=undefined!==texData.anisotropy?texData.anisotropy:1;if(undefined!==texData.format){texture.format=texData.format;}if(undefined!==texData.type){texture.type=texData.type;}if(undefined!==texData.mipmaps){texture.mipmaps=texData.mipmaps;}if(1===texData.mipmapCount){texture.minFilter=THREE.LinearFilter;}texture.needsUpdate=true;if(onLoad)onLoad(texture,texData);},onProgress,onError);return texture;}};// File:src/loaders/CompressedTextureLoader.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */THREE.CompressedTextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager;// override in sub classes\nthis._parser=null;};THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var images=[];var texture=new THREE.CompressedTexture();texture.image=images;var loader=new THREE.XHRLoader(this.manager);loader.setPath(this.path);loader.setResponseType('arraybuffer');function loadTexture(i){loader.load(url[i],function(buffer){var texDatas=scope._parser(buffer,true);images[i]={width:texDatas.width,height:texDatas.height,format:texDatas.format,mipmaps:texDatas.mipmaps};loaded+=1;if(loaded===6){if(texDatas.mipmapCount===1)texture.minFilter=THREE.LinearFilter;texture.format=texDatas.format;texture.needsUpdate=true;if(onLoad)onLoad(texture);}},onProgress,onError);}if(Array.isArray(url)){var loaded=0;for(var i=0,il=url.length;i<il;++i){loadTexture(i);}}else{// compressed cubemap texture stored in a single DDS file\nloader.load(url,function(buffer){var texDatas=scope._parser(buffer,true);if(texDatas.isCubemap){var faces=texDatas.mipmaps.length/texDatas.mipmapCount;for(var f=0;f<faces;f++){images[f]={mipmaps:[]};for(var i=0;i<texDatas.mipmapCount;i++){images[f].mipmaps.push(texDatas.mipmaps[f*texDatas.mipmapCount+i]);images[f].format=texDatas.format;images[f].width=texDatas.width;images[f].height=texDatas.height;}}}else{texture.image.width=texDatas.width;texture.image.height=texDatas.height;texture.mipmaps=texDatas.mipmaps;}if(texDatas.mipmapCount===1){texture.minFilter=THREE.LinearFilter;}texture.format=texDatas.format;texture.needsUpdate=true;if(onLoad)onLoad(texture);},onProgress,onError);}return texture;},setPath:function(value){this.path=value;}};// File:src/materials/Material.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Material=function(){Object.defineProperty(this,'id',{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.type='Material';this.fog=true;this.lights=true;this.blending=THREE.NormalBlending;this.side=THREE.FrontSide;this.shading=THREE.SmoothShading;// THREE.FlatShading, THREE.SmoothShading\nthis.vertexColors=THREE.NoColors;// THREE.NoColors, THREE.VertexColors, THREE.FaceColors\nthis.opacity=1;this.transparent=false;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipShadows=false;this.colorWrite=true;this.precision=null;// override the renderer's default precision for this material\nthis.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;// Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\nthis.visible=true;this._needsUpdate=true;};THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate;},set needsUpdate(value){if(value===true)this.update();this._needsUpdate=value;},setValues:function(values){if(values===undefined)return;for(var key in values){var newValue=values[key];if(newValue===undefined){console.warn(\"THREE.Material: '\"+key+\"' parameter is undefined.\");continue;}var currentValue=this[key];if(currentValue===undefined){console.warn(\"THREE.\"+this.type+\": '\"+key+\"' is not a property of this material.\");continue;}if(currentValue instanceof THREE.Color){currentValue.set(newValue);}else if(currentValue instanceof THREE.Vector3&&newValue instanceof THREE.Vector3){currentValue.copy(newValue);}else if(key==='overdraw'){// ensure overdraw is backwards-compatible with legacy boolean type\nthis[key]=Number(newValue);}else{this[key]=newValue;}}},toJSON:function(meta){var isRoot=meta===undefined;if(isRoot){meta={textures:{},images:{}};}var data={metadata:{version:4.4,type:'Material',generator:'Material.toJSON'}};// standard Material serialization\ndata.uuid=this.uuid;data.type=this.type;if(this.name!=='')data.name=this.name;if(this.color instanceof THREE.Color)data.color=this.color.getHex();if(this.roughness!==0.5)data.roughness=this.roughness;if(this.metalness!==0.5)data.metalness=this.metalness;if(this.emissive instanceof THREE.Color)data.emissive=this.emissive.getHex();if(this.specular instanceof THREE.Color)data.specular=this.specular.getHex();if(this.shininess!==undefined)data.shininess=this.shininess;if(this.map instanceof THREE.Texture)data.map=this.map.toJSON(meta).uuid;if(this.alphaMap instanceof THREE.Texture)data.alphaMap=this.alphaMap.toJSON(meta).uuid;if(this.lightMap instanceof THREE.Texture)data.lightMap=this.lightMap.toJSON(meta).uuid;if(this.bumpMap instanceof THREE.Texture){data.bumpMap=this.bumpMap.toJSON(meta).uuid;data.bumpScale=this.bumpScale;}if(this.normalMap instanceof THREE.Texture){data.normalMap=this.normalMap.toJSON(meta).uuid;data.normalScale=this.normalScale.toArray();}if(this.displacementMap instanceof THREE.Texture){data.displacementMap=this.displacementMap.toJSON(meta).uuid;data.displacementScale=this.displacementScale;data.displacementBias=this.displacementBias;}if(this.roughnessMap instanceof THREE.Texture)data.roughnessMap=this.roughnessMap.toJSON(meta).uuid;if(this.metalnessMap instanceof THREE.Texture)data.metalnessMap=this.metalnessMap.toJSON(meta).uuid;if(this.emissiveMap instanceof THREE.Texture)data.emissiveMap=this.emissiveMap.toJSON(meta).uuid;if(this.specularMap instanceof THREE.Texture)data.specularMap=this.specularMap.toJSON(meta).uuid;if(this.envMap instanceof THREE.Texture){data.envMap=this.envMap.toJSON(meta).uuid;data.reflectivity=this.reflectivity;// Scale behind envMap\n}if(this.size!==undefined)data.size=this.size;if(this.sizeAttenuation!==undefined)data.sizeAttenuation=this.sizeAttenuation;if(this.blending!==THREE.NormalBlending)data.blending=this.blending;if(this.shading!==THREE.SmoothShading)data.shading=this.shading;if(this.side!==THREE.FrontSide)data.side=this.side;if(this.vertexColors!==THREE.NoColors)data.vertexColors=this.vertexColors;if(this.opacity<1)data.opacity=this.opacity;if(this.transparent===true)data.transparent=this.transparent;if(this.alphaTest>0)data.alphaTest=this.alphaTest;if(this.premultipliedAlpha===true)data.premultipliedAlpha=this.premultipliedAlpha;if(this.wireframe===true)data.wireframe=this.wireframe;if(this.wireframeLinewidth>1)data.wireframeLinewidth=this.wireframeLinewidth;// TODO: Copied from Object3D.toJSON\nfunction extractFromCache(cache){var values=[];for(var key in cache){var data=cache[key];delete data.metadata;values.push(data);}return values;}if(isRoot){var textures=extractFromCache(meta.textures);var images=extractFromCache(meta.images);if(textures.length>0)data.textures=textures;if(images.length>0)data.images=images;}return data;},clone:function(){return new this.constructor().copy(this);},copy:function(source){this.name=source.name;this.fog=source.fog;this.lights=source.lights;this.blending=source.blending;this.side=source.side;this.vertexColors=source.vertexColors;this.opacity=source.opacity;this.transparent=source.transparent;this.blendSrc=source.blendSrc;this.blendDst=source.blendDst;this.blendEquation=source.blendEquation;this.blendSrcAlpha=source.blendSrcAlpha;this.blendDstAlpha=source.blendDstAlpha;this.blendEquationAlpha=source.blendEquationAlpha;this.depthFunc=source.depthFunc;this.depthTest=source.depthTest;this.depthWrite=source.depthWrite;this.colorWrite=source.colorWrite;this.precision=source.precision;this.polygonOffset=source.polygonOffset;this.polygonOffsetFactor=source.polygonOffsetFactor;this.polygonOffsetUnits=source.polygonOffsetUnits;this.alphaTest=source.alphaTest;this.premultipliedAlpha=source.premultipliedAlpha;this.overdraw=source.overdraw;this.visible=source.visible;this.clipShadows=source.clipShadows;var srcPlanes=source.clippingPlanes,dstPlanes=null;if(srcPlanes!==null){var n=srcPlanes.length;dstPlanes=new Array(n);for(var i=0;i!==n;++i)dstPlanes[i]=srcPlanes[i].clone();}this.clippingPlanes=dstPlanes;return this;},update:function(){this.dispatchEvent({type:'update'});},dispose:function(){this.dispatchEvent({type:'dispose'});}};Object.assign(THREE.Material.prototype,THREE.EventDispatcher.prototype);THREE.MaterialIdCount=0;// File:src/materials/LineBasicMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */THREE.LineBasicMaterial=function(parameters){THREE.Material.call(this);this.type='LineBasicMaterial';this.color=new THREE.Color(0xffffff);this.linewidth=1;this.linecap='round';this.linejoin='round';this.lights=false;this.setValues(parameters);};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.linewidth=source.linewidth;this.linecap=source.linecap;this.linejoin=source.linejoin;return this;};// File:src/materials/LineDashedMaterial.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */THREE.LineDashedMaterial=function(parameters){THREE.Material.call(this);this.type='LineDashedMaterial';this.color=new THREE.Color(0xffffff);this.linewidth=1;this.scale=1;this.dashSize=3;this.gapSize=1;this.lights=false;this.setValues(parameters);};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.linewidth=source.linewidth;this.scale=source.scale;this.dashSize=source.dashSize;this.gapSize=source.gapSize;return this;};// File:src/materials/MeshBasicMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */THREE.MeshBasicMaterial=function(parameters){THREE.Material.call(this);this.type='MeshBasicMaterial';this.color=new THREE.Color(0xffffff);// emissive\nthis.map=null;this.aoMap=null;this.aoMapIntensity=1.0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap='round';this.wireframeLinejoin='round';this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(parameters);};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;THREE.MeshBasicMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.map=source.map;this.aoMap=source.aoMap;this.aoMapIntensity=source.aoMapIntensity;this.specularMap=source.specularMap;this.alphaMap=source.alphaMap;this.envMap=source.envMap;this.combine=source.combine;this.reflectivity=source.reflectivity;this.refractionRatio=source.refractionRatio;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;this.wireframeLinecap=source.wireframeLinecap;this.wireframeLinejoin=source.wireframeLinejoin;this.skinning=source.skinning;this.morphTargets=source.morphTargets;return this;};// File:src/materials/MeshDepthMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / https://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */THREE.MeshDepthMaterial=function(parameters){THREE.Material.call(this);this.type='MeshDepthMaterial';this.depthPacking=THREE.BasicDepthPacking;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(parameters);};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.depthPacking=source.depthPacking;this.skinning=source.skinning;this.morphTargets=source.morphTargets;this.map=source.map;this.alphaMap=source.alphaMap;this.displacementMap=source.displacementMap;this.displacementScale=source.displacementScale;this.displacementBias=source.displacementBias;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;return this;};// File:src/materials/MeshLambertMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */THREE.MeshLambertMaterial=function(parameters){THREE.Material.call(this);this.type='MeshLambertMaterial';this.color=new THREE.Color(0xffffff);// diffuse\nthis.map=null;this.lightMap=null;this.lightMapIntensity=1.0;this.aoMap=null;this.aoMapIntensity=1.0;this.emissive=new THREE.Color(0x000000);this.emissiveIntensity=1.0;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap='round';this.wireframeLinejoin='round';this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(parameters);};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;THREE.MeshLambertMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.map=source.map;this.lightMap=source.lightMap;this.lightMapIntensity=source.lightMapIntensity;this.aoMap=source.aoMap;this.aoMapIntensity=source.aoMapIntensity;this.emissive.copy(source.emissive);this.emissiveMap=source.emissiveMap;this.emissiveIntensity=source.emissiveIntensity;this.specularMap=source.specularMap;this.alphaMap=source.alphaMap;this.envMap=source.envMap;this.combine=source.combine;this.reflectivity=source.reflectivity;this.refractionRatio=source.refractionRatio;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;this.wireframeLinecap=source.wireframeLinecap;this.wireframeLinejoin=source.wireframeLinejoin;this.skinning=source.skinning;this.morphTargets=source.morphTargets;this.morphNormals=source.morphNormals;return this;};// File:src/materials/MeshNormalMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */THREE.MeshNormalMaterial=function(parameters){THREE.Material.call(this,parameters);this.type='MeshNormalMaterial';this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.morphTargets=false;this.setValues(parameters);};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;return this;};// File:src/materials/MeshPhongMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */THREE.MeshPhongMaterial=function(parameters){THREE.Material.call(this);this.type='MeshPhongMaterial';this.color=new THREE.Color(0xffffff);// diffuse\nthis.specular=new THREE.Color(0x111111);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1.0;this.aoMap=null;this.aoMapIntensity=1.0;this.emissive=new THREE.Color(0x000000);this.emissiveIntensity=1.0;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap='round';this.wireframeLinejoin='round';this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(parameters);};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;THREE.MeshPhongMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.specular.copy(source.specular);this.shininess=source.shininess;this.map=source.map;this.lightMap=source.lightMap;this.lightMapIntensity=source.lightMapIntensity;this.aoMap=source.aoMap;this.aoMapIntensity=source.aoMapIntensity;this.emissive.copy(source.emissive);this.emissiveMap=source.emissiveMap;this.emissiveIntensity=source.emissiveIntensity;this.bumpMap=source.bumpMap;this.bumpScale=source.bumpScale;this.normalMap=source.normalMap;this.normalScale.copy(source.normalScale);this.displacementMap=source.displacementMap;this.displacementScale=source.displacementScale;this.displacementBias=source.displacementBias;this.specularMap=source.specularMap;this.alphaMap=source.alphaMap;this.envMap=source.envMap;this.combine=source.combine;this.reflectivity=source.reflectivity;this.refractionRatio=source.refractionRatio;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;this.wireframeLinecap=source.wireframeLinecap;this.wireframeLinejoin=source.wireframeLinejoin;this.skinning=source.skinning;this.morphTargets=source.morphTargets;this.morphNormals=source.morphNormals;return this;};// File:src/materials/MeshStandardMaterial.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */THREE.MeshStandardMaterial=function(parameters){THREE.Material.call(this);this.defines={'STANDARD':''};this.type='MeshStandardMaterial';this.color=new THREE.Color(0xffffff);// diffuse\nthis.roughness=0.5;this.metalness=0.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1.0;this.aoMap=null;this.aoMapIntensity=1.0;this.emissive=new THREE.Color(0x000000);this.emissiveIntensity=1.0;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1.0;this.refractionRatio=0.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap='round';this.wireframeLinejoin='round';this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(parameters);};THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial;THREE.MeshStandardMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.defines={'STANDARD':''};this.color.copy(source.color);this.roughness=source.roughness;this.metalness=source.metalness;this.map=source.map;this.lightMap=source.lightMap;this.lightMapIntensity=source.lightMapIntensity;this.aoMap=source.aoMap;this.aoMapIntensity=source.aoMapIntensity;this.emissive.copy(source.emissive);this.emissiveMap=source.emissiveMap;this.emissiveIntensity=source.emissiveIntensity;this.bumpMap=source.bumpMap;this.bumpScale=source.bumpScale;this.normalMap=source.normalMap;this.normalScale.copy(source.normalScale);this.displacementMap=source.displacementMap;this.displacementScale=source.displacementScale;this.displacementBias=source.displacementBias;this.roughnessMap=source.roughnessMap;this.metalnessMap=source.metalnessMap;this.alphaMap=source.alphaMap;this.envMap=source.envMap;this.envMapIntensity=source.envMapIntensity;this.refractionRatio=source.refractionRatio;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;this.wireframeLinecap=source.wireframeLinecap;this.wireframeLinejoin=source.wireframeLinejoin;this.skinning=source.skinning;this.morphTargets=source.morphTargets;this.morphNormals=source.morphNormals;return this;};// File:src/materials/MeshPhysicalMaterial.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  reflectivity: <float>\r\n * }\r\n */THREE.MeshPhysicalMaterial=function(parameters){THREE.MeshStandardMaterial.call(this);this.defines={'PHYSICAL':''};this.type='MeshPhysicalMaterial';this.reflectivity=0.5;// maps to F0 = 0.04\nthis.setValues(parameters);};THREE.MeshPhysicalMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);THREE.MeshPhysicalMaterial.prototype.constructor=THREE.MeshPhysicalMaterial;THREE.MeshPhysicalMaterial.prototype.copy=function(source){THREE.MeshStandardMaterial.prototype.copy.call(this,source);this.defines={'PHYSICAL':''};this.reflectivity=source.reflectivity;return this;};// File:src/materials/MultiMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.MultiMaterial=function(materials){this.uuid=THREE.Math.generateUUID();this.type='MultiMaterial';this.materials=materials instanceof Array?materials:[];this.visible=true;};THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(meta){var output={metadata:{version:4.2,type:'material',generator:'MaterialExporter'},uuid:this.uuid,type:this.type,materials:[]};var materials=this.materials;for(var i=0,l=materials.length;i<l;i++){var material=materials[i].toJSON(meta);delete material.metadata;output.materials.push(material);}output.visible=this.visible;return output;},clone:function(){var material=new this.constructor();for(var i=0;i<this.materials.length;i++){material.materials.push(this.materials[i].clone());}material.visible=this.visible;return material;}};// File:src/materials/PointsMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */THREE.PointsMaterial=function(parameters){THREE.Material.call(this);this.type='PointsMaterial';this.color=new THREE.Color(0xffffff);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(parameters);};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;THREE.PointsMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.map=source.map;this.size=source.size;this.sizeAttenuation=source.sizeAttenuation;return this;};// File:src/materials/ShaderMaterial.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"1f\", value: 1.0 }, \"parameter2\": { type: \"1i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */THREE.ShaderMaterial=function(parameters){THREE.Material.call(this);this.type='ShaderMaterial';this.defines={};this.uniforms={};this.vertexShader='void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';this.fragmentShader='void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;// set to use scene fog\nthis.lights=false;// set to use scene lights\nthis.clipping=false;// set to use user-defined clipping planes\nthis.skinning=false;// set to use skinning attribute streams\nthis.morphTargets=false;// set to use morph targets\nthis.morphNormals=false;// set to use morph normals\nthis.extensions={derivatives:false,// set to use derivatives\nfragDepth:false,// set to use fragment depth values\ndrawBuffers:false,// set to use draw buffers\nshaderTextureLOD:false// set to use shader texture LOD\n};// When rendered geometry doesn't include these attributes but the material does,\n// use these default values in WebGL. This avoids errors when buffer data is missing.\nthis.defaultAttributeValues={'color':[1,1,1],'uv':[0,0],'uv2':[0,0]};this.index0AttributeName=undefined;if(parameters!==undefined){if(parameters.attributes!==undefined){console.error('THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.');}this.setValues(parameters);}};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;THREE.ShaderMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.fragmentShader=source.fragmentShader;this.vertexShader=source.vertexShader;this.uniforms=THREE.UniformsUtils.clone(source.uniforms);this.defines=source.defines;this.wireframe=source.wireframe;this.wireframeLinewidth=source.wireframeLinewidth;this.lights=source.lights;this.clipping=source.clipping;this.skinning=source.skinning;this.morphTargets=source.morphTargets;this.morphNormals=source.morphNormals;this.extensions=source.extensions;return this;};THREE.ShaderMaterial.prototype.toJSON=function(meta){var data=THREE.Material.prototype.toJSON.call(this,meta);data.uniforms=this.uniforms;data.vertexShader=this.vertexShader;data.fragmentShader=this.fragmentShader;return data;};// File:src/materials/RawShaderMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.RawShaderMaterial=function(parameters){THREE.ShaderMaterial.call(this,parameters);this.type='RawShaderMaterial';};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;// File:src/materials/SpriteMaterial.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2()\r\n * }\r\n */THREE.SpriteMaterial=function(parameters){THREE.Material.call(this);this.type='SpriteMaterial';this.color=new THREE.Color(0xffffff);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(parameters);};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(source){THREE.Material.prototype.copy.call(this,source);this.color.copy(source.color);this.map=source.map;this.rotation=source.rotation;return this;};// File:src/materials/ShadowMaterial.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.ShadowMaterial=function(){THREE.ShaderMaterial.call(this,{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib[\"lights\"],{opacity:{value:1.0}}]),vertexShader:THREE.ShaderChunk['shadow_vert'],fragmentShader:THREE.ShaderChunk['shadow_frag']});this.lights=true;this.transparent=true;Object.defineProperties(this,{opacity:{enumerable:true,get:function(){return this.uniforms.opacity.value;},set:function(value){this.uniforms.opacity.value=value;}}});};THREE.ShadowMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.ShadowMaterial.prototype.constructor=THREE.ShadowMaterial;// File:src/textures/Texture.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */THREE.Texture=function(image,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding){Object.defineProperty(this,'id',{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.name='';this.sourceFile='';this.image=image!==undefined?image:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=mapping!==undefined?mapping:THREE.Texture.DEFAULT_MAPPING;this.wrapS=wrapS!==undefined?wrapS:THREE.ClampToEdgeWrapping;this.wrapT=wrapT!==undefined?wrapT:THREE.ClampToEdgeWrapping;this.magFilter=magFilter!==undefined?magFilter:THREE.LinearFilter;this.minFilter=minFilter!==undefined?minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=anisotropy!==undefined?anisotropy:1;this.format=format!==undefined?format:THREE.RGBAFormat;this.type=type!==undefined?type:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n//\n// Also changing the encoding after already used by a Material will not automatically make the Material\n// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\nthis.encoding=encoding!==undefined?encoding:THREE.LinearEncoding;this.version=0;this.onUpdate=null;};THREE.Texture.DEFAULT_IMAGE=undefined;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(value){if(value===true)this.version++;},clone:function(){return new this.constructor().copy(this);},copy:function(source){this.image=source.image;this.mipmaps=source.mipmaps.slice(0);this.mapping=source.mapping;this.wrapS=source.wrapS;this.wrapT=source.wrapT;this.magFilter=source.magFilter;this.minFilter=source.minFilter;this.anisotropy=source.anisotropy;this.format=source.format;this.type=source.type;this.offset.copy(source.offset);this.repeat.copy(source.repeat);this.generateMipmaps=source.generateMipmaps;this.premultiplyAlpha=source.premultiplyAlpha;this.flipY=source.flipY;this.unpackAlignment=source.unpackAlignment;this.encoding=source.encoding;return this;},toJSON:function(meta){if(meta.textures[this.uuid]!==undefined){return meta.textures[this.uuid];}function getDataURL(image){var canvas;if(image.toDataURL!==undefined){canvas=image;}else{canvas=document.createElement('canvas');canvas.width=image.width;canvas.height=image.height;canvas.getContext('2d').drawImage(image,0,0,image.width,image.height);}if(canvas.width>2048||canvas.height>2048){return canvas.toDataURL('image/jpeg',0.6);}else{return canvas.toDataURL('image/png');}}var output={metadata:{version:4.4,type:'Texture',generator:'Texture.toJSON'},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(this.image!==undefined){// TODO: Move to THREE.Image\nvar image=this.image;if(image.uuid===undefined){image.uuid=THREE.Math.generateUUID();// UGH\n}if(meta.images[image.uuid]===undefined){meta.images[image.uuid]={uuid:image.uuid,url:getDataURL(image)};}output.image=image.uuid;}meta.textures[this.uuid]=output;return output;},dispose:function(){this.dispatchEvent({type:'dispose'});},transformUv:function(uv){if(this.mapping!==THREE.UVMapping)return;uv.multiply(this.repeat);uv.add(this.offset);if(uv.x<0||uv.x>1){switch(this.wrapS){case THREE.RepeatWrapping:uv.x=uv.x-Math.floor(uv.x);break;case THREE.ClampToEdgeWrapping:uv.x=uv.x<0?0:1;break;case THREE.MirroredRepeatWrapping:if(Math.abs(Math.floor(uv.x)%2)===1){uv.x=Math.ceil(uv.x)-uv.x;}else{uv.x=uv.x-Math.floor(uv.x);}break;}}if(uv.y<0||uv.y>1){switch(this.wrapT){case THREE.RepeatWrapping:uv.y=uv.y-Math.floor(uv.y);break;case THREE.ClampToEdgeWrapping:uv.y=uv.y<0?0:1;break;case THREE.MirroredRepeatWrapping:if(Math.abs(Math.floor(uv.y)%2)===1){uv.y=Math.ceil(uv.y)-uv.y;}else{uv.y=uv.y-Math.floor(uv.y);}break;}}if(this.flipY){uv.y=1-uv.y;}}};Object.assign(THREE.Texture.prototype,THREE.EventDispatcher.prototype);THREE.TextureIdCount=0;// File:src/textures/DepthTexture.js\n/**\r\n * @author Matt DesLauriers / @mattdesl\r\n */THREE.DepthTexture=function(width,height,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy){THREE.Texture.call(this,null,mapping,wrapS,wrapT,magFilter,minFilter,THREE.DepthFormat,type,anisotropy);this.image={width:width,height:height};this.type=type!==undefined?type:THREE.UnsignedShortType;this.magFilter=magFilter!==undefined?magFilter:THREE.NearestFilter;this.minFilter=minFilter!==undefined?minFilter:THREE.NearestFilter;this.flipY=false;this.generateMipmaps=false;};THREE.DepthTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DepthTexture.prototype.constructor=THREE.DepthTexture;// File:src/textures/CanvasTexture.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.CanvasTexture=function(canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){THREE.Texture.call(this,canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy);this.needsUpdate=true;};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;// File:src/textures/CubeTexture.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.CubeTexture=function(images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding){images=images!==undefined?images:[];mapping=mapping!==undefined?mapping:THREE.CubeReflectionMapping;THREE.Texture.call(this,images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding);this.flipY=false;};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;Object.defineProperty(THREE.CubeTexture.prototype,'images',{get:function(){return this.image;},set:function(value){this.image=value;}});// File:src/textures/CompressedTexture.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.CompressedTexture=function(mipmaps,width,height,format,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy,encoding){THREE.Texture.call(this,null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding);this.image={width:width,height:height};this.mipmaps=mipmaps;// no flipping for cube textures\n// (also flipping doesn't work for compressed textures )\nthis.flipY=false;// can't generate mipmaps for compressed textures\n// mips must be embedded in DDS files\nthis.generateMipmaps=false;};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;// File:src/textures/DataTexture.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.DataTexture=function(data,width,height,format,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy,encoding){THREE.Texture.call(this,null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy,encoding);this.image={data:data,width:width,height:height};this.magFilter=magFilter!==undefined?magFilter:THREE.NearestFilter;this.minFilter=minFilter!==undefined?minFilter:THREE.NearestFilter;this.flipY=false;this.generateMipmaps=false;};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;// File:src/textures/VideoTexture.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.VideoTexture=function(video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){THREE.Texture.call(this,video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy);this.generateMipmaps=false;var scope=this;function update(){requestAnimationFrame(update);if(video.readyState>=video.HAVE_CURRENT_DATA){scope.needsUpdate=true;}}update();};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;// File:src/objects/Group.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Group=function(){THREE.Object3D.call(this);this.type='Group';};THREE.Group.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Group});// File:src/objects/Points.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Points=function(geometry,material){THREE.Object3D.call(this);this.type='Points';this.geometry=geometry!==undefined?geometry:new THREE.BufferGeometry();this.material=material!==undefined?material:new THREE.PointsMaterial({color:Math.random()*0xffffff});};THREE.Points.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Points,raycast:function(){var inverseMatrix=new THREE.Matrix4();var ray=new THREE.Ray();var sphere=new THREE.Sphere();return function raycast(raycaster,intersects){var object=this;var geometry=this.geometry;var matrixWorld=this.matrixWorld;var threshold=raycaster.params.Points.threshold;// Checking boundingSphere distance to ray\nif(geometry.boundingSphere===null)geometry.computeBoundingSphere();sphere.copy(geometry.boundingSphere);sphere.applyMatrix4(matrixWorld);if(raycaster.ray.intersectsSphere(sphere)===false)return;//\ninverseMatrix.getInverse(matrixWorld);ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);var localThreshold=threshold/((this.scale.x+this.scale.y+this.scale.z)/3);var localThresholdSq=localThreshold*localThreshold;var position=new THREE.Vector3();function testPoint(point,index){var rayPointDistanceSq=ray.distanceSqToPoint(point);if(rayPointDistanceSq<localThresholdSq){var intersectPoint=ray.closestPointToPoint(point);intersectPoint.applyMatrix4(matrixWorld);var distance=raycaster.ray.origin.distanceTo(intersectPoint);if(distance<raycaster.near||distance>raycaster.far)return;intersects.push({distance:distance,distanceToRay:Math.sqrt(rayPointDistanceSq),point:intersectPoint.clone(),index:index,face:null,object:object});}}if(geometry instanceof THREE.BufferGeometry){var index=geometry.index;var attributes=geometry.attributes;var positions=attributes.position.array;if(index!==null){var indices=index.array;for(var i=0,il=indices.length;i<il;i++){var a=indices[i];position.fromArray(positions,a*3);testPoint(position,a);}}else{for(var i=0,l=positions.length/3;i<l;i++){position.fromArray(positions,i*3);testPoint(position,i);}}}else{var vertices=geometry.vertices;for(var i=0,l=vertices.length;i<l;i++){testPoint(vertices[i],i);}}};}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this);}});// File:src/objects/Line.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Line=function(geometry,material,mode){if(mode===1){console.warn('THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.');return new THREE.LineSegments(geometry,material);}THREE.Object3D.call(this);this.type='Line';this.geometry=geometry!==undefined?geometry:new THREE.BufferGeometry();this.material=material!==undefined?material:new THREE.LineBasicMaterial({color:Math.random()*0xffffff});};THREE.Line.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Line,raycast:function(){var inverseMatrix=new THREE.Matrix4();var ray=new THREE.Ray();var sphere=new THREE.Sphere();return function raycast(raycaster,intersects){var precision=raycaster.linePrecision;var precisionSq=precision*precision;var geometry=this.geometry;var matrixWorld=this.matrixWorld;// Checking boundingSphere distance to ray\nif(geometry.boundingSphere===null)geometry.computeBoundingSphere();sphere.copy(geometry.boundingSphere);sphere.applyMatrix4(matrixWorld);if(raycaster.ray.intersectsSphere(sphere)===false)return;//\ninverseMatrix.getInverse(matrixWorld);ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);var vStart=new THREE.Vector3();var vEnd=new THREE.Vector3();var interSegment=new THREE.Vector3();var interRay=new THREE.Vector3();var step=this instanceof THREE.LineSegments?2:1;if(geometry instanceof THREE.BufferGeometry){var index=geometry.index;var attributes=geometry.attributes;var positions=attributes.position.array;if(index!==null){var indices=index.array;for(var i=0,l=indices.length-1;i<l;i+=step){var a=indices[i];var b=indices[i+1];vStart.fromArray(positions,a*3);vEnd.fromArray(positions,b*3);var distSq=ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment);if(distSq>precisionSq)continue;interRay.applyMatrix4(this.matrixWorld);//Move back to world space for distance calculation\nvar distance=raycaster.ray.origin.distanceTo(interRay);if(distance<raycaster.near||distance>raycaster.far)continue;intersects.push({distance:distance,// What do we want? intersection point on the ray or on the segment??\n// point: raycaster.ray.at( distance ),\npoint:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this});}}else{for(var i=0,l=positions.length/3-1;i<l;i+=step){vStart.fromArray(positions,3*i);vEnd.fromArray(positions,3*i+3);var distSq=ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment);if(distSq>precisionSq)continue;interRay.applyMatrix4(this.matrixWorld);//Move back to world space for distance calculation\nvar distance=raycaster.ray.origin.distanceTo(interRay);if(distance<raycaster.near||distance>raycaster.far)continue;intersects.push({distance:distance,// What do we want? intersection point on the ray or on the segment??\n// point: raycaster.ray.at( distance ),\npoint:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this});}}}else if(geometry instanceof THREE.Geometry){var vertices=geometry.vertices;var nbVertices=vertices.length;for(var i=0;i<nbVertices-1;i+=step){var distSq=ray.distanceSqToSegment(vertices[i],vertices[i+1],interRay,interSegment);if(distSq>precisionSq)continue;interRay.applyMatrix4(this.matrixWorld);//Move back to world space for distance calculation\nvar distance=raycaster.ray.origin.distanceTo(interRay);if(distance<raycaster.near||distance>raycaster.far)continue;intersects.push({distance:distance,// What do we want? intersection point on the ray or on the segment??\n// point: raycaster.ray.at( distance ),\npoint:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this});}}};}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this);}});// File:src/objects/LineSegments.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.LineSegments=function(geometry,material){THREE.Line.call(this,geometry,material);this.type='LineSegments';};THREE.LineSegments.prototype=Object.assign(Object.create(THREE.Line.prototype),{constructor:THREE.LineSegments});// File:src/objects/Mesh.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */THREE.Mesh=function(geometry,material){THREE.Object3D.call(this);this.type='Mesh';this.geometry=geometry!==undefined?geometry:new THREE.BufferGeometry();this.material=material!==undefined?material:new THREE.MeshBasicMaterial({color:Math.random()*0xffffff});this.drawMode=THREE.TrianglesDrawMode;this.updateMorphTargets();};THREE.Mesh.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Mesh,setDrawMode:function(value){this.drawMode=value;},updateMorphTargets:function(){if(this.geometry.morphTargets!==undefined&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var m=0,ml=this.geometry.morphTargets.length;m<ml;m++){this.morphTargetInfluences.push(0);this.morphTargetDictionary[this.geometry.morphTargets[m].name]=m;}}},getMorphTargetIndexByName:function(name){if(this.morphTargetDictionary[name]!==undefined){return this.morphTargetDictionary[name];}console.warn('THREE.Mesh.getMorphTargetIndexByName: morph target '+name+' does not exist. Returning 0.');return 0;},raycast:function(){var inverseMatrix=new THREE.Matrix4();var ray=new THREE.Ray();var sphere=new THREE.Sphere();var vA=new THREE.Vector3();var vB=new THREE.Vector3();var vC=new THREE.Vector3();var tempA=new THREE.Vector3();var tempB=new THREE.Vector3();var tempC=new THREE.Vector3();var uvA=new THREE.Vector2();var uvB=new THREE.Vector2();var uvC=new THREE.Vector2();var barycoord=new THREE.Vector3();var intersectionPoint=new THREE.Vector3();var intersectionPointWorld=new THREE.Vector3();function uvIntersection(point,p1,p2,p3,uv1,uv2,uv3){THREE.Triangle.barycoordFromPoint(point,p1,p2,p3,barycoord);uv1.multiplyScalar(barycoord.x);uv2.multiplyScalar(barycoord.y);uv3.multiplyScalar(barycoord.z);uv1.add(uv2).add(uv3);return uv1.clone();}function checkIntersection(object,raycaster,ray,pA,pB,pC,point){var intersect;var material=object.material;if(material.side===THREE.BackSide){intersect=ray.intersectTriangle(pC,pB,pA,true,point);}else{intersect=ray.intersectTriangle(pA,pB,pC,material.side!==THREE.DoubleSide,point);}if(intersect===null)return null;intersectionPointWorld.copy(point);intersectionPointWorld.applyMatrix4(object.matrixWorld);var distance=raycaster.ray.origin.distanceTo(intersectionPointWorld);if(distance<raycaster.near||distance>raycaster.far)return null;return{distance:distance,point:intersectionPointWorld.clone(),object:object};}function checkBufferGeometryIntersection(object,raycaster,ray,positions,uvs,a,b,c){vA.fromArray(positions,a*3);vB.fromArray(positions,b*3);vC.fromArray(positions,c*3);var intersection=checkIntersection(object,raycaster,ray,vA,vB,vC,intersectionPoint);if(intersection){if(uvs){uvA.fromArray(uvs,a*2);uvB.fromArray(uvs,b*2);uvC.fromArray(uvs,c*2);intersection.uv=uvIntersection(intersectionPoint,vA,vB,vC,uvA,uvB,uvC);}intersection.face=new THREE.Face3(a,b,c,THREE.Triangle.normal(vA,vB,vC));intersection.faceIndex=a;}return intersection;}return function raycast(raycaster,intersects){var geometry=this.geometry;var material=this.material;var matrixWorld=this.matrixWorld;if(material===undefined)return;// Checking boundingSphere distance to ray\nif(geometry.boundingSphere===null)geometry.computeBoundingSphere();sphere.copy(geometry.boundingSphere);sphere.applyMatrix4(matrixWorld);if(raycaster.ray.intersectsSphere(sphere)===false)return;//\ninverseMatrix.getInverse(matrixWorld);ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);// Check boundingBox before continuing\nif(geometry.boundingBox!==null){if(ray.intersectsBox(geometry.boundingBox)===false)return;}var uvs,intersection;if(geometry instanceof THREE.BufferGeometry){var a,b,c;var index=geometry.index;var attributes=geometry.attributes;var positions=attributes.position.array;if(attributes.uv!==undefined){uvs=attributes.uv.array;}if(index!==null){var indices=index.array;for(var i=0,l=indices.length;i<l;i+=3){a=indices[i];b=indices[i+1];c=indices[i+2];intersection=checkBufferGeometryIntersection(this,raycaster,ray,positions,uvs,a,b,c);if(intersection){intersection.faceIndex=Math.floor(i/3);// triangle number in indices buffer semantics\nintersects.push(intersection);}}}else{for(var i=0,l=positions.length;i<l;i+=9){a=i/3;b=a+1;c=a+2;intersection=checkBufferGeometryIntersection(this,raycaster,ray,positions,uvs,a,b,c);if(intersection){intersection.index=a;// triangle number in positions buffer semantics\nintersects.push(intersection);}}}}else if(geometry instanceof THREE.Geometry){var fvA,fvB,fvC;var isFaceMaterial=material instanceof THREE.MultiMaterial;var materials=isFaceMaterial===true?material.materials:null;var vertices=geometry.vertices;var faces=geometry.faces;var faceVertexUvs=geometry.faceVertexUvs[0];if(faceVertexUvs.length>0)uvs=faceVertexUvs;for(var f=0,fl=faces.length;f<fl;f++){var face=faces[f];var faceMaterial=isFaceMaterial===true?materials[face.materialIndex]:material;if(faceMaterial===undefined)continue;fvA=vertices[face.a];fvB=vertices[face.b];fvC=vertices[face.c];if(faceMaterial.morphTargets===true){var morphTargets=geometry.morphTargets;var morphInfluences=this.morphTargetInfluences;vA.set(0,0,0);vB.set(0,0,0);vC.set(0,0,0);for(var t=0,tl=morphTargets.length;t<tl;t++){var influence=morphInfluences[t];if(influence===0)continue;var targets=morphTargets[t].vertices;vA.addScaledVector(tempA.subVectors(targets[face.a],fvA),influence);vB.addScaledVector(tempB.subVectors(targets[face.b],fvB),influence);vC.addScaledVector(tempC.subVectors(targets[face.c],fvC),influence);}vA.add(fvA);vB.add(fvB);vC.add(fvC);fvA=vA;fvB=vB;fvC=vC;}intersection=checkIntersection(this,raycaster,ray,fvA,fvB,fvC,intersectionPoint);if(intersection){if(uvs){var uvs_f=uvs[f];uvA.copy(uvs_f[0]);uvB.copy(uvs_f[1]);uvC.copy(uvs_f[2]);intersection.uv=uvIntersection(intersectionPoint,fvA,fvB,fvC,uvA,uvB,uvC);}intersection.face=face;intersection.faceIndex=f;intersects.push(intersection);}}}};}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this);}});// File:src/objects/Bone.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */THREE.Bone=function(skin){THREE.Object3D.call(this);this.type='Bone';this.skin=skin;};THREE.Bone.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Bone,copy:function(source){THREE.Object3D.prototype.copy.call(this,source);this.skin=source.skin;return this;}});// File:src/objects/Skeleton.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */THREE.Skeleton=function(bones,boneInverses,useVertexTexture){this.useVertexTexture=useVertexTexture!==undefined?useVertexTexture:true;this.identityMatrix=new THREE.Matrix4();// copy the bone array\nbones=bones||[];this.bones=bones.slice(0);// create a bone texture or an array of floats\nif(this.useVertexTexture){// layout (1 matrix = 4 pixels)\n//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\nvar size=Math.sqrt(this.bones.length*4);// 4 pixels needed for 1 matrix\nsize=THREE.Math.nextPowerOfTwo(Math.ceil(size));size=Math.max(size,4);this.boneTextureWidth=size;this.boneTextureHeight=size;this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4);// 4 floats per RGBA pixel\nthis.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType);}else{this.boneMatrices=new Float32Array(16*this.bones.length);}// use the supplied bone inverses or calculate the inverses\nif(boneInverses===undefined){this.calculateInverses();}else{if(this.bones.length===boneInverses.length){this.boneInverses=boneInverses.slice(0);}else{console.warn('THREE.Skeleton bonInverses is the wrong length.');this.boneInverses=[];for(var b=0,bl=this.bones.length;b<bl;b++){this.boneInverses.push(new THREE.Matrix4());}}}};Object.assign(THREE.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var b=0,bl=this.bones.length;b<bl;b++){var inverse=new THREE.Matrix4();if(this.bones[b]){inverse.getInverse(this.bones[b].matrixWorld);}this.boneInverses.push(inverse);}},pose:function(){var bone;// recover the bind-time world matrices\nfor(var b=0,bl=this.bones.length;b<bl;b++){bone=this.bones[b];if(bone){bone.matrixWorld.getInverse(this.boneInverses[b]);}}// compute the local matrices, positions, rotations and scales\nfor(var b=0,bl=this.bones.length;b<bl;b++){bone=this.bones[b];if(bone){if(bone.parent){bone.matrix.getInverse(bone.parent.matrixWorld);bone.matrix.multiply(bone.matrixWorld);}else{bone.matrix.copy(bone.matrixWorld);}bone.matrix.decompose(bone.position,bone.quaternion,bone.scale);}}},update:function(){var offsetMatrix=new THREE.Matrix4();return function update(){// flatten bone matrices to array\nfor(var b=0,bl=this.bones.length;b<bl;b++){// compute the offset between the current and the original transform\nvar matrix=this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix;offsetMatrix.multiplyMatrices(matrix,this.boneInverses[b]);offsetMatrix.toArray(this.boneMatrices,b*16);}if(this.useVertexTexture){this.boneTexture.needsUpdate=true;}};}(),clone:function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture);}});// File:src/objects/SkinnedMesh.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */THREE.SkinnedMesh=function(geometry,material,useVertexTexture){THREE.Mesh.call(this,geometry,material);this.type='SkinnedMesh';this.bindMode=\"attached\";this.bindMatrix=new THREE.Matrix4();this.bindMatrixInverse=new THREE.Matrix4();// init bones\n// TODO: remove bone creation as there is no reason (other than\n// convenience) for THREE.SkinnedMesh to do this.\nvar bones=[];if(this.geometry&&this.geometry.bones!==undefined){var bone,gbone;for(var b=0,bl=this.geometry.bones.length;b<bl;++b){gbone=this.geometry.bones[b];bone=new THREE.Bone(this);bones.push(bone);bone.name=gbone.name;bone.position.fromArray(gbone.pos);bone.quaternion.fromArray(gbone.rotq);if(gbone.scl!==undefined)bone.scale.fromArray(gbone.scl);}for(var b=0,bl=this.geometry.bones.length;b<bl;++b){gbone=this.geometry.bones[b];if(gbone.parent!==-1&&gbone.parent!==null&&bones[gbone.parent]!==undefined){bones[gbone.parent].add(bones[b]);}else{this.add(bones[b]);}}}this.normalizeSkinWeights();this.updateMatrixWorld(true);this.bind(new THREE.Skeleton(bones,undefined,useVertexTexture),this.matrixWorld);};THREE.SkinnedMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.SkinnedMesh,bind:function(skeleton,bindMatrix){this.skeleton=skeleton;if(bindMatrix===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();bindMatrix=this.matrixWorld;}this.bindMatrix.copy(bindMatrix);this.bindMatrixInverse.getInverse(bindMatrix);},pose:function(){this.skeleton.pose();},normalizeSkinWeights:function(){if(this.geometry instanceof THREE.Geometry){for(var i=0;i<this.geometry.skinWeights.length;i++){var sw=this.geometry.skinWeights[i];var scale=1.0/sw.lengthManhattan();if(scale!==Infinity){sw.multiplyScalar(scale);}else{sw.set(1,0,0,0);// do something reasonable\n}}}else if(this.geometry instanceof THREE.BufferGeometry){var vec=new THREE.Vector4();var skinWeight=this.geometry.attributes.skinWeight;for(var i=0;i<skinWeight.count;i++){vec.x=skinWeight.getX(i);vec.y=skinWeight.getY(i);vec.z=skinWeight.getZ(i);vec.w=skinWeight.getW(i);var scale=1.0/vec.lengthManhattan();if(scale!==Infinity){vec.multiplyScalar(scale);}else{vec.set(1,0,0,0);// do something reasonable\n}skinWeight.setXYZW(i,vec.x,vec.y,vec.z,vec.w);}}},updateMatrixWorld:function(force){THREE.Mesh.prototype.updateMatrixWorld.call(this,true);if(this.bindMode===\"attached\"){this.bindMatrixInverse.getInverse(this.matrixWorld);}else if(this.bindMode===\"detached\"){this.bindMatrixInverse.getInverse(this.bindMatrix);}else{console.warn('THREE.SkinnedMesh unrecognized bindMode: '+this.bindMode);}},clone:function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this);}});// File:src/objects/LOD.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.LOD=function(){THREE.Object3D.call(this);this.type='LOD';Object.defineProperties(this,{levels:{enumerable:true,value:[]}});};THREE.LOD.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LOD,copy:function(source){THREE.Object3D.prototype.copy.call(this,source,false);var levels=source.levels;for(var i=0,l=levels.length;i<l;i++){var level=levels[i];this.addLevel(level.object.clone(),level.distance);}return this;},addLevel:function(object,distance){if(distance===undefined)distance=0;distance=Math.abs(distance);var levels=this.levels;for(var l=0;l<levels.length;l++){if(distance<levels[l].distance){break;}}levels.splice(l,0,{distance:distance,object:object});this.add(object);},getObjectForDistance:function(distance){var levels=this.levels;for(var i=1,l=levels.length;i<l;i++){if(distance<levels[i].distance){break;}}return levels[i-1].object;},raycast:function(){var matrixPosition=new THREE.Vector3();return function raycast(raycaster,intersects){matrixPosition.setFromMatrixPosition(this.matrixWorld);var distance=raycaster.ray.origin.distanceTo(matrixPosition);this.getObjectForDistance(distance).raycast(raycaster,intersects);};}(),update:function(){var v1=new THREE.Vector3();var v2=new THREE.Vector3();return function update(camera){var levels=this.levels;if(levels.length>1){v1.setFromMatrixPosition(camera.matrixWorld);v2.setFromMatrixPosition(this.matrixWorld);var distance=v1.distanceTo(v2);levels[0].object.visible=true;for(var i=1,l=levels.length;i<l;i++){if(distance>=levels[i].distance){levels[i-1].object.visible=false;levels[i].object.visible=true;}else{break;}}for(;i<l;i++){levels[i].object.visible=false;}}};}(),toJSON:function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);data.object.levels=[];var levels=this.levels;for(var i=0,l=levels.length;i<l;i++){var level=levels[i];data.object.levels.push({object:level.object.uuid,distance:level.distance});}return data;}});// File:src/objects/Sprite.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Sprite=function(material){THREE.Object3D.call(this);this.type='Sprite';this.material=material!==undefined?material:new THREE.SpriteMaterial();};THREE.Sprite.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Sprite,raycast:function(){var matrixPosition=new THREE.Vector3();return function raycast(raycaster,intersects){matrixPosition.setFromMatrixPosition(this.matrixWorld);var distanceSq=raycaster.ray.distanceSqToPoint(matrixPosition);var guessSizeSq=this.scale.x*this.scale.y/4;if(distanceSq>guessSizeSq){return;}intersects.push({distance:Math.sqrt(distanceSq),point:this.position,face:null,object:this});};}(),clone:function(){return new this.constructor(this.material).copy(this);}});// File:src/objects/LensFlare.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.LensFlare=function(texture,size,distance,blending,color){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3();this.customUpdateCallback=undefined;if(texture!==undefined){this.add(texture,size,distance,blending,color);}};THREE.LensFlare.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LensFlare,copy:function(source){THREE.Object3D.prototype.copy.call(this,source);this.positionScreen.copy(source.positionScreen);this.customUpdateCallback=source.customUpdateCallback;for(var i=0,l=source.lensFlares.length;i<l;i++){this.lensFlares.push(source.lensFlares[i]);}return this;},add:function(texture,size,distance,blending,color,opacity){if(size===undefined)size=-1;if(distance===undefined)distance=0;if(opacity===undefined)opacity=1;if(color===undefined)color=new THREE.Color(0xffffff);if(blending===undefined)blending=THREE.NormalBlending;distance=Math.min(distance,Math.max(0,distance));this.lensFlares.push({texture:texture,// THREE.Texture\nsize:size,// size in pixels (-1 = use texture.width)\ndistance:distance,// distance (0-1) from light source (0=at light source)\nx:0,y:0,z:0,// screen position (-1 => 1) z = 0 is in front z = 1 is back\nscale:1,// scale\nrotation:0,// rotation\nopacity:opacity,// opacity\ncolor:color,// color\nblending:blending// blending\n});},/*\r\n\t * Update lens flares update positions on all flares based on the screen position\r\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n\t */updateLensFlares:function(){var f,fl=this.lensFlares.length;var flare;var vecX=-this.positionScreen.x*2;var vecY=-this.positionScreen.y*2;for(f=0;f<fl;f++){flare=this.lensFlares[f];flare.x=this.positionScreen.x+vecX*flare.distance;flare.y=this.positionScreen.y+vecY*flare.distance;flare.wantedRotation=flare.x*Math.PI*0.25;flare.rotation+=(flare.wantedRotation-flare.rotation)*0.25;}}});// File:src/scenes/Scene.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Scene=function(){THREE.Object3D.call(this);this.type='Scene';this.fog=null;this.overrideMaterial=null;this.autoUpdate=true;// checked by the renderer\n};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;THREE.Scene.prototype.copy=function(source,recursive){THREE.Object3D.prototype.copy.call(this,source,recursive);if(source.fog!==null)this.fog=source.fog.clone();if(source.overrideMaterial!==null)this.overrideMaterial=source.overrideMaterial.clone();this.autoUpdate=source.autoUpdate;this.matrixAutoUpdate=source.matrixAutoUpdate;return this;};// File:src/scenes/Fog.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.Fog=function(color,near,far){this.name='';this.color=new THREE.Color(color);this.near=near!==undefined?near:1;this.far=far!==undefined?far:1000;};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far);};// File:src/scenes/FogExp2.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.FogExp2=function(color,density){this.name='';this.color=new THREE.Color(color);this.density=density!==undefined?density:0.00025;};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density);};// File:src/renderers/shaders/ShaderChunk.js\nTHREE.ShaderChunk={};// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\nTHREE.ShaderChunk['alphamap_fragment']=\"#ifdef USE_ALPHAMAP\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\nTHREE.ShaderChunk['alphamap_pars_fragment']=\"#ifdef USE_ALPHAMAP\\n\tuniform sampler2D alphaMap;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\nTHREE.ShaderChunk['alphatest_fragment']=\"#ifdef ALPHATEST\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\nTHREE.ShaderChunk['aomap_fragment']=\"#ifdef USE_AOMAP\\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\nTHREE.ShaderChunk['aomap_pars_fragment']=\"#ifdef USE_AOMAP\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\nTHREE.ShaderChunk['begin_vertex']=\"\\nvec3 transformed = vec3( position );\\n\";// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\nTHREE.ShaderChunk['beginnormal_vertex']=\"\\nvec3 objectNormal = vec3( normal );\\n\";// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\nTHREE.ShaderChunk['bsdfs']=\"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\t\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\t\t}\\n\t\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat alpha = pow2( roughness );\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\tfloat D = D_GGX( alpha, dotNH );\\n\treturn F * ( G * D );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\tvec4 r = roughness * c0 + c1;\\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_BlinnPhong_Implicit( );\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\nTHREE.ShaderChunk['bumpmap_pars_fragment']=\"#ifdef USE_BUMPMAP\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\tvec2 dHdxy_fwd() {\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\t\treturn vec2( dBx, dBy );\\n\t}\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl\nTHREE.ShaderChunk['clipping_planes_fragment']=\"#if NUM_CLIPPING_PLANES > 0\\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\t\tvec4 plane = clippingPlanes[ i ];\\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl\nTHREE.ShaderChunk['clipping_planes_pars_fragment']=\"#if NUM_CLIPPING_PLANES > 0\\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\t\tvarying vec3 vViewPosition;\\n\t#endif\\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl\nTHREE.ShaderChunk['clipping_planes_pars_vertex']=\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvarying vec3 vViewPosition;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl\nTHREE.ShaderChunk['clipping_planes_vertex']=\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\nTHREE.ShaderChunk['color_fragment']=\"#ifdef USE_COLOR\\n\tdiffuseColor.rgb *= vColor;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\nTHREE.ShaderChunk['color_pars_fragment']=\"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\nTHREE.ShaderChunk['color_pars_vertex']=\"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\nTHREE.ShaderChunk['color_vertex']=\"#ifdef USE_COLOR\\n\tvColor.xyz = color.xyz;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/common.glsl\nTHREE.ShaderChunk['common']=\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\tvec3 color;\\n\tvec3 direction;\\n\tbool visible;\\n};\\nstruct ReflectedLight {\\n\tvec3 directDiffuse;\\n\tvec3 directSpecular;\\n\tvec3 indirectDiffuse;\\n\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\tvec3 position;\\n\tvec3 normal;\\n\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl\nTHREE.ShaderChunk['cube_uv_reflection_fragment']=\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\tvec3 absDirection = abs(direction);\\n\tint face = -1;\\n\tif( absDirection.x > absDirection.z ) {\\n\t\tif(absDirection.x > absDirection.y )\\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\telse {\\n\t\tif(absDirection.z > absDirection.y )\\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\tfloat dxRoughness = dFdx(roughness);\\n\tfloat dyRoughness = dFdy(roughness);\\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\tfloat mipLevel = 0.5 * log2(d);\\n\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\tbool bRes = mipLevel == 0.0;\\n\tscale =  bRes && (scale < a) ? a : scale;\\n\tvec3 r;\\n\tvec2 offset;\\n\tint face = getFaceFromDirection(direction);\\n\tfloat rcpPowScale = 1.0 / powScale;\\n\tif( face == 0) {\\n\t\tr = vec3(direction.x, -direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 1) {\\n\t\tr = vec3(direction.y, direction.x, direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 2) {\\n\t\tr = vec3(direction.z, direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 3) {\\n\t\tr = vec3(direction.x, direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse if( face == 4) {\\n\t\tr = vec3(direction.y, direction.x, -direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse {\\n\t\tr = vec3(direction.z, -direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\tr = normalize(r);\\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\tvec2 base = offset + vec2( texelOffset );\\n\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\tfloat r1 = floor(roughnessVal);\\n\tfloat r2 = r1 + 1.0;\\n\tfloat t = fract(roughnessVal);\\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\tfloat s = mipInfo.y;\\n\tfloat level0 = mipInfo.x;\\n\tfloat level1 = level0 + 1.0;\\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\tvec4 result = mix(color10, color20, t);\\n\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\nTHREE.ShaderChunk['defaultnormal_vertex']=\"#ifdef FLIP_SIDED\\n\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\nTHREE.ShaderChunk['displacementmap_vertex']=\"#ifdef USE_DISPLACEMENTMAP\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\nTHREE.ShaderChunk['displacementmap_pars_vertex']=\"#ifdef USE_DISPLACEMENTMAP\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\nTHREE.ShaderChunk['emissivemap_fragment']=\"#ifdef USE_EMISSIVEMAP\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\nTHREE.ShaderChunk['emissivemap_pars_fragment']=\"#ifdef USE_EMISSIVEMAP\\n\tuniform sampler2D emissiveMap;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl\nTHREE.ShaderChunk['encodings_pars_fragment']=\"\\nvec4 LinearToLinear( in vec4 value ) {\\n  return value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n  float maxComponent = max( max( value.r, value.g ), value.b );\\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n  float maxRGB = max( value.x, max( value.g, value.b ) );\\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n  M            = ceil( M * 255.0 ) / 255.0;\\n  return vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n    float maxRGB = max( value.x, max( value.g, value.b ) );\\n    float D      = max( maxRange / maxRGB, 1.0 );\\n    D            = min( floor( D ) / 255.0, 1.0 );\\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n  vec4 vResult;\\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n  vResult.w = fract(Le);\\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n  return vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n  float Le = value.z * 255.0 + value.w;\\n  vec3 Xp_Y_XYZp;\\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n  return vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/encodings_fragment.glsl\nTHREE.ShaderChunk['encodings_fragment']=\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\nTHREE.ShaderChunk['envmap_fragment']=\"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#else\\n\t\tvec3 reflectVec = vReflect;\\n\t#endif\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\tenvColor = envMapTexelToLinear( envColor );\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\nTHREE.ShaderChunk['envmap_pars_fragment']=\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\tuniform float reflectivity;\\n\tuniform float envMapIntenstiy;\\n#endif\\n#ifdef USE_ENVMAP\\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\t\tvarying vec3 vWorldPosition;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\t\tuniform float refractionRatio;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\nTHREE.ShaderChunk['envmap_pars_vertex']=\"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvarying vec3 vWorldPosition;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t\tuniform float refractionRatio;\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\nTHREE.ShaderChunk['envmap_vertex']=\"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvWorldPosition = worldPosition.xyz;\\n\t#else\\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\nTHREE.ShaderChunk['fog_fragment']=\"#ifdef USE_FOG\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\t#ifdef FOG_EXP2\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\t#else\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\t#endif\\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\nTHREE.ShaderChunk['fog_pars_fragment']=\"#ifdef USE_FOG\\n\tuniform vec3 fogColor;\\n\t#ifdef FOG_EXP2\\n\t\tuniform float fogDensity;\\n\t#else\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n#endif\";// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\nTHREE.ShaderChunk['lightmap_fragment']=\"#ifdef USE_LIGHTMAP\\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\nTHREE.ShaderChunk['lightmap_pars_fragment']=\"#ifdef USE_LIGHTMAP\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\nTHREE.ShaderChunk['lights_lambert_vertex']=\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\t\t#endif\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\nTHREE.ShaderChunk['lights_pars']=\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\tvec3 irradiance = ambientLightColor;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\tstruct DirectionalLight {\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tdirectLight.color = directionalLight.color;\\n\t\tdirectLight.direction = directionalLight.direction;\\n\t\tdirectLight.visible = true;\\n\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\tstruct PointLight {\\n\t\tvec3 position;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tvec3 lVector = pointLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\\n\t\t\tdirectLight.color = pointLight.color;\\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tstruct SpotLight {\\n\t\tvec3 position;\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tfloat coneCos;\\n\t\tfloat penumbraCos;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\t\tvec3 lVector = spotLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\t\t\tdirectLight.color = spotLight.color;\\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tstruct HemisphereLight {\\n\t\tvec3 direction;\\n\t\tvec3 skyColor;\\n\t\tvec3 groundColor;\\n\t};\\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tirradiance *= PI;\\n\t\t#endif\\n\t\treturn irradiance;\\n\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\t\t#else\\n\t\t\tvec4 envMapColor = vec4( 0.0 );\\n\t\t#endif\\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\\n\t}\\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\t}\\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\t\t#endif\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\t\tvec2 sampleUV;\\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#endif\\n\t\treturn envMapColor.rgb * envMapIntensity;\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\nTHREE.ShaderChunk['lights_phong_fragment']=\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\nTHREE.ShaderChunk['lights_phong_pars_fragment']=\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\tvec3\tdiffuseColor;\\n\tvec3\tspecularColor;\\n\tfloat\tspecularShininess;\\n\tfloat\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\t(0)\\n\";// File:src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl\nTHREE.ShaderChunk['lights_physical_fragment']=\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\tmaterial.specularColor = mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl\nTHREE.ShaderChunk['lights_physical_pars_fragment']=\"struct PhysicalMaterial {\\n\tvec3\tdiffuseColor;\\n\tfloat\tspecularRoughness;\\n\tvec3\tspecularColor;\\n\t#ifndef STANDARD\\n\t#endif\\n};\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_Physical\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\nTHREE.ShaderChunk['lights_template']=\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\t#ifdef USE_LIGHTMAP\\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tlightMapIrradiance *= PI;\\n\t\t#endif\\n\t\tirradiance += lightMapIrradiance;\\n\t#endif\\n\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t}\\n\t#endif\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\t#endif\\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\nTHREE.ShaderChunk['logdepthbuf_fragment']=\"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\nTHREE.ShaderChunk['logdepthbuf_pars_fragment']=\"#ifdef USE_LOGDEPTHBUF\\n\tuniform float logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\nTHREE.ShaderChunk['logdepthbuf_pars_vertex']=\"#ifdef USE_LOGDEPTHBUF\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n\tuniform float logDepthBufFC;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\nTHREE.ShaderChunk['logdepthbuf_vertex']=\"#ifdef USE_LOGDEPTHBUF\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\t#else\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\nTHREE.ShaderChunk['map_fragment']=\"#ifdef USE_MAP\\n\tvec4 texelColor = texture2D( map, vUv );\\n\ttexelColor = mapTexelToLinear( texelColor );\\n\tdiffuseColor *= texelColor;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\nTHREE.ShaderChunk['map_pars_fragment']=\"#ifdef USE_MAP\\n\tuniform sampler2D map;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\nTHREE.ShaderChunk['map_particle_fragment']=\"#ifdef USE_MAP\\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\nTHREE.ShaderChunk['map_particle_pars_fragment']=\"#ifdef USE_MAP\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\nTHREE.ShaderChunk['metalnessmap_fragment']=\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\nTHREE.ShaderChunk['metalnessmap_pars_fragment']=\"#ifdef USE_METALNESSMAP\\n\tuniform sampler2D metalnessMap;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\nTHREE.ShaderChunk['morphnormal_vertex']=\"#ifdef USE_MORPHNORMALS\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\nTHREE.ShaderChunk['morphtarget_pars_vertex']=\"#ifdef USE_MORPHTARGETS\\n\t#ifndef USE_MORPHNORMALS\\n\tuniform float morphTargetInfluences[ 8 ];\\n\t#else\\n\tuniform float morphTargetInfluences[ 4 ];\\n\t#endif\\n#endif\";// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\nTHREE.ShaderChunk['morphtarget_vertex']=\"#ifdef USE_MORPHTARGETS\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\t#ifndef USE_MORPHNORMALS\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\nTHREE.ShaderChunk['normal_fragment']=\"#ifdef FLAT_SHADED\\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\tvec3 normal = normalize( vNormal );\\n\t#ifdef DOUBLE_SIDED\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\nTHREE.ShaderChunk['normalmap_pars_fragment']=\"#ifdef USE_NORMALMAP\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/packing.glsl\nTHREE.ShaderChunk['packing']=\"vec3 packNormalToRGB( const in vec3 normal ) {\\n  return normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n  return 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\\n  return ( viewZ + near ) / ( near - far );\\n}\\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n  return linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl\nTHREE.ShaderChunk['premultiplied_alpha_fragment']=\"#ifdef PREMULTIPLIED_ALPHA\\n\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\nTHREE.ShaderChunk['project_vertex']=\"#ifdef USE_SKINNING\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\nTHREE.ShaderChunk['roughnessmap_fragment']=\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\nTHREE.ShaderChunk['roughnessmap_pars_fragment']=\"#ifdef USE_ROUGHNESSMAP\\n\tuniform sampler2D roughnessMap;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\nTHREE.ShaderChunk['shadowmap_pars_fragment']=\"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\t}\\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\t\tvec2 f = fract( uv * size + 0.5 );\\n\t\tfloat a = mix( lb, lt, f.y );\\n\t\tfloat b = mix( rb, rt, f.y );\\n\t\tfloat c = mix( a, b, f.x );\\n\t\treturn c;\\n\t}\\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tshadowCoord.xyz /= shadowCoord.w;\\n\t\tshadowCoord.z += shadowBias;\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\t\tbool frustumTest = all( frustumTestVec );\\n\t\tif ( frustumTest ) {\\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\t\t#endif\\n\t\t}\\n\t\treturn 1.0;\\n\t}\\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\t\tvec3 absV = abs( v );\\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\t\tabsV *= scaleToCube;\\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\t\tvec2 planar = v.xy;\\n\t\tfloat almostATexel = 1.5 * texelSizeY;\\n\t\tfloat almostOne = 1.0 - almostATexel;\\n\t\tif ( absV.z >= almostOne ) {\\n\t\t\tif ( v.z > 0.0 )\\n\t\t\t\tplanar.x = 4.0 - v.x;\\n\t\t} else if ( absV.x >= almostOne ) {\\n\t\t\tfloat signX = sign( v.x );\\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\\n\t\t} else if ( absV.y >= almostOne ) {\\n\t\t\tfloat signY = sign( v.y );\\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\t\t\tplanar.y = v.z * signY - 2.0;\\n\t\t}\\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\t}\\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\t\tvec3 lightToPosition = shadowCoord.xyz;\\n\t\tvec3 bd3D = normalize( lightToPosition );\\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\t\t#endif\\n\t}\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\nTHREE.ShaderChunk['shadowmap_pars_vertex']=\"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\nTHREE.ShaderChunk['shadowmap_vertex']=\"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\nTHREE.ShaderChunk['shadowmask_pars_fragment']=\"float getShadowMask() {\\n\tfloat shadow = 1.0;\\n\t#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#endif\\n\treturn shadow;\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\nTHREE.ShaderChunk['skinbase_vertex']=\"#ifdef USE_SKINNING\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\nTHREE.ShaderChunk['skinning_pars_vertex']=\"#ifdef USE_SKINNING\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\t#ifdef BONE_TEXTURE\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\t\t\ty = dy * ( y + 0.5 );\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\t\t\treturn bone;\\n\t\t}\\n\t#else\\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\t\t}\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\nTHREE.ShaderChunk['skinning_vertex']=\"#ifdef USE_SKINNING\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\nTHREE.ShaderChunk['skinnormal_vertex']=\"#ifdef USE_SKINNING\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\nTHREE.ShaderChunk['specularmap_fragment']=\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n#else\\n\tspecularStrength = 1.0;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\nTHREE.ShaderChunk['specularmap_pars_fragment']=\"#ifdef USE_SPECULARMAP\\n\tuniform sampler2D specularMap;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl\nTHREE.ShaderChunk['tonemapping_fragment']=\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl\nTHREE.ShaderChunk['tonemapping_pars_fragment']=\"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n  return toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  color = max( vec3( 0.0 ), color - 0.004 );\\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\nTHREE.ShaderChunk['uv2_pars_fragment']=\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvarying vec2 vUv2;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\nTHREE.ShaderChunk['uv2_pars_vertex']=\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\nTHREE.ShaderChunk['uv2_vertex']=\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvUv2 = uv2;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\nTHREE.ShaderChunk['uv_pars_fragment']=\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\nTHREE.ShaderChunk['uv_pars_vertex']=\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n#endif\\n\";// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\nTHREE.ShaderChunk['uv_vertex']=\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\nTHREE.ShaderChunk['worldpos_vertex']=\"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\t#ifdef USE_SKINNING\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\t#else\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\t#endif\\n#endif\\n\";// File:src/renderers/shaders/UniformsUtils.js\n/**\r\n * Uniform Utilities\r\n */THREE.UniformsUtils={merge:function(uniforms){var merged={};for(var u=0;u<uniforms.length;u++){var tmp=this.clone(uniforms[u]);for(var p in tmp){merged[p]=tmp[p];}}return merged;},clone:function(uniforms_src){var uniforms_dst={};for(var u in uniforms_src){uniforms_dst[u]={};for(var p in uniforms_src[u]){var parameter_src=uniforms_src[u][p];if(parameter_src instanceof THREE.Color||parameter_src instanceof THREE.Vector2||parameter_src instanceof THREE.Vector3||parameter_src instanceof THREE.Vector4||parameter_src instanceof THREE.Matrix3||parameter_src instanceof THREE.Matrix4||parameter_src instanceof THREE.Texture){uniforms_dst[u][p]=parameter_src.clone();}else if(Array.isArray(parameter_src)){uniforms_dst[u][p]=parameter_src.slice();}else{uniforms_dst[u][p]=parameter_src;}}}return uniforms_dst;}};// File:src/renderers/shaders/UniformsLib.js\n/**\r\n * Uniforms library for shared webgl shaders\r\n */THREE.UniformsLib={common:{\"diffuse\":{type:\"c\",value:new THREE.Color(0xeeeeee)},\"opacity\":{type:\"1f\",value:1.0},\"map\":{type:\"t\",value:null},\"offsetRepeat\":{type:\"v4\",value:new THREE.Vector4(0,0,1,1)},\"specularMap\":{type:\"t\",value:null},\"alphaMap\":{type:\"t\",value:null},\"envMap\":{type:\"t\",value:null},\"flipEnvMap\":{type:\"1f\",value:-1},\"reflectivity\":{type:\"1f\",value:1.0},\"refractionRatio\":{type:\"1f\",value:0.98}},aomap:{\"aoMap\":{type:\"t\",value:null},\"aoMapIntensity\":{type:\"1f\",value:1}},lightmap:{\"lightMap\":{type:\"t\",value:null},\"lightMapIntensity\":{type:\"1f\",value:1}},emissivemap:{\"emissiveMap\":{type:\"t\",value:null}},bumpmap:{\"bumpMap\":{type:\"t\",value:null},\"bumpScale\":{type:\"1f\",value:1}},normalmap:{\"normalMap\":{type:\"t\",value:null},\"normalScale\":{type:\"v2\",value:new THREE.Vector2(1,1)}},displacementmap:{\"displacementMap\":{type:\"t\",value:null},\"displacementScale\":{type:\"1f\",value:1},\"displacementBias\":{type:\"1f\",value:0}},roughnessmap:{\"roughnessMap\":{type:\"t\",value:null}},metalnessmap:{\"metalnessMap\":{type:\"t\",value:null}},fog:{\"fogDensity\":{type:\"1f\",value:0.00025},\"fogNear\":{type:\"1f\",value:1},\"fogFar\":{type:\"1f\",value:2000},\"fogColor\":{type:\"c\",value:new THREE.Color(0xffffff)}},lights:{\"ambientLightColor\":{type:\"3fv\",value:[]},\"directionalLights\":{type:\"sa\",value:[],properties:{\"direction\":{type:\"v3\"},\"color\":{type:\"c\"},\"shadow\":{type:\"1i\"},\"shadowBias\":{type:\"1f\"},\"shadowRadius\":{type:\"1f\"},\"shadowMapSize\":{type:\"v2\"}}},\"directionalShadowMap\":{type:\"tv\",value:[]},\"directionalShadowMatrix\":{type:\"m4v\",value:[]},\"spotLights\":{type:\"sa\",value:[],properties:{\"color\":{type:\"c\"},\"position\":{type:\"v3\"},\"direction\":{type:\"v3\"},\"distance\":{type:\"1f\"},\"coneCos\":{type:\"1f\"},\"penumbraCos\":{type:\"1f\"},\"decay\":{type:\"1f\"},\"shadow\":{type:\"1i\"},\"shadowBias\":{type:\"1f\"},\"shadowRadius\":{type:\"1f\"},\"shadowMapSize\":{type:\"v2\"}}},\"spotShadowMap\":{type:\"tv\",value:[]},\"spotShadowMatrix\":{type:\"m4v\",value:[]},\"pointLights\":{type:\"sa\",value:[],properties:{\"color\":{type:\"c\"},\"position\":{type:\"v3\"},\"decay\":{type:\"1f\"},\"distance\":{type:\"1f\"},\"shadow\":{type:\"1i\"},\"shadowBias\":{type:\"1f\"},\"shadowRadius\":{type:\"1f\"},\"shadowMapSize\":{type:\"v2\"}}},\"pointShadowMap\":{type:\"tv\",value:[]},\"pointShadowMatrix\":{type:\"m4v\",value:[]},\"hemisphereLights\":{type:\"sa\",value:[],properties:{\"direction\":{type:\"v3\"},\"skyColor\":{type:\"c\"},\"groundColor\":{type:\"c\"}}}},points:{\"diffuse\":{type:\"c\",value:new THREE.Color(0xeeeeee)},\"opacity\":{type:\"1f\",value:1.0},\"size\":{type:\"1f\",value:1.0},\"scale\":{type:\"1f\",value:1.0},\"map\":{type:\"t\",value:null},\"offsetRepeat\":{type:\"v4\",value:new THREE.Vector4(0,0,1,1)}}};// File:src/renderers/shaders/ShaderLib/cube_frag.glsl\nTHREE.ShaderChunk['cube_frag']=\"uniform samplerCube tCube;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/cube_vert.glsl\nTHREE.ShaderChunk['cube_vert']=\"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/depth_frag.glsl\nTHREE.ShaderChunk['depth_frag']=\"#if DEPTH_PACKING == 3200\\n\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( 1.0 );\\n\t#if DEPTH_PACKING == 3200\\n\t\tdiffuseColor.a = opacity;\\n\t#endif\\n\t#include <map_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <logdepthbuf_fragment>\\n\t#if DEPTH_PACKING == 3200\\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\t#elif DEPTH_PACKING == 3201\\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\t#endif\\n}\\n\";// File:src/renderers/shaders/ShaderLib/depth_vert.glsl\nTHREE.ShaderChunk['depth_vert']=\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl\nTHREE.ShaderChunk['distanceRGBA_frag']=\"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\";// File:src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl\nTHREE.ShaderChunk['distanceRGBA_vert']=\"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvWorldPosition = worldPosition;\\n}\\n\";// File:src/renderers/shaders/ShaderLib/equirect_frag.glsl\nTHREE.ShaderChunk['equirect_frag']=\"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 direction = normalize( vWorldPosition );\\n\tvec2 sampleUV;\\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/equirect_vert.glsl\nTHREE.ShaderChunk['equirect_vert']=\"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/linedashed_frag.glsl\nTHREE.ShaderChunk['linedashed_frag']=\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\t\tdiscard;\\n\t}\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <color_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/linedashed_vert.glsl\nTHREE.ShaderChunk['linedashed_vert']=\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\tvLineDistance = scale * lineDistance;\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\tgl_Position = projectionMatrix * mvPosition;\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshbasic_frag.glsl\nTHREE.ShaderChunk['meshbasic_frag']=\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\tReflectedLight reflectedLight;\\n\treflectedLight.directDiffuse = vec3( 0.0 );\\n\treflectedLight.directSpecular = vec3( 0.0 );\\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\\n\treflectedLight.indirectSpecular = vec3( 0.0 );\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshbasic_vert.glsl\nTHREE.ShaderChunk['meshbasic_vert']=\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <skinbase_vertex>\\n\t#ifdef USE_ENVMAP\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#endif\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <envmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshlambert_frag.glsl\nTHREE.ShaderChunk['meshlambert_frag']=\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <emissivemap_fragment>\\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\t#include <lightmap_fragment>\\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\t#ifdef DOUBLE_SIDED\\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\t#else\\n\t\treflectedLight.directDiffuse = vLightFront;\\n\t#endif\\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshlambert_vert.glsl\nTHREE.ShaderChunk['meshlambert_vert']=\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <lights_lambert_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshphong_frag.glsl\nTHREE.ShaderChunk['meshphong_frag']=\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_phong_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshphong_vert.glsl\nTHREE.ShaderChunk['meshphong_vert']=\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshphysical_frag.glsl\nTHREE.ShaderChunk['meshphysical_frag']=\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\nuniform float envMapIntensity;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <roughnessmap_fragment>\\n\t#include <metalnessmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_physical_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/meshphysical_vert.glsl\nTHREE.ShaderChunk['meshphysical_vert']=\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/normal_frag.glsl\nTHREE.ShaderChunk['normal_frag']=\"uniform float opacity;\\nvarying vec3 vNormal;\\n#include <common>\\n#include <packing>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/normal_vert.glsl\nTHREE.ShaderChunk['normal_vert']=\"varying vec3 vNormal;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvNormal = normalize( normalMatrix * normal );\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/points_frag.glsl\nTHREE.ShaderChunk['points_frag']=\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_particle_fragment>\\n\t#include <color_fragment>\\n\t#include <alphatest_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/points_vert.glsl\nTHREE.ShaderChunk['points_vert']=\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#ifdef USE_SIZEATTENUATION\\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\t#else\\n\t\tgl_PointSize = size;\\n\t#endif\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib/shadow_frag.glsl\nTHREE.ShaderChunk['shadow_frag']=\"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\\n}\\n\";// File:src/renderers/shaders/ShaderLib/shadow_vert.glsl\nTHREE.ShaderChunk['shadow_vert']=\"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";// File:src/renderers/shaders/ShaderLib.js\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */THREE.ShaderLib={'basic':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['aomap'],THREE.UniformsLib['fog']]),vertexShader:THREE.ShaderChunk['meshbasic_vert'],fragmentShader:THREE.ShaderChunk['meshbasic_frag']},'lambert':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['aomap'],THREE.UniformsLib['lightmap'],THREE.UniformsLib['emissivemap'],THREE.UniformsLib['fog'],THREE.UniformsLib['lights'],{\"emissive\":{type:\"c\",value:new THREE.Color(0x000000)}}]),vertexShader:THREE.ShaderChunk['meshlambert_vert'],fragmentShader:THREE.ShaderChunk['meshlambert_frag']},'phong':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['aomap'],THREE.UniformsLib['lightmap'],THREE.UniformsLib['emissivemap'],THREE.UniformsLib['bumpmap'],THREE.UniformsLib['normalmap'],THREE.UniformsLib['displacementmap'],THREE.UniformsLib['fog'],THREE.UniformsLib['lights'],{\"emissive\":{type:\"c\",value:new THREE.Color(0x000000)},\"specular\":{type:\"c\",value:new THREE.Color(0x111111)},\"shininess\":{type:\"1f\",value:30}}]),vertexShader:THREE.ShaderChunk['meshphong_vert'],fragmentShader:THREE.ShaderChunk['meshphong_frag']},'standard':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['aomap'],THREE.UniformsLib['lightmap'],THREE.UniformsLib['emissivemap'],THREE.UniformsLib['bumpmap'],THREE.UniformsLib['normalmap'],THREE.UniformsLib['displacementmap'],THREE.UniformsLib['roughnessmap'],THREE.UniformsLib['metalnessmap'],THREE.UniformsLib['fog'],THREE.UniformsLib['lights'],{\"emissive\":{type:\"c\",value:new THREE.Color(0x000000)},\"roughness\":{type:\"1f\",value:0.5},\"metalness\":{type:\"1f\",value:0},\"envMapIntensity\":{type:\"1f\",value:1// temporary\n}}]),vertexShader:THREE.ShaderChunk['meshphysical_vert'],fragmentShader:THREE.ShaderChunk['meshphysical_frag']},'points':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['points'],THREE.UniformsLib['fog']]),vertexShader:THREE.ShaderChunk['points_vert'],fragmentShader:THREE.ShaderChunk['points_frag']},'dashed':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['fog'],{\"scale\":{type:\"1f\",value:1},\"dashSize\":{type:\"1f\",value:1},\"totalSize\":{type:\"1f\",value:2}}]),vertexShader:THREE.ShaderChunk['linedashed_vert'],fragmentShader:THREE.ShaderChunk['linedashed_frag']},'depth':{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib['common'],THREE.UniformsLib['displacementmap']]),vertexShader:THREE.ShaderChunk['depth_vert'],fragmentShader:THREE.ShaderChunk['depth_frag']},'normal':{uniforms:{\"opacity\":{type:\"1f\",value:1.0}},vertexShader:THREE.ShaderChunk['normal_vert'],fragmentShader:THREE.ShaderChunk['normal_frag']},/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */'cube':{uniforms:{\"tCube\":{type:\"t\",value:null},\"tFlip\":{type:\"1f\",value:-1}},vertexShader:THREE.ShaderChunk['cube_vert'],fragmentShader:THREE.ShaderChunk['cube_frag']},/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */'equirect':{uniforms:{\"tEquirect\":{type:\"t\",value:null},\"tFlip\":{type:\"1f\",value:-1}},vertexShader:THREE.ShaderChunk['equirect_vert'],fragmentShader:THREE.ShaderChunk['equirect_frag']},'distanceRGBA':{uniforms:{\"lightPos\":{type:\"v3\",value:new THREE.Vector3()}},vertexShader:THREE.ShaderChunk['distanceRGBA_vert'],fragmentShader:THREE.ShaderChunk['distanceRGBA_frag']}};THREE.ShaderLib['physical']={uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib['standard'].uniforms,{// future\n}]),vertexShader:THREE.ShaderChunk['meshphysical_vert'],fragmentShader:THREE.ShaderChunk['meshphysical_frag']};// File:src/renderers/WebGLRenderer.js\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n * @author tschw\r\n */THREE.WebGLRenderer=function(parameters){console.log('THREE.WebGLRenderer',THREE.REVISION);parameters=parameters||{};var _canvas=parameters.canvas!==undefined?parameters.canvas:document.createElement('canvas'),_context=parameters.context!==undefined?parameters.context:null,_alpha=parameters.alpha!==undefined?parameters.alpha:false,_depth=parameters.depth!==undefined?parameters.depth:true,_stencil=parameters.stencil!==undefined?parameters.stencil:true,_antialias=parameters.antialias!==undefined?parameters.antialias:false,_premultipliedAlpha=parameters.premultipliedAlpha!==undefined?parameters.premultipliedAlpha:true,_preserveDrawingBuffer=parameters.preserveDrawingBuffer!==undefined?parameters.preserveDrawingBuffer:false;var lights=[];var opaqueObjects=[];var opaqueObjectsLastIndex=-1;var transparentObjects=[];var transparentObjectsLastIndex=-1;var morphInfluences=new Float32Array(8);var sprites=[];var lensFlares=[];// public properties\nthis.domElement=_canvas;this.context=null;// clearing\nthis.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;// scene graph\nthis.sortObjects=true;// user-defined clipping\nthis.clippingPlanes=[];this.localClippingEnabled=false;// physically based shading\nthis.gammaFactor=2.0;// for backwards compatibility\nthis.gammaInput=false;this.gammaOutput=false;// physical lights\nthis.physicallyCorrectLights=false;// tone mapping\nthis.toneMapping=THREE.LinearToneMapping;this.toneMappingExposure=1.0;this.toneMappingWhitePoint=1.0;// morphs\nthis.maxMorphTargets=8;this.maxMorphNormals=4;// flags\nthis.autoScaleCubemaps=true;// internal properties\nvar _this=this,// internal state cache\n_currentProgram=null,_currentRenderTarget=null,_currentFramebuffer=null,_currentMaterialId=-1,_currentGeometryProgram='',_currentCamera=null,_currentScissor=new THREE.Vector4(),_currentScissorTest=null,_currentViewport=new THREE.Vector4(),//\n_usedTextureUnits=0,//\n_clearColor=new THREE.Color(0x000000),_clearAlpha=0,_width=_canvas.width,_height=_canvas.height,_pixelRatio=1,_scissor=new THREE.Vector4(0,0,_width,_height),_scissorTest=false,_viewport=new THREE.Vector4(0,0,_width,_height),// frustum\n_frustum=new THREE.Frustum(),// clipping\n_clipping=new THREE.WebGLClipping(),_clippingEnabled=false,_localClippingEnabled=false,_sphere=new THREE.Sphere(),// camera matrices cache\n_projScreenMatrix=new THREE.Matrix4(),_vector3=new THREE.Vector3(),// light arrays cache\n_lights={hash:'',ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},// info\n_infoMemory={geometries:0,textures:0},_infoRender={calls:0,vertices:0,faces:0,points:0};this.info={render:_infoRender,memory:_infoMemory,programs:null};// initialize\nvar _gl;try{var attributes={alpha:_alpha,depth:_depth,stencil:_stencil,antialias:_antialias,premultipliedAlpha:_premultipliedAlpha,preserveDrawingBuffer:_preserveDrawingBuffer};_gl=_context||_canvas.getContext('webgl',attributes)||_canvas.getContext('experimental-webgl',attributes);if(_gl===null){if(_canvas.getContext('webgl')!==null){throw'Error creating WebGL context with your selected attributes.';}else{throw'Error creating WebGL context.';}}// Some experimental-webgl implementations do not have getShaderPrecisionFormat\nif(_gl.getShaderPrecisionFormat===undefined){_gl.getShaderPrecisionFormat=function(){return{'rangeMin':1,'rangeMax':1,'precision':1};};}_canvas.addEventListener('webglcontextlost',onContextLost,false);}catch(error){console.error('THREE.WebGLRenderer: '+error);}var _isWebGL2=typeof WebGL2RenderingContext!=='undefined'&&_gl instanceof WebGL2RenderingContext;var extensions=new THREE.WebGLExtensions(_gl);extensions.get('WEBGL_depth_texture');extensions.get('OES_texture_float');extensions.get('OES_texture_float_linear');extensions.get('OES_texture_half_float');extensions.get('OES_texture_half_float_linear');extensions.get('OES_standard_derivatives');extensions.get('ANGLE_instanced_arrays');if(extensions.get('OES_element_index_uint')){THREE.BufferGeometry.MaxIndex=4294967296;}var capabilities=new THREE.WebGLCapabilities(_gl,extensions,parameters);var state=new THREE.WebGLState(_gl,extensions,paramThreeToGL);var properties=new THREE.WebGLProperties();var objects=new THREE.WebGLObjects(_gl,properties,this.info);var programCache=new THREE.WebGLPrograms(this,capabilities);var lightCache=new THREE.WebGLLights();this.info.programs=programCache.programs;var bufferRenderer=new THREE.WebGLBufferRenderer(_gl,extensions,_infoRender);var indexedBufferRenderer=new THREE.WebGLIndexedBufferRenderer(_gl,extensions,_infoRender);//\nfunction getTargetPixelRatio(){return _currentRenderTarget===null?_pixelRatio:1;}function glClearColor(r,g,b,a){if(_premultipliedAlpha===true){r*=a;g*=a;b*=a;}state.clearColor(r,g,b,a);}function setDefaultGLState(){state.init();state.scissor(_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio));state.viewport(_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio));glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha);}function resetGLState(){_currentProgram=null;_currentCamera=null;_currentGeometryProgram='';_currentMaterialId=-1;state.reset();}setDefaultGLState();this.context=_gl;this.capabilities=capabilities;this.extensions=extensions;this.properties=properties;this.state=state;// shadow map\nvar shadowMap=new THREE.WebGLShadowMap(this,_lights,objects);this.shadowMap=shadowMap;// Plugins\nvar spritePlugin=new THREE.SpritePlugin(this,sprites);var lensFlarePlugin=new THREE.LensFlarePlugin(this,lensFlares);// API\nthis.getContext=function(){return _gl;};this.getContextAttributes=function(){return _gl.getContextAttributes();};this.forceContextLoss=function(){extensions.get('WEBGL_lose_context').loseContext();};this.getMaxAnisotropy=function(){var value;return function getMaxAnisotropy(){if(value!==undefined)return value;var extension=extensions.get('EXT_texture_filter_anisotropic');if(extension!==null){value=_gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);}else{value=0;}return value;};}();this.getPrecision=function(){return capabilities.precision;};this.getPixelRatio=function(){return _pixelRatio;};this.setPixelRatio=function(value){if(value===undefined)return;_pixelRatio=value;this.setSize(_viewport.z,_viewport.w,false);};this.getSize=function(){return{width:_width,height:_height};};this.setSize=function(width,height,updateStyle){_width=width;_height=height;_canvas.width=width*_pixelRatio;_canvas.height=height*_pixelRatio;if(updateStyle!==false){_canvas.style.width=width+'px';_canvas.style.height=height+'px';}this.setViewport(0,0,width,height);};this.setViewport=function(x,y,width,height){state.viewport(_viewport.set(x,y,width,height));};this.setScissor=function(x,y,width,height){state.scissor(_scissor.set(x,y,width,height));};this.setScissorTest=function(boolean){state.setScissorTest(_scissorTest=boolean);};// Clearing\nthis.getClearColor=function(){return _clearColor;};this.setClearColor=function(color,alpha){_clearColor.set(color);_clearAlpha=alpha!==undefined?alpha:1;glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha);};this.getClearAlpha=function(){return _clearAlpha;};this.setClearAlpha=function(alpha){_clearAlpha=alpha;glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha);};this.clear=function(color,depth,stencil){var bits=0;if(color===undefined||color)bits|=_gl.COLOR_BUFFER_BIT;if(depth===undefined||depth)bits|=_gl.DEPTH_BUFFER_BIT;if(stencil===undefined||stencil)bits|=_gl.STENCIL_BUFFER_BIT;_gl.clear(bits);};this.clearColor=function(){this.clear(true,false,false);};this.clearDepth=function(){this.clear(false,true,false);};this.clearStencil=function(){this.clear(false,false,true);};this.clearTarget=function(renderTarget,color,depth,stencil){this.setRenderTarget(renderTarget);this.clear(color,depth,stencil);};// Reset\nthis.resetGLState=resetGLState;this.dispose=function(){_canvas.removeEventListener('webglcontextlost',onContextLost,false);};// Events\nfunction onContextLost(event){event.preventDefault();resetGLState();setDefaultGLState();properties.clear();}function onTextureDispose(event){var texture=event.target;texture.removeEventListener('dispose',onTextureDispose);deallocateTexture(texture);_infoMemory.textures--;}function onRenderTargetDispose(event){var renderTarget=event.target;renderTarget.removeEventListener('dispose',onRenderTargetDispose);deallocateRenderTarget(renderTarget);_infoMemory.textures--;}function onMaterialDispose(event){var material=event.target;material.removeEventListener('dispose',onMaterialDispose);deallocateMaterial(material);}// Buffer deallocation\nfunction deallocateTexture(texture){var textureProperties=properties.get(texture);if(texture.image&&textureProperties.__image__webglTextureCube){// cube texture\n_gl.deleteTexture(textureProperties.__image__webglTextureCube);}else{// 2D texture\nif(textureProperties.__webglInit===undefined)return;_gl.deleteTexture(textureProperties.__webglTexture);}// remove all webgl properties\nproperties.delete(texture);}function deallocateRenderTarget(renderTarget){var renderTargetProperties=properties.get(renderTarget);var textureProperties=properties.get(renderTarget.texture);if(!renderTarget)return;if(textureProperties.__webglTexture!==undefined){_gl.deleteTexture(textureProperties.__webglTexture);}if(renderTarget.depthTexture){renderTarget.depthTexture.dispose();}if(renderTarget instanceof THREE.WebGLRenderTargetCube){for(var i=0;i<6;i++){_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]);if(renderTargetProperties.__webglDepthbuffer)_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer[i]);}}else{_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer);if(renderTargetProperties.__webglDepthbuffer)_gl.deleteRenderbuffer(renderTargetProperties.__webglDepthbuffer);}properties.delete(renderTarget.texture);properties.delete(renderTarget);}function deallocateMaterial(material){releaseMaterialProgramReference(material);properties.delete(material);}function releaseMaterialProgramReference(material){var programInfo=properties.get(material).program;material.program=undefined;if(programInfo!==undefined){programCache.releaseProgram(programInfo);}}// Buffer rendering\nthis.renderBufferImmediate=function(object,program,material){state.initAttributes();var buffers=properties.get(object);if(object.hasPositions&&!buffers.position)buffers.position=_gl.createBuffer();if(object.hasNormals&&!buffers.normal)buffers.normal=_gl.createBuffer();if(object.hasUvs&&!buffers.uv)buffers.uv=_gl.createBuffer();if(object.hasColors&&!buffers.color)buffers.color=_gl.createBuffer();var attributes=program.getAttributes();if(object.hasPositions){_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.position);_gl.bufferData(_gl.ARRAY_BUFFER,object.positionArray,_gl.DYNAMIC_DRAW);state.enableAttribute(attributes.position);_gl.vertexAttribPointer(attributes.position,3,_gl.FLOAT,false,0,0);}if(object.hasNormals){_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.normal);if(material.type!=='MeshPhongMaterial'&&material.type!=='MeshStandardMaterial'&&material.type!=='MeshPhysicalMaterial'&&material.shading===THREE.FlatShading){for(var i=0,l=object.count*3;i<l;i+=9){var array=object.normalArray;var nx=(array[i+0]+array[i+3]+array[i+6])/3;var ny=(array[i+1]+array[i+4]+array[i+7])/3;var nz=(array[i+2]+array[i+5]+array[i+8])/3;array[i+0]=nx;array[i+1]=ny;array[i+2]=nz;array[i+3]=nx;array[i+4]=ny;array[i+5]=nz;array[i+6]=nx;array[i+7]=ny;array[i+8]=nz;}}_gl.bufferData(_gl.ARRAY_BUFFER,object.normalArray,_gl.DYNAMIC_DRAW);state.enableAttribute(attributes.normal);_gl.vertexAttribPointer(attributes.normal,3,_gl.FLOAT,false,0,0);}if(object.hasUvs&&material.map){_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.uv);_gl.bufferData(_gl.ARRAY_BUFFER,object.uvArray,_gl.DYNAMIC_DRAW);state.enableAttribute(attributes.uv);_gl.vertexAttribPointer(attributes.uv,2,_gl.FLOAT,false,0,0);}if(object.hasColors&&material.vertexColors!==THREE.NoColors){_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.color);_gl.bufferData(_gl.ARRAY_BUFFER,object.colorArray,_gl.DYNAMIC_DRAW);state.enableAttribute(attributes.color);_gl.vertexAttribPointer(attributes.color,3,_gl.FLOAT,false,0,0);}state.disableUnusedAttributes();_gl.drawArrays(_gl.TRIANGLES,0,object.count);object.count=0;};this.renderBufferDirect=function(camera,fog,geometry,material,object,group){setMaterial(material);var program=setProgram(camera,fog,material,object);var updateBuffers=false;var geometryProgram=geometry.id+'_'+program.id+'_'+material.wireframe;if(geometryProgram!==_currentGeometryProgram){_currentGeometryProgram=geometryProgram;updateBuffers=true;}// morph targets\nvar morphTargetInfluences=object.morphTargetInfluences;if(morphTargetInfluences!==undefined){var activeInfluences=[];for(var i=0,l=morphTargetInfluences.length;i<l;i++){var influence=morphTargetInfluences[i];activeInfluences.push([influence,i]);}activeInfluences.sort(absNumericalSort);if(activeInfluences.length>8){activeInfluences.length=8;}var morphAttributes=geometry.morphAttributes;for(var i=0,l=activeInfluences.length;i<l;i++){var influence=activeInfluences[i];morphInfluences[i]=influence[0];if(influence[0]!==0){var index=influence[1];if(material.morphTargets===true&&morphAttributes.position)geometry.addAttribute('morphTarget'+i,morphAttributes.position[index]);if(material.morphNormals===true&&morphAttributes.normal)geometry.addAttribute('morphNormal'+i,morphAttributes.normal[index]);}else{if(material.morphTargets===true)geometry.removeAttribute('morphTarget'+i);if(material.morphNormals===true)geometry.removeAttribute('morphNormal'+i);}}program.getUniforms().setValue(_gl,'morphTargetInfluences',morphInfluences);updateBuffers=true;}//\nvar index=geometry.index;var position=geometry.attributes.position;if(material.wireframe===true){index=objects.getWireframeAttribute(geometry);}var renderer;if(index!==null){renderer=indexedBufferRenderer;renderer.setIndex(index);}else{renderer=bufferRenderer;}if(updateBuffers){setupVertexAttributes(material,program,geometry);if(index!==null){_gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER,objects.getAttributeBuffer(index));}}//\nvar dataStart=0;var dataCount=Infinity;if(index!==null){dataCount=index.count;}else if(position!==undefined){dataCount=position.count;}var rangeStart=geometry.drawRange.start;var rangeCount=geometry.drawRange.count;var groupStart=group!==null?group.start:0;var groupCount=group!==null?group.count:Infinity;var drawStart=Math.max(dataStart,rangeStart,groupStart);var drawEnd=Math.min(dataStart+dataCount,rangeStart+rangeCount,groupStart+groupCount)-1;var drawCount=Math.max(0,drawEnd-drawStart+1);//\nif(object instanceof THREE.Mesh){if(material.wireframe===true){state.setLineWidth(material.wireframeLinewidth*getTargetPixelRatio());renderer.setMode(_gl.LINES);}else{switch(object.drawMode){case THREE.TrianglesDrawMode:renderer.setMode(_gl.TRIANGLES);break;case THREE.TriangleStripDrawMode:renderer.setMode(_gl.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:renderer.setMode(_gl.TRIANGLE_FAN);break;}}}else if(object instanceof THREE.Line){var lineWidth=material.linewidth;if(lineWidth===undefined)lineWidth=1;// Not using Line*Material\nstate.setLineWidth(lineWidth*getTargetPixelRatio());if(object instanceof THREE.LineSegments){renderer.setMode(_gl.LINES);}else{renderer.setMode(_gl.LINE_STRIP);}}else if(object instanceof THREE.Points){renderer.setMode(_gl.POINTS);}if(geometry instanceof THREE.InstancedBufferGeometry){if(geometry.maxInstancedCount>0){renderer.renderInstances(geometry,drawStart,drawCount);}}else{renderer.render(drawStart,drawCount);}};function setupVertexAttributes(material,program,geometry,startIndex){var extension;if(geometry instanceof THREE.InstancedBufferGeometry){extension=extensions.get('ANGLE_instanced_arrays');if(extension===null){console.error('THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');return;}}if(startIndex===undefined)startIndex=0;state.initAttributes();var geometryAttributes=geometry.attributes;var programAttributes=program.getAttributes();var materialDefaultAttributeValues=material.defaultAttributeValues;for(var name in programAttributes){var programAttribute=programAttributes[name];if(programAttribute>=0){var geometryAttribute=geometryAttributes[name];if(geometryAttribute!==undefined){var type=_gl.FLOAT;var array=geometryAttribute.array;var normalized=geometryAttribute.normalized;if(array instanceof Float32Array){type=_gl.FLOAT;}else if(array instanceof Float64Array){console.warn(\"Unsupported data buffer format: Float64Array\");}else if(array instanceof Uint16Array){type=_gl.UNSIGNED_SHORT;}else if(array instanceof Int16Array){type=_gl.SHORT;}else if(array instanceof Uint32Array){type=_gl.UNSIGNED_INT;}else if(array instanceof Int32Array){type=_gl.INT;}else if(array instanceof Int8Array){type=_gl.BYTE;}else if(array instanceof Uint8Array){type=_gl.UNSIGNED_BYTE;}var size=geometryAttribute.itemSize;var buffer=objects.getAttributeBuffer(geometryAttribute);if(geometryAttribute instanceof THREE.InterleavedBufferAttribute){var data=geometryAttribute.data;var stride=data.stride;var offset=geometryAttribute.offset;if(data instanceof THREE.InstancedInterleavedBuffer){state.enableAttributeAndDivisor(programAttribute,data.meshPerAttribute,extension);if(geometry.maxInstancedCount===undefined){geometry.maxInstancedCount=data.meshPerAttribute*data.count;}}else{state.enableAttribute(programAttribute);}_gl.bindBuffer(_gl.ARRAY_BUFFER,buffer);_gl.vertexAttribPointer(programAttribute,size,type,normalized,stride*data.array.BYTES_PER_ELEMENT,(startIndex*stride+offset)*data.array.BYTES_PER_ELEMENT);}else{if(geometryAttribute instanceof THREE.InstancedBufferAttribute){state.enableAttributeAndDivisor(programAttribute,geometryAttribute.meshPerAttribute,extension);if(geometry.maxInstancedCount===undefined){geometry.maxInstancedCount=geometryAttribute.meshPerAttribute*geometryAttribute.count;}}else{state.enableAttribute(programAttribute);}_gl.bindBuffer(_gl.ARRAY_BUFFER,buffer);_gl.vertexAttribPointer(programAttribute,size,type,normalized,0,startIndex*size*geometryAttribute.array.BYTES_PER_ELEMENT);}}else if(materialDefaultAttributeValues!==undefined){var value=materialDefaultAttributeValues[name];if(value!==undefined){switch(value.length){case 2:_gl.vertexAttrib2fv(programAttribute,value);break;case 3:_gl.vertexAttrib3fv(programAttribute,value);break;case 4:_gl.vertexAttrib4fv(programAttribute,value);break;default:_gl.vertexAttrib1fv(programAttribute,value);}}}}}state.disableUnusedAttributes();}// Sorting\nfunction absNumericalSort(a,b){return Math.abs(b[0])-Math.abs(a[0]);}function painterSortStable(a,b){if(a.object.renderOrder!==b.object.renderOrder){return a.object.renderOrder-b.object.renderOrder;}else if(a.material.id!==b.material.id){return a.material.id-b.material.id;}else if(a.z!==b.z){return a.z-b.z;}else{return a.id-b.id;}}function reversePainterSortStable(a,b){if(a.object.renderOrder!==b.object.renderOrder){return a.object.renderOrder-b.object.renderOrder;}if(a.z!==b.z){return b.z-a.z;}else{return a.id-b.id;}}// Rendering\nthis.render=function(scene,camera,renderTarget,forceClear){if(camera instanceof THREE.Camera===false){console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');return;}var fog=scene.fog;// reset caching for this frame\n_currentGeometryProgram='';_currentMaterialId=-1;_currentCamera=null;// update scene graph\nif(scene.autoUpdate===true)scene.updateMatrixWorld();// update camera matrices and frustum\nif(camera.parent===null)camera.updateMatrixWorld();camera.matrixWorldInverse.getInverse(camera.matrixWorld);_projScreenMatrix.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse);_frustum.setFromMatrix(_projScreenMatrix);lights.length=0;opaqueObjectsLastIndex=-1;transparentObjectsLastIndex=-1;sprites.length=0;lensFlares.length=0;_localClippingEnabled=this.localClippingEnabled;_clippingEnabled=_clipping.init(this.clippingPlanes,_localClippingEnabled,camera);projectObject(scene,camera);opaqueObjects.length=opaqueObjectsLastIndex+1;transparentObjects.length=transparentObjectsLastIndex+1;if(_this.sortObjects===true){opaqueObjects.sort(painterSortStable);transparentObjects.sort(reversePainterSortStable);}//\nif(_clippingEnabled)_clipping.beginShadows();setupShadows(lights);shadowMap.render(scene,camera);setupLights(lights,camera);if(_clippingEnabled)_clipping.endShadows();//\n_infoRender.calls=0;_infoRender.vertices=0;_infoRender.faces=0;_infoRender.points=0;if(renderTarget===undefined){renderTarget=null;}this.setRenderTarget(renderTarget);if(this.autoClear||forceClear){this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);}//\nif(scene.overrideMaterial){var overrideMaterial=scene.overrideMaterial;renderObjects(opaqueObjects,camera,fog,overrideMaterial);renderObjects(transparentObjects,camera,fog,overrideMaterial);}else{// opaque pass (front-to-back order)\nstate.setBlending(THREE.NoBlending);renderObjects(opaqueObjects,camera,fog);// transparent pass (back-to-front order)\nrenderObjects(transparentObjects,camera,fog);}// custom render plugins (post pass)\nspritePlugin.render(scene,camera);lensFlarePlugin.render(scene,camera,_currentViewport);// Generate mipmap if we're using any kind of mipmap filtering\nif(renderTarget){var texture=renderTarget.texture;if(texture.generateMipmaps&&isPowerOfTwo(renderTarget)&&texture.minFilter!==THREE.NearestFilter&&texture.minFilter!==THREE.LinearFilter){updateRenderTargetMipmap(renderTarget);}}// Ensure depth buffer writing is enabled so it can be cleared on next render\nstate.setDepthTest(true);state.setDepthWrite(true);state.setColorWrite(true);// _gl.finish();\n};function pushRenderItem(object,geometry,material,z,group){var array,index;// allocate the next position in the appropriate array\nif(material.transparent){array=transparentObjects;index=++transparentObjectsLastIndex;}else{array=opaqueObjects;index=++opaqueObjectsLastIndex;}// recycle existing render item or grow the array\nvar renderItem=array[index];if(renderItem!==undefined){renderItem.id=object.id;renderItem.object=object;renderItem.geometry=geometry;renderItem.material=material;renderItem.z=_vector3.z;renderItem.group=group;}else{renderItem={id:object.id,object:object,geometry:geometry,material:material,z:_vector3.z,group:group};// assert( index === array.length );\narray.push(renderItem);}}// TODO Duplicated code (Frustum)\nfunction isObjectViewable(object){var geometry=object.geometry;if(geometry.boundingSphere===null)geometry.computeBoundingSphere();_sphere.copy(geometry.boundingSphere).applyMatrix4(object.matrixWorld);return isSphereViewable(_sphere);}function isSpriteViewable(sprite){_sphere.center.set(0,0,0);_sphere.radius=0.7071067811865476;_sphere.applyMatrix4(sprite.matrixWorld);return isSphereViewable(_sphere);}function isSphereViewable(sphere){if(!_frustum.intersectsSphere(sphere))return false;var numPlanes=_clipping.numPlanes;if(numPlanes===0)return true;var planes=_this.clippingPlanes,center=sphere.center,negRad=-sphere.radius,i=0;do{// out when deeper than radius in the negative halfspace\nif(planes[i].distanceToPoint(center)<negRad)return false;}while(++i!==numPlanes);return true;}function projectObject(object,camera){if(object.visible===false)return;if(object.layers.test(camera.layers)){if(object instanceof THREE.Light){lights.push(object);}else if(object instanceof THREE.Sprite){if(object.frustumCulled===false||isSpriteViewable(object)===true){sprites.push(object);}}else if(object instanceof THREE.LensFlare){lensFlares.push(object);}else if(object instanceof THREE.ImmediateRenderObject){if(_this.sortObjects===true){_vector3.setFromMatrixPosition(object.matrixWorld);_vector3.applyProjection(_projScreenMatrix);}pushRenderItem(object,null,object.material,_vector3.z,null);}else if(object instanceof THREE.Mesh||object instanceof THREE.Line||object instanceof THREE.Points){if(object instanceof THREE.SkinnedMesh){object.skeleton.update();}if(object.frustumCulled===false||isObjectViewable(object)===true){var material=object.material;if(material.visible===true){if(_this.sortObjects===true){_vector3.setFromMatrixPosition(object.matrixWorld);_vector3.applyProjection(_projScreenMatrix);}var geometry=objects.update(object);if(material instanceof THREE.MultiMaterial){var groups=geometry.groups;var materials=material.materials;for(var i=0,l=groups.length;i<l;i++){var group=groups[i];var groupMaterial=materials[group.materialIndex];if(groupMaterial.visible===true){pushRenderItem(object,geometry,groupMaterial,_vector3.z,group);}}}else{pushRenderItem(object,geometry,material,_vector3.z,null);}}}}}var children=object.children;for(var i=0,l=children.length;i<l;i++){projectObject(children[i],camera);}}function renderObjects(renderList,camera,fog,overrideMaterial){for(var i=0,l=renderList.length;i<l;i++){var renderItem=renderList[i];var object=renderItem.object;var geometry=renderItem.geometry;var material=overrideMaterial===undefined?renderItem.material:overrideMaterial;var group=renderItem.group;object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld);object.normalMatrix.getNormalMatrix(object.modelViewMatrix);if(object instanceof THREE.ImmediateRenderObject){setMaterial(material);var program=setProgram(camera,fog,material,object);_currentGeometryProgram='';object.render(function(object){_this.renderBufferImmediate(object,program,material);});}else{_this.renderBufferDirect(camera,fog,geometry,material,object,group);}}}function initMaterial(material,fog,object){var materialProperties=properties.get(material);var parameters=programCache.getParameters(material,_lights,fog,_clipping.numPlanes,object);var code=programCache.getProgramCode(material,parameters);var program=materialProperties.program;var programChange=true;if(program===undefined){// new material\nmaterial.addEventListener('dispose',onMaterialDispose);}else if(program.code!==code){// changed glsl or parameters\nreleaseMaterialProgramReference(material);}else if(parameters.shaderID!==undefined){// same glsl and uniform list\nreturn;}else{// only rebuild uniform list\nprogramChange=false;}if(programChange){if(parameters.shaderID){var shader=THREE.ShaderLib[parameters.shaderID];materialProperties.__webglShader={name:material.type,uniforms:THREE.UniformsUtils.clone(shader.uniforms),vertexShader:shader.vertexShader,fragmentShader:shader.fragmentShader};}else{materialProperties.__webglShader={name:material.type,uniforms:material.uniforms,vertexShader:material.vertexShader,fragmentShader:material.fragmentShader};}material.__webglShader=materialProperties.__webglShader;program=programCache.acquireProgram(material,parameters,code);materialProperties.program=program;material.program=program;}var attributes=program.getAttributes();if(material.morphTargets){material.numSupportedMorphTargets=0;for(var i=0;i<_this.maxMorphTargets;i++){if(attributes['morphTarget'+i]>=0){material.numSupportedMorphTargets++;}}}if(material.morphNormals){material.numSupportedMorphNormals=0;for(var i=0;i<_this.maxMorphNormals;i++){if(attributes['morphNormal'+i]>=0){material.numSupportedMorphNormals++;}}}var uniforms=materialProperties.__webglShader.uniforms;if(!(material instanceof THREE.ShaderMaterial)&&!(material instanceof THREE.RawShaderMaterial)||material.clipping===true){materialProperties.numClippingPlanes=_clipping.numPlanes;uniforms.clippingPlanes=_clipping.uniform;}if(material.lights){// store the light setup it was created for\nmaterialProperties.lightsHash=_lights.hash;// wire up the material to this renderer's lighting state\nuniforms.ambientLightColor.value=_lights.ambient;uniforms.directionalLights.value=_lights.directional;uniforms.spotLights.value=_lights.spot;uniforms.pointLights.value=_lights.point;uniforms.hemisphereLights.value=_lights.hemi;uniforms.directionalShadowMap.value=_lights.directionalShadowMap;uniforms.directionalShadowMatrix.value=_lights.directionalShadowMatrix;uniforms.spotShadowMap.value=_lights.spotShadowMap;uniforms.spotShadowMatrix.value=_lights.spotShadowMatrix;uniforms.pointShadowMap.value=_lights.pointShadowMap;uniforms.pointShadowMatrix.value=_lights.pointShadowMatrix;}var progUniforms=materialProperties.program.getUniforms(),uniformsList=THREE.WebGLUniforms.seqWithValue(progUniforms.seq,uniforms);materialProperties.uniformsList=uniformsList;materialProperties.dynamicUniforms=THREE.WebGLUniforms.splitDynamic(uniformsList,uniforms);}function setMaterial(material){if(material.side!==THREE.DoubleSide)state.enable(_gl.CULL_FACE);else state.disable(_gl.CULL_FACE);state.setFlipSided(material.side===THREE.BackSide);if(material.transparent===true){state.setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst,material.blendEquationAlpha,material.blendSrcAlpha,material.blendDstAlpha,material.premultipliedAlpha);}else{state.setBlending(THREE.NoBlending);}state.setDepthFunc(material.depthFunc);state.setDepthTest(material.depthTest);state.setDepthWrite(material.depthWrite);state.setColorWrite(material.colorWrite);state.setPolygonOffset(material.polygonOffset,material.polygonOffsetFactor,material.polygonOffsetUnits);}function setProgram(camera,fog,material,object){_usedTextureUnits=0;var materialProperties=properties.get(material);if(_clippingEnabled){if(_localClippingEnabled||camera!==_currentCamera){var useCache=camera===_currentCamera&&material.id===_currentMaterialId;// we might want to call this function with some ClippingGroup\n// object instead of the material, once it becomes feasible\n// (#8465, #8379)\n_clipping.setState(material.clippingPlanes,material.clipShadows,camera,materialProperties,useCache);}if(materialProperties.numClippingPlanes!==undefined&&materialProperties.numClippingPlanes!==_clipping.numPlanes){material.needsUpdate=true;}}if(materialProperties.program===undefined){material.needsUpdate=true;}if(materialProperties.lightsHash!==undefined&&materialProperties.lightsHash!==_lights.hash){material.needsUpdate=true;}if(material.needsUpdate){initMaterial(material,fog,object);material.needsUpdate=false;}var refreshProgram=false;var refreshMaterial=false;var refreshLights=false;var program=materialProperties.program,p_uniforms=program.getUniforms(),m_uniforms=materialProperties.__webglShader.uniforms;if(program.id!==_currentProgram){_gl.useProgram(program.program);_currentProgram=program.id;refreshProgram=true;refreshMaterial=true;refreshLights=true;}if(material.id!==_currentMaterialId){_currentMaterialId=material.id;refreshMaterial=true;}if(refreshProgram||camera!==_currentCamera){p_uniforms.set(_gl,camera,'projectionMatrix');if(capabilities.logarithmicDepthBuffer){p_uniforms.setValue(_gl,'logDepthBufFC',2.0/(Math.log(camera.far+1.0)/Math.LN2));}if(camera!==_currentCamera){_currentCamera=camera;// lighting uniforms depend on the camera so enforce an update\n// now, in case this material supports lights - or later, when\n// the next material that does gets activated:\nrefreshMaterial=true;// set to true on material change\nrefreshLights=true;// remains set until update done\n}// load material specific uniforms\n// (shader material also gets them for the sake of genericity)\nif(material instanceof THREE.ShaderMaterial||material instanceof THREE.MeshPhongMaterial||material instanceof THREE.MeshStandardMaterial||material.envMap){var uCamPos=p_uniforms.map.cameraPosition;if(uCamPos!==undefined){uCamPos.setValue(_gl,_vector3.setFromMatrixPosition(camera.matrixWorld));}}if(material instanceof THREE.MeshPhongMaterial||material instanceof THREE.MeshLambertMaterial||material instanceof THREE.MeshBasicMaterial||material instanceof THREE.MeshStandardMaterial||material instanceof THREE.ShaderMaterial||material.skinning){p_uniforms.setValue(_gl,'viewMatrix',camera.matrixWorldInverse);}p_uniforms.set(_gl,_this,'toneMappingExposure');p_uniforms.set(_gl,_this,'toneMappingWhitePoint');}// skinning uniforms must be set even if material didn't change\n// auto-setting of texture unit for bone texture must go before other textures\n// not sure why, but otherwise weird things happen\nif(material.skinning){p_uniforms.setOptional(_gl,object,'bindMatrix');p_uniforms.setOptional(_gl,object,'bindMatrixInverse');var skeleton=object.skeleton;if(skeleton){if(capabilities.floatVertexTextures&&skeleton.useVertexTexture){p_uniforms.set(_gl,skeleton,'boneTexture');p_uniforms.set(_gl,skeleton,'boneTextureWidth');p_uniforms.set(_gl,skeleton,'boneTextureHeight');}else{p_uniforms.setOptional(_gl,skeleton,'boneMatrices');}}}if(refreshMaterial){if(material.lights){// the current material requires lighting info\n// note: all lighting uniforms are always set correctly\n// they simply reference the renderer's state for their\n// values\n//\n// use the current material's .needsUpdate flags to set\n// the GL state when required\nmarkUniformsLightsNeedsUpdate(m_uniforms,refreshLights);}// refresh uniforms common to several materials\nif(fog&&material.fog){refreshUniformsFog(m_uniforms,fog);}if(material instanceof THREE.MeshBasicMaterial||material instanceof THREE.MeshLambertMaterial||material instanceof THREE.MeshPhongMaterial||material instanceof THREE.MeshStandardMaterial||material instanceof THREE.MeshDepthMaterial){refreshUniformsCommon(m_uniforms,material);}// refresh single material specific uniforms\nif(material instanceof THREE.LineBasicMaterial){refreshUniformsLine(m_uniforms,material);}else if(material instanceof THREE.LineDashedMaterial){refreshUniformsLine(m_uniforms,material);refreshUniformsDash(m_uniforms,material);}else if(material instanceof THREE.PointsMaterial){refreshUniformsPoints(m_uniforms,material);}else if(material instanceof THREE.MeshLambertMaterial){refreshUniformsLambert(m_uniforms,material);}else if(material instanceof THREE.MeshPhongMaterial){refreshUniformsPhong(m_uniforms,material);}else if(material instanceof THREE.MeshPhysicalMaterial){refreshUniformsPhysical(m_uniforms,material);}else if(material instanceof THREE.MeshStandardMaterial){refreshUniformsStandard(m_uniforms,material);}else if(material instanceof THREE.MeshDepthMaterial){if(material.displacementMap){m_uniforms.displacementMap.value=material.displacementMap;m_uniforms.displacementScale.value=material.displacementScale;m_uniforms.displacementBias.value=material.displacementBias;}}else if(material instanceof THREE.MeshNormalMaterial){m_uniforms.opacity.value=material.opacity;}THREE.WebGLUniforms.upload(_gl,materialProperties.uniformsList,m_uniforms,_this);}// common matrices\np_uniforms.set(_gl,object,'modelViewMatrix');p_uniforms.set(_gl,object,'normalMatrix');p_uniforms.setValue(_gl,'modelMatrix',object.matrixWorld);// dynamic uniforms\nvar dynUniforms=materialProperties.dynamicUniforms;if(dynUniforms!==null){THREE.WebGLUniforms.evalDynamic(dynUniforms,m_uniforms,object,camera);THREE.WebGLUniforms.upload(_gl,dynUniforms,m_uniforms,_this);}return program;}// Uniforms (refresh uniforms objects)\nfunction refreshUniformsCommon(uniforms,material){uniforms.opacity.value=material.opacity;uniforms.diffuse.value=material.color;if(material.emissive){uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);}uniforms.map.value=material.map;uniforms.specularMap.value=material.specularMap;uniforms.alphaMap.value=material.alphaMap;if(material.aoMap){uniforms.aoMap.value=material.aoMap;uniforms.aoMapIntensity.value=material.aoMapIntensity;}// uv repeat and offset setting priorities\n// 1. color map\n// 2. specular map\n// 3. normal map\n// 4. bump map\n// 5. alpha map\n// 6. emissive map\nvar uvScaleMap;if(material.map){uvScaleMap=material.map;}else if(material.specularMap){uvScaleMap=material.specularMap;}else if(material.displacementMap){uvScaleMap=material.displacementMap;}else if(material.normalMap){uvScaleMap=material.normalMap;}else if(material.bumpMap){uvScaleMap=material.bumpMap;}else if(material.roughnessMap){uvScaleMap=material.roughnessMap;}else if(material.metalnessMap){uvScaleMap=material.metalnessMap;}else if(material.alphaMap){uvScaleMap=material.alphaMap;}else if(material.emissiveMap){uvScaleMap=material.emissiveMap;}if(uvScaleMap!==undefined){// backwards compatibility\nif(uvScaleMap instanceof THREE.WebGLRenderTarget){uvScaleMap=uvScaleMap.texture;}var offset=uvScaleMap.offset;var repeat=uvScaleMap.repeat;uniforms.offsetRepeat.value.set(offset.x,offset.y,repeat.x,repeat.y);}uniforms.envMap.value=material.envMap;// don't flip CubeTexture envMaps, flip everything else:\n//  WebGLRenderTargetCube will be flipped for backwards compatibility\n//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\nuniforms.flipEnvMap.value=!(material.envMap instanceof THREE.CubeTexture)?1:-1;uniforms.reflectivity.value=material.reflectivity;uniforms.refractionRatio.value=material.refractionRatio;}function refreshUniformsLine(uniforms,material){uniforms.diffuse.value=material.color;uniforms.opacity.value=material.opacity;}function refreshUniformsDash(uniforms,material){uniforms.dashSize.value=material.dashSize;uniforms.totalSize.value=material.dashSize+material.gapSize;uniforms.scale.value=material.scale;}function refreshUniformsPoints(uniforms,material){uniforms.diffuse.value=material.color;uniforms.opacity.value=material.opacity;uniforms.size.value=material.size*_pixelRatio;uniforms.scale.value=_canvas.clientHeight*0.5;uniforms.map.value=material.map;if(material.map!==null){var offset=material.map.offset;var repeat=material.map.repeat;uniforms.offsetRepeat.value.set(offset.x,offset.y,repeat.x,repeat.y);}}function refreshUniformsFog(uniforms,fog){uniforms.fogColor.value=fog.color;if(fog instanceof THREE.Fog){uniforms.fogNear.value=fog.near;uniforms.fogFar.value=fog.far;}else if(fog instanceof THREE.FogExp2){uniforms.fogDensity.value=fog.density;}}function refreshUniformsLambert(uniforms,material){if(material.lightMap){uniforms.lightMap.value=material.lightMap;uniforms.lightMapIntensity.value=material.lightMapIntensity;}if(material.emissiveMap){uniforms.emissiveMap.value=material.emissiveMap;}}function refreshUniformsPhong(uniforms,material){uniforms.specular.value=material.specular;uniforms.shininess.value=Math.max(material.shininess,1e-4);// to prevent pow( 0.0, 0.0 )\nif(material.lightMap){uniforms.lightMap.value=material.lightMap;uniforms.lightMapIntensity.value=material.lightMapIntensity;}if(material.emissiveMap){uniforms.emissiveMap.value=material.emissiveMap;}if(material.bumpMap){uniforms.bumpMap.value=material.bumpMap;uniforms.bumpScale.value=material.bumpScale;}if(material.normalMap){uniforms.normalMap.value=material.normalMap;uniforms.normalScale.value.copy(material.normalScale);}if(material.displacementMap){uniforms.displacementMap.value=material.displacementMap;uniforms.displacementScale.value=material.displacementScale;uniforms.displacementBias.value=material.displacementBias;}}function refreshUniformsStandard(uniforms,material){uniforms.roughness.value=material.roughness;uniforms.metalness.value=material.metalness;if(material.roughnessMap){uniforms.roughnessMap.value=material.roughnessMap;}if(material.metalnessMap){uniforms.metalnessMap.value=material.metalnessMap;}if(material.lightMap){uniforms.lightMap.value=material.lightMap;uniforms.lightMapIntensity.value=material.lightMapIntensity;}if(material.emissiveMap){uniforms.emissiveMap.value=material.emissiveMap;}if(material.bumpMap){uniforms.bumpMap.value=material.bumpMap;uniforms.bumpScale.value=material.bumpScale;}if(material.normalMap){uniforms.normalMap.value=material.normalMap;uniforms.normalScale.value.copy(material.normalScale);}if(material.displacementMap){uniforms.displacementMap.value=material.displacementMap;uniforms.displacementScale.value=material.displacementScale;uniforms.displacementBias.value=material.displacementBias;}if(material.envMap){//uniforms.envMap.value = material.envMap; // part of uniforms common\nuniforms.envMapIntensity.value=material.envMapIntensity;}}function refreshUniformsPhysical(uniforms,material){refreshUniformsStandard(uniforms,material);}// If uniforms are marked as clean, they don't need to be loaded to the GPU.\nfunction markUniformsLightsNeedsUpdate(uniforms,value){uniforms.ambientLightColor.needsUpdate=value;uniforms.directionalLights.needsUpdate=value;uniforms.pointLights.needsUpdate=value;uniforms.spotLights.needsUpdate=value;uniforms.hemisphereLights.needsUpdate=value;}// Lighting\nfunction setupShadows(lights){var lightShadowsLength=0;for(var i=0,l=lights.length;i<l;i++){var light=lights[i];if(light.castShadow){_lights.shadows[lightShadowsLength++]=light;}}_lights.shadows.length=lightShadowsLength;}function setupLights(lights,camera){var l,ll,light,r=0,g=0,b=0,color,intensity,distance,shadowMap,viewMatrix=camera.matrixWorldInverse,directionalLength=0,pointLength=0,spotLength=0,hemiLength=0;for(l=0,ll=lights.length;l<ll;l++){light=lights[l];color=light.color;intensity=light.intensity;distance=light.distance;shadowMap=light.shadow&&light.shadow.map?light.shadow.map.texture:null;if(light instanceof THREE.AmbientLight){r+=color.r*intensity;g+=color.g*intensity;b+=color.b*intensity;}else if(light instanceof THREE.DirectionalLight){var uniforms=lightCache.get(light);uniforms.color.copy(light.color).multiplyScalar(light.intensity);uniforms.direction.setFromMatrixPosition(light.matrixWorld);_vector3.setFromMatrixPosition(light.target.matrixWorld);uniforms.direction.sub(_vector3);uniforms.direction.transformDirection(viewMatrix);uniforms.shadow=light.castShadow;if(light.castShadow){uniforms.shadowBias=light.shadow.bias;uniforms.shadowRadius=light.shadow.radius;uniforms.shadowMapSize=light.shadow.mapSize;}_lights.directionalShadowMap[directionalLength]=shadowMap;_lights.directionalShadowMatrix[directionalLength]=light.shadow.matrix;_lights.directional[directionalLength++]=uniforms;}else if(light instanceof THREE.SpotLight){var uniforms=lightCache.get(light);uniforms.position.setFromMatrixPosition(light.matrixWorld);uniforms.position.applyMatrix4(viewMatrix);uniforms.color.copy(color).multiplyScalar(intensity);uniforms.distance=distance;uniforms.direction.setFromMatrixPosition(light.matrixWorld);_vector3.setFromMatrixPosition(light.target.matrixWorld);uniforms.direction.sub(_vector3);uniforms.direction.transformDirection(viewMatrix);uniforms.coneCos=Math.cos(light.angle);uniforms.penumbraCos=Math.cos(light.angle*(1-light.penumbra));uniforms.decay=light.distance===0?0.0:light.decay;uniforms.shadow=light.castShadow;if(light.castShadow){uniforms.shadowBias=light.shadow.bias;uniforms.shadowRadius=light.shadow.radius;uniforms.shadowMapSize=light.shadow.mapSize;}_lights.spotShadowMap[spotLength]=shadowMap;_lights.spotShadowMatrix[spotLength]=light.shadow.matrix;_lights.spot[spotLength++]=uniforms;}else if(light instanceof THREE.PointLight){var uniforms=lightCache.get(light);uniforms.position.setFromMatrixPosition(light.matrixWorld);uniforms.position.applyMatrix4(viewMatrix);uniforms.color.copy(light.color).multiplyScalar(light.intensity);uniforms.distance=light.distance;uniforms.decay=light.distance===0?0.0:light.decay;uniforms.shadow=light.castShadow;if(light.castShadow){uniforms.shadowBias=light.shadow.bias;uniforms.shadowRadius=light.shadow.radius;uniforms.shadowMapSize=light.shadow.mapSize;}_lights.pointShadowMap[pointLength]=shadowMap;if(_lights.pointShadowMatrix[pointLength]===undefined){_lights.pointShadowMatrix[pointLength]=new THREE.Matrix4();}// for point lights we set the shadow matrix to be a translation-only matrix\n// equal to inverse of the light's position\n_vector3.setFromMatrixPosition(light.matrixWorld).negate();_lights.pointShadowMatrix[pointLength].identity().setPosition(_vector3);_lights.point[pointLength++]=uniforms;}else if(light instanceof THREE.HemisphereLight){var uniforms=lightCache.get(light);uniforms.direction.setFromMatrixPosition(light.matrixWorld);uniforms.direction.transformDirection(viewMatrix);uniforms.direction.normalize();uniforms.skyColor.copy(light.color).multiplyScalar(intensity);uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity);_lights.hemi[hemiLength++]=uniforms;}}_lights.ambient[0]=r;_lights.ambient[1]=g;_lights.ambient[2]=b;_lights.directional.length=directionalLength;_lights.spot.length=spotLength;_lights.point.length=pointLength;_lights.hemi.length=hemiLength;_lights.hash=directionalLength+','+pointLength+','+spotLength+','+hemiLength+','+_lights.shadows.length;}// GL state setting\nthis.setFaceCulling=function(cullFace,frontFaceDirection){state.setCullFace(cullFace);state.setFlipSided(frontFaceDirection===THREE.FrontFaceDirectionCW);};// Textures\nfunction allocTextureUnit(){var textureUnit=_usedTextureUnits;if(textureUnit>=capabilities.maxTextures){console.warn('WebGLRenderer: trying to use '+textureUnit+' texture units while this GPU supports only '+capabilities.maxTextures);}_usedTextureUnits+=1;return textureUnit;}function setTextureParameters(textureType,texture,isPowerOfTwoImage){var extension;if(isPowerOfTwoImage){_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,paramThreeToGL(texture.wrapS));_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,paramThreeToGL(texture.wrapT));_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,paramThreeToGL(texture.magFilter));_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,paramThreeToGL(texture.minFilter));}else{_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,_gl.CLAMP_TO_EDGE);_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,_gl.CLAMP_TO_EDGE);if(texture.wrapS!==THREE.ClampToEdgeWrapping||texture.wrapT!==THREE.ClampToEdgeWrapping){console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.',texture);}_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,filterFallback(texture.magFilter));_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,filterFallback(texture.minFilter));if(texture.minFilter!==THREE.NearestFilter&&texture.minFilter!==THREE.LinearFilter){console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.',texture);}}extension=extensions.get('EXT_texture_filter_anisotropic');if(extension){if(texture.type===THREE.FloatType&&extensions.get('OES_texture_float_linear')===null)return;if(texture.type===THREE.HalfFloatType&&extensions.get('OES_texture_half_float_linear')===null)return;if(texture.anisotropy>1||properties.get(texture).__currentAnisotropy){_gl.texParameterf(textureType,extension.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(texture.anisotropy,_this.getMaxAnisotropy()));properties.get(texture).__currentAnisotropy=texture.anisotropy;}}}function uploadTexture(textureProperties,texture,slot){if(textureProperties.__webglInit===undefined){textureProperties.__webglInit=true;texture.addEventListener('dispose',onTextureDispose);textureProperties.__webglTexture=_gl.createTexture();_infoMemory.textures++;}state.activeTexture(_gl.TEXTURE0+slot);state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture);_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY);_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultiplyAlpha);_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,texture.unpackAlignment);var image=clampToMaxSize(texture.image,capabilities.maxTextureSize);if(textureNeedsPowerOfTwo(texture)&&isPowerOfTwo(image)===false){image=makePowerOfTwo(image);}var isPowerOfTwoImage=isPowerOfTwo(image),glFormat=paramThreeToGL(texture.format),glType=paramThreeToGL(texture.type);setTextureParameters(_gl.TEXTURE_2D,texture,isPowerOfTwoImage);var mipmap,mipmaps=texture.mipmaps;if(texture instanceof THREE.DepthTexture){// populate depth texture with dummy data\nvar internalFormat=_gl.DEPTH_COMPONENT;if(texture.type===THREE.FloatType){if(!_isWebGL2)throw new Error('Float Depth Texture only supported in WebGL2.0');internalFormat=_gl.DEPTH_COMPONENT32F;}else if(_isWebGL2){// WebGL 2.0 requires signed internalformat for glTexImage2D\ninternalFormat=_gl.DEPTH_COMPONENT16;}state.texImage2D(_gl.TEXTURE_2D,0,internalFormat,image.width,image.height,0,glFormat,glType,null);}else if(texture instanceof THREE.DataTexture){// use manually created mipmaps if available\n// if there are no manual mipmaps\n// set 0 level mipmap and then use GL to generate other mipmap levels\nif(mipmaps.length>0&&isPowerOfTwoImage){for(var i=0,il=mipmaps.length;i<il;i++){mipmap=mipmaps[i];state.texImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);}texture.generateMipmaps=false;}else{state.texImage2D(_gl.TEXTURE_2D,0,glFormat,image.width,image.height,0,glFormat,glType,image.data);}}else if(texture instanceof THREE.CompressedTexture){for(var i=0,il=mipmaps.length;i<il;i++){mipmap=mipmaps[i];if(texture.format!==THREE.RGBAFormat&&texture.format!==THREE.RGBFormat){if(state.getCompressedTextureFormats().indexOf(glFormat)>-1){state.compressedTexImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,mipmap.data);}else{console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\");}}else{state.texImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);}}}else{// regular Texture (image, video, canvas)\n// use manually created mipmaps if available\n// if there are no manual mipmaps\n// set 0 level mipmap and then use GL to generate other mipmap levels\nif(mipmaps.length>0&&isPowerOfTwoImage){for(var i=0,il=mipmaps.length;i<il;i++){mipmap=mipmaps[i];state.texImage2D(_gl.TEXTURE_2D,i,glFormat,glFormat,glType,mipmap);}texture.generateMipmaps=false;}else{state.texImage2D(_gl.TEXTURE_2D,0,glFormat,glFormat,glType,image);}}if(texture.generateMipmaps&&isPowerOfTwoImage)_gl.generateMipmap(_gl.TEXTURE_2D);textureProperties.__version=texture.version;if(texture.onUpdate)texture.onUpdate(texture);}function setTexture2D(texture,slot){var textureProperties=properties.get(texture);if(texture.version>0&&textureProperties.__version!==texture.version){var image=texture.image;if(image===undefined){console.warn('THREE.WebGLRenderer: Texture marked for update but image is undefined',texture);return;}if(image.complete===false){console.warn('THREE.WebGLRenderer: Texture marked for update but image is incomplete',texture);return;}uploadTexture(textureProperties,texture,slot);return;}state.activeTexture(_gl.TEXTURE0+slot);state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture);}function clampToMaxSize(image,maxSize){if(image.width>maxSize||image.height>maxSize){// Warning: Scaling through the canvas will only work with images that use\n// premultiplied alpha.\nvar scale=maxSize/Math.max(image.width,image.height);var canvas=document.createElement('canvas');canvas.width=Math.floor(image.width*scale);canvas.height=Math.floor(image.height*scale);var context=canvas.getContext('2d');context.drawImage(image,0,0,image.width,image.height,0,0,canvas.width,canvas.height);console.warn('THREE.WebGLRenderer: image is too big ('+image.width+'x'+image.height+'). Resized to '+canvas.width+'x'+canvas.height,image);return canvas;}return image;}function isPowerOfTwo(image){return THREE.Math.isPowerOfTwo(image.width)&&THREE.Math.isPowerOfTwo(image.height);}function textureNeedsPowerOfTwo(texture){if(texture.wrapS!==THREE.ClampToEdgeWrapping||texture.wrapT!==THREE.ClampToEdgeWrapping)return true;if(texture.minFilter!==THREE.NearestFilter&&texture.minFilter!==THREE.LinearFilter)return true;return false;}function makePowerOfTwo(image){if(image instanceof HTMLImageElement||image instanceof HTMLCanvasElement){var canvas=document.createElement('canvas');canvas.width=THREE.Math.nearestPowerOfTwo(image.width);canvas.height=THREE.Math.nearestPowerOfTwo(image.height);var context=canvas.getContext('2d');context.drawImage(image,0,0,canvas.width,canvas.height);console.warn('THREE.WebGLRenderer: image is not power of two ('+image.width+'x'+image.height+'). Resized to '+canvas.width+'x'+canvas.height,image);return canvas;}return image;}function setTextureCube(texture,slot){var textureProperties=properties.get(texture);if(texture.image.length===6){if(texture.version>0&&textureProperties.__version!==texture.version){if(!textureProperties.__image__webglTextureCube){texture.addEventListener('dispose',onTextureDispose);textureProperties.__image__webglTextureCube=_gl.createTexture();_infoMemory.textures++;}state.activeTexture(_gl.TEXTURE0+slot);state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__image__webglTextureCube);_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY);var isCompressed=texture instanceof THREE.CompressedTexture;var isDataTexture=texture.image[0]instanceof THREE.DataTexture;var cubeImage=[];for(var i=0;i<6;i++){if(_this.autoScaleCubemaps&&!isCompressed&&!isDataTexture){cubeImage[i]=clampToMaxSize(texture.image[i],capabilities.maxCubemapSize);}else{cubeImage[i]=isDataTexture?texture.image[i].image:texture.image[i];}}var image=cubeImage[0],isPowerOfTwoImage=isPowerOfTwo(image),glFormat=paramThreeToGL(texture.format),glType=paramThreeToGL(texture.type);setTextureParameters(_gl.TEXTURE_CUBE_MAP,texture,isPowerOfTwoImage);for(var i=0;i<6;i++){if(!isCompressed){if(isDataTexture){state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glFormat,cubeImage[i].width,cubeImage[i].height,0,glFormat,glType,cubeImage[i].data);}else{state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glFormat,glFormat,glType,cubeImage[i]);}}else{var mipmap,mipmaps=cubeImage[i].mipmaps;for(var j=0,jl=mipmaps.length;j<jl;j++){mipmap=mipmaps[j];if(texture.format!==THREE.RGBAFormat&&texture.format!==THREE.RGBFormat){if(state.getCompressedTextureFormats().indexOf(glFormat)>-1){state.compressedTexImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glFormat,mipmap.width,mipmap.height,0,mipmap.data);}else{console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\");}}else{state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);}}}}if(texture.generateMipmaps&&isPowerOfTwoImage){_gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);}textureProperties.__version=texture.version;if(texture.onUpdate)texture.onUpdate(texture);}else{state.activeTexture(_gl.TEXTURE0+slot);state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__image__webglTextureCube);}}}function setTextureCubeDynamic(texture,slot){state.activeTexture(_gl.TEXTURE0+slot);state.bindTexture(_gl.TEXTURE_CUBE_MAP,properties.get(texture).__webglTexture);}this.allocTextureUnit=allocTextureUnit;//this.setTexture2D = setTexture2D;\nthis.setTexture2D=function(){var warned=false;// backwards compatibility: peel texture.texture\nreturn function(texture,slot){if(texture instanceof THREE.WebGLRenderTarget){if(!warned){console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\");warned=true;}texture=texture.texture;}setTexture2D(texture,slot);};}();this.setTexture=function(){var warned=false;return function(texture,slot){if(!warned){console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\");warned=true;}_this.setTexture2D(texture,slot);};}();this.setTextureCube=function(){var warned=false;return function(texture,slot){// backwards compatibility: peel texture.texture\nif(texture instanceof THREE.WebGLRenderTargetCube){if(!warned){console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\");warned=true;}texture=texture.texture;}// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n// TODO: unify these code paths\nif(texture instanceof THREE.CubeTexture||Array.isArray(texture.image)&&texture.image.length===6){// CompressedTexture can have Array in image :/\n// this function alone should take care of cube textures\nsetTextureCube(texture,slot);}else{// assumed: texture property of THREE.WebGLRenderTargetCube\nsetTextureCubeDynamic(texture,slot);}};}();// Render targets\n// Setup storage for target texture and bind it to correct framebuffer\nfunction setupFrameBufferTexture(framebuffer,renderTarget,attachment,textureTarget){var glFormat=paramThreeToGL(renderTarget.texture.format);var glType=paramThreeToGL(renderTarget.texture.type);state.texImage2D(textureTarget,0,glFormat,renderTarget.width,renderTarget.height,0,glFormat,glType,null);_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer);_gl.framebufferTexture2D(_gl.FRAMEBUFFER,attachment,textureTarget,properties.get(renderTarget.texture).__webglTexture,0);_gl.bindFramebuffer(_gl.FRAMEBUFFER,null);}// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\nfunction setupRenderBufferStorage(renderbuffer,renderTarget){_gl.bindRenderbuffer(_gl.RENDERBUFFER,renderbuffer);if(renderTarget.depthBuffer&&!renderTarget.stencilBuffer){_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.DEPTH_COMPONENT16,renderTarget.width,renderTarget.height);_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer);}else if(renderTarget.depthBuffer&&renderTarget.stencilBuffer){_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.DEPTH_STENCIL,renderTarget.width,renderTarget.height);_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer);}else{// FIXME: We don't support !depth !stencil\n_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.RGBA4,renderTarget.width,renderTarget.height);}_gl.bindRenderbuffer(_gl.RENDERBUFFER,null);}// Setup resources for a Depth Texture for a FBO (needs an extension)\nfunction setupDepthTexture(framebuffer,renderTarget){var isCube=renderTarget instanceof THREE.WebGLRenderTargetCube;if(isCube)throw new Error('Depth Texture with cube render targets is not supported!');_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer);if(!(renderTarget.depthTexture instanceof THREE.DepthTexture)){throw new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');}// upload an empty depth texture with framebuffer size\nif(!properties.get(renderTarget.depthTexture).__webglTexture||renderTarget.depthTexture.image.width!==renderTarget.width||renderTarget.depthTexture.image.height!==renderTarget.height){renderTarget.depthTexture.image.width=renderTarget.width;renderTarget.depthTexture.image.height=renderTarget.height;renderTarget.depthTexture.needsUpdate=true;}_this.setTexture2D(renderTarget.depthTexture,0);var webglDepthTexture=properties.get(renderTarget.depthTexture).__webglTexture;_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.TEXTURE_2D,webglDepthTexture,0);}// Setup GL resources for a non-texture depth buffer\nfunction setupDepthRenderbuffer(renderTarget){var renderTargetProperties=properties.get(renderTarget);var isCube=renderTarget instanceof THREE.WebGLRenderTargetCube;if(renderTarget.depthTexture){if(isCube)throw new Error('target.depthTexture not supported in Cube render targets');setupDepthTexture(renderTargetProperties.__webglFramebuffer,renderTarget);}else{if(isCube){renderTargetProperties.__webglDepthbuffer=[];for(var i=0;i<6;i++){_gl.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer[i]);renderTargetProperties.__webglDepthbuffer[i]=_gl.createRenderbuffer();setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer[i],renderTarget);}}else{_gl.bindFramebuffer(_gl.FRAMEBUFFER,renderTargetProperties.__webglFramebuffer);renderTargetProperties.__webglDepthbuffer=_gl.createRenderbuffer();setupRenderBufferStorage(renderTargetProperties.__webglDepthbuffer,renderTarget);}}_gl.bindFramebuffer(_gl.FRAMEBUFFER,null);}// Set up GL resources for the render target\nfunction setupRenderTarget(renderTarget){var renderTargetProperties=properties.get(renderTarget);var textureProperties=properties.get(renderTarget.texture);renderTarget.addEventListener('dispose',onRenderTargetDispose);textureProperties.__webglTexture=_gl.createTexture();_infoMemory.textures++;var isCube=renderTarget instanceof THREE.WebGLRenderTargetCube;var isTargetPowerOfTwo=THREE.Math.isPowerOfTwo(renderTarget.width)&&THREE.Math.isPowerOfTwo(renderTarget.height);// Setup framebuffer\nif(isCube){renderTargetProperties.__webglFramebuffer=[];for(var i=0;i<6;i++){renderTargetProperties.__webglFramebuffer[i]=_gl.createFramebuffer();}}else{renderTargetProperties.__webglFramebuffer=_gl.createFramebuffer();}// Setup color buffer\nif(isCube){state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__webglTexture);setTextureParameters(_gl.TEXTURE_CUBE_MAP,renderTarget.texture,isTargetPowerOfTwo);for(var i=0;i<6;i++){setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer[i],renderTarget,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i);}if(renderTarget.texture.generateMipmaps&&isTargetPowerOfTwo)_gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);state.bindTexture(_gl.TEXTURE_CUBE_MAP,null);}else{state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture);setTextureParameters(_gl.TEXTURE_2D,renderTarget.texture,isTargetPowerOfTwo);setupFrameBufferTexture(renderTargetProperties.__webglFramebuffer,renderTarget,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_2D);if(renderTarget.texture.generateMipmaps&&isTargetPowerOfTwo)_gl.generateMipmap(_gl.TEXTURE_2D);state.bindTexture(_gl.TEXTURE_2D,null);}// Setup depth and stencil buffers\nif(renderTarget.depthBuffer){setupDepthRenderbuffer(renderTarget);}}this.getCurrentRenderTarget=function(){return _currentRenderTarget;};this.setRenderTarget=function(renderTarget){_currentRenderTarget=renderTarget;if(renderTarget&&properties.get(renderTarget).__webglFramebuffer===undefined){setupRenderTarget(renderTarget);}var isCube=renderTarget instanceof THREE.WebGLRenderTargetCube;var framebuffer;if(renderTarget){var renderTargetProperties=properties.get(renderTarget);if(isCube){framebuffer=renderTargetProperties.__webglFramebuffer[renderTarget.activeCubeFace];}else{framebuffer=renderTargetProperties.__webglFramebuffer;}_currentScissor.copy(renderTarget.scissor);_currentScissorTest=renderTarget.scissorTest;_currentViewport.copy(renderTarget.viewport);}else{framebuffer=null;_currentScissor.copy(_scissor).multiplyScalar(_pixelRatio);_currentScissorTest=_scissorTest;_currentViewport.copy(_viewport).multiplyScalar(_pixelRatio);}if(_currentFramebuffer!==framebuffer){_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer);_currentFramebuffer=framebuffer;}state.scissor(_currentScissor);state.setScissorTest(_currentScissorTest);state.viewport(_currentViewport);if(isCube){var textureProperties=properties.get(renderTarget.texture);_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,_gl.TEXTURE_CUBE_MAP_POSITIVE_X+renderTarget.activeCubeFace,textureProperties.__webglTexture,renderTarget.activeMipMapLevel);}};this.readRenderTargetPixels=function(renderTarget,x,y,width,height,buffer){if(renderTarget instanceof THREE.WebGLRenderTarget===false){console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.');return;}var framebuffer=properties.get(renderTarget).__webglFramebuffer;if(framebuffer){var restore=false;if(framebuffer!==_currentFramebuffer){_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer);restore=true;}try{var texture=renderTarget.texture;if(texture.format!==THREE.RGBAFormat&&paramThreeToGL(texture.format)!==_gl.getParameter(_gl.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.');return;}if(texture.type!==THREE.UnsignedByteType&&paramThreeToGL(texture.type)!==_gl.getParameter(_gl.IMPLEMENTATION_COLOR_READ_TYPE)&&!(texture.type===THREE.FloatType&&extensions.get('WEBGL_color_buffer_float'))&&!(texture.type===THREE.HalfFloatType&&extensions.get('EXT_color_buffer_half_float'))){console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.');return;}if(_gl.checkFramebufferStatus(_gl.FRAMEBUFFER)===_gl.FRAMEBUFFER_COMPLETE){// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\nif(x>=0&&x<=renderTarget.width-width&&y>=0&&y<=renderTarget.height-height){_gl.readPixels(x,y,width,height,paramThreeToGL(texture.format),paramThreeToGL(texture.type),buffer);}}else{console.error('THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.');}}finally{if(restore){_gl.bindFramebuffer(_gl.FRAMEBUFFER,_currentFramebuffer);}}}};function updateRenderTargetMipmap(renderTarget){var target=renderTarget instanceof THREE.WebGLRenderTargetCube?_gl.TEXTURE_CUBE_MAP:_gl.TEXTURE_2D;var texture=properties.get(renderTarget.texture).__webglTexture;state.bindTexture(target,texture);_gl.generateMipmap(target);state.bindTexture(target,null);}// Fallback filters for non-power-of-2 textures\nfunction filterFallback(f){if(f===THREE.NearestFilter||f===THREE.NearestMipMapNearestFilter||f===THREE.NearestMipMapLinearFilter){return _gl.NEAREST;}return _gl.LINEAR;}// Map three.js constants to WebGL constants\nfunction paramThreeToGL(p){var extension;if(p===THREE.RepeatWrapping)return _gl.REPEAT;if(p===THREE.ClampToEdgeWrapping)return _gl.CLAMP_TO_EDGE;if(p===THREE.MirroredRepeatWrapping)return _gl.MIRRORED_REPEAT;if(p===THREE.NearestFilter)return _gl.NEAREST;if(p===THREE.NearestMipMapNearestFilter)return _gl.NEAREST_MIPMAP_NEAREST;if(p===THREE.NearestMipMapLinearFilter)return _gl.NEAREST_MIPMAP_LINEAR;if(p===THREE.LinearFilter)return _gl.LINEAR;if(p===THREE.LinearMipMapNearestFilter)return _gl.LINEAR_MIPMAP_NEAREST;if(p===THREE.LinearMipMapLinearFilter)return _gl.LINEAR_MIPMAP_LINEAR;if(p===THREE.UnsignedByteType)return _gl.UNSIGNED_BYTE;if(p===THREE.UnsignedShort4444Type)return _gl.UNSIGNED_SHORT_4_4_4_4;if(p===THREE.UnsignedShort5551Type)return _gl.UNSIGNED_SHORT_5_5_5_1;if(p===THREE.UnsignedShort565Type)return _gl.UNSIGNED_SHORT_5_6_5;if(p===THREE.ByteType)return _gl.BYTE;if(p===THREE.ShortType)return _gl.SHORT;if(p===THREE.UnsignedShortType)return _gl.UNSIGNED_SHORT;if(p===THREE.IntType)return _gl.INT;if(p===THREE.UnsignedIntType)return _gl.UNSIGNED_INT;if(p===THREE.FloatType)return _gl.FLOAT;extension=extensions.get('OES_texture_half_float');if(extension!==null){if(p===THREE.HalfFloatType)return extension.HALF_FLOAT_OES;}if(p===THREE.AlphaFormat)return _gl.ALPHA;if(p===THREE.RGBFormat)return _gl.RGB;if(p===THREE.RGBAFormat)return _gl.RGBA;if(p===THREE.LuminanceFormat)return _gl.LUMINANCE;if(p===THREE.LuminanceAlphaFormat)return _gl.LUMINANCE_ALPHA;if(p===THREE.DepthFormat)return _gl.DEPTH_COMPONENT;if(p===THREE.AddEquation)return _gl.FUNC_ADD;if(p===THREE.SubtractEquation)return _gl.FUNC_SUBTRACT;if(p===THREE.ReverseSubtractEquation)return _gl.FUNC_REVERSE_SUBTRACT;if(p===THREE.ZeroFactor)return _gl.ZERO;if(p===THREE.OneFactor)return _gl.ONE;if(p===THREE.SrcColorFactor)return _gl.SRC_COLOR;if(p===THREE.OneMinusSrcColorFactor)return _gl.ONE_MINUS_SRC_COLOR;if(p===THREE.SrcAlphaFactor)return _gl.SRC_ALPHA;if(p===THREE.OneMinusSrcAlphaFactor)return _gl.ONE_MINUS_SRC_ALPHA;if(p===THREE.DstAlphaFactor)return _gl.DST_ALPHA;if(p===THREE.OneMinusDstAlphaFactor)return _gl.ONE_MINUS_DST_ALPHA;if(p===THREE.DstColorFactor)return _gl.DST_COLOR;if(p===THREE.OneMinusDstColorFactor)return _gl.ONE_MINUS_DST_COLOR;if(p===THREE.SrcAlphaSaturateFactor)return _gl.SRC_ALPHA_SATURATE;extension=extensions.get('WEBGL_compressed_texture_s3tc');if(extension!==null){if(p===THREE.RGB_S3TC_DXT1_Format)return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===THREE.RGBA_S3TC_DXT1_Format)return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===THREE.RGBA_S3TC_DXT3_Format)return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===THREE.RGBA_S3TC_DXT5_Format)return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;}extension=extensions.get('WEBGL_compressed_texture_pvrtc');if(extension!==null){if(p===THREE.RGB_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===THREE.RGB_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===THREE.RGBA_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===THREE.RGBA_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;}extension=extensions.get('WEBGL_compressed_texture_etc1');if(extension!==null){if(p===THREE.RGB_ETC1_Format)return extension.COMPRESSED_RGB_ETC1_WEBGL;}extension=extensions.get('EXT_blend_minmax');if(extension!==null){if(p===THREE.MinEquation)return extension.MIN_EXT;if(p===THREE.MaxEquation)return extension.MAX_EXT;}return 0;}};// File:src/renderers/WebGLRenderTarget.js\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author Marius Kintel / https://github.com/kintel\r\n *//*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/THREE.WebGLRenderTarget=function(width,height,options){this.uuid=THREE.Math.generateUUID();this.width=width;this.height=height;this.scissor=new THREE.Vector4(0,0,width,height);this.scissorTest=false;this.viewport=new THREE.Vector4(0,0,width,height);options=options||{};if(options.minFilter===undefined)options.minFilter=THREE.LinearFilter;this.texture=new THREE.Texture(undefined,undefined,options.wrapS,options.wrapT,options.magFilter,options.minFilter,options.format,options.type,options.anisotropy,options.encoding);this.depthBuffer=options.depthBuffer!==undefined?options.depthBuffer:true;this.stencilBuffer=options.stencilBuffer!==undefined?options.stencilBuffer:true;this.depthTexture=null;};Object.assign(THREE.WebGLRenderTarget.prototype,THREE.EventDispatcher.prototype,{setSize:function(width,height){if(this.width!==width||this.height!==height){this.width=width;this.height=height;this.dispose();}this.viewport.set(0,0,width,height);this.scissor.set(0,0,width,height);},clone:function(){return new this.constructor().copy(this);},copy:function(source){this.width=source.width;this.height=source.height;this.viewport.copy(source.viewport);this.texture=source.texture.clone();this.depthBuffer=source.depthBuffer;this.stencilBuffer=source.stencilBuffer;this.depthTexture=source.depthTexture;return this;},dispose:function(){this.dispatchEvent({type:'dispose'});}});// File:src/renderers/WebGLRenderTargetCube.js\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */THREE.WebGLRenderTargetCube=function(width,height,options){THREE.WebGLRenderTarget.call(this,width,height,options);this.activeCubeFace=0;// PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\nthis.activeMipMapLevel=0;};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;// File:src/renderers/webgl/WebGLBufferRenderer.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLBufferRenderer=function(_gl,extensions,_infoRender){var mode;function setMode(value){mode=value;}function render(start,count){_gl.drawArrays(mode,start,count);_infoRender.calls++;_infoRender.vertices+=count;if(mode===_gl.TRIANGLES)_infoRender.faces+=count/3;}function renderInstances(geometry){var extension=extensions.get('ANGLE_instanced_arrays');if(extension===null){console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');return;}var position=geometry.attributes.position;var count=0;if(position instanceof THREE.InterleavedBufferAttribute){count=position.data.count;extension.drawArraysInstancedANGLE(mode,0,count,geometry.maxInstancedCount);}else{count=position.count;extension.drawArraysInstancedANGLE(mode,0,count,geometry.maxInstancedCount);}_infoRender.calls++;_infoRender.vertices+=count*geometry.maxInstancedCount;if(mode===_gl.TRIANGLES)_infoRender.faces+=geometry.maxInstancedCount*count/3;}this.setMode=setMode;this.render=render;this.renderInstances=renderInstances;};// File:src/renderers/webgl/WebGLClipping.js\nTHREE.WebGLClipping=function(){var scope=this,globalState=null,numGlobalPlanes=0,localClippingEnabled=false,renderingShadows=false,plane=new THREE.Plane(),viewNormalMatrix=new THREE.Matrix3(),uniform={value:null,needsUpdate:false};this.uniform=uniform;this.numPlanes=0;this.init=function(planes,enableLocalClipping,camera){var enabled=planes.length!==0||enableLocalClipping||// enable state of previous frame - the clipping code has to\n// run another frame in order to reset the state:\nnumGlobalPlanes!==0||localClippingEnabled;localClippingEnabled=enableLocalClipping;globalState=projectPlanes(planes,camera,0);numGlobalPlanes=planes.length;return enabled;};this.beginShadows=function(){renderingShadows=true;projectPlanes(null);};this.endShadows=function(){renderingShadows=false;resetGlobalState();};this.setState=function(planes,clipShadows,camera,cache,fromCache){if(!localClippingEnabled||planes===null||planes.length===0||renderingShadows&&!clipShadows){// there's no local clipping\nif(renderingShadows){// there's no global clipping\nprojectPlanes(null);}else{resetGlobalState();}}else{var nGlobal=renderingShadows?0:numGlobalPlanes,lGlobal=nGlobal*4,dstArray=cache.clippingState||null;uniform.value=dstArray;// ensure unique state\ndstArray=projectPlanes(planes,camera,lGlobal,fromCache);for(var i=0;i!==lGlobal;++i){dstArray[i]=globalState[i];}cache.clippingState=dstArray;this.numPlanes+=nGlobal;}};function resetGlobalState(){if(uniform.value!==globalState){uniform.value=globalState;uniform.needsUpdate=numGlobalPlanes>0;}scope.numPlanes=numGlobalPlanes;}function projectPlanes(planes,camera,dstOffset,skipTransform){var nPlanes=planes!==null?planes.length:0,dstArray=null;if(nPlanes!==0){dstArray=uniform.value;if(skipTransform!==true||dstArray===null){var flatSize=dstOffset+nPlanes*4,viewMatrix=camera.matrixWorldInverse;viewNormalMatrix.getNormalMatrix(viewMatrix);if(dstArray===null||dstArray.length<flatSize){dstArray=new Float32Array(flatSize);}for(var i=0,i4=dstOffset;i!==nPlanes;++i,i4+=4){plane.copy(planes[i]).applyMatrix4(viewMatrix,viewNormalMatrix);plane.normal.toArray(dstArray,i4);dstArray[i4+3]=plane.constant;}}uniform.value=dstArray;uniform.needsUpdate=true;}scope.numPlanes=nPlanes;return dstArray;}};// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLIndexedBufferRenderer=function(_gl,extensions,_infoRender){var mode;function setMode(value){mode=value;}var type,size;function setIndex(index){if(index.array instanceof Uint32Array&&extensions.get('OES_element_index_uint')){type=_gl.UNSIGNED_INT;size=4;}else{type=_gl.UNSIGNED_SHORT;size=2;}}function render(start,count){_gl.drawElements(mode,count,type,start*size);_infoRender.calls++;_infoRender.vertices+=count;if(mode===_gl.TRIANGLES)_infoRender.faces+=count/3;}function renderInstances(geometry,start,count){var extension=extensions.get('ANGLE_instanced_arrays');if(extension===null){console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');return;}extension.drawElementsInstancedANGLE(mode,count,type,start*size,geometry.maxInstancedCount);_infoRender.calls++;_infoRender.vertices+=count*geometry.maxInstancedCount;if(mode===_gl.TRIANGLES)_infoRender.faces+=geometry.maxInstancedCount*count/3;}this.setMode=setMode;this.setIndex=setIndex;this.render=render;this.renderInstances=renderInstances;};// File:src/renderers/webgl/WebGLExtensions.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLExtensions=function(gl){var extensions={};this.get=function(name){if(extensions[name]!==undefined){return extensions[name];}var extension;switch(name){case'WEBGL_depth_texture':extension=gl.getExtension('WEBGL_depth_texture')||gl.getExtension('MOZ_WEBGL_depth_texture')||gl.getExtension('WEBKIT_WEBGL_depth_texture');break;case'EXT_texture_filter_anisotropic':extension=gl.getExtension('EXT_texture_filter_anisotropic')||gl.getExtension('MOZ_EXT_texture_filter_anisotropic')||gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');break;case'WEBGL_compressed_texture_s3tc':extension=gl.getExtension('WEBGL_compressed_texture_s3tc')||gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc')||gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');break;case'WEBGL_compressed_texture_pvrtc':extension=gl.getExtension('WEBGL_compressed_texture_pvrtc')||gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');break;case'WEBGL_compressed_texture_etc1':extension=gl.getExtension('WEBGL_compressed_texture_etc1');break;default:extension=gl.getExtension(name);}if(extension===null){console.warn('THREE.WebGLRenderer: '+name+' extension not supported.');}extensions[name]=extension;return extension;};};// File:src/renderers/webgl/WebGLCapabilities.js\nTHREE.WebGLCapabilities=function(gl,extensions,parameters){function getMaxPrecision(precision){if(precision==='highp'){if(gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).precision>0){return'highp';}precision='mediump';}if(precision==='mediump'){if(gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).precision>0){return'mediump';}}return'lowp';}this.getMaxPrecision=getMaxPrecision;this.precision=parameters.precision!==undefined?parameters.precision:'highp';this.logarithmicDepthBuffer=parameters.logarithmicDepthBuffer!==undefined?parameters.logarithmicDepthBuffer:false;this.maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE);this.maxCubemapSize=gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=gl.getParameter(gl.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=gl.getParameter(gl.MAX_VARYING_VECTORS);this.maxFragmentUniforms=gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=this.maxVertexTextures>0;this.floatFragmentTextures=!!extensions.get('OES_texture_float');this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var _maxPrecision=getMaxPrecision(this.precision);if(_maxPrecision!==this.precision){console.warn('THREE.WebGLRenderer:',this.precision,'not supported, using',_maxPrecision,'instead.');this.precision=_maxPrecision;}if(this.logarithmicDepthBuffer){this.logarithmicDepthBuffer=!!extensions.get('EXT_frag_depth');}};// File:src/renderers/webgl/WebGLGeometries.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLGeometries=function(gl,properties,info){var geometries={};function get(object){var geometry=object.geometry;if(geometries[geometry.id]!==undefined){return geometries[geometry.id];}geometry.addEventListener('dispose',onGeometryDispose);var buffergeometry;if(geometry instanceof THREE.BufferGeometry){buffergeometry=geometry;}else if(geometry instanceof THREE.Geometry){if(geometry._bufferGeometry===undefined){geometry._bufferGeometry=new THREE.BufferGeometry().setFromObject(object);}buffergeometry=geometry._bufferGeometry;}geometries[geometry.id]=buffergeometry;info.memory.geometries++;return buffergeometry;}function onGeometryDispose(event){var geometry=event.target;var buffergeometry=geometries[geometry.id];if(buffergeometry.index!==null){deleteAttribute(buffergeometry.index);}deleteAttributes(buffergeometry.attributes);geometry.removeEventListener('dispose',onGeometryDispose);delete geometries[geometry.id];// TODO\nvar property=properties.get(geometry);if(property.wireframe){deleteAttribute(property.wireframe);}properties.delete(geometry);var bufferproperty=properties.get(buffergeometry);if(bufferproperty.wireframe){deleteAttribute(bufferproperty.wireframe);}properties.delete(buffergeometry);//\ninfo.memory.geometries--;}function getAttributeBuffer(attribute){if(attribute instanceof THREE.InterleavedBufferAttribute){return properties.get(attribute.data).__webglBuffer;}return properties.get(attribute).__webglBuffer;}function deleteAttribute(attribute){var buffer=getAttributeBuffer(attribute);if(buffer!==undefined){gl.deleteBuffer(buffer);removeAttributeBuffer(attribute);}}function deleteAttributes(attributes){for(var name in attributes){deleteAttribute(attributes[name]);}}function removeAttributeBuffer(attribute){if(attribute instanceof THREE.InterleavedBufferAttribute){properties.delete(attribute.data);}else{properties.delete(attribute);}}this.get=get;};// File:src/renderers/webgl/WebGLLights.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLLights=function(){var lights={};this.get=function(light){if(lights[light.id]!==undefined){return lights[light.id];}var uniforms;switch(light.type){case'DirectionalLight':uniforms={direction:new THREE.Vector3(),color:new THREE.Color(),shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2()};break;case'SpotLight':uniforms={position:new THREE.Vector3(),direction:new THREE.Vector3(),color:new THREE.Color(),distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2()};break;case'PointLight':uniforms={position:new THREE.Vector3(),color:new THREE.Color(),distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2()};break;case'HemisphereLight':uniforms={direction:new THREE.Vector3(),skyColor:new THREE.Color(),groundColor:new THREE.Color()};break;}lights[light.id]=uniforms;return uniforms;};};// File:src/renderers/webgl/WebGLObjects.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLObjects=function(gl,properties,info){var geometries=new THREE.WebGLGeometries(gl,properties,info);//\nfunction update(object){// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\nvar geometry=geometries.get(object);if(object.geometry instanceof THREE.Geometry){geometry.updateFromObject(object);}var index=geometry.index;var attributes=geometry.attributes;if(index!==null){updateAttribute(index,gl.ELEMENT_ARRAY_BUFFER);}for(var name in attributes){updateAttribute(attributes[name],gl.ARRAY_BUFFER);}// morph targets\nvar morphAttributes=geometry.morphAttributes;for(var name in morphAttributes){var array=morphAttributes[name];for(var i=0,l=array.length;i<l;i++){updateAttribute(array[i],gl.ARRAY_BUFFER);}}return geometry;}function updateAttribute(attribute,bufferType){var data=attribute instanceof THREE.InterleavedBufferAttribute?attribute.data:attribute;var attributeProperties=properties.get(data);if(attributeProperties.__webglBuffer===undefined){createBuffer(attributeProperties,data,bufferType);}else if(attributeProperties.version!==data.version){updateBuffer(attributeProperties,data,bufferType);}}function createBuffer(attributeProperties,data,bufferType){attributeProperties.__webglBuffer=gl.createBuffer();gl.bindBuffer(bufferType,attributeProperties.__webglBuffer);var usage=data.dynamic?gl.DYNAMIC_DRAW:gl.STATIC_DRAW;gl.bufferData(bufferType,data.array,usage);attributeProperties.version=data.version;}function updateBuffer(attributeProperties,data,bufferType){gl.bindBuffer(bufferType,attributeProperties.__webglBuffer);if(data.dynamic===false||data.updateRange.count===-1){// Not using update ranges\ngl.bufferSubData(bufferType,0,data.array);}else if(data.updateRange.count===0){console.error('THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.');}else{gl.bufferSubData(bufferType,data.updateRange.offset*data.array.BYTES_PER_ELEMENT,data.array.subarray(data.updateRange.offset,data.updateRange.offset+data.updateRange.count));data.updateRange.count=0;// reset range\n}attributeProperties.version=data.version;}function getAttributeBuffer(attribute){if(attribute instanceof THREE.InterleavedBufferAttribute){return properties.get(attribute.data).__webglBuffer;}return properties.get(attribute).__webglBuffer;}function getWireframeAttribute(geometry){var property=properties.get(geometry);if(property.wireframe!==undefined){return property.wireframe;}var indices=[];var index=geometry.index;var attributes=geometry.attributes;var position=attributes.position;// console.time( 'wireframe' );\nif(index!==null){var edges={};var array=index.array;for(var i=0,l=array.length;i<l;i+=3){var a=array[i+0];var b=array[i+1];var c=array[i+2];if(checkEdge(edges,a,b))indices.push(a,b);if(checkEdge(edges,b,c))indices.push(b,c);if(checkEdge(edges,c,a))indices.push(c,a);}}else{var array=attributes.position.array;for(var i=0,l=array.length/3-1;i<l;i+=3){var a=i+0;var b=i+1;var c=i+2;indices.push(a,b,b,c,c,a);}}// console.timeEnd( 'wireframe' );\nvar TypeArray=position.count>65535?Uint32Array:Uint16Array;var attribute=new THREE.BufferAttribute(new TypeArray(indices),1);updateAttribute(attribute,gl.ELEMENT_ARRAY_BUFFER);property.wireframe=attribute;return attribute;}function checkEdge(edges,a,b){if(a>b){var tmp=a;a=b;b=tmp;}var list=edges[a];if(list===undefined){edges[a]=[b];return true;}else if(list.indexOf(b)===-1){list.push(b);return true;}return false;}this.getAttributeBuffer=getAttributeBuffer;this.getWireframeAttribute=getWireframeAttribute;this.update=update;};// File:src/renderers/webgl/WebGLProgram.js\nTHREE.WebGLProgram=function(){var programIdCount=0;function getEncodingComponents(encoding){switch(encoding){case THREE.LinearEncoding:return['Linear','( value )'];case THREE.sRGBEncoding:return['sRGB','( value )'];case THREE.RGBEEncoding:return['RGBE','( value )'];case THREE.RGBM7Encoding:return['RGBM','( value, 7.0 )'];case THREE.RGBM16Encoding:return['RGBM','( value, 16.0 )'];case THREE.RGBDEncoding:return['RGBD','( value, 256.0 )'];case THREE.GammaEncoding:return['Gamma','( value, float( GAMMA_FACTOR ) )'];default:throw new Error('unsupported encoding: '+encoding);}}function getTexelDecodingFunction(functionName,encoding){var components=getEncodingComponents(encoding);return\"vec4 \"+functionName+\"( vec4 value ) { return \"+components[0]+\"ToLinear\"+components[1]+\"; }\";}function getTexelEncodingFunction(functionName,encoding){var components=getEncodingComponents(encoding);return\"vec4 \"+functionName+\"( vec4 value ) { return LinearTo\"+components[0]+components[1]+\"; }\";}function getToneMappingFunction(functionName,toneMapping){var toneMappingName;switch(toneMapping){case THREE.LinearToneMapping:toneMappingName=\"Linear\";break;case THREE.ReinhardToneMapping:toneMappingName=\"Reinhard\";break;case THREE.Uncharted2ToneMapping:toneMappingName=\"Uncharted2\";break;case THREE.CineonToneMapping:toneMappingName=\"OptimizedCineon\";break;default:throw new Error('unsupported toneMapping: '+toneMapping);}return\"vec3 \"+functionName+\"( vec3 color ) { return \"+toneMappingName+\"ToneMapping( color ); }\";}function generateExtensions(extensions,parameters,rendererExtensions){extensions=extensions||{};var chunks=[extensions.derivatives||parameters.envMapCubeUV||parameters.bumpMap||parameters.normalMap||parameters.flatShading?'#extension GL_OES_standard_derivatives : enable':'',(extensions.fragDepth||parameters.logarithmicDepthBuffer)&&rendererExtensions.get('EXT_frag_depth')?'#extension GL_EXT_frag_depth : enable':'',extensions.drawBuffers&&rendererExtensions.get('WEBGL_draw_buffers')?'#extension GL_EXT_draw_buffers : require':'',(extensions.shaderTextureLOD||parameters.envMap)&&rendererExtensions.get('EXT_shader_texture_lod')?'#extension GL_EXT_shader_texture_lod : enable':''];return chunks.filter(filterEmptyLine).join('\\n');}function generateDefines(defines){var chunks=[];for(var name in defines){var value=defines[name];if(value===false)continue;chunks.push('#define '+name+' '+value);}return chunks.join('\\n');}function fetchAttributeLocations(gl,program,identifiers){var attributes={};var n=gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES);for(var i=0;i<n;i++){var info=gl.getActiveAttrib(program,i);var name=info.name;// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\nattributes[name]=gl.getAttribLocation(program,name);}return attributes;}function filterEmptyLine(string){return string!=='';}function replaceLightNums(string,parameters){return string.replace(/NUM_DIR_LIGHTS/g,parameters.numDirLights).replace(/NUM_SPOT_LIGHTS/g,parameters.numSpotLights).replace(/NUM_POINT_LIGHTS/g,parameters.numPointLights).replace(/NUM_HEMI_LIGHTS/g,parameters.numHemiLights);}function parseIncludes(string){var pattern=/#include +<([\\w\\d.]+)>/g;function replace(match,include){var replace=THREE.ShaderChunk[include];if(replace===undefined){throw new Error('Can not resolve #include <'+include+'>');}return parseIncludes(replace);}return string.replace(pattern,replace);}function unrollLoops(string){var pattern=/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;function replace(match,start,end,snippet){var unroll='';for(var i=parseInt(start);i<parseInt(end);i++){unroll+=snippet.replace(/\\[ i \\]/g,'[ '+i+' ]');}return unroll;}return string.replace(pattern,replace);}return function WebGLProgram(renderer,code,material,parameters){var gl=renderer.context;var extensions=material.extensions;var defines=material.defines;var vertexShader=material.__webglShader.vertexShader;var fragmentShader=material.__webglShader.fragmentShader;var shadowMapTypeDefine='SHADOWMAP_TYPE_BASIC';if(parameters.shadowMapType===THREE.PCFShadowMap){shadowMapTypeDefine='SHADOWMAP_TYPE_PCF';}else if(parameters.shadowMapType===THREE.PCFSoftShadowMap){shadowMapTypeDefine='SHADOWMAP_TYPE_PCF_SOFT';}var envMapTypeDefine='ENVMAP_TYPE_CUBE';var envMapModeDefine='ENVMAP_MODE_REFLECTION';var envMapBlendingDefine='ENVMAP_BLENDING_MULTIPLY';if(parameters.envMap){switch(material.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:envMapTypeDefine='ENVMAP_TYPE_CUBE';break;case THREE.CubeUVReflectionMapping:case THREE.CubeUVRefractionMapping:envMapTypeDefine='ENVMAP_TYPE_CUBE_UV';break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:envMapTypeDefine='ENVMAP_TYPE_EQUIREC';break;case THREE.SphericalReflectionMapping:envMapTypeDefine='ENVMAP_TYPE_SPHERE';break;}switch(material.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:envMapModeDefine='ENVMAP_MODE_REFRACTION';break;}switch(material.combine){case THREE.MultiplyOperation:envMapBlendingDefine='ENVMAP_BLENDING_MULTIPLY';break;case THREE.MixOperation:envMapBlendingDefine='ENVMAP_BLENDING_MIX';break;case THREE.AddOperation:envMapBlendingDefine='ENVMAP_BLENDING_ADD';break;}}var gammaFactorDefine=renderer.gammaFactor>0?renderer.gammaFactor:1.0;// console.log( 'building new program ' );\n//\nvar customExtensions=generateExtensions(extensions,parameters,renderer.extensions);var customDefines=generateDefines(defines);//\nvar program=gl.createProgram();var prefixVertex,prefixFragment;if(material instanceof THREE.RawShaderMaterial){prefixVertex='';prefixFragment='';}else{prefixVertex=['precision '+parameters.precision+' float;','precision '+parameters.precision+' int;','#define SHADER_NAME '+material.__webglShader.name,customDefines,parameters.supportsVertexTextures?'#define VERTEX_TEXTURES':'','#define GAMMA_FACTOR '+gammaFactorDefine,'#define MAX_BONES '+parameters.maxBones,parameters.map?'#define USE_MAP':'',parameters.envMap?'#define USE_ENVMAP':'',parameters.envMap?'#define '+envMapModeDefine:'',parameters.lightMap?'#define USE_LIGHTMAP':'',parameters.aoMap?'#define USE_AOMAP':'',parameters.emissiveMap?'#define USE_EMISSIVEMAP':'',parameters.bumpMap?'#define USE_BUMPMAP':'',parameters.normalMap?'#define USE_NORMALMAP':'',parameters.displacementMap&&parameters.supportsVertexTextures?'#define USE_DISPLACEMENTMAP':'',parameters.specularMap?'#define USE_SPECULARMAP':'',parameters.roughnessMap?'#define USE_ROUGHNESSMAP':'',parameters.metalnessMap?'#define USE_METALNESSMAP':'',parameters.alphaMap?'#define USE_ALPHAMAP':'',parameters.vertexColors?'#define USE_COLOR':'',parameters.flatShading?'#define FLAT_SHADED':'',parameters.skinning?'#define USE_SKINNING':'',parameters.useVertexTexture?'#define BONE_TEXTURE':'',parameters.morphTargets?'#define USE_MORPHTARGETS':'',parameters.morphNormals&&parameters.flatShading===false?'#define USE_MORPHNORMALS':'',parameters.doubleSided?'#define DOUBLE_SIDED':'',parameters.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+parameters.numClippingPlanes,parameters.shadowMapEnabled?'#define USE_SHADOWMAP':'',parameters.shadowMapEnabled?'#define '+shadowMapTypeDefine:'',parameters.sizeAttenuation?'#define USE_SIZEATTENUATION':'',parameters.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',parameters.logarithmicDepthBuffer&&renderer.extensions.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'','uniform mat4 modelMatrix;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform mat4 viewMatrix;','uniform mat3 normalMatrix;','uniform vec3 cameraPosition;','attribute vec3 position;','attribute vec3 normal;','attribute vec2 uv;','#ifdef USE_COLOR','\tattribute vec3 color;','#endif','#ifdef USE_MORPHTARGETS','\tattribute vec3 morphTarget0;','\tattribute vec3 morphTarget1;','\tattribute vec3 morphTarget2;','\tattribute vec3 morphTarget3;','\t#ifdef USE_MORPHNORMALS','\t\tattribute vec3 morphNormal0;','\t\tattribute vec3 morphNormal1;','\t\tattribute vec3 morphNormal2;','\t\tattribute vec3 morphNormal3;','\t#else','\t\tattribute vec3 morphTarget4;','\t\tattribute vec3 morphTarget5;','\t\tattribute vec3 morphTarget6;','\t\tattribute vec3 morphTarget7;','\t#endif','#endif','#ifdef USE_SKINNING','\tattribute vec4 skinIndex;','\tattribute vec4 skinWeight;','#endif','\\n'].filter(filterEmptyLine).join('\\n');prefixFragment=[customExtensions,'precision '+parameters.precision+' float;','precision '+parameters.precision+' int;','#define SHADER_NAME '+material.__webglShader.name,customDefines,parameters.alphaTest?'#define ALPHATEST '+parameters.alphaTest:'','#define GAMMA_FACTOR '+gammaFactorDefine,parameters.useFog&&parameters.fog?'#define USE_FOG':'',parameters.useFog&&parameters.fogExp?'#define FOG_EXP2':'',parameters.map?'#define USE_MAP':'',parameters.envMap?'#define USE_ENVMAP':'',parameters.envMap?'#define '+envMapTypeDefine:'',parameters.envMap?'#define '+envMapModeDefine:'',parameters.envMap?'#define '+envMapBlendingDefine:'',parameters.lightMap?'#define USE_LIGHTMAP':'',parameters.aoMap?'#define USE_AOMAP':'',parameters.emissiveMap?'#define USE_EMISSIVEMAP':'',parameters.bumpMap?'#define USE_BUMPMAP':'',parameters.normalMap?'#define USE_NORMALMAP':'',parameters.specularMap?'#define USE_SPECULARMAP':'',parameters.roughnessMap?'#define USE_ROUGHNESSMAP':'',parameters.metalnessMap?'#define USE_METALNESSMAP':'',parameters.alphaMap?'#define USE_ALPHAMAP':'',parameters.vertexColors?'#define USE_COLOR':'',parameters.flatShading?'#define FLAT_SHADED':'',parameters.doubleSided?'#define DOUBLE_SIDED':'',parameters.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+parameters.numClippingPlanes,parameters.shadowMapEnabled?'#define USE_SHADOWMAP':'',parameters.shadowMapEnabled?'#define '+shadowMapTypeDefine:'',parameters.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":'',parameters.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":'',parameters.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',parameters.logarithmicDepthBuffer&&renderer.extensions.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'',parameters.envMap&&renderer.extensions.get('EXT_shader_texture_lod')?'#define TEXTURE_LOD_EXT':'','uniform mat4 viewMatrix;','uniform vec3 cameraPosition;',parameters.toneMapping!==THREE.NoToneMapping?\"#define TONE_MAPPING\":'',parameters.toneMapping!==THREE.NoToneMapping?THREE.ShaderChunk['tonemapping_pars_fragment']:'',// this code is required here because it is used by the toneMapping() function defined below\nparameters.toneMapping!==THREE.NoToneMapping?getToneMappingFunction(\"toneMapping\",parameters.toneMapping):'',parameters.outputEncoding||parameters.mapEncoding||parameters.envMapEncoding||parameters.emissiveMapEncoding?THREE.ShaderChunk['encodings_pars_fragment']:'',// this code is required here because it is used by the various encoding/decoding function defined below\nparameters.mapEncoding?getTexelDecodingFunction('mapTexelToLinear',parameters.mapEncoding):'',parameters.envMapEncoding?getTexelDecodingFunction('envMapTexelToLinear',parameters.envMapEncoding):'',parameters.emissiveMapEncoding?getTexelDecodingFunction('emissiveMapTexelToLinear',parameters.emissiveMapEncoding):'',parameters.outputEncoding?getTexelEncodingFunction(\"linearToOutputTexel\",parameters.outputEncoding):'',parameters.depthPacking?\"#define DEPTH_PACKING \"+material.depthPacking:'','\\n'].filter(filterEmptyLine).join('\\n');}vertexShader=parseIncludes(vertexShader,parameters);vertexShader=replaceLightNums(vertexShader,parameters);fragmentShader=parseIncludes(fragmentShader,parameters);fragmentShader=replaceLightNums(fragmentShader,parameters);if(material instanceof THREE.ShaderMaterial===false){vertexShader=unrollLoops(vertexShader);fragmentShader=unrollLoops(fragmentShader);}var vertexGlsl=prefixVertex+vertexShader;var fragmentGlsl=prefixFragment+fragmentShader;// console.log( '*VERTEX*', vertexGlsl );\n// console.log( '*FRAGMENT*', fragmentGlsl );\nvar glVertexShader=THREE.WebGLShader(gl,gl.VERTEX_SHADER,vertexGlsl);var glFragmentShader=THREE.WebGLShader(gl,gl.FRAGMENT_SHADER,fragmentGlsl);gl.attachShader(program,glVertexShader);gl.attachShader(program,glFragmentShader);// Force a particular attribute to index 0.\nif(material.index0AttributeName!==undefined){gl.bindAttribLocation(program,0,material.index0AttributeName);}else if(parameters.morphTargets===true){// programs with morphTargets displace position out of attribute 0\ngl.bindAttribLocation(program,0,'position');}gl.linkProgram(program);var programLog=gl.getProgramInfoLog(program);var vertexLog=gl.getShaderInfoLog(glVertexShader);var fragmentLog=gl.getShaderInfoLog(glFragmentShader);var runnable=true;var haveDiagnostics=true;// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\nif(gl.getProgramParameter(program,gl.LINK_STATUS)===false){runnable=false;console.error('THREE.WebGLProgram: shader error: ',gl.getError(),'gl.VALIDATE_STATUS',gl.getProgramParameter(program,gl.VALIDATE_STATUS),'gl.getProgramInfoLog',programLog,vertexLog,fragmentLog);}else if(programLog!==''){console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()',programLog);}else if(vertexLog===''||fragmentLog===''){haveDiagnostics=false;}if(haveDiagnostics){this.diagnostics={runnable:runnable,material:material,programLog:programLog,vertexShader:{log:vertexLog,prefix:prefixVertex},fragmentShader:{log:fragmentLog,prefix:prefixFragment}};}// clean up\ngl.deleteShader(glVertexShader);gl.deleteShader(glFragmentShader);// set up caching for uniform locations\nvar cachedUniforms;this.getUniforms=function(){if(cachedUniforms===undefined){cachedUniforms=new THREE.WebGLUniforms(gl,program,renderer);}return cachedUniforms;};// set up caching for attribute locations\nvar cachedAttributes;this.getAttributes=function(){if(cachedAttributes===undefined){cachedAttributes=fetchAttributeLocations(gl,program);}return cachedAttributes;};// free resource\nthis.destroy=function(){gl.deleteProgram(program);this.program=undefined;};// DEPRECATED\nObject.defineProperties(this,{uniforms:{get:function(){console.warn('THREE.WebGLProgram: .uniforms is now .getUniforms().');return this.getUniforms();}},attributes:{get:function(){console.warn('THREE.WebGLProgram: .attributes is now .getAttributes().');return this.getAttributes();}}});//\nthis.id=programIdCount++;this.code=code;this.usedTimes=1;this.program=program;this.vertexShader=glVertexShader;this.fragmentShader=glFragmentShader;return this;};}();// File:src/renderers/webgl/WebGLPrograms.js\nTHREE.WebGLPrograms=function(renderer,capabilities){var programs=[];var shaderIDs={MeshDepthMaterial:'depth',MeshNormalMaterial:'normal',MeshBasicMaterial:'basic',MeshLambertMaterial:'lambert',MeshPhongMaterial:'phong',MeshStandardMaterial:'physical',MeshPhysicalMaterial:'physical',LineBasicMaterial:'basic',LineDashedMaterial:'dashed',PointsMaterial:'points'};var parameterNames=[\"precision\",\"supportsVertexTextures\",\"map\",\"mapEncoding\",\"envMap\",\"envMapMode\",\"envMapEncoding\",\"lightMap\",\"aoMap\",\"emissiveMap\",\"emissiveMapEncoding\",\"bumpMap\",\"normalMap\",\"displacementMap\",\"specularMap\",\"roughnessMap\",\"metalnessMap\",\"alphaMap\",\"combine\",\"vertexColors\",\"fog\",\"useFog\",\"fogExp\",\"flatShading\",\"sizeAttenuation\",\"logarithmicDepthBuffer\",\"skinning\",\"maxBones\",\"useVertexTexture\",\"morphTargets\",\"morphNormals\",\"maxMorphTargets\",\"maxMorphNormals\",\"premultipliedAlpha\",\"numDirLights\",\"numPointLights\",\"numSpotLights\",\"numHemiLights\",\"shadowMapEnabled\",\"shadowMapType\",\"toneMapping\",'physicallyCorrectLights',\"alphaTest\",\"doubleSided\",\"flipSided\",\"numClippingPlanes\",\"depthPacking\"];function allocateBones(object){if(capabilities.floatVertexTextures&&object&&object.skeleton&&object.skeleton.useVertexTexture){return 1024;}else{// default for when object is not specified\n// ( for example when prebuilding shader to be used with multiple objects )\n//\n//  - leave some extra space for other uniforms\n//  - limit here is ANGLE's 254 max uniform vectors\n//    (up to 54 should be safe)\nvar nVertexUniforms=capabilities.maxVertexUniforms;var nVertexMatrices=Math.floor((nVertexUniforms-20)/4);var maxBones=nVertexMatrices;if(object!==undefined&&object instanceof THREE.SkinnedMesh){maxBones=Math.min(object.skeleton.bones.length,maxBones);if(maxBones<object.skeleton.bones.length){console.warn('WebGLRenderer: too many bones - '+object.skeleton.bones.length+', this GPU supports just '+maxBones+' (try OpenGL instead of ANGLE)');}}return maxBones;}}function getTextureEncodingFromMap(map,gammaOverrideLinear){var encoding;if(!map){encoding=THREE.LinearEncoding;}else if(map instanceof THREE.Texture){encoding=map.encoding;}else if(map instanceof THREE.WebGLRenderTarget){console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\");encoding=map.texture.encoding;}// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\nif(encoding===THREE.LinearEncoding&&gammaOverrideLinear){encoding=THREE.GammaEncoding;}return encoding;}this.getParameters=function(material,lights,fog,nClipPlanes,object){var shaderID=shaderIDs[material.type];// heuristics to create shader parameters according to lights in the scene\n// (not to blow over maxLights budget)\nvar maxBones=allocateBones(object);var precision=renderer.getPrecision();if(material.precision!==null){precision=capabilities.getMaxPrecision(material.precision);if(precision!==material.precision){console.warn('THREE.WebGLProgram.getParameters:',material.precision,'not supported, using',precision,'instead.');}}var currentRenderTarget=renderer.getCurrentRenderTarget();var parameters={shaderID:shaderID,precision:precision,supportsVertexTextures:capabilities.vertexTextures,outputEncoding:getTextureEncodingFromMap(!currentRenderTarget?null:currentRenderTarget.texture,renderer.gammaOutput),map:!!material.map,mapEncoding:getTextureEncodingFromMap(material.map,renderer.gammaInput),envMap:!!material.envMap,envMapMode:material.envMap&&material.envMap.mapping,envMapEncoding:getTextureEncodingFromMap(material.envMap,renderer.gammaInput),envMapCubeUV:!!material.envMap&&(material.envMap.mapping===THREE.CubeUVReflectionMapping||material.envMap.mapping===THREE.CubeUVRefractionMapping),lightMap:!!material.lightMap,aoMap:!!material.aoMap,emissiveMap:!!material.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(material.emissiveMap,renderer.gammaInput),bumpMap:!!material.bumpMap,normalMap:!!material.normalMap,displacementMap:!!material.displacementMap,roughnessMap:!!material.roughnessMap,metalnessMap:!!material.metalnessMap,specularMap:!!material.specularMap,alphaMap:!!material.alphaMap,combine:material.combine,vertexColors:material.vertexColors,fog:fog,useFog:material.fog,fogExp:fog instanceof THREE.FogExp2,flatShading:material.shading===THREE.FlatShading,sizeAttenuation:material.sizeAttenuation,logarithmicDepthBuffer:capabilities.logarithmicDepthBuffer,skinning:material.skinning,maxBones:maxBones,useVertexTexture:capabilities.floatVertexTextures&&object&&object.skeleton&&object.skeleton.useVertexTexture,morphTargets:material.morphTargets,morphNormals:material.morphNormals,maxMorphTargets:renderer.maxMorphTargets,maxMorphNormals:renderer.maxMorphNormals,numDirLights:lights.directional.length,numPointLights:lights.point.length,numSpotLights:lights.spot.length,numHemiLights:lights.hemi.length,numClippingPlanes:nClipPlanes,shadowMapEnabled:renderer.shadowMap.enabled&&object.receiveShadow&&lights.shadows.length>0,shadowMapType:renderer.shadowMap.type,toneMapping:renderer.toneMapping,physicallyCorrectLights:renderer.physicallyCorrectLights,premultipliedAlpha:material.premultipliedAlpha,alphaTest:material.alphaTest,doubleSided:material.side===THREE.DoubleSide,flipSided:material.side===THREE.BackSide,depthPacking:material.depthPacking!==undefined?material.depthPacking:false};return parameters;};this.getProgramCode=function(material,parameters){var array=[];if(parameters.shaderID){array.push(parameters.shaderID);}else{array.push(material.fragmentShader);array.push(material.vertexShader);}if(material.defines!==undefined){for(var name in material.defines){array.push(name);array.push(material.defines[name]);}}for(var i=0;i<parameterNames.length;i++){array.push(parameters[parameterNames[i]]);}return array.join();};this.acquireProgram=function(material,parameters,code){var program;// Check if code has been already compiled\nfor(var p=0,pl=programs.length;p<pl;p++){var programInfo=programs[p];if(programInfo.code===code){program=programInfo;++program.usedTimes;break;}}if(program===undefined){program=new THREE.WebGLProgram(renderer,code,material,parameters);programs.push(program);}return program;};this.releaseProgram=function(program){if(--program.usedTimes===0){// Remove from unordered set\nvar i=programs.indexOf(program);programs[i]=programs[programs.length-1];programs.pop();// Free WebGL resources\nprogram.destroy();}};// Exposed for resource monitoring & error feedback via renderer.info:\nthis.programs=programs;};// File:src/renderers/webgl/WebGLProperties.js\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/THREE.WebGLProperties=function(){var properties={};this.get=function(object){var uuid=object.uuid;var map=properties[uuid];if(map===undefined){map={};properties[uuid]=map;}return map;};this.delete=function(object){delete properties[object.uuid];};this.clear=function(){properties={};};};// File:src/renderers/webgl/WebGLShader.js\nTHREE.WebGLShader=function(){function addLineNumbers(string){var lines=string.split('\\n');for(var i=0;i<lines.length;i++){lines[i]=i+1+': '+lines[i];}return lines.join('\\n');}return function WebGLShader(gl,type,string){var shader=gl.createShader(type);gl.shaderSource(shader,string);gl.compileShader(shader);if(gl.getShaderParameter(shader,gl.COMPILE_STATUS)===false){console.error('THREE.WebGLShader: Shader couldn\\'t compile.');}if(gl.getShaderInfoLog(shader)!==''){console.warn('THREE.WebGLShader: gl.getShaderInfoLog()',type===gl.VERTEX_SHADER?'vertex':'fragment',gl.getShaderInfoLog(shader),addLineNumbers(string));}// --enable-privileged-webgl-extension\n// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\nreturn shader;};}();// File:src/renderers/webgl/WebGLShadowMap.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.WebGLShadowMap=function(_renderer,_lights,_objects){var _gl=_renderer.context,_state=_renderer.state,_frustum=new THREE.Frustum(),_projScreenMatrix=new THREE.Matrix4(),_lightShadows=_lights.shadows,_shadowMapSize=new THREE.Vector2(),_lookTarget=new THREE.Vector3(),_lightPositionWorld=new THREE.Vector3(),_renderList=[],_MorphingFlag=1,_SkinningFlag=2,_NumberOfMaterialVariants=(_MorphingFlag|_SkinningFlag)+1,_depthMaterials=new Array(_NumberOfMaterialVariants),_distanceMaterials=new Array(_NumberOfMaterialVariants),_materialCache={};var cubeDirections=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)];var cubeUps=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)];var cube2DViewPorts=[new THREE.Vector4(),new THREE.Vector4(),new THREE.Vector4(),new THREE.Vector4(),new THREE.Vector4(),new THREE.Vector4()];// init\nvar depthMaterialTemplate=new THREE.MeshDepthMaterial();depthMaterialTemplate.depthPacking=THREE.RGBADepthPacking;depthMaterialTemplate.clipping=true;var distanceShader=THREE.ShaderLib[\"distanceRGBA\"];var distanceUniforms=THREE.UniformsUtils.clone(distanceShader.uniforms);for(var i=0;i!==_NumberOfMaterialVariants;++i){var useMorphing=(i&_MorphingFlag)!==0;var useSkinning=(i&_SkinningFlag)!==0;var depthMaterial=depthMaterialTemplate.clone();depthMaterial.morphTargets=useMorphing;depthMaterial.skinning=useSkinning;_depthMaterials[i]=depthMaterial;var distanceMaterial=new THREE.ShaderMaterial({defines:{'USE_SHADOWMAP':''},uniforms:distanceUniforms,vertexShader:distanceShader.vertexShader,fragmentShader:distanceShader.fragmentShader,morphTargets:useMorphing,skinning:useSkinning,clipping:true});_distanceMaterials[i]=distanceMaterial;}//\nvar scope=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=THREE.PCFShadowMap;this.renderReverseSided=true;this.renderSingleSided=true;this.render=function(scene,camera){if(scope.enabled===false)return;if(scope.autoUpdate===false&&scope.needsUpdate===false)return;if(_lightShadows.length===0)return;// Set GL state for depth map.\n_state.clearColor(1,1,1,1);_state.disable(_gl.BLEND);_state.setDepthTest(true);_state.setScissorTest(false);// render depth map\nvar faceCount,isPointLight;for(var i=0,il=_lightShadows.length;i<il;i++){var light=_lightShadows[i];var shadow=light.shadow;if(shadow===undefined){console.warn('THREE.WebGLShadowMap:',light,'has no shadow.');continue;}var shadowCamera=shadow.camera;_shadowMapSize.copy(shadow.mapSize);if(light instanceof THREE.PointLight){faceCount=6;isPointLight=true;var vpWidth=_shadowMapSize.x;var vpHeight=_shadowMapSize.y;// These viewports map a cube-map onto a 2D texture with the\n// following orientation:\n//\n//  xzXZ\n//   y Y\n//\n// X - Positive x direction\n// x - Negative x direction\n// Y - Positive y direction\n// y - Negative y direction\n// Z - Positive z direction\n// z - Negative z direction\n// positive X\ncube2DViewPorts[0].set(vpWidth*2,vpHeight,vpWidth,vpHeight);// negative X\ncube2DViewPorts[1].set(0,vpHeight,vpWidth,vpHeight);// positive Z\ncube2DViewPorts[2].set(vpWidth*3,vpHeight,vpWidth,vpHeight);// negative Z\ncube2DViewPorts[3].set(vpWidth,vpHeight,vpWidth,vpHeight);// positive Y\ncube2DViewPorts[4].set(vpWidth*3,0,vpWidth,vpHeight);// negative Y\ncube2DViewPorts[5].set(vpWidth,0,vpWidth,vpHeight);_shadowMapSize.x*=4.0;_shadowMapSize.y*=2.0;}else{faceCount=1;isPointLight=false;}if(shadow.map===null){var pars={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat};shadow.map=new THREE.WebGLRenderTarget(_shadowMapSize.x,_shadowMapSize.y,pars);shadowCamera.updateProjectionMatrix();}if(shadow instanceof THREE.SpotLightShadow){shadow.update(light);}var shadowMap=shadow.map;var shadowMatrix=shadow.matrix;_lightPositionWorld.setFromMatrixPosition(light.matrixWorld);shadowCamera.position.copy(_lightPositionWorld);_renderer.setRenderTarget(shadowMap);_renderer.clear();// render shadow map for each cube face (if omni-directional) or\n// run a single pass if not\nfor(var face=0;face<faceCount;face++){if(isPointLight){_lookTarget.copy(shadowCamera.position);_lookTarget.add(cubeDirections[face]);shadowCamera.up.copy(cubeUps[face]);shadowCamera.lookAt(_lookTarget);var vpDimensions=cube2DViewPorts[face];_state.viewport(vpDimensions);}else{_lookTarget.setFromMatrixPosition(light.target.matrixWorld);shadowCamera.lookAt(_lookTarget);}shadowCamera.updateMatrixWorld();shadowCamera.matrixWorldInverse.getInverse(shadowCamera.matrixWorld);// compute shadow matrix\nshadowMatrix.set(0.5,0.0,0.0,0.5,0.0,0.5,0.0,0.5,0.0,0.0,0.5,0.5,0.0,0.0,0.0,1.0);shadowMatrix.multiply(shadowCamera.projectionMatrix);shadowMatrix.multiply(shadowCamera.matrixWorldInverse);// update camera matrices and frustum\n_projScreenMatrix.multiplyMatrices(shadowCamera.projectionMatrix,shadowCamera.matrixWorldInverse);_frustum.setFromMatrix(_projScreenMatrix);// set object matrices & frustum culling\n_renderList.length=0;projectObject(scene,camera,shadowCamera);// render shadow map\n// render regular objects\nfor(var j=0,jl=_renderList.length;j<jl;j++){var object=_renderList[j];var geometry=_objects.update(object);var material=object.material;if(material instanceof THREE.MultiMaterial){var groups=geometry.groups;var materials=material.materials;for(var k=0,kl=groups.length;k<kl;k++){var group=groups[k];var groupMaterial=materials[group.materialIndex];if(groupMaterial.visible===true){var depthMaterial=getDepthMaterial(object,groupMaterial,isPointLight,_lightPositionWorld);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,group);}}}else{var depthMaterial=getDepthMaterial(object,material,isPointLight,_lightPositionWorld);_renderer.renderBufferDirect(shadowCamera,null,geometry,depthMaterial,object,null);}}}}// Restore GL state.\nvar clearColor=_renderer.getClearColor(),clearAlpha=_renderer.getClearAlpha();_renderer.setClearColor(clearColor,clearAlpha);scope.needsUpdate=false;};function getDepthMaterial(object,material,isPointLight,lightPositionWorld){var geometry=object.geometry;var result=null;var materialVariants=_depthMaterials;var customMaterial=object.customDepthMaterial;if(isPointLight){materialVariants=_distanceMaterials;customMaterial=object.customDistanceMaterial;}if(!customMaterial){var useMorphing=geometry.morphTargets!==undefined&&geometry.morphTargets.length>0&&material.morphTargets;var useSkinning=object instanceof THREE.SkinnedMesh&&material.skinning;var variantIndex=0;if(useMorphing)variantIndex|=_MorphingFlag;if(useSkinning)variantIndex|=_SkinningFlag;result=materialVariants[variantIndex];}else{result=customMaterial;}if(_renderer.localClippingEnabled&&material.clipShadows===true&&material.clippingPlanes.length!==0){// in this case we need a unique material instance reflecting the\n// appropriate state\nvar keyA=result.uuid,keyB=material.uuid;var materialsForVariant=_materialCache[keyA];if(materialsForVariant===undefined){materialsForVariant={};_materialCache[keyA]=materialsForVariant;}var cachedMaterial=materialsForVariant[keyB];if(cachedMaterial===undefined){cachedMaterial=result.clone();materialsForVariant[keyB]=cachedMaterial;}result=cachedMaterial;}result.visible=material.visible;result.wireframe=material.wireframe;var side=material.side;if(scope.renderSingleSided&&side==THREE.DoubleSide){side=THREE.FrontSide;}if(scope.renderReverseSided){if(side===THREE.FrontSide)side=THREE.BackSide;else if(side===THREE.BackSide)side=THREE.FrontSide;}result.side=side;result.clipShadows=material.clipShadows;result.clippingPlanes=material.clippingPlanes;result.wireframeLinewidth=material.wireframeLinewidth;result.linewidth=material.linewidth;if(isPointLight&&result.uniforms.lightPos!==undefined){result.uniforms.lightPos.value.copy(lightPositionWorld);}return result;}function projectObject(object,camera,shadowCamera){if(object.visible===false)return;if(object.layers.test(camera.layers)&&(object instanceof THREE.Mesh||object instanceof THREE.Line||object instanceof THREE.Points)){if(object.castShadow&&(object.frustumCulled===false||_frustum.intersectsObject(object)===true)){var material=object.material;if(material.visible===true){object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse,object.matrixWorld);_renderList.push(object);}}}var children=object.children;for(var i=0,l=children.length;i<l;i++){projectObject(children[i],camera,shadowCamera);}}};// File:src/renderers/webgl/WebGLState.js\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/THREE.WebGLState=function(gl,extensions,paramThreeToGL){var _this=this;this.buffers={color:new THREE.WebGLColorBuffer(gl,this),depth:new THREE.WebGLDepthBuffer(gl,this),stencil:new THREE.WebGLStencilBuffer(gl,this)};var maxVertexAttributes=gl.getParameter(gl.MAX_VERTEX_ATTRIBS);var newAttributes=new Uint8Array(maxVertexAttributes);var enabledAttributes=new Uint8Array(maxVertexAttributes);var attributeDivisors=new Uint8Array(maxVertexAttributes);var capabilities={};var compressedTextureFormats=null;var currentBlending=null;var currentBlendEquation=null;var currentBlendSrc=null;var currentBlendDst=null;var currentBlendEquationAlpha=null;var currentBlendSrcAlpha=null;var currentBlendDstAlpha=null;var currentPremultipledAlpha=false;var currentFlipSided=null;var currentCullFace=null;var currentLineWidth=null;var currentPolygonOffsetFactor=null;var currentPolygonOffsetUnits=null;var currentScissorTest=null;var maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);var currentTextureSlot=null;var currentBoundTextures={};var currentScissor=new THREE.Vector4();var currentViewport=new THREE.Vector4();function createTexture(type,target,count){var data=new Uint8Array(3);var texture=gl.createTexture();gl.bindTexture(type,texture);gl.texParameteri(type,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(type,gl.TEXTURE_MAG_FILTER,gl.NEAREST);for(var i=0;i<count;i++){gl.texImage2D(target+i,0,gl.RGB,1,1,0,gl.RGB,gl.UNSIGNED_BYTE,data);}return texture;}var emptyTextures={};emptyTextures[gl.TEXTURE_2D]=createTexture(gl.TEXTURE_2D,gl.TEXTURE_2D,1);emptyTextures[gl.TEXTURE_CUBE_MAP]=createTexture(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_CUBE_MAP_POSITIVE_X,6);//\nthis.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(gl.DEPTH_TEST);this.setDepthFunc(THREE.LessEqualDepth);this.setFlipSided(false);this.setCullFace(THREE.CullFaceBack);this.enable(gl.CULL_FACE);this.enable(gl.BLEND);this.setBlending(THREE.NormalBlending);};this.initAttributes=function(){for(var i=0,l=newAttributes.length;i<l;i++){newAttributes[i]=0;}};this.enableAttribute=function(attribute){newAttributes[attribute]=1;if(enabledAttributes[attribute]===0){gl.enableVertexAttribArray(attribute);enabledAttributes[attribute]=1;}if(attributeDivisors[attribute]!==0){var extension=extensions.get('ANGLE_instanced_arrays');extension.vertexAttribDivisorANGLE(attribute,0);attributeDivisors[attribute]=0;}};this.enableAttributeAndDivisor=function(attribute,meshPerAttribute,extension){newAttributes[attribute]=1;if(enabledAttributes[attribute]===0){gl.enableVertexAttribArray(attribute);enabledAttributes[attribute]=1;}if(attributeDivisors[attribute]!==meshPerAttribute){extension.vertexAttribDivisorANGLE(attribute,meshPerAttribute);attributeDivisors[attribute]=meshPerAttribute;}};this.disableUnusedAttributes=function(){for(var i=0,l=enabledAttributes.length;i!==l;++i){if(enabledAttributes[i]!==newAttributes[i]){gl.disableVertexAttribArray(i);enabledAttributes[i]=0;}}};this.enable=function(id){if(capabilities[id]!==true){gl.enable(id);capabilities[id]=true;}};this.disable=function(id){if(capabilities[id]!==false){gl.disable(id);capabilities[id]=false;}};this.getCompressedTextureFormats=function(){if(compressedTextureFormats===null){compressedTextureFormats=[];if(extensions.get('WEBGL_compressed_texture_pvrtc')||extensions.get('WEBGL_compressed_texture_s3tc')||extensions.get('WEBGL_compressed_texture_etc1')){var formats=gl.getParameter(gl.COMPRESSED_TEXTURE_FORMATS);for(var i=0;i<formats.length;i++){compressedTextureFormats.push(formats[i]);}}}return compressedTextureFormats;};this.setBlending=function(blending,blendEquation,blendSrc,blendDst,blendEquationAlpha,blendSrcAlpha,blendDstAlpha,premultipliedAlpha){if(blending!==THREE.NoBlending){this.enable(gl.BLEND);}else{this.disable(gl.BLEND);currentBlending=blending;// no blending, that is\nreturn;}if(blending!==currentBlending||premultipliedAlpha!==currentPremultipledAlpha){if(blending===THREE.AdditiveBlending){if(premultipliedAlpha){gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD);gl.blendFuncSeparate(gl.ONE,gl.ONE,gl.ONE,gl.ONE);}else{gl.blendEquation(gl.FUNC_ADD);gl.blendFunc(gl.SRC_ALPHA,gl.ONE);}}else if(blending===THREE.SubtractiveBlending){if(premultipliedAlpha){gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD);gl.blendFuncSeparate(gl.ZERO,gl.ZERO,gl.ONE_MINUS_SRC_COLOR,gl.ONE_MINUS_SRC_ALPHA);}else{gl.blendEquation(gl.FUNC_ADD);gl.blendFunc(gl.ZERO,gl.ONE_MINUS_SRC_COLOR);}}else if(blending===THREE.MultiplyBlending){if(premultipliedAlpha){gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD);gl.blendFuncSeparate(gl.ZERO,gl.SRC_COLOR,gl.ZERO,gl.SRC_ALPHA);}else{gl.blendEquation(gl.FUNC_ADD);gl.blendFunc(gl.ZERO,gl.SRC_COLOR);}}else{if(premultipliedAlpha){gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD);gl.blendFuncSeparate(gl.ONE,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA);}else{gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD);gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA);}}currentBlending=blending;currentPremultipledAlpha=premultipliedAlpha;}if(blending===THREE.CustomBlending){blendEquationAlpha=blendEquationAlpha||blendEquation;blendSrcAlpha=blendSrcAlpha||blendSrc;blendDstAlpha=blendDstAlpha||blendDst;if(blendEquation!==currentBlendEquation||blendEquationAlpha!==currentBlendEquationAlpha){gl.blendEquationSeparate(paramThreeToGL(blendEquation),paramThreeToGL(blendEquationAlpha));currentBlendEquation=blendEquation;currentBlendEquationAlpha=blendEquationAlpha;}if(blendSrc!==currentBlendSrc||blendDst!==currentBlendDst||blendSrcAlpha!==currentBlendSrcAlpha||blendDstAlpha!==currentBlendDstAlpha){gl.blendFuncSeparate(paramThreeToGL(blendSrc),paramThreeToGL(blendDst),paramThreeToGL(blendSrcAlpha),paramThreeToGL(blendDstAlpha));currentBlendSrc=blendSrc;currentBlendDst=blendDst;currentBlendSrcAlpha=blendSrcAlpha;currentBlendDstAlpha=blendDstAlpha;}}else{currentBlendEquation=null;currentBlendSrc=null;currentBlendDst=null;currentBlendEquationAlpha=null;currentBlendSrcAlpha=null;currentBlendDstAlpha=null;}};// TODO Deprecate\nthis.setColorWrite=function(colorWrite){this.buffers.color.setMask(colorWrite);};this.setDepthTest=function(depthTest){this.buffers.depth.setTest(depthTest);};this.setDepthWrite=function(depthWrite){this.buffers.depth.setMask(depthWrite);};this.setDepthFunc=function(depthFunc){this.buffers.depth.setFunc(depthFunc);};this.setStencilTest=function(stencilTest){this.buffers.stencil.setTest(stencilTest);};this.setStencilWrite=function(stencilWrite){this.buffers.stencil.setMask(stencilWrite);};this.setStencilFunc=function(stencilFunc,stencilRef,stencilMask){this.buffers.stencil.setFunc(stencilFunc,stencilRef,stencilMask);};this.setStencilOp=function(stencilFail,stencilZFail,stencilZPass){this.buffers.stencil.setOp(stencilFail,stencilZFail,stencilZPass);};//\nthis.setFlipSided=function(flipSided){if(currentFlipSided!==flipSided){if(flipSided){gl.frontFace(gl.CW);}else{gl.frontFace(gl.CCW);}currentFlipSided=flipSided;}};this.setCullFace=function(cullFace){if(cullFace!==THREE.CullFaceNone){this.enable(gl.CULL_FACE);if(cullFace!==currentCullFace){if(cullFace===THREE.CullFaceBack){gl.cullFace(gl.BACK);}else if(cullFace===THREE.CullFaceFront){gl.cullFace(gl.FRONT);}else{gl.cullFace(gl.FRONT_AND_BACK);}}}else{this.disable(gl.CULL_FACE);}currentCullFace=cullFace;};this.setLineWidth=function(width){if(width!==currentLineWidth){gl.lineWidth(width);currentLineWidth=width;}};this.setPolygonOffset=function(polygonOffset,factor,units){if(polygonOffset){this.enable(gl.POLYGON_OFFSET_FILL);if(currentPolygonOffsetFactor!==factor||currentPolygonOffsetUnits!==units){gl.polygonOffset(factor,units);currentPolygonOffsetFactor=factor;currentPolygonOffsetUnits=units;}}else{this.disable(gl.POLYGON_OFFSET_FILL);}};this.getScissorTest=function(){return currentScissorTest;};this.setScissorTest=function(scissorTest){currentScissorTest=scissorTest;if(scissorTest){this.enable(gl.SCISSOR_TEST);}else{this.disable(gl.SCISSOR_TEST);}};// texture\nthis.activeTexture=function(webglSlot){if(webglSlot===undefined)webglSlot=gl.TEXTURE0+maxTextures-1;if(currentTextureSlot!==webglSlot){gl.activeTexture(webglSlot);currentTextureSlot=webglSlot;}};this.bindTexture=function(webglType,webglTexture){if(currentTextureSlot===null){_this.activeTexture();}var boundTexture=currentBoundTextures[currentTextureSlot];if(boundTexture===undefined){boundTexture={type:undefined,texture:undefined};currentBoundTextures[currentTextureSlot]=boundTexture;}if(boundTexture.type!==webglType||boundTexture.texture!==webglTexture){gl.bindTexture(webglType,webglTexture||emptyTextures[webglType]);boundTexture.type=webglType;boundTexture.texture=webglTexture;}};this.compressedTexImage2D=function(){try{gl.compressedTexImage2D.apply(gl,arguments);}catch(error){console.error(error);}};this.texImage2D=function(){try{gl.texImage2D.apply(gl,arguments);}catch(error){console.error(error);}};// TODO Deprecate\nthis.clearColor=function(r,g,b,a){this.buffers.color.setClear(r,g,b,a);};this.clearDepth=function(depth){this.buffers.depth.setClear(depth);};this.clearStencil=function(stencil){this.buffers.stencil.setClear(stencil);};//\nthis.scissor=function(scissor){if(currentScissor.equals(scissor)===false){gl.scissor(scissor.x,scissor.y,scissor.z,scissor.w);currentScissor.copy(scissor);}};this.viewport=function(viewport){if(currentViewport.equals(viewport)===false){gl.viewport(viewport.x,viewport.y,viewport.z,viewport.w);currentViewport.copy(viewport);}};//\nthis.reset=function(){for(var i=0;i<enabledAttributes.length;i++){if(enabledAttributes[i]===1){gl.disableVertexAttribArray(i);enabledAttributes[i]=0;}}capabilities={};compressedTextureFormats=null;currentTextureSlot=null;currentBoundTextures={};currentBlending=null;currentFlipSided=null;currentCullFace=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset();};};THREE.WebGLColorBuffer=function(gl,state){var locked=false;var color=new THREE.Vector4();var currentColorMask=null;var currentColorClear=new THREE.Vector4();this.setMask=function(colorMask){if(currentColorMask!==colorMask&&!locked){gl.colorMask(colorMask,colorMask,colorMask,colorMask);currentColorMask=colorMask;}};this.setLocked=function(lock){locked=lock;};this.setClear=function(r,g,b,a){color.set(r,g,b,a);if(currentColorClear.equals(color)===false){gl.clearColor(r,g,b,a);currentColorClear.copy(color);}};this.reset=function(){locked=false;currentColorMask=null;currentColorClear=new THREE.Vector4();};};THREE.WebGLDepthBuffer=function(gl,state){var locked=false;var currentDepthMask=null;var currentDepthFunc=null;var currentDepthClear=null;this.setTest=function(depthTest){if(depthTest){state.enable(gl.DEPTH_TEST);}else{state.disable(gl.DEPTH_TEST);}};this.setMask=function(depthMask){if(currentDepthMask!==depthMask&&!locked){gl.depthMask(depthMask);currentDepthMask=depthMask;}};this.setFunc=function(depthFunc){if(currentDepthFunc!==depthFunc){if(depthFunc){switch(depthFunc){case THREE.NeverDepth:gl.depthFunc(gl.NEVER);break;case THREE.AlwaysDepth:gl.depthFunc(gl.ALWAYS);break;case THREE.LessDepth:gl.depthFunc(gl.LESS);break;case THREE.LessEqualDepth:gl.depthFunc(gl.LEQUAL);break;case THREE.EqualDepth:gl.depthFunc(gl.EQUAL);break;case THREE.GreaterEqualDepth:gl.depthFunc(gl.GEQUAL);break;case THREE.GreaterDepth:gl.depthFunc(gl.GREATER);break;case THREE.NotEqualDepth:gl.depthFunc(gl.NOTEQUAL);break;default:gl.depthFunc(gl.LEQUAL);}}else{gl.depthFunc(gl.LEQUAL);}currentDepthFunc=depthFunc;}};this.setLocked=function(lock){locked=lock;};this.setClear=function(depth){if(currentDepthClear!==depth){gl.clearDepth(depth);currentDepthClear=depth;}};this.reset=function(){locked=false;currentDepthMask=null;currentDepthFunc=null;currentDepthClear=null;};};THREE.WebGLStencilBuffer=function(gl,state){var locked=false;var currentStencilMask=null;var currentStencilFunc=null;var currentStencilRef=null;var currentStencilFuncMask=null;var currentStencilFail=null;var currentStencilZFail=null;var currentStencilZPass=null;var currentStencilClear=null;this.setTest=function(stencilTest){if(stencilTest){state.enable(gl.STENCIL_TEST);}else{state.disable(gl.STENCIL_TEST);}};this.setMask=function(stencilMask){if(currentStencilMask!==stencilMask&&!locked){gl.stencilMask(stencilMask);currentStencilMask=stencilMask;}};this.setFunc=function(stencilFunc,stencilRef,stencilMask){if(currentStencilFunc!==stencilFunc||currentStencilRef!==stencilRef||currentStencilFuncMask!==stencilMask){gl.stencilFunc(stencilFunc,stencilRef,stencilMask);currentStencilFunc=stencilFunc;currentStencilRef=stencilRef;currentStencilFuncMask=stencilMask;}};this.setOp=function(stencilFail,stencilZFail,stencilZPass){if(currentStencilFail!==stencilFail||currentStencilZFail!==stencilZFail||currentStencilZPass!==stencilZPass){gl.stencilOp(stencilFail,stencilZFail,stencilZPass);currentStencilFail=stencilFail;currentStencilZFail=stencilZFail;currentStencilZPass=stencilZPass;}};this.setLocked=function(lock){locked=lock;};this.setClear=function(stencil){if(currentStencilClear!==stencil){gl.clearStencil(stencil);currentStencilClear=stencil;}};this.reset=function(){locked=false;currentStencilMask=null;currentStencilFunc=null;currentStencilRef=null;currentStencilFuncMask=null;currentStencilFail=null;currentStencilZFail=null;currentStencilZPass=null;currentStencilClear=null;};};// File:src/renderers/webgl/WebGLUniforms.js\n/**\r\n *\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [renderer] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'renderer' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (renderer factorizations):\r\n *\r\n * .upload( gl, seq, values, renderer )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n * .splitDynamic( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with dynamic entry and removes them from 'seq'\r\n *\r\n *\r\n * Methods of the top-level container (renderer factorizations):\r\n *\r\n * .setValue( gl, name, value )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .set( gl, obj, prop )\r\n *\r\n * \t\tsets uniform from object and property with same name than uniform\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n *\r\n * @author tschw\r\n *\r\n */THREE.WebGLUniforms=function(){// scope\n// --- Base for inner nodes (including the root) ---\nvar UniformContainer=function(){this.seq=[];this.map={};},// --- Utilities ---\n// Array Caches (provide typed arrays for temporary by size)\narrayCacheF32=[],arrayCacheI32=[],uncacheTemporaryArrays=function(){arrayCacheF32.length=0;arrayCacheI32.length=0;},// Flattening for arrays of vectors and matrices\nflatten=function(array,nBlocks,blockSize){var firstElem=array[0];if(firstElem<=0||firstElem>0)return array;// unoptimized: ! isNaN( firstElem )\n// see http://jacksondunstan.com/articles/983\nvar n=nBlocks*blockSize,r=arrayCacheF32[n];if(r===undefined){r=new Float32Array(n);arrayCacheF32[n]=r;}if(nBlocks!==0){firstElem.toArray(r,0);for(var i=1,offset=0;i!==nBlocks;++i){offset+=blockSize;array[i].toArray(r,offset);}}return r;},// Texture unit allocation\nallocTexUnits=function(renderer,n){var r=arrayCacheI32[n];if(r===undefined){r=new Int32Array(n);arrayCacheI32[n]=r;}for(var i=0;i!==n;++i)r[i]=renderer.allocTextureUnit();return r;},// --- Setters ---\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n// Single scalar\nsetValue1f=function(gl,v){gl.uniform1f(this.addr,v);},setValue1i=function(gl,v){gl.uniform1i(this.addr,v);},// Single float vector (from flat array or THREE.VectorN)\nsetValue2fv=function(gl,v){if(v.x===undefined)gl.uniform2fv(this.addr,v);else gl.uniform2f(this.addr,v.x,v.y);},setValue3fv=function(gl,v){if(v.x!==undefined)gl.uniform3f(this.addr,v.x,v.y,v.z);else if(v.r!==undefined)gl.uniform3f(this.addr,v.r,v.g,v.b);else gl.uniform3fv(this.addr,v);},setValue4fv=function(gl,v){if(v.x===undefined)gl.uniform4fv(this.addr,v);else gl.uniform4f(this.addr,v.x,v.y,v.z,v.w);},// Single matrix (from flat array or MatrixN)\nsetValue2fm=function(gl,v){gl.uniformMatrix2fv(this.addr,false,v.elements||v);},setValue3fm=function(gl,v){gl.uniformMatrix3fv(this.addr,false,v.elements||v);},setValue4fm=function(gl,v){gl.uniformMatrix4fv(this.addr,false,v.elements||v);},// Single texture (2D / Cube)\nsetValueT1=function(gl,v,renderer){var unit=renderer.allocTextureUnit();gl.uniform1i(this.addr,unit);if(v)renderer.setTexture2D(v,unit);},setValueT6=function(gl,v,renderer){var unit=renderer.allocTextureUnit();gl.uniform1i(this.addr,unit);if(v)renderer.setTextureCube(v,unit);},// Integer / Boolean vectors or arrays thereof (always flat arrays)\nsetValue2iv=function(gl,v){gl.uniform2iv(this.addr,v);},setValue3iv=function(gl,v){gl.uniform3iv(this.addr,v);},setValue4iv=function(gl,v){gl.uniform4iv(this.addr,v);},// Helper to pick the right setter for the singular case\ngetSingularSetter=function(type){switch(type){case 0x1406:return setValue1f;// FLOAT\ncase 0x8b50:return setValue2fv;// _VEC2\ncase 0x8b51:return setValue3fv;// _VEC3\ncase 0x8b52:return setValue4fv;// _VEC4\ncase 0x8b5a:return setValue2fm;// _MAT2\ncase 0x8b5b:return setValue3fm;// _MAT3\ncase 0x8b5c:return setValue4fm;// _MAT4\ncase 0x8b5e:return setValueT1;// SAMPLER_2D\ncase 0x8b60:return setValueT6;// SAMPLER_CUBE\ncase 0x1404:case 0x8b56:return setValue1i;// INT, BOOL\ncase 0x8b53:case 0x8b57:return setValue2iv;// _VEC2\ncase 0x8b54:case 0x8b58:return setValue3iv;// _VEC3\ncase 0x8b55:case 0x8b59:return setValue4iv;// _VEC4\n}},// Array of scalars\nsetValue1fv=function(gl,v){gl.uniform1fv(this.addr,v);},setValue1iv=function(gl,v){gl.uniform1iv(this.addr,v);},// Array of vectors (flat or from THREE classes)\nsetValueV2a=function(gl,v){gl.uniform2fv(this.addr,flatten(v,this.size,2));},setValueV3a=function(gl,v){gl.uniform3fv(this.addr,flatten(v,this.size,3));},setValueV4a=function(gl,v){gl.uniform4fv(this.addr,flatten(v,this.size,4));},// Array of matrices (flat or from THREE clases)\nsetValueM2a=function(gl,v){gl.uniformMatrix2fv(this.addr,false,flatten(v,this.size,4));},setValueM3a=function(gl,v){gl.uniformMatrix3fv(this.addr,false,flatten(v,this.size,9));},setValueM4a=function(gl,v){gl.uniformMatrix4fv(this.addr,false,flatten(v,this.size,16));},// Array of textures (2D / Cube)\nsetValueT1a=function(gl,v,renderer){var n=v.length,units=allocTexUnits(renderer,n);gl.uniform1iv(this.addr,units);for(var i=0;i!==n;++i){var tex=v[i];if(tex)renderer.setTexture2D(tex,units[i]);}},setValueT6a=function(gl,v,renderer){var n=v.length,units=allocTexUnits(renderer,n);gl.uniform1iv(this.addr,units);for(var i=0;i!==n;++i){var tex=v[i];if(tex)renderer.setTextureCube(tex,units[i]);}},// Helper to pick the right setter for a pure (bottom-level) array\ngetPureArraySetter=function(type){switch(type){case 0x1406:return setValue1fv;// FLOAT\ncase 0x8b50:return setValueV2a;// _VEC2\ncase 0x8b51:return setValueV3a;// _VEC3\ncase 0x8b52:return setValueV4a;// _VEC4\ncase 0x8b5a:return setValueM2a;// _MAT2\ncase 0x8b5b:return setValueM3a;// _MAT3\ncase 0x8b5c:return setValueM4a;// _MAT4\ncase 0x8b5e:return setValueT1a;// SAMPLER_2D\ncase 0x8b60:return setValueT6a;// SAMPLER_CUBE\ncase 0x1404:case 0x8b56:return setValue1iv;// INT, BOOL\ncase 0x8b53:case 0x8b57:return setValue2iv;// _VEC2\ncase 0x8b54:case 0x8b58:return setValue3iv;// _VEC3\ncase 0x8b55:case 0x8b59:return setValue4iv;// _VEC4\n}},// --- Uniform Classes ---\nSingleUniform=function SingleUniform(id,activeInfo,addr){this.id=id;this.addr=addr;this.setValue=getSingularSetter(activeInfo.type);// this.path = activeInfo.name; // DEBUG\n},PureArrayUniform=function(id,activeInfo,addr){this.id=id;this.addr=addr;this.size=activeInfo.size;this.setValue=getPureArraySetter(activeInfo.type);// this.path = activeInfo.name; // DEBUG\n},StructuredUniform=function(id){this.id=id;UniformContainer.call(this);// mix-in\n};StructuredUniform.prototype.setValue=function(gl,value){// Note: Don't need an extra 'renderer' parameter, since samplers\n// are not allowed in structured uniforms.\nvar seq=this.seq;for(var i=0,n=seq.length;i!==n;++i){var u=seq[i];u.setValue(gl,value[u.id]);}};// --- Top-level ---\n// Parser - builds up the property tree from the path strings\nvar RePathPart=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g,// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\naddUniform=function(container,uniformObject){container.seq.push(uniformObject);container.map[uniformObject.id]=uniformObject;},parseUniform=function(activeInfo,addr,container){var path=activeInfo.name,pathLength=path.length;// reset RegExp object, because of the early exit of a previous run\nRePathPart.lastIndex=0;for(;;){var match=RePathPart.exec(path),matchEnd=RePathPart.lastIndex,id=match[1],idIsIndex=match[2]===']',subscript=match[3];if(idIsIndex)id=id|0;// convert to integer\nif(subscript===undefined||subscript==='['&&matchEnd+2===pathLength){// bare name or \"pure\" bottom-level array \"[0]\" suffix\naddUniform(container,subscript===undefined?new SingleUniform(id,activeInfo,addr):new PureArrayUniform(id,activeInfo,addr));break;}else{// step into inner node / create it in case it doesn't exist\nvar map=container.map,next=map[id];if(next===undefined){next=new StructuredUniform(id);addUniform(container,next);}container=next;}}},// Root Container\nWebGLUniforms=function WebGLUniforms(gl,program,renderer){UniformContainer.call(this);this.renderer=renderer;var n=gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS);for(var i=0;i!==n;++i){var info=gl.getActiveUniform(program,i),path=info.name,addr=gl.getUniformLocation(program,path);parseUniform(info,addr,this);}};WebGLUniforms.prototype.setValue=function(gl,name,value){var u=this.map[name];if(u!==undefined)u.setValue(gl,value,this.renderer);};WebGLUniforms.prototype.set=function(gl,object,name){var u=this.map[name];if(u!==undefined)u.setValue(gl,object[name],this.renderer);};WebGLUniforms.prototype.setOptional=function(gl,object,name){var v=object[name];if(v!==undefined)this.setValue(gl,name,v);};// Static interface\nWebGLUniforms.upload=function(gl,seq,values,renderer){for(var i=0,n=seq.length;i!==n;++i){var u=seq[i],v=values[u.id];if(v.needsUpdate!==false){// note: always updating when .needsUpdate is undefined\nu.setValue(gl,v.value,renderer);}}};WebGLUniforms.seqWithValue=function(seq,values){var r=[];for(var i=0,n=seq.length;i!==n;++i){var u=seq[i];if(u.id in values)r.push(u);}return r;};WebGLUniforms.splitDynamic=function(seq,values){var r=null,n=seq.length,w=0;for(var i=0;i!==n;++i){var u=seq[i],v=values[u.id];if(v&&v.dynamic===true){if(r===null)r=[];r.push(u);}else{// in-place compact 'seq', removing the matches\nif(w<i)seq[w]=u;++w;}}if(w<n)seq.length=w;return r;};WebGLUniforms.evalDynamic=function(seq,values,object,camera){for(var i=0,n=seq.length;i!==n;++i){var v=values[seq[i].id],f=v.onUpdateCallback;if(f!==undefined)f.call(v,object,camera);}};return WebGLUniforms;}();// File:src/renderers/webgl/plugins/LensFlarePlugin.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.LensFlarePlugin=function(renderer,flares){var gl=renderer.context;var state=renderer.state;var vertexBuffer,elementBuffer;var shader,program,attributes,uniforms;var tempTexture,occlusionTexture;function init(){var vertices=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var faces=new Uint16Array([0,1,2,0,2,3]);// buffers\nvertexBuffer=gl.createBuffer();elementBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,faces,gl.STATIC_DRAW);// textures\ntempTexture=gl.createTexture();occlusionTexture=gl.createTexture();state.bindTexture(gl.TEXTURE_2D,tempTexture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,16,16,0,gl.RGB,gl.UNSIGNED_BYTE,null);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);state.bindTexture(gl.TEXTURE_2D,occlusionTexture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,16,16,0,gl.RGBA,gl.UNSIGNED_BYTE,null);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);shader={vertexShader:[\"uniform lowp int renderType;\",\"uniform vec3 screenPosition;\",\"uniform vec2 scale;\",\"uniform float rotation;\",\"uniform sampler2D occlusionMap;\",\"attribute vec2 position;\",\"attribute vec2 uv;\",\"varying vec2 vUV;\",\"varying float vVisibility;\",\"void main() {\",\"vUV = uv;\",\"vec2 pos = position;\",\"if ( renderType == 2 ) {\",\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\"vVisibility =        visibility.r / 9.0;\",\"vVisibility *= 1.0 - visibility.g / 9.0;\",\"vVisibility *=       visibility.b / 9.0;\",\"vVisibility *= 1.0 - visibility.a / 9.0;\",\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\"}\",\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"uniform lowp int renderType;\",\"uniform sampler2D map;\",\"uniform float opacity;\",\"uniform vec3 color;\",\"varying vec2 vUV;\",\"varying float vVisibility;\",\"void main() {\",// pink square\n\"if ( renderType == 0 ) {\",\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",// restore\n\"} else if ( renderType == 1 ) {\",\"gl_FragColor = texture2D( map, vUV );\",// flare\n\"} else {\",\"vec4 texture = texture2D( map, vUV );\",\"texture.a *= opacity * vVisibility;\",\"gl_FragColor = texture;\",\"gl_FragColor.rgb *= color;\",\"}\",\"}\"].join(\"\\n\")};program=createProgram(shader);attributes={vertex:gl.getAttribLocation(program,\"position\"),uv:gl.getAttribLocation(program,\"uv\")};uniforms={renderType:gl.getUniformLocation(program,\"renderType\"),map:gl.getUniformLocation(program,\"map\"),occlusionMap:gl.getUniformLocation(program,\"occlusionMap\"),opacity:gl.getUniformLocation(program,\"opacity\"),color:gl.getUniformLocation(program,\"color\"),scale:gl.getUniformLocation(program,\"scale\"),rotation:gl.getUniformLocation(program,\"rotation\"),screenPosition:gl.getUniformLocation(program,\"screenPosition\")};}/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */this.render=function(scene,camera,viewport){if(flares.length===0)return;var tempPosition=new THREE.Vector3();var invAspect=viewport.w/viewport.z,halfViewportWidth=viewport.z*0.5,halfViewportHeight=viewport.w*0.5;var size=16/viewport.w,scale=new THREE.Vector2(size*invAspect,size);var screenPosition=new THREE.Vector3(1,1,0),screenPositionPixels=new THREE.Vector2(1,1);var validArea=new THREE.Box2();validArea.min.set(0,0);validArea.max.set(viewport.z-16,viewport.w-16);if(program===undefined){init();}gl.useProgram(program);state.initAttributes();state.enableAttribute(attributes.vertex);state.enableAttribute(attributes.uv);state.disableUnusedAttributes();// loop through all lens flares to update their occlusion and positions\n// setup gl and common used attribs/uniforms\ngl.uniform1i(uniforms.occlusionMap,0);gl.uniform1i(uniforms.map,1);gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.vertexAttribPointer(attributes.vertex,2,gl.FLOAT,false,2*8,0);gl.vertexAttribPointer(attributes.uv,2,gl.FLOAT,false,2*8,8);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer);state.disable(gl.CULL_FACE);state.setDepthWrite(false);for(var i=0,l=flares.length;i<l;i++){size=16/viewport.w;scale.set(size*invAspect,size);// calc object screen position\nvar flare=flares[i];tempPosition.set(flare.matrixWorld.elements[12],flare.matrixWorld.elements[13],flare.matrixWorld.elements[14]);tempPosition.applyMatrix4(camera.matrixWorldInverse);tempPosition.applyProjection(camera.projectionMatrix);// setup arrays for gl programs\nscreenPosition.copy(tempPosition);// horizontal and vertical coordinate of the lower left corner of the pixels to copy\nscreenPositionPixels.x=viewport.x+screenPosition.x*halfViewportWidth+halfViewportWidth-8;screenPositionPixels.y=viewport.y+screenPosition.y*halfViewportHeight+halfViewportHeight-8;// screen cull\nif(validArea.containsPoint(screenPositionPixels)===true){// save current RGB to temp texture\nstate.activeTexture(gl.TEXTURE0);state.bindTexture(gl.TEXTURE_2D,null);state.activeTexture(gl.TEXTURE1);state.bindTexture(gl.TEXTURE_2D,tempTexture);gl.copyTexImage2D(gl.TEXTURE_2D,0,gl.RGB,screenPositionPixels.x,screenPositionPixels.y,16,16,0);// render pink quad\ngl.uniform1i(uniforms.renderType,0);gl.uniform2f(uniforms.scale,scale.x,scale.y);gl.uniform3f(uniforms.screenPosition,screenPosition.x,screenPosition.y,screenPosition.z);state.disable(gl.BLEND);state.enable(gl.DEPTH_TEST);gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);// copy result to occlusionMap\nstate.activeTexture(gl.TEXTURE0);state.bindTexture(gl.TEXTURE_2D,occlusionTexture);gl.copyTexImage2D(gl.TEXTURE_2D,0,gl.RGBA,screenPositionPixels.x,screenPositionPixels.y,16,16,0);// restore graphics\ngl.uniform1i(uniforms.renderType,1);state.disable(gl.DEPTH_TEST);state.activeTexture(gl.TEXTURE1);state.bindTexture(gl.TEXTURE_2D,tempTexture);gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);// update object positions\nflare.positionScreen.copy(screenPosition);if(flare.customUpdateCallback){flare.customUpdateCallback(flare);}else{flare.updateLensFlares();}// render flares\ngl.uniform1i(uniforms.renderType,2);state.enable(gl.BLEND);for(var j=0,jl=flare.lensFlares.length;j<jl;j++){var sprite=flare.lensFlares[j];if(sprite.opacity>0.001&&sprite.scale>0.001){screenPosition.x=sprite.x;screenPosition.y=sprite.y;screenPosition.z=sprite.z;size=sprite.size*sprite.scale/viewport.w;scale.x=size*invAspect;scale.y=size;gl.uniform3f(uniforms.screenPosition,screenPosition.x,screenPosition.y,screenPosition.z);gl.uniform2f(uniforms.scale,scale.x,scale.y);gl.uniform1f(uniforms.rotation,sprite.rotation);gl.uniform1f(uniforms.opacity,sprite.opacity);gl.uniform3f(uniforms.color,sprite.color.r,sprite.color.g,sprite.color.b);state.setBlending(sprite.blending,sprite.blendEquation,sprite.blendSrc,sprite.blendDst);renderer.setTexture2D(sprite.texture,1);gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);}}}}// restore gl\nstate.enable(gl.CULL_FACE);state.enable(gl.DEPTH_TEST);state.setDepthWrite(true);renderer.resetGLState();};function createProgram(shader){var program=gl.createProgram();var fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);var vertexShader=gl.createShader(gl.VERTEX_SHADER);var prefix=\"precision \"+renderer.getPrecision()+\" float;\\n\";gl.shaderSource(fragmentShader,prefix+shader.fragmentShader);gl.shaderSource(vertexShader,prefix+shader.vertexShader);gl.compileShader(fragmentShader);gl.compileShader(vertexShader);gl.attachShader(program,fragmentShader);gl.attachShader(program,vertexShader);gl.linkProgram(program);return program;}};// File:src/renderers/webgl/plugins/SpritePlugin.js\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.SpritePlugin=function(renderer,sprites){var gl=renderer.context;var state=renderer.state;var vertexBuffer,elementBuffer;var program,attributes,uniforms;var texture;// decompose matrixWorld\nvar spritePosition=new THREE.Vector3();var spriteRotation=new THREE.Quaternion();var spriteScale=new THREE.Vector3();function init(){var vertices=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]);var faces=new Uint16Array([0,1,2,0,2,3]);vertexBuffer=gl.createBuffer();elementBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,faces,gl.STATIC_DRAW);program=createProgram();attributes={position:gl.getAttribLocation(program,'position'),uv:gl.getAttribLocation(program,'uv')};uniforms={uvOffset:gl.getUniformLocation(program,'uvOffset'),uvScale:gl.getUniformLocation(program,'uvScale'),rotation:gl.getUniformLocation(program,'rotation'),scale:gl.getUniformLocation(program,'scale'),color:gl.getUniformLocation(program,'color'),map:gl.getUniformLocation(program,'map'),opacity:gl.getUniformLocation(program,'opacity'),modelViewMatrix:gl.getUniformLocation(program,'modelViewMatrix'),projectionMatrix:gl.getUniformLocation(program,'projectionMatrix'),fogType:gl.getUniformLocation(program,'fogType'),fogDensity:gl.getUniformLocation(program,'fogDensity'),fogNear:gl.getUniformLocation(program,'fogNear'),fogFar:gl.getUniformLocation(program,'fogFar'),fogColor:gl.getUniformLocation(program,'fogColor'),alphaTest:gl.getUniformLocation(program,'alphaTest')};var canvas=document.createElement('canvas');canvas.width=8;canvas.height=8;var context=canvas.getContext('2d');context.fillStyle='white';context.fillRect(0,0,8,8);texture=new THREE.Texture(canvas);texture.needsUpdate=true;}this.render=function(scene,camera){if(sprites.length===0)return;// setup gl\nif(program===undefined){init();}gl.useProgram(program);state.initAttributes();state.enableAttribute(attributes.position);state.enableAttribute(attributes.uv);state.disableUnusedAttributes();state.disable(gl.CULL_FACE);state.enable(gl.BLEND);gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.vertexAttribPointer(attributes.position,2,gl.FLOAT,false,2*8,0);gl.vertexAttribPointer(attributes.uv,2,gl.FLOAT,false,2*8,8);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer);gl.uniformMatrix4fv(uniforms.projectionMatrix,false,camera.projectionMatrix.elements);state.activeTexture(gl.TEXTURE0);gl.uniform1i(uniforms.map,0);var oldFogType=0;var sceneFogType=0;var fog=scene.fog;if(fog){gl.uniform3f(uniforms.fogColor,fog.color.r,fog.color.g,fog.color.b);if(fog instanceof THREE.Fog){gl.uniform1f(uniforms.fogNear,fog.near);gl.uniform1f(uniforms.fogFar,fog.far);gl.uniform1i(uniforms.fogType,1);oldFogType=1;sceneFogType=1;}else if(fog instanceof THREE.FogExp2){gl.uniform1f(uniforms.fogDensity,fog.density);gl.uniform1i(uniforms.fogType,2);oldFogType=2;sceneFogType=2;}}else{gl.uniform1i(uniforms.fogType,0);oldFogType=0;sceneFogType=0;}// update positions and sort\nfor(var i=0,l=sprites.length;i<l;i++){var sprite=sprites[i];sprite.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,sprite.matrixWorld);sprite.z=-sprite.modelViewMatrix.elements[14];}sprites.sort(painterSortStable);// render all sprites\nvar scale=[];for(var i=0,l=sprites.length;i<l;i++){var sprite=sprites[i];var material=sprite.material;gl.uniform1f(uniforms.alphaTest,material.alphaTest);gl.uniformMatrix4fv(uniforms.modelViewMatrix,false,sprite.modelViewMatrix.elements);sprite.matrixWorld.decompose(spritePosition,spriteRotation,spriteScale);scale[0]=spriteScale.x;scale[1]=spriteScale.y;var fogType=0;if(scene.fog&&material.fog){fogType=sceneFogType;}if(oldFogType!==fogType){gl.uniform1i(uniforms.fogType,fogType);oldFogType=fogType;}if(material.map!==null){gl.uniform2f(uniforms.uvOffset,material.map.offset.x,material.map.offset.y);gl.uniform2f(uniforms.uvScale,material.map.repeat.x,material.map.repeat.y);}else{gl.uniform2f(uniforms.uvOffset,0,0);gl.uniform2f(uniforms.uvScale,1,1);}gl.uniform1f(uniforms.opacity,material.opacity);gl.uniform3f(uniforms.color,material.color.r,material.color.g,material.color.b);gl.uniform1f(uniforms.rotation,material.rotation);gl.uniform2fv(uniforms.scale,scale);state.setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst);state.setDepthTest(material.depthTest);state.setDepthWrite(material.depthWrite);if(material.map){renderer.setTexture2D(material.map,0);}else{renderer.setTexture2D(texture,0);}gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);}// restore gl\nstate.enable(gl.CULL_FACE);renderer.resetGLState();};function createProgram(){var program=gl.createProgram();var vertexShader=gl.createShader(gl.VERTEX_SHADER);var fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(vertexShader,['precision '+renderer.getPrecision()+' float;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform float rotation;','uniform vec2 scale;','uniform vec2 uvOffset;','uniform vec2 uvScale;','attribute vec2 position;','attribute vec2 uv;','varying vec2 vUV;','void main() {','vUV = uvOffset + uv * uvScale;','vec2 alignedPosition = position * scale;','vec2 rotatedPosition;','rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;','rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;','vec4 finalPosition;','finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );','finalPosition.xy += rotatedPosition;','finalPosition = projectionMatrix * finalPosition;','gl_Position = finalPosition;','}'].join('\\n'));gl.shaderSource(fragmentShader,['precision '+renderer.getPrecision()+' float;','uniform vec3 color;','uniform sampler2D map;','uniform float opacity;','uniform int fogType;','uniform vec3 fogColor;','uniform float fogDensity;','uniform float fogNear;','uniform float fogFar;','uniform float alphaTest;','varying vec2 vUV;','void main() {','vec4 texture = texture2D( map, vUV );','if ( texture.a < alphaTest ) discard;','gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );','if ( fogType > 0 ) {','float depth = gl_FragCoord.z / gl_FragCoord.w;','float fogFactor = 0.0;','if ( fogType == 1 ) {','fogFactor = smoothstep( fogNear, fogFar, depth );','} else {','const float LOG2 = 1.442695;','fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );','fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );','}','gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );','}','}'].join('\\n'));gl.compileShader(vertexShader);gl.compileShader(fragmentShader);gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);return program;}function painterSortStable(a,b){if(a.renderOrder!==b.renderOrder){return a.renderOrder-b.renderOrder;}else if(a.z!==b.z){return b.z-a.z;}else{return b.id-a.id;}}};// File:src/Three.Legacy.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */Object.assign(THREE,{Face4:function(a,b,c,d,normal,color,materialIndex){console.warn('THREE.Face4 has been removed. A THREE.Face3 will be created instead.');return new THREE.Face3(a,b,c,normal,color,materialIndex);},LineStrip:0,LinePieces:1,MeshFaceMaterial:THREE.MultiMaterial,PointCloud:function(geometry,material){console.warn('THREE.PointCloud has been renamed to THREE.Points.');return new THREE.Points(geometry,material);},Particle:THREE.Sprite,ParticleSystem:function(geometry,material){console.warn('THREE.ParticleSystem has been renamed to THREE.Points.');return new THREE.Points(geometry,material);},PointCloudMaterial:function(parameters){console.warn('THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.');return new THREE.PointsMaterial(parameters);},ParticleBasicMaterial:function(parameters){console.warn('THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.');return new THREE.PointsMaterial(parameters);},ParticleSystemMaterial:function(parameters){console.warn('THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.');return new THREE.PointsMaterial(parameters);},Vertex:function(x,y,z){console.warn('THREE.Vertex has been removed. Use THREE.Vector3 instead.');return new THREE.Vector3(x,y,z);}});//\nObject.assign(THREE.Box2.prototype,{empty:function(){console.warn('THREE.Box2: .empty() has been renamed to .isEmpty().');return this.isEmpty();},isIntersectionBox:function(box){console.warn('THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().');return this.intersectsBox(box);}});Object.assign(THREE.Box3.prototype,{empty:function(){console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().');return this.isEmpty();},isIntersectionBox:function(box){console.warn('THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().');return this.intersectsBox(box);},isIntersectionSphere:function(sphere){console.warn('THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().');return this.intersectsSphere(sphere);}});Object.assign(THREE.Matrix3.prototype,{multiplyVector3:function(vector){console.warn('THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.');return vector.applyMatrix3(this);},multiplyVector3Array:function(a){console.warn('THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.');return this.applyToVector3Array(a);}});Object.assign(THREE.Matrix4.prototype,{extractPosition:function(m){console.warn('THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().');return this.copyPosition(m);},setRotationFromQuaternion:function(q){console.warn('THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().');return this.makeRotationFromQuaternion(q);},multiplyVector3:function(vector){console.warn('THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.');return vector.applyProjection(this);},multiplyVector4:function(vector){console.warn('THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.');return vector.applyMatrix4(this);},multiplyVector3Array:function(a){console.warn('THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.');return this.applyToVector3Array(a);},rotateAxis:function(v){console.warn('THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.');v.transformDirection(this);},crossVector:function(vector){console.warn('THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.');return vector.applyMatrix4(this);},translate:function(v){console.error('THREE.Matrix4: .translate() has been removed.');},rotateX:function(angle){console.error('THREE.Matrix4: .rotateX() has been removed.');},rotateY:function(angle){console.error('THREE.Matrix4: .rotateY() has been removed.');},rotateZ:function(angle){console.error('THREE.Matrix4: .rotateZ() has been removed.');},rotateByAxis:function(axis,angle){console.error('THREE.Matrix4: .rotateByAxis() has been removed.');}});Object.assign(THREE.Plane.prototype,{isIntersectionLine:function(line){console.warn('THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().');return this.intersectsLine(line);}});Object.assign(THREE.Quaternion.prototype,{multiplyVector3:function(vector){console.warn('THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.');return vector.applyQuaternion(this);}});Object.assign(THREE.Ray.prototype,{isIntersectionBox:function(box){console.warn('THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().');return this.intersectsBox(box);},isIntersectionPlane:function(plane){console.warn('THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().');return this.intersectsPlane(plane);},isIntersectionSphere:function(sphere){console.warn('THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().');return this.intersectsSphere(sphere);}});Object.assign(THREE.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error('THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.');},setEulerFromQuaternion:function(){console.error('THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.');},getPositionFromMatrix:function(m){console.warn('THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().');return this.setFromMatrixPosition(m);},getScaleFromMatrix:function(m){console.warn('THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().');return this.setFromMatrixScale(m);},getColumnFromMatrix:function(index,matrix){console.warn('THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().');return this.setFromMatrixColumn(matrix,index);}});//\nObject.assign(THREE.Object3D.prototype,{getChildByName:function(name){console.warn('THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().');return this.getObjectByName(name);},renderDepth:function(value){console.warn('THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.');},translate:function(distance,axis){console.warn('THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.');return this.translateOnAxis(axis,distance);}});Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');return this.rotation.order;},set:function(value){console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.');this.rotation.order=value;}},useQuaternion:{get:function(){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');},set:function(value){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.');}}});Object.defineProperties(THREE.LOD.prototype,{objects:{get:function(){console.warn('THREE.LOD: .objects has been renamed to .levels.');return this.levels;}}});//\nTHREE.PerspectiveCamera.prototype.setLens=function(focalLength,filmGauge){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. \"+\"Use .setFocalLength and .filmGauge for a photographic setup.\");if(filmGauge!==undefined)this.filmGauge=filmGauge;this.setFocalLength(focalLength);};//\nObject.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(value){console.warn('THREE.Light: .onlyShadow has been removed.');}},shadowCameraFov:{set:function(value){console.warn('THREE.Light: .shadowCameraFov is now .shadow.camera.fov.');this.shadow.camera.fov=value;}},shadowCameraLeft:{set:function(value){console.warn('THREE.Light: .shadowCameraLeft is now .shadow.camera.left.');this.shadow.camera.left=value;}},shadowCameraRight:{set:function(value){console.warn('THREE.Light: .shadowCameraRight is now .shadow.camera.right.');this.shadow.camera.right=value;}},shadowCameraTop:{set:function(value){console.warn('THREE.Light: .shadowCameraTop is now .shadow.camera.top.');this.shadow.camera.top=value;}},shadowCameraBottom:{set:function(value){console.warn('THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.');this.shadow.camera.bottom=value;}},shadowCameraNear:{set:function(value){console.warn('THREE.Light: .shadowCameraNear is now .shadow.camera.near.');this.shadow.camera.near=value;}},shadowCameraFar:{set:function(value){console.warn('THREE.Light: .shadowCameraFar is now .shadow.camera.far.');this.shadow.camera.far=value;}},shadowCameraVisible:{set:function(value){console.warn('THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.');}},shadowBias:{set:function(value){console.warn('THREE.Light: .shadowBias is now .shadow.bias.');this.shadow.bias=value;}},shadowDarkness:{set:function(value){console.warn('THREE.Light: .shadowDarkness has been removed.');}},shadowMapWidth:{set:function(value){console.warn('THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.');this.shadow.mapSize.width=value;}},shadowMapHeight:{set:function(value){console.warn('THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.');this.shadow.mapSize.height=value;}}});//\nObject.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){console.warn('THREE.BufferAttribute: .length has been deprecated. Please use .count.');return this.array.length;}}});Object.assign(THREE.BufferGeometry.prototype,{addIndex:function(index){console.warn('THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().');this.setIndex(index);},addDrawCall:function(start,count,indexOffset){if(indexOffset!==undefined){console.warn('THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.');}console.warn('THREE.BufferGeometry: .addDrawCall() is now .addGroup().');this.addGroup(start,count);},clearDrawCalls:function(){console.warn('THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().');this.clearGroups();},computeTangents:function(){console.warn('THREE.BufferGeometry: .computeTangents() has been removed.');},computeOffsets:function(){console.warn('THREE.BufferGeometry: .computeOffsets() has been removed.');}});Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){console.error('THREE.BufferGeometry: .drawcalls has been renamed to .groups.');return this.groups;}},offsets:{get:function(){console.warn('THREE.BufferGeometry: .offsets has been renamed to .groups.');return this.groups;}}});//\nObject.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn('THREE.'+this.type+': .wrapAround has been removed.');},set:function(value){console.warn('THREE.'+this.type+': .wrapAround has been removed.');}},wrapRGB:{get:function(){console.warn('THREE.'+this.type+': .wrapRGB has been removed.');return new THREE.Color();}}});Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.');return false;},set:function(value){console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead');}}});Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn('THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');return this.extensions.derivatives;},set:function(value){console.warn('THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.');this.extensions.derivatives=value;}}});//\nTHREE.EventDispatcher.prototype=Object.assign(Object.create({// Note: Extra base ensures these properties are not 'assign'ed.\nconstructor:THREE.EventDispatcher,apply:function(target){console.warn(\"THREE.EventDispatcher: .apply is deprecated, \"+\"just inherit or Object.assign the prototype to mix-in.\");Object.assign(target,this);}}),THREE.EventDispatcher.prototype);//\nObject.assign(THREE.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn('THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).');return this.extensions.get('OES_texture_float');},supportsHalfFloatTextures:function(){console.warn('THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).');return this.extensions.get('OES_texture_half_float');},supportsStandardDerivatives:function(){console.warn('THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).');return this.extensions.get('OES_standard_derivatives');},supportsCompressedTextureS3TC:function(){console.warn('THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).');return this.extensions.get('WEBGL_compressed_texture_s3tc');},supportsCompressedTexturePVRTC:function(){console.warn('THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).');return this.extensions.get('WEBGL_compressed_texture_pvrtc');},supportsBlendMinMax:function(){console.warn('THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).');return this.extensions.get('EXT_blend_minmax');},supportsVertexTextures:function(){return this.capabilities.vertexTextures;},supportsInstancedArrays:function(){console.warn('THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).');return this.extensions.get('ANGLE_instanced_arrays');},enableScissorTest:function(boolean){console.warn('THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().');this.setScissorTest(boolean);},initMaterial:function(){console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.');},addPrePlugin:function(){console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.');},addPostPlugin:function(){console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.');},updateShadowMap:function(){console.warn('THREE.WebGLRenderer: .updateShadowMap() has been removed.');}});Object.defineProperties(THREE.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled;},set:function(value){console.warn('THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.');this.shadowMap.enabled=value;}},shadowMapType:{get:function(){return this.shadowMap.type;},set:function(value){console.warn('THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.');this.shadowMap.type=value;}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace;},set:function(value){console.warn('THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.');this.shadowMap.cullFace=value;}}});Object.defineProperties(THREE.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?THREE.CullFaceFront:THREE.CullFaceBack;},set:function(cullFace){var value=cullFace!==THREE.CullFaceBack;console.warn(\"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \"+value+\".\");this.renderReverseSided=value;}}});//\nObject.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');return this.texture.wrapS;},set:function(value){console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.');this.texture.wrapS=value;}},wrapT:{get:function(){console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');return this.texture.wrapT;},set:function(value){console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.');this.texture.wrapT=value;}},magFilter:{get:function(){console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');return this.texture.magFilter;},set:function(value){console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.');this.texture.magFilter=value;}},minFilter:{get:function(){console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');return this.texture.minFilter;},set:function(value){console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.');this.texture.minFilter=value;}},anisotropy:{get:function(){console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');return this.texture.anisotropy;},set:function(value){console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.');this.texture.anisotropy=value;}},offset:{get:function(){console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');return this.texture.offset;},set:function(value){console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.');this.texture.offset=value;}},repeat:{get:function(){console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');return this.texture.repeat;},set:function(value){console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.');this.texture.repeat=value;}},format:{get:function(){console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');return this.texture.format;},set:function(value){console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.');this.texture.format=value;}},type:{get:function(){console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');return this.texture.type;},set:function(value){console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.');this.texture.type=value;}},generateMipmaps:{get:function(){console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');return this.texture.generateMipmaps;},set:function(value){console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.');this.texture.generateMipmaps=value;}}});//\nObject.assign(THREE.Audio.prototype,{load:function(file){console.warn('THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.');var scope=this;var audioLoader=new THREE.AudioLoader();audioLoader.load(file,function(buffer){scope.setBuffer(buffer);});return this;}});Object.assign(THREE.AudioAnalyser.prototype,{getData:function(file){console.warn('THREE.AudioAnalyser: .getData() is now .getFrequencyData().');return this.getFrequencyData();}});//\nTHREE.GeometryUtils={merge:function(geometry1,geometry2,materialIndexOffset){console.warn('THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.');var matrix;if(geometry2 instanceof THREE.Mesh){geometry2.matrixAutoUpdate&&geometry2.updateMatrix();matrix=geometry2.matrix;geometry2=geometry2.geometry;}geometry1.merge(geometry2,matrix,materialIndexOffset);},center:function(geometry){console.warn('THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.');return geometry.center();}};THREE.ImageUtils={crossOrigin:undefined,loadTexture:function(url,mapping,onLoad,onError){console.warn('THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.');var loader=new THREE.TextureLoader();loader.setCrossOrigin(this.crossOrigin);var texture=loader.load(url,onLoad,undefined,onError);if(mapping)texture.mapping=mapping;return texture;},loadTextureCube:function(urls,mapping,onLoad,onError){console.warn('THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.');var loader=new THREE.CubeTextureLoader();loader.setCrossOrigin(this.crossOrigin);var texture=loader.load(urls,onLoad,undefined,onError);if(mapping)texture.mapping=mapping;return texture;},loadCompressedTexture:function(){console.error('THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.');},loadCompressedTextureCube:function(){console.error('THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.');}};//\nTHREE.Projector=function(){console.error('THREE.Projector has been moved to /examples/js/renderers/Projector.js.');this.projectVector=function(vector,camera){console.warn('THREE.Projector: .projectVector() is now vector.project().');vector.project(camera);};this.unprojectVector=function(vector,camera){console.warn('THREE.Projector: .unprojectVector() is now vector.unproject().');vector.unproject(camera);};this.pickingRay=function(vector,camera){console.error('THREE.Projector: .pickingRay() is now raycaster.setFromCamera().');};};//\nTHREE.CanvasRenderer=function(){console.error('THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js');this.domElement=document.createElement('canvas');this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){};};// File:src/extras/CurveUtils.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */THREE.CurveUtils={tangentQuadraticBezier:function(t,p0,p1,p2){return 2*(1-t)*(p1-p0)+2*t*(p2-p1);},// Puay Bing, thanks for helping with this derivative!\ntangentCubicBezier:function(t,p0,p1,p2,p3){return-3*p0*(1-t)*(1-t)+3*p1*(1-t)*(1-t)-6*t*p1*(1-t)+6*t*p2*(1-t)-3*t*t*p2+3*t*t*p3;},tangentSpline:function(t,p0,p1,p2,p3){// To check if my formulas are correct\nvar h00=6*t*t-6*t;// derived from 2t^3 − 3t^2 + 1\nvar h10=3*t*t-4*t+1;// t^3 − 2t^2 + t\nvar h01=-6*t*t+6*t;// − 2t3 + 3t2\nvar h11=3*t*t-2*t;// t3 − t2\nreturn h00+h10+h01+h11;},// Catmull-Rom\ninterpolate:function(p0,p1,p2,p3,t){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;var t2=t*t;var t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1;}};// File:src/extras/SceneUtils.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.SceneUtils={createMultiMaterialObject:function(geometry,materials){var group=new THREE.Group();for(var i=0,l=materials.length;i<l;i++){group.add(new THREE.Mesh(geometry,materials[i]));}return group;},detach:function(child,parent,scene){child.applyMatrix(parent.matrixWorld);parent.remove(child);scene.add(child);},attach:function(child,scene,parent){var matrixWorldInverse=new THREE.Matrix4();matrixWorldInverse.getInverse(parent.matrixWorld);child.applyMatrix(matrixWorldInverse);scene.remove(child);parent.add(child);}};// File:src/extras/ShapeUtils.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */THREE.ShapeUtils={// calculate area of the contour polygon\narea:function(contour){var n=contour.length;var a=0.0;for(var p=n-1,q=0;q<n;p=q++){a+=contour[p].x*contour[q].y-contour[q].x*contour[p].y;}return a*0.5;},triangulate:function(){/**\r\n\t\t * This code is a quick port of code written in C++ which was submitted to\r\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t\t * See original code and more information here:\r\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t\t *\r\n\t\t * ported to actionscript by Zevan Rosser\r\n\t\t * www.actionsnippet.com\r\n\t\t *\r\n\t\t * ported to javascript by Joshua Koo\r\n\t\t * http://www.lab4games.net/zz85/blog\r\n\t\t *\r\n\t\t */function snip(contour,u,v,w,n,verts){var p;var ax,ay,bx,by;var cx,cy,px,py;ax=contour[verts[u]].x;ay=contour[verts[u]].y;bx=contour[verts[v]].x;by=contour[verts[v]].y;cx=contour[verts[w]].x;cy=contour[verts[w]].y;if(Number.EPSILON>(bx-ax)*(cy-ay)-(by-ay)*(cx-ax))return false;var aX,aY,bX,bY,cX,cY;var apx,apy,bpx,bpy,cpx,cpy;var cCROSSap,bCROSScp,aCROSSbp;aX=cx-bx;aY=cy-by;bX=ax-cx;bY=ay-cy;cX=bx-ax;cY=by-ay;for(p=0;p<n;p++){px=contour[verts[p]].x;py=contour[verts[p]].y;if(px===ax&&py===ay||px===bx&&py===by||px===cx&&py===cy)continue;apx=px-ax;apy=py-ay;bpx=px-bx;bpy=py-by;cpx=px-cx;cpy=py-cy;// see if p is inside triangle abc\naCROSSbp=aX*bpy-aY*bpx;cCROSSap=cX*apy-cY*apx;bCROSScp=bX*cpy-bY*cpx;if(aCROSSbp>=-Number.EPSILON&&bCROSScp>=-Number.EPSILON&&cCROSSap>=-Number.EPSILON)return false;}return true;}// takes in an contour array and returns\nreturn function(contour,indices){var n=contour.length;if(n<3)return null;var result=[],verts=[],vertIndices=[];/* we want a counter-clockwise polygon in verts */var u,v,w;if(THREE.ShapeUtils.area(contour)>0.0){for(v=0;v<n;v++)verts[v]=v;}else{for(v=0;v<n;v++)verts[v]=n-1-v;}var nv=n;/*  remove nv - 2 vertices, creating 1 triangle every time */var count=2*nv;/* error detection */for(v=nv-1;nv>2;){/* if we loop, it is probably a non-simple polygon */if(count--<=0){//** Triangulate: ERROR - probable bad polygon!\n//throw ( \"Warning, unable to triangulate polygon!\" );\n//return null;\n// Sometimes warning is fine, especially polygons are triangulated in reverse.\nconsole.warn('THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()');if(indices)return vertIndices;return result;}/* three consecutive vertices in current polygon, <u,v,w> */u=v;if(nv<=u)u=0;/* previous */v=u+1;if(nv<=v)v=0;/* new v    */w=v+1;if(nv<=w)w=0;/* next     */if(snip(contour,u,v,w,nv,verts)){var a,b,c,s,t;/* true names of the vertices */a=verts[u];b=verts[v];c=verts[w];/* output Triangle */result.push([contour[a],contour[b],contour[c]]);vertIndices.push([verts[u],verts[v],verts[w]]);/* remove v from the remaining polygon */for(s=v,t=v+1;t<nv;s++,t++){verts[s]=verts[t];}nv--;/* reset error detection counter */count=2*nv;}}if(indices)return vertIndices;return result;};}(),triangulateShape:function(contour,holes){function point_in_segment_2D_colin(inSegPt1,inSegPt2,inOtherPt){// inOtherPt needs to be collinear to the inSegment\nif(inSegPt1.x!==inSegPt2.x){if(inSegPt1.x<inSegPt2.x){return inSegPt1.x<=inOtherPt.x&&inOtherPt.x<=inSegPt2.x;}else{return inSegPt2.x<=inOtherPt.x&&inOtherPt.x<=inSegPt1.x;}}else{if(inSegPt1.y<inSegPt2.y){return inSegPt1.y<=inOtherPt.y&&inOtherPt.y<=inSegPt2.y;}else{return inSegPt2.y<=inOtherPt.y&&inOtherPt.y<=inSegPt1.y;}}}function intersect_segments_2D(inSeg1Pt1,inSeg1Pt2,inSeg2Pt1,inSeg2Pt2,inExcludeAdjacentSegs){var seg1dx=inSeg1Pt2.x-inSeg1Pt1.x,seg1dy=inSeg1Pt2.y-inSeg1Pt1.y;var seg2dx=inSeg2Pt2.x-inSeg2Pt1.x,seg2dy=inSeg2Pt2.y-inSeg2Pt1.y;var seg1seg2dx=inSeg1Pt1.x-inSeg2Pt1.x;var seg1seg2dy=inSeg1Pt1.y-inSeg2Pt1.y;var limit=seg1dy*seg2dx-seg1dx*seg2dy;var perpSeg1=seg1dy*seg1seg2dx-seg1dx*seg1seg2dy;if(Math.abs(limit)>Number.EPSILON){// not parallel\nvar perpSeg2;if(limit>0){if(perpSeg1<0||perpSeg1>limit)return[];perpSeg2=seg2dy*seg1seg2dx-seg2dx*seg1seg2dy;if(perpSeg2<0||perpSeg2>limit)return[];}else{if(perpSeg1>0||perpSeg1<limit)return[];perpSeg2=seg2dy*seg1seg2dx-seg2dx*seg1seg2dy;if(perpSeg2>0||perpSeg2<limit)return[];}// i.e. to reduce rounding errors\n// intersection at endpoint of segment#1?\nif(perpSeg2===0){if(inExcludeAdjacentSegs&&(perpSeg1===0||perpSeg1===limit))return[];return[inSeg1Pt1];}if(perpSeg2===limit){if(inExcludeAdjacentSegs&&(perpSeg1===0||perpSeg1===limit))return[];return[inSeg1Pt2];}// intersection at endpoint of segment#2?\nif(perpSeg1===0)return[inSeg2Pt1];if(perpSeg1===limit)return[inSeg2Pt2];// return real intersection point\nvar factorSeg1=perpSeg2/limit;return[{x:inSeg1Pt1.x+factorSeg1*seg1dx,y:inSeg1Pt1.y+factorSeg1*seg1dy}];}else{// parallel or collinear\nif(perpSeg1!==0||seg2dy*seg1seg2dx!==seg2dx*seg1seg2dy)return[];// they are collinear or degenerate\nvar seg1Pt=seg1dx===0&&seg1dy===0;// segment1 is just a point?\nvar seg2Pt=seg2dx===0&&seg2dy===0;// segment2 is just a point?\n// both segments are points\nif(seg1Pt&&seg2Pt){if(inSeg1Pt1.x!==inSeg2Pt1.x||inSeg1Pt1.y!==inSeg2Pt1.y)return[];// they are distinct  points\nreturn[inSeg1Pt1];// they are the same point\n}// segment#1  is a single point\nif(seg1Pt){if(!point_in_segment_2D_colin(inSeg2Pt1,inSeg2Pt2,inSeg1Pt1))return[];// but not in segment#2\nreturn[inSeg1Pt1];}// segment#2  is a single point\nif(seg2Pt){if(!point_in_segment_2D_colin(inSeg1Pt1,inSeg1Pt2,inSeg2Pt1))return[];// but not in segment#1\nreturn[inSeg2Pt1];}// they are collinear segments, which might overlap\nvar seg1min,seg1max,seg1minVal,seg1maxVal;var seg2min,seg2max,seg2minVal,seg2maxVal;if(seg1dx!==0){// the segments are NOT on a vertical line\nif(inSeg1Pt1.x<inSeg1Pt2.x){seg1min=inSeg1Pt1;seg1minVal=inSeg1Pt1.x;seg1max=inSeg1Pt2;seg1maxVal=inSeg1Pt2.x;}else{seg1min=inSeg1Pt2;seg1minVal=inSeg1Pt2.x;seg1max=inSeg1Pt1;seg1maxVal=inSeg1Pt1.x;}if(inSeg2Pt1.x<inSeg2Pt2.x){seg2min=inSeg2Pt1;seg2minVal=inSeg2Pt1.x;seg2max=inSeg2Pt2;seg2maxVal=inSeg2Pt2.x;}else{seg2min=inSeg2Pt2;seg2minVal=inSeg2Pt2.x;seg2max=inSeg2Pt1;seg2maxVal=inSeg2Pt1.x;}}else{// the segments are on a vertical line\nif(inSeg1Pt1.y<inSeg1Pt2.y){seg1min=inSeg1Pt1;seg1minVal=inSeg1Pt1.y;seg1max=inSeg1Pt2;seg1maxVal=inSeg1Pt2.y;}else{seg1min=inSeg1Pt2;seg1minVal=inSeg1Pt2.y;seg1max=inSeg1Pt1;seg1maxVal=inSeg1Pt1.y;}if(inSeg2Pt1.y<inSeg2Pt2.y){seg2min=inSeg2Pt1;seg2minVal=inSeg2Pt1.y;seg2max=inSeg2Pt2;seg2maxVal=inSeg2Pt2.y;}else{seg2min=inSeg2Pt2;seg2minVal=inSeg2Pt2.y;seg2max=inSeg2Pt1;seg2maxVal=inSeg2Pt1.y;}}if(seg1minVal<=seg2minVal){if(seg1maxVal<seg2minVal)return[];if(seg1maxVal===seg2minVal){if(inExcludeAdjacentSegs)return[];return[seg2min];}if(seg1maxVal<=seg2maxVal)return[seg2min,seg1max];return[seg2min,seg2max];}else{if(seg1minVal>seg2maxVal)return[];if(seg1minVal===seg2maxVal){if(inExcludeAdjacentSegs)return[];return[seg1min];}if(seg1maxVal<=seg2maxVal)return[seg1min,seg1max];return[seg1min,seg2max];}}}function isPointInsideAngle(inVertex,inLegFromPt,inLegToPt,inOtherPt){// The order of legs is important\n// translation of all points, so that Vertex is at (0,0)\nvar legFromPtX=inLegFromPt.x-inVertex.x,legFromPtY=inLegFromPt.y-inVertex.y;var legToPtX=inLegToPt.x-inVertex.x,legToPtY=inLegToPt.y-inVertex.y;var otherPtX=inOtherPt.x-inVertex.x,otherPtY=inOtherPt.y-inVertex.y;// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\nvar from2toAngle=legFromPtX*legToPtY-legFromPtY*legToPtX;var from2otherAngle=legFromPtX*otherPtY-legFromPtY*otherPtX;if(Math.abs(from2toAngle)>Number.EPSILON){// angle != 180 deg.\nvar other2toAngle=otherPtX*legToPtY-otherPtY*legToPtX;// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\nif(from2toAngle>0){// main angle < 180 deg.\nreturn from2otherAngle>=0&&other2toAngle>=0;}else{// main angle > 180 deg.\nreturn from2otherAngle>=0||other2toAngle>=0;}}else{// angle == 180 deg.\n// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\nreturn from2otherAngle>0;}}function removeHoles(contour,holes){var shape=contour.concat();// work on this shape\nvar hole;function isCutLineInsideAngles(inShapeIdx,inHoleIdx){// Check if hole point lies within angle around shape point\nvar lastShapeIdx=shape.length-1;var prevShapeIdx=inShapeIdx-1;if(prevShapeIdx<0)prevShapeIdx=lastShapeIdx;var nextShapeIdx=inShapeIdx+1;if(nextShapeIdx>lastShapeIdx)nextShapeIdx=0;var insideAngle=isPointInsideAngle(shape[inShapeIdx],shape[prevShapeIdx],shape[nextShapeIdx],hole[inHoleIdx]);if(!insideAngle){// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\nreturn false;}// Check if shape point lies within angle around hole point\nvar lastHoleIdx=hole.length-1;var prevHoleIdx=inHoleIdx-1;if(prevHoleIdx<0)prevHoleIdx=lastHoleIdx;var nextHoleIdx=inHoleIdx+1;if(nextHoleIdx>lastHoleIdx)nextHoleIdx=0;insideAngle=isPointInsideAngle(hole[inHoleIdx],hole[prevHoleIdx],hole[nextHoleIdx],shape[inShapeIdx]);if(!insideAngle){// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\nreturn false;}return true;}function intersectsShapeEdge(inShapePt,inHolePt){// checks for intersections with shape edges\nvar sIdx,nextIdx,intersection;for(sIdx=0;sIdx<shape.length;sIdx++){nextIdx=sIdx+1;nextIdx%=shape.length;intersection=intersect_segments_2D(inShapePt,inHolePt,shape[sIdx],shape[nextIdx],true);if(intersection.length>0)return true;}return false;}var indepHoles=[];function intersectsHoleEdge(inShapePt,inHolePt){// checks for intersections with hole edges\nvar ihIdx,chkHole,hIdx,nextIdx,intersection;for(ihIdx=0;ihIdx<indepHoles.length;ihIdx++){chkHole=holes[indepHoles[ihIdx]];for(hIdx=0;hIdx<chkHole.length;hIdx++){nextIdx=hIdx+1;nextIdx%=chkHole.length;intersection=intersect_segments_2D(inShapePt,inHolePt,chkHole[hIdx],chkHole[nextIdx],true);if(intersection.length>0)return true;}}return false;}var holeIndex,shapeIndex,shapePt,holePt,holeIdx,cutKey,failedCuts=[],tmpShape1,tmpShape2,tmpHole1,tmpHole2;for(var h=0,hl=holes.length;h<hl;h++){indepHoles.push(h);}var minShapeIndex=0;var counter=indepHoles.length*2;while(indepHoles.length>0){counter--;if(counter<0){console.log(\"Infinite Loop! Holes left:\"+indepHoles.length+\", Probably Hole outside Shape!\");break;}// search for shape-vertex and hole-vertex,\n// which can be connected without intersections\nfor(shapeIndex=minShapeIndex;shapeIndex<shape.length;shapeIndex++){shapePt=shape[shapeIndex];holeIndex=-1;// search for hole which can be reached without intersections\nfor(var h=0;h<indepHoles.length;h++){holeIdx=indepHoles[h];// prevent multiple checks\ncutKey=shapePt.x+\":\"+shapePt.y+\":\"+holeIdx;if(failedCuts[cutKey]!==undefined)continue;hole=holes[holeIdx];for(var h2=0;h2<hole.length;h2++){holePt=hole[h2];if(!isCutLineInsideAngles(shapeIndex,h2))continue;if(intersectsShapeEdge(shapePt,holePt))continue;if(intersectsHoleEdge(shapePt,holePt))continue;holeIndex=h2;indepHoles.splice(h,1);tmpShape1=shape.slice(0,shapeIndex+1);tmpShape2=shape.slice(shapeIndex);tmpHole1=hole.slice(holeIndex);tmpHole2=hole.slice(0,holeIndex+1);shape=tmpShape1.concat(tmpHole1).concat(tmpHole2).concat(tmpShape2);minShapeIndex=shapeIndex;// Debug only, to show the selected cuts\n// glob_CutLines.push( [ shapePt, holePt ] );\nbreak;}if(holeIndex>=0)break;// hole-vertex found\nfailedCuts[cutKey]=true;// remember failure\n}if(holeIndex>=0)break;// hole-vertex found\n}}return shape;/* shape with no holes */}var i,il,f,face,key,index,allPointsMap={};// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\nvar allpoints=contour.concat();for(var h=0,hl=holes.length;h<hl;h++){Array.prototype.push.apply(allpoints,holes[h]);}//console.log( \"allpoints\",allpoints, allpoints.length );\n// prepare all points map\nfor(i=0,il=allpoints.length;i<il;i++){key=allpoints[i].x+\":\"+allpoints[i].y;if(allPointsMap[key]!==undefined){console.warn(\"THREE.Shape: Duplicate point\",key);}allPointsMap[key]=i;}// remove holes by cutting paths to holes and adding them to the shape\nvar shapeWithoutHoles=removeHoles(contour,holes);var triangles=THREE.ShapeUtils.triangulate(shapeWithoutHoles,false);// True returns indices for points of spooled shape\n//console.log( \"triangles\",triangles, triangles.length );\n// check all face vertices against all points map\nfor(i=0,il=triangles.length;i<il;i++){face=triangles[i];for(f=0;f<3;f++){key=face[f].x+\":\"+face[f].y;index=allPointsMap[key];if(index!==undefined){face[f]=index;}}}return triangles.concat();},isClockWise:function(pts){return THREE.ShapeUtils.area(pts)<0;},// Bezier Curves formulas obtained from\n// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n// Quad Bezier Functions\nb2:function(){function b2p0(t,p){var k=1-t;return k*k*p;}function b2p1(t,p){return 2*(1-t)*t*p;}function b2p2(t,p){return t*t*p;}return function(t,p0,p1,p2){return b2p0(t,p0)+b2p1(t,p1)+b2p2(t,p2);};}(),// Cubic Bezier Functions\nb3:function(){function b3p0(t,p){var k=1-t;return k*k*k*p;}function b3p1(t,p){var k=1-t;return 3*k*k*t*p;}function b3p2(t,p){var k=1-t;return 3*k*t*t*p;}function b3p3(t,p){return t*t*t*p;}return function(t,p0,p1,p2,p3){return b3p0(t,p0)+b3p1(t,p1)+b3p2(t,p2)+b3p3(t,p3);};}()};// File:src/extras/core/Curve.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **//**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/THREE.Curve=function(){};THREE.Curve.prototype={constructor:THREE.Curve,// Virtual base class method to overwrite and implement in subclasses\n//\t- t [0 .. 1]\ngetPoint:function(t){console.warn(\"THREE.Curve: Warning, getPoint() not implemented!\");return null;},// Get point at relative position in curve according to arc length\n// - u [0 .. 1]\ngetPointAt:function(u){var t=this.getUtoTmapping(u);return this.getPoint(t);},// Get sequence of points using getPoint( t )\ngetPoints:function(divisions){if(!divisions)divisions=5;var d,pts=[];for(d=0;d<=divisions;d++){pts.push(this.getPoint(d/divisions));}return pts;},// Get sequence of points using getPointAt( u )\ngetSpacedPoints:function(divisions){if(!divisions)divisions=5;var d,pts=[];for(d=0;d<=divisions;d++){pts.push(this.getPointAt(d/divisions));}return pts;},// Get total curve arc length\ngetLength:function(){var lengths=this.getLengths();return lengths[lengths.length-1];},// Get list of cumulative segment lengths\ngetLengths:function(divisions){if(!divisions)divisions=this.__arcLengthDivisions?this.__arcLengthDivisions:200;if(this.cacheArcLengths&&this.cacheArcLengths.length===divisions+1&&!this.needsUpdate){//console.log( \"cached\", this.cacheArcLengths );\nreturn this.cacheArcLengths;}this.needsUpdate=false;var cache=[];var current,last=this.getPoint(0);var p,sum=0;cache.push(0);for(p=1;p<=divisions;p++){current=this.getPoint(p/divisions);sum+=current.distanceTo(last);cache.push(sum);last=current;}this.cacheArcLengths=cache;return cache;// { sums: cache, sum:sum }; Sum is in the last element.\n},updateArcLengths:function(){this.needsUpdate=true;this.getLengths();},// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\ngetUtoTmapping:function(u,distance){var arcLengths=this.getLengths();var i=0,il=arcLengths.length;var targetArcLength;// The targeted u distance value to get\nif(distance){targetArcLength=distance;}else{targetArcLength=u*arcLengths[il-1];}//var time = Date.now();\n// binary search for the index with largest value smaller than target u distance\nvar low=0,high=il-1,comparison;while(low<=high){i=Math.floor(low+(high-low)/2);// less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\ncomparison=arcLengths[i]-targetArcLength;if(comparison<0){low=i+1;}else if(comparison>0){high=i-1;}else{high=i;break;// DONE\n}}i=high;//console.log('b' , i, low, high, Date.now()- time);\nif(arcLengths[i]===targetArcLength){var t=i/(il-1);return t;}// we could get finer grain at lengths, or use simple interpolation between two points\nvar lengthBefore=arcLengths[i];var lengthAfter=arcLengths[i+1];var segmentLength=lengthAfter-lengthBefore;// determine where we are between the 'before' and 'after' points\nvar segmentFraction=(targetArcLength-lengthBefore)/segmentLength;// add that fractional amount to t\nvar t=(i+segmentFraction)/(il-1);return t;},// Returns a unit vector tangent at t\n// In case any sub curve does not implement its tangent derivation,\n// 2 points a small delta apart will be used to find its gradient\n// which seems to give a reasonable approximation\ngetTangent:function(t){var delta=0.0001;var t1=t-delta;var t2=t+delta;// Capping in case of danger\nif(t1<0)t1=0;if(t2>1)t2=1;var pt1=this.getPoint(t1);var pt2=this.getPoint(t2);var vec=pt2.clone().sub(pt1);return vec.normalize();},getTangentAt:function(u){var t=this.getUtoTmapping(u);return this.getTangent(t);}};// TODO: Transformation for Curves?\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/// A Factory method for creating new curve subclasses\nTHREE.Curve.create=function(constructor,getPointFunc){constructor.prototype=Object.create(THREE.Curve.prototype);constructor.prototype.constructor=constructor;constructor.prototype.getPoint=getPointFunc;return constructor;};// File:src/extras/core/CurvePath.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **//**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/THREE.CurvePath=function(){this.curves=[];this.autoClose=false;// Automatically closes the path\n};THREE.CurvePath.prototype=Object.assign(Object.create(THREE.Curve.prototype),{constructor:THREE.CurvePath,add:function(curve){this.curves.push(curve);},closePath:function(){// TODO Test\n// and verify for vector3 (needs to implement equals)\n// Add a line curve if start and end of lines are not connected\nvar startPoint=this.curves[0].getPoint(0);var endPoint=this.curves[this.curves.length-1].getPoint(1);if(!startPoint.equals(endPoint)){this.curves.push(new THREE.LineCurve(endPoint,startPoint));}},// To get accurate point with reference to\n// entire path distance at time t,\n// following has to be done:\n// 1. Length of each sub path have to be known\n// 2. Locate and identify type of curve\n// 3. Get t for the curve\n// 4. Return curve.getPointAt(t')\ngetPoint:function(t){var d=t*this.getLength();var curveLengths=this.getCurveLengths();var i=0;// To think about boundaries points.\nwhile(i<curveLengths.length){if(curveLengths[i]>=d){var diff=curveLengths[i]-d;var curve=this.curves[i];var u=1-diff/curve.getLength();return curve.getPointAt(u);}i++;}return null;// loop where sum != 0, sum > d , sum+1 <d\n},// We cannot use the default THREE.Curve getPoint() with getLength() because in\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n// getPoint() depends on getLength\ngetLength:function(){var lens=this.getCurveLengths();return lens[lens.length-1];},// Compute lengths and cache them\n// We cannot overwrite getLengths() because UtoT mapping uses it.\ngetCurveLengths:function(){// We use cache values if curves and cache array are same length\nif(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths;}// Get length of sub-curve\n// Push sums into cached array\nvar lengths=[],sums=0;for(var i=0,l=this.curves.length;i<l;i++){sums+=this.curves[i].getLength();lengths.push(sums);}this.cacheLengths=lengths;return lengths;},/**************************************************************\r\n\t *\tCreate Geometries Helpers\r\n\t **************************************************************//// Generate geometry from path points (for Line or Points objects)\ncreatePointsGeometry:function(divisions){var pts=this.getPoints(divisions);return this.createGeometry(pts);},// Generate geometry from equidistant sampling along the path\ncreateSpacedPointsGeometry:function(divisions){var pts=this.getSpacedPoints(divisions);return this.createGeometry(pts);},createGeometry:function(points){var geometry=new THREE.Geometry();for(var i=0,l=points.length;i<l;i++){var point=points[i];geometry.vertices.push(new THREE.Vector3(point.x,point.y,point.z||0));}return geometry;}});// File:src/extras/core/Font.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.Font=function(data){this.data=data;};Object.assign(THREE.Font.prototype,{generateShapes:function(text,size,divisions){function createPaths(text){var chars=String(text).split('');var scale=size/data.resolution;var offset=0;var paths=[];for(var i=0;i<chars.length;i++){var ret=createPath(chars[i],scale,offset);offset+=ret.offset;paths.push(ret.path);}return paths;}function createPath(c,scale,offset){var glyph=data.glyphs[c]||data.glyphs['?'];if(!glyph)return;var path=new THREE.Path();var pts=[],b2=THREE.ShapeUtils.b2,b3=THREE.ShapeUtils.b3;var x,y,cpx,cpy,cpx0,cpy0,cpx1,cpy1,cpx2,cpy2,laste;if(glyph.o){var outline=glyph._cachedOutline||(glyph._cachedOutline=glyph.o.split(' '));for(var i=0,l=outline.length;i<l;){var action=outline[i++];switch(action){case'm':// moveTo\nx=outline[i++]*scale+offset;y=outline[i++]*scale;path.moveTo(x,y);break;case'l':// lineTo\nx=outline[i++]*scale+offset;y=outline[i++]*scale;path.lineTo(x,y);break;case'q':// quadraticCurveTo\ncpx=outline[i++]*scale+offset;cpy=outline[i++]*scale;cpx1=outline[i++]*scale+offset;cpy1=outline[i++]*scale;path.quadraticCurveTo(cpx1,cpy1,cpx,cpy);laste=pts[pts.length-1];if(laste){cpx0=laste.x;cpy0=laste.y;for(var i2=1;i2<=divisions;i2++){var t=i2/divisions;b2(t,cpx0,cpx1,cpx);b2(t,cpy0,cpy1,cpy);}}break;case'b':// bezierCurveTo\ncpx=outline[i++]*scale+offset;cpy=outline[i++]*scale;cpx1=outline[i++]*scale+offset;cpy1=outline[i++]*scale;cpx2=outline[i++]*scale+offset;cpy2=outline[i++]*scale;path.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,cpx,cpy);laste=pts[pts.length-1];if(laste){cpx0=laste.x;cpy0=laste.y;for(var i2=1;i2<=divisions;i2++){var t=i2/divisions;b3(t,cpx0,cpx1,cpx2,cpx);b3(t,cpy0,cpy1,cpy2,cpy);}}break;}}}return{offset:glyph.ha*scale,path:path};}//\nif(size===undefined)size=100;if(divisions===undefined)divisions=4;var data=this.data;var paths=createPaths(text);var shapes=[];for(var p=0,pl=paths.length;p<pl;p++){Array.prototype.push.apply(shapes,paths[p].toShapes());}return shapes;}});// File:src/extras/core/Path.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/THREE.Path=function(points){THREE.CurvePath.call(this);this.actions=[];if(points){this.fromPoints(points);}};THREE.Path.prototype=Object.assign(Object.create(THREE.CurvePath.prototype),{constructor:THREE.Path,// TODO Clean up PATH API\n// Create path using straight lines to connect all points\n// - vectors: array of Vector2\nfromPoints:function(vectors){this.moveTo(vectors[0].x,vectors[0].y);for(var i=1,l=vectors.length;i<l;i++){this.lineTo(vectors[i].x,vectors[i].y);}},moveTo:function(x,y){this.actions.push({action:'moveTo',args:[x,y]});},lineTo:function(x,y){var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];var curve=new THREE.LineCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(x,y));this.curves.push(curve);this.actions.push({action:'lineTo',args:[x,y]});},quadraticCurveTo:function(aCPx,aCPy,aX,aY){var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];var curve=new THREE.QuadraticBezierCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(aCPx,aCPy),new THREE.Vector2(aX,aY));this.curves.push(curve);this.actions.push({action:'quadraticCurveTo',args:[aCPx,aCPy,aX,aY]});},bezierCurveTo:function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];var curve=new THREE.CubicBezierCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(aCP1x,aCP1y),new THREE.Vector2(aCP2x,aCP2y),new THREE.Vector2(aX,aY));this.curves.push(curve);this.actions.push({action:'bezierCurveTo',args:[aCP1x,aCP1y,aCP2x,aCP2y,aX,aY]});},splineThru:function(pts/*Array of Vector*/){var args=Array.prototype.slice.call(arguments);var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];var npts=[new THREE.Vector2(x0,y0)];Array.prototype.push.apply(npts,pts);var curve=new THREE.SplineCurve(npts);this.curves.push(curve);this.actions.push({action:'splineThru',args:args});},arc:function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];this.absarc(aX+x0,aY+y0,aRadius,aStartAngle,aEndAngle,aClockwise);},absarc:function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){this.absellipse(aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise);},ellipse:function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){var lastargs=this.actions[this.actions.length-1].args;var x0=lastargs[lastargs.length-2];var y0=lastargs[lastargs.length-1];this.absellipse(aX+x0,aY+y0,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation);},absellipse:function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){var args=[aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation||0// aRotation is optional.\n];var curve=new THREE.EllipseCurve(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation);this.curves.push(curve);var lastPoint=curve.getPoint(1);args.push(lastPoint.x);args.push(lastPoint.y);this.actions.push({action:'ellipse',args:args});},getSpacedPoints:function(divisions){if(!divisions)divisions=40;var points=[];for(var i=0;i<divisions;i++){points.push(this.getPoint(i/divisions));//if ( !this.getPoint( i / divisions ) ) throw \"DIE\";\n}if(this.autoClose){points.push(points[0]);}return points;},getPoints:function(divisions){divisions=divisions||12;var b2=THREE.ShapeUtils.b2;var b3=THREE.ShapeUtils.b3;var points=[];var cpx,cpy,cpx2,cpy2,cpx1,cpy1,cpx0,cpy0,laste,tx,ty;for(var i=0,l=this.actions.length;i<l;i++){var item=this.actions[i];var action=item.action;var args=item.args;switch(action){case'moveTo':points.push(new THREE.Vector2(args[0],args[1]));break;case'lineTo':points.push(new THREE.Vector2(args[0],args[1]));break;case'quadraticCurveTo':cpx=args[2];cpy=args[3];cpx1=args[0];cpy1=args[1];if(points.length>0){laste=points[points.length-1];cpx0=laste.x;cpy0=laste.y;}else{laste=this.actions[i-1].args;cpx0=laste[laste.length-2];cpy0=laste[laste.length-1];}for(var j=1;j<=divisions;j++){var t=j/divisions;tx=b2(t,cpx0,cpx1,cpx);ty=b2(t,cpy0,cpy1,cpy);points.push(new THREE.Vector2(tx,ty));}break;case'bezierCurveTo':cpx=args[4];cpy=args[5];cpx1=args[0];cpy1=args[1];cpx2=args[2];cpy2=args[3];if(points.length>0){laste=points[points.length-1];cpx0=laste.x;cpy0=laste.y;}else{laste=this.actions[i-1].args;cpx0=laste[laste.length-2];cpy0=laste[laste.length-1];}for(var j=1;j<=divisions;j++){var t=j/divisions;tx=b3(t,cpx0,cpx1,cpx2,cpx);ty=b3(t,cpy0,cpy1,cpy2,cpy);points.push(new THREE.Vector2(tx,ty));}break;case'splineThru':laste=this.actions[i-1].args;var last=new THREE.Vector2(laste[laste.length-2],laste[laste.length-1]);var spts=[last];var n=divisions*args[0].length;spts=spts.concat(args[0]);var spline=new THREE.SplineCurve(spts);for(var j=1;j<=n;j++){points.push(spline.getPointAt(j/n));}break;case'arc':var aX=args[0],aY=args[1],aRadius=args[2],aStartAngle=args[3],aEndAngle=args[4],aClockwise=!!args[5];var deltaAngle=aEndAngle-aStartAngle;var angle;var tdivisions=divisions*2;for(var j=1;j<=tdivisions;j++){var t=j/tdivisions;if(!aClockwise){t=1-t;}angle=aStartAngle+t*deltaAngle;tx=aX+aRadius*Math.cos(angle);ty=aY+aRadius*Math.sin(angle);//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\npoints.push(new THREE.Vector2(tx,ty));}//console.log(points);\nbreak;case'ellipse':var aX=args[0],aY=args[1],xRadius=args[2],yRadius=args[3],aStartAngle=args[4],aEndAngle=args[5],aClockwise=!!args[6],aRotation=args[7];var deltaAngle=aEndAngle-aStartAngle;var angle;var tdivisions=divisions*2;var cos,sin;if(aRotation!==0){cos=Math.cos(aRotation);sin=Math.sin(aRotation);}for(var j=1;j<=tdivisions;j++){var t=j/tdivisions;if(!aClockwise){t=1-t;}angle=aStartAngle+t*deltaAngle;tx=aX+xRadius*Math.cos(angle);ty=aY+yRadius*Math.sin(angle);if(aRotation!==0){var x=tx,y=ty;// Rotate the point about the center of the ellipse.\ntx=(x-aX)*cos-(y-aY)*sin+aX;ty=(x-aX)*sin+(y-aY)*cos+aY;}//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\npoints.push(new THREE.Vector2(tx,ty));}//console.log(points);\nbreak;}// end switch\n}// Normalize to remove the closing point by default.\nvar lastPoint=points[points.length-1];if(Math.abs(lastPoint.x-points[0].x)<Number.EPSILON&&Math.abs(lastPoint.y-points[0].y)<Number.EPSILON)points.splice(points.length-1,1);if(this.autoClose){points.push(points[0]);}return points;},toShapes:function(isCCW,noHoles){function extractSubpaths(inActions){var subPaths=[],lastPath=new THREE.Path();for(var i=0,l=inActions.length;i<l;i++){var item=inActions[i];var args=item.args;var action=item.action;if(action==='moveTo'){if(lastPath.actions.length!==0){subPaths.push(lastPath);lastPath=new THREE.Path();}}lastPath[action].apply(lastPath,args);}if(lastPath.actions.length!==0){subPaths.push(lastPath);}// console.log(subPaths);\nreturn subPaths;}function toShapesNoHoles(inSubpaths){var shapes=[];for(var i=0,l=inSubpaths.length;i<l;i++){var tmpPath=inSubpaths[i];var tmpShape=new THREE.Shape();tmpShape.actions=tmpPath.actions;tmpShape.curves=tmpPath.curves;shapes.push(tmpShape);}//console.log(\"shape\", shapes);\nreturn shapes;}function isPointInsidePolygon(inPt,inPolygon){var polyLen=inPolygon.length;// inPt on polygon contour => immediate success    or\n// toggling of inside/outside at every single! intersection point of an edge\n//  with the horizontal line through inPt, left of inPt\n//  not counting lowerY endpoints of edges and whole edges on that line\nvar inside=false;for(var p=polyLen-1,q=0;q<polyLen;p=q++){var edgeLowPt=inPolygon[p];var edgeHighPt=inPolygon[q];var edgeDx=edgeHighPt.x-edgeLowPt.x;var edgeDy=edgeHighPt.y-edgeLowPt.y;if(Math.abs(edgeDy)>Number.EPSILON){// not parallel\nif(edgeDy<0){edgeLowPt=inPolygon[q];edgeDx=-edgeDx;edgeHighPt=inPolygon[p];edgeDy=-edgeDy;}if(inPt.y<edgeLowPt.y||inPt.y>edgeHighPt.y)continue;if(inPt.y===edgeLowPt.y){if(inPt.x===edgeLowPt.x)return true;// inPt is on contour ?\n// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n}else{var perpEdge=edgeDy*(inPt.x-edgeLowPt.x)-edgeDx*(inPt.y-edgeLowPt.y);if(perpEdge===0)return true;// inPt is on contour ?\nif(perpEdge<0)continue;inside=!inside;// true intersection left of inPt\n}}else{// parallel or collinear\nif(inPt.y!==edgeLowPt.y)continue;// parallel\n// edge lies on the same horizontal line as inPt\nif(edgeHighPt.x<=inPt.x&&inPt.x<=edgeLowPt.x||edgeLowPt.x<=inPt.x&&inPt.x<=edgeHighPt.x)return true;// inPt: Point on contour !\n// continue;\n}}return inside;}var isClockWise=THREE.ShapeUtils.isClockWise;var subPaths=extractSubpaths(this.actions);if(subPaths.length===0)return[];if(noHoles===true)return toShapesNoHoles(subPaths);var solid,tmpPath,tmpShape,shapes=[];if(subPaths.length===1){tmpPath=subPaths[0];tmpShape=new THREE.Shape();tmpShape.actions=tmpPath.actions;tmpShape.curves=tmpPath.curves;shapes.push(tmpShape);return shapes;}var holesFirst=!isClockWise(subPaths[0].getPoints());holesFirst=isCCW?!holesFirst:holesFirst;// console.log(\"Holes first\", holesFirst);\nvar betterShapeHoles=[];var newShapes=[];var newShapeHoles=[];var mainIdx=0;var tmpPoints;newShapes[mainIdx]=undefined;newShapeHoles[mainIdx]=[];for(var i=0,l=subPaths.length;i<l;i++){tmpPath=subPaths[i];tmpPoints=tmpPath.getPoints();solid=isClockWise(tmpPoints);solid=isCCW?!solid:solid;if(solid){if(!holesFirst&&newShapes[mainIdx])mainIdx++;newShapes[mainIdx]={s:new THREE.Shape(),p:tmpPoints};newShapes[mainIdx].s.actions=tmpPath.actions;newShapes[mainIdx].s.curves=tmpPath.curves;if(holesFirst)mainIdx++;newShapeHoles[mainIdx]=[];//console.log('cw', i);\n}else{newShapeHoles[mainIdx].push({h:tmpPath,p:tmpPoints[0]});//console.log('ccw', i);\n}}// only Holes? -> probably all Shapes with wrong orientation\nif(!newShapes[0])return toShapesNoHoles(subPaths);if(newShapes.length>1){var ambiguous=false;var toChange=[];for(var sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++){betterShapeHoles[sIdx]=[];}for(var sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++){var sho=newShapeHoles[sIdx];for(var hIdx=0;hIdx<sho.length;hIdx++){var ho=sho[hIdx];var hole_unassigned=true;for(var s2Idx=0;s2Idx<newShapes.length;s2Idx++){if(isPointInsidePolygon(ho.p,newShapes[s2Idx].p)){if(sIdx!==s2Idx)toChange.push({froms:sIdx,tos:s2Idx,hole:hIdx});if(hole_unassigned){hole_unassigned=false;betterShapeHoles[s2Idx].push(ho);}else{ambiguous=true;}}}if(hole_unassigned){betterShapeHoles[sIdx].push(ho);}}}// console.log(\"ambiguous: \", ambiguous);\nif(toChange.length>0){// console.log(\"to change: \", toChange);\nif(!ambiguous)newShapeHoles=betterShapeHoles;}}var tmpHoles;for(var i=0,il=newShapes.length;i<il;i++){tmpShape=newShapes[i].s;shapes.push(tmpShape);tmpHoles=newShapeHoles[i];for(var j=0,jl=tmpHoles.length;j<jl;j++){tmpShape.holes.push(tmpHoles[j].h);}}//console.log(\"shape\", shapes);\nreturn shapes;}});// File:src/extras/core/Shape.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\nTHREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[];};THREE.Shape.prototype=Object.assign(Object.create(THREE.Path.prototype),{constructor:THREE.Shape,// Convenience method to return ExtrudeGeometry\nextrude:function(options){return new THREE.ExtrudeGeometry(this,options);},// Convenience method to return ShapeGeometry\nmakeGeometry:function(options){return new THREE.ShapeGeometry(this,options);},getPointsHoles:function(divisions){var holesPts=[];for(var i=0,l=this.holes.length;i<l;i++){holesPts[i]=this.holes[i].getPoints(divisions);}return holesPts;},// Get points of shape and holes (keypoints based on segments parameter)\nextractAllPoints:function(divisions){return{shape:this.getPoints(divisions),holes:this.getPointsHoles(divisions)};},extractPoints:function(divisions){return this.extractAllPoints(divisions);}});// File:src/extras/curves/LineCurve.js\n/**************************************************************\r\n *\tLine\r\n **************************************************************/THREE.LineCurve=function(v1,v2){this.v1=v1;this.v2=v2;};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(t){var point=this.v2.clone().sub(this.v1);point.multiplyScalar(t).add(this.v1);return point;};// Line curve is linear, so we can overwrite default getPointAt\nTHREE.LineCurve.prototype.getPointAt=function(u){return this.getPoint(u);};THREE.LineCurve.prototype.getTangent=function(t){var tangent=this.v2.clone().sub(this.v1);return tangent.normalize();};// File:src/extras/curves/QuadraticBezierCurve.js\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/THREE.QuadraticBezierCurve=function(v0,v1,v2){this.v0=v0;this.v1=v1;this.v2=v2;};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(t){var b2=THREE.ShapeUtils.b2;return new THREE.Vector2(b2(t,this.v0.x,this.v1.x,this.v2.x),b2(t,this.v0.y,this.v1.y,this.v2.y));};THREE.QuadraticBezierCurve.prototype.getTangent=function(t){var tangentQuadraticBezier=THREE.CurveUtils.tangentQuadraticBezier;return new THREE.Vector2(tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y)).normalize();};// File:src/extras/curves/CubicBezierCurve.js\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/THREE.CubicBezierCurve=function(v0,v1,v2,v3){this.v0=v0;this.v1=v1;this.v2=v2;this.v3=v3;};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(t){var b3=THREE.ShapeUtils.b3;return new THREE.Vector2(b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y));};THREE.CubicBezierCurve.prototype.getTangent=function(t){var tangentCubicBezier=THREE.CurveUtils.tangentCubicBezier;return new THREE.Vector2(tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize();};// File:src/extras/curves/SplineCurve.js\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/THREE.SplineCurve=function(points/* array of Vector2 */){this.points=points==undefined?[]:points;};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(t){var points=this.points;var point=(points.length-1)*t;var intPoint=Math.floor(point);var weight=point-intPoint;var point0=points[intPoint===0?intPoint:intPoint-1];var point1=points[intPoint];var point2=points[intPoint>points.length-2?points.length-1:intPoint+1];var point3=points[intPoint>points.length-3?points.length-1:intPoint+2];var interpolate=THREE.CurveUtils.interpolate;return new THREE.Vector2(interpolate(point0.x,point1.x,point2.x,point3.x,weight),interpolate(point0.y,point1.y,point2.y,point3.y,weight));};// File:src/extras/curves/EllipseCurve.js\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/THREE.EllipseCurve=function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){this.aX=aX;this.aY=aY;this.xRadius=xRadius;this.yRadius=yRadius;this.aStartAngle=aStartAngle;this.aEndAngle=aEndAngle;this.aClockwise=aClockwise;this.aRotation=aRotation||0;};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;THREE.EllipseCurve.prototype.getPoint=function(t){var deltaAngle=this.aEndAngle-this.aStartAngle;if(deltaAngle<0)deltaAngle+=Math.PI*2;if(deltaAngle>Math.PI*2)deltaAngle-=Math.PI*2;var angle;if(this.aClockwise===true){angle=this.aEndAngle+(1-t)*(Math.PI*2-deltaAngle);}else{angle=this.aStartAngle+t*deltaAngle;}var x=this.aX+this.xRadius*Math.cos(angle);var y=this.aY+this.yRadius*Math.sin(angle);if(this.aRotation!==0){var cos=Math.cos(this.aRotation);var sin=Math.sin(this.aRotation);var tx=x,ty=y;// Rotate the point about the center of the ellipse.\nx=(tx-this.aX)*cos-(ty-this.aY)*sin+this.aX;y=(tx-this.aX)*sin+(ty-this.aY)*cos+this.aY;}return new THREE.Vector2(x,y);};// File:src/extras/curves/ArcCurve.js\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/THREE.ArcCurve=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){THREE.EllipseCurve.call(this,aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise);};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;// File:src/extras/curves/LineCurve3.js\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/THREE.LineCurve3=THREE.Curve.create(function(v1,v2){this.v1=v1;this.v2=v2;},function(t){var vector=new THREE.Vector3();vector.subVectors(this.v2,this.v1);// diff\nvector.multiplyScalar(t);vector.add(this.v1);return vector;});// File:src/extras/curves/QuadraticBezierCurve3.js\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/THREE.QuadraticBezierCurve3=THREE.Curve.create(function(v0,v1,v2){this.v0=v0;this.v1=v1;this.v2=v2;},function(t){var b2=THREE.ShapeUtils.b2;return new THREE.Vector3(b2(t,this.v0.x,this.v1.x,this.v2.x),b2(t,this.v0.y,this.v1.y,this.v2.y),b2(t,this.v0.z,this.v1.z,this.v2.z));});// File:src/extras/curves/CubicBezierCurve3.js\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/THREE.CubicBezierCurve3=THREE.Curve.create(function(v0,v1,v2,v3){this.v0=v0;this.v1=v1;this.v2=v2;this.v3=v3;},function(t){var b3=THREE.ShapeUtils.b3;return new THREE.Vector3(b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z));});// File:src/extras/curves/SplineCurve3.js\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/THREE.SplineCurve3=THREE.Curve.create(function(points/* array of Vector3 */){console.warn('THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3');this.points=points==undefined?[]:points;},function(t){var points=this.points;var point=(points.length-1)*t;var intPoint=Math.floor(point);var weight=point-intPoint;var point0=points[intPoint==0?intPoint:intPoint-1];var point1=points[intPoint];var point2=points[intPoint>points.length-2?points.length-1:intPoint+1];var point3=points[intPoint>points.length-3?points.length-1:intPoint+2];var interpolate=THREE.CurveUtils.interpolate;return new THREE.Vector3(interpolate(point0.x,point1.x,point2.x,point3.x,weight),interpolate(point0.y,point1.y,point2.y,point3.y,weight),interpolate(point0.z,point1.z,point2.z,point3.z,weight));});// File:src/extras/curves/CatmullRomCurve3.js\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */THREE.CatmullRomCurve3=function(){var tmp=new THREE.Vector3(),px=new CubicPoly(),py=new CubicPoly(),pz=new CubicPoly();/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/function CubicPoly(){}/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */CubicPoly.prototype.init=function(x0,x1,t0,t1){this.c0=x0;this.c1=t0;this.c2=-3*x0+3*x1-2*t0-t1;this.c3=2*x0-2*x1+t0+t1;};CubicPoly.prototype.initNonuniformCatmullRom=function(x0,x1,x2,x3,dt0,dt1,dt2){// compute tangents when parameterized in [t1,t2]\nvar t1=(x1-x0)/dt0-(x2-x0)/(dt0+dt1)+(x2-x1)/dt1;var t2=(x2-x1)/dt1-(x3-x1)/(dt1+dt2)+(x3-x2)/dt2;// rescale tangents for parametrization in [0,1]\nt1*=dt1;t2*=dt1;// initCubicPoly\nthis.init(x1,x2,t1,t2);};// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\nCubicPoly.prototype.initCatmullRom=function(x0,x1,x2,x3,tension){this.init(x1,x2,tension*(x2-x0),tension*(x3-x1));};CubicPoly.prototype.calc=function(t){var t2=t*t;var t3=t2*t;return this.c0+this.c1*t+this.c2*t2+this.c3*t3;};// Subclass Three.js curve\nreturn THREE.Curve.create(function(p/* array of Vector3 */){this.points=p||[];this.closed=false;},function(t){var points=this.points,point,intPoint,weight,l;l=points.length;if(l<2)console.log('duh, you need at least 2 points');point=(l-(this.closed?0:1))*t;intPoint=Math.floor(point);weight=point-intPoint;if(this.closed){intPoint+=intPoint>0?0:(Math.floor(Math.abs(intPoint)/points.length)+1)*points.length;}else if(weight===0&&intPoint===l-1){intPoint=l-2;weight=1;}var p0,p1,p2,p3;// 4 points\nif(this.closed||intPoint>0){p0=points[(intPoint-1)%l];}else{// extrapolate first point\ntmp.subVectors(points[0],points[1]).add(points[0]);p0=tmp;}p1=points[intPoint%l];p2=points[(intPoint+1)%l];if(this.closed||intPoint+2<l){p3=points[(intPoint+2)%l];}else{// extrapolate last point\ntmp.subVectors(points[l-1],points[l-2]).add(points[l-1]);p3=tmp;}if(this.type===undefined||this.type==='centripetal'||this.type==='chordal'){// init Centripetal / Chordal Catmull-Rom\nvar pow=this.type==='chordal'?0.5:0.25;var dt0=Math.pow(p0.distanceToSquared(p1),pow);var dt1=Math.pow(p1.distanceToSquared(p2),pow);var dt2=Math.pow(p2.distanceToSquared(p3),pow);// safety check for repeated points\nif(dt1<1e-4)dt1=1.0;if(dt0<1e-4)dt0=dt1;if(dt2<1e-4)dt2=dt1;px.initNonuniformCatmullRom(p0.x,p1.x,p2.x,p3.x,dt0,dt1,dt2);py.initNonuniformCatmullRom(p0.y,p1.y,p2.y,p3.y,dt0,dt1,dt2);pz.initNonuniformCatmullRom(p0.z,p1.z,p2.z,p3.z,dt0,dt1,dt2);}else if(this.type==='catmullrom'){var tension=this.tension!==undefined?this.tension:0.5;px.initCatmullRom(p0.x,p1.x,p2.x,p3.x,tension);py.initCatmullRom(p0.y,p1.y,p2.y,p3.y,tension);pz.initCatmullRom(p0.z,p1.z,p2.z,p3.z,tension);}var v=new THREE.Vector3(px.calc(weight),py.calc(weight),pz.calc(weight));return v;});}();// File:src/extras/curves/ClosedSplineCurve3.js\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/THREE.ClosedSplineCurve3=function(points){console.warn('THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.');THREE.CatmullRomCurve3.call(this,points);this.type='catmullrom';this.closed=true;};THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype);// File:src/extras/geometries/BoxGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */THREE.BoxGeometry=function(width,height,depth,widthSegments,heightSegments,depthSegments){THREE.Geometry.call(this);this.type='BoxGeometry';this.parameters={width:width,height:height,depth:depth,widthSegments:widthSegments,heightSegments:heightSegments,depthSegments:depthSegments};this.fromBufferGeometry(new THREE.BoxBufferGeometry(width,height,depth,widthSegments,heightSegments,depthSegments));this.mergeVertices();};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.CubeGeometry=THREE.BoxGeometry;// File:src/extras/geometries/BoxBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */THREE.BoxBufferGeometry=function(width,height,depth,widthSegments,heightSegments,depthSegments){THREE.BufferGeometry.call(this);this.type='BoxBufferGeometry';this.parameters={width:width,height:height,depth:depth,widthSegments:widthSegments,heightSegments:heightSegments,depthSegments:depthSegments};var scope=this;// segments\nwidthSegments=Math.floor(widthSegments)||1;heightSegments=Math.floor(heightSegments)||1;depthSegments=Math.floor(depthSegments)||1;// these are used to calculate buffer length\nvar vertexCount=calculateVertexCount(widthSegments,heightSegments,depthSegments);var indexCount=calculateIndexCount(widthSegments,heightSegments,depthSegments);// buffers\nvar indices=new(indexCount>65535?Uint32Array:Uint16Array)(indexCount);var vertices=new Float32Array(vertexCount*3);var normals=new Float32Array(vertexCount*3);var uvs=new Float32Array(vertexCount*2);// offset variables\nvar vertexBufferOffset=0;var uvBufferOffset=0;var indexBufferOffset=0;var numberOfVertices=0;// group variables\nvar groupStart=0;// build each side of the box geometry\nbuildPlane('z','y','x',-1,-1,depth,height,width,depthSegments,heightSegments,0);// px\nbuildPlane('z','y','x',1,-1,depth,height,-width,depthSegments,heightSegments,1);// nx\nbuildPlane('x','z','y',1,1,width,depth,height,widthSegments,depthSegments,2);// py\nbuildPlane('x','z','y',1,-1,width,depth,-height,widthSegments,depthSegments,3);// ny\nbuildPlane('x','y','z',1,-1,width,height,depth,widthSegments,heightSegments,4);// pz\nbuildPlane('x','y','z',-1,-1,width,height,-depth,widthSegments,heightSegments,5);// nz\n// build geometry\nthis.setIndex(new THREE.BufferAttribute(indices,1));this.addAttribute('position',new THREE.BufferAttribute(vertices,3));this.addAttribute('normal',new THREE.BufferAttribute(normals,3));this.addAttribute('uv',new THREE.BufferAttribute(uvs,2));// helper functions\nfunction calculateVertexCount(w,h,d){var vertices=0;// calculate the amount of vertices for each side (plane)\nvertices+=(w+1)*(h+1)*2;// xy\nvertices+=(w+1)*(d+1)*2;// xz\nvertices+=(d+1)*(h+1)*2;// zy\nreturn vertices;}function calculateIndexCount(w,h,d){var index=0;// calculate the amount of squares for each side\nindex+=w*h*2;// xy\nindex+=w*d*2;// xz\nindex+=d*h*2;// zy\nreturn index*6;// two triangles per square => six vertices per square\n}function buildPlane(u,v,w,udir,vdir,width,height,depth,gridX,gridY,materialIndex){var segmentWidth=width/gridX;var segmentHeight=height/gridY;var widthHalf=width/2;var heightHalf=height/2;var depthHalf=depth/2;var gridX1=gridX+1;var gridY1=gridY+1;var vertexCounter=0;var groupCount=0;var vector=new THREE.Vector3();// generate vertices, normals and uvs\nfor(var iy=0;iy<gridY1;iy++){var y=iy*segmentHeight-heightHalf;for(var ix=0;ix<gridX1;ix++){var x=ix*segmentWidth-widthHalf;// set values to correct vector component\nvector[u]=x*udir;vector[v]=y*vdir;vector[w]=depthHalf;// now apply vector to vertex buffer\nvertices[vertexBufferOffset]=vector.x;vertices[vertexBufferOffset+1]=vector.y;vertices[vertexBufferOffset+2]=vector.z;// set values to correct vector component\nvector[u]=0;vector[v]=0;vector[w]=depth>0?1:-1;// now apply vector to normal buffer\nnormals[vertexBufferOffset]=vector.x;normals[vertexBufferOffset+1]=vector.y;normals[vertexBufferOffset+2]=vector.z;// uvs\nuvs[uvBufferOffset]=ix/gridX;uvs[uvBufferOffset+1]=1-iy/gridY;// update offsets and counters\nvertexBufferOffset+=3;uvBufferOffset+=2;vertexCounter+=1;}}// 1. you need three indices to draw a single face\n// 2. a single segment consists of two faces\n// 3. so we need to generate six (2*3) indices per segment\nfor(iy=0;iy<gridY;iy++){for(ix=0;ix<gridX;ix++){// indices\nvar a=numberOfVertices+ix+gridX1*iy;var b=numberOfVertices+ix+gridX1*(iy+1);var c=numberOfVertices+(ix+1)+gridX1*(iy+1);var d=numberOfVertices+(ix+1)+gridX1*iy;// face one\nindices[indexBufferOffset]=a;indices[indexBufferOffset+1]=b;indices[indexBufferOffset+2]=d;// face two\nindices[indexBufferOffset+3]=b;indices[indexBufferOffset+4]=c;indices[indexBufferOffset+5]=d;// update offsets and counters\nindexBufferOffset+=6;groupCount+=6;}}// add a group to the geometry. this will ensure multi material support\nscope.addGroup(groupStart,groupCount,materialIndex);// calculate new start value for groups\ngroupStart+=groupCount;// update total number of vertices\nnumberOfVertices+=vertexCounter;}};THREE.BoxBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.BoxBufferGeometry.prototype.constructor=THREE.BoxBufferGeometry;// File:src/extras/geometries/CircleGeometry.js\n/**\r\n * @author hughes\r\n */THREE.CircleGeometry=function(radius,segments,thetaStart,thetaLength){THREE.Geometry.call(this);this.type='CircleGeometry';this.parameters={radius:radius,segments:segments,thetaStart:thetaStart,thetaLength:thetaLength};this.fromBufferGeometry(new THREE.CircleBufferGeometry(radius,segments,thetaStart,thetaLength));};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;// File:src/extras/geometries/CircleBufferGeometry.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */THREE.CircleBufferGeometry=function(radius,segments,thetaStart,thetaLength){THREE.BufferGeometry.call(this);this.type='CircleBufferGeometry';this.parameters={radius:radius,segments:segments,thetaStart:thetaStart,thetaLength:thetaLength};radius=radius||50;segments=segments!==undefined?Math.max(3,segments):8;thetaStart=thetaStart!==undefined?thetaStart:0;thetaLength=thetaLength!==undefined?thetaLength:Math.PI*2;var vertices=segments+2;var positions=new Float32Array(vertices*3);var normals=new Float32Array(vertices*3);var uvs=new Float32Array(vertices*2);// center data is already zero, but need to set a few extras\nnormals[2]=1.0;uvs[0]=0.5;uvs[1]=0.5;for(var s=0,i=3,ii=2;s<=segments;s++,i+=3,ii+=2){var segment=thetaStart+s/segments*thetaLength;positions[i]=radius*Math.cos(segment);positions[i+1]=radius*Math.sin(segment);normals[i+2]=1;// normal z\nuvs[ii]=(positions[i]/radius+1)/2;uvs[ii+1]=(positions[i+1]/radius+1)/2;}var indices=[];for(var i=1;i<=segments;i++){indices.push(i,i+1,0);}this.setIndex(new THREE.BufferAttribute(new Uint16Array(indices),1));this.addAttribute('position',new THREE.BufferAttribute(positions,3));this.addAttribute('normal',new THREE.BufferAttribute(normals,3));this.addAttribute('uv',new THREE.BufferAttribute(uvs,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),radius);};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;// File:src/extras/geometries/CylinderBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */THREE.CylinderBufferGeometry=function(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){THREE.BufferGeometry.call(this);this.type='CylinderBufferGeometry';this.parameters={radiusTop:radiusTop,radiusBottom:radiusBottom,height:height,radialSegments:radialSegments,heightSegments:heightSegments,openEnded:openEnded,thetaStart:thetaStart,thetaLength:thetaLength};var scope=this;radiusTop=radiusTop!==undefined?radiusTop:20;radiusBottom=radiusBottom!==undefined?radiusBottom:20;height=height!==undefined?height:100;radialSegments=Math.floor(radialSegments)||8;heightSegments=Math.floor(heightSegments)||1;openEnded=openEnded!==undefined?openEnded:false;thetaStart=thetaStart!==undefined?thetaStart:0.0;thetaLength=thetaLength!==undefined?thetaLength:2.0*Math.PI;// used to calculate buffer length\nvar nbCap=0;if(openEnded===false){if(radiusTop>0)nbCap++;if(radiusBottom>0)nbCap++;}var vertexCount=calculateVertexCount();var indexCount=calculateIndexCount();// buffers\nvar indices=new THREE.BufferAttribute(new(indexCount>65535?Uint32Array:Uint16Array)(indexCount),1);var vertices=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var normals=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var uvs=new THREE.BufferAttribute(new Float32Array(vertexCount*2),2);// helper variables\nvar index=0,indexOffset=0,indexArray=[],halfHeight=height/2;// group variables\nvar groupStart=0;// generate geometry\ngenerateTorso();if(openEnded===false){if(radiusTop>0)generateCap(true);if(radiusBottom>0)generateCap(false);}// build geometry\nthis.setIndex(indices);this.addAttribute('position',vertices);this.addAttribute('normal',normals);this.addAttribute('uv',uvs);// helper functions\nfunction calculateVertexCount(){var count=(radialSegments+1)*(heightSegments+1);if(openEnded===false){count+=(radialSegments+1)*nbCap+radialSegments*nbCap;}return count;}function calculateIndexCount(){var count=radialSegments*heightSegments*2*3;if(openEnded===false){count+=radialSegments*nbCap*3;}return count;}function generateTorso(){var x,y;var normal=new THREE.Vector3();var vertex=new THREE.Vector3();var groupCount=0;// this will be used to calculate the normal\nvar tanTheta=(radiusBottom-radiusTop)/height;// generate vertices, normals and uvs\nfor(y=0;y<=heightSegments;y++){var indexRow=[];var v=y/heightSegments;// calculate the radius of the current row\nvar radius=v*(radiusBottom-radiusTop)+radiusTop;for(x=0;x<=radialSegments;x++){var u=x/radialSegments;// vertex\nvertex.x=radius*Math.sin(u*thetaLength+thetaStart);vertex.y=-v*height+halfHeight;vertex.z=radius*Math.cos(u*thetaLength+thetaStart);vertices.setXYZ(index,vertex.x,vertex.y,vertex.z);// normal\nnormal.copy(vertex);// handle special case if radiusTop/radiusBottom is zero\nif(radiusTop===0&&y===0||radiusBottom===0&&y===heightSegments){normal.x=Math.sin(u*thetaLength+thetaStart);normal.z=Math.cos(u*thetaLength+thetaStart);}normal.setY(Math.sqrt(normal.x*normal.x+normal.z*normal.z)*tanTheta).normalize();normals.setXYZ(index,normal.x,normal.y,normal.z);// uv\nuvs.setXY(index,u,1-v);// save index of vertex in respective row\nindexRow.push(index);// increase index\nindex++;}// now save vertices of the row in our index array\nindexArray.push(indexRow);}// generate indices\nfor(x=0;x<radialSegments;x++){for(y=0;y<heightSegments;y++){// we use the index array to access the correct indices\nvar i1=indexArray[y][x];var i2=indexArray[y+1][x];var i3=indexArray[y+1][x+1];var i4=indexArray[y][x+1];// face one\nindices.setX(indexOffset,i1);indexOffset++;indices.setX(indexOffset,i2);indexOffset++;indices.setX(indexOffset,i4);indexOffset++;// face two\nindices.setX(indexOffset,i2);indexOffset++;indices.setX(indexOffset,i3);indexOffset++;indices.setX(indexOffset,i4);indexOffset++;// update counters\ngroupCount+=6;}}// add a group to the geometry. this will ensure multi material support\nscope.addGroup(groupStart,groupCount,0);// calculate new start value for groups\ngroupStart+=groupCount;}function generateCap(top){var x,centerIndexStart,centerIndexEnd;var uv=new THREE.Vector2();var vertex=new THREE.Vector3();var groupCount=0;var radius=top===true?radiusTop:radiusBottom;var sign=top===true?1:-1;// save the index of the first center vertex\ncenterIndexStart=index;// first we generate the center vertex data of the cap.\n// because the geometry needs one set of uvs per face,\n// we must generate a center vertex per face/segment\nfor(x=1;x<=radialSegments;x++){// vertex\nvertices.setXYZ(index,0,halfHeight*sign,0);// normal\nnormals.setXYZ(index,0,sign,0);// uv\nuv.x=0.5;uv.y=0.5;uvs.setXY(index,uv.x,uv.y);// increase index\nindex++;}// save the index of the last center vertex\ncenterIndexEnd=index;// now we generate the surrounding vertices, normals and uvs\nfor(x=0;x<=radialSegments;x++){var u=x/radialSegments;var theta=u*thetaLength+thetaStart;var cosTheta=Math.cos(theta);var sinTheta=Math.sin(theta);// vertex\nvertex.x=radius*sinTheta;vertex.y=halfHeight*sign;vertex.z=radius*cosTheta;vertices.setXYZ(index,vertex.x,vertex.y,vertex.z);// normal\nnormals.setXYZ(index,0,sign,0);// uv\nuv.x=cosTheta*0.5+0.5;uv.y=sinTheta*0.5*sign+0.5;uvs.setXY(index,uv.x,uv.y);// increase index\nindex++;}// generate indices\nfor(x=0;x<radialSegments;x++){var c=centerIndexStart+x;var i=centerIndexEnd+x;if(top===true){// face top\nindices.setX(indexOffset,i);indexOffset++;indices.setX(indexOffset,i+1);indexOffset++;indices.setX(indexOffset,c);indexOffset++;}else{// face bottom\nindices.setX(indexOffset,i+1);indexOffset++;indices.setX(indexOffset,i);indexOffset++;indices.setX(indexOffset,c);indexOffset++;}// update counters\ngroupCount+=3;}// add a group to the geometry. this will ensure multi material support\nscope.addGroup(groupStart,groupCount,top===true?1:2);// calculate new start value for groups\ngroupStart+=groupCount;}};THREE.CylinderBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CylinderBufferGeometry.prototype.constructor=THREE.CylinderBufferGeometry;// File:src/extras/geometries/CylinderGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.CylinderGeometry=function(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){THREE.Geometry.call(this);this.type='CylinderGeometry';this.parameters={radiusTop:radiusTop,radiusBottom:radiusBottom,height:height,radialSegments:radialSegments,heightSegments:heightSegments,openEnded:openEnded,thetaStart:thetaStart,thetaLength:thetaLength};this.fromBufferGeometry(new THREE.CylinderBufferGeometry(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength));this.mergeVertices();};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;// File:src/extras/geometries/ConeBufferGeometry.js\n/*\r\n * @author: abelnation / http://github.com/abelnation\r\n */THREE.ConeBufferGeometry=function(radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){THREE.CylinderBufferGeometry.call(this,0,radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength);this.type='ConeBufferGeometry';this.parameters={radius:radius,height:height,radialSegments:radialSegments,heightSegments:heightSegments,thetaStart:thetaStart,thetaLength:thetaLength};};THREE.ConeBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.ConeBufferGeometry.prototype.constructor=THREE.ConeBufferGeometry;// File:src/extras/geometries/ConeGeometry.js\n/**\r\n * @author abelnation / http://github.com/abelnation\r\n */THREE.ConeGeometry=function(radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){THREE.CylinderGeometry.call(this,0,radius,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength);this.type='ConeGeometry';this.parameters={radius:radius,height:height,radialSegments:radialSegments,heightSegments:heightSegments,openEnded:openEnded,thetaStart:thetaStart,thetaLength:thetaLength};};THREE.ConeGeometry.prototype=Object.create(THREE.CylinderGeometry.prototype);THREE.ConeGeometry.prototype.constructor=THREE.ConeGeometry;// File:src/extras/geometries/EdgesGeometry.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.EdgesGeometry=function(geometry,thresholdAngle){THREE.BufferGeometry.call(this);thresholdAngle=thresholdAngle!==undefined?thresholdAngle:1;var thresholdDot=Math.cos(THREE.Math.DEG2RAD*thresholdAngle);var edge=[0,0],hash={};function sortFunction(a,b){return a-b;}var keys=['a','b','c'];var geometry2;if(geometry instanceof THREE.BufferGeometry){geometry2=new THREE.Geometry();geometry2.fromBufferGeometry(geometry);}else{geometry2=geometry.clone();}geometry2.mergeVertices();geometry2.computeFaceNormals();var vertices=geometry2.vertices;var faces=geometry2.faces;for(var i=0,l=faces.length;i<l;i++){var face=faces[i];for(var j=0;j<3;j++){edge[0]=face[keys[j]];edge[1]=face[keys[(j+1)%3]];edge.sort(sortFunction);var key=edge.toString();if(hash[key]===undefined){hash[key]={vert1:edge[0],vert2:edge[1],face1:i,face2:undefined};}else{hash[key].face2=i;}}}var coords=[];for(var key in hash){var h=hash[key];if(h.face2===undefined||faces[h.face1].normal.dot(faces[h.face2].normal)<=thresholdDot){var vertex=vertices[h.vert1];coords.push(vertex.x);coords.push(vertex.y);coords.push(vertex.z);vertex=vertices[h.vert2];coords.push(vertex.x);coords.push(vertex.y);coords.push(vertex.z);}}this.addAttribute('position',new THREE.BufferAttribute(new Float32Array(coords),3));};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;// File:src/extras/geometries/ExtrudeGeometry.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/THREE.ExtrudeGeometry=function(shapes,options){if(typeof shapes===\"undefined\"){shapes=[];return;}THREE.Geometry.call(this);this.type='ExtrudeGeometry';shapes=Array.isArray(shapes)?shapes:[shapes];this.addShapeList(shapes,options);this.computeFaceNormals();// can't really use automatic vertex normals\n// as then front and back sides get smoothed too\n// should do separate smoothing just for sides\n//this.computeVertexNormals();\n//console.log( \"took\", ( Date.now() - startTime ) );\n};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(shapes,options){var sl=shapes.length;for(var s=0;s<sl;s++){var shape=shapes[s];this.addShape(shape,options);}};THREE.ExtrudeGeometry.prototype.addShape=function(shape,options){var amount=options.amount!==undefined?options.amount:100;var bevelThickness=options.bevelThickness!==undefined?options.bevelThickness:6;// 10\nvar bevelSize=options.bevelSize!==undefined?options.bevelSize:bevelThickness-2;// 8\nvar bevelSegments=options.bevelSegments!==undefined?options.bevelSegments:3;var bevelEnabled=options.bevelEnabled!==undefined?options.bevelEnabled:true;// false\nvar curveSegments=options.curveSegments!==undefined?options.curveSegments:12;var steps=options.steps!==undefined?options.steps:1;var extrudePath=options.extrudePath;var extrudePts,extrudeByPath=false;// Use default WorldUVGenerator if no UV generators are specified.\nvar uvgen=options.UVGenerator!==undefined?options.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;var splineTube,binormal,normal,position2;if(extrudePath){extrudePts=extrudePath.getSpacedPoints(steps);extrudeByPath=true;bevelEnabled=false;// bevels not supported for path extrusion\n// SETUP TNB variables\n// Reuse TNB from TubeGeomtry for now.\n// TODO1 - have a .isClosed in spline?\nsplineTube=options.frames!==undefined?options.frames:new THREE.TubeGeometry.FrenetFrames(extrudePath,steps,false);// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\nbinormal=new THREE.Vector3();normal=new THREE.Vector3();position2=new THREE.Vector3();}// Safeguards if bevels are not enabled\nif(!bevelEnabled){bevelSegments=0;bevelThickness=0;bevelSize=0;}// Variables initialization\nvar ahole,h,hl;// looping of holes\nvar scope=this;var shapesOffset=this.vertices.length;var shapePoints=shape.extractPoints(curveSegments);var vertices=shapePoints.shape;var holes=shapePoints.holes;var reverse=!THREE.ShapeUtils.isClockWise(vertices);if(reverse){vertices=vertices.reverse();// Maybe we should also check if holes are in the opposite direction, just to be safe ...\nfor(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];if(THREE.ShapeUtils.isClockWise(ahole)){holes[h]=ahole.reverse();}}reverse=false;// If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n}var faces=THREE.ShapeUtils.triangulateShape(vertices,holes);/* Vertices */var contour=vertices;// vertices has all points but contour has only points of circumference\nfor(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];vertices=vertices.concat(ahole);}function scalePt2(pt,vec,size){if(!vec)console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return vec.clone().multiplyScalar(size).add(pt);}var b,bs,t,z,vert,vlen=vertices.length,face,flen=faces.length;// Find directions for point movement\nfunction getBevelVec(inPt,inPrev,inNext){// computes for inPt the corresponding point inPt' on a new contour\n//   shifted by 1 unit (length of normalized vector) to the left\n// if we walk along contour clockwise, this new contour is outside the old one\n//\n// inPt' is the intersection of the two lines parallel to the two\n//  adjacent edges of inPt at a distance of 1 unit on the left side.\nvar v_trans_x,v_trans_y,shrink_by=1;// resulting translation vector for inPt\n// good reading for geometry algorithms (here: line-line intersection)\n// http://geomalgorithms.com/a05-_intersect-1.html\nvar v_prev_x=inPt.x-inPrev.x,v_prev_y=inPt.y-inPrev.y;var v_next_x=inNext.x-inPt.x,v_next_y=inNext.y-inPt.y;var v_prev_lensq=v_prev_x*v_prev_x+v_prev_y*v_prev_y;// check for collinear edges\nvar collinear0=v_prev_x*v_next_y-v_prev_y*v_next_x;if(Math.abs(collinear0)>Number.EPSILON){// not collinear\n// length of vectors for normalizing\nvar v_prev_len=Math.sqrt(v_prev_lensq);var v_next_len=Math.sqrt(v_next_x*v_next_x+v_next_y*v_next_y);// shift adjacent points by unit vectors to the left\nvar ptPrevShift_x=inPrev.x-v_prev_y/v_prev_len;var ptPrevShift_y=inPrev.y+v_prev_x/v_prev_len;var ptNextShift_x=inNext.x-v_next_y/v_next_len;var ptNextShift_y=inNext.y+v_next_x/v_next_len;// scaling factor for v_prev to intersection point\nvar sf=((ptNextShift_x-ptPrevShift_x)*v_next_y-(ptNextShift_y-ptPrevShift_y)*v_next_x)/(v_prev_x*v_next_y-v_prev_y*v_next_x);// vector from inPt to intersection point\nv_trans_x=ptPrevShift_x+v_prev_x*sf-inPt.x;v_trans_y=ptPrevShift_y+v_prev_y*sf-inPt.y;// Don't normalize!, otherwise sharp corners become ugly\n//  but prevent crazy spikes\nvar v_trans_lensq=v_trans_x*v_trans_x+v_trans_y*v_trans_y;if(v_trans_lensq<=2){return new THREE.Vector2(v_trans_x,v_trans_y);}else{shrink_by=Math.sqrt(v_trans_lensq/2);}}else{// handle special case of collinear edges\nvar direction_eq=false;// assumes: opposite\nif(v_prev_x>Number.EPSILON){if(v_next_x>Number.EPSILON){direction_eq=true;}}else{if(v_prev_x<-Number.EPSILON){if(v_next_x<-Number.EPSILON){direction_eq=true;}}else{if(Math.sign(v_prev_y)===Math.sign(v_next_y)){direction_eq=true;}}}if(direction_eq){// console.log(\"Warning: lines are a straight sequence\");\nv_trans_x=-v_prev_y;v_trans_y=v_prev_x;shrink_by=Math.sqrt(v_prev_lensq);}else{// console.log(\"Warning: lines are a straight spike\");\nv_trans_x=v_prev_x;v_trans_y=v_prev_y;shrink_by=Math.sqrt(v_prev_lensq/2);}}return new THREE.Vector2(v_trans_x/shrink_by,v_trans_y/shrink_by);}var contourMovements=[];for(var i=0,il=contour.length,j=il-1,k=i+1;i<il;i++,j++,k++){if(j===il)j=0;if(k===il)k=0;//  (j)---(i)---(k)\n// console.log('i,j,k', i, j , k)\ncontourMovements[i]=getBevelVec(contour[i],contour[j],contour[k]);}var holesMovements=[],oneHoleMovements,verticesMovements=contourMovements.concat();for(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];oneHoleMovements=[];for(i=0,il=ahole.length,j=il-1,k=i+1;i<il;i++,j++,k++){if(j===il)j=0;if(k===il)k=0;//  (j)---(i)---(k)\noneHoleMovements[i]=getBevelVec(ahole[i],ahole[j],ahole[k]);}holesMovements.push(oneHoleMovements);verticesMovements=verticesMovements.concat(oneHoleMovements);}// Loop bevelSegments, 1 for the front, 1 for the back\nfor(b=0;b<bevelSegments;b++){//for ( b = bevelSegments; b > 0; b -- ) {\nt=b/bevelSegments;z=bevelThickness*(1-t);//z = bevelThickness * t;\nbs=bevelSize*Math.sin(t*Math.PI/2);// curved\n//bs = bevelSize * t; // linear\n// contract shape\nfor(i=0,il=contour.length;i<il;i++){vert=scalePt2(contour[i],contourMovements[i],bs);v(vert.x,vert.y,-z);}// expand holes\nfor(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];oneHoleMovements=holesMovements[h];for(i=0,il=ahole.length;i<il;i++){vert=scalePt2(ahole[i],oneHoleMovements[i],bs);v(vert.x,vert.y,-z);}}}bs=bevelSize;// Back facing vertices\nfor(i=0;i<vlen;i++){vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i];if(!extrudeByPath){v(vert.x,vert.y,0);}else{// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\nnormal.copy(splineTube.normals[0]).multiplyScalar(vert.x);binormal.copy(splineTube.binormals[0]).multiplyScalar(vert.y);position2.copy(extrudePts[0]).add(normal).add(binormal);v(position2.x,position2.y,position2.z);}}// Add stepped vertices...\n// Including front facing vertices\nvar s;for(s=1;s<=steps;s++){for(i=0;i<vlen;i++){vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i];if(!extrudeByPath){v(vert.x,vert.y,amount/steps*s);}else{// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\nnormal.copy(splineTube.normals[s]).multiplyScalar(vert.x);binormal.copy(splineTube.binormals[s]).multiplyScalar(vert.y);position2.copy(extrudePts[s]).add(normal).add(binormal);v(position2.x,position2.y,position2.z);}}}// Add bevel segments planes\n//for ( b = 1; b <= bevelSegments; b ++ ) {\nfor(b=bevelSegments-1;b>=0;b--){t=b/bevelSegments;z=bevelThickness*(1-t);//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\nbs=bevelSize*Math.sin(t*Math.PI/2);// contract shape\nfor(i=0,il=contour.length;i<il;i++){vert=scalePt2(contour[i],contourMovements[i],bs);v(vert.x,vert.y,amount+z);}// expand holes\nfor(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];oneHoleMovements=holesMovements[h];for(i=0,il=ahole.length;i<il;i++){vert=scalePt2(ahole[i],oneHoleMovements[i],bs);if(!extrudeByPath){v(vert.x,vert.y,amount+z);}else{v(vert.x,vert.y+extrudePts[steps-1].y,extrudePts[steps-1].x+z);}}}}/* Faces */// Top and bottom faces\nbuildLidFaces();// Sides faces\nbuildSideFaces();/////  Internal functions\nfunction buildLidFaces(){if(bevelEnabled){var layer=0;// steps + 1\nvar offset=vlen*layer;// Bottom faces\nfor(i=0;i<flen;i++){face=faces[i];f3(face[2]+offset,face[1]+offset,face[0]+offset);}layer=steps+bevelSegments*2;offset=vlen*layer;// Top faces\nfor(i=0;i<flen;i++){face=faces[i];f3(face[0]+offset,face[1]+offset,face[2]+offset);}}else{// Bottom faces\nfor(i=0;i<flen;i++){face=faces[i];f3(face[2],face[1],face[0]);}// Top faces\nfor(i=0;i<flen;i++){face=faces[i];f3(face[0]+vlen*steps,face[1]+vlen*steps,face[2]+vlen*steps);}}}// Create faces for the z-sides of the shape\nfunction buildSideFaces(){var layeroffset=0;sidewalls(contour,layeroffset);layeroffset+=contour.length;for(h=0,hl=holes.length;h<hl;h++){ahole=holes[h];sidewalls(ahole,layeroffset);//, true\nlayeroffset+=ahole.length;}}function sidewalls(contour,layeroffset){var j,k;i=contour.length;while(--i>=0){j=i;k=i-1;if(k<0)k=contour.length-1;//console.log('b', i,j, i-1, k,vertices.length);\nvar s=0,sl=steps+bevelSegments*2;for(s=0;s<sl;s++){var slen1=vlen*s;var slen2=vlen*(s+1);var a=layeroffset+j+slen1,b=layeroffset+k+slen1,c=layeroffset+k+slen2,d=layeroffset+j+slen2;f4(a,b,c,d,contour,s,sl,j,k);}}}function v(x,y,z){scope.vertices.push(new THREE.Vector3(x,y,z));}function f3(a,b,c){a+=shapesOffset;b+=shapesOffset;c+=shapesOffset;scope.faces.push(new THREE.Face3(a,b,c,null,null,0));var uvs=uvgen.generateTopUV(scope,a,b,c);scope.faceVertexUvs[0].push(uvs);}function f4(a,b,c,d,wallContour,stepIndex,stepsLength,contourIndex1,contourIndex2){a+=shapesOffset;b+=shapesOffset;c+=shapesOffset;d+=shapesOffset;scope.faces.push(new THREE.Face3(a,b,d,null,null,1));scope.faces.push(new THREE.Face3(b,c,d,null,null,1));var uvs=uvgen.generateSideWallUV(scope,a,b,c,d);scope.faceVertexUvs[0].push([uvs[0],uvs[1],uvs[3]]);scope.faceVertexUvs[0].push([uvs[1],uvs[2],uvs[3]]);}};THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(geometry,indexA,indexB,indexC){var vertices=geometry.vertices;var a=vertices[indexA];var b=vertices[indexB];var c=vertices[indexC];return[new THREE.Vector2(a.x,a.y),new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y)];},generateSideWallUV:function(geometry,indexA,indexB,indexC,indexD){var vertices=geometry.vertices;var a=vertices[indexA];var b=vertices[indexB];var c=vertices[indexC];var d=vertices[indexD];if(Math.abs(a.y-b.y)<0.01){return[new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z)];}else{return[new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,1-d.z)];}}};// File:src/extras/geometries/ShapeGeometry.js\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/THREE.ShapeGeometry=function(shapes,options){THREE.Geometry.call(this);this.type='ShapeGeometry';if(Array.isArray(shapes)===false)shapes=[shapes];this.addShapeList(shapes,options);this.computeFaceNormals();};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */THREE.ShapeGeometry.prototype.addShapeList=function(shapes,options){for(var i=0,l=shapes.length;i<l;i++){this.addShape(shapes[i],options);}return this;};/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */THREE.ShapeGeometry.prototype.addShape=function(shape,options){if(options===undefined)options={};var curveSegments=options.curveSegments!==undefined?options.curveSegments:12;var material=options.material;var uvgen=options.UVGenerator===undefined?THREE.ExtrudeGeometry.WorldUVGenerator:options.UVGenerator;//\nvar i,l,hole;var shapesOffset=this.vertices.length;var shapePoints=shape.extractPoints(curveSegments);var vertices=shapePoints.shape;var holes=shapePoints.holes;var reverse=!THREE.ShapeUtils.isClockWise(vertices);if(reverse){vertices=vertices.reverse();// Maybe we should also check if holes are in the opposite direction, just to be safe...\nfor(i=0,l=holes.length;i<l;i++){hole=holes[i];if(THREE.ShapeUtils.isClockWise(hole)){holes[i]=hole.reverse();}}reverse=false;}var faces=THREE.ShapeUtils.triangulateShape(vertices,holes);// Vertices\nfor(i=0,l=holes.length;i<l;i++){hole=holes[i];vertices=vertices.concat(hole);}//\nvar vert,vlen=vertices.length;var face,flen=faces.length;for(i=0;i<vlen;i++){vert=vertices[i];this.vertices.push(new THREE.Vector3(vert.x,vert.y,0));}for(i=0;i<flen;i++){face=faces[i];var a=face[0]+shapesOffset;var b=face[1]+shapesOffset;var c=face[2]+shapesOffset;this.faces.push(new THREE.Face3(a,b,c,null,null,material));this.faceVertexUvs[0].push(uvgen.generateTopUV(this,a,b,c));}};// File:src/extras/geometries/LatheBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */// points - to create a closed torus, one must use a set of points\n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2PI) range of the lathed section\n//    2PI is a closed lathe, less than 2PI is a portion.\nTHREE.LatheBufferGeometry=function(points,segments,phiStart,phiLength){THREE.BufferGeometry.call(this);this.type='LatheBufferGeometry';this.parameters={points:points,segments:segments,phiStart:phiStart,phiLength:phiLength};segments=Math.floor(segments)||12;phiStart=phiStart||0;phiLength=phiLength||Math.PI*2;// clamp phiLength so it's in range of [ 0, 2PI ]\nphiLength=THREE.Math.clamp(phiLength,0,Math.PI*2);// these are used to calculate buffer length\nvar vertexCount=(segments+1)*points.length;var indexCount=segments*points.length*2*3;// buffers\nvar indices=new THREE.BufferAttribute(new(indexCount>65535?Uint32Array:Uint16Array)(indexCount),1);var vertices=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var uvs=new THREE.BufferAttribute(new Float32Array(vertexCount*2),2);// helper variables\nvar index=0,indexOffset=0,base;var inversePointLength=1.0/(points.length-1);var inverseSegments=1.0/segments;var vertex=new THREE.Vector3();var uv=new THREE.Vector2();var i,j;// generate vertices and uvs\nfor(i=0;i<=segments;i++){var phi=phiStart+i*inverseSegments*phiLength;var sin=Math.sin(phi);var cos=Math.cos(phi);for(j=0;j<=points.length-1;j++){// vertex\nvertex.x=points[j].x*sin;vertex.y=points[j].y;vertex.z=points[j].x*cos;vertices.setXYZ(index,vertex.x,vertex.y,vertex.z);// uv\nuv.x=i/segments;uv.y=j/(points.length-1);uvs.setXY(index,uv.x,uv.y);// increase index\nindex++;}}// generate indices\nfor(i=0;i<segments;i++){for(j=0;j<points.length-1;j++){base=j+i*points.length;// indices\nvar a=base;var b=base+points.length;var c=base+points.length+1;var d=base+1;// face one\nindices.setX(indexOffset,a);indexOffset++;indices.setX(indexOffset,b);indexOffset++;indices.setX(indexOffset,d);indexOffset++;// face two\nindices.setX(indexOffset,b);indexOffset++;indices.setX(indexOffset,c);indexOffset++;indices.setX(indexOffset,d);indexOffset++;}}// build geometry\nthis.setIndex(indices);this.addAttribute('position',vertices);this.addAttribute('uv',uvs);// generate normals\nthis.computeVertexNormals();// if the geometry is closed, we need to average the normals along the seam.\n// because the corresponding vertices are identical (but still have different UVs).\nif(phiLength===Math.PI*2){var normals=this.attributes.normal.array;var n1=new THREE.Vector3();var n2=new THREE.Vector3();var n=new THREE.Vector3();// this is the buffer offset for the last line of vertices\nbase=segments*points.length*3;for(i=0,j=0;i<points.length;i++,j+=3){// select the normal of the vertex in the first line\nn1.x=normals[j+0];n1.y=normals[j+1];n1.z=normals[j+2];// select the normal of the vertex in the last line\nn2.x=normals[base+j+0];n2.y=normals[base+j+1];n2.z=normals[base+j+2];// average normals\nn.addVectors(n1,n2).normalize();// assign the new values to both normals\nnormals[j+0]=normals[base+j+0]=n.x;normals[j+1]=normals[base+j+1]=n.y;normals[j+2]=normals[base+j+2]=n.z;}// next row\n}};THREE.LatheBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.LatheBufferGeometry.prototype.constructor=THREE.LatheBufferGeometry;// File:src/extras/geometries/LatheGeometry.js\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n */// points - to create a closed torus, one must use a set of points\n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2PI) range of the lathed section\n//    2PI is a closed lathe, less than 2PI is a portion.\nTHREE.LatheGeometry=function(points,segments,phiStart,phiLength){THREE.Geometry.call(this);this.type='LatheGeometry';this.parameters={points:points,segments:segments,phiStart:phiStart,phiLength:phiLength};this.fromBufferGeometry(new THREE.LatheBufferGeometry(points,segments,phiStart,phiLength));this.mergeVertices();};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;// File:src/extras/geometries/PlaneGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */THREE.PlaneGeometry=function(width,height,widthSegments,heightSegments){THREE.Geometry.call(this);this.type='PlaneGeometry';this.parameters={width:width,height:height,widthSegments:widthSegments,heightSegments:heightSegments};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(width,height,widthSegments,heightSegments));};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;// File:src/extras/geometries/PlaneBufferGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */THREE.PlaneBufferGeometry=function(width,height,widthSegments,heightSegments){THREE.BufferGeometry.call(this);this.type='PlaneBufferGeometry';this.parameters={width:width,height:height,widthSegments:widthSegments,heightSegments:heightSegments};var width_half=width/2;var height_half=height/2;var gridX=Math.floor(widthSegments)||1;var gridY=Math.floor(heightSegments)||1;var gridX1=gridX+1;var gridY1=gridY+1;var segment_width=width/gridX;var segment_height=height/gridY;var vertices=new Float32Array(gridX1*gridY1*3);var normals=new Float32Array(gridX1*gridY1*3);var uvs=new Float32Array(gridX1*gridY1*2);var offset=0;var offset2=0;for(var iy=0;iy<gridY1;iy++){var y=iy*segment_height-height_half;for(var ix=0;ix<gridX1;ix++){var x=ix*segment_width-width_half;vertices[offset]=x;vertices[offset+1]=-y;normals[offset+2]=1;uvs[offset2]=ix/gridX;uvs[offset2+1]=1-iy/gridY;offset+=3;offset2+=2;}}offset=0;var indices=new(vertices.length/3>65535?Uint32Array:Uint16Array)(gridX*gridY*6);for(var iy=0;iy<gridY;iy++){for(var ix=0;ix<gridX;ix++){var a=ix+gridX1*iy;var b=ix+gridX1*(iy+1);var c=ix+1+gridX1*(iy+1);var d=ix+1+gridX1*iy;indices[offset]=a;indices[offset+1]=b;indices[offset+2]=d;indices[offset+3]=b;indices[offset+4]=c;indices[offset+5]=d;offset+=6;}}this.setIndex(new THREE.BufferAttribute(indices,1));this.addAttribute('position',new THREE.BufferAttribute(vertices,3));this.addAttribute('normal',new THREE.BufferAttribute(normals,3));this.addAttribute('uv',new THREE.BufferAttribute(uvs,2));};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;// File:src/extras/geometries/RingBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */THREE.RingBufferGeometry=function(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength){THREE.BufferGeometry.call(this);this.type='RingBufferGeometry';this.parameters={innerRadius:innerRadius,outerRadius:outerRadius,thetaSegments:thetaSegments,phiSegments:phiSegments,thetaStart:thetaStart,thetaLength:thetaLength};innerRadius=innerRadius||20;outerRadius=outerRadius||50;thetaStart=thetaStart!==undefined?thetaStart:0;thetaLength=thetaLength!==undefined?thetaLength:Math.PI*2;thetaSegments=thetaSegments!==undefined?Math.max(3,thetaSegments):8;phiSegments=phiSegments!==undefined?Math.max(1,phiSegments):1;// these are used to calculate buffer length\nvar vertexCount=(thetaSegments+1)*(phiSegments+1);var indexCount=thetaSegments*phiSegments*2*3;// buffers\nvar indices=new THREE.BufferAttribute(new(indexCount>65535?Uint32Array:Uint16Array)(indexCount),1);var vertices=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var normals=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var uvs=new THREE.BufferAttribute(new Float32Array(vertexCount*2),2);// some helper variables\nvar index=0,indexOffset=0,segment;var radius=innerRadius;var radiusStep=(outerRadius-innerRadius)/phiSegments;var vertex=new THREE.Vector3();var uv=new THREE.Vector2();var j,i;// generate vertices, normals and uvs\n// values are generate from the inside of the ring to the outside\nfor(j=0;j<=phiSegments;j++){for(i=0;i<=thetaSegments;i++){segment=thetaStart+i/thetaSegments*thetaLength;// vertex\nvertex.x=radius*Math.cos(segment);vertex.y=radius*Math.sin(segment);vertices.setXYZ(index,vertex.x,vertex.y,vertex.z);// normal\nnormals.setXYZ(index,0,0,1);// uv\nuv.x=(vertex.x/outerRadius+1)/2;uv.y=(vertex.y/outerRadius+1)/2;uvs.setXY(index,uv.x,uv.y);// increase index\nindex++;}// increase the radius for next row of vertices\nradius+=radiusStep;}// generate indices\nfor(j=0;j<phiSegments;j++){var thetaSegmentLevel=j*(thetaSegments+1);for(i=0;i<thetaSegments;i++){segment=i+thetaSegmentLevel;// indices\nvar a=segment;var b=segment+thetaSegments+1;var c=segment+thetaSegments+2;var d=segment+1;// face one\nindices.setX(indexOffset,a);indexOffset++;indices.setX(indexOffset,b);indexOffset++;indices.setX(indexOffset,c);indexOffset++;// face two\nindices.setX(indexOffset,a);indexOffset++;indices.setX(indexOffset,c);indexOffset++;indices.setX(indexOffset,d);indexOffset++;}}// build geometry\nthis.setIndex(indices);this.addAttribute('position',vertices);this.addAttribute('normal',normals);this.addAttribute('uv',uvs);};THREE.RingBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingBufferGeometry.prototype.constructor=THREE.RingBufferGeometry;// File:src/extras/geometries/RingGeometry.js\n/**\r\n * @author Kaleb Murphy\r\n */THREE.RingGeometry=function(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength){THREE.Geometry.call(this);this.type='RingGeometry';this.parameters={innerRadius:innerRadius,outerRadius:outerRadius,thetaSegments:thetaSegments,phiSegments:phiSegments,thetaStart:thetaStart,thetaLength:thetaLength};this.fromBufferGeometry(new THREE.RingBufferGeometry(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength));};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;// File:src/extras/geometries/SphereGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.SphereGeometry=function(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength){THREE.Geometry.call(this);this.type='SphereGeometry';this.parameters={radius:radius,widthSegments:widthSegments,heightSegments:heightSegments,phiStart:phiStart,phiLength:phiLength,thetaStart:thetaStart,thetaLength:thetaLength};this.fromBufferGeometry(new THREE.SphereBufferGeometry(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength));};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;// File:src/extras/geometries/SphereBufferGeometry.js\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */THREE.SphereBufferGeometry=function(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength){THREE.BufferGeometry.call(this);this.type='SphereBufferGeometry';this.parameters={radius:radius,widthSegments:widthSegments,heightSegments:heightSegments,phiStart:phiStart,phiLength:phiLength,thetaStart:thetaStart,thetaLength:thetaLength};radius=radius||50;widthSegments=Math.max(3,Math.floor(widthSegments)||8);heightSegments=Math.max(2,Math.floor(heightSegments)||6);phiStart=phiStart!==undefined?phiStart:0;phiLength=phiLength!==undefined?phiLength:Math.PI*2;thetaStart=thetaStart!==undefined?thetaStart:0;thetaLength=thetaLength!==undefined?thetaLength:Math.PI;var thetaEnd=thetaStart+thetaLength;var vertexCount=(widthSegments+1)*(heightSegments+1);var positions=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var normals=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var uvs=new THREE.BufferAttribute(new Float32Array(vertexCount*2),2);var index=0,vertices=[],normal=new THREE.Vector3();for(var y=0;y<=heightSegments;y++){var verticesRow=[];var v=y/heightSegments;for(var x=0;x<=widthSegments;x++){var u=x/widthSegments;var px=-radius*Math.cos(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength);var py=radius*Math.cos(thetaStart+v*thetaLength);var pz=radius*Math.sin(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength);normal.set(px,py,pz).normalize();positions.setXYZ(index,px,py,pz);normals.setXYZ(index,normal.x,normal.y,normal.z);uvs.setXY(index,u,1-v);verticesRow.push(index);index++;}vertices.push(verticesRow);}var indices=[];for(var y=0;y<heightSegments;y++){for(var x=0;x<widthSegments;x++){var v1=vertices[y][x+1];var v2=vertices[y][x];var v3=vertices[y+1][x];var v4=vertices[y+1][x+1];if(y!==0||thetaStart>0)indices.push(v1,v2,v4);if(y!==heightSegments-1||thetaEnd<Math.PI)indices.push(v2,v3,v4);}}this.setIndex(new(positions.count>65535?THREE.Uint32Attribute:THREE.Uint16Attribute)(indices,1));this.addAttribute('position',positions);this.addAttribute('normal',normals);this.addAttribute('uv',uvs);this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),radius);};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;// File:src/extras/geometries/TextGeometry.js\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float> // how far from text outline is bevel\r\n * }\r\n */THREE.TextGeometry=function(text,parameters){parameters=parameters||{};var font=parameters.font;if(font instanceof THREE.Font===false){console.error('THREE.TextGeometry: font parameter is not an instance of THREE.Font.');return new THREE.Geometry();}var shapes=font.generateShapes(text,parameters.size,parameters.curveSegments);// translate parameters to ExtrudeGeometry API\nparameters.amount=parameters.height!==undefined?parameters.height:50;// defaults\nif(parameters.bevelThickness===undefined)parameters.bevelThickness=10;if(parameters.bevelSize===undefined)parameters.bevelSize=8;if(parameters.bevelEnabled===undefined)parameters.bevelEnabled=false;THREE.ExtrudeGeometry.call(this,shapes,parameters);this.type='TextGeometry';};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;// File:src/extras/geometries/TorusBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */THREE.TorusBufferGeometry=function(radius,tube,radialSegments,tubularSegments,arc){THREE.BufferGeometry.call(this);this.type='TorusBufferGeometry';this.parameters={radius:radius,tube:tube,radialSegments:radialSegments,tubularSegments:tubularSegments,arc:arc};radius=radius||100;tube=tube||40;radialSegments=Math.floor(radialSegments)||8;tubularSegments=Math.floor(tubularSegments)||6;arc=arc||Math.PI*2;// used to calculate buffer length\nvar vertexCount=(radialSegments+1)*(tubularSegments+1);var indexCount=radialSegments*tubularSegments*2*3;// buffers\nvar indices=new(indexCount>65535?Uint32Array:Uint16Array)(indexCount);var vertices=new Float32Array(vertexCount*3);var normals=new Float32Array(vertexCount*3);var uvs=new Float32Array(vertexCount*2);// offset variables\nvar vertexBufferOffset=0;var uvBufferOffset=0;var indexBufferOffset=0;// helper variables\nvar center=new THREE.Vector3();var vertex=new THREE.Vector3();var normal=new THREE.Vector3();var j,i;// generate vertices, normals and uvs\nfor(j=0;j<=radialSegments;j++){for(i=0;i<=tubularSegments;i++){var u=i/tubularSegments*arc;var v=j/radialSegments*Math.PI*2;// vertex\nvertex.x=(radius+tube*Math.cos(v))*Math.cos(u);vertex.y=(radius+tube*Math.cos(v))*Math.sin(u);vertex.z=tube*Math.sin(v);vertices[vertexBufferOffset]=vertex.x;vertices[vertexBufferOffset+1]=vertex.y;vertices[vertexBufferOffset+2]=vertex.z;// this vector is used to calculate the normal\ncenter.x=radius*Math.cos(u);center.y=radius*Math.sin(u);// normal\nnormal.subVectors(vertex,center).normalize();normals[vertexBufferOffset]=normal.x;normals[vertexBufferOffset+1]=normal.y;normals[vertexBufferOffset+2]=normal.z;// uv\nuvs[uvBufferOffset]=i/tubularSegments;uvs[uvBufferOffset+1]=j/radialSegments;// update offsets\nvertexBufferOffset+=3;uvBufferOffset+=2;}}// generate indices\nfor(j=1;j<=radialSegments;j++){for(i=1;i<=tubularSegments;i++){// indices\nvar a=(tubularSegments+1)*j+i-1;var b=(tubularSegments+1)*(j-1)+i-1;var c=(tubularSegments+1)*(j-1)+i;var d=(tubularSegments+1)*j+i;// face one\nindices[indexBufferOffset]=a;indices[indexBufferOffset+1]=b;indices[indexBufferOffset+2]=d;// face two\nindices[indexBufferOffset+3]=b;indices[indexBufferOffset+4]=c;indices[indexBufferOffset+5]=d;// update offset\nindexBufferOffset+=6;}}// build geometry\nthis.setIndex(new THREE.BufferAttribute(indices,1));this.addAttribute('position',new THREE.BufferAttribute(vertices,3));this.addAttribute('normal',new THREE.BufferAttribute(normals,3));this.addAttribute('uv',new THREE.BufferAttribute(uvs,2));};THREE.TorusBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusBufferGeometry.prototype.constructor=THREE.TorusBufferGeometry;// File:src/extras/geometries/TorusGeometry.js\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */THREE.TorusGeometry=function(radius,tube,radialSegments,tubularSegments,arc){THREE.Geometry.call(this);this.type='TorusGeometry';this.parameters={radius:radius,tube:tube,radialSegments:radialSegments,tubularSegments:tubularSegments,arc:arc};this.fromBufferGeometry(new THREE.TorusBufferGeometry(radius,tube,radialSegments,tubularSegments,arc));};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;// File:src/extras/geometries/TorusKnotBufferGeometry.js\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n *\r\n * see: http://www.blackpawn.com/texts/pqtorus/\r\n */THREE.TorusKnotBufferGeometry=function(radius,tube,tubularSegments,radialSegments,p,q){THREE.BufferGeometry.call(this);this.type='TorusKnotBufferGeometry';this.parameters={radius:radius,tube:tube,tubularSegments:tubularSegments,radialSegments:radialSegments,p:p,q:q};radius=radius||100;tube=tube||40;tubularSegments=Math.floor(tubularSegments)||64;radialSegments=Math.floor(radialSegments)||8;p=p||2;q=q||3;// used to calculate buffer length\nvar vertexCount=(radialSegments+1)*(tubularSegments+1);var indexCount=radialSegments*tubularSegments*2*3;// buffers\nvar indices=new THREE.BufferAttribute(new(indexCount>65535?Uint32Array:Uint16Array)(indexCount),1);var vertices=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var normals=new THREE.BufferAttribute(new Float32Array(vertexCount*3),3);var uvs=new THREE.BufferAttribute(new Float32Array(vertexCount*2),2);// helper variables\nvar i,j,index=0,indexOffset=0;var vertex=new THREE.Vector3();var normal=new THREE.Vector3();var uv=new THREE.Vector2();var P1=new THREE.Vector3();var P2=new THREE.Vector3();var B=new THREE.Vector3();var T=new THREE.Vector3();var N=new THREE.Vector3();// generate vertices, normals and uvs\nfor(i=0;i<=tubularSegments;++i){// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\nvar u=i/tubularSegments*p*Math.PI*2;// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\ncalculatePositionOnCurve(u,p,q,radius,P1);calculatePositionOnCurve(u+0.01,p,q,radius,P2);// calculate orthonormal basis\nT.subVectors(P2,P1);N.addVectors(P2,P1);B.crossVectors(T,N);N.crossVectors(B,T);// normalize B, N. T can be ignored, we don't use it\nB.normalize();N.normalize();for(j=0;j<=radialSegments;++j){// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\nvar v=j/radialSegments*Math.PI*2;var cx=-tube*Math.cos(v);var cy=tube*Math.sin(v);// now calculate the final vertex position.\n// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\nvertex.x=P1.x+(cx*N.x+cy*B.x);vertex.y=P1.y+(cx*N.y+cy*B.y);vertex.z=P1.z+(cx*N.z+cy*B.z);// vertex\nvertices.setXYZ(index,vertex.x,vertex.y,vertex.z);// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\nnormal.subVectors(vertex,P1).normalize();normals.setXYZ(index,normal.x,normal.y,normal.z);// uv\nuv.x=i/tubularSegments;uv.y=j/radialSegments;uvs.setXY(index,uv.x,uv.y);// increase index\nindex++;}}// generate indices\nfor(j=1;j<=tubularSegments;j++){for(i=1;i<=radialSegments;i++){// indices\nvar a=(radialSegments+1)*(j-1)+(i-1);var b=(radialSegments+1)*j+(i-1);var c=(radialSegments+1)*j+i;var d=(radialSegments+1)*(j-1)+i;// face one\nindices.setX(indexOffset,a);indexOffset++;indices.setX(indexOffset,b);indexOffset++;indices.setX(indexOffset,d);indexOffset++;// face two\nindices.setX(indexOffset,b);indexOffset++;indices.setX(indexOffset,c);indexOffset++;indices.setX(indexOffset,d);indexOffset++;}}// build geometry\nthis.setIndex(indices);this.addAttribute('position',vertices);this.addAttribute('normal',normals);this.addAttribute('uv',uvs);// this function calculates the current position on the torus curve\nfunction calculatePositionOnCurve(u,p,q,radius,position){var cu=Math.cos(u);var su=Math.sin(u);var quOverP=q/p*u;var cs=Math.cos(quOverP);position.x=radius*(2+cs)*0.5*cu;position.y=radius*(2+cs)*su*0.5;position.z=radius*Math.sin(quOverP)*0.5;}};THREE.TorusKnotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusKnotBufferGeometry.prototype.constructor=THREE.TorusKnotBufferGeometry;// File:src/extras/geometries/TorusKnotGeometry.js\n/**\r\n * @author oosmoxiecode\r\n */THREE.TorusKnotGeometry=function(radius,tube,tubularSegments,radialSegments,p,q,heightScale){THREE.Geometry.call(this);this.type='TorusKnotGeometry';this.parameters={radius:radius,tube:tube,tubularSegments:tubularSegments,radialSegments:radialSegments,p:p,q:q};if(heightScale!==undefined)console.warn('THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.');this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(radius,tube,tubularSegments,radialSegments,p,q));this.mergeVertices();};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;// File:src/extras/geometries/TubeGeometry.js\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */THREE.TubeGeometry=function(path,segments,radius,radialSegments,closed,taper){THREE.Geometry.call(this);this.type='TubeGeometry';this.parameters={path:path,segments:segments,radius:radius,radialSegments:radialSegments,closed:closed,taper:taper};segments=segments||64;radius=radius||1;radialSegments=radialSegments||8;closed=closed||false;taper=taper||THREE.TubeGeometry.NoTaper;var grid=[];var scope=this,tangent,normal,binormal,numpoints=segments+1,u,v,r,cx,cy,pos,pos2=new THREE.Vector3(),i,j,ip,jp,a,b,c,d,uva,uvb,uvc,uvd;var frames=new THREE.TubeGeometry.FrenetFrames(path,segments,closed),tangents=frames.tangents,normals=frames.normals,binormals=frames.binormals;// proxy internals\nthis.tangents=tangents;this.normals=normals;this.binormals=binormals;function vert(x,y,z){return scope.vertices.push(new THREE.Vector3(x,y,z))-1;}// construct the grid\nfor(i=0;i<numpoints;i++){grid[i]=[];u=i/(numpoints-1);pos=path.getPointAt(u);tangent=tangents[i];normal=normals[i];binormal=binormals[i];r=radius*taper(u);for(j=0;j<radialSegments;j++){v=j/radialSegments*2*Math.PI;cx=-r*Math.cos(v);// TODO: Hack: Negating it so it faces outside.\ncy=r*Math.sin(v);pos2.copy(pos);pos2.x+=cx*normal.x+cy*binormal.x;pos2.y+=cx*normal.y+cy*binormal.y;pos2.z+=cx*normal.z+cy*binormal.z;grid[i][j]=vert(pos2.x,pos2.y,pos2.z);}}// construct the mesh\nfor(i=0;i<segments;i++){for(j=0;j<radialSegments;j++){ip=closed?(i+1)%segments:i+1;jp=(j+1)%radialSegments;a=grid[i][j];// *** NOT NECESSARILY PLANAR ! ***\nb=grid[ip][j];c=grid[ip][jp];d=grid[i][jp];uva=new THREE.Vector2(i/segments,j/radialSegments);uvb=new THREE.Vector2((i+1)/segments,j/radialSegments);uvc=new THREE.Vector2((i+1)/segments,(j+1)/radialSegments);uvd=new THREE.Vector2(i/segments,(j+1)/radialSegments);this.faces.push(new THREE.Face3(a,b,d));this.faceVertexUvs[0].push([uva,uvb,uvd]);this.faces.push(new THREE.Face3(b,c,d));this.faceVertexUvs[0].push([uvb.clone(),uvc,uvd.clone()]);}}this.computeFaceNormals();this.computeVertexNormals();};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(u){return 1;};THREE.TubeGeometry.SinusoidalTaper=function(u){return Math.sin(Math.PI*u);};// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\nTHREE.TubeGeometry.FrenetFrames=function(path,segments,closed){var normal=new THREE.Vector3(),tangents=[],normals=[],binormals=[],vec=new THREE.Vector3(),mat=new THREE.Matrix4(),numpoints=segments+1,theta,smallest,tx,ty,tz,i,u;// expose internals\nthis.tangents=tangents;this.normals=normals;this.binormals=binormals;// compute the tangent vectors for each segment on the path\nfor(i=0;i<numpoints;i++){u=i/(numpoints-1);tangents[i]=path.getTangentAt(u);tangents[i].normalize();}initialNormal3();/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/function initialNormal3(){// select an initial normal vector perpendicular to the first tangent vector,\n// and in the direction of the smallest tangent xyz component\nnormals[0]=new THREE.Vector3();binormals[0]=new THREE.Vector3();smallest=Number.MAX_VALUE;tx=Math.abs(tangents[0].x);ty=Math.abs(tangents[0].y);tz=Math.abs(tangents[0].z);if(tx<=smallest){smallest=tx;normal.set(1,0,0);}if(ty<=smallest){smallest=ty;normal.set(0,1,0);}if(tz<=smallest){normal.set(0,0,1);}vec.crossVectors(tangents[0],normal).normalize();normals[0].crossVectors(tangents[0],vec);binormals[0].crossVectors(tangents[0],normals[0]);}// compute the slowly-varying normal and binormal vectors for each segment on the path\nfor(i=1;i<numpoints;i++){normals[i]=normals[i-1].clone();binormals[i]=binormals[i-1].clone();vec.crossVectors(tangents[i-1],tangents[i]);if(vec.length()>Number.EPSILON){vec.normalize();theta=Math.acos(THREE.Math.clamp(tangents[i-1].dot(tangents[i]),-1,1));// clamp for floating pt errors\nnormals[i].applyMatrix4(mat.makeRotationAxis(vec,theta));}binormals[i].crossVectors(tangents[i],normals[i]);}// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\nif(closed){theta=Math.acos(THREE.Math.clamp(normals[0].dot(normals[numpoints-1]),-1,1));theta/=numpoints-1;if(tangents[0].dot(vec.crossVectors(normals[0],normals[numpoints-1]))>0){theta=-theta;}for(i=1;i<numpoints;i++){// twist a little...\nnormals[i].applyMatrix4(mat.makeRotationAxis(tangents[i],theta*i));binormals[i].crossVectors(tangents[i],normals[i]);}}};// File:src/extras/geometries/PolyhedronGeometry.js\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/THREE.PolyhedronGeometry=function(vertices,indices,radius,detail){THREE.Geometry.call(this);this.type='PolyhedronGeometry';this.parameters={vertices:vertices,indices:indices,radius:radius,detail:detail};radius=radius||1;detail=detail||0;var that=this;for(var i=0,l=vertices.length;i<l;i+=3){prepare(new THREE.Vector3(vertices[i],vertices[i+1],vertices[i+2]));}var p=this.vertices;var faces=[];for(var i=0,j=0,l=indices.length;i<l;i+=3,j++){var v1=p[indices[i]];var v2=p[indices[i+1]];var v3=p[indices[i+2]];faces[j]=new THREE.Face3(v1.index,v2.index,v3.index,[v1.clone(),v2.clone(),v3.clone()],undefined,j);}var centroid=new THREE.Vector3();for(var i=0,l=faces.length;i<l;i++){subdivide(faces[i],detail);}// Handle case when face straddles the seam\nfor(var i=0,l=this.faceVertexUvs[0].length;i<l;i++){var uvs=this.faceVertexUvs[0][i];var x0=uvs[0].x;var x1=uvs[1].x;var x2=uvs[2].x;var max=Math.max(x0,x1,x2);var min=Math.min(x0,x1,x2);if(max>0.9&&min<0.1){// 0.9 is somewhat arbitrary\nif(x0<0.2)uvs[0].x+=1;if(x1<0.2)uvs[1].x+=1;if(x2<0.2)uvs[2].x+=1;}}// Apply radius\nfor(var i=0,l=this.vertices.length;i<l;i++){this.vertices[i].multiplyScalar(radius);}// Merge vertices\nthis.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),radius);// Project vector onto sphere's surface\nfunction prepare(vector){var vertex=vector.normalize().clone();vertex.index=that.vertices.push(vertex)-1;// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\nvar u=azimuth(vector)/2/Math.PI+0.5;var v=inclination(vector)/Math.PI+0.5;vertex.uv=new THREE.Vector2(u,1-v);return vertex;}// Approximate a curved face with recursively sub-divided triangles.\nfunction make(v1,v2,v3,materialIndex){var face=new THREE.Face3(v1.index,v2.index,v3.index,[v1.clone(),v2.clone(),v3.clone()],undefined,materialIndex);that.faces.push(face);centroid.copy(v1).add(v2).add(v3).divideScalar(3);var azi=azimuth(centroid);that.faceVertexUvs[0].push([correctUV(v1.uv,v1,azi),correctUV(v2.uv,v2,azi),correctUV(v3.uv,v3,azi)]);}// Analytically subdivide a face to the required detail level.\nfunction subdivide(face,detail){var cols=Math.pow(2,detail);var a=prepare(that.vertices[face.a]);var b=prepare(that.vertices[face.b]);var c=prepare(that.vertices[face.c]);var v=[];var materialIndex=face.materialIndex;// Construct all of the vertices for this subdivision.\nfor(var i=0;i<=cols;i++){v[i]=[];var aj=prepare(a.clone().lerp(c,i/cols));var bj=prepare(b.clone().lerp(c,i/cols));var rows=cols-i;for(var j=0;j<=rows;j++){if(j===0&&i===cols){v[i][j]=aj;}else{v[i][j]=prepare(aj.clone().lerp(bj,j/rows));}}}// Construct all of the faces.\nfor(var i=0;i<cols;i++){for(var j=0;j<2*(cols-i)-1;j++){var k=Math.floor(j/2);if(j%2===0){make(v[i][k+1],v[i+1][k],v[i][k],materialIndex);}else{make(v[i][k+1],v[i+1][k+1],v[i+1][k],materialIndex);}}}}// Angle around the Y axis, counter-clockwise when looking from above.\nfunction azimuth(vector){return Math.atan2(vector.z,-vector.x);}// Angle above the XZ plane.\nfunction inclination(vector){return Math.atan2(-vector.y,Math.sqrt(vector.x*vector.x+vector.z*vector.z));}// Texture fixing helper. Spheres have some odd behaviours.\nfunction correctUV(uv,vector,azimuth){if(azimuth<0&&uv.x===1)uv=new THREE.Vector2(uv.x-1,uv.y);if(vector.x===0&&vector.z===0)uv=new THREE.Vector2(azimuth/2/Math.PI+0.5,uv.y);return uv.clone();}};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;// File:src/extras/geometries/DodecahedronGeometry.js\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */THREE.DodecahedronGeometry=function(radius,detail){var t=(1+Math.sqrt(5))/2;var r=1/t;var vertices=[// (±1, ±1, ±1)\n-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,// (0, ±1/φ, ±φ)\n0,-r,-t,0,-r,t,0,r,-t,0,r,t,// (±1/φ, ±φ, 0)\n-r,-t,0,-r,t,0,r,-t,0,r,t,0,// (±φ, 0, ±1/φ)\n-t,0,-r,t,0,-r,-t,0,r,t,0,r];var indices=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail);this.type='DodecahedronGeometry';this.parameters={radius:radius,detail:detail};};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;// File:src/extras/geometries/IcosahedronGeometry.js\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */THREE.IcosahedronGeometry=function(radius,detail){var t=(1+Math.sqrt(5))/2;var vertices=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1];var indices=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail);this.type='IcosahedronGeometry';this.parameters={radius:radius,detail:detail};};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;// File:src/extras/geometries/OctahedronGeometry.js\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */THREE.OctahedronGeometry=function(radius,detail){var vertices=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var indices=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail);this.type='OctahedronGeometry';this.parameters={radius:radius,detail:detail};};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;// File:src/extras/geometries/TetrahedronGeometry.js\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */THREE.TetrahedronGeometry=function(radius,detail){var vertices=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var indices=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail);this.type='TetrahedronGeometry';this.parameters={radius:radius,detail:detail};};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;// File:src/extras/geometries/ParametricGeometry.js\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */THREE.ParametricGeometry=function(func,slices,stacks){THREE.Geometry.call(this);this.type='ParametricGeometry';this.parameters={func:func,slices:slices,stacks:stacks};var verts=this.vertices;var faces=this.faces;var uvs=this.faceVertexUvs[0];var i,j,p;var u,v;var sliceCount=slices+1;for(i=0;i<=stacks;i++){v=i/stacks;for(j=0;j<=slices;j++){u=j/slices;p=func(u,v);verts.push(p);}}var a,b,c,d;var uva,uvb,uvc,uvd;for(i=0;i<stacks;i++){for(j=0;j<slices;j++){a=i*sliceCount+j;b=i*sliceCount+j+1;c=(i+1)*sliceCount+j+1;d=(i+1)*sliceCount+j;uva=new THREE.Vector2(j/slices,i/stacks);uvb=new THREE.Vector2((j+1)/slices,i/stacks);uvc=new THREE.Vector2((j+1)/slices,(i+1)/stacks);uvd=new THREE.Vector2(j/slices,(i+1)/stacks);faces.push(new THREE.Face3(a,b,d));uvs.push([uva,uvb,uvd]);faces.push(new THREE.Face3(b,c,d));uvs.push([uvb.clone(),uvc,uvd.clone()]);}}// console.log(this);\n// magic bullet\n// var diff = this.mergeVertices();\n// console.log('removed ', diff, ' vertices by merging');\nthis.computeFaceNormals();this.computeVertexNormals();};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;// File:src/extras/geometries/WireframeGeometry.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.WireframeGeometry=function(geometry){THREE.BufferGeometry.call(this);var edge=[0,0],hash={};function sortFunction(a,b){return a-b;}var keys=['a','b','c'];if(geometry instanceof THREE.Geometry){var vertices=geometry.vertices;var faces=geometry.faces;var numEdges=0;// allocate maximal size\nvar edges=new Uint32Array(6*faces.length);for(var i=0,l=faces.length;i<l;i++){var face=faces[i];for(var j=0;j<3;j++){edge[0]=face[keys[j]];edge[1]=face[keys[(j+1)%3]];edge.sort(sortFunction);var key=edge.toString();if(hash[key]===undefined){edges[2*numEdges]=edge[0];edges[2*numEdges+1]=edge[1];hash[key]=true;numEdges++;}}}var coords=new Float32Array(numEdges*2*3);for(var i=0,l=numEdges;i<l;i++){for(var j=0;j<2;j++){var vertex=vertices[edges[2*i+j]];var index=6*i+3*j;coords[index+0]=vertex.x;coords[index+1]=vertex.y;coords[index+2]=vertex.z;}}this.addAttribute('position',new THREE.BufferAttribute(coords,3));}else if(geometry instanceof THREE.BufferGeometry){if(geometry.index!==null){// Indexed BufferGeometry\nvar indices=geometry.index.array;var vertices=geometry.attributes.position;var groups=geometry.groups;var numEdges=0;if(groups.length===0){geometry.addGroup(0,indices.length);}// allocate maximal size\nvar edges=new Uint32Array(2*indices.length);for(var o=0,ol=groups.length;o<ol;++o){var group=groups[o];var start=group.start;var count=group.count;for(var i=start,il=start+count;i<il;i+=3){for(var j=0;j<3;j++){edge[0]=indices[i+j];edge[1]=indices[i+(j+1)%3];edge.sort(sortFunction);var key=edge.toString();if(hash[key]===undefined){edges[2*numEdges]=edge[0];edges[2*numEdges+1]=edge[1];hash[key]=true;numEdges++;}}}}var coords=new Float32Array(numEdges*2*3);for(var i=0,l=numEdges;i<l;i++){for(var j=0;j<2;j++){var index=6*i+3*j;var index2=edges[2*i+j];coords[index+0]=vertices.getX(index2);coords[index+1]=vertices.getY(index2);coords[index+2]=vertices.getZ(index2);}}this.addAttribute('position',new THREE.BufferAttribute(coords,3));}else{// non-indexed BufferGeometry\nvar vertices=geometry.attributes.position.array;var numEdges=vertices.length/3;var numTris=numEdges/3;var coords=new Float32Array(numEdges*2*3);for(var i=0,l=numTris;i<l;i++){for(var j=0;j<3;j++){var index=18*i+6*j;var index1=9*i+3*j;coords[index+0]=vertices[index1];coords[index+1]=vertices[index1+1];coords[index+2]=vertices[index1+2];var index2=9*i+3*((j+1)%3);coords[index+3]=vertices[index2];coords[index+4]=vertices[index2+1];coords[index+5]=vertices[index2+2];}}this.addAttribute('position',new THREE.BufferAttribute(coords,3));}}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;// File:src/extras/helpers/AxisHelper.js\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.AxisHelper=function(size){size=size||1;var vertices=new Float32Array([0,0,0,size,0,0,0,0,0,0,size,0,0,0,0,0,0,size]);var colors=new Float32Array([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1]);var geometry=new THREE.BufferGeometry();geometry.addAttribute('position',new THREE.BufferAttribute(vertices,3));geometry.addAttribute('color',new THREE.BufferAttribute(colors,3));var material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,geometry,material);};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;// File:src/extras/helpers/ArrowHelper.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */THREE.ArrowHelper=function(){var lineGeometry=new THREE.BufferGeometry();lineGeometry.addAttribute('position',new THREE.Float32Attribute([0,0,0,0,1,0],3));var coneGeometry=new THREE.CylinderBufferGeometry(0,0.5,1,5,1);coneGeometry.translate(0,-0.5,0);return function ArrowHelper(dir,origin,length,color,headLength,headWidth){// dir is assumed to be normalized\nTHREE.Object3D.call(this);if(color===undefined)color=0xffff00;if(length===undefined)length=1;if(headLength===undefined)headLength=0.2*length;if(headWidth===undefined)headWidth=0.2*headLength;this.position.copy(origin);this.line=new THREE.Line(lineGeometry,new THREE.LineBasicMaterial({color:color}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new THREE.Mesh(coneGeometry,new THREE.MeshBasicMaterial({color:color}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(dir);this.setLength(length,headLength,headWidth);};}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;THREE.ArrowHelper.prototype.setDirection=function(){var axis=new THREE.Vector3();var radians;return function setDirection(dir){// dir is assumed to be normalized\nif(dir.y>0.99999){this.quaternion.set(0,0,0,1);}else if(dir.y<-0.99999){this.quaternion.set(1,0,0,0);}else{axis.set(dir.z,0,-dir.x).normalize();radians=Math.acos(dir.y);this.quaternion.setFromAxisAngle(axis,radians);}};}();THREE.ArrowHelper.prototype.setLength=function(length,headLength,headWidth){if(headLength===undefined)headLength=0.2*length;if(headWidth===undefined)headWidth=0.2*headLength;this.line.scale.set(1,Math.max(0,length-headLength),1);this.line.updateMatrix();this.cone.scale.set(headWidth,headLength,headWidth);this.cone.position.y=length;this.cone.updateMatrix();};THREE.ArrowHelper.prototype.setColor=function(color){this.line.material.color.copy(color);this.cone.material.color.copy(color);};// File:src/extras/helpers/BoxHelper.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.BoxHelper=function(object){var indices=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var positions=new Float32Array(8*3);var geometry=new THREE.BufferGeometry();geometry.setIndex(new THREE.BufferAttribute(indices,1));geometry.addAttribute('position',new THREE.BufferAttribute(positions,3));THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:0xffff00}));if(object!==undefined){this.update(object);}};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;THREE.BoxHelper.prototype.update=function(){var box=new THREE.Box3();return function(object){if(object instanceof THREE.Box3){box.copy(object);}else{box.setFromObject(object);}if(box.isEmpty())return;var min=box.min;var max=box.max;/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/var position=this.geometry.attributes.position;var array=position.array;array[0]=max.x;array[1]=max.y;array[2]=max.z;array[3]=min.x;array[4]=max.y;array[5]=max.z;array[6]=min.x;array[7]=min.y;array[8]=max.z;array[9]=max.x;array[10]=min.y;array[11]=max.z;array[12]=max.x;array[13]=max.y;array[14]=min.z;array[15]=min.x;array[16]=max.y;array[17]=min.z;array[18]=min.x;array[19]=min.y;array[20]=min.z;array[21]=max.x;array[22]=min.y;array[23]=min.z;position.needsUpdate=true;this.geometry.computeBoundingSphere();};}();// File:src/extras/helpers/BoundingBoxHelper.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */// a helper to show the world-axis-aligned bounding box for an object\nTHREE.BoundingBoxHelper=function(object,hex){var color=hex!==undefined?hex:0x888888;this.object=object;this.box=new THREE.Box3();THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:color,wireframe:true}));};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position);};// File:src/extras/helpers/CameraHelper.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */THREE.CameraHelper=function(camera){var geometry=new THREE.Geometry();var material=new THREE.LineBasicMaterial({color:0xffffff,vertexColors:THREE.FaceColors});var pointMap={};// colors\nvar hexFrustum=0xffaa00;var hexCone=0xff0000;var hexUp=0x00aaff;var hexTarget=0xffffff;var hexCross=0x333333;// near\naddLine(\"n1\",\"n2\",hexFrustum);addLine(\"n2\",\"n4\",hexFrustum);addLine(\"n4\",\"n3\",hexFrustum);addLine(\"n3\",\"n1\",hexFrustum);// far\naddLine(\"f1\",\"f2\",hexFrustum);addLine(\"f2\",\"f4\",hexFrustum);addLine(\"f4\",\"f3\",hexFrustum);addLine(\"f3\",\"f1\",hexFrustum);// sides\naddLine(\"n1\",\"f1\",hexFrustum);addLine(\"n2\",\"f2\",hexFrustum);addLine(\"n3\",\"f3\",hexFrustum);addLine(\"n4\",\"f4\",hexFrustum);// cone\naddLine(\"p\",\"n1\",hexCone);addLine(\"p\",\"n2\",hexCone);addLine(\"p\",\"n3\",hexCone);addLine(\"p\",\"n4\",hexCone);// up\naddLine(\"u1\",\"u2\",hexUp);addLine(\"u2\",\"u3\",hexUp);addLine(\"u3\",\"u1\",hexUp);// target\naddLine(\"c\",\"t\",hexTarget);addLine(\"p\",\"c\",hexCross);// cross\naddLine(\"cn1\",\"cn2\",hexCross);addLine(\"cn3\",\"cn4\",hexCross);addLine(\"cf1\",\"cf2\",hexCross);addLine(\"cf3\",\"cf4\",hexCross);function addLine(a,b,hex){addPoint(a,hex);addPoint(b,hex);}function addPoint(id,hex){geometry.vertices.push(new THREE.Vector3());geometry.colors.push(new THREE.Color(hex));if(pointMap[id]===undefined){pointMap[id]=[];}pointMap[id].push(geometry.vertices.length-1);}THREE.LineSegments.call(this,geometry,material);this.camera=camera;this.camera.updateProjectionMatrix();this.matrix=camera.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=pointMap;this.update();};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;THREE.CameraHelper.prototype.update=function(){var geometry,pointMap;var vector=new THREE.Vector3();var camera=new THREE.Camera();function setPoint(point,x,y,z){vector.set(x,y,z).unproject(camera);var points=pointMap[point];if(points!==undefined){for(var i=0,il=points.length;i<il;i++){geometry.vertices[points[i]].copy(vector);}}}return function(){geometry=this.geometry;pointMap=this.pointMap;var w=1,h=1;// we need just camera projection matrix\n// world matrix must be identity\ncamera.projectionMatrix.copy(this.camera.projectionMatrix);// center / target\nsetPoint(\"c\",0,0,-1);setPoint(\"t\",0,0,1);// near\nsetPoint(\"n1\",-w,-h,-1);setPoint(\"n2\",w,-h,-1);setPoint(\"n3\",-w,h,-1);setPoint(\"n4\",w,h,-1);// far\nsetPoint(\"f1\",-w,-h,1);setPoint(\"f2\",w,-h,1);setPoint(\"f3\",-w,h,1);setPoint(\"f4\",w,h,1);// up\nsetPoint(\"u1\",w*0.7,h*1.1,-1);setPoint(\"u2\",-w*0.7,h*1.1,-1);setPoint(\"u3\",0,h*2,-1);// cross\nsetPoint(\"cf1\",-w,0,1);setPoint(\"cf2\",w,0,1);setPoint(\"cf3\",0,-h,1);setPoint(\"cf4\",0,h,1);setPoint(\"cn1\",-w,0,-1);setPoint(\"cn2\",w,0,-1);setPoint(\"cn3\",0,-h,-1);setPoint(\"cn4\",0,h,-1);geometry.verticesNeedUpdate=true;};}();// File:src/extras/helpers/DirectionalLightHelper.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */THREE.DirectionalLightHelper=function(light,size){THREE.Object3D.call(this);this.light=light;this.light.updateMatrixWorld();this.matrix=light.matrixWorld;this.matrixAutoUpdate=false;if(size===undefined)size=1;var geometry=new THREE.BufferGeometry();geometry.addAttribute('position',new THREE.Float32Attribute([-size,size,0,size,size,0,size,-size,0,-size,-size,0,-size,size,0],3));var material=new THREE.LineBasicMaterial({fog:false});this.add(new THREE.Line(geometry,material));geometry=new THREE.BufferGeometry();geometry.addAttribute('position',new THREE.Float32Attribute([0,0,0,0,0,1],3));this.add(new THREE.Line(geometry,material));this.update();};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){var lightPlane=this.children[0];var targetLine=this.children[1];lightPlane.geometry.dispose();lightPlane.material.dispose();targetLine.geometry.dispose();targetLine.material.dispose();};THREE.DirectionalLightHelper.prototype.update=function(){var v1=new THREE.Vector3();var v2=new THREE.Vector3();var v3=new THREE.Vector3();return function(){v1.setFromMatrixPosition(this.light.matrixWorld);v2.setFromMatrixPosition(this.light.target.matrixWorld);v3.subVectors(v2,v1);var lightPlane=this.children[0];var targetLine=this.children[1];lightPlane.lookAt(v3);lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);targetLine.lookAt(v3);targetLine.scale.z=v3.length();};}();// File:src/extras/helpers/EdgesHelper.js\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */THREE.EdgesHelper=function(object,hex,thresholdAngle){var color=hex!==undefined?hex:0xffffff;THREE.LineSegments.call(this,new THREE.EdgesGeometry(object.geometry,thresholdAngle),new THREE.LineBasicMaterial({color:color}));this.matrix=object.matrixWorld;this.matrixAutoUpdate=false;};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;// File:src/extras/helpers/FaceNormalsHelper.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/THREE.FaceNormalsHelper=function(object,size,hex,linewidth){// FaceNormalsHelper only supports THREE.Geometry\nthis.object=object;this.size=size!==undefined?size:1;var color=hex!==undefined?hex:0xffff00;var width=linewidth!==undefined?linewidth:1;//\nvar nNormals=0;var objGeometry=this.object.geometry;if(objGeometry instanceof THREE.Geometry){nNormals=objGeometry.faces.length;}else{console.warn('THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.');}//\nvar geometry=new THREE.BufferGeometry();var positions=new THREE.Float32Attribute(nNormals*2*3,3);geometry.addAttribute('position',positions);THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:color,linewidth:width}));//\nthis.matrixAutoUpdate=false;this.update();};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;THREE.FaceNormalsHelper.prototype.update=function(){var v1=new THREE.Vector3();var v2=new THREE.Vector3();var normalMatrix=new THREE.Matrix3();return function update(){this.object.updateMatrixWorld(true);normalMatrix.getNormalMatrix(this.object.matrixWorld);var matrixWorld=this.object.matrixWorld;var position=this.geometry.attributes.position;//\nvar objGeometry=this.object.geometry;var vertices=objGeometry.vertices;var faces=objGeometry.faces;var idx=0;for(var i=0,l=faces.length;i<l;i++){var face=faces[i];var normal=face.normal;v1.copy(vertices[face.a]).add(vertices[face.b]).add(vertices[face.c]).divideScalar(3).applyMatrix4(matrixWorld);v2.copy(normal).applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1);position.setXYZ(idx,v1.x,v1.y,v1.z);idx=idx+1;position.setXYZ(idx,v2.x,v2.y,v2.z);idx=idx+1;}position.needsUpdate=true;return this;};}();// File:src/extras/helpers/GridHelper.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.GridHelper=function(size,step,color1,color2){color1=new THREE.Color(color1!==undefined?color1:0x444444);color2=new THREE.Color(color2!==undefined?color2:0x888888);var vertices=[];var colors=[];for(var i=-size,j=0;i<=size;i+=step){vertices.push(-size,0,i,size,0,i);vertices.push(i,0,-size,i,0,size);var color=i===0?color1:color2;color.toArray(colors,j);j+=3;color.toArray(colors,j);j+=3;color.toArray(colors,j);j+=3;color.toArray(colors,j);j+=3;}var geometry=new THREE.BufferGeometry();geometry.addAttribute('position',new THREE.Float32Attribute(vertices,3));geometry.addAttribute('color',new THREE.Float32Attribute(colors,3));var material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,geometry,material);};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(){console.error('THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.');};// File:src/extras/helpers/HemisphereLightHelper.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.HemisphereLightHelper=function(light,sphereSize){THREE.Object3D.call(this);this.light=light;this.light.updateMatrixWorld();this.matrix=light.matrixWorld;this.matrixAutoUpdate=false;this.colors=[new THREE.Color(),new THREE.Color()];var geometry=new THREE.SphereGeometry(sphereSize,4,2);geometry.rotateX(-Math.PI/2);for(var i=0,il=8;i<il;i++){geometry.faces[i].color=this.colors[i<4?0:1];}var material=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:true});this.lightSphere=new THREE.Mesh(geometry,material);this.add(this.lightSphere);this.update();};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose();};THREE.HemisphereLightHelper.prototype.update=function(){var vector=new THREE.Vector3();return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(vector.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=true;};}();// File:src/extras/helpers/PointLightHelper.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.PointLightHelper=function(light,sphereSize){this.light=light;this.light.updateMatrixWorld();var geometry=new THREE.SphereBufferGeometry(sphereSize,4,2);var material=new THREE.MeshBasicMaterial({wireframe:true,fog:false});material.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,geometry,material);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose();};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/};// File:src/extras/helpers/SkeletonHelper.js\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */THREE.SkeletonHelper=function(object){this.bones=this.getBoneList(object);var geometry=new THREE.Geometry();for(var i=0;i<this.bones.length;i++){var bone=this.bones[i];if(bone.parent instanceof THREE.Bone){geometry.vertices.push(new THREE.Vector3());geometry.vertices.push(new THREE.Vector3());geometry.colors.push(new THREE.Color(0,0,1));geometry.colors.push(new THREE.Color(0,1,0));}}geometry.dynamic=true;var material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:false,depthWrite:false,transparent:true});THREE.LineSegments.call(this,geometry,material);this.root=object;this.matrix=object.matrixWorld;this.matrixAutoUpdate=false;this.update();};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(object){var boneList=[];if(object instanceof THREE.Bone){boneList.push(object);}for(var i=0;i<object.children.length;i++){boneList.push.apply(boneList,this.getBoneList(object.children[i]));}return boneList;};THREE.SkeletonHelper.prototype.update=function(){var geometry=this.geometry;var matrixWorldInv=new THREE.Matrix4().getInverse(this.root.matrixWorld);var boneMatrix=new THREE.Matrix4();var j=0;for(var i=0;i<this.bones.length;i++){var bone=this.bones[i];if(bone.parent instanceof THREE.Bone){boneMatrix.multiplyMatrices(matrixWorldInv,bone.matrixWorld);geometry.vertices[j].setFromMatrixPosition(boneMatrix);boneMatrix.multiplyMatrices(matrixWorldInv,bone.parent.matrixWorld);geometry.vertices[j+1].setFromMatrixPosition(boneMatrix);j+=2;}}geometry.verticesNeedUpdate=true;geometry.computeBoundingSphere();};// File:src/extras/helpers/SpotLightHelper.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/THREE.SpotLightHelper=function(light){THREE.Object3D.call(this);this.light=light;this.light.updateMatrixWorld();this.matrix=light.matrixWorld;this.matrixAutoUpdate=false;var geometry=new THREE.BufferGeometry();var positions=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,j=1,l=32;i<l;i++,j++){var p1=i/l*Math.PI*2;var p2=j/l*Math.PI*2;positions.push(Math.cos(p1),Math.sin(p1),1,Math.cos(p2),Math.sin(p2),1);}geometry.addAttribute('position',new THREE.Float32Attribute(positions,3));var material=new THREE.LineBasicMaterial({fog:false});this.cone=new THREE.LineSegments(geometry,material);this.add(this.cone);this.update();};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose();};THREE.SpotLightHelper.prototype.update=function(){var vector=new THREE.Vector3();var vector2=new THREE.Vector3();return function(){var coneLength=this.light.distance?this.light.distance:1000;var coneWidth=coneLength*Math.tan(this.light.angle);this.cone.scale.set(coneWidth,coneWidth,coneLength);vector.setFromMatrixPosition(this.light.matrixWorld);vector2.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(vector2.sub(vector));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);};}();// File:src/extras/helpers/VertexNormalsHelper.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/THREE.VertexNormalsHelper=function(object,size,hex,linewidth){this.object=object;this.size=size!==undefined?size:1;var color=hex!==undefined?hex:0xff0000;var width=linewidth!==undefined?linewidth:1;//\nvar nNormals=0;var objGeometry=this.object.geometry;if(objGeometry instanceof THREE.Geometry){nNormals=objGeometry.faces.length*3;}else if(objGeometry instanceof THREE.BufferGeometry){nNormals=objGeometry.attributes.normal.count;}//\nvar geometry=new THREE.BufferGeometry();var positions=new THREE.Float32Attribute(nNormals*2*3,3);geometry.addAttribute('position',positions);THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:color,linewidth:width}));//\nthis.matrixAutoUpdate=false;this.update();};THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;THREE.VertexNormalsHelper.prototype.update=function(){var v1=new THREE.Vector3();var v2=new THREE.Vector3();var normalMatrix=new THREE.Matrix3();return function update(){var keys=['a','b','c'];this.object.updateMatrixWorld(true);normalMatrix.getNormalMatrix(this.object.matrixWorld);var matrixWorld=this.object.matrixWorld;var position=this.geometry.attributes.position;//\nvar objGeometry=this.object.geometry;if(objGeometry instanceof THREE.Geometry){var vertices=objGeometry.vertices;var faces=objGeometry.faces;var idx=0;for(var i=0,l=faces.length;i<l;i++){var face=faces[i];for(var j=0,jl=face.vertexNormals.length;j<jl;j++){var vertex=vertices[face[keys[j]]];var normal=face.vertexNormals[j];v1.copy(vertex).applyMatrix4(matrixWorld);v2.copy(normal).applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1);position.setXYZ(idx,v1.x,v1.y,v1.z);idx=idx+1;position.setXYZ(idx,v2.x,v2.y,v2.z);idx=idx+1;}}}else if(objGeometry instanceof THREE.BufferGeometry){var objPos=objGeometry.attributes.position;var objNorm=objGeometry.attributes.normal;var idx=0;// for simplicity, ignore index and drawcalls, and render every normal\nfor(var j=0,jl=objPos.count;j<jl;j++){v1.set(objPos.getX(j),objPos.getY(j),objPos.getZ(j)).applyMatrix4(matrixWorld);v2.set(objNorm.getX(j),objNorm.getY(j),objNorm.getZ(j));v2.applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1);position.setXYZ(idx,v1.x,v1.y,v1.z);idx=idx+1;position.setXYZ(idx,v2.x,v2.y,v2.z);idx=idx+1;}}position.needsUpdate=true;return this;};}();// File:src/extras/helpers/WireframeHelper.js\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */THREE.WireframeHelper=function(object,hex){var color=hex!==undefined?hex:0xffffff;THREE.LineSegments.call(this,new THREE.WireframeGeometry(object.geometry),new THREE.LineBasicMaterial({color:color}));this.matrix=object.matrixWorld;this.matrixAutoUpdate=false;};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;// File:src/extras/objects/ImmediateRenderObject.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.ImmediateRenderObject=function(material){THREE.Object3D.call(this);this.material=material;this.render=function(renderCallback){};};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;// File:src/extras/objects/MorphBlendMesh.js\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */THREE.MorphBlendMesh=function(geometry,material){THREE.Mesh.call(this,geometry,material);this.animationsMap={};this.animationsList=[];// prepare default animation\n// (all frames played together in 1 second)\nvar numFrames=this.geometry.morphTargets.length;var name=\"__default\";var startFrame=0;var endFrame=numFrames-1;var fps=numFrames/1;this.createAnimation(name,startFrame,endFrame,fps);this.setAnimationWeight(name,1);};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;THREE.MorphBlendMesh.prototype.createAnimation=function(name,start,end,fps){var animation={start:start,end:end,length:end-start+1,fps:fps,duration:(end-start)/fps,lastFrame:0,currentFrame:0,active:false,time:0,direction:1,weight:1,directionBackwards:false,mirroredLoop:false};this.animationsMap[name]=animation;this.animationsList.push(animation);};THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(fps){var pattern=/([a-z]+)_?(\\d+)/i;var firstAnimation,frameRanges={};var geometry=this.geometry;for(var i=0,il=geometry.morphTargets.length;i<il;i++){var morph=geometry.morphTargets[i];var chunks=morph.name.match(pattern);if(chunks&&chunks.length>1){var name=chunks[1];if(!frameRanges[name])frameRanges[name]={start:Infinity,end:-Infinity};var range=frameRanges[name];if(i<range.start)range.start=i;if(i>range.end)range.end=i;if(!firstAnimation)firstAnimation=name;}}for(var name in frameRanges){var range=frameRanges[name];this.createAnimation(name,range.start,range.end,fps);}this.firstAnimation=firstAnimation;};THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(name){var animation=this.animationsMap[name];if(animation){animation.direction=1;animation.directionBackwards=false;}};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(name){var animation=this.animationsMap[name];if(animation){animation.direction=-1;animation.directionBackwards=true;}};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(name,fps){var animation=this.animationsMap[name];if(animation){animation.fps=fps;animation.duration=(animation.end-animation.start)/animation.fps;}};THREE.MorphBlendMesh.prototype.setAnimationDuration=function(name,duration){var animation=this.animationsMap[name];if(animation){animation.duration=duration;animation.fps=(animation.end-animation.start)/animation.duration;}};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(name,weight){var animation=this.animationsMap[name];if(animation){animation.weight=weight;}};THREE.MorphBlendMesh.prototype.setAnimationTime=function(name,time){var animation=this.animationsMap[name];if(animation){animation.time=time;}};THREE.MorphBlendMesh.prototype.getAnimationTime=function(name){var time=0;var animation=this.animationsMap[name];if(animation){time=animation.time;}return time;};THREE.MorphBlendMesh.prototype.getAnimationDuration=function(name){var duration=-1;var animation=this.animationsMap[name];if(animation){duration=animation.duration;}return duration;};THREE.MorphBlendMesh.prototype.playAnimation=function(name){var animation=this.animationsMap[name];if(animation){animation.time=0;animation.active=true;}else{console.warn(\"THREE.MorphBlendMesh: animation[\"+name+\"] undefined in .playAnimation()\");}};THREE.MorphBlendMesh.prototype.stopAnimation=function(name){var animation=this.animationsMap[name];if(animation){animation.active=false;}};THREE.MorphBlendMesh.prototype.update=function(delta){for(var i=0,il=this.animationsList.length;i<il;i++){var animation=this.animationsList[i];if(!animation.active)continue;var frameTime=animation.duration/animation.length;animation.time+=animation.direction*delta;if(animation.mirroredLoop){if(animation.time>animation.duration||animation.time<0){animation.direction*=-1;if(animation.time>animation.duration){animation.time=animation.duration;animation.directionBackwards=true;}if(animation.time<0){animation.time=0;animation.directionBackwards=false;}}}else{animation.time=animation.time%animation.duration;if(animation.time<0)animation.time+=animation.duration;}var keyframe=animation.start+THREE.Math.clamp(Math.floor(animation.time/frameTime),0,animation.length-1);var weight=animation.weight;if(keyframe!==animation.currentFrame){this.morphTargetInfluences[animation.lastFrame]=0;this.morphTargetInfluences[animation.currentFrame]=1*weight;this.morphTargetInfluences[keyframe]=0;animation.lastFrame=animation.currentFrame;animation.currentFrame=keyframe;}var mix=animation.time%frameTime/frameTime;if(animation.directionBackwards)mix=1-mix;if(animation.currentFrame!==animation.lastFrame){this.morphTargetInfluences[animation.currentFrame]=mix*weight;this.morphTargetInfluences[animation.lastFrame]=(1-mix)*weight;}else{this.morphTargetInfluences[animation.currentFrame]=weight;}}};// Export the THREE object for **Node.js**, with\n// backwards-compatibility for the old `require()` API. If we're in\n// the browser, add `_` as a global object via a string identifier,\n// for Closure Compiler \"advanced\" mode.\nif(true){if(typeof module!=='undefined'&&module.exports){exports=module.exports=THREE;}exports.THREE=THREE;}else{this['THREE']=THREE;}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aHJlZS90aHJlZS5qcz9lOGVmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzZWxmPXNlbGZ8fHt9Oy8vIEZpbGU6c3JjL1RocmVlLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovdmFyIFRIUkVFPXtSRVZJU0lPTjonNzcnfTsvL1xuaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZSgndGhyZWUnLFRIUkVFKTt9ZWxzZSBpZigndW5kZWZpbmVkJyE9PXR5cGVvZiBleHBvcnRzJiYndW5kZWZpbmVkJyE9PXR5cGVvZiBtb2R1bGUpe21vZHVsZS5leHBvcnRzPVRIUkVFO30vLyBQb2x5ZmlsbHNcbmlmKE51bWJlci5FUFNJTE9OPT09dW5kZWZpbmVkKXtOdW1iZXIuRVBTSUxPTj1NYXRoLnBvdygyLC01Mik7fS8vXG5pZihNYXRoLnNpZ249PT11bmRlZmluZWQpey8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvc2lnblxuTWF0aC5zaWduPWZ1bmN0aW9uKHgpe3JldHVybiB4PDA/LTE6eD4wPzE6K3g7fTt9aWYoRnVuY3Rpb24ucHJvdG90eXBlLm5hbWU9PT11bmRlZmluZWQpey8vIE1pc3NpbmcgaW4gSUU5LTExLlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vbmFtZVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwnbmFtZScse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb25cXHMqKFxcUyopXFxzKlxcKC8pWzFdO319KTt9aWYoT2JqZWN0LmFzc2lnbj09PXVuZGVmaW5lZCl7Ly8gTWlzc2luZyBpbiBJRS5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbihmdW5jdGlvbigpe09iamVjdC5hc3NpZ249ZnVuY3Rpb24odGFyZ2V0KXsndXNlIHN0cmljdCc7aWYodGFyZ2V0PT09dW5kZWZpbmVkfHx0YXJnZXQ9PT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTt9dmFyIG91dHB1dD1PYmplY3QodGFyZ2V0KTtmb3IodmFyIGluZGV4PTE7aW5kZXg8YXJndW1lbnRzLmxlbmd0aDtpbmRleCsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpbmRleF07aWYoc291cmNlIT09dW5kZWZpbmVkJiZzb3VyY2UhPT1udWxsKXtmb3IodmFyIG5leHRLZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLG5leHRLZXkpKXtvdXRwdXRbbmV4dEtleV09c291cmNlW25leHRLZXldO319fX1yZXR1cm4gb3V0cHV0O307fSkoKTt9Ly9cbk9iamVjdC5hc3NpZ24oVEhSRUUsey8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Nb3VzZUV2ZW50LmJ1dHRvblxuTU9VU0U6e0xFRlQ6MCxNSURETEU6MSxSSUdIVDoyfSwvLyBHTCBTVEFURSBDT05TVEFOVFNcbkN1bGxGYWNlTm9uZTowLEN1bGxGYWNlQmFjazoxLEN1bGxGYWNlRnJvbnQ6MixDdWxsRmFjZUZyb250QmFjazozLEZyb250RmFjZURpcmVjdGlvbkNXOjAsRnJvbnRGYWNlRGlyZWN0aW9uQ0NXOjEsLy8gU0hBRE9XSU5HIFRZUEVTXG5CYXNpY1NoYWRvd01hcDowLFBDRlNoYWRvd01hcDoxLFBDRlNvZnRTaGFkb3dNYXA6MiwvLyBNQVRFUklBTCBDT05TVEFOVFNcbi8vIHNpZGVcbkZyb250U2lkZTowLEJhY2tTaWRlOjEsRG91YmxlU2lkZToyLC8vIHNoYWRpbmdcbkZsYXRTaGFkaW5nOjEsU21vb3RoU2hhZGluZzoyLC8vIGNvbG9yc1xuTm9Db2xvcnM6MCxGYWNlQ29sb3JzOjEsVmVydGV4Q29sb3JzOjIsLy8gYmxlbmRpbmcgbW9kZXNcbk5vQmxlbmRpbmc6MCxOb3JtYWxCbGVuZGluZzoxLEFkZGl0aXZlQmxlbmRpbmc6MixTdWJ0cmFjdGl2ZUJsZW5kaW5nOjMsTXVsdGlwbHlCbGVuZGluZzo0LEN1c3RvbUJsZW5kaW5nOjUsLy8gY3VzdG9tIGJsZW5kaW5nIGVxdWF0aW9uc1xuLy8gKG51bWJlcnMgc3RhcnQgZnJvbSAxMDAgbm90IHRvIGNsYXNoIHdpdGggb3RoZXJcbi8vIG1hcHBpbmdzIHRvIE9wZW5HTCBjb25zdGFudHMgZGVmaW5lZCBpbiBUZXh0dXJlLmpzKVxuQWRkRXF1YXRpb246MTAwLFN1YnRyYWN0RXF1YXRpb246MTAxLFJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uOjEwMixNaW5FcXVhdGlvbjoxMDMsTWF4RXF1YXRpb246MTA0LC8vIGN1c3RvbSBibGVuZGluZyBkZXN0aW5hdGlvbiBmYWN0b3JzXG5aZXJvRmFjdG9yOjIwMCxPbmVGYWN0b3I6MjAxLFNyY0NvbG9yRmFjdG9yOjIwMixPbmVNaW51c1NyY0NvbG9yRmFjdG9yOjIwMyxTcmNBbHBoYUZhY3RvcjoyMDQsT25lTWludXNTcmNBbHBoYUZhY3RvcjoyMDUsRHN0QWxwaGFGYWN0b3I6MjA2LE9uZU1pbnVzRHN0QWxwaGFGYWN0b3I6MjA3LC8vIGN1c3RvbSBibGVuZGluZyBzb3VyY2UgZmFjdG9yc1xuLy9aZXJvRmFjdG9yOiAyMDAsXG4vL09uZUZhY3RvcjogMjAxLFxuLy9TcmNBbHBoYUZhY3RvcjogMjA0LFxuLy9PbmVNaW51c1NyY0FscGhhRmFjdG9yOiAyMDUsXG4vL0RzdEFscGhhRmFjdG9yOiAyMDYsXG4vL09uZU1pbnVzRHN0QWxwaGFGYWN0b3I6IDIwNyxcbkRzdENvbG9yRmFjdG9yOjIwOCxPbmVNaW51c0RzdENvbG9yRmFjdG9yOjIwOSxTcmNBbHBoYVNhdHVyYXRlRmFjdG9yOjIxMCwvLyBkZXB0aCBtb2Rlc1xuTmV2ZXJEZXB0aDowLEFsd2F5c0RlcHRoOjEsTGVzc0RlcHRoOjIsTGVzc0VxdWFsRGVwdGg6MyxFcXVhbERlcHRoOjQsR3JlYXRlckVxdWFsRGVwdGg6NSxHcmVhdGVyRGVwdGg6NixOb3RFcXVhbERlcHRoOjcsLy8gVEVYVFVSRSBDT05TVEFOVFNcbk11bHRpcGx5T3BlcmF0aW9uOjAsTWl4T3BlcmF0aW9uOjEsQWRkT3BlcmF0aW9uOjIsLy8gVG9uZSBNYXBwaW5nIG1vZGVzXG5Ob1RvbmVNYXBwaW5nOjAsLy8gZG8gbm90IGRvIGFueSB0b25lIG1hcHBpbmcsIG5vdCBldmVuIGV4cG9zdXJlIChyZXF1aXJlZCBmb3Igc3BlY2lhbCBwdXJwb3NlIHBhc3Nlcy4pXG5MaW5lYXJUb25lTWFwcGluZzoxLC8vIG9ubHkgYXBwbHkgZXhwb3N1cmUuXG5SZWluaGFyZFRvbmVNYXBwaW5nOjIsVW5jaGFydGVkMlRvbmVNYXBwaW5nOjMsLy8gSm9obiBIYWJsZVxuQ2luZW9uVG9uZU1hcHBpbmc6NCwvLyBvcHRpbWl6ZWQgZmlsbWljIG9wZXJhdG9yIGJ5IEppbSBIZWpsIGFuZCBSaWNoYXJkIEJ1cmdlc3MtRGF3c29uXG4vLyBNYXBwaW5nIG1vZGVzXG5VVk1hcHBpbmc6MzAwLEN1YmVSZWZsZWN0aW9uTWFwcGluZzozMDEsQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOjMwMixFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZzozMDMsRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6MzA0LFNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOjMwNSxDdWJlVVZSZWZsZWN0aW9uTWFwcGluZzozMDYsQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6MzA3LC8vIFdyYXBwaW5nIG1vZGVzXG5SZXBlYXRXcmFwcGluZzoxMDAwLENsYW1wVG9FZGdlV3JhcHBpbmc6MTAwMSxNaXJyb3JlZFJlcGVhdFdyYXBwaW5nOjEwMDIsLy8gRmlsdGVyc1xuTmVhcmVzdEZpbHRlcjoxMDAzLE5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyOjEwMDQsTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcjoxMDA1LExpbmVhckZpbHRlcjoxMDA2LExpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXI6MTAwNyxMaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI6MTAwOCwvLyBEYXRhIHR5cGVzXG5VbnNpZ25lZEJ5dGVUeXBlOjEwMDksQnl0ZVR5cGU6MTAxMCxTaG9ydFR5cGU6MTAxMSxVbnNpZ25lZFNob3J0VHlwZToxMDEyLEludFR5cGU6MTAxMyxVbnNpZ25lZEludFR5cGU6MTAxNCxGbG9hdFR5cGU6MTAxNSxIYWxmRmxvYXRUeXBlOjEwMjUsLy8gUGl4ZWwgdHlwZXNcbi8vVW5zaWduZWRCeXRlVHlwZTogMTAwOSxcblVuc2lnbmVkU2hvcnQ0NDQ0VHlwZToxMDE2LFVuc2lnbmVkU2hvcnQ1NTUxVHlwZToxMDE3LFVuc2lnbmVkU2hvcnQ1NjVUeXBlOjEwMTgsLy8gUGl4ZWwgZm9ybWF0c1xuQWxwaGFGb3JtYXQ6MTAxOSxSR0JGb3JtYXQ6MTAyMCxSR0JBRm9ybWF0OjEwMjEsTHVtaW5hbmNlRm9ybWF0OjEwMjIsTHVtaW5hbmNlQWxwaGFGb3JtYXQ6MTAyMywvLyBUSFJFRS5SR0JFRm9ybWF0IGhhbmRsZWQgYXMgVEhSRUUuUkdCQUZvcm1hdCBpbiBzaGFkZXJzXG5SR0JFRm9ybWF0OlRIUkVFLlJHQkFGb3JtYXQsLy8xMDI0O1xuRGVwdGhGb3JtYXQ6MTAyNiwvLyBERFMgLyBTVDNDIENvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXRzXG5SR0JfUzNUQ19EWFQxX0Zvcm1hdDoyMDAxLFJHQkFfUzNUQ19EWFQxX0Zvcm1hdDoyMDAyLFJHQkFfUzNUQ19EWFQzX0Zvcm1hdDoyMDAzLFJHQkFfUzNUQ19EWFQ1X0Zvcm1hdDoyMDA0LC8vIFBWUlRDIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXRzXG5SR0JfUFZSVENfNEJQUFYxX0Zvcm1hdDoyMTAwLFJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0OjIxMDEsUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0OjIxMDIsUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0OjIxMDMsLy8gRVRDIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXRzXG5SR0JfRVRDMV9Gb3JtYXQ6MjE1MSwvLyBMb29wIHN0eWxlcyBmb3IgQW5pbWF0aW9uQWN0aW9uXG5Mb29wT25jZToyMjAwLExvb3BSZXBlYXQ6MjIwMSxMb29wUGluZ1Bvbmc6MjIwMiwvLyBJbnRlcnBvbGF0aW9uXG5JbnRlcnBvbGF0ZURpc2NyZXRlOjIzMDAsSW50ZXJwb2xhdGVMaW5lYXI6MjMwMSxJbnRlcnBvbGF0ZVNtb290aDoyMzAyLC8vIEludGVycG9sYW50IGVuZGluZyBtb2Rlc1xuWmVyb0N1cnZhdHVyZUVuZGluZzoyNDAwLFplcm9TbG9wZUVuZGluZzoyNDAxLFdyYXBBcm91bmRFbmRpbmc6MjQwMiwvLyBUcmlhbmdsZSBEcmF3IG1vZGVzXG5UcmlhbmdsZXNEcmF3TW9kZTowLFRyaWFuZ2xlU3RyaXBEcmF3TW9kZToxLFRyaWFuZ2xlRmFuRHJhd01vZGU6MiwvLyBUZXh0dXJlIEVuY29kaW5nc1xuTGluZWFyRW5jb2Rpbmc6MzAwMCwvLyBObyBlbmNvZGluZyBhdCBhbGwuXG5zUkdCRW5jb2Rpbmc6MzAwMSxHYW1tYUVuY29kaW5nOjMwMDcsLy8gdXNlcyBHQU1NQV9GQUNUT1IsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIFdlYkdMUmVuZGVyZXIuZ2FtbWFJbnB1dC9nYW1tYU91dHB1dFxuLy8gVGhlIGZvbGxvd2luZyBUZXh0dXJlIEVuY29kaW5ncyBhcmUgZm9yIFJHQi1vbmx5IChubyBhbHBoYSkgSERSIGxpZ2h0IGVtaXNzaW9uIHNvdXJjZXMuXG4vLyBUaGVzZSBlbmNvZGluZ3Mgc2hvdWxkIG5vdCBzcGVjaWZpZWQgYXMgb3V0cHV0IGVuY29kaW5ncyBleGNlcHQgaW4gcmFyZSBzaXR1YXRpb25zLlxuUkdCRUVuY29kaW5nOjMwMDIsLy8gQUtBIFJhZGlhbmNlLlxuTG9nTHV2RW5jb2Rpbmc6MzAwMyxSR0JNN0VuY29kaW5nOjMwMDQsUkdCTTE2RW5jb2Rpbmc6MzAwNSxSR0JERW5jb2Rpbmc6MzAwNiwvLyBNYXhSYW5nZSBpcyAyNTYuXG4vLyBEZXB0aCBwYWNraW5nIHN0cmF0ZWdpZXNcbkJhc2ljRGVwdGhQYWNraW5nOjMyMDAsLy8gZm9yIHdyaXRpbmcgdG8gZmxvYXQgdGV4dHVyZXMgZm9yIGhpZ2ggcHJlY2lzaW9uIG9yIGZvciB2aXN1YWxpemluZyByZXN1bHRzIGluIFJHQiBidWZmZXJzXG5SR0JBRGVwdGhQYWNraW5nOjMyMDEvLyBmb3IgcGFja2luZyBpbnRvIFJHQkEgYnVmZmVycy5cbn0pOy8vIEZpbGU6c3JjL21hdGgvQ29sb3IuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Db2xvcj1mdW5jdGlvbihyLGcsYil7aWYoZz09PXVuZGVmaW5lZCYmYj09PXVuZGVmaW5lZCl7Ly8gciBpcyBUSFJFRS5Db2xvciwgaGV4IG9yIHN0cmluZ1xucmV0dXJuIHRoaXMuc2V0KHIpO31yZXR1cm4gdGhpcy5zZXRSR0IocixnLGIpO307VEhSRUUuQ29sb3IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Db2xvcixyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlIGluc3RhbmNlb2YgVEhSRUUuQ29sb3Ipe3RoaXMuY29weSh2YWx1ZSk7fWVsc2UgaWYodHlwZW9mIHZhbHVlPT09J251bWJlcicpe3RoaXMuc2V0SGV4KHZhbHVlKTt9ZWxzZSBpZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyl7dGhpcy5zZXRTdHlsZSh2YWx1ZSk7fXJldHVybiB0aGlzO30sc2V0U2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7dGhpcy5yPXNjYWxhcjt0aGlzLmc9c2NhbGFyO3RoaXMuYj1zY2FsYXI7fSxzZXRIZXg6ZnVuY3Rpb24oaGV4KXtoZXg9TWF0aC5mbG9vcihoZXgpO3RoaXMucj0oaGV4Pj4xNiYyNTUpLzI1NTt0aGlzLmc9KGhleD4+OCYyNTUpLzI1NTt0aGlzLmI9KGhleCYyNTUpLzI1NTtyZXR1cm4gdGhpczt9LHNldFJHQjpmdW5jdGlvbihyLGcsYil7dGhpcy5yPXI7dGhpcy5nPWc7dGhpcy5iPWI7cmV0dXJuIHRoaXM7fSxzZXRIU0w6ZnVuY3Rpb24oKXtmdW5jdGlvbiBodWUycmdiKHAscSx0KXtpZih0PDApdCs9MTtpZih0PjEpdC09MTtpZih0PDEvNilyZXR1cm4gcCsocS1wKSo2KnQ7aWYodDwxLzIpcmV0dXJuIHE7aWYodDwyLzMpcmV0dXJuIHArKHEtcCkqNiooMi8zLXQpO3JldHVybiBwO31yZXR1cm4gZnVuY3Rpb24oaCxzLGwpey8vIGgscyxsIHJhbmdlcyBhcmUgaW4gMC4wIC0gMS4wXG5oPVRIUkVFLk1hdGguZXVjbGlkZWFuTW9kdWxvKGgsMSk7cz1USFJFRS5NYXRoLmNsYW1wKHMsMCwxKTtsPVRIUkVFLk1hdGguY2xhbXAobCwwLDEpO2lmKHM9PT0wKXt0aGlzLnI9dGhpcy5nPXRoaXMuYj1sO31lbHNle3ZhciBwPWw8PTAuNT9sKigxK3MpOmwrcy1sKnM7dmFyIHE9MipsLXA7dGhpcy5yPWh1ZTJyZ2IocSxwLGgrMS8zKTt0aGlzLmc9aHVlMnJnYihxLHAsaCk7dGhpcy5iPWh1ZTJyZ2IocSxwLGgtMS8zKTt9cmV0dXJuIHRoaXM7fTt9KCksc2V0U3R5bGU6ZnVuY3Rpb24oc3R5bGUpe2Z1bmN0aW9uIGhhbmRsZUFscGhhKHN0cmluZyl7aWYoc3RyaW5nPT09dW5kZWZpbmVkKXJldHVybjtpZihwYXJzZUZsb2F0KHN0cmluZyk8MSl7Y29uc29sZS53YXJuKCdUSFJFRS5Db2xvcjogQWxwaGEgY29tcG9uZW50IG9mICcrc3R5bGUrJyB3aWxsIGJlIGlnbm9yZWQuJyk7fX12YXIgbTtpZihtPS9eKCg/OnJnYnxoc2wpYT8pXFwoXFxzKihbXlxcKV0qKVxcKS8uZXhlYyhzdHlsZSkpey8vIHJnYiAvIGhzbFxudmFyIGNvbG9yO3ZhciBuYW1lPW1bMV07dmFyIGNvbXBvbmVudHM9bVsyXTtzd2l0Y2gobmFtZSl7Y2FzZSdyZ2InOmNhc2UncmdiYSc6aWYoY29sb3I9L14oXFxkKylcXHMqLFxccyooXFxkKylcXHMqLFxccyooXFxkKylcXHMqKCxcXHMqKFswLTldKlxcLj9bMC05XSspXFxzKik/JC8uZXhlYyhjb21wb25lbnRzKSl7Ly8gcmdiKDI1NSwwLDApIHJnYmEoMjU1LDAsMCwwLjUpXG50aGlzLnI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNvbG9yWzFdLDEwKSkvMjU1O3RoaXMuZz1NYXRoLm1pbigyNTUscGFyc2VJbnQoY29sb3JbMl0sMTApKS8yNTU7dGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChjb2xvclszXSwxMCkpLzI1NTtoYW5kbGVBbHBoYShjb2xvcls1XSk7cmV0dXJuIHRoaXM7fWlmKGNvbG9yPS9eKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoY29tcG9uZW50cykpey8vIHJnYigxMDAlLDAlLDAlKSByZ2JhKDEwMCUsMCUsMCUsMC41KVxudGhpcy5yPU1hdGgubWluKDEwMCxwYXJzZUludChjb2xvclsxXSwxMCkpLzEwMDt0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNvbG9yWzJdLDEwKSkvMTAwO3RoaXMuYj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY29sb3JbM10sMTApKS8xMDA7aGFuZGxlQWxwaGEoY29sb3JbNV0pO3JldHVybiB0aGlzO31icmVhaztjYXNlJ2hzbCc6Y2FzZSdoc2xhJzppZihjb2xvcj0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGNvbXBvbmVudHMpKXsvLyBoc2woMTIwLDUwJSw1MCUpIGhzbGEoMTIwLDUwJSw1MCUsMC41KVxudmFyIGg9cGFyc2VGbG9hdChjb2xvclsxXSkvMzYwO3ZhciBzPXBhcnNlSW50KGNvbG9yWzJdLDEwKS8xMDA7dmFyIGw9cGFyc2VJbnQoY29sb3JbM10sMTApLzEwMDtoYW5kbGVBbHBoYShjb2xvcls1XSk7cmV0dXJuIHRoaXMuc2V0SFNMKGgscyxsKTt9YnJlYWs7fX1lbHNlIGlmKG09L15cXCMoW0EtRmEtZjAtOV0rKSQvLmV4ZWMoc3R5bGUpKXsvLyBoZXggY29sb3JcbnZhciBoZXg9bVsxXTt2YXIgc2l6ZT1oZXgubGVuZ3RoO2lmKHNpemU9PT0zKXsvLyAjZmYwXG50aGlzLnI9cGFyc2VJbnQoaGV4LmNoYXJBdCgwKStoZXguY2hhckF0KDApLDE2KS8yNTU7dGhpcy5nPXBhcnNlSW50KGhleC5jaGFyQXQoMSkraGV4LmNoYXJBdCgxKSwxNikvMjU1O3RoaXMuYj1wYXJzZUludChoZXguY2hhckF0KDIpK2hleC5jaGFyQXQoMiksMTYpLzI1NTtyZXR1cm4gdGhpczt9ZWxzZSBpZihzaXplPT09Nil7Ly8gI2ZmMDAwMFxudGhpcy5yPXBhcnNlSW50KGhleC5jaGFyQXQoMCkraGV4LmNoYXJBdCgxKSwxNikvMjU1O3RoaXMuZz1wYXJzZUludChoZXguY2hhckF0KDIpK2hleC5jaGFyQXQoMyksMTYpLzI1NTt0aGlzLmI9cGFyc2VJbnQoaGV4LmNoYXJBdCg0KStoZXguY2hhckF0KDUpLDE2KS8yNTU7cmV0dXJuIHRoaXM7fX1pZihzdHlsZSYmc3R5bGUubGVuZ3RoPjApey8vIGNvbG9yIGtleXdvcmRzXG52YXIgaGV4PVRIUkVFLkNvbG9yS2V5d29yZHNbc3R5bGVdO2lmKGhleCE9PXVuZGVmaW5lZCl7Ly8gcmVkXG50aGlzLnNldEhleChoZXgpO31lbHNley8vIHVua25vd24gY29sb3JcbmNvbnNvbGUud2FybignVEhSRUUuQ29sb3I6IFVua25vd24gY29sb3IgJytzdHlsZSk7fX1yZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMucix0aGlzLmcsdGhpcy5iKTt9LGNvcHk6ZnVuY3Rpb24oY29sb3Ipe3RoaXMucj1jb2xvci5yO3RoaXMuZz1jb2xvci5nO3RoaXMuYj1jb2xvci5iO3JldHVybiB0aGlzO30sY29weUdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24oY29sb3IsZ2FtbWFGYWN0b3Ipe2lmKGdhbW1hRmFjdG9yPT09dW5kZWZpbmVkKWdhbW1hRmFjdG9yPTIuMDt0aGlzLnI9TWF0aC5wb3coY29sb3IucixnYW1tYUZhY3Rvcik7dGhpcy5nPU1hdGgucG93KGNvbG9yLmcsZ2FtbWFGYWN0b3IpO3RoaXMuYj1NYXRoLnBvdyhjb2xvci5iLGdhbW1hRmFjdG9yKTtyZXR1cm4gdGhpczt9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGNvbG9yLGdhbW1hRmFjdG9yKXtpZihnYW1tYUZhY3Rvcj09PXVuZGVmaW5lZClnYW1tYUZhY3Rvcj0yLjA7dmFyIHNhZmVJbnZlcnNlPWdhbW1hRmFjdG9yPjA/MS4wL2dhbW1hRmFjdG9yOjEuMDt0aGlzLnI9TWF0aC5wb3coY29sb3IucixzYWZlSW52ZXJzZSk7dGhpcy5nPU1hdGgucG93KGNvbG9yLmcsc2FmZUludmVyc2UpO3RoaXMuYj1NYXRoLnBvdyhjb2xvci5iLHNhZmVJbnZlcnNlKTtyZXR1cm4gdGhpczt9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5yLGc9dGhpcy5nLGI9dGhpcy5iO3RoaXMucj1yKnI7dGhpcy5nPWcqZzt0aGlzLmI9YipiO3JldHVybiB0aGlzO30sY29udmVydExpbmVhclRvR2FtbWE6ZnVuY3Rpb24oKXt0aGlzLnI9TWF0aC5zcXJ0KHRoaXMucik7dGhpcy5nPU1hdGguc3FydCh0aGlzLmcpO3RoaXMuYj1NYXRoLnNxcnQodGhpcy5iKTtyZXR1cm4gdGhpczt9LGdldEhleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnIqMjU1PDwxNl50aGlzLmcqMjU1PDw4XnRoaXMuYioyNTU8PDA7fSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oJzAwMDAwMCcrdGhpcy5nZXRIZXgoKS50b1N0cmluZygxNikpLnNsaWNlKC02KTt9LGdldEhTTDpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7Ly8gaCxzLGwgcmFuZ2VzIGFyZSBpbiAwLjAgLSAxLjBcbnZhciBoc2w9b3B0aW9uYWxUYXJnZXR8fHtoOjAsczowLGw6MH07dmFyIHI9dGhpcy5yLGc9dGhpcy5nLGI9dGhpcy5iO3ZhciBtYXg9TWF0aC5tYXgocixnLGIpO3ZhciBtaW49TWF0aC5taW4ocixnLGIpO3ZhciBodWUsc2F0dXJhdGlvbjt2YXIgbGlnaHRuZXNzPShtaW4rbWF4KS8yLjA7aWYobWluPT09bWF4KXtodWU9MDtzYXR1cmF0aW9uPTA7fWVsc2V7dmFyIGRlbHRhPW1heC1taW47c2F0dXJhdGlvbj1saWdodG5lc3M8PTAuNT9kZWx0YS8obWF4K21pbik6ZGVsdGEvKDItbWF4LW1pbik7c3dpdGNoKG1heCl7Y2FzZSByOmh1ZT0oZy1iKS9kZWx0YSsoZzxiPzY6MCk7YnJlYWs7Y2FzZSBnOmh1ZT0oYi1yKS9kZWx0YSsyO2JyZWFrO2Nhc2UgYjpodWU9KHItZykvZGVsdGErNDticmVhazt9aHVlLz02O31oc2wuaD1odWU7aHNsLnM9c2F0dXJhdGlvbjtoc2wubD1saWdodG5lc3M7cmV0dXJuIGhzbDt9LGdldFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuJ3JnYignKyh0aGlzLnIqMjU1fDApKycsJysodGhpcy5nKjI1NXwwKSsnLCcrKHRoaXMuYioyNTV8MCkrJyknO30sb2Zmc2V0SFNMOmZ1bmN0aW9uKGgscyxsKXt2YXIgaHNsPXRoaXMuZ2V0SFNMKCk7aHNsLmgrPWg7aHNsLnMrPXM7aHNsLmwrPWw7dGhpcy5zZXRIU0woaHNsLmgsaHNsLnMsaHNsLmwpO3JldHVybiB0aGlzO30sYWRkOmZ1bmN0aW9uKGNvbG9yKXt0aGlzLnIrPWNvbG9yLnI7dGhpcy5nKz1jb2xvci5nO3RoaXMuYis9Y29sb3IuYjtyZXR1cm4gdGhpczt9LGFkZENvbG9yczpmdW5jdGlvbihjb2xvcjEsY29sb3IyKXt0aGlzLnI9Y29sb3IxLnIrY29sb3IyLnI7dGhpcy5nPWNvbG9yMS5nK2NvbG9yMi5nO3RoaXMuYj1jb2xvcjEuYitjb2xvcjIuYjtyZXR1cm4gdGhpczt9LGFkZFNjYWxhcjpmdW5jdGlvbihzKXt0aGlzLnIrPXM7dGhpcy5nKz1zO3RoaXMuYis9cztyZXR1cm4gdGhpczt9LG11bHRpcGx5OmZ1bmN0aW9uKGNvbG9yKXt0aGlzLnIqPWNvbG9yLnI7dGhpcy5nKj1jb2xvci5nO3RoaXMuYio9Y29sb3IuYjtyZXR1cm4gdGhpczt9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKHMpe3RoaXMucio9czt0aGlzLmcqPXM7dGhpcy5iKj1zO3JldHVybiB0aGlzO30sbGVycDpmdW5jdGlvbihjb2xvcixhbHBoYSl7dGhpcy5yKz0oY29sb3Iuci10aGlzLnIpKmFscGhhO3RoaXMuZys9KGNvbG9yLmctdGhpcy5nKSphbHBoYTt0aGlzLmIrPShjb2xvci5iLXRoaXMuYikqYWxwaGE7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24oYyl7cmV0dXJuIGMucj09PXRoaXMuciYmYy5nPT09dGhpcy5nJiZjLmI9PT10aGlzLmI7fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy5yPWFycmF5W29mZnNldF07dGhpcy5nPWFycmF5W29mZnNldCsxXTt0aGlzLmI9YXJyYXlbb2Zmc2V0KzJdO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDthcnJheVtvZmZzZXRdPXRoaXMucjthcnJheVtvZmZzZXQrMV09dGhpcy5nO2FycmF5W29mZnNldCsyXT10aGlzLmI7cmV0dXJuIGFycmF5O319O1RIUkVFLkNvbG9yS2V5d29yZHM9eydhbGljZWJsdWUnOjB4RjBGOEZGLCdhbnRpcXVld2hpdGUnOjB4RkFFQkQ3LCdhcXVhJzoweDAwRkZGRiwnYXF1YW1hcmluZSc6MHg3RkZGRDQsJ2F6dXJlJzoweEYwRkZGRiwnYmVpZ2UnOjB4RjVGNURDLCdiaXNxdWUnOjB4RkZFNEM0LCdibGFjayc6MHgwMDAwMDAsJ2JsYW5jaGVkYWxtb25kJzoweEZGRUJDRCwnYmx1ZSc6MHgwMDAwRkYsJ2JsdWV2aW9sZXQnOjB4OEEyQkUyLCdicm93bic6MHhBNTJBMkEsJ2J1cmx5d29vZCc6MHhERUI4ODcsJ2NhZGV0Ymx1ZSc6MHg1RjlFQTAsJ2NoYXJ0cmV1c2UnOjB4N0ZGRjAwLCdjaG9jb2xhdGUnOjB4RDI2OTFFLCdjb3JhbCc6MHhGRjdGNTAsJ2Nvcm5mbG93ZXJibHVlJzoweDY0OTVFRCwnY29ybnNpbGsnOjB4RkZGOERDLCdjcmltc29uJzoweERDMTQzQywnY3lhbic6MHgwMEZGRkYsJ2RhcmtibHVlJzoweDAwMDA4QiwnZGFya2N5YW4nOjB4MDA4QjhCLCdkYXJrZ29sZGVucm9kJzoweEI4ODYwQiwnZGFya2dyYXknOjB4QTlBOUE5LCdkYXJrZ3JlZW4nOjB4MDA2NDAwLCdkYXJrZ3JleSc6MHhBOUE5QTksJ2RhcmtraGFraSc6MHhCREI3NkIsJ2RhcmttYWdlbnRhJzoweDhCMDA4QiwnZGFya29saXZlZ3JlZW4nOjB4NTU2QjJGLCdkYXJrb3JhbmdlJzoweEZGOEMwMCwnZGFya29yY2hpZCc6MHg5OTMyQ0MsJ2RhcmtyZWQnOjB4OEIwMDAwLCdkYXJrc2FsbW9uJzoweEU5OTY3QSwnZGFya3NlYWdyZWVuJzoweDhGQkM4RiwnZGFya3NsYXRlYmx1ZSc6MHg0ODNEOEIsJ2RhcmtzbGF0ZWdyYXknOjB4MkY0RjRGLCdkYXJrc2xhdGVncmV5JzoweDJGNEY0RiwnZGFya3R1cnF1b2lzZSc6MHgwMENFRDEsJ2Rhcmt2aW9sZXQnOjB4OTQwMEQzLCdkZWVwcGluayc6MHhGRjE0OTMsJ2RlZXBza3libHVlJzoweDAwQkZGRiwnZGltZ3JheSc6MHg2OTY5NjksJ2RpbWdyZXknOjB4Njk2OTY5LCdkb2RnZXJibHVlJzoweDFFOTBGRiwnZmlyZWJyaWNrJzoweEIyMjIyMiwnZmxvcmFsd2hpdGUnOjB4RkZGQUYwLCdmb3Jlc3RncmVlbic6MHgyMjhCMjIsJ2Z1Y2hzaWEnOjB4RkYwMEZGLCdnYWluc2Jvcm8nOjB4RENEQ0RDLCdnaG9zdHdoaXRlJzoweEY4RjhGRiwnZ29sZCc6MHhGRkQ3MDAsJ2dvbGRlbnJvZCc6MHhEQUE1MjAsJ2dyYXknOjB4ODA4MDgwLCdncmVlbic6MHgwMDgwMDAsJ2dyZWVueWVsbG93JzoweEFERkYyRiwnZ3JleSc6MHg4MDgwODAsJ2hvbmV5ZGV3JzoweEYwRkZGMCwnaG90cGluayc6MHhGRjY5QjQsJ2luZGlhbnJlZCc6MHhDRDVDNUMsJ2luZGlnbyc6MHg0QjAwODIsJ2l2b3J5JzoweEZGRkZGMCwna2hha2knOjB4RjBFNjhDLCdsYXZlbmRlcic6MHhFNkU2RkEsJ2xhdmVuZGVyYmx1c2gnOjB4RkZGMEY1LCdsYXduZ3JlZW4nOjB4N0NGQzAwLCdsZW1vbmNoaWZmb24nOjB4RkZGQUNELCdsaWdodGJsdWUnOjB4QUREOEU2LCdsaWdodGNvcmFsJzoweEYwODA4MCwnbGlnaHRjeWFuJzoweEUwRkZGRiwnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnOjB4RkFGQUQyLCdsaWdodGdyYXknOjB4RDNEM0QzLCdsaWdodGdyZWVuJzoweDkwRUU5MCwnbGlnaHRncmV5JzoweEQzRDNEMywnbGlnaHRwaW5rJzoweEZGQjZDMSwnbGlnaHRzYWxtb24nOjB4RkZBMDdBLCdsaWdodHNlYWdyZWVuJzoweDIwQjJBQSwnbGlnaHRza3libHVlJzoweDg3Q0VGQSwnbGlnaHRzbGF0ZWdyYXknOjB4Nzc4ODk5LCdsaWdodHNsYXRlZ3JleSc6MHg3Nzg4OTksJ2xpZ2h0c3RlZWxibHVlJzoweEIwQzRERSwnbGlnaHR5ZWxsb3cnOjB4RkZGRkUwLCdsaW1lJzoweDAwRkYwMCwnbGltZWdyZWVuJzoweDMyQ0QzMiwnbGluZW4nOjB4RkFGMEU2LCdtYWdlbnRhJzoweEZGMDBGRiwnbWFyb29uJzoweDgwMDAwMCwnbWVkaXVtYXF1YW1hcmluZSc6MHg2NkNEQUEsJ21lZGl1bWJsdWUnOjB4MDAwMENELCdtZWRpdW1vcmNoaWQnOjB4QkE1NUQzLCdtZWRpdW1wdXJwbGUnOjB4OTM3MERCLCdtZWRpdW1zZWFncmVlbic6MHgzQ0IzNzEsJ21lZGl1bXNsYXRlYmx1ZSc6MHg3QjY4RUUsJ21lZGl1bXNwcmluZ2dyZWVuJzoweDAwRkE5QSwnbWVkaXVtdHVycXVvaXNlJzoweDQ4RDFDQywnbWVkaXVtdmlvbGV0cmVkJzoweEM3MTU4NSwnbWlkbmlnaHRibHVlJzoweDE5MTk3MCwnbWludGNyZWFtJzoweEY1RkZGQSwnbWlzdHlyb3NlJzoweEZGRTRFMSwnbW9jY2FzaW4nOjB4RkZFNEI1LCduYXZham93aGl0ZSc6MHhGRkRFQUQsJ25hdnknOjB4MDAwMDgwLCdvbGRsYWNlJzoweEZERjVFNiwnb2xpdmUnOjB4ODA4MDAwLCdvbGl2ZWRyYWInOjB4NkI4RTIzLCdvcmFuZ2UnOjB4RkZBNTAwLCdvcmFuZ2VyZWQnOjB4RkY0NTAwLCdvcmNoaWQnOjB4REE3MEQ2LCdwYWxlZ29sZGVucm9kJzoweEVFRThBQSwncGFsZWdyZWVuJzoweDk4RkI5OCwncGFsZXR1cnF1b2lzZSc6MHhBRkVFRUUsJ3BhbGV2aW9sZXRyZWQnOjB4REI3MDkzLCdwYXBheWF3aGlwJzoweEZGRUZENSwncGVhY2hwdWZmJzoweEZGREFCOSwncGVydSc6MHhDRDg1M0YsJ3BpbmsnOjB4RkZDMENCLCdwbHVtJzoweEREQTBERCwncG93ZGVyYmx1ZSc6MHhCMEUwRTYsJ3B1cnBsZSc6MHg4MDAwODAsJ3JlZCc6MHhGRjAwMDAsJ3Jvc3licm93bic6MHhCQzhGOEYsJ3JveWFsYmx1ZSc6MHg0MTY5RTEsJ3NhZGRsZWJyb3duJzoweDhCNDUxMywnc2FsbW9uJzoweEZBODA3Miwnc2FuZHlicm93bic6MHhGNEE0NjAsJ3NlYWdyZWVuJzoweDJFOEI1Nywnc2Vhc2hlbGwnOjB4RkZGNUVFLCdzaWVubmEnOjB4QTA1MjJELCdzaWx2ZXInOjB4QzBDMEMwLCdza3libHVlJzoweDg3Q0VFQiwnc2xhdGVibHVlJzoweDZBNUFDRCwnc2xhdGVncmF5JzoweDcwODA5MCwnc2xhdGVncmV5JzoweDcwODA5MCwnc25vdyc6MHhGRkZBRkEsJ3NwcmluZ2dyZWVuJzoweDAwRkY3Riwnc3RlZWxibHVlJzoweDQ2ODJCNCwndGFuJzoweEQyQjQ4QywndGVhbCc6MHgwMDgwODAsJ3RoaXN0bGUnOjB4RDhCRkQ4LCd0b21hdG8nOjB4RkY2MzQ3LCd0dXJxdW9pc2UnOjB4NDBFMEQwLCd2aW9sZXQnOjB4RUU4MkVFLCd3aGVhdCc6MHhGNURFQjMsJ3doaXRlJzoweEZGRkZGRiwnd2hpdGVzbW9rZSc6MHhGNUY1RjUsJ3llbGxvdyc6MHhGRkZGMDAsJ3llbGxvd2dyZWVuJzoweDlBQ0QzMn07Ly8gRmlsZTpzcmMvbWF0aC9RdWF0ZXJuaW9uLmpzXG4vKipcclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICovVEhSRUUuUXVhdGVybmlvbj1mdW5jdGlvbih4LHkseix3KXt0aGlzLl94PXh8fDA7dGhpcy5feT15fHwwO3RoaXMuX3o9enx8MDt0aGlzLl93PXchPT11bmRlZmluZWQ/dzoxO307VEhSRUUuUXVhdGVybmlvbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlF1YXRlcm5pb24sZ2V0IHgoKXtyZXR1cm4gdGhpcy5feDt9LHNldCB4KHZhbHVlKXt0aGlzLl94PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feTt9LHNldCB5KHZhbHVlKXt0aGlzLl95PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IHooKXtyZXR1cm4gdGhpcy5fejt9LHNldCB6KHZhbHVlKXt0aGlzLl96PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IHcoKXtyZXR1cm4gdGhpcy5fdzt9LHNldCB3KHZhbHVlKXt0aGlzLl93PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sc2V0OmZ1bmN0aW9uKHgseSx6LHcpe3RoaXMuX3g9eDt0aGlzLl95PXk7dGhpcy5fej16O3RoaXMuX3c9dzt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX3cpO30sY29weTpmdW5jdGlvbihxdWF0ZXJuaW9uKXt0aGlzLl94PXF1YXRlcm5pb24ueDt0aGlzLl95PXF1YXRlcm5pb24ueTt0aGlzLl96PXF1YXRlcm5pb24uejt0aGlzLl93PXF1YXRlcm5pb24udzt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LHNldEZyb21FdWxlcjpmdW5jdGlvbihldWxlcix1cGRhdGUpe2lmKGV1bGVyIGluc3RhbmNlb2YgVEhSRUUuRXVsZXI9PT1mYWxzZSl7dGhyb3cgbmV3IEVycm9yKCdUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicpO30vLyBodHRwOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvXG4vLyBcdDIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzL1xuLy9cdGNvbnRlbnQvU3BpbkNhbGMubVxudmFyIGMxPU1hdGguY29zKGV1bGVyLl94LzIpO3ZhciBjMj1NYXRoLmNvcyhldWxlci5feS8yKTt2YXIgYzM9TWF0aC5jb3MoZXVsZXIuX3ovMik7dmFyIHMxPU1hdGguc2luKGV1bGVyLl94LzIpO3ZhciBzMj1NYXRoLnNpbihldWxlci5feS8yKTt2YXIgczM9TWF0aC5zaW4oZXVsZXIuX3ovMik7dmFyIG9yZGVyPWV1bGVyLm9yZGVyO2lmKG9yZGVyPT09J1hZWicpe3RoaXMuX3g9czEqYzIqYzMrYzEqczIqczM7dGhpcy5feT1jMSpzMipjMy1zMSpjMipzMzt0aGlzLl96PWMxKmMyKnMzK3MxKnMyKmMzO3RoaXMuX3c9YzEqYzIqYzMtczEqczIqczM7fWVsc2UgaWYob3JkZXI9PT0nWVhaJyl7dGhpcy5feD1zMSpjMipjMytjMSpzMipzMzt0aGlzLl95PWMxKnMyKmMzLXMxKmMyKnMzO3RoaXMuX3o9YzEqYzIqczMtczEqczIqYzM7dGhpcy5fdz1jMSpjMipjMytzMSpzMipzMzt9ZWxzZSBpZihvcmRlcj09PSdaWFknKXt0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMrczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzLXMxKnMyKnMzO31lbHNlIGlmKG9yZGVyPT09J1pZWCcpe3RoaXMuX3g9czEqYzIqYzMtYzEqczIqczM7dGhpcy5feT1jMSpzMipjMytzMSpjMipzMzt0aGlzLl96PWMxKmMyKnMzLXMxKnMyKmMzO3RoaXMuX3c9YzEqYzIqYzMrczEqczIqczM7fWVsc2UgaWYob3JkZXI9PT0nWVpYJyl7dGhpcy5feD1zMSpjMipjMytjMSpzMipzMzt0aGlzLl95PWMxKnMyKmMzK3MxKmMyKnMzO3RoaXMuX3o9YzEqYzIqczMtczEqczIqYzM7dGhpcy5fdz1jMSpjMipjMy1zMSpzMipzMzt9ZWxzZSBpZihvcmRlcj09PSdYWlknKXt0aGlzLl94PXMxKmMyKmMzLWMxKnMyKnMzO3RoaXMuX3k9YzEqczIqYzMtczEqYzIqczM7dGhpcy5fej1jMSpjMipzMytzMSpzMipjMzt0aGlzLl93PWMxKmMyKmMzK3MxKnMyKnMzO31pZih1cGRhdGUhPT1mYWxzZSl0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LHNldEZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYXhpcyxhbmdsZSl7Ly8gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL2FuZ2xlVG9RdWF0ZXJuaW9uL2luZGV4Lmh0bVxuLy8gYXNzdW1lcyBheGlzIGlzIG5vcm1hbGl6ZWRcbnZhciBoYWxmQW5nbGU9YW5nbGUvMixzPU1hdGguc2luKGhhbGZBbmdsZSk7dGhpcy5feD1heGlzLngqczt0aGlzLl95PWF4aXMueSpzO3RoaXMuX3o9YXhpcy56KnM7dGhpcy5fdz1NYXRoLmNvcyhoYWxmQW5nbGUpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKG0pey8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9tYXRyaXhUb1F1YXRlcm5pb24vaW5kZXguaHRtXG4vLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKVxudmFyIHRlPW0uZWxlbWVudHMsbTExPXRlWzBdLG0xMj10ZVs0XSxtMTM9dGVbOF0sbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV0sbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdLHRyYWNlPW0xMSttMjIrbTMzLHM7aWYodHJhY2U+MCl7cz0wLjUvTWF0aC5zcXJ0KHRyYWNlKzEuMCk7dGhpcy5fdz0wLjI1L3M7dGhpcy5feD0obTMyLW0yMykqczt0aGlzLl95PShtMTMtbTMxKSpzO3RoaXMuX3o9KG0yMS1tMTIpKnM7fWVsc2UgaWYobTExPm0yMiYmbTExPm0zMyl7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMTEtbTIyLW0zMyk7dGhpcy5fdz0obTMyLW0yMykvczt0aGlzLl94PTAuMjUqczt0aGlzLl95PShtMTIrbTIxKS9zO3RoaXMuX3o9KG0xMyttMzEpL3M7fWVsc2UgaWYobTIyPm0zMyl7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMjItbTExLW0zMyk7dGhpcy5fdz0obTEzLW0zMSkvczt0aGlzLl94PShtMTIrbTIxKS9zO3RoaXMuX3k9MC4yNSpzO3RoaXMuX3o9KG0yMyttMzIpL3M7fWVsc2V7cz0yLjAqTWF0aC5zcXJ0KDEuMCttMzMtbTExLW0yMik7dGhpcy5fdz0obTIxLW0xMikvczt0aGlzLl94PShtMTMrbTMxKS9zO3RoaXMuX3k9KG0yMyttMzIpL3M7dGhpcy5fej0wLjI1KnM7fXRoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2V0RnJvbVVuaXRWZWN0b3JzOmZ1bmN0aW9uKCl7Ly8gaHR0cDovL2xvbGVuZ2luZS5uZXQvYmxvZy8yMDE0LzAyLzI0L3F1YXRlcm5pb24tZnJvbS10d28tdmVjdG9ycy1maW5hbFxuLy8gYXNzdW1lcyBkaXJlY3Rpb24gdmVjdG9ycyB2RnJvbSBhbmQgdlRvIGFyZSBub3JtYWxpemVkXG52YXIgdjEscjt2YXIgRVBTPTAuMDAwMDAxO3JldHVybiBmdW5jdGlvbih2RnJvbSx2VG8pe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cj12RnJvbS5kb3QodlRvKSsxO2lmKHI8RVBTKXtyPTA7aWYoTWF0aC5hYnModkZyb20ueCk+TWF0aC5hYnModkZyb20ueikpe3YxLnNldCgtdkZyb20ueSx2RnJvbS54LDApO31lbHNle3YxLnNldCgwLC12RnJvbS56LHZGcm9tLnkpO319ZWxzZXt2MS5jcm9zc1ZlY3RvcnModkZyb20sdlRvKTt9dGhpcy5feD12MS54O3RoaXMuX3k9djEueTt0aGlzLl96PXYxLno7dGhpcy5fdz1yO3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpO307fSgpLGludmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25qdWdhdGUoKS5ub3JtYWxpemUoKTt9LGNvbmp1Z2F0ZTpmdW5jdGlvbigpe3RoaXMuX3gqPS0xO3RoaXMuX3kqPS0xO3RoaXMuX3oqPS0xO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sZG90OmZ1bmN0aW9uKHYpe3JldHVybiB0aGlzLl94KnYuX3grdGhpcy5feSp2Ll95K3RoaXMuX3oqdi5feit0aGlzLl93KnYuX3c7fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3c7fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fdyk7fSxub3JtYWxpemU6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLmxlbmd0aCgpO2lmKGw9PT0wKXt0aGlzLl94PTA7dGhpcy5feT0wO3RoaXMuX3o9MDt0aGlzLl93PTE7fWVsc2V7bD0xL2w7dGhpcy5feD10aGlzLl94Kmw7dGhpcy5feT10aGlzLl95Kmw7dGhpcy5fej10aGlzLl96Kmw7dGhpcy5fdz10aGlzLl93Kmw7fXRoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sbXVsdGlwbHk6ZnVuY3Rpb24ocSxwKXtpZihwIT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMocSxwKTt9cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLHEpO30scHJlbXVsdGlwbHk6ZnVuY3Rpb24ocSl7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhxLHRoaXMpO30sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbihhLGIpey8vIGZyb20gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9jb2RlL2luZGV4Lmh0bVxudmFyIHFheD1hLl94LHFheT1hLl95LHFhej1hLl96LHFhdz1hLl93O3ZhciBxYng9Yi5feCxxYnk9Yi5feSxxYno9Yi5feixxYnc9Yi5fdzt0aGlzLl94PXFheCpxYncrcWF3KnFieCtxYXkqcWJ6LXFheipxYnk7dGhpcy5feT1xYXkqcWJ3K3FhdypxYnkrcWF6KnFieC1xYXgqcWJ6O3RoaXMuX3o9cWF6KnFidytxYXcqcWJ6K3FheCpxYnktcWF5KnFieDt0aGlzLl93PXFhdypxYnctcWF4KnFieC1xYXkqcWJ5LXFheipxYno7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSxzbGVycDpmdW5jdGlvbihxYix0KXtpZih0PT09MClyZXR1cm4gdGhpcztpZih0PT09MSlyZXR1cm4gdGhpcy5jb3B5KHFiKTt2YXIgeD10aGlzLl94LHk9dGhpcy5feSx6PXRoaXMuX3osdz10aGlzLl93Oy8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvcmVhbE5vcm1lZEFsZ2VicmEvcXVhdGVybmlvbnMvc2xlcnAvXG52YXIgY29zSGFsZlRoZXRhPXcqcWIuX3creCpxYi5feCt5KnFiLl95K3oqcWIuX3o7aWYoY29zSGFsZlRoZXRhPDApe3RoaXMuX3c9LXFiLl93O3RoaXMuX3g9LXFiLl94O3RoaXMuX3k9LXFiLl95O3RoaXMuX3o9LXFiLl96O2Nvc0hhbGZUaGV0YT0tY29zSGFsZlRoZXRhO31lbHNle3RoaXMuY29weShxYik7fWlmKGNvc0hhbGZUaGV0YT49MS4wKXt0aGlzLl93PXc7dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7cmV0dXJuIHRoaXM7fXZhciBzaW5IYWxmVGhldGE9TWF0aC5zcXJ0KDEuMC1jb3NIYWxmVGhldGEqY29zSGFsZlRoZXRhKTtpZihNYXRoLmFicyhzaW5IYWxmVGhldGEpPDAuMDAxKXt0aGlzLl93PTAuNSoodyt0aGlzLl93KTt0aGlzLl94PTAuNSooeCt0aGlzLl94KTt0aGlzLl95PTAuNSooeSt0aGlzLl95KTt0aGlzLl96PTAuNSooeit0aGlzLl96KTtyZXR1cm4gdGhpczt9dmFyIGhhbGZUaGV0YT1NYXRoLmF0YW4yKHNpbkhhbGZUaGV0YSxjb3NIYWxmVGhldGEpO3ZhciByYXRpb0E9TWF0aC5zaW4oKDEtdCkqaGFsZlRoZXRhKS9zaW5IYWxmVGhldGEscmF0aW9CPU1hdGguc2luKHQqaGFsZlRoZXRhKS9zaW5IYWxmVGhldGE7dGhpcy5fdz13KnJhdGlvQSt0aGlzLl93KnJhdGlvQjt0aGlzLl94PXgqcmF0aW9BK3RoaXMuX3gqcmF0aW9CO3RoaXMuX3k9eSpyYXRpb0ErdGhpcy5feSpyYXRpb0I7dGhpcy5fej16KnJhdGlvQSt0aGlzLl96KnJhdGlvQjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbihxdWF0ZXJuaW9uKXtyZXR1cm4gcXVhdGVybmlvbi5feD09PXRoaXMuX3gmJnF1YXRlcm5pb24uX3k9PT10aGlzLl95JiZxdWF0ZXJuaW9uLl96PT09dGhpcy5feiYmcXVhdGVybmlvbi5fdz09PXRoaXMuX3c7fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy5feD1hcnJheVtvZmZzZXRdO3RoaXMuX3k9YXJyYXlbb2Zmc2V0KzFdO3RoaXMuX3o9YXJyYXlbb2Zmc2V0KzJdO3RoaXMuX3c9YXJyYXlbb2Zmc2V0KzNdO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDthcnJheVtvZmZzZXRdPXRoaXMuX3g7YXJyYXlbb2Zmc2V0KzFdPXRoaXMuX3k7YXJyYXlbb2Zmc2V0KzJdPXRoaXMuX3o7YXJyYXlbb2Zmc2V0KzNdPXRoaXMuX3c7cmV0dXJuIGFycmF5O30sb25DaGFuZ2U6ZnVuY3Rpb24oY2FsbGJhY2spe3RoaXMub25DaGFuZ2VDYWxsYmFjaz1jYWxsYmFjaztyZXR1cm4gdGhpczt9LG9uQ2hhbmdlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9fTtPYmplY3QuYXNzaWduKFRIUkVFLlF1YXRlcm5pb24se3NsZXJwOmZ1bmN0aW9uKHFhLHFiLHFtLHQpe3JldHVybiBxbS5jb3B5KHFhKS5zbGVycChxYix0KTt9LHNsZXJwRmxhdDpmdW5jdGlvbihkc3QsZHN0T2Zmc2V0LHNyYzAsc3JjT2Zmc2V0MCxzcmMxLHNyY09mZnNldDEsdCl7Ly8gZnV6ei1mcmVlLCBhcnJheS1iYXNlZCBRdWF0ZXJuaW9uIFNMRVJQIG9wZXJhdGlvblxudmFyIHgwPXNyYzBbc3JjT2Zmc2V0MCswXSx5MD1zcmMwW3NyY09mZnNldDArMV0sejA9c3JjMFtzcmNPZmZzZXQwKzJdLHcwPXNyYzBbc3JjT2Zmc2V0MCszXSx4MT1zcmMxW3NyY09mZnNldDErMF0seTE9c3JjMVtzcmNPZmZzZXQxKzFdLHoxPXNyYzFbc3JjT2Zmc2V0MSsyXSx3MT1zcmMxW3NyY09mZnNldDErM107aWYodzAhPT13MXx8eDAhPT14MXx8eTAhPT15MXx8ejAhPT16MSl7dmFyIHM9MS10LGNvcz14MCp4MSt5MCp5MSt6MCp6MSt3MCp3MSxkaXI9Y29zPj0wPzE6LTEsc3FyU2luPTEtY29zKmNvczsvLyBTa2lwIHRoZSBTbGVycCBmb3IgdGlueSBzdGVwcyB0byBhdm9pZCBudW1lcmljIHByb2JsZW1zOlxuaWYoc3FyU2luPk51bWJlci5FUFNJTE9OKXt2YXIgc2luPU1hdGguc3FydChzcXJTaW4pLGxlbj1NYXRoLmF0YW4yKHNpbixjb3MqZGlyKTtzPU1hdGguc2luKHMqbGVuKS9zaW47dD1NYXRoLnNpbih0Kmxlbikvc2luO312YXIgdERpcj10KmRpcjt4MD14MCpzK3gxKnREaXI7eTA9eTAqcyt5MSp0RGlyO3owPXowKnMrejEqdERpcjt3MD13MCpzK3cxKnREaXI7Ly8gTm9ybWFsaXplIGluIGNhc2Ugd2UganVzdCBkaWQgYSBsZXJwOlxuaWYocz09PTEtdCl7dmFyIGY9MS9NYXRoLnNxcnQoeDAqeDAreTAqeTArejAqejArdzAqdzApO3gwKj1mO3kwKj1mO3owKj1mO3cwKj1mO319ZHN0W2RzdE9mZnNldF09eDA7ZHN0W2RzdE9mZnNldCsxXT15MDtkc3RbZHN0T2Zmc2V0KzJdPXowO2RzdFtkc3RPZmZzZXQrM109dzA7fX0pOy8vIEZpbGU6c3JjL21hdGgvVmVjdG9yMi5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgcGhpbG9nYiAvIGh0dHA6Ly9ibG9nLnRoZWppdC5vcmcvXHJcbiAqIEBhdXRob3IgZWdyYWV0aGVyIC8gaHR0cDovL2VncmFldGhlci5jb20vXHJcbiAqIEBhdXRob3Igeno4NSAvIGh0dHA6Ly93d3cubGFiNGdhbWVzLm5ldC96ejg1L2Jsb2dcclxuICovVEhSRUUuVmVjdG9yMj1mdW5jdGlvbih4LHkpe3RoaXMueD14fHwwO3RoaXMueT15fHwwO307VEhSRUUuVmVjdG9yMi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjIsZ2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMueDt9LHNldCB3aWR0aCh2YWx1ZSl7dGhpcy54PXZhbHVlO30sZ2V0IGhlaWdodCgpe3JldHVybiB0aGlzLnk7fSxzZXQgaGVpZ2h0KHZhbHVlKXt0aGlzLnk9dmFsdWU7fSwvL1xuc2V0OmZ1bmN0aW9uKHgseSl7dGhpcy54PXg7dGhpcy55PXk7cmV0dXJuIHRoaXM7fSxzZXRTY2FsYXI6ZnVuY3Rpb24oc2NhbGFyKXt0aGlzLng9c2NhbGFyO3RoaXMueT1zY2FsYXI7cmV0dXJuIHRoaXM7fSxzZXRYOmZ1bmN0aW9uKHgpe3RoaXMueD14O3JldHVybiB0aGlzO30sc2V0WTpmdW5jdGlvbih5KXt0aGlzLnk9eTtyZXR1cm4gdGhpczt9LHNldENvbXBvbmVudDpmdW5jdGlvbihpbmRleCx2YWx1ZSl7c3dpdGNoKGluZGV4KXtjYXNlIDA6dGhpcy54PXZhbHVlO2JyZWFrO2Nhc2UgMTp0aGlzLnk9dmFsdWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJytpbmRleCk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGluZGV4KXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpO30sY29weTpmdW5jdGlvbih2KXt0aGlzLng9di54O3RoaXMueT12Lnk7cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5hZGRWZWN0b3JzKHYsdyk7fXRoaXMueCs9di54O3RoaXMueSs9di55O3JldHVybiB0aGlzO30sYWRkU2NhbGFyOmZ1bmN0aW9uKHMpe3RoaXMueCs9czt0aGlzLnkrPXM7cmV0dXJuIHRoaXM7fSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXM7fSxhZGRTY2FsZWRWZWN0b3I6ZnVuY3Rpb24odixzKXt0aGlzLngrPXYueCpzO3RoaXMueSs9di55KnM7cmV0dXJuIHRoaXM7fSxzdWI6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjI6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYsdyk7fXRoaXMueC09di54O3RoaXMueS09di55O3JldHVybiB0aGlzO30sc3ViU2NhbGFyOmZ1bmN0aW9uKHMpe3RoaXMueC09czt0aGlzLnktPXM7cmV0dXJuIHRoaXM7fSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7cmV0dXJuIHRoaXM7fSxtdWx0aXBseTpmdW5jdGlvbih2KXt0aGlzLngqPXYueDt0aGlzLnkqPXYueTtyZXR1cm4gdGhpczt9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7aWYoaXNGaW5pdGUoc2NhbGFyKSl7dGhpcy54Kj1zY2FsYXI7dGhpcy55Kj1zY2FsYXI7fWVsc2V7dGhpcy54PTA7dGhpcy55PTA7fXJldHVybiB0aGlzO30sZGl2aWRlOmZ1bmN0aW9uKHYpe3RoaXMueC89di54O3RoaXMueS89di55O3JldHVybiB0aGlzO30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO30sbWluOmZ1bmN0aW9uKHYpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LHYueSk7cmV0dXJuIHRoaXM7fSxtYXg6ZnVuY3Rpb24odil7dGhpcy54PU1hdGgubWF4KHRoaXMueCx2LngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksdi55KTtyZXR1cm4gdGhpczt9LGNsYW1wOmZ1bmN0aW9uKG1pbixtYXgpey8vIFRoaXMgZnVuY3Rpb24gYXNzdW1lcyBtaW4gPCBtYXgsIGlmIHRoaXMgYXNzdW1wdGlvbiBpc24ndCB0cnVlIGl0IHdpbGwgbm90IG9wZXJhdGUgY29ycmVjdGx5XG50aGlzLng9TWF0aC5tYXgobWluLngsTWF0aC5taW4obWF4LngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KG1pbi55LE1hdGgubWluKG1heC55LHRoaXMueSkpO3JldHVybiB0aGlzO30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgbWluLG1heDtyZXR1cm4gZnVuY3Rpb24gY2xhbXBTY2FsYXIobWluVmFsLG1heFZhbCl7aWYobWluPT09dW5kZWZpbmVkKXttaW49bmV3IFRIUkVFLlZlY3RvcjIoKTttYXg9bmV3IFRIUkVFLlZlY3RvcjIoKTt9bWluLnNldChtaW5WYWwsbWluVmFsKTttYXguc2V0KG1heFZhbCxtYXhWYWwpO3JldHVybiB0aGlzLmNsYW1wKG1pbixtYXgpO307fSgpLGNsYW1wTGVuZ3RoOmZ1bmN0aW9uKG1pbixtYXgpe3ZhciBsZW5ndGg9dGhpcy5sZW5ndGgoKTtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LGxlbmd0aCkpL2xlbmd0aCk7fSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpczt9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3JldHVybiB0aGlzO30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXM7fSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD10aGlzLng8MD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PXRoaXMueTwwP01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpczt9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3JldHVybiB0aGlzO30sZG90OmZ1bmN0aW9uKHYpe3JldHVybiB0aGlzLngqdi54K3RoaXMueSp2Lnk7fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnk7fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSk7fSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpO30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpO30sYW5nbGU6ZnVuY3Rpb24oKXsvLyBjb21wdXRlcyB0aGUgYW5nbGUgaW4gcmFkaWFucyB3aXRoIHJlc3BlY3QgdG8gdGhlIHBvc2l0aXZlIHgtYXhpc1xudmFyIGFuZ2xlPU1hdGguYXRhbjIodGhpcy55LHRoaXMueCk7aWYoYW5nbGU8MClhbmdsZSs9MipNYXRoLlBJO3JldHVybiBhbmdsZTt9LGRpc3RhbmNlVG86ZnVuY3Rpb24odil7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKHYpKTt9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKHYpe3ZhciBkeD10aGlzLngtdi54LGR5PXRoaXMueS12Lnk7cmV0dXJuIGR4KmR4K2R5KmR5O30sc2V0TGVuZ3RoOmZ1bmN0aW9uKGxlbmd0aCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIobGVuZ3RoL3RoaXMubGVuZ3RoKCkpO30sbGVycDpmdW5jdGlvbih2LGFscGhhKXt0aGlzLngrPSh2LngtdGhpcy54KSphbHBoYTt0aGlzLnkrPSh2LnktdGhpcy55KSphbHBoYTtyZXR1cm4gdGhpczt9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKHYxLHYyLGFscGhhKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYyLHYxKS5tdWx0aXBseVNjYWxhcihhbHBoYSkuYWRkKHYxKTt9LGVxdWFsczpmdW5jdGlvbih2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnk7fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy54PWFycmF5W29mZnNldF07dGhpcy55PWFycmF5W29mZnNldCsxXTtyZXR1cm4gdGhpczt9LHRvQXJyYXk6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtpZihhcnJheT09PXVuZGVmaW5lZClhcnJheT1bXTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7YXJyYXlbb2Zmc2V0XT10aGlzLng7YXJyYXlbb2Zmc2V0KzFdPXRoaXMueTtyZXR1cm4gYXJyYXk7fSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDtpbmRleD1pbmRleCphdHRyaWJ1dGUuaXRlbVNpemUrb2Zmc2V0O3RoaXMueD1hdHRyaWJ1dGUuYXJyYXlbaW5kZXhdO3RoaXMueT1hdHRyaWJ1dGUuYXJyYXlbaW5kZXgrMV07cmV0dXJuIHRoaXM7fSxyb3RhdGVBcm91bmQ6ZnVuY3Rpb24oY2VudGVyLGFuZ2xlKXt2YXIgYz1NYXRoLmNvcyhhbmdsZSkscz1NYXRoLnNpbihhbmdsZSk7dmFyIHg9dGhpcy54LWNlbnRlci54O3ZhciB5PXRoaXMueS1jZW50ZXIueTt0aGlzLng9eCpjLXkqcytjZW50ZXIueDt0aGlzLnk9eCpzK3kqYytjZW50ZXIueTtyZXR1cm4gdGhpczt9fTsvLyBGaWxlOnNyYy9tYXRoL1ZlY3RvcjMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yICpraWxlIC8gaHR0cDovL2tpbGUuc3RyYXZhZ2FuemEub3JnL1xyXG4gKiBAYXV0aG9yIHBoaWxvZ2IgLyBodHRwOi8vYmxvZy50aGVqaXQub3JnL1xyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGVncmFldGhlciAvIGh0dHA6Ly9lZ3JhZXRoZXIuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovVEhSRUUuVmVjdG9yMz1mdW5jdGlvbih4LHkseil7dGhpcy54PXh8fDA7dGhpcy55PXl8fDA7dGhpcy56PXp8fDA7fTtUSFJFRS5WZWN0b3IzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yMyxzZXQ6ZnVuY3Rpb24oeCx5LHope3RoaXMueD14O3RoaXMueT15O3RoaXMuej16O3JldHVybiB0aGlzO30sc2V0U2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7dGhpcy54PXNjYWxhcjt0aGlzLnk9c2NhbGFyO3RoaXMuej1zY2FsYXI7cmV0dXJuIHRoaXM7fSxzZXRYOmZ1bmN0aW9uKHgpe3RoaXMueD14O3JldHVybiB0aGlzO30sc2V0WTpmdW5jdGlvbih5KXt0aGlzLnk9eTtyZXR1cm4gdGhpczt9LHNldFo6ZnVuY3Rpb24oeil7dGhpcy56PXo7cmV0dXJuIHRoaXM7fSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oaW5kZXgsdmFsdWUpe3N3aXRjaChpbmRleCl7Y2FzZSAwOnRoaXMueD12YWx1ZTticmVhaztjYXNlIDE6dGhpcy55PXZhbHVlO2JyZWFrO2Nhc2UgMjp0aGlzLno9dmFsdWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJytpbmRleCk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGluZGV4KXtzd2l0Y2goaW5kZXgpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdpbmRleCBpcyBvdXQgb2YgcmFuZ2U6ICcraW5kZXgpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56KTt9LGNvcHk6ZnVuY3Rpb24odil7dGhpcy54PXYueDt0aGlzLnk9di55O3RoaXMuej12Lno7cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5hZGRWZWN0b3JzKHYsdyk7fXRoaXMueCs9di54O3RoaXMueSs9di55O3RoaXMueis9di56O3JldHVybiB0aGlzO30sYWRkU2NhbGFyOmZ1bmN0aW9uKHMpe3RoaXMueCs9czt0aGlzLnkrPXM7dGhpcy56Kz1zO3JldHVybiB0aGlzO30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3JldHVybiB0aGlzO30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3RoaXMueis9di56KnM7cmV0dXJuIHRoaXM7fSxzdWI6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC4nKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYsdyk7fXRoaXMueC09di54O3RoaXMueS09di55O3RoaXMuei09di56O3JldHVybiB0aGlzO30sc3ViU2NhbGFyOmZ1bmN0aW9uKHMpe3RoaXMueC09czt0aGlzLnktPXM7dGhpcy56LT1zO3JldHVybiB0aGlzO30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3JldHVybiB0aGlzO30sbXVsdGlwbHk6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMubXVsdGlwbHlWZWN0b3JzKHYsdyk7fXRoaXMueCo9di54O3RoaXMueSo9di55O3RoaXMueio9di56O3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oc2NhbGFyKXtpZihpc0Zpbml0ZShzY2FsYXIpKXt0aGlzLngqPXNjYWxhcjt0aGlzLnkqPXNjYWxhcjt0aGlzLnoqPXNjYWxhcjt9ZWxzZXt0aGlzLng9MDt0aGlzLnk9MDt0aGlzLno9MDt9cmV0dXJuIHRoaXM7fSxtdWx0aXBseVZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54KmIueDt0aGlzLnk9YS55KmIueTt0aGlzLno9YS56KmIuejtyZXR1cm4gdGhpczt9LGFwcGx5RXVsZXI6ZnVuY3Rpb24oKXt2YXIgcXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24gYXBwbHlFdWxlcihldWxlcil7aWYoZXVsZXIgaW5zdGFuY2VvZiBUSFJFRS5FdWxlcj09PWZhbHNlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5WZWN0b3IzOiAuYXBwbHlFdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuJyk7fWlmKHF1YXRlcm5pb249PT11bmRlZmluZWQpcXVhdGVybmlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbigpO3JldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uLnNldEZyb21FdWxlcihldWxlcikpO307fSgpLGFwcGx5QXhpc0FuZ2xlOmZ1bmN0aW9uKCl7dmFyIHF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uIGFwcGx5QXhpc0FuZ2xlKGF4aXMsYW5nbGUpe2lmKHF1YXRlcm5pb249PT11bmRlZmluZWQpcXVhdGVybmlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbigpO3JldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSkpO307fSgpLGFwcGx5TWF0cml4MzpmdW5jdGlvbihtKXt2YXIgeD10aGlzLngseT10aGlzLnksej10aGlzLno7dmFyIGU9bS5lbGVtZW50czt0aGlzLng9ZVswXSp4K2VbM10qeStlWzZdKno7dGhpcy55PWVbMV0qeCtlWzRdKnkrZVs3XSp6O3RoaXMuej1lWzJdKngrZVs1XSp5K2VbOF0qejtyZXR1cm4gdGhpczt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihtKXsvLyBpbnB1dDogVEhSRUUuTWF0cml4NCBhZmZpbmUgbWF0cml4XG52YXIgeD10aGlzLngseT10aGlzLnksej10aGlzLno7dmFyIGU9bS5lbGVtZW50czt0aGlzLng9ZVswXSp4K2VbNF0qeStlWzhdKnorZVsxMl07dGhpcy55PWVbMV0qeCtlWzVdKnkrZVs5XSp6K2VbMTNdO3RoaXMuej1lWzJdKngrZVs2XSp5K2VbMTBdKnorZVsxNF07cmV0dXJuIHRoaXM7fSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24obSl7Ly8gaW5wdXQ6IFRIUkVFLk1hdHJpeDQgcHJvamVjdGlvbiBtYXRyaXhcbnZhciB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMuejt2YXIgZT1tLmVsZW1lbnRzO3ZhciBkPTEvKGVbM10qeCtlWzddKnkrZVsxMV0qeitlWzE1XSk7Ly8gcGVyc3BlY3RpdmUgZGl2aWRlXG50aGlzLng9KGVbMF0qeCtlWzRdKnkrZVs4XSp6K2VbMTJdKSpkO3RoaXMueT0oZVsxXSp4K2VbNV0qeStlWzldKnorZVsxM10pKmQ7dGhpcy56PShlWzJdKngrZVs2XSp5K2VbMTBdKnorZVsxNF0pKmQ7cmV0dXJuIHRoaXM7fSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24ocSl7dmFyIHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56O3ZhciBxeD1xLngscXk9cS55LHF6PXEueixxdz1xLnc7Ly8gY2FsY3VsYXRlIHF1YXQgKiB2ZWN0b3JcbnZhciBpeD1xdyp4K3F5KnotcXoqeTt2YXIgaXk9cXcqeStxeip4LXF4Kno7dmFyIGl6PXF3KnorcXgqeS1xeSp4O3ZhciBpdz0tcXgqeC1xeSp5LXF6Kno7Ly8gY2FsY3VsYXRlIHJlc3VsdCAqIGludmVyc2UgcXVhdFxudGhpcy54PWl4KnF3K2l3Ki1xeCtpeSotcXotaXoqLXF5O3RoaXMueT1peSpxdytpdyotcXkraXoqLXF4LWl4Ki1xejt0aGlzLno9aXoqcXcraXcqLXF6K2l4Ki1xeS1peSotcXg7cmV0dXJuIHRoaXM7fSxwcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIG1hdHJpeDtyZXR1cm4gZnVuY3Rpb24gcHJvamVjdChjYW1lcmEpe2lmKG1hdHJpeD09PXVuZGVmaW5lZCltYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQoKTttYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEucHJvamVjdGlvbk1hdHJpeCxtYXRyaXguZ2V0SW52ZXJzZShjYW1lcmEubWF0cml4V29ybGQpKTtyZXR1cm4gdGhpcy5hcHBseVByb2plY3Rpb24obWF0cml4KTt9O30oKSx1bnByb2plY3Q6ZnVuY3Rpb24oKXt2YXIgbWF0cml4O3JldHVybiBmdW5jdGlvbiB1bnByb2plY3QoY2FtZXJhKXtpZihtYXRyaXg9PT11bmRlZmluZWQpbWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7bWF0cml4Lm11bHRpcGx5TWF0cmljZXMoY2FtZXJhLm1hdHJpeFdvcmxkLG1hdHJpeC5nZXRJbnZlcnNlKGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KSk7cmV0dXJuIHRoaXMuYXBwbHlQcm9qZWN0aW9uKG1hdHJpeCk7fTt9KCksdHJhbnNmb3JtRGlyZWN0aW9uOmZ1bmN0aW9uKG0pey8vIGlucHV0OiBUSFJFRS5NYXRyaXg0IGFmZmluZSBtYXRyaXhcbi8vIHZlY3RvciBpbnRlcnByZXRlZCBhcyBhIGRpcmVjdGlvblxudmFyIHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56O3ZhciBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzRdKnkrZVs4XSp6O3RoaXMueT1lWzFdKngrZVs1XSp5K2VbOV0qejt0aGlzLno9ZVsyXSp4K2VbNl0qeStlWzEwXSp6O3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpO30sZGl2aWRlOmZ1bmN0aW9uKHYpe3RoaXMueC89di54O3RoaXMueS89di55O3RoaXMuei89di56O3JldHVybiB0aGlzO30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9zY2FsYXIpO30sbWluOmZ1bmN0aW9uKHYpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LHYueSk7dGhpcy56PU1hdGgubWluKHRoaXMueix2LnopO3JldHVybiB0aGlzO30sbWF4OmZ1bmN0aW9uKHYpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LHYueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueix2LnopO3JldHVybiB0aGlzO30sY2xhbXA6ZnVuY3Rpb24obWluLG1heCl7Ly8gVGhpcyBmdW5jdGlvbiBhc3N1bWVzIG1pbiA8IG1heCwgaWYgdGhpcyBhc3N1bXB0aW9uIGlzbid0IHRydWUgaXQgd2lsbCBub3Qgb3BlcmF0ZSBjb3JyZWN0bHlcbnRoaXMueD1NYXRoLm1heChtaW4ueCxNYXRoLm1pbihtYXgueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgobWluLnksTWF0aC5taW4obWF4LnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KG1pbi56LE1hdGgubWluKG1heC56LHRoaXMueikpO3JldHVybiB0aGlzO30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgbWluLG1heDtyZXR1cm4gZnVuY3Rpb24gY2xhbXBTY2FsYXIobWluVmFsLG1heFZhbCl7aWYobWluPT09dW5kZWZpbmVkKXttaW49bmV3IFRIUkVFLlZlY3RvcjMoKTttYXg9bmV3IFRIUkVFLlZlY3RvcjMoKTt9bWluLnNldChtaW5WYWwsbWluVmFsLG1pblZhbCk7bWF4LnNldChtYXhWYWwsbWF4VmFsLG1heFZhbCk7cmV0dXJuIHRoaXMuY2xhbXAobWluLG1heCk7fTt9KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24obWluLG1heCl7dmFyIGxlbmd0aD10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsbGVuZ3RoKSkvbGVuZ3RoKTt9LGZsb29yOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej1NYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXM7fSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7cmV0dXJuIHRoaXM7fSxyb3VuZDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJvdW5kKHRoaXMueCk7dGhpcy55PU1hdGgucm91bmQodGhpcy55KTt0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopO3JldHVybiB0aGlzO30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpczt9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3JldHVybiB0aGlzO30sZG90OmZ1bmN0aW9uKHYpe3JldHVybiB0aGlzLngqdi54K3RoaXMueSp2LnkrdGhpcy56KnYuejt9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56O30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueik7fSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueik7fSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSk7fSxzZXRMZW5ndGg6ZnVuY3Rpb24obGVuZ3RoKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihsZW5ndGgvdGhpcy5sZW5ndGgoKSk7fSxsZXJwOmZ1bmN0aW9uKHYsYWxwaGEpe3RoaXMueCs9KHYueC10aGlzLngpKmFscGhhO3RoaXMueSs9KHYueS10aGlzLnkpKmFscGhhO3RoaXMueis9KHYuei10aGlzLnopKmFscGhhO3JldHVybiB0aGlzO30sbGVycFZlY3RvcnM6ZnVuY3Rpb24odjEsdjIsYWxwaGEpe3JldHVybiB0aGlzLnN1YlZlY3RvcnModjIsdjEpLm11bHRpcGx5U2NhbGFyKGFscGhhKS5hZGQodjEpO30sY3Jvc3M6ZnVuY3Rpb24odix3KXtpZih3IT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuY3Jvc3NWZWN0b3JzKHYsdyk7fXZhciB4PXRoaXMueCx5PXRoaXMueSx6PXRoaXMuejt0aGlzLng9eSp2Lnoteip2Lnk7dGhpcy55PXoqdi54LXgqdi56O3RoaXMuej14KnYueS15KnYueDtyZXR1cm4gdGhpczt9LGNyb3NzVmVjdG9yczpmdW5jdGlvbihhLGIpe3ZhciBheD1hLngsYXk9YS55LGF6PWEuejt2YXIgYng9Yi54LGJ5PWIueSxiej1iLno7dGhpcy54PWF5KmJ6LWF6KmJ5O3RoaXMueT1heipieC1heCpiejt0aGlzLno9YXgqYnktYXkqYng7cmV0dXJuIHRoaXM7fSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24oKXt2YXIgdjEsZG90O3JldHVybiBmdW5jdGlvbiBwcm9qZWN0T25WZWN0b3IodmVjdG9yKXtpZih2MT09PXVuZGVmaW5lZCl2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3YxLmNvcHkodmVjdG9yKS5ub3JtYWxpemUoKTtkb3Q9dGhpcy5kb3QodjEpO3JldHVybiB0aGlzLmNvcHkodjEpLm11bHRpcGx5U2NhbGFyKGRvdCk7fTt9KCkscHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgdjE7cmV0dXJuIGZ1bmN0aW9uIHByb2plY3RPblBsYW5lKHBsYW5lTm9ybWFsKXtpZih2MT09PXVuZGVmaW5lZCl2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3YxLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKHBsYW5lTm9ybWFsKTtyZXR1cm4gdGhpcy5zdWIodjEpO307fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXsvLyByZWZsZWN0IGluY2lkZW50IHZlY3RvciBvZmYgcGxhbmUgb3J0aG9nb25hbCB0byBub3JtYWxcbi8vIG5vcm1hbCBpcyBhc3N1bWVkIHRvIGhhdmUgdW5pdCBsZW5ndGhcbnZhciB2MTtyZXR1cm4gZnVuY3Rpb24gcmVmbGVjdChub3JtYWwpe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIHRoaXMuc3ViKHYxLmNvcHkobm9ybWFsKS5tdWx0aXBseVNjYWxhcigyKnRoaXMuZG90KG5vcm1hbCkpKTt9O30oKSxhbmdsZVRvOmZ1bmN0aW9uKHYpe3ZhciB0aGV0YT10aGlzLmRvdCh2KS9NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKnYubGVuZ3RoU3EoKSk7Ly8gY2xhbXAsIHRvIGhhbmRsZSBudW1lcmljYWwgcHJvYmxlbXNcbnJldHVybiBNYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcCh0aGV0YSwtMSwxKSk7fSxkaXN0YW5jZVRvOmZ1bmN0aW9uKHYpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZCh2KSk7fSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbih2KXt2YXIgZHg9dGhpcy54LXYueCxkeT10aGlzLnktdi55LGR6PXRoaXMuei12Lno7cmV0dXJuIGR4KmR4K2R5KmR5K2R6KmR6O30sc2V0RnJvbVNwaGVyaWNhbDpmdW5jdGlvbihzKXt2YXIgc2luUGhpUmFkaXVzPU1hdGguc2luKHMucGhpKSpzLnJhZGl1czt0aGlzLng9c2luUGhpUmFkaXVzKk1hdGguc2luKHMudGhldGEpO3RoaXMueT1NYXRoLmNvcyhzLnBoaSkqcy5yYWRpdXM7dGhpcy56PXNpblBoaVJhZGl1cypNYXRoLmNvcyhzLnRoZXRhKTtyZXR1cm4gdGhpczt9LHNldEZyb21NYXRyaXhQb3NpdGlvbjpmdW5jdGlvbihtKXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMyk7fSxzZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24obSl7dmFyIHN4PXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihtLDApLmxlbmd0aCgpO3ZhciBzeT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4obSwxKS5sZW5ndGgoKTt2YXIgc3o9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMikubGVuZ3RoKCk7dGhpcy54PXN4O3RoaXMueT1zeTt0aGlzLno9c3o7cmV0dXJuIHRoaXM7fSxzZXRGcm9tTWF0cml4Q29sdW1uOmZ1bmN0aW9uKG0saW5kZXgpe2lmKHR5cGVvZiBtPT09J251bWJlcicpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMzogc2V0RnJvbU1hdHJpeENvbHVtbiBub3cgZXhwZWN0cyAoIG1hdHJpeCwgaW5kZXggKS4nKTt2YXIgdGVtcD1tO209aW5kZXg7aW5kZXg9dGVtcDt9cmV0dXJuIHRoaXMuZnJvbUFycmF5KG0uZWxlbWVudHMsaW5kZXgqNCk7fSxlcXVhbHM6ZnVuY3Rpb24odil7cmV0dXJuIHYueD09PXRoaXMueCYmdi55PT09dGhpcy55JiZ2Lno9PT10aGlzLno7fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy54PWFycmF5W29mZnNldF07dGhpcy55PWFycmF5W29mZnNldCsxXTt0aGlzLno9YXJyYXlbb2Zmc2V0KzJdO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDthcnJheVtvZmZzZXRdPXRoaXMueDthcnJheVtvZmZzZXQrMV09dGhpcy55O2FycmF5W29mZnNldCsyXT10aGlzLno7cmV0dXJuIGFycmF5O30sZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhdHRyaWJ1dGUsaW5kZXgsb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7aW5kZXg9aW5kZXgqYXR0cmlidXRlLml0ZW1TaXplK29mZnNldDt0aGlzLng9YXR0cmlidXRlLmFycmF5W2luZGV4XTt0aGlzLnk9YXR0cmlidXRlLmFycmF5W2luZGV4KzFdO3RoaXMuej1hdHRyaWJ1dGUuYXJyYXlbaW5kZXgrMl07cmV0dXJuIHRoaXM7fX07Ly8gRmlsZTpzcmMvbWF0aC9WZWN0b3I0LmpzXG4vKipcclxuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cclxuICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy9cclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciBlZ3JhZXRoZXIgLyBodHRwOi8vZWdyYWV0aGVyLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqL1RIUkVFLlZlY3RvcjQ9ZnVuY3Rpb24oeCx5LHosdyl7dGhpcy54PXh8fDA7dGhpcy55PXl8fDA7dGhpcy56PXp8fDA7dGhpcy53PXchPT11bmRlZmluZWQ/dzoxO307VEhSRUUuVmVjdG9yNC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjQsc2V0OmZ1bmN0aW9uKHgseSx6LHcpe3RoaXMueD14O3RoaXMueT15O3RoaXMuej16O3RoaXMudz13O3JldHVybiB0aGlzO30sc2V0U2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7dGhpcy54PXNjYWxhcjt0aGlzLnk9c2NhbGFyO3RoaXMuej1zY2FsYXI7dGhpcy53PXNjYWxhcjtyZXR1cm4gdGhpczt9LHNldFg6ZnVuY3Rpb24oeCl7dGhpcy54PXg7cmV0dXJuIHRoaXM7fSxzZXRZOmZ1bmN0aW9uKHkpe3RoaXMueT15O3JldHVybiB0aGlzO30sc2V0WjpmdW5jdGlvbih6KXt0aGlzLno9ejtyZXR1cm4gdGhpczt9LHNldFc6ZnVuY3Rpb24odyl7dGhpcy53PXc7cmV0dXJuIHRoaXM7fSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oaW5kZXgsdmFsdWUpe3N3aXRjaChpbmRleCl7Y2FzZSAwOnRoaXMueD12YWx1ZTticmVhaztjYXNlIDE6dGhpcy55PXZhbHVlO2JyZWFrO2Nhc2UgMjp0aGlzLno9dmFsdWU7YnJlYWs7Y2FzZSAzOnRoaXMudz12YWx1ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcignaW5kZXggaXMgb3V0IG9mIHJhbmdlOiAnK2luZGV4KTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oaW5kZXgpe3N3aXRjaChpbmRleCl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ2luZGV4IGlzIG91dCBvZiByYW5nZTogJytpbmRleCk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KTt9LGNvcHk6ZnVuY3Rpb24odil7dGhpcy54PXYueDt0aGlzLnk9di55O3RoaXMuej12Lno7dGhpcy53PXYudyE9PXVuZGVmaW5lZD92Lnc6MTtyZXR1cm4gdGhpczt9LGFkZDpmdW5jdGlvbih2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yNDogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLmFkZFZlY3RvcnModix3KTt9dGhpcy54Kz12Lng7dGhpcy55Kz12Lnk7dGhpcy56Kz12Lno7dGhpcy53Kz12Lnc7cmV0dXJuIHRoaXM7fSxhZGRTY2FsYXI6ZnVuY3Rpb24ocyl7dGhpcy54Kz1zO3RoaXMueSs9czt0aGlzLnorPXM7dGhpcy53Kz1zO3JldHVybiB0aGlzO30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3RoaXMudz1hLncrYi53O3JldHVybiB0aGlzO30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKHYscyl7dGhpcy54Kz12Lngqczt0aGlzLnkrPXYueSpzO3RoaXMueis9di56KnM7dGhpcy53Kz12LncqcztyZXR1cm4gdGhpczt9LHN1YjpmdW5jdGlvbih2LHcpe2lmKHchPT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLnN1YlZlY3RvcnModix3KTt9dGhpcy54LT12Lng7dGhpcy55LT12Lnk7dGhpcy56LT12Lno7dGhpcy53LT12Lnc7cmV0dXJuIHRoaXM7fSxzdWJTY2FsYXI6ZnVuY3Rpb24ocyl7dGhpcy54LT1zO3RoaXMueS09czt0aGlzLnotPXM7dGhpcy53LT1zO3JldHVybiB0aGlzO30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3RoaXMudz1hLnctYi53O3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oc2NhbGFyKXtpZihpc0Zpbml0ZShzY2FsYXIpKXt0aGlzLngqPXNjYWxhcjt0aGlzLnkqPXNjYWxhcjt0aGlzLnoqPXNjYWxhcjt0aGlzLncqPXNjYWxhcjt9ZWxzZXt0aGlzLng9MDt0aGlzLnk9MDt0aGlzLno9MDt0aGlzLnc9MDt9cmV0dXJuIHRoaXM7fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24obSl7dmFyIHg9dGhpcy54LHk9dGhpcy55LHo9dGhpcy56LHc9dGhpcy53O3ZhciBlPW0uZWxlbWVudHM7dGhpcy54PWVbMF0qeCtlWzRdKnkrZVs4XSp6K2VbMTJdKnc7dGhpcy55PWVbMV0qeCtlWzVdKnkrZVs5XSp6K2VbMTNdKnc7dGhpcy56PWVbMl0qeCtlWzZdKnkrZVsxMF0qeitlWzE0XSp3O3RoaXMudz1lWzNdKngrZVs3XSp5K2VbMTFdKnorZVsxNV0qdztyZXR1cm4gdGhpczt9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihzY2FsYXIpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvc2NhbGFyKTt9LHNldEF4aXNBbmdsZUZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKHEpey8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9xdWF0ZXJuaW9uVG9BbmdsZS9pbmRleC5odG1cbi8vIHEgaXMgYXNzdW1lZCB0byBiZSBub3JtYWxpemVkXG50aGlzLnc9MipNYXRoLmFjb3MocS53KTt2YXIgcz1NYXRoLnNxcnQoMS1xLncqcS53KTtpZihzPDAuMDAwMSl7dGhpcy54PTE7dGhpcy55PTA7dGhpcy56PTA7fWVsc2V7dGhpcy54PXEueC9zO3RoaXMueT1xLnkvczt0aGlzLno9cS56L3M7fXJldHVybiB0aGlzO30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKG0pey8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9tYXRyaXhUb0FuZ2xlL2luZGV4Lmh0bVxuLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZClcbnZhciBhbmdsZSx4LHkseiwvLyB2YXJpYWJsZXMgZm9yIHJlc3VsdFxuZXBzaWxvbj0wLjAxLC8vIG1hcmdpbiB0byBhbGxvdyBmb3Igcm91bmRpbmcgZXJyb3JzXG5lcHNpbG9uMj0wLjEsLy8gbWFyZ2luIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gMCBhbmQgMTgwIGRlZ3JlZXNcbnRlPW0uZWxlbWVudHMsbTExPXRlWzBdLG0xMj10ZVs0XSxtMTM9dGVbOF0sbTIxPXRlWzFdLG0yMj10ZVs1XSxtMjM9dGVbOV0sbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdO2lmKE1hdGguYWJzKG0xMi1tMjEpPGVwc2lsb24mJk1hdGguYWJzKG0xMy1tMzEpPGVwc2lsb24mJk1hdGguYWJzKG0yMy1tMzIpPGVwc2lsb24pey8vIHNpbmd1bGFyaXR5IGZvdW5kXG4vLyBmaXJzdCBjaGVjayBmb3IgaWRlbnRpdHkgbWF0cml4IHdoaWNoIG11c3QgaGF2ZSArMSBmb3IgYWxsIHRlcm1zXG4vLyBpbiBsZWFkaW5nIGRpYWdvbmFsIGFuZCB6ZXJvIGluIG90aGVyIHRlcm1zXG5pZihNYXRoLmFicyhtMTIrbTIxKTxlcHNpbG9uMiYmTWF0aC5hYnMobTEzK20zMSk8ZXBzaWxvbjImJk1hdGguYWJzKG0yMyttMzIpPGVwc2lsb24yJiZNYXRoLmFicyhtMTErbTIyK20zMy0zKTxlcHNpbG9uMil7Ly8gdGhpcyBzaW5ndWxhcml0eSBpcyBpZGVudGl0eSBtYXRyaXggc28gYW5nbGUgPSAwXG50aGlzLnNldCgxLDAsMCwwKTtyZXR1cm4gdGhpczsvLyB6ZXJvIGFuZ2xlLCBhcmJpdHJhcnkgYXhpc1xufS8vIG90aGVyd2lzZSB0aGlzIHNpbmd1bGFyaXR5IGlzIGFuZ2xlID0gMTgwXG5hbmdsZT1NYXRoLlBJO3ZhciB4eD0obTExKzEpLzI7dmFyIHl5PShtMjIrMSkvMjt2YXIgeno9KG0zMysxKS8yO3ZhciB4eT0obTEyK20yMSkvNDt2YXIgeHo9KG0xMyttMzEpLzQ7dmFyIHl6PShtMjMrbTMyKS80O2lmKHh4Pnl5JiZ4eD56eil7Ly8gbTExIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm1cbmlmKHh4PGVwc2lsb24pe3g9MDt5PTAuNzA3MTA2NzgxO3o9MC43MDcxMDY3ODE7fWVsc2V7eD1NYXRoLnNxcnQoeHgpO3k9eHkveDt6PXh6L3g7fX1lbHNlIGlmKHl5Pnp6KXsvLyBtMjIgaXMgdGhlIGxhcmdlc3QgZGlhZ29uYWwgdGVybVxuaWYoeXk8ZXBzaWxvbil7eD0wLjcwNzEwNjc4MTt5PTA7ej0wLjcwNzEwNjc4MTt9ZWxzZXt5PU1hdGguc3FydCh5eSk7eD14eS95O3o9eXoveTt9fWVsc2V7Ly8gbTMzIGlzIHRoZSBsYXJnZXN0IGRpYWdvbmFsIHRlcm0gc28gYmFzZSByZXN1bHQgb24gdGhpc1xuaWYoeno8ZXBzaWxvbil7eD0wLjcwNzEwNjc4MTt5PTAuNzA3MTA2NzgxO3o9MDt9ZWxzZXt6PU1hdGguc3FydCh6eik7eD14ei96O3k9eXovejt9fXRoaXMuc2V0KHgseSx6LGFuZ2xlKTtyZXR1cm4gdGhpczsvLyByZXR1cm4gMTgwIGRlZyByb3RhdGlvblxufS8vIGFzIHdlIGhhdmUgcmVhY2hlZCBoZXJlIHRoZXJlIGFyZSBubyBzaW5ndWxhcml0aWVzIHNvIHdlIGNhbiBoYW5kbGUgbm9ybWFsbHlcbnZhciBzPU1hdGguc3FydCgobTMyLW0yMykqKG0zMi1tMjMpKyhtMTMtbTMxKSoobTEzLW0zMSkrKG0yMS1tMTIpKihtMjEtbTEyKSk7Ly8gdXNlZCB0byBub3JtYWxpemVcbmlmKE1hdGguYWJzKHMpPDAuMDAxKXM9MTsvLyBwcmV2ZW50IGRpdmlkZSBieSB6ZXJvLCBzaG91bGQgbm90IGhhcHBlbiBpZiBtYXRyaXggaXMgb3J0aG9nb25hbCBhbmQgc2hvdWxkIGJlXG4vLyBjYXVnaHQgYnkgc2luZ3VsYXJpdHkgdGVzdCBhYm92ZSwgYnV0IEkndmUgbGVmdCBpdCBpbiBqdXN0IGluIGNhc2VcbnRoaXMueD0obTMyLW0yMykvczt0aGlzLnk9KG0xMy1tMzEpL3M7dGhpcy56PShtMjEtbTEyKS9zO3RoaXMudz1NYXRoLmFjb3MoKG0xMSttMjIrbTMzLTEpLzIpO3JldHVybiB0aGlzO30sbWluOmZ1bmN0aW9uKHYpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsdi54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LHYueSk7dGhpcy56PU1hdGgubWluKHRoaXMueix2LnopO3RoaXMudz1NYXRoLm1pbih0aGlzLncsdi53KTtyZXR1cm4gdGhpczt9LG1heDpmdW5jdGlvbih2KXt0aGlzLng9TWF0aC5tYXgodGhpcy54LHYueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSx2LnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosdi56KTt0aGlzLnc9TWF0aC5tYXgodGhpcy53LHYudyk7cmV0dXJuIHRoaXM7fSxjbGFtcDpmdW5jdGlvbihtaW4sbWF4KXsvLyBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgbWluIDwgbWF4LCBpZiB0aGlzIGFzc3VtcHRpb24gaXNuJ3QgdHJ1ZSBpdCB3aWxsIG5vdCBvcGVyYXRlIGNvcnJlY3RseVxudGhpcy54PU1hdGgubWF4KG1pbi54LE1hdGgubWluKG1heC54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChtaW4ueSxNYXRoLm1pbihtYXgueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgobWluLnosTWF0aC5taW4obWF4LnosdGhpcy56KSk7dGhpcy53PU1hdGgubWF4KG1pbi53LE1hdGgubWluKG1heC53LHRoaXMudykpO3JldHVybiB0aGlzO30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgbWluLG1heDtyZXR1cm4gZnVuY3Rpb24gY2xhbXBTY2FsYXIobWluVmFsLG1heFZhbCl7aWYobWluPT09dW5kZWZpbmVkKXttaW49bmV3IFRIUkVFLlZlY3RvcjQoKTttYXg9bmV3IFRIUkVFLlZlY3RvcjQoKTt9bWluLnNldChtaW5WYWwsbWluVmFsLG1pblZhbCxtaW5WYWwpO21heC5zZXQobWF4VmFsLG1heFZhbCxtYXhWYWwsbWF4VmFsKTtyZXR1cm4gdGhpcy5jbGFtcChtaW4sbWF4KTt9O30oKSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz1NYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXM7fSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7dGhpcy53PU1hdGguY2VpbCh0aGlzLncpO3JldHVybiB0aGlzO30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTt0aGlzLnc9TWF0aC5yb3VuZCh0aGlzLncpO3JldHVybiB0aGlzO30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9dGhpcy53PDA/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzO30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7dGhpcy56PS10aGlzLno7dGhpcy53PS10aGlzLnc7cmV0dXJuIHRoaXM7fSxkb3Q6ZnVuY3Rpb24odil7cmV0dXJuIHRoaXMueCp2LngrdGhpcy55KnYueSt0aGlzLnoqdi56K3RoaXMudyp2Lnc7fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53O30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53KTt9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KStNYXRoLmFicyh0aGlzLncpO30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpO30sc2V0TGVuZ3RoOmZ1bmN0aW9uKGxlbmd0aCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIobGVuZ3RoL3RoaXMubGVuZ3RoKCkpO30sbGVycDpmdW5jdGlvbih2LGFscGhhKXt0aGlzLngrPSh2LngtdGhpcy54KSphbHBoYTt0aGlzLnkrPSh2LnktdGhpcy55KSphbHBoYTt0aGlzLnorPSh2LnotdGhpcy56KSphbHBoYTt0aGlzLncrPSh2LnctdGhpcy53KSphbHBoYTtyZXR1cm4gdGhpczt9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKHYxLHYyLGFscGhhKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKHYyLHYxKS5tdWx0aXBseVNjYWxhcihhbHBoYSkuYWRkKHYxKTt9LGVxdWFsczpmdW5jdGlvbih2KXtyZXR1cm4gdi54PT09dGhpcy54JiZ2Lnk9PT10aGlzLnkmJnYuej09PXRoaXMueiYmdi53PT09dGhpcy53O30sZnJvbUFycmF5OmZ1bmN0aW9uKGFycmF5LG9mZnNldCl7aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3RoaXMueD1hcnJheVtvZmZzZXRdO3RoaXMueT1hcnJheVtvZmZzZXQrMV07dGhpcy56PWFycmF5W29mZnNldCsyXTt0aGlzLnc9YXJyYXlbb2Zmc2V0KzNdO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDthcnJheVtvZmZzZXRdPXRoaXMueDthcnJheVtvZmZzZXQrMV09dGhpcy55O2FycmF5W29mZnNldCsyXT10aGlzLno7YXJyYXlbb2Zmc2V0KzNdPXRoaXMudztyZXR1cm4gYXJyYXk7fSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGF0dHJpYnV0ZSxpbmRleCxvZmZzZXQpe2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDtpbmRleD1pbmRleCphdHRyaWJ1dGUuaXRlbVNpemUrb2Zmc2V0O3RoaXMueD1hdHRyaWJ1dGUuYXJyYXlbaW5kZXhdO3RoaXMueT1hdHRyaWJ1dGUuYXJyYXlbaW5kZXgrMV07dGhpcy56PWF0dHJpYnV0ZS5hcnJheVtpbmRleCsyXTt0aGlzLnc9YXR0cmlidXRlLmFycmF5W2luZGV4KzNdO3JldHVybiB0aGlzO319Oy8vIEZpbGU6c3JjL21hdGgvRXVsZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKi9USFJFRS5FdWxlcj1mdW5jdGlvbih4LHkseixvcmRlcil7dGhpcy5feD14fHwwO3RoaXMuX3k9eXx8MDt0aGlzLl96PXp8fDA7dGhpcy5fb3JkZXI9b3JkZXJ8fFRIUkVFLkV1bGVyLkRlZmF1bHRPcmRlcjt9O1RIUkVFLkV1bGVyLlJvdGF0aW9uT3JkZXJzPVsnWFlaJywnWVpYJywnWlhZJywnWFpZJywnWVhaJywnWllYJ107VEhSRUUuRXVsZXIuRGVmYXVsdE9yZGVyPSdYWVonO1RIUkVFLkV1bGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRXVsZXIsZ2V0IHgoKXtyZXR1cm4gdGhpcy5feDt9LHNldCB4KHZhbHVlKXt0aGlzLl94PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feTt9LHNldCB5KHZhbHVlKXt0aGlzLl95PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IHooKXtyZXR1cm4gdGhpcy5fejt9LHNldCB6KHZhbHVlKXt0aGlzLl96PXZhbHVlO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO30sZ2V0IG9yZGVyKCl7cmV0dXJuIHRoaXMuX29yZGVyO30sc2V0IG9yZGVyKHZhbHVlKXt0aGlzLl9vcmRlcj12YWx1ZTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTt9LHNldDpmdW5jdGlvbih4LHkseixvcmRlcil7dGhpcy5feD14O3RoaXMuX3k9eTt0aGlzLl96PXo7dGhpcy5fb3JkZXI9b3JkZXJ8fHRoaXMuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fb3JkZXIpO30sY29weTpmdW5jdGlvbihldWxlcil7dGhpcy5feD1ldWxlci5feDt0aGlzLl95PWV1bGVyLl95O3RoaXMuX3o9ZXVsZXIuX3o7dGhpcy5fb3JkZXI9ZXVsZXIuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzO30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKG0sb3JkZXIsdXBkYXRlKXt2YXIgY2xhbXA9VEhSRUUuTWF0aC5jbGFtcDsvLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKVxudmFyIHRlPW0uZWxlbWVudHM7dmFyIG0xMT10ZVswXSxtMTI9dGVbNF0sbTEzPXRlWzhdO3ZhciBtMjE9dGVbMV0sbTIyPXRlWzVdLG0yMz10ZVs5XTt2YXIgbTMxPXRlWzJdLG0zMj10ZVs2XSxtMzM9dGVbMTBdO29yZGVyPW9yZGVyfHx0aGlzLl9vcmRlcjtpZihvcmRlcj09PSdYWVonKXt0aGlzLl95PU1hdGguYXNpbihjbGFtcChtMTMsLTEsMSkpO2lmKE1hdGguYWJzKG0xMyk8MC45OTk5OSl7dGhpcy5feD1NYXRoLmF0YW4yKC1tMjMsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIoLW0xMixtMTEpO31lbHNle3RoaXMuX3g9TWF0aC5hdGFuMihtMzIsbTIyKTt0aGlzLl96PTA7fX1lbHNlIGlmKG9yZGVyPT09J1lYWicpe3RoaXMuX3g9TWF0aC5hc2luKC1jbGFtcChtMjMsLTEsMSkpO2lmKE1hdGguYWJzKG0yMyk8MC45OTk5OSl7dGhpcy5feT1NYXRoLmF0YW4yKG0xMyxtMzMpO3RoaXMuX3o9TWF0aC5hdGFuMihtMjEsbTIyKTt9ZWxzZXt0aGlzLl95PU1hdGguYXRhbjIoLW0zMSxtMTEpO3RoaXMuX3o9MDt9fWVsc2UgaWYob3JkZXI9PT0nWlhZJyl7dGhpcy5feD1NYXRoLmFzaW4oY2xhbXAobTMyLC0xLDEpKTtpZihNYXRoLmFicyhtMzIpPDAuOTk5OTkpe3RoaXMuX3k9TWF0aC5hdGFuMigtbTMxLG0zMyk7dGhpcy5fej1NYXRoLmF0YW4yKC1tMTIsbTIyKTt9ZWxzZXt0aGlzLl95PTA7dGhpcy5fej1NYXRoLmF0YW4yKG0yMSxtMTEpO319ZWxzZSBpZihvcmRlcj09PSdaWVgnKXt0aGlzLl95PU1hdGguYXNpbigtY2xhbXAobTMxLC0xLDEpKTtpZihNYXRoLmFicyhtMzEpPDAuOTk5OTkpe3RoaXMuX3g9TWF0aC5hdGFuMihtMzIsbTMzKTt0aGlzLl96PU1hdGguYXRhbjIobTIxLG0xMSk7fWVsc2V7dGhpcy5feD0wO3RoaXMuX3o9TWF0aC5hdGFuMigtbTEyLG0yMik7fX1lbHNlIGlmKG9yZGVyPT09J1laWCcpe3RoaXMuX3o9TWF0aC5hc2luKGNsYW1wKG0yMSwtMSwxKSk7aWYoTWF0aC5hYnMobTIxKTwwLjk5OTk5KXt0aGlzLl94PU1hdGguYXRhbjIoLW0yMyxtMjIpO3RoaXMuX3k9TWF0aC5hdGFuMigtbTMxLG0xMSk7fWVsc2V7dGhpcy5feD0wO3RoaXMuX3k9TWF0aC5hdGFuMihtMTMsbTMzKTt9fWVsc2UgaWYob3JkZXI9PT0nWFpZJyl7dGhpcy5fej1NYXRoLmFzaW4oLWNsYW1wKG0xMiwtMSwxKSk7aWYoTWF0aC5hYnMobTEyKTwwLjk5OTk5KXt0aGlzLl94PU1hdGguYXRhbjIobTMyLG0yMik7dGhpcy5feT1NYXRoLmF0YW4yKG0xMyxtMTEpO31lbHNle3RoaXMuX3g9TWF0aC5hdGFuMigtbTIzLG0zMyk7dGhpcy5feT0wO319ZWxzZXtjb25zb2xlLndhcm4oJ1RIUkVFLkV1bGVyOiAuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgZ2l2ZW4gdW5zdXBwb3J0ZWQgb3JkZXI6ICcrb3JkZXIpO310aGlzLl9vcmRlcj1vcmRlcjtpZih1cGRhdGUhPT1mYWxzZSl0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpczt9LHNldEZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIG1hdHJpeDtyZXR1cm4gZnVuY3Rpb24ocSxvcmRlcix1cGRhdGUpe2lmKG1hdHJpeD09PXVuZGVmaW5lZCltYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQoKTttYXRyaXgubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSk7cmV0dXJuIHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KG1hdHJpeCxvcmRlcix1cGRhdGUpO307fSgpLHNldEZyb21WZWN0b3IzOmZ1bmN0aW9uKHYsb3JkZXIpe3JldHVybiB0aGlzLnNldCh2Lngsdi55LHYueixvcmRlcnx8dGhpcy5fb3JkZXIpO30scmVvcmRlcjpmdW5jdGlvbigpey8vIFdBUk5JTkc6IHRoaXMgZGlzY2FyZHMgcmV2b2x1dGlvbiBpbmZvcm1hdGlvbiAtYmhvdXN0b25cbnZhciBxPW5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uKG5ld09yZGVyKXtxLnNldEZyb21FdWxlcih0aGlzKTtyZXR1cm4gdGhpcy5zZXRGcm9tUXVhdGVybmlvbihxLG5ld09yZGVyKTt9O30oKSxlcXVhbHM6ZnVuY3Rpb24oZXVsZXIpe3JldHVybiBldWxlci5feD09PXRoaXMuX3gmJmV1bGVyLl95PT09dGhpcy5feSYmZXVsZXIuX3o9PT10aGlzLl96JiZldWxlci5fb3JkZXI9PT10aGlzLl9vcmRlcjt9LGZyb21BcnJheTpmdW5jdGlvbihhcnJheSl7dGhpcy5feD1hcnJheVswXTt0aGlzLl95PWFycmF5WzFdO3RoaXMuX3o9YXJyYXlbMl07aWYoYXJyYXlbM10hPT11bmRlZmluZWQpdGhpcy5fb3JkZXI9YXJyYXlbM107dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uKGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT11bmRlZmluZWQpYXJyYXk9W107aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO2FycmF5W29mZnNldF09dGhpcy5feDthcnJheVtvZmZzZXQrMV09dGhpcy5feTthcnJheVtvZmZzZXQrMl09dGhpcy5fejthcnJheVtvZmZzZXQrM109dGhpcy5fb3JkZXI7cmV0dXJuIGFycmF5O30sdG9WZWN0b3IzOmZ1bmN0aW9uKG9wdGlvbmFsUmVzdWx0KXtpZihvcHRpb25hbFJlc3VsdCl7cmV0dXJuIG9wdGlvbmFsUmVzdWx0LnNldCh0aGlzLl94LHRoaXMuX3ksdGhpcy5feik7fWVsc2V7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTt9fSxvbkNoYW5nZTpmdW5jdGlvbihjYWxsYmFjayl7dGhpcy5vbkNoYW5nZUNhbGxiYWNrPWNhbGxiYWNrO3JldHVybiB0aGlzO30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319Oy8vIEZpbGU6c3JjL21hdGgvTGluZTMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvXHJcbiAqL1RIUkVFLkxpbmUzPWZ1bmN0aW9uKHN0YXJ0LGVuZCl7dGhpcy5zdGFydD1zdGFydCE9PXVuZGVmaW5lZD9zdGFydDpuZXcgVEhSRUUuVmVjdG9yMygpO3RoaXMuZW5kPWVuZCE9PXVuZGVmaW5lZD9lbmQ6bmV3IFRIUkVFLlZlY3RvcjMoKTt9O1RIUkVFLkxpbmUzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTGluZTMsc2V0OmZ1bmN0aW9uKHN0YXJ0LGVuZCl7dGhpcy5zdGFydC5jb3B5KHN0YXJ0KTt0aGlzLmVuZC5jb3B5KGVuZCk7cmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKGxpbmUpe3RoaXMuc3RhcnQuY29weShsaW5lLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGxpbmUuZW5kKTtyZXR1cm4gdGhpczt9LGNlbnRlcjpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoMC41KTt9LGRlbHRhOmZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiByZXN1bHQuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KTt9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCk7fSxkaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpO30sYXQ6ZnVuY3Rpb24odCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gdGhpcy5kZWx0YShyZXN1bHQpLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnN0YXJ0KTt9LGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgc3RhcnRQPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHN0YXJ0RW5kPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKHBvaW50LGNsYW1wVG9MaW5lKXtzdGFydFAuc3ViVmVjdG9ycyhwb2ludCx0aGlzLnN0YXJ0KTtzdGFydEVuZC5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO3ZhciBzdGFydEVuZDI9c3RhcnRFbmQuZG90KHN0YXJ0RW5kKTt2YXIgc3RhcnRFbmRfc3RhcnRQPXN0YXJ0RW5kLmRvdChzdGFydFApO3ZhciB0PXN0YXJ0RW5kX3N0YXJ0UC9zdGFydEVuZDI7aWYoY2xhbXBUb0xpbmUpe3Q9VEhSRUUuTWF0aC5jbGFtcCh0LDAsMSk7fXJldHVybiB0O307fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24ocG9pbnQsY2xhbXBUb0xpbmUsb3B0aW9uYWxUYXJnZXQpe3ZhciB0PXRoaXMuY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcihwb2ludCxjbGFtcFRvTGluZSk7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gdGhpcy5kZWx0YShyZXN1bHQpLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnN0YXJ0KTt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihtYXRyaXgpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KG1hdHJpeCk7dGhpcy5lbmQuYXBwbHlNYXRyaXg0KG1hdHJpeCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24obGluZSl7cmV0dXJuIGxpbmUuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZsaW5lLmVuZC5lcXVhbHModGhpcy5lbmQpO319Oy8vIEZpbGU6c3JjL21hdGgvQm94Mi5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICovVEhSRUUuQm94Mj1mdW5jdGlvbihtaW4sbWF4KXt0aGlzLm1pbj1taW4hPT11bmRlZmluZWQ/bWluOm5ldyBUSFJFRS5WZWN0b3IyKCtJbmZpbml0eSwrSW5maW5pdHkpO3RoaXMubWF4PW1heCE9PXVuZGVmaW5lZD9tYXg6bmV3IFRIUkVFLlZlY3RvcjIoLUluZmluaXR5LC1JbmZpbml0eSk7fTtUSFJFRS5Cb3gyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQm94MixzZXQ6ZnVuY3Rpb24obWluLG1heCl7dGhpcy5taW4uY29weShtaW4pO3RoaXMubWF4LmNvcHkobWF4KTtyZXR1cm4gdGhpczt9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24ocG9pbnRzKXt0aGlzLm1ha2VFbXB0eSgpO2Zvcih2YXIgaT0wLGlsPXBvaW50cy5sZW5ndGg7aTxpbDtpKyspe3RoaXMuZXhwYW5kQnlQb2ludChwb2ludHNbaV0pO31yZXR1cm4gdGhpczt9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IyKCk7cmV0dXJuIGZ1bmN0aW9uKGNlbnRlcixzaXplKXt2YXIgaGFsZlNpemU9djEuY29weShzaXplKS5tdWx0aXBseVNjYWxhcigwLjUpO3RoaXMubWluLmNvcHkoY2VudGVyKS5zdWIoaGFsZlNpemUpO3RoaXMubWF4LmNvcHkoY2VudGVyKS5hZGQoaGFsZlNpemUpO3JldHVybiB0aGlzO307fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24oYm94KXt0aGlzLm1pbi5jb3B5KGJveC5taW4pO3RoaXMubWF4LmNvcHkoYm94Lm1heCk7cmV0dXJuIHRoaXM7fSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9K0luZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT0tSW5maW5pdHk7cmV0dXJuIHRoaXM7fSxpc0VtcHR5OmZ1bmN0aW9uKCl7Ly8gdGhpcyBpcyBhIG1vcmUgcm9idXN0IGNoZWNrIGZvciBlbXB0eSB0aGFuICggdm9sdW1lIDw9IDAgKSBiZWNhdXNlIHZvbHVtZSBjYW4gZ2V0IHBvc2l0aXZlIHdpdGggdHdvIG5lZ2F0aXZlIGF4ZXNcbnJldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueTt9LGNlbnRlcjpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjIoKTtyZXR1cm4gcmVzdWx0LmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKDAuNSk7fSxzaXplOmZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMigpO3JldHVybiByZXN1bHQuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbik7fSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKHBvaW50KXt0aGlzLm1pbi5taW4ocG9pbnQpO3RoaXMubWF4Lm1heChwb2ludCk7cmV0dXJuIHRoaXM7fSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbih2ZWN0b3Ipe3RoaXMubWluLnN1Yih2ZWN0b3IpO3RoaXMubWF4LmFkZCh2ZWN0b3IpO3JldHVybiB0aGlzO30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oc2NhbGFyKXt0aGlzLm1pbi5hZGRTY2FsYXIoLXNjYWxhcik7dGhpcy5tYXguYWRkU2NhbGFyKHNjYWxhcik7cmV0dXJuIHRoaXM7fSxjb250YWluc1BvaW50OmZ1bmN0aW9uKHBvaW50KXtpZihwb2ludC54PHRoaXMubWluLnh8fHBvaW50Lng+dGhpcy5tYXgueHx8cG9pbnQueTx0aGlzLm1pbi55fHxwb2ludC55PnRoaXMubWF4Lnkpe3JldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fSxjb250YWluc0JveDpmdW5jdGlvbihib3gpe2lmKHRoaXMubWluLng8PWJveC5taW4ueCYmYm94Lm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1ib3gubWluLnkmJmJveC5tYXgueTw9dGhpcy5tYXgueSl7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihwb2ludCxvcHRpb25hbFRhcmdldCl7Ly8gVGhpcyBjYW4gcG90ZW50aWFsbHkgaGF2ZSBhIGRpdmlkZSBieSB6ZXJvIGlmIHRoZSBib3hcbi8vIGhhcyBhIHNpemUgZGltZW5zaW9uIG9mIDAuXG52YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMigpO3JldHVybiByZXN1bHQuc2V0KChwb2ludC54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChwb2ludC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpKTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYm94KXsvLyB1c2luZyA2IHNwbGl0dGluZyBwbGFuZXMgdG8gcnVsZSBvdXQgaW50ZXJzZWN0aW9ucy5cbmlmKGJveC5tYXgueDx0aGlzLm1pbi54fHxib3gubWluLng+dGhpcy5tYXgueHx8Ym94Lm1heC55PHRoaXMubWluLnl8fGJveC5taW4ueT50aGlzLm1heC55KXtyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO30sY2xhbXBQb2ludDpmdW5jdGlvbihwb2ludCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjIoKTtyZXR1cm4gcmVzdWx0LmNvcHkocG9pbnQpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KTt9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMigpO3JldHVybiBmdW5jdGlvbihwb2ludCl7dmFyIGNsYW1wZWRQb2ludD12MS5jb3B5KHBvaW50KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCk7cmV0dXJuIGNsYW1wZWRQb2ludC5zdWIocG9pbnQpLmxlbmd0aCgpO307fSgpLGludGVyc2VjdDpmdW5jdGlvbihib3gpe3RoaXMubWluLm1heChib3gubWluKTt0aGlzLm1heC5taW4oYm94Lm1heCk7cmV0dXJuIHRoaXM7fSx1bmlvbjpmdW5jdGlvbihib3gpe3RoaXMubWluLm1pbihib3gubWluKTt0aGlzLm1heC5tYXgoYm94Lm1heCk7cmV0dXJuIHRoaXM7fSx0cmFuc2xhdGU6ZnVuY3Rpb24ob2Zmc2V0KXt0aGlzLm1pbi5hZGQob2Zmc2V0KTt0aGlzLm1heC5hZGQob2Zmc2V0KTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbihib3gpe3JldHVybiBib3gubWluLmVxdWFscyh0aGlzLm1pbikmJmJveC5tYXguZXF1YWxzKHRoaXMubWF4KTt9fTsvLyBGaWxlOnNyYy9tYXRoL0JveDMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4gKi9USFJFRS5Cb3gzPWZ1bmN0aW9uKG1pbixtYXgpe3RoaXMubWluPW1pbiE9PXVuZGVmaW5lZD9taW46bmV3IFRIUkVFLlZlY3RvcjMoK0luZmluaXR5LCtJbmZpbml0eSwrSW5maW5pdHkpO3RoaXMubWF4PW1heCE9PXVuZGVmaW5lZD9tYXg6bmV3IFRIUkVFLlZlY3RvcjMoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpO307VEhSRUUuQm94My5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJveDMsc2V0OmZ1bmN0aW9uKG1pbixtYXgpe3RoaXMubWluLmNvcHkobWluKTt0aGlzLm1heC5jb3B5KG1heCk7cmV0dXJuIHRoaXM7fSxzZXRGcm9tQXJyYXk6ZnVuY3Rpb24oYXJyYXkpe3ZhciBtaW5YPStJbmZpbml0eTt2YXIgbWluWT0rSW5maW5pdHk7dmFyIG1pblo9K0luZmluaXR5O3ZhciBtYXhYPS1JbmZpbml0eTt2YXIgbWF4WT0tSW5maW5pdHk7dmFyIG1heFo9LUluZmluaXR5O2Zvcih2YXIgaT0wLGw9YXJyYXkubGVuZ3RoO2k8bDtpKz0zKXt2YXIgeD1hcnJheVtpXTt2YXIgeT1hcnJheVtpKzFdO3ZhciB6PWFycmF5W2krMl07aWYoeDxtaW5YKW1pblg9eDtpZih5PG1pblkpbWluWT15O2lmKHo8bWluWiltaW5aPXo7aWYoeD5tYXhYKW1heFg9eDtpZih5Pm1heFkpbWF4WT15O2lmKHo+bWF4WiltYXhaPXo7fXRoaXMubWluLnNldChtaW5YLG1pblksbWluWik7dGhpcy5tYXguc2V0KG1heFgsbWF4WSxtYXhaKTt9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24ocG9pbnRzKXt0aGlzLm1ha2VFbXB0eSgpO2Zvcih2YXIgaT0wLGlsPXBvaW50cy5sZW5ndGg7aTxpbDtpKyspe3RoaXMuZXhwYW5kQnlQb2ludChwb2ludHNbaV0pO31yZXR1cm4gdGhpczt9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKGNlbnRlcixzaXplKXt2YXIgaGFsZlNpemU9djEuY29weShzaXplKS5tdWx0aXBseVNjYWxhcigwLjUpO3RoaXMubWluLmNvcHkoY2VudGVyKS5zdWIoaGFsZlNpemUpO3RoaXMubWF4LmNvcHkoY2VudGVyKS5hZGQoaGFsZlNpemUpO3JldHVybiB0aGlzO307fSgpLHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oKXsvLyBDb21wdXRlcyB0aGUgd29ybGQtYXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveCBvZiBhbiBvYmplY3QgKGluY2x1ZGluZyBpdHMgY2hpbGRyZW4pLFxuLy8gYWNjb3VudGluZyBmb3IgYm90aCB0aGUgb2JqZWN0J3MsIGFuZCBjaGlsZHJlbidzLCB3b3JsZCB0cmFuc2Zvcm1zXG52YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXt2YXIgc2NvcGU9dGhpcztvYmplY3QudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7dGhpcy5tYWtlRW1wdHkoKTtvYmplY3QudHJhdmVyc2UoZnVuY3Rpb24obm9kZSl7dmFyIGdlb21ldHJ5PW5vZGUuZ2VvbWV0cnk7aWYoZ2VvbWV0cnkhPT11bmRlZmluZWQpe2lmKGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpe3ZhciB2ZXJ0aWNlcz1nZW9tZXRyeS52ZXJ0aWNlcztmb3IodmFyIGk9MCxpbD12ZXJ0aWNlcy5sZW5ndGg7aTxpbDtpKyspe3YxLmNvcHkodmVydGljZXNbaV0pO3YxLmFwcGx5TWF0cml4NChub2RlLm1hdHJpeFdvcmxkKTtzY29wZS5leHBhbmRCeVBvaW50KHYxKTt9fWVsc2UgaWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSYmZ2VvbWV0cnkuYXR0cmlidXRlc1sncG9zaXRpb24nXSE9PXVuZGVmaW5lZCl7dmFyIHBvc2l0aW9ucz1nZW9tZXRyeS5hdHRyaWJ1dGVzWydwb3NpdGlvbiddLmFycmF5O2Zvcih2YXIgaT0wLGlsPXBvc2l0aW9ucy5sZW5ndGg7aTxpbDtpKz0zKXt2MS5mcm9tQXJyYXkocG9zaXRpb25zLGkpO3YxLmFwcGx5TWF0cml4NChub2RlLm1hdHJpeFdvcmxkKTtzY29wZS5leHBhbmRCeVBvaW50KHYxKTt9fX19KTtyZXR1cm4gdGhpczt9O30oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKGJveCl7dGhpcy5taW4uY29weShib3gubWluKTt0aGlzLm1heC5jb3B5KGJveC5tYXgpO3JldHVybiB0aGlzO30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9K0luZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT10aGlzLm1heC56PS1JbmZpbml0eTtyZXR1cm4gdGhpczt9LGlzRW1wdHk6ZnVuY3Rpb24oKXsvLyB0aGlzIGlzIGEgbW9yZSByb2J1c3QgY2hlY2sgZm9yIGVtcHR5IHRoYW4gKCB2b2x1bWUgPD0gMCApIGJlY2F1c2Ugdm9sdW1lIGNhbiBnZXQgcG9zaXRpdmUgd2l0aCB0d28gbmVnYXRpdmUgYXhlc1xucmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fHx0aGlzLm1heC56PHRoaXMubWluLno7fSxjZW50ZXI6ZnVuY3Rpb24ob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhcigwLjUpO30sc2l6ZTpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pO30sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihwb2ludCl7dGhpcy5taW4ubWluKHBvaW50KTt0aGlzLm1heC5tYXgocG9pbnQpO3JldHVybiB0aGlzO30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24odmVjdG9yKXt0aGlzLm1pbi5zdWIodmVjdG9yKTt0aGlzLm1heC5hZGQodmVjdG9yKTtyZXR1cm4gdGhpczt9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKHNjYWxhcil7dGhpcy5taW4uYWRkU2NhbGFyKC1zY2FsYXIpO3RoaXMubWF4LmFkZFNjYWxhcihzY2FsYXIpO3JldHVybiB0aGlzO30sY29udGFpbnNQb2ludDpmdW5jdGlvbihwb2ludCl7aWYocG9pbnQueDx0aGlzLm1pbi54fHxwb2ludC54PnRoaXMubWF4Lnh8fHBvaW50Lnk8dGhpcy5taW4ueXx8cG9pbnQueT50aGlzLm1heC55fHxwb2ludC56PHRoaXMubWluLnp8fHBvaW50Lno+dGhpcy5tYXgueil7cmV0dXJuIGZhbHNlO31yZXR1cm4gdHJ1ZTt9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGJveCl7aWYodGhpcy5taW4ueDw9Ym94Lm1pbi54JiZib3gubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWJveC5taW4ueSYmYm94Lm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD1ib3gubWluLnomJmJveC5tYXguejw9dGhpcy5tYXgueil7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihwb2ludCxvcHRpb25hbFRhcmdldCl7Ly8gVGhpcyBjYW4gcG90ZW50aWFsbHkgaGF2ZSBhIGRpdmlkZSBieSB6ZXJvIGlmIHRoZSBib3hcbi8vIGhhcyBhIHNpemUgZGltZW5zaW9uIG9mIDAuXG52YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiByZXN1bHQuc2V0KChwb2ludC54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChwb2ludC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLChwb2ludC56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYm94KXsvLyB1c2luZyA2IHNwbGl0dGluZyBwbGFuZXMgdG8gcnVsZSBvdXQgaW50ZXJzZWN0aW9ucy5cbmlmKGJveC5tYXgueDx0aGlzLm1pbi54fHxib3gubWluLng+dGhpcy5tYXgueHx8Ym94Lm1heC55PHRoaXMubWluLnl8fGJveC5taW4ueT50aGlzLm1heC55fHxib3gubWF4Lno8dGhpcy5taW4uenx8Ym94Lm1pbi56PnRoaXMubWF4Lnope3JldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGNsb3Nlc3RQb2ludDtyZXR1cm4gZnVuY3Rpb24gaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpe2lmKGNsb3Nlc3RQb2ludD09PXVuZGVmaW5lZCljbG9zZXN0UG9pbnQ9bmV3IFRIUkVFLlZlY3RvcjMoKTsvLyBGaW5kIHRoZSBwb2ludCBvbiB0aGUgQUFCQiBjbG9zZXN0IHRvIHRoZSBzcGhlcmUgY2VudGVyLlxudGhpcy5jbGFtcFBvaW50KHNwaGVyZS5jZW50ZXIsY2xvc2VzdFBvaW50KTsvLyBJZiB0aGF0IHBvaW50IGlzIGluc2lkZSB0aGUgc3BoZXJlLCB0aGUgQUFCQiBhbmQgc3BoZXJlIGludGVyc2VjdC5cbnJldHVybiBjbG9zZXN0UG9pbnQuZGlzdGFuY2VUb1NxdWFyZWQoc3BoZXJlLmNlbnRlcik8PXNwaGVyZS5yYWRpdXMqc3BoZXJlLnJhZGl1czt9O30oKSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24ocGxhbmUpey8vIFdlIGNvbXB1dGUgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gZG90IHByb2R1Y3QgdmFsdWVzLiBJZiB0aG9zZSB2YWx1ZXNcbi8vIGFyZSBvbiB0aGUgc2FtZSBzaWRlIChiYWNrIG9yIGZyb250KSBvZiB0aGUgcGxhbmUsIHRoZW4gdGhlcmUgaXMgbm8gaW50ZXJzZWN0aW9uLlxudmFyIG1pbixtYXg7aWYocGxhbmUubm9ybWFsLng+MCl7bWluPXBsYW5lLm5vcm1hbC54KnRoaXMubWluLng7bWF4PXBsYW5lLm5vcm1hbC54KnRoaXMubWF4Lng7fWVsc2V7bWluPXBsYW5lLm5vcm1hbC54KnRoaXMubWF4Lng7bWF4PXBsYW5lLm5vcm1hbC54KnRoaXMubWluLng7fWlmKHBsYW5lLm5vcm1hbC55PjApe21pbis9cGxhbmUubm9ybWFsLnkqdGhpcy5taW4ueTttYXgrPXBsYW5lLm5vcm1hbC55KnRoaXMubWF4Lnk7fWVsc2V7bWluKz1wbGFuZS5ub3JtYWwueSp0aGlzLm1heC55O21heCs9cGxhbmUubm9ybWFsLnkqdGhpcy5taW4ueTt9aWYocGxhbmUubm9ybWFsLno+MCl7bWluKz1wbGFuZS5ub3JtYWwueip0aGlzLm1pbi56O21heCs9cGxhbmUubm9ybWFsLnoqdGhpcy5tYXguejt9ZWxzZXttaW4rPXBsYW5lLm5vcm1hbC56KnRoaXMubWF4Lno7bWF4Kz1wbGFuZS5ub3JtYWwueip0aGlzLm1pbi56O31yZXR1cm4gbWluPD1wbGFuZS5jb25zdGFudCYmbWF4Pj1wbGFuZS5jb25zdGFudDt9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24ocG9pbnQsb3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIHJlc3VsdC5jb3B5KHBvaW50KS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCk7fSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24ocG9pbnQpe3ZhciBjbGFtcGVkUG9pbnQ9djEuY29weShwb2ludCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpO3JldHVybiBjbGFtcGVkUG9pbnQuc3ViKHBvaW50KS5sZW5ndGgoKTt9O30oKSxnZXRCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlNwaGVyZSgpO3Jlc3VsdC5jZW50ZXI9dGhpcy5jZW50ZXIoKTtyZXN1bHQucmFkaXVzPXRoaXMuc2l6ZSh2MSkubGVuZ3RoKCkqMC41O3JldHVybiByZXN1bHQ7fTt9KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGJveCl7dGhpcy5taW4ubWF4KGJveC5taW4pO3RoaXMubWF4Lm1pbihib3gubWF4KTsvLyBlbnN1cmUgdGhhdCBpZiB0aGVyZSBpcyBubyBvdmVybGFwLCB0aGUgcmVzdWx0IGlzIGZ1bGx5IGVtcHR5LCBub3Qgc2xpZ2h0bHkgZW1wdHkgd2l0aCBub24taW5mLytpbmYgdmFsdWVzIHRoYXQgd2lsbCBjYXVzZSBzdWJzZXF1ZW5jZSBpbnRlcnNlY3RzIHRvIGVycm9uZW91c2x5IHJldHVybiB2YWxpZCB2YWx1ZXMuXG5pZih0aGlzLmlzRW1wdHkoKSl0aGlzLm1ha2VFbXB0eSgpO3JldHVybiB0aGlzO30sdW5pb246ZnVuY3Rpb24oYm94KXt0aGlzLm1pbi5taW4oYm94Lm1pbik7dGhpcy5tYXgubWF4KGJveC5tYXgpO3JldHVybiB0aGlzO30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIHBvaW50cz1bbmV3IFRIUkVFLlZlY3RvcjMoKSxuZXcgVEhSRUUuVmVjdG9yMygpLG5ldyBUSFJFRS5WZWN0b3IzKCksbmV3IFRIUkVFLlZlY3RvcjMoKSxuZXcgVEhSRUUuVmVjdG9yMygpLG5ldyBUSFJFRS5WZWN0b3IzKCksbmV3IFRIUkVFLlZlY3RvcjMoKSxuZXcgVEhSRUUuVmVjdG9yMygpXTtyZXR1cm4gZnVuY3Rpb24obWF0cml4KXsvLyB0cmFuc2Zvcm0gb2YgZW1wdHkgYm94IGlzIGFuIGVtcHR5IGJveC5cbmlmKHRoaXMuaXNFbXB0eSgpKXJldHVybiB0aGlzOy8vIE5PVEU6IEkgYW0gdXNpbmcgYSBiaW5hcnkgcGF0dGVybiB0byBzcGVjaWZ5IGFsbCAyXjMgY29tYmluYXRpb25zIGJlbG93XG5wb2ludHNbMF0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAwMDBcbnBvaW50c1sxXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDAwMVxucG9pbnRzWzJdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Ly8gMDEwXG5wb2ludHNbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAwMTFcbnBvaW50c1s0XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDEwMFxucG9pbnRzWzVdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KG1hdHJpeCk7Ly8gMTAxXG5wb2ludHNbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQobWF0cml4KTsvLyAxMTBcbnBvaW50c1s3XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIDExMVxudGhpcy5zZXRGcm9tUG9pbnRzKHBvaW50cyk7cmV0dXJuIHRoaXM7fTt9KCksdHJhbnNsYXRlOmZ1bmN0aW9uKG9mZnNldCl7dGhpcy5taW4uYWRkKG9mZnNldCk7dGhpcy5tYXguYWRkKG9mZnNldCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24oYm94KXtyZXR1cm4gYm94Lm1pbi5lcXVhbHModGhpcy5taW4pJiZib3gubWF4LmVxdWFscyh0aGlzLm1heCk7fX07Ly8gRmlsZTpzcmMvbWF0aC9NYXRyaXgzLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5NYXRyaXgzPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1uZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDEsMCwwLDAsMV0pO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4MzogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC4nKTt9fTtUSFJFRS5NYXRyaXgzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0cml4MyxzZXQ6ZnVuY3Rpb24objExLG4xMixuMTMsbjIxLG4yMixuMjMsbjMxLG4zMixuMzMpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3RlWzBdPW4xMTt0ZVsxXT1uMjE7dGVbMl09bjMxO3RlWzNdPW4xMjt0ZVs0XT1uMjI7dGVbNV09bjMyO3RlWzZdPW4xMzt0ZVs3XT1uMjM7dGVbOF09bjMzO3JldHVybiB0aGlzO30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDEsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKTt9LGNvcHk6ZnVuY3Rpb24obSl7dmFyIG1lPW0uZWxlbWVudHM7dGhpcy5zZXQobWVbMF0sbWVbM10sbWVbNl0sbWVbMV0sbWVbNF0sbWVbN10sbWVbMl0sbWVbNV0sbWVbOF0pO3JldHVybiB0aGlzO30sc2V0RnJvbU1hdHJpeDQ6ZnVuY3Rpb24obSl7dmFyIG1lPW0uZWxlbWVudHM7dGhpcy5zZXQobWVbMF0sbWVbNF0sbWVbOF0sbWVbMV0sbWVbNV0sbWVbOV0sbWVbMl0sbWVbNl0sbWVbMTBdKTtyZXR1cm4gdGhpczt9LGFwcGx5VG9WZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXt2YXIgdjE7cmV0dXJuIGZ1bmN0aW9uKGFycmF5LG9mZnNldCxsZW5ndGgpe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO2lmKGxlbmd0aD09PXVuZGVmaW5lZClsZW5ndGg9YXJyYXkubGVuZ3RoO2Zvcih2YXIgaT0wLGo9b2Zmc2V0O2k8bGVuZ3RoO2krPTMsais9Myl7djEuZnJvbUFycmF5KGFycmF5LGopO3YxLmFwcGx5TWF0cml4Myh0aGlzKTt2MS50b0FycmF5KGFycmF5LGopO31yZXR1cm4gYXJyYXk7fTt9KCksYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbigpe3ZhciB2MTtyZXR1cm4gZnVuY3Rpb24gYXBwbHlUb0J1ZmZlcihidWZmZXIsb2Zmc2V0LGxlbmd0aCl7aWYodjE9PT11bmRlZmluZWQpdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7aWYobGVuZ3RoPT09dW5kZWZpbmVkKWxlbmd0aD1idWZmZXIubGVuZ3RoL2J1ZmZlci5pdGVtU2l6ZTtmb3IodmFyIGk9MCxqPW9mZnNldDtpPGxlbmd0aDtpKyssaisrKXt2MS54PWJ1ZmZlci5nZXRYKGopO3YxLnk9YnVmZmVyLmdldFkoaik7djEuej1idWZmZXIuZ2V0WihqKTt2MS5hcHBseU1hdHJpeDModGhpcyk7YnVmZmVyLnNldFhZWih2MS54LHYxLnksdjEueik7fXJldHVybiBidWZmZXI7fTt9KCksbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24ocyl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXM7dGVbM10qPXM7dGVbNl0qPXM7dGVbMV0qPXM7dGVbNF0qPXM7dGVbN10qPXM7dGVbMl0qPXM7dGVbNV0qPXM7dGVbOF0qPXM7cmV0dXJuIHRoaXM7fSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhPXRlWzBdLGI9dGVbMV0sYz10ZVsyXSxkPXRlWzNdLGU9dGVbNF0sZj10ZVs1XSxnPXRlWzZdLGg9dGVbN10saT10ZVs4XTtyZXR1cm4gYSplKmktYSpmKmgtYipkKmkrYipmKmcrYypkKmgtYyplKmc7fSxnZXRJbnZlcnNlOmZ1bmN0aW9uKG1hdHJpeCx0aHJvd09uRGVnZW5lcmF0ZSl7aWYobWF0cml4IGluc3RhbmNlb2YgVEhSRUUuTWF0cml4NCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDMuZ2V0SW52ZXJzZSBubyBsb25nZXIgdGFrZXMgYSBNYXRyaXg0IGFyZ3VtZW50LlwiKTt9dmFyIG1lPW1hdHJpeC5lbGVtZW50cyx0ZT10aGlzLmVsZW1lbnRzLG4xMT1tZVswXSxuMjE9bWVbMV0sbjMxPW1lWzJdLG4xMj1tZVszXSxuMjI9bWVbNF0sbjMyPW1lWzVdLG4xMz1tZVs2XSxuMjM9bWVbN10sbjMzPW1lWzhdLHQxMT1uMzMqbjIyLW4zMipuMjMsdDEyPW4zMipuMTMtbjMzKm4xMix0MTM9bjIzKm4xMi1uMjIqbjEzLGRldD1uMTEqdDExK24yMSp0MTIrbjMxKnQxMztpZihkZXQ9PT0wKXt2YXIgbXNnPVwiVEhSRUUuTWF0cml4My5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIjtpZih0aHJvd09uRGVnZW5lcmF0ZXx8ZmFsc2Upe3Rocm93IG5ldyBFcnJvcihtc2cpO31lbHNle2NvbnNvbGUud2Fybihtc2cpO31yZXR1cm4gdGhpcy5pZGVudGl0eSgpO312YXIgZGV0SW52PTEvZGV0O3RlWzBdPXQxMSpkZXRJbnY7dGVbMV09KG4zMSpuMjMtbjMzKm4yMSkqZGV0SW52O3RlWzJdPShuMzIqbjIxLW4zMSpuMjIpKmRldEludjt0ZVszXT10MTIqZGV0SW52O3RlWzRdPShuMzMqbjExLW4zMSpuMTMpKmRldEludjt0ZVs1XT0objMxKm4xMi1uMzIqbjExKSpkZXRJbnY7dGVbNl09dDEzKmRldEludjt0ZVs3XT0objIxKm4xMy1uMjMqbjExKSpkZXRJbnY7dGVbOF09KG4yMipuMTEtbjIxKm4xMikqZGV0SW52O3JldHVybiB0aGlzO30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIHRtcCxtPXRoaXMuZWxlbWVudHM7dG1wPW1bMV07bVsxXT1tWzNdO21bM109dG1wO3RtcD1tWzJdO21bMl09bVs2XTttWzZdPXRtcDt0bXA9bVs1XTttWzVdPW1bN107bVs3XT10bXA7cmV0dXJuIHRoaXM7fSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCBpcyBkZXByZWNhdGVkIFwiK1wiLSBqdXN0IHVzZSAudG9BcnJheSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50b0FycmF5KGFycmF5LG9mZnNldCk7fSxnZXROb3JtYWxNYXRyaXg6ZnVuY3Rpb24obWF0cml4NCl7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeDQobWF0cml4NCkuZ2V0SW52ZXJzZSh0aGlzKS50cmFuc3Bvc2UoKTt9LHRyYW5zcG9zZUludG9BcnJheTpmdW5jdGlvbihyKXt2YXIgbT10aGlzLmVsZW1lbnRzO3JbMF09bVswXTtyWzFdPW1bM107clsyXT1tWzZdO3JbM109bVsxXTtyWzRdPW1bNF07cls1XT1tWzddO3JbNl09bVsyXTtyWzddPW1bNV07cls4XT1tWzhdO3JldHVybiB0aGlzO30sZnJvbUFycmF5OmZ1bmN0aW9uKGFycmF5KXt0aGlzLmVsZW1lbnRzLnNldChhcnJheSk7cmV0dXJuIHRoaXM7fSx0b0FycmF5OmZ1bmN0aW9uKGFycmF5LG9mZnNldCl7aWYoYXJyYXk9PT11bmRlZmluZWQpYXJyYXk9W107aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3ZhciB0ZT10aGlzLmVsZW1lbnRzO2FycmF5W29mZnNldF09dGVbMF07YXJyYXlbb2Zmc2V0KzFdPXRlWzFdO2FycmF5W29mZnNldCsyXT10ZVsyXTthcnJheVtvZmZzZXQrM109dGVbM107YXJyYXlbb2Zmc2V0KzRdPXRlWzRdO2FycmF5W29mZnNldCs1XT10ZVs1XTthcnJheVtvZmZzZXQrNl09dGVbNl07YXJyYXlbb2Zmc2V0KzddPXRlWzddO2FycmF5W29mZnNldCs4XT10ZVs4XTtyZXR1cm4gYXJyYXk7fX07Ly8gRmlsZTpzcmMvbWF0aC9NYXRyaXg0LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cclxuICogQGF1dGhvciBwaGlsb2diIC8gaHR0cDovL2Jsb2cudGhlaml0Lm9yZy9cclxuICogQGF1dGhvciBqb3JkaV9yb3MgLyBodHRwOi8vcGxhdHRzb2Z0LmNvbVxyXG4gKiBAYXV0aG9yIEQxcGxvMWQgLyBodHRwOi8vZ2l0aHViLmNvbS9EMXBsbzFkXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgdGlta25pcCAvIGh0dHA6Ly93d3cuZmxvb3JwbGFubmVyLmNvbS9cclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovVEhSRUUuTWF0cml4ND1mdW5jdGlvbigpe3RoaXMuZWxlbWVudHM9bmV3IEZsb2F0MzJBcnJheShbMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV0pO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC4nKTt9fTtUSFJFRS5NYXRyaXg0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0cml4NCxzZXQ6ZnVuY3Rpb24objExLG4xMixuMTMsbjE0LG4yMSxuMjIsbjIzLG4yNCxuMzEsbjMyLG4zMyxuMzQsbjQxLG40MixuNDMsbjQ0KXt2YXIgdGU9dGhpcy5lbGVtZW50czt0ZVswXT1uMTE7dGVbNF09bjEyO3RlWzhdPW4xMzt0ZVsxMl09bjE0O3RlWzFdPW4yMTt0ZVs1XT1uMjI7dGVbOV09bjIzO3RlWzEzXT1uMjQ7dGVbMl09bjMxO3RlWzZdPW4zMjt0ZVsxMF09bjMzO3RlWzE0XT1uMzQ7dGVbM109bjQxO3RlWzddPW40Mjt0ZVsxMV09bjQzO3RlWzE1XT1uNDQ7cmV0dXJuIHRoaXM7fSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyk7fSxjb3B5OmZ1bmN0aW9uKG0pe3RoaXMuZWxlbWVudHMuc2V0KG0uZWxlbWVudHMpO3JldHVybiB0aGlzO30sY29weVBvc2l0aW9uOmZ1bmN0aW9uKG0pe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBtZT1tLmVsZW1lbnRzO3RlWzEyXT1tZVsxMl07dGVbMTNdPW1lWzEzXTt0ZVsxNF09bWVbMTRdO3JldHVybiB0aGlzO30sZXh0cmFjdEJhc2lzOmZ1bmN0aW9uKHhBeGlzLHlBeGlzLHpBeGlzKXt4QXhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCk7eUF4aXMuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDEpO3pBeGlzLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKTtyZXR1cm4gdGhpczt9LG1ha2VCYXNpczpmdW5jdGlvbih4QXhpcyx5QXhpcyx6QXhpcyl7dGhpcy5zZXQoeEF4aXMueCx5QXhpcy54LHpBeGlzLngsMCx4QXhpcy55LHlBeGlzLnksekF4aXMueSwwLHhBeGlzLnoseUF4aXMueix6QXhpcy56LDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fSxleHRyYWN0Um90YXRpb246ZnVuY3Rpb24oKXt2YXIgdjE7cmV0dXJuIGZ1bmN0aW9uKG0pe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIG1lPW0uZWxlbWVudHM7dmFyIHNjYWxlWD0xL3YxLnNldEZyb21NYXRyaXhDb2x1bW4obSwwKS5sZW5ndGgoKTt2YXIgc2NhbGVZPTEvdjEuc2V0RnJvbU1hdHJpeENvbHVtbihtLDEpLmxlbmd0aCgpO3ZhciBzY2FsZVo9MS92MS5zZXRGcm9tTWF0cml4Q29sdW1uKG0sMikubGVuZ3RoKCk7dGVbMF09bWVbMF0qc2NhbGVYO3RlWzFdPW1lWzFdKnNjYWxlWDt0ZVsyXT1tZVsyXSpzY2FsZVg7dGVbNF09bWVbNF0qc2NhbGVZO3RlWzVdPW1lWzVdKnNjYWxlWTt0ZVs2XT1tZVs2XSpzY2FsZVk7dGVbOF09bWVbOF0qc2NhbGVaO3RlWzldPW1lWzldKnNjYWxlWjt0ZVsxMF09bWVbMTBdKnNjYWxlWjtyZXR1cm4gdGhpczt9O30oKSxtYWtlUm90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oZXVsZXIpe2lmKGV1bGVyIGluc3RhbmNlb2YgVEhSRUUuRXVsZXI9PT1mYWxzZSl7Y29uc29sZS5lcnJvcignVEhSRUUuTWF0cml4OiAubWFrZVJvdGF0aW9uRnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLicpO312YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgeD1ldWxlci54LHk9ZXVsZXIueSx6PWV1bGVyLno7dmFyIGE9TWF0aC5jb3MoeCksYj1NYXRoLnNpbih4KTt2YXIgYz1NYXRoLmNvcyh5KSxkPU1hdGguc2luKHkpO3ZhciBlPU1hdGguY29zKHopLGY9TWF0aC5zaW4oeik7aWYoZXVsZXIub3JkZXI9PT0nWFlaJyl7dmFyIGFlPWEqZSxhZj1hKmYsYmU9YiplLGJmPWIqZjt0ZVswXT1jKmU7dGVbNF09LWMqZjt0ZVs4XT1kO3RlWzFdPWFmK2JlKmQ7dGVbNV09YWUtYmYqZDt0ZVs5XT0tYipjO3RlWzJdPWJmLWFlKmQ7dGVbNl09YmUrYWYqZDt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1lYWicpe3ZhciBjZT1jKmUsY2Y9YypmLGRlPWQqZSxkZj1kKmY7dGVbMF09Y2UrZGYqYjt0ZVs0XT1kZSpiLWNmO3RlWzhdPWEqZDt0ZVsxXT1hKmY7dGVbNV09YSplO3RlWzldPS1iO3RlWzJdPWNmKmItZGU7dGVbNl09ZGYrY2UqYjt0ZVsxMF09YSpjO31lbHNlIGlmKGV1bGVyLm9yZGVyPT09J1pYWScpe3ZhciBjZT1jKmUsY2Y9YypmLGRlPWQqZSxkZj1kKmY7dGVbMF09Y2UtZGYqYjt0ZVs0XT0tYSpmO3RlWzhdPWRlK2NmKmI7dGVbMV09Y2YrZGUqYjt0ZVs1XT1hKmU7dGVbOV09ZGYtY2UqYjt0ZVsyXT0tYSpkO3RlWzZdPWI7dGVbMTBdPWEqYzt9ZWxzZSBpZihldWxlci5vcmRlcj09PSdaWVgnKXt2YXIgYWU9YSplLGFmPWEqZixiZT1iKmUsYmY9YipmO3RlWzBdPWMqZTt0ZVs0XT1iZSpkLWFmO3RlWzhdPWFlKmQrYmY7dGVbMV09YypmO3RlWzVdPWJmKmQrYWU7dGVbOV09YWYqZC1iZTt0ZVsyXT0tZDt0ZVs2XT1iKmM7dGVbMTBdPWEqYzt9ZWxzZSBpZihldWxlci5vcmRlcj09PSdZWlgnKXt2YXIgYWM9YSpjLGFkPWEqZCxiYz1iKmMsYmQ9YipkO3RlWzBdPWMqZTt0ZVs0XT1iZC1hYypmO3RlWzhdPWJjKmYrYWQ7dGVbMV09Zjt0ZVs1XT1hKmU7dGVbOV09LWIqZTt0ZVsyXT0tZCplO3RlWzZdPWFkKmYrYmM7dGVbMTBdPWFjLWJkKmY7fWVsc2UgaWYoZXVsZXIub3JkZXI9PT0nWFpZJyl7dmFyIGFjPWEqYyxhZD1hKmQsYmM9YipjLGJkPWIqZDt0ZVswXT1jKmU7dGVbNF09LWY7dGVbOF09ZCplO3RlWzFdPWFjKmYrYmQ7dGVbNV09YSplO3RlWzldPWFkKmYtYmM7dGVbMl09YmMqZi1hZDt0ZVs2XT1iKmU7dGVbMTBdPWJkKmYrYWM7fS8vIGxhc3QgY29sdW1uXG50ZVszXT0wO3RlWzddPTA7dGVbMTFdPTA7Ly8gYm90dG9tIHJvd1xudGVbMTJdPTA7dGVbMTNdPTA7dGVbMTRdPTA7dGVbMTVdPTE7cmV0dXJuIHRoaXM7fSxtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihxKXt2YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgeD1xLngseT1xLnksej1xLnosdz1xLnc7dmFyIHgyPXgreCx5Mj15K3ksejI9eit6O3ZhciB4eD14KngyLHh5PXgqeTIseHo9eCp6Mjt2YXIgeXk9eSp5Mix5ej15KnoyLHp6PXoqejI7dmFyIHd4PXcqeDIsd3k9dyp5Mix3ej13KnoyO3RlWzBdPTEtKHl5K3p6KTt0ZVs0XT14eS13ejt0ZVs4XT14eit3eTt0ZVsxXT14eSt3ejt0ZVs1XT0xLSh4eCt6eik7dGVbOV09eXotd3g7dGVbMl09eHotd3k7dGVbNl09eXord3g7dGVbMTBdPTEtKHh4K3l5KTsvLyBsYXN0IGNvbHVtblxudGVbM109MDt0ZVs3XT0wO3RlWzExXT0wOy8vIGJvdHRvbSByb3dcbnRlWzEyXT0wO3RlWzEzXT0wO3RlWzE0XT0wO3RlWzE1XT0xO3JldHVybiB0aGlzO30sbG9va0F0OmZ1bmN0aW9uKCl7dmFyIHgseSx6O3JldHVybiBmdW5jdGlvbihleWUsdGFyZ2V0LHVwKXtpZih4PT09dW5kZWZpbmVkKXt4PW5ldyBUSFJFRS5WZWN0b3IzKCk7eT1uZXcgVEhSRUUuVmVjdG9yMygpO3o9bmV3IFRIUkVFLlZlY3RvcjMoKTt9dmFyIHRlPXRoaXMuZWxlbWVudHM7ei5zdWJWZWN0b3JzKGV5ZSx0YXJnZXQpLm5vcm1hbGl6ZSgpO2lmKHoubGVuZ3RoU3EoKT09PTApe3ouej0xO314LmNyb3NzVmVjdG9ycyh1cCx6KS5ub3JtYWxpemUoKTtpZih4Lmxlbmd0aFNxKCk9PT0wKXt6LnorPTAuMDAwMTt4LmNyb3NzVmVjdG9ycyh1cCx6KS5ub3JtYWxpemUoKTt9eS5jcm9zc1ZlY3RvcnMoeix4KTt0ZVswXT14Lng7dGVbNF09eS54O3RlWzhdPXoueDt0ZVsxXT14Lnk7dGVbNV09eS55O3RlWzldPXoueTt0ZVsyXT14Lno7dGVbNl09eS56O3RlWzEwXT16Lno7cmV0dXJuIHRoaXM7fTt9KCksbXVsdGlwbHk6ZnVuY3Rpb24obSxuKXtpZihuIT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5TWF0cmljZXMoIGEsIGIgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXMobSxuKTt9cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLG0pO30scHJlbXVsdGlwbHk6ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyhtLHRoaXMpO30sbXVsdGlwbHlNYXRyaWNlczpmdW5jdGlvbihhLGIpe3ZhciBhZT1hLmVsZW1lbnRzO3ZhciBiZT1iLmVsZW1lbnRzO3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBhMTE9YWVbMF0sYTEyPWFlWzRdLGExMz1hZVs4XSxhMTQ9YWVbMTJdO3ZhciBhMjE9YWVbMV0sYTIyPWFlWzVdLGEyMz1hZVs5XSxhMjQ9YWVbMTNdO3ZhciBhMzE9YWVbMl0sYTMyPWFlWzZdLGEzMz1hZVsxMF0sYTM0PWFlWzE0XTt2YXIgYTQxPWFlWzNdLGE0Mj1hZVs3XSxhNDM9YWVbMTFdLGE0ND1hZVsxNV07dmFyIGIxMT1iZVswXSxiMTI9YmVbNF0sYjEzPWJlWzhdLGIxND1iZVsxMl07dmFyIGIyMT1iZVsxXSxiMjI9YmVbNV0sYjIzPWJlWzldLGIyND1iZVsxM107dmFyIGIzMT1iZVsyXSxiMzI9YmVbNl0sYjMzPWJlWzEwXSxiMzQ9YmVbMTRdO3ZhciBiNDE9YmVbM10sYjQyPWJlWzddLGI0Mz1iZVsxMV0sYjQ0PWJlWzE1XTt0ZVswXT1hMTEqYjExK2ExMipiMjErYTEzKmIzMSthMTQqYjQxO3RlWzRdPWExMSpiMTIrYTEyKmIyMithMTMqYjMyK2ExNCpiNDI7dGVbOF09YTExKmIxMythMTIqYjIzK2ExMypiMzMrYTE0KmI0Mzt0ZVsxMl09YTExKmIxNCthMTIqYjI0K2ExMypiMzQrYTE0KmI0NDt0ZVsxXT1hMjEqYjExK2EyMipiMjErYTIzKmIzMSthMjQqYjQxO3RlWzVdPWEyMSpiMTIrYTIyKmIyMithMjMqYjMyK2EyNCpiNDI7dGVbOV09YTIxKmIxMythMjIqYjIzK2EyMypiMzMrYTI0KmI0Mzt0ZVsxM109YTIxKmIxNCthMjIqYjI0K2EyMypiMzQrYTI0KmI0NDt0ZVsyXT1hMzEqYjExK2EzMipiMjErYTMzKmIzMSthMzQqYjQxO3RlWzZdPWEzMSpiMTIrYTMyKmIyMithMzMqYjMyK2EzNCpiNDI7dGVbMTBdPWEzMSpiMTMrYTMyKmIyMythMzMqYjMzK2EzNCpiNDM7dGVbMTRdPWEzMSpiMTQrYTMyKmIyNCthMzMqYjM0K2EzNCpiNDQ7dGVbM109YTQxKmIxMSthNDIqYjIxK2E0MypiMzErYTQ0KmI0MTt0ZVs3XT1hNDEqYjEyK2E0MipiMjIrYTQzKmIzMithNDQqYjQyO3RlWzExXT1hNDEqYjEzK2E0MipiMjMrYTQzKmIzMythNDQqYjQzO3RlWzE1XT1hNDEqYjE0K2E0MipiMjQrYTQzKmIzNCthNDQqYjQ0O3JldHVybiB0aGlzO30sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKGEsYixyKXt2YXIgdGU9dGhpcy5lbGVtZW50czt0aGlzLm11bHRpcGx5TWF0cmljZXMoYSxiKTtyWzBdPXRlWzBdO3JbMV09dGVbMV07clsyXT10ZVsyXTtyWzNdPXRlWzNdO3JbNF09dGVbNF07cls1XT10ZVs1XTtyWzZdPXRlWzZdO3JbN109dGVbN107cls4XT10ZVs4XTtyWzldPXRlWzldO3JbMTBdPXRlWzEwXTtyWzExXT10ZVsxMV07clsxMl09dGVbMTJdO3JbMTNdPXRlWzEzXTtyWzE0XT10ZVsxNF07clsxNV09dGVbMTVdO3JldHVybiB0aGlzO30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24ocyl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dGVbMF0qPXM7dGVbNF0qPXM7dGVbOF0qPXM7dGVbMTJdKj1zO3RlWzFdKj1zO3RlWzVdKj1zO3RlWzldKj1zO3RlWzEzXSo9czt0ZVsyXSo9czt0ZVs2XSo9czt0ZVsxMF0qPXM7dGVbMTRdKj1zO3RlWzNdKj1zO3RlWzddKj1zO3RlWzExXSo9czt0ZVsxNV0qPXM7cmV0dXJuIHRoaXM7fSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7dmFyIHYxO3JldHVybiBmdW5jdGlvbihhcnJheSxvZmZzZXQsbGVuZ3RoKXtpZih2MT09PXVuZGVmaW5lZCl2MT1uZXcgVEhSRUUuVmVjdG9yMygpO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDtpZihsZW5ndGg9PT11bmRlZmluZWQpbGVuZ3RoPWFycmF5Lmxlbmd0aDtmb3IodmFyIGk9MCxqPW9mZnNldDtpPGxlbmd0aDtpKz0zLGorPTMpe3YxLmZyb21BcnJheShhcnJheSxqKTt2MS5hcHBseU1hdHJpeDQodGhpcyk7djEudG9BcnJheShhcnJheSxqKTt9cmV0dXJuIGFycmF5O307fSgpLGFwcGx5VG9CdWZmZXI6ZnVuY3Rpb24oKXt2YXIgdjE7cmV0dXJuIGZ1bmN0aW9uIGFwcGx5VG9CdWZmZXIoYnVmZmVyLG9mZnNldCxsZW5ndGgpe2lmKHYxPT09dW5kZWZpbmVkKXYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO2lmKGxlbmd0aD09PXVuZGVmaW5lZClsZW5ndGg9YnVmZmVyLmxlbmd0aC9idWZmZXIuaXRlbVNpemU7Zm9yKHZhciBpPTAsaj1vZmZzZXQ7aTxsZW5ndGg7aSsrLGorKyl7djEueD1idWZmZXIuZ2V0WChqKTt2MS55PWJ1ZmZlci5nZXRZKGopO3YxLno9YnVmZmVyLmdldFooaik7djEuYXBwbHlNYXRyaXg0KHRoaXMpO2J1ZmZlci5zZXRYWVoodjEueCx2MS55LHYxLnopO31yZXR1cm4gYnVmZmVyO307fSgpLGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIG4xMT10ZVswXSxuMTI9dGVbNF0sbjEzPXRlWzhdLG4xND10ZVsxMl07dmFyIG4yMT10ZVsxXSxuMjI9dGVbNV0sbjIzPXRlWzldLG4yND10ZVsxM107dmFyIG4zMT10ZVsyXSxuMzI9dGVbNl0sbjMzPXRlWzEwXSxuMzQ9dGVbMTRdO3ZhciBuNDE9dGVbM10sbjQyPXRlWzddLG40Mz10ZVsxMV0sbjQ0PXRlWzE1XTsvL1RPRE86IG1ha2UgdGhpcyBtb3JlIGVmZmljaWVudFxuLy8oIGJhc2VkIG9uIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvbWF0cml4L2Z1bmN0aW9ucy9pbnZlcnNlL2ZvdXJEL2luZGV4Lmh0bSApXG5yZXR1cm4gbjQxKigrbjE0Km4yMypuMzItbjEzKm4yNCpuMzItbjE0Km4yMipuMzMrbjEyKm4yNCpuMzMrbjEzKm4yMipuMzQtbjEyKm4yMypuMzQpK240MiooK24xMSpuMjMqbjM0LW4xMSpuMjQqbjMzK24xNCpuMjEqbjMzLW4xMypuMjEqbjM0K24xMypuMjQqbjMxLW4xNCpuMjMqbjMxKStuNDMqKCtuMTEqbjI0Km4zMi1uMTEqbjIyKm4zNC1uMTQqbjIxKm4zMituMTIqbjIxKm4zNCtuMTQqbjIyKm4zMS1uMTIqbjI0Km4zMSkrbjQ0KigtbjEzKm4yMipuMzEtbjExKm4yMypuMzIrbjExKm4yMipuMzMrbjEzKm4yMSpuMzItbjEyKm4yMSpuMzMrbjEyKm4yMypuMzEpO30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHRtcDt0bXA9dGVbMV07dGVbMV09dGVbNF07dGVbNF09dG1wO3RtcD10ZVsyXTt0ZVsyXT10ZVs4XTt0ZVs4XT10bXA7dG1wPXRlWzZdO3RlWzZdPXRlWzldO3RlWzldPXRtcDt0bXA9dGVbM107dGVbM109dGVbMTJdO3RlWzEyXT10bXA7dG1wPXRlWzddO3RlWzddPXRlWzEzXTt0ZVsxM109dG1wO3RtcD10ZVsxMV07dGVbMTFdPXRlWzE0XTt0ZVsxNF09dG1wO3JldHVybiB0aGlzO30sZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24oYXJyYXksb2Zmc2V0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuZmxhdHRlblRvQXJyYXlPZmZzZXQgaXMgZGVwcmVjYXRlZCBcIitcIi0ganVzdCB1c2UgLnRvQXJyYXkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShhcnJheSxvZmZzZXQpO30sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdjE7cmV0dXJuIGZ1bmN0aW9uKCl7aWYodjE9PT11bmRlZmluZWQpdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gdjEuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDMpO307fSgpLHNldFBvc2l0aW9uOmZ1bmN0aW9uKHYpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3RlWzEyXT12Lng7dGVbMTNdPXYueTt0ZVsxNF09di56O3JldHVybiB0aGlzO30sZ2V0SW52ZXJzZTpmdW5jdGlvbihtLHRocm93T25EZWdlbmVyYXRlKXsvLyBiYXNlZCBvbiBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL21hdHJpeC9mdW5jdGlvbnMvaW52ZXJzZS9mb3VyRC9pbmRleC5odG1cbnZhciB0ZT10aGlzLmVsZW1lbnRzLG1lPW0uZWxlbWVudHMsbjExPW1lWzBdLG4yMT1tZVsxXSxuMzE9bWVbMl0sbjQxPW1lWzNdLG4xMj1tZVs0XSxuMjI9bWVbNV0sbjMyPW1lWzZdLG40Mj1tZVs3XSxuMTM9bWVbOF0sbjIzPW1lWzldLG4zMz1tZVsxMF0sbjQzPW1lWzExXSxuMTQ9bWVbMTJdLG4yND1tZVsxM10sbjM0PW1lWzE0XSxuNDQ9bWVbMTVdLHQxMT1uMjMqbjM0Km40Mi1uMjQqbjMzKm40MituMjQqbjMyKm40My1uMjIqbjM0Km40My1uMjMqbjMyKm40NCtuMjIqbjMzKm40NCx0MTI9bjE0Km4zMypuNDItbjEzKm4zNCpuNDItbjE0Km4zMipuNDMrbjEyKm4zNCpuNDMrbjEzKm4zMipuNDQtbjEyKm4zMypuNDQsdDEzPW4xMypuMjQqbjQyLW4xNCpuMjMqbjQyK24xNCpuMjIqbjQzLW4xMipuMjQqbjQzLW4xMypuMjIqbjQ0K24xMipuMjMqbjQ0LHQxND1uMTQqbjIzKm4zMi1uMTMqbjI0Km4zMi1uMTQqbjIyKm4zMytuMTIqbjI0Km4zMytuMTMqbjIyKm4zNC1uMTIqbjIzKm4zNDt2YXIgZGV0PW4xMSp0MTErbjIxKnQxMituMzEqdDEzK240MSp0MTQ7aWYoZGV0PT09MCl7dmFyIG1zZz1cIlRIUkVFLk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCI7aWYodGhyb3dPbkRlZ2VuZXJhdGV8fGZhbHNlKXt0aHJvdyBuZXcgRXJyb3IobXNnKTt9ZWxzZXtjb25zb2xlLndhcm4obXNnKTt9cmV0dXJuIHRoaXMuaWRlbnRpdHkoKTt9dmFyIGRldEludj0xL2RldDt0ZVswXT10MTEqZGV0SW52O3RlWzFdPShuMjQqbjMzKm40MS1uMjMqbjM0Km40MS1uMjQqbjMxKm40MytuMjEqbjM0Km40MytuMjMqbjMxKm40NC1uMjEqbjMzKm40NCkqZGV0SW52O3RlWzJdPShuMjIqbjM0Km40MS1uMjQqbjMyKm40MStuMjQqbjMxKm40Mi1uMjEqbjM0Km40Mi1uMjIqbjMxKm40NCtuMjEqbjMyKm40NCkqZGV0SW52O3RlWzNdPShuMjMqbjMyKm40MS1uMjIqbjMzKm40MS1uMjMqbjMxKm40MituMjEqbjMzKm40MituMjIqbjMxKm40My1uMjEqbjMyKm40MykqZGV0SW52O3RlWzRdPXQxMipkZXRJbnY7dGVbNV09KG4xMypuMzQqbjQxLW4xNCpuMzMqbjQxK24xNCpuMzEqbjQzLW4xMSpuMzQqbjQzLW4xMypuMzEqbjQ0K24xMSpuMzMqbjQ0KSpkZXRJbnY7dGVbNl09KG4xNCpuMzIqbjQxLW4xMipuMzQqbjQxLW4xNCpuMzEqbjQyK24xMSpuMzQqbjQyK24xMipuMzEqbjQ0LW4xMSpuMzIqbjQ0KSpkZXRJbnY7dGVbN109KG4xMipuMzMqbjQxLW4xMypuMzIqbjQxK24xMypuMzEqbjQyLW4xMSpuMzMqbjQyLW4xMipuMzEqbjQzK24xMSpuMzIqbjQzKSpkZXRJbnY7dGVbOF09dDEzKmRldEludjt0ZVs5XT0objE0Km4yMypuNDEtbjEzKm4yNCpuNDEtbjE0Km4yMSpuNDMrbjExKm4yNCpuNDMrbjEzKm4yMSpuNDQtbjExKm4yMypuNDQpKmRldEludjt0ZVsxMF09KG4xMipuMjQqbjQxLW4xNCpuMjIqbjQxK24xNCpuMjEqbjQyLW4xMSpuMjQqbjQyLW4xMipuMjEqbjQ0K24xMSpuMjIqbjQ0KSpkZXRJbnY7dGVbMTFdPShuMTMqbjIyKm40MS1uMTIqbjIzKm40MS1uMTMqbjIxKm40MituMTEqbjIzKm40MituMTIqbjIxKm40My1uMTEqbjIyKm40MykqZGV0SW52O3RlWzEyXT10MTQqZGV0SW52O3RlWzEzXT0objEzKm4yNCpuMzEtbjE0Km4yMypuMzErbjE0Km4yMSpuMzMtbjExKm4yNCpuMzMtbjEzKm4yMSpuMzQrbjExKm4yMypuMzQpKmRldEludjt0ZVsxNF09KG4xNCpuMjIqbjMxLW4xMipuMjQqbjMxLW4xNCpuMjEqbjMyK24xMSpuMjQqbjMyK24xMipuMjEqbjM0LW4xMSpuMjIqbjM0KSpkZXRJbnY7dGVbMTVdPShuMTIqbjIzKm4zMS1uMTMqbjIyKm4zMStuMTMqbjIxKm4zMi1uMTEqbjIzKm4zMi1uMTIqbjIxKm4zMytuMTEqbjIyKm4zMykqZGV0SW52O3JldHVybiB0aGlzO30sc2NhbGU6ZnVuY3Rpb24odil7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHg9di54LHk9di55LHo9di56O3RlWzBdKj14O3RlWzRdKj15O3RlWzhdKj16O3RlWzFdKj14O3RlWzVdKj15O3RlWzldKj16O3RlWzJdKj14O3RlWzZdKj15O3RlWzEwXSo9ejt0ZVszXSo9eDt0ZVs3XSo9eTt0ZVsxMV0qPXo7cmV0dXJuIHRoaXM7fSxnZXRNYXhTY2FsZU9uQXhpczpmdW5jdGlvbigpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBzY2FsZVhTcT10ZVswXSp0ZVswXSt0ZVsxXSp0ZVsxXSt0ZVsyXSp0ZVsyXTt2YXIgc2NhbGVZU3E9dGVbNF0qdGVbNF0rdGVbNV0qdGVbNV0rdGVbNl0qdGVbNl07dmFyIHNjYWxlWlNxPXRlWzhdKnRlWzhdK3RlWzldKnRlWzldK3RlWzEwXSp0ZVsxMF07cmV0dXJuIE1hdGguc3FydChNYXRoLm1heChzY2FsZVhTcSxzY2FsZVlTcSxzY2FsZVpTcSkpO30sbWFrZVRyYW5zbGF0aW9uOmZ1bmN0aW9uKHgseSx6KXt0aGlzLnNldCgxLDAsMCx4LDAsMSwwLHksMCwwLDEseiwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvblg6ZnVuY3Rpb24odGhldGEpe3ZhciBjPU1hdGguY29zKHRoZXRhKSxzPU1hdGguc2luKHRoZXRhKTt0aGlzLnNldCgxLDAsMCwwLDAsYywtcywwLDAscyxjLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXM7fSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKHRoZXRhKXt2YXIgYz1NYXRoLmNvcyh0aGV0YSkscz1NYXRoLnNpbih0aGV0YSk7dGhpcy5zZXQoYywwLHMsMCwwLDEsMCwwLC1zLDAsYywwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sbWFrZVJvdGF0aW9uWjpmdW5jdGlvbih0aGV0YSl7dmFyIGM9TWF0aC5jb3ModGhldGEpLHM9TWF0aC5zaW4odGhldGEpO3RoaXMuc2V0KGMsLXMsMCwwLHMsYywwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LG1ha2VSb3RhdGlvbkF4aXM6ZnVuY3Rpb24oYXhpcyxhbmdsZSl7Ly8gQmFzZWQgb24gaHR0cDovL3d3dy5nYW1lZGV2Lm5ldC9yZWZlcmVuY2UvYXJ0aWNsZXMvYXJ0aWNsZTExOTkuYXNwXG52YXIgYz1NYXRoLmNvcyhhbmdsZSk7dmFyIHM9TWF0aC5zaW4oYW5nbGUpO3ZhciB0PTEtYzt2YXIgeD1heGlzLngseT1heGlzLnksej1heGlzLno7dmFyIHR4PXQqeCx0eT10Knk7dGhpcy5zZXQodHgqeCtjLHR4Knktcyp6LHR4Knorcyp5LDAsdHgqeStzKnosdHkqeStjLHR5Knotcyp4LDAsdHgqei1zKnksdHkqeitzKngsdCp6KnorYywwLDAsMCwwLDEpO3JldHVybiB0aGlzO30sbWFrZVNjYWxlOmZ1bmN0aW9uKHgseSx6KXt0aGlzLnNldCh4LDAsMCwwLDAseSwwLDAsMCwwLHosMCwwLDAsMCwxKTtyZXR1cm4gdGhpczt9LGNvbXBvc2U6ZnVuY3Rpb24ocG9zaXRpb24scXVhdGVybmlvbixzY2FsZSl7dGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihxdWF0ZXJuaW9uKTt0aGlzLnNjYWxlKHNjYWxlKTt0aGlzLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtyZXR1cm4gdGhpczt9LGRlY29tcG9zZTpmdW5jdGlvbigpe3ZhciB2ZWN0b3IsbWF0cml4O3JldHVybiBmdW5jdGlvbihwb3NpdGlvbixxdWF0ZXJuaW9uLHNjYWxlKXtpZih2ZWN0b3I9PT11bmRlZmluZWQpe3ZlY3Rvcj1uZXcgVEhSRUUuVmVjdG9yMygpO21hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCgpO312YXIgdGU9dGhpcy5lbGVtZW50czt2YXIgc3g9dmVjdG9yLnNldCh0ZVswXSx0ZVsxXSx0ZVsyXSkubGVuZ3RoKCk7dmFyIHN5PXZlY3Rvci5zZXQodGVbNF0sdGVbNV0sdGVbNl0pLmxlbmd0aCgpO3ZhciBzej12ZWN0b3Iuc2V0KHRlWzhdLHRlWzldLHRlWzEwXSkubGVuZ3RoKCk7Ly8gaWYgZGV0ZXJtaW5lIGlzIG5lZ2F0aXZlLCB3ZSBuZWVkIHRvIGludmVydCBvbmUgc2NhbGVcbnZhciBkZXQ9dGhpcy5kZXRlcm1pbmFudCgpO2lmKGRldDwwKXtzeD0tc3g7fXBvc2l0aW9uLng9dGVbMTJdO3Bvc2l0aW9uLnk9dGVbMTNdO3Bvc2l0aW9uLno9dGVbMTRdOy8vIHNjYWxlIHRoZSByb3RhdGlvbiBwYXJ0XG5tYXRyaXguZWxlbWVudHMuc2V0KHRoaXMuZWxlbWVudHMpOy8vIGF0IHRoaXMgcG9pbnQgbWF0cml4IGlzIGluY29tcGxldGUgc28gd2UgY2FuJ3QgdXNlIC5jb3B5KClcbnZhciBpbnZTWD0xL3N4O3ZhciBpbnZTWT0xL3N5O3ZhciBpbnZTWj0xL3N6O21hdHJpeC5lbGVtZW50c1swXSo9aW52U1g7bWF0cml4LmVsZW1lbnRzWzFdKj1pbnZTWDttYXRyaXguZWxlbWVudHNbMl0qPWludlNYO21hdHJpeC5lbGVtZW50c1s0XSo9aW52U1k7bWF0cml4LmVsZW1lbnRzWzVdKj1pbnZTWTttYXRyaXguZWxlbWVudHNbNl0qPWludlNZO21hdHJpeC5lbGVtZW50c1s4XSo9aW52U1o7bWF0cml4LmVsZW1lbnRzWzldKj1pbnZTWjttYXRyaXguZWxlbWVudHNbMTBdKj1pbnZTWjtxdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChtYXRyaXgpO3NjYWxlLng9c3g7c2NhbGUueT1zeTtzY2FsZS56PXN6O3JldHVybiB0aGlzO307fSgpLG1ha2VGcnVzdHVtOmZ1bmN0aW9uKGxlZnQscmlnaHQsYm90dG9tLHRvcCxuZWFyLGZhcil7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHg9MipuZWFyLyhyaWdodC1sZWZ0KTt2YXIgeT0yKm5lYXIvKHRvcC1ib3R0b20pO3ZhciBhPShyaWdodCtsZWZ0KS8ocmlnaHQtbGVmdCk7dmFyIGI9KHRvcCtib3R0b20pLyh0b3AtYm90dG9tKTt2YXIgYz0tKGZhcituZWFyKS8oZmFyLW5lYXIpO3ZhciBkPS0yKmZhcipuZWFyLyhmYXItbmVhcik7dGVbMF09eDt0ZVs0XT0wO3RlWzhdPWE7dGVbMTJdPTA7dGVbMV09MDt0ZVs1XT15O3RlWzldPWI7dGVbMTNdPTA7dGVbMl09MDt0ZVs2XT0wO3RlWzEwXT1jO3RlWzE0XT1kO3RlWzNdPTA7dGVbN109MDt0ZVsxMV09LTE7dGVbMTVdPTA7cmV0dXJuIHRoaXM7fSxtYWtlUGVyc3BlY3RpdmU6ZnVuY3Rpb24oZm92LGFzcGVjdCxuZWFyLGZhcil7dmFyIHltYXg9bmVhcipNYXRoLnRhbihUSFJFRS5NYXRoLkRFRzJSQUQqZm92KjAuNSk7dmFyIHltaW49LXltYXg7dmFyIHhtaW49eW1pbiphc3BlY3Q7dmFyIHhtYXg9eW1heCphc3BlY3Q7cmV0dXJuIHRoaXMubWFrZUZydXN0dW0oeG1pbix4bWF4LHltaW4seW1heCxuZWFyLGZhcik7fSxtYWtlT3J0aG9ncmFwaGljOmZ1bmN0aW9uKGxlZnQscmlnaHQsdG9wLGJvdHRvbSxuZWFyLGZhcil7dmFyIHRlPXRoaXMuZWxlbWVudHM7dmFyIHc9MS4wLyhyaWdodC1sZWZ0KTt2YXIgaD0xLjAvKHRvcC1ib3R0b20pO3ZhciBwPTEuMC8oZmFyLW5lYXIpO3ZhciB4PShyaWdodCtsZWZ0KSp3O3ZhciB5PSh0b3ArYm90dG9tKSpoO3ZhciB6PShmYXIrbmVhcikqcDt0ZVswXT0yKnc7dGVbNF09MDt0ZVs4XT0wO3RlWzEyXT0teDt0ZVsxXT0wO3RlWzVdPTIqaDt0ZVs5XT0wO3RlWzEzXT0teTt0ZVsyXT0wO3RlWzZdPTA7dGVbMTBdPS0yKnA7dGVbMTRdPS16O3RlWzNdPTA7dGVbN109MDt0ZVsxMV09MDt0ZVsxNV09MTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbihtYXRyaXgpe3ZhciB0ZT10aGlzLmVsZW1lbnRzO3ZhciBtZT1tYXRyaXguZWxlbWVudHM7Zm9yKHZhciBpPTA7aTwxNjtpKyspe2lmKHRlW2ldIT09bWVbaV0pcmV0dXJuIGZhbHNlO31yZXR1cm4gdHJ1ZTt9LGZyb21BcnJheTpmdW5jdGlvbihhcnJheSl7dGhpcy5lbGVtZW50cy5zZXQoYXJyYXkpO3JldHVybiB0aGlzO30sdG9BcnJheTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe2lmKGFycmF5PT09dW5kZWZpbmVkKWFycmF5PVtdO2lmKG9mZnNldD09PXVuZGVmaW5lZClvZmZzZXQ9MDt2YXIgdGU9dGhpcy5lbGVtZW50czthcnJheVtvZmZzZXRdPXRlWzBdO2FycmF5W29mZnNldCsxXT10ZVsxXTthcnJheVtvZmZzZXQrMl09dGVbMl07YXJyYXlbb2Zmc2V0KzNdPXRlWzNdO2FycmF5W29mZnNldCs0XT10ZVs0XTthcnJheVtvZmZzZXQrNV09dGVbNV07YXJyYXlbb2Zmc2V0KzZdPXRlWzZdO2FycmF5W29mZnNldCs3XT10ZVs3XTthcnJheVtvZmZzZXQrOF09dGVbOF07YXJyYXlbb2Zmc2V0KzldPXRlWzldO2FycmF5W29mZnNldCsxMF09dGVbMTBdO2FycmF5W29mZnNldCsxMV09dGVbMTFdO2FycmF5W29mZnNldCsxMl09dGVbMTJdO2FycmF5W29mZnNldCsxM109dGVbMTNdO2FycmF5W29mZnNldCsxNF09dGVbMTRdO2FycmF5W29mZnNldCsxNV09dGVbMTVdO3JldHVybiBhcnJheTt9fTsvLyBGaWxlOnNyYy9tYXRoL1JheS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICovVEhSRUUuUmF5PWZ1bmN0aW9uKG9yaWdpbixkaXJlY3Rpb24pe3RoaXMub3JpZ2luPW9yaWdpbiE9PXVuZGVmaW5lZD9vcmlnaW46bmV3IFRIUkVFLlZlY3RvcjMoKTt0aGlzLmRpcmVjdGlvbj1kaXJlY3Rpb24hPT11bmRlZmluZWQ/ZGlyZWN0aW9uOm5ldyBUSFJFRS5WZWN0b3IzKCk7fTtUSFJFRS5SYXkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5SYXksc2V0OmZ1bmN0aW9uKG9yaWdpbixkaXJlY3Rpb24pe3RoaXMub3JpZ2luLmNvcHkob3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5jb3B5KGRpcmVjdGlvbik7cmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKHJheSl7dGhpcy5vcmlnaW4uY29weShyYXkub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5jb3B5KHJheS5kaXJlY3Rpb24pO3JldHVybiB0aGlzO30sYXQ6ZnVuY3Rpb24odCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLm9yaWdpbik7fSxsb29rQXQ6ZnVuY3Rpb24odil7dGhpcy5kaXJlY3Rpb24uY29weSh2KS5zdWIodGhpcy5vcmlnaW4pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzO30scmVjYXN0OmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKHQpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdCh0LHYxKSk7cmV0dXJuIHRoaXM7fTt9KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihwb2ludCxvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXN1bHQuc3ViVmVjdG9ycyhwb2ludCx0aGlzLm9yaWdpbik7dmFyIGRpcmVjdGlvbkRpc3RhbmNlPXJlc3VsdC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKGRpcmVjdGlvbkRpc3RhbmNlPDApe3JldHVybiByZXN1bHQuY29weSh0aGlzLm9yaWdpbik7fXJldHVybiByZXN1bHQuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZGlyZWN0aW9uRGlzdGFuY2UpLmFkZCh0aGlzLm9yaWdpbik7fSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24ocG9pbnQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxVG9Qb2ludChwb2ludCkpO30sZGlzdGFuY2VTcVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24ocG9pbnQpe3ZhciBkaXJlY3Rpb25EaXN0YW5jZT12MS5zdWJWZWN0b3JzKHBvaW50LHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pOy8vIHBvaW50IGJlaGluZCB0aGUgcmF5XG5pZihkaXJlY3Rpb25EaXN0YW5jZTwwKXtyZXR1cm4gdGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpO312MS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkaXJlY3Rpb25EaXN0YW5jZSkuYWRkKHRoaXMub3JpZ2luKTtyZXR1cm4gdjEuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpO307fSgpLGRpc3RhbmNlU3FUb1NlZ21lbnQ6ZnVuY3Rpb24oKXt2YXIgc2VnQ2VudGVyPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHNlZ0Rpcj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBkaWZmPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKHYwLHYxLG9wdGlvbmFsUG9pbnRPblJheSxvcHRpb25hbFBvaW50T25TZWdtZW50KXsvLyBmcm9tIGh0dHA6Ly93d3cuZ2VvbWV0cmljdG9vbHMuY29tL0dURW5naW5lL0luY2x1ZGUvTWF0aGVtYXRpY3MvR3RlRGlzdFJheVNlZ21lbnQuaFxuLy8gSXQgcmV0dXJucyB0aGUgbWluIGRpc3RhbmNlIGJldHdlZW4gdGhlIHJheSBhbmQgdGhlIHNlZ21lbnRcbi8vIGRlZmluZWQgYnkgdjAgYW5kIHYxXG4vLyBJdCBjYW4gYWxzbyBzZXQgdHdvIG9wdGlvbmFsIHRhcmdldHMgOlxuLy8gLSBUaGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgcmF5XG4vLyAtIFRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBzZWdtZW50XG5zZWdDZW50ZXIuY29weSh2MCkuYWRkKHYxKS5tdWx0aXBseVNjYWxhcigwLjUpO3NlZ0Rpci5jb3B5KHYxKS5zdWIodjApLm5vcm1hbGl6ZSgpO2RpZmYuY29weSh0aGlzLm9yaWdpbikuc3ViKHNlZ0NlbnRlcik7dmFyIHNlZ0V4dGVudD12MC5kaXN0YW5jZVRvKHYxKSowLjU7dmFyIGEwMT0tdGhpcy5kaXJlY3Rpb24uZG90KHNlZ0Rpcik7dmFyIGIwPWRpZmYuZG90KHRoaXMuZGlyZWN0aW9uKTt2YXIgYjE9LWRpZmYuZG90KHNlZ0Rpcik7dmFyIGM9ZGlmZi5sZW5ndGhTcSgpO3ZhciBkZXQ9TWF0aC5hYnMoMS1hMDEqYTAxKTt2YXIgczAsczEsc3FyRGlzdCxleHREZXQ7aWYoZGV0PjApey8vIFRoZSByYXkgYW5kIHNlZ21lbnQgYXJlIG5vdCBwYXJhbGxlbC5cbnMwPWEwMSpiMS1iMDtzMT1hMDEqYjAtYjE7ZXh0RGV0PXNlZ0V4dGVudCpkZXQ7aWYoczA+PTApe2lmKHMxPj0tZXh0RGV0KXtpZihzMTw9ZXh0RGV0KXsvLyByZWdpb24gMFxuLy8gTWluaW11bSBhdCBpbnRlcmlvciBwb2ludHMgb2YgcmF5IGFuZCBzZWdtZW50LlxudmFyIGludkRldD0xL2RldDtzMCo9aW52RGV0O3MxKj1pbnZEZXQ7c3FyRGlzdD1zMCooczArYTAxKnMxKzIqYjApK3MxKihhMDEqczArczErMipiMSkrYzt9ZWxzZXsvLyByZWdpb24gMVxuczE9c2VnRXh0ZW50O3MwPU1hdGgubWF4KDAsLShhMDEqczErYjApKTtzcXJEaXN0PS1zMCpzMCtzMSooczErMipiMSkrYzt9fWVsc2V7Ly8gcmVnaW9uIDVcbnMxPS1zZWdFeHRlbnQ7czA9TWF0aC5tYXgoMCwtKGEwMSpzMStiMCkpO3NxckRpc3Q9LXMwKnMwK3MxKihzMSsyKmIxKStjO319ZWxzZXtpZihzMTw9LWV4dERldCl7Ly8gcmVnaW9uIDRcbnMwPU1hdGgubWF4KDAsLSgtYTAxKnNlZ0V4dGVudCtiMCkpO3MxPXMwPjA/LXNlZ0V4dGVudDpNYXRoLm1pbihNYXRoLm1heCgtc2VnRXh0ZW50LC1iMSksc2VnRXh0ZW50KTtzcXJEaXN0PS1zMCpzMCtzMSooczErMipiMSkrYzt9ZWxzZSBpZihzMTw9ZXh0RGV0KXsvLyByZWdpb24gM1xuczA9MDtzMT1NYXRoLm1pbihNYXRoLm1heCgtc2VnRXh0ZW50LC1iMSksc2VnRXh0ZW50KTtzcXJEaXN0PXMxKihzMSsyKmIxKStjO31lbHNley8vIHJlZ2lvbiAyXG5zMD1NYXRoLm1heCgwLC0oYTAxKnNlZ0V4dGVudCtiMCkpO3MxPXMwPjA/c2VnRXh0ZW50Ok1hdGgubWluKE1hdGgubWF4KC1zZWdFeHRlbnQsLWIxKSxzZWdFeHRlbnQpO3NxckRpc3Q9LXMwKnMwK3MxKihzMSsyKmIxKStjO319fWVsc2V7Ly8gUmF5IGFuZCBzZWdtZW50IGFyZSBwYXJhbGxlbC5cbnMxPWEwMT4wPy1zZWdFeHRlbnQ6c2VnRXh0ZW50O3MwPU1hdGgubWF4KDAsLShhMDEqczErYjApKTtzcXJEaXN0PS1zMCpzMCtzMSooczErMipiMSkrYzt9aWYob3B0aW9uYWxQb2ludE9uUmF5KXtvcHRpb25hbFBvaW50T25SYXkuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoczApLmFkZCh0aGlzLm9yaWdpbik7fWlmKG9wdGlvbmFsUG9pbnRPblNlZ21lbnQpe29wdGlvbmFsUG9pbnRPblNlZ21lbnQuY29weShzZWdEaXIpLm11bHRpcGx5U2NhbGFyKHMxKS5hZGQoc2VnQ2VudGVyKTt9cmV0dXJuIHNxckRpc3Q7fTt9KCksaW50ZXJzZWN0U3BoZXJlOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKHNwaGVyZSxvcHRpb25hbFRhcmdldCl7djEuc3ViVmVjdG9ycyhzcGhlcmUuY2VudGVyLHRoaXMub3JpZ2luKTt2YXIgdGNhPXYxLmRvdCh0aGlzLmRpcmVjdGlvbik7dmFyIGQyPXYxLmRvdCh2MSktdGNhKnRjYTt2YXIgcmFkaXVzMj1zcGhlcmUucmFkaXVzKnNwaGVyZS5yYWRpdXM7aWYoZDI+cmFkaXVzMilyZXR1cm4gbnVsbDt2YXIgdGhjPU1hdGguc3FydChyYWRpdXMyLWQyKTsvLyB0MCA9IGZpcnN0IGludGVyc2VjdCBwb2ludCAtIGVudHJhbmNlIG9uIGZyb250IG9mIHNwaGVyZVxudmFyIHQwPXRjYS10aGM7Ly8gdDEgPSBzZWNvbmQgaW50ZXJzZWN0IHBvaW50IC0gZXhpdCBwb2ludCBvbiBiYWNrIG9mIHNwaGVyZVxudmFyIHQxPXRjYSt0aGM7Ly8gdGVzdCB0byBzZWUgaWYgYm90aCB0MCBhbmQgdDEgYXJlIGJlaGluZCB0aGUgcmF5IC0gaWYgc28sIHJldHVybiBudWxsXG5pZih0MDwwJiZ0MTwwKXJldHVybiBudWxsOy8vIHRlc3QgdG8gc2VlIGlmIHQwIGlzIGJlaGluZCB0aGUgcmF5OlxuLy8gaWYgaXQgaXMsIHRoZSByYXkgaXMgaW5zaWRlIHRoZSBzcGhlcmUsIHNvIHJldHVybiB0aGUgc2Vjb25kIGV4aXQgcG9pbnQgc2NhbGVkIGJ5IHQxLFxuLy8gaW4gb3JkZXIgdG8gYWx3YXlzIHJldHVybiBhbiBpbnRlcnNlY3QgcG9pbnQgdGhhdCBpcyBpbiBmcm9udCBvZiB0aGUgcmF5LlxuaWYodDA8MClyZXR1cm4gdGhpcy5hdCh0MSxvcHRpb25hbFRhcmdldCk7Ly8gZWxzZSB0MCBpcyBpbiBmcm9udCBvZiB0aGUgcmF5LCBzbyByZXR1cm4gdGhlIGZpcnN0IGNvbGxpc2lvbiBwb2ludCBzY2FsZWQgYnkgdDBcbnJldHVybiB0aGlzLmF0KHQwLG9wdGlvbmFsVGFyZ2V0KTt9O30oKSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKHNwaGVyZSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KHNwaGVyZS5jZW50ZXIpPD1zcGhlcmUucmFkaXVzO30sZGlzdGFuY2VUb1BsYW5lOmZ1bmN0aW9uKHBsYW5lKXt2YXIgZGVub21pbmF0b3I9cGxhbmUubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoZGVub21pbmF0b3I9PT0wKXsvLyBsaW5lIGlzIGNvcGxhbmFyLCByZXR1cm4gb3JpZ2luXG5pZihwbGFuZS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pPT09MCl7cmV0dXJuIDA7fS8vIE51bGwgaXMgcHJlZmVyYWJsZSB0byB1bmRlZmluZWQgc2luY2UgdW5kZWZpbmVkIG1lYW5zLi4uLiBpdCBpcyB1bmRlZmluZWRcbnJldHVybiBudWxsO312YXIgdD0tKHRoaXMub3JpZ2luLmRvdChwbGFuZS5ub3JtYWwpK3BsYW5lLmNvbnN0YW50KS9kZW5vbWluYXRvcjsvLyBSZXR1cm4gaWYgdGhlIHJheSBuZXZlciBpbnRlcnNlY3RzIHRoZSBwbGFuZVxucmV0dXJuIHQ+PTA/dDpudWxsO30saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24ocGxhbmUsb3B0aW9uYWxUYXJnZXQpe3ZhciB0PXRoaXMuZGlzdGFuY2VUb1BsYW5lKHBsYW5lKTtpZih0PT09bnVsbCl7cmV0dXJuIG51bGw7fXJldHVybiB0aGlzLmF0KHQsb3B0aW9uYWxUYXJnZXQpO30saW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKHBsYW5lKXsvLyBjaGVjayBpZiB0aGUgcmF5IGxpZXMgb24gdGhlIHBsYW5lIGZpcnN0XG52YXIgZGlzdFRvUG9pbnQ9cGxhbmUuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtpZihkaXN0VG9Qb2ludD09PTApe3JldHVybiB0cnVlO312YXIgZGVub21pbmF0b3I9cGxhbmUubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoZGVub21pbmF0b3IqZGlzdFRvUG9pbnQ8MCl7cmV0dXJuIHRydWU7fS8vIHJheSBvcmlnaW4gaXMgYmVoaW5kIHRoZSBwbGFuZSAoYW5kIGlzIHBvaW50aW5nIGJlaGluZCBpdClcbnJldHVybiBmYWxzZTt9LGludGVyc2VjdEJveDpmdW5jdGlvbihib3gsb3B0aW9uYWxUYXJnZXQpe3ZhciB0bWluLHRtYXgsdHltaW4sdHltYXgsdHptaW4sdHptYXg7dmFyIGludmRpcng9MS90aGlzLmRpcmVjdGlvbi54LGludmRpcnk9MS90aGlzLmRpcmVjdGlvbi55LGludmRpcno9MS90aGlzLmRpcmVjdGlvbi56O3ZhciBvcmlnaW49dGhpcy5vcmlnaW47aWYoaW52ZGlyeD49MCl7dG1pbj0oYm94Lm1pbi54LW9yaWdpbi54KSppbnZkaXJ4O3RtYXg9KGJveC5tYXgueC1vcmlnaW4ueCkqaW52ZGlyeDt9ZWxzZXt0bWluPShib3gubWF4Lngtb3JpZ2luLngpKmludmRpcng7dG1heD0oYm94Lm1pbi54LW9yaWdpbi54KSppbnZkaXJ4O31pZihpbnZkaXJ5Pj0wKXt0eW1pbj0oYm94Lm1pbi55LW9yaWdpbi55KSppbnZkaXJ5O3R5bWF4PShib3gubWF4Lnktb3JpZ2luLnkpKmludmRpcnk7fWVsc2V7dHltaW49KGJveC5tYXgueS1vcmlnaW4ueSkqaW52ZGlyeTt0eW1heD0oYm94Lm1pbi55LW9yaWdpbi55KSppbnZkaXJ5O31pZih0bWluPnR5bWF4fHx0eW1pbj50bWF4KXJldHVybiBudWxsOy8vIFRoZXNlIGxpbmVzIGFsc28gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRtaW4gb3IgdG1heCBpcyBOYU5cbi8vIChyZXN1bHQgb2YgMCAqIEluZmluaXR5KS4geCAhPT0geCByZXR1cm5zIHRydWUgaWYgeCBpcyBOYU5cbmlmKHR5bWluPnRtaW58fHRtaW4hPT10bWluKXRtaW49dHltaW47aWYodHltYXg8dG1heHx8dG1heCE9PXRtYXgpdG1heD10eW1heDtpZihpbnZkaXJ6Pj0wKXt0em1pbj0oYm94Lm1pbi56LW9yaWdpbi56KSppbnZkaXJ6O3R6bWF4PShib3gubWF4Lnotb3JpZ2luLnopKmludmRpcno7fWVsc2V7dHptaW49KGJveC5tYXguei1vcmlnaW4ueikqaW52ZGlyejt0em1heD0oYm94Lm1pbi56LW9yaWdpbi56KSppbnZkaXJ6O31pZih0bWluPnR6bWF4fHx0em1pbj50bWF4KXJldHVybiBudWxsO2lmKHR6bWluPnRtaW58fHRtaW4hPT10bWluKXRtaW49dHptaW47aWYodHptYXg8dG1heHx8dG1heCE9PXRtYXgpdG1heD10em1heDsvL3JldHVybiBwb2ludCBjbG9zZXN0IHRvIHRoZSByYXkgKHBvc2l0aXZlIHNpZGUpXG5pZih0bWF4PDApcmV0dXJuIG51bGw7cmV0dXJuIHRoaXMuYXQodG1pbj49MD90bWluOnRtYXgsb3B0aW9uYWxUYXJnZXQpO30saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciB2PW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKGJveCl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0Qm94KGJveCx2KSE9PW51bGw7fTt9KCksaW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXsvLyBDb21wdXRlIHRoZSBvZmZzZXQgb3JpZ2luLCBlZGdlcywgYW5kIG5vcm1hbC5cbnZhciBkaWZmPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIGVkZ2UxPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIGVkZ2UyPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIG5vcm1hbD1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbihhLGIsYyxiYWNrZmFjZUN1bGxpbmcsb3B0aW9uYWxUYXJnZXQpey8vIGZyb20gaHR0cDovL3d3dy5nZW9tZXRyaWN0b29scy5jb20vR1RFbmdpbmUvSW5jbHVkZS9NYXRoZW1hdGljcy9HdGVJbnRyUmF5M1RyaWFuZ2xlMy5oXG5lZGdlMS5zdWJWZWN0b3JzKGIsYSk7ZWRnZTIuc3ViVmVjdG9ycyhjLGEpO25vcm1hbC5jcm9zc1ZlY3RvcnMoZWRnZTEsZWRnZTIpOy8vIFNvbHZlIFEgKyB0KkQgPSBiMSpFMSArIGIyKkUyIChRID0ga0RpZmYsIEQgPSByYXkgZGlyZWN0aW9uLFxuLy8gRTEgPSBrRWRnZTEsIEUyID0ga0VkZ2UyLCBOID0gQ3Jvc3MoRTEsRTIpKSBieVxuLy8gICB8RG90KEQsTil8KmIxID0gc2lnbihEb3QoRCxOKSkqRG90KEQsQ3Jvc3MoUSxFMikpXG4vLyAgIHxEb3QoRCxOKXwqYjIgPSBzaWduKERvdChELE4pKSpEb3QoRCxDcm9zcyhFMSxRKSlcbi8vICAgfERvdChELE4pfCp0ID0gLXNpZ24oRG90KEQsTikpKkRvdChRLE4pXG52YXIgRGROPXRoaXMuZGlyZWN0aW9uLmRvdChub3JtYWwpO3ZhciBzaWduO2lmKERkTj4wKXtpZihiYWNrZmFjZUN1bGxpbmcpcmV0dXJuIG51bGw7c2lnbj0xO31lbHNlIGlmKERkTjwwKXtzaWduPS0xO0RkTj0tRGROO31lbHNle3JldHVybiBudWxsO31kaWZmLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sYSk7dmFyIERkUXhFMj1zaWduKnRoaXMuZGlyZWN0aW9uLmRvdChlZGdlMi5jcm9zc1ZlY3RvcnMoZGlmZixlZGdlMikpOy8vIGIxIDwgMCwgbm8gaW50ZXJzZWN0aW9uXG5pZihEZFF4RTI8MCl7cmV0dXJuIG51bGw7fXZhciBEZEUxeFE9c2lnbip0aGlzLmRpcmVjdGlvbi5kb3QoZWRnZTEuY3Jvc3MoZGlmZikpOy8vIGIyIDwgMCwgbm8gaW50ZXJzZWN0aW9uXG5pZihEZEUxeFE8MCl7cmV0dXJuIG51bGw7fS8vIGIxK2IyID4gMSwgbm8gaW50ZXJzZWN0aW9uXG5pZihEZFF4RTIrRGRFMXhRPkRkTil7cmV0dXJuIG51bGw7fS8vIExpbmUgaW50ZXJzZWN0cyB0cmlhbmdsZSwgY2hlY2sgaWYgcmF5IGRvZXMuXG52YXIgUWROPS1zaWduKmRpZmYuZG90KG5vcm1hbCk7Ly8gdCA8IDAsIG5vIGludGVyc2VjdGlvblxuaWYoUWROPDApe3JldHVybiBudWxsO30vLyBSYXkgaW50ZXJzZWN0cyB0cmlhbmdsZS5cbnJldHVybiB0aGlzLmF0KFFkTi9EZE4sb3B0aW9uYWxUYXJnZXQpO307fSgpLGFwcGx5TWF0cml4NDpmdW5jdGlvbihtYXRyaXg0KXt0aGlzLmRpcmVjdGlvbi5hZGQodGhpcy5vcmlnaW4pLmFwcGx5TWF0cml4NChtYXRyaXg0KTt0aGlzLm9yaWdpbi5hcHBseU1hdHJpeDQobWF0cml4NCk7dGhpcy5kaXJlY3Rpb24uc3ViKHRoaXMub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5ub3JtYWxpemUoKTtyZXR1cm4gdGhpczt9LGVxdWFsczpmdW5jdGlvbihyYXkpe3JldHVybiByYXkub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJnJheS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKTt9fTsvLyBGaWxlOnNyYy9tYXRoL1NwaGVyZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuU3BoZXJlPWZ1bmN0aW9uKGNlbnRlcixyYWRpdXMpe3RoaXMuY2VudGVyPWNlbnRlciE9PXVuZGVmaW5lZD9jZW50ZXI6bmV3IFRIUkVFLlZlY3RvcjMoKTt0aGlzLnJhZGl1cz1yYWRpdXMhPT11bmRlZmluZWQ/cmFkaXVzOjA7fTtUSFJFRS5TcGhlcmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5TcGhlcmUsc2V0OmZ1bmN0aW9uKGNlbnRlcixyYWRpdXMpe3RoaXMuY2VudGVyLmNvcHkoY2VudGVyKTt0aGlzLnJhZGl1cz1yYWRpdXM7cmV0dXJuIHRoaXM7fSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGJveD1uZXcgVEhSRUUuQm94MygpO3JldHVybiBmdW5jdGlvbihwb2ludHMsb3B0aW9uYWxDZW50ZXIpe3ZhciBjZW50ZXI9dGhpcy5jZW50ZXI7aWYob3B0aW9uYWxDZW50ZXIhPT11bmRlZmluZWQpe2NlbnRlci5jb3B5KG9wdGlvbmFsQ2VudGVyKTt9ZWxzZXtib3guc2V0RnJvbVBvaW50cyhwb2ludHMpLmNlbnRlcihjZW50ZXIpO312YXIgbWF4UmFkaXVzU3E9MDtmb3IodmFyIGk9MCxpbD1wb2ludHMubGVuZ3RoO2k8aWw7aSsrKXttYXhSYWRpdXNTcT1NYXRoLm1heChtYXhSYWRpdXNTcSxjZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnRzW2ldKSk7fXRoaXMucmFkaXVzPU1hdGguc3FydChtYXhSYWRpdXNTcSk7cmV0dXJuIHRoaXM7fTt9KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbihzcGhlcmUpe3RoaXMuY2VudGVyLmNvcHkoc3BoZXJlLmNlbnRlcik7dGhpcy5yYWRpdXM9c3BoZXJlLnJhZGl1cztyZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFkaXVzPD0wO30sY29udGFpbnNQb2ludDpmdW5jdGlvbihwb2ludCl7cmV0dXJuIHBvaW50LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXM7fSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24ocG9pbnQpe3JldHVybiBwb2ludC5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1czt9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oc3BoZXJlKXt2YXIgcmFkaXVzU3VtPXRoaXMucmFkaXVzK3NwaGVyZS5yYWRpdXM7cmV0dXJuIHNwaGVyZS5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1yYWRpdXNTdW0qcmFkaXVzU3VtO30saW50ZXJzZWN0c0JveDpmdW5jdGlvbihib3gpe3JldHVybiBib3guaW50ZXJzZWN0c1NwaGVyZSh0aGlzKTt9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihwbGFuZSl7Ly8gV2UgdXNlIHRoZSBmb2xsb3dpbmcgZXF1YXRpb24gdG8gY29tcHV0ZSB0aGUgc2lnbmVkIGRpc3RhbmNlIGZyb21cbi8vIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZSB0byB0aGUgcGxhbmUuXG4vL1xuLy8gZGlzdGFuY2UgPSBxICogbiAtIGRcbi8vXG4vLyBJZiB0aGlzIGRpc3RhbmNlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUsXG4vLyB0aGVuIHRoZXJlIGlzIG5vIGludGVyc2VjdGlvbi5cbnJldHVybiBNYXRoLmFicyh0aGlzLmNlbnRlci5kb3QocGxhbmUubm9ybWFsKS1wbGFuZS5jb25zdGFudCk8PXRoaXMucmFkaXVzO30sY2xhbXBQb2ludDpmdW5jdGlvbihwb2ludCxvcHRpb25hbFRhcmdldCl7dmFyIGRlbHRhTGVuZ3RoU3E9dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQocG9pbnQpO3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5WZWN0b3IzKCk7cmVzdWx0LmNvcHkocG9pbnQpO2lmKGRlbHRhTGVuZ3RoU3E+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMpe3Jlc3VsdC5zdWIodGhpcy5jZW50ZXIpLm5vcm1hbGl6ZSgpO3Jlc3VsdC5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKTt9cmV0dXJuIHJlc3VsdDt9LGdldEJvdW5kaW5nQm94OmZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgYm94PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuQm94MygpO2JveC5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2JveC5leHBhbmRCeVNjYWxhcih0aGlzLnJhZGl1cyk7cmV0dXJuIGJveDt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihtYXRyaXgpe3RoaXMuY2VudGVyLmFwcGx5TWF0cml4NChtYXRyaXgpO3RoaXMucmFkaXVzPXRoaXMucmFkaXVzKm1hdHJpeC5nZXRNYXhTY2FsZU9uQXhpcygpO3JldHVybiB0aGlzO30sdHJhbnNsYXRlOmZ1bmN0aW9uKG9mZnNldCl7dGhpcy5jZW50ZXIuYWRkKG9mZnNldCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24oc3BoZXJlKXtyZXR1cm4gc3BoZXJlLmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZzcGhlcmUucmFkaXVzPT09dGhpcy5yYWRpdXM7fX07Ly8gRmlsZTpzcmMvbWF0aC9GcnVzdHVtLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKi9USFJFRS5GcnVzdHVtPWZ1bmN0aW9uKHAwLHAxLHAyLHAzLHA0LHA1KXt0aGlzLnBsYW5lcz1bcDAhPT11bmRlZmluZWQ/cDA6bmV3IFRIUkVFLlBsYW5lKCkscDEhPT11bmRlZmluZWQ/cDE6bmV3IFRIUkVFLlBsYW5lKCkscDIhPT11bmRlZmluZWQ/cDI6bmV3IFRIUkVFLlBsYW5lKCkscDMhPT11bmRlZmluZWQ/cDM6bmV3IFRIUkVFLlBsYW5lKCkscDQhPT11bmRlZmluZWQ/cDQ6bmV3IFRIUkVFLlBsYW5lKCkscDUhPT11bmRlZmluZWQ/cDU6bmV3IFRIUkVFLlBsYW5lKCldO307VEhSRUUuRnJ1c3R1bS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkZydXN0dW0sc2V0OmZ1bmN0aW9uKHAwLHAxLHAyLHAzLHA0LHA1KXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO3BsYW5lc1swXS5jb3B5KHAwKTtwbGFuZXNbMV0uY29weShwMSk7cGxhbmVzWzJdLmNvcHkocDIpO3BsYW5lc1szXS5jb3B5KHAzKTtwbGFuZXNbNF0uY29weShwNCk7cGxhbmVzWzVdLmNvcHkocDUpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbihmcnVzdHVtKXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO2Zvcih2YXIgaT0wO2k8NjtpKyspe3BsYW5lc1tpXS5jb3B5KGZydXN0dW0ucGxhbmVzW2ldKTt9cmV0dXJuIHRoaXM7fSxzZXRGcm9tTWF0cml4OmZ1bmN0aW9uKG0pe3ZhciBwbGFuZXM9dGhpcy5wbGFuZXM7dmFyIG1lPW0uZWxlbWVudHM7dmFyIG1lMD1tZVswXSxtZTE9bWVbMV0sbWUyPW1lWzJdLG1lMz1tZVszXTt2YXIgbWU0PW1lWzRdLG1lNT1tZVs1XSxtZTY9bWVbNl0sbWU3PW1lWzddO3ZhciBtZTg9bWVbOF0sbWU5PW1lWzldLG1lMTA9bWVbMTBdLG1lMTE9bWVbMTFdO3ZhciBtZTEyPW1lWzEyXSxtZTEzPW1lWzEzXSxtZTE0PW1lWzE0XSxtZTE1PW1lWzE1XTtwbGFuZXNbMF0uc2V0Q29tcG9uZW50cyhtZTMtbWUwLG1lNy1tZTQsbWUxMS1tZTgsbWUxNS1tZTEyKS5ub3JtYWxpemUoKTtwbGFuZXNbMV0uc2V0Q29tcG9uZW50cyhtZTMrbWUwLG1lNyttZTQsbWUxMSttZTgsbWUxNSttZTEyKS5ub3JtYWxpemUoKTtwbGFuZXNbMl0uc2V0Q29tcG9uZW50cyhtZTMrbWUxLG1lNyttZTUsbWUxMSttZTksbWUxNSttZTEzKS5ub3JtYWxpemUoKTtwbGFuZXNbM10uc2V0Q29tcG9uZW50cyhtZTMtbWUxLG1lNy1tZTUsbWUxMS1tZTksbWUxNS1tZTEzKS5ub3JtYWxpemUoKTtwbGFuZXNbNF0uc2V0Q29tcG9uZW50cyhtZTMtbWUyLG1lNy1tZTYsbWUxMS1tZTEwLG1lMTUtbWUxNCkubm9ybWFsaXplKCk7cGxhbmVzWzVdLnNldENvbXBvbmVudHMobWUzK21lMixtZTcrbWU2LG1lMTErbWUxMCxtZTE1K21lMTQpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzO30saW50ZXJzZWN0c09iamVjdDpmdW5jdGlvbigpe3ZhciBzcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSgpO3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3ZhciBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7aWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmU9PT1udWxsKWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3NwaGVyZS5jb3B5KGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlKS5hcHBseU1hdHJpeDQob2JqZWN0Lm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSk7fTt9KCksaW50ZXJzZWN0c1Nwcml0ZTpmdW5jdGlvbigpe3ZhciBzcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSgpO3JldHVybiBmdW5jdGlvbihzcHJpdGUpe3NwaGVyZS5jZW50ZXIuc2V0KDAsMCwwKTtzcGhlcmUucmFkaXVzPTAuNzA3MTA2NzgxMTg2NTQ3NjtzcGhlcmUuYXBwbHlNYXRyaXg0KHNwcml0ZS5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpO307fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oc3BoZXJlKXt2YXIgcGxhbmVzPXRoaXMucGxhbmVzO3ZhciBjZW50ZXI9c3BoZXJlLmNlbnRlcjt2YXIgbmVnUmFkaXVzPS1zcGhlcmUucmFkaXVzO2Zvcih2YXIgaT0wO2k8NjtpKyspe3ZhciBkaXN0YW5jZT1wbGFuZXNbaV0uZGlzdGFuY2VUb1BvaW50KGNlbnRlcik7aWYoZGlzdGFuY2U8bmVnUmFkaXVzKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgcDE9bmV3IFRIUkVFLlZlY3RvcjMoKSxwMj1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbihib3gpe3ZhciBwbGFuZXM9dGhpcy5wbGFuZXM7Zm9yKHZhciBpPTA7aTw2O2krKyl7dmFyIHBsYW5lPXBsYW5lc1tpXTtwMS54PXBsYW5lLm5vcm1hbC54PjA/Ym94Lm1pbi54OmJveC5tYXgueDtwMi54PXBsYW5lLm5vcm1hbC54PjA/Ym94Lm1heC54OmJveC5taW4ueDtwMS55PXBsYW5lLm5vcm1hbC55PjA/Ym94Lm1pbi55OmJveC5tYXgueTtwMi55PXBsYW5lLm5vcm1hbC55PjA/Ym94Lm1heC55OmJveC5taW4ueTtwMS56PXBsYW5lLm5vcm1hbC56PjA/Ym94Lm1pbi56OmJveC5tYXguejtwMi56PXBsYW5lLm5vcm1hbC56PjA/Ym94Lm1heC56OmJveC5taW4uejt2YXIgZDE9cGxhbmUuZGlzdGFuY2VUb1BvaW50KHAxKTt2YXIgZDI9cGxhbmUuZGlzdGFuY2VUb1BvaW50KHAyKTsvLyBpZiBib3RoIG91dHNpZGUgcGxhbmUsIG5vIGludGVyc2VjdGlvblxuaWYoZDE8MCYmZDI8MCl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fTt9KCksY29udGFpbnNQb2ludDpmdW5jdGlvbihwb2ludCl7dmFyIHBsYW5lcz10aGlzLnBsYW5lcztmb3IodmFyIGk9MDtpPDY7aSsrKXtpZihwbGFuZXNbaV0uZGlzdGFuY2VUb1BvaW50KHBvaW50KTwwKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9fTsvLyBGaWxlOnNyYy9tYXRoL1BsYW5lLmpzXG4vKipcclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKi9USFJFRS5QbGFuZT1mdW5jdGlvbihub3JtYWwsY29uc3RhbnQpe3RoaXMubm9ybWFsPW5vcm1hbCE9PXVuZGVmaW5lZD9ub3JtYWw6bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3RoaXMuY29uc3RhbnQ9Y29uc3RhbnQhPT11bmRlZmluZWQ/Y29uc3RhbnQ6MDt9O1RIUkVFLlBsYW5lLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUGxhbmUsc2V0OmZ1bmN0aW9uKG5vcm1hbCxjb25zdGFudCl7dGhpcy5ub3JtYWwuY29weShub3JtYWwpO3RoaXMuY29uc3RhbnQ9Y29uc3RhbnQ7cmV0dXJuIHRoaXM7fSxzZXRDb21wb25lbnRzOmZ1bmN0aW9uKHgseSx6LHcpe3RoaXMubm9ybWFsLnNldCh4LHkseik7dGhpcy5jb25zdGFudD13O3JldHVybiB0aGlzO30sc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24obm9ybWFsLHBvaW50KXt0aGlzLm5vcm1hbC5jb3B5KG5vcm1hbCk7dGhpcy5jb25zdGFudD0tcG9pbnQuZG90KHRoaXMubm9ybWFsKTsvLyBtdXN0IGJlIHRoaXMubm9ybWFsLCBub3Qgbm9ybWFsLCBhcyB0aGlzLm5vcm1hbCBpcyBub3JtYWxpemVkXG5yZXR1cm4gdGhpczt9LHNldEZyb21Db3BsYW5hclBvaW50czpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciB2Mj1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbihhLGIsYyl7dmFyIG5vcm1hbD12MS5zdWJWZWN0b3JzKGMsYikuY3Jvc3ModjIuc3ViVmVjdG9ycyhhLGIpKS5ub3JtYWxpemUoKTsvLyBROiBzaG91bGQgYW4gZXJyb3IgYmUgdGhyb3duIGlmIG5vcm1hbCBpcyB6ZXJvIChlLmcuIGRlZ2VuZXJhdGUgcGxhbmUpP1xudGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChub3JtYWwsYSk7cmV0dXJuIHRoaXM7fTt9KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbihwbGFuZSl7dGhpcy5ub3JtYWwuY29weShwbGFuZS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9cGxhbmUuY29uc3RhbnQ7cmV0dXJuIHRoaXM7fSxub3JtYWxpemU6ZnVuY3Rpb24oKXsvLyBOb3RlOiB3aWxsIGxlYWQgdG8gYSBkaXZpZGUgYnkgemVybyBpZiB0aGUgcGxhbmUgaXMgaW52YWxpZC5cbnZhciBpbnZlcnNlTm9ybWFsTGVuZ3RoPTEuMC90aGlzLm5vcm1hbC5sZW5ndGgoKTt0aGlzLm5vcm1hbC5tdWx0aXBseVNjYWxhcihpbnZlcnNlTm9ybWFsTGVuZ3RoKTt0aGlzLmNvbnN0YW50Kj1pbnZlcnNlTm9ybWFsTGVuZ3RoO3JldHVybiB0aGlzO30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXM7fSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24ocG9pbnQpe3JldHVybiB0aGlzLm5vcm1hbC5kb3QocG9pbnQpK3RoaXMuY29uc3RhbnQ7fSxkaXN0YW5jZVRvU3BoZXJlOmZ1bmN0aW9uKHNwaGVyZSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KHNwaGVyZS5jZW50ZXIpLXNwaGVyZS5yYWRpdXM7fSxwcm9qZWN0UG9pbnQ6ZnVuY3Rpb24ocG9pbnQsb3B0aW9uYWxUYXJnZXQpe3JldHVybiB0aGlzLm9ydGhvUG9pbnQocG9pbnQsb3B0aW9uYWxUYXJnZXQpLnN1Yihwb2ludCkubmVnYXRlKCk7fSxvcnRob1BvaW50OmZ1bmN0aW9uKHBvaW50LG9wdGlvbmFsVGFyZ2V0KXt2YXIgcGVycGVuZGljdWxhck1hZ25pdHVkZT10aGlzLmRpc3RhbmNlVG9Qb2ludChwb2ludCk7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKHBlcnBlbmRpY3VsYXJNYWduaXR1ZGUpO30saW50ZXJzZWN0TGluZTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbihsaW5lLG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBkaXJlY3Rpb249bGluZS5kZWx0YSh2MSk7dmFyIGRlbm9taW5hdG9yPXRoaXMubm9ybWFsLmRvdChkaXJlY3Rpb24pO2lmKGRlbm9taW5hdG9yPT09MCl7Ly8gbGluZSBpcyBjb3BsYW5hciwgcmV0dXJuIG9yaWdpblxuaWYodGhpcy5kaXN0YW5jZVRvUG9pbnQobGluZS5zdGFydCk9PT0wKXtyZXR1cm4gcmVzdWx0LmNvcHkobGluZS5zdGFydCk7fS8vIFVuc3VyZSBpZiB0aGlzIGlzIHRoZSBjb3JyZWN0IG1ldGhvZCB0byBoYW5kbGUgdGhpcyBjYXNlLlxucmV0dXJuIHVuZGVmaW5lZDt9dmFyIHQ9LShsaW5lLnN0YXJ0LmRvdCh0aGlzLm5vcm1hbCkrdGhpcy5jb25zdGFudCkvZGVub21pbmF0b3I7aWYodDwwfHx0PjEpe3JldHVybiB1bmRlZmluZWQ7fXJldHVybiByZXN1bHQuY29weShkaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKHQpLmFkZChsaW5lLnN0YXJ0KTt9O30oKSxpbnRlcnNlY3RzTGluZTpmdW5jdGlvbihsaW5lKXsvLyBOb3RlOiB0aGlzIHRlc3RzIGlmIGEgbGluZSBpbnRlcnNlY3RzIHRoZSBwbGFuZSwgbm90IHdoZXRoZXIgaXQgKG9yIGl0cyBlbmQtcG9pbnRzKSBhcmUgY29wbGFuYXIgd2l0aCBpdC5cbnZhciBzdGFydFNpZ249dGhpcy5kaXN0YW5jZVRvUG9pbnQobGluZS5zdGFydCk7dmFyIGVuZFNpZ249dGhpcy5kaXN0YW5jZVRvUG9pbnQobGluZS5lbmQpO3JldHVybiBzdGFydFNpZ248MCYmZW5kU2lnbj4wfHxlbmRTaWduPDAmJnN0YXJ0U2lnbj4wO30saW50ZXJzZWN0c0JveDpmdW5jdGlvbihib3gpe3JldHVybiBib3guaW50ZXJzZWN0c1BsYW5lKHRoaXMpO30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihzcGhlcmUpe3JldHVybiBzcGhlcmUuaW50ZXJzZWN0c1BsYW5lKHRoaXMpO30sY29wbGFuYXJQb2ludDpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KTt9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBtMT1uZXcgVEhSRUUuTWF0cml4MygpO3JldHVybiBmdW5jdGlvbihtYXRyaXgsb3B0aW9uYWxOb3JtYWxNYXRyaXgpe3ZhciByZWZlcmVuY2VQb2ludD10aGlzLmNvcGxhbmFyUG9pbnQodjEpLmFwcGx5TWF0cml4NChtYXRyaXgpOy8vIHRyYW5zZm9ybSBub3JtYWwgYmFzZWQgb24gdGhlb3J5IGhlcmU6XG4vLyBodHRwOi8vd3d3LnNvbmdoby5jYS9vcGVuZ2wvZ2xfbm9ybWFsdHJhbnNmb3JtLmh0bWxcbnZhciBub3JtYWxNYXRyaXg9b3B0aW9uYWxOb3JtYWxNYXRyaXh8fG0xLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO3ZhciBub3JtYWw9dGhpcy5ub3JtYWwuYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7Ly8gcmVjYWxjdWxhdGUgY29uc3RhbnQgKGxpa2UgaW4gc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQpXG50aGlzLmNvbnN0YW50PS1yZWZlcmVuY2VQb2ludC5kb3Qobm9ybWFsKTtyZXR1cm4gdGhpczt9O30oKSx0cmFuc2xhdGU6ZnVuY3Rpb24ob2Zmc2V0KXt0aGlzLmNvbnN0YW50PXRoaXMuY29uc3RhbnQtb2Zmc2V0LmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXM7fSxlcXVhbHM6ZnVuY3Rpb24ocGxhbmUpe3JldHVybiBwbGFuZS5ub3JtYWwuZXF1YWxzKHRoaXMubm9ybWFsKSYmcGxhbmUuY29uc3RhbnQ9PT10aGlzLmNvbnN0YW50O319Oy8vIEZpbGU6c3JjL21hdGgvU3BoZXJpY2FsLmpzXG4vKipcclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICpcclxuICogUmVmOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TcGhlcmljYWxfY29vcmRpbmF0ZV9zeXN0ZW1cclxuICpcclxuICogVGhlIHBvbGVzIChwaGkpIGFyZSBhdCB0aGUgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHkgYXhpcy5cclxuICogVGhlIGVxdWF0b3Igc3RhcnRzIGF0IHBvc2l0aXZlIHouXHJcbiAqL1RIUkVFLlNwaGVyaWNhbD1mdW5jdGlvbihyYWRpdXMscGhpLHRoZXRhKXt0aGlzLnJhZGl1cz1yYWRpdXMhPT11bmRlZmluZWQ/cmFkaXVzOjEuMDt0aGlzLnBoaT1waGkhPT11bmRlZmluZWQ/cGhpOjA7Ly8gdXAgLyBkb3duIHRvd2FyZHMgdG9wIGFuZCBib3R0b20gcG9sZVxudGhpcy50aGV0YT10aGV0YSE9PXVuZGVmaW5lZD90aGV0YTowOy8vIGFyb3VuZCB0aGUgZXF1YXRvciBvZiB0aGUgc3BoZXJlXG5yZXR1cm4gdGhpczt9O1RIUkVFLlNwaGVyaWNhbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlNwaGVyaWNhbCxzZXQ6ZnVuY3Rpb24ocmFkaXVzLHBoaSx0aGV0YSl7dGhpcy5yYWRpdXM9cmFkaXVzO3RoaXMucGhpPXBoaTt0aGlzLnRoZXRhPXRoZXRhO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbihvdGhlcil7dGhpcy5yYWRpdXMuY29weShvdGhlci5yYWRpdXMpO3RoaXMucGhpLmNvcHkob3RoZXIucGhpKTt0aGlzLnRoZXRhLmNvcHkob3RoZXIudGhldGEpO3JldHVybiB0aGlzO30sLy8gcmVzdHJpY3QgcGhpIHRvIGJlIGJldHdlZSBFUFMgYW5kIFBJLUVQU1xubWFrZVNhZmU6ZnVuY3Rpb24oKXt2YXIgRVBTPTAuMDAwMDAxO3RoaXMucGhpPU1hdGgubWF4KEVQUyxNYXRoLm1pbihNYXRoLlBJLUVQUyx0aGlzLnBoaSkpO3JldHVybiB0aGlzO30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24odmVjMyl7dGhpcy5yYWRpdXM9dmVjMy5sZW5ndGgoKTtpZih0aGlzLnJhZGl1cz09PTApe3RoaXMudGhldGE9MDt0aGlzLnBoaT0wO31lbHNle3RoaXMudGhldGE9TWF0aC5hdGFuMih2ZWMzLngsdmVjMy56KTsvLyBlcXVhdG9yIGFuZ2xlIGFyb3VuZCB5LXVwIGF4aXNcbnRoaXMucGhpPU1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKHZlYzMueS90aGlzLnJhZGl1cywtMSwxKSk7Ly8gcG9sYXIgYW5nbGVcbn1yZXR1cm4gdGhpczt9fTsvLyBGaWxlOnNyYy9tYXRoL01hdGguanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5NYXRoPXtERUcyUkFEOk1hdGguUEkvMTgwLFJBRDJERUc6MTgwL01hdGguUEksZ2VuZXJhdGVVVUlEOmZ1bmN0aW9uKCl7Ly8gaHR0cDovL3d3dy5icm9vZmEuY29tL1Rvb2xzL01hdGgudXVpZC5odG1cbnZhciBjaGFycz0nMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLnNwbGl0KCcnKTt2YXIgdXVpZD1uZXcgQXJyYXkoMzYpO3ZhciBybmQ9MCxyO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8MzY7aSsrKXtpZihpPT09OHx8aT09PTEzfHxpPT09MTh8fGk9PT0yMyl7dXVpZFtpXT0nLSc7fWVsc2UgaWYoaT09PTE0KXt1dWlkW2ldPSc0Jzt9ZWxzZXtpZihybmQ8PTB4MDIpcm5kPTB4MjAwMDAwMCtNYXRoLnJhbmRvbSgpKjB4MTAwMDAwMHwwO3I9cm5kJjB4ZjtybmQ9cm5kPj40O3V1aWRbaV09Y2hhcnNbaT09PTE5P3ImMHgzfDB4ODpyXTt9fXJldHVybiB1dWlkLmpvaW4oJycpO307fSgpLGNsYW1wOmZ1bmN0aW9uKHZhbHVlLG1pbixtYXgpe3JldHVybiBNYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHZhbHVlKSk7fSwvLyBjb21wdXRlIGV1Y2xpZGlhbiBtb2R1bG8gb2YgbSAlIG5cbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01vZHVsb19vcGVyYXRpb25cbmV1Y2xpZGVhbk1vZHVsbzpmdW5jdGlvbihuLG0pe3JldHVybihuJW0rbSklbTt9LC8vIExpbmVhciBtYXBwaW5nIGZyb20gcmFuZ2UgPGExLCBhMj4gdG8gcmFuZ2UgPGIxLCBiMj5cbm1hcExpbmVhcjpmdW5jdGlvbih4LGExLGEyLGIxLGIyKXtyZXR1cm4gYjErKHgtYTEpKihiMi1iMSkvKGEyLWExKTt9LC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU21vb3Roc3RlcFxuc21vb3Roc3RlcDpmdW5jdGlvbih4LG1pbixtYXgpe2lmKHg8PW1pbilyZXR1cm4gMDtpZih4Pj1tYXgpcmV0dXJuIDE7eD0oeC1taW4pLyhtYXgtbWluKTtyZXR1cm4geCp4KigzLTIqeCk7fSxzbW9vdGhlcnN0ZXA6ZnVuY3Rpb24oeCxtaW4sbWF4KXtpZih4PD1taW4pcmV0dXJuIDA7aWYoeD49bWF4KXJldHVybiAxO3g9KHgtbWluKS8obWF4LW1pbik7cmV0dXJuIHgqeCp4Kih4Kih4KjYtMTUpKzEwKTt9LHJhbmRvbTE2OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRoLnJhbmRvbTE2KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIE1hdGgucmFuZG9tKCkgaW5zdGVhZC4nKTtyZXR1cm4gTWF0aC5yYW5kb20oKTt9LC8vIFJhbmRvbSBpbnRlZ2VyIGZyb20gPGxvdywgaGlnaD4gaW50ZXJ2YWxcbnJhbmRJbnQ6ZnVuY3Rpb24obG93LGhpZ2gpe3JldHVybiBsb3crTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihoaWdoLWxvdysxKSk7fSwvLyBSYW5kb20gZmxvYXQgZnJvbSA8bG93LCBoaWdoPiBpbnRlcnZhbFxucmFuZEZsb2F0OmZ1bmN0aW9uKGxvdyxoaWdoKXtyZXR1cm4gbG93K01hdGgucmFuZG9tKCkqKGhpZ2gtbG93KTt9LC8vIFJhbmRvbSBmbG9hdCBmcm9tIDwtcmFuZ2UvMiwgcmFuZ2UvMj4gaW50ZXJ2YWxcbnJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbihyYW5nZSl7cmV0dXJuIHJhbmdlKigwLjUtTWF0aC5yYW5kb20oKSk7fSxkZWdUb1JhZDpmdW5jdGlvbihkZWdyZWVzKXtyZXR1cm4gZGVncmVlcypUSFJFRS5NYXRoLkRFRzJSQUQ7fSxyYWRUb0RlZzpmdW5jdGlvbihyYWRpYW5zKXtyZXR1cm4gcmFkaWFucypUSFJFRS5NYXRoLlJBRDJERUc7fSxpc1Bvd2VyT2ZUd286ZnVuY3Rpb24odmFsdWUpe3JldHVybih2YWx1ZSZ2YWx1ZS0xKT09PTAmJnZhbHVlIT09MDt9LG5lYXJlc3RQb3dlck9mVHdvOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLnJvdW5kKE1hdGgubG9nKHZhbHVlKS9NYXRoLkxOMikpO30sbmV4dFBvd2VyT2ZUd286ZnVuY3Rpb24odmFsdWUpe3ZhbHVlLS07dmFsdWV8PXZhbHVlPj4xO3ZhbHVlfD12YWx1ZT4+Mjt2YWx1ZXw9dmFsdWU+PjQ7dmFsdWV8PXZhbHVlPj44O3ZhbHVlfD12YWx1ZT4+MTY7dmFsdWUrKztyZXR1cm4gdmFsdWU7fX07Ly8gRmlsZTpzcmMvbWF0aC9TcGxpbmUuanNcbi8qKlxyXG4gKiBTcGxpbmUgZnJvbSBUd2Vlbi5qcywgc2xpZ2h0bHkgb3B0aW1pemVkIChhbmQgdHJhc2hlZClcclxuICogaHR0cDovL3NvbGUuZ2l0aHViLmNvbS90d2Vlbi5qcy9leGFtcGxlcy8wNV9zcGxpbmUuaHRtbFxyXG4gKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5TcGxpbmU9ZnVuY3Rpb24ocG9pbnRzKXt0aGlzLnBvaW50cz1wb2ludHM7dmFyIGM9W10sdjM9e3g6MCx5OjAsejowfSxwb2ludCxpbnRQb2ludCx3ZWlnaHQsdzIsdzMscGEscGIscGMscGQ7dGhpcy5pbml0RnJvbUFycmF5PWZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt0aGlzLnBvaW50c1tpXT17eDphW2ldWzBdLHk6YVtpXVsxXSx6OmFbaV1bMl19O319O3RoaXMuZ2V0UG9pbnQ9ZnVuY3Rpb24oayl7cG9pbnQ9KHRoaXMucG9pbnRzLmxlbmd0aC0xKSprO2ludFBvaW50PU1hdGguZmxvb3IocG9pbnQpO3dlaWdodD1wb2ludC1pbnRQb2ludDtjWzBdPWludFBvaW50PT09MD9pbnRQb2ludDppbnRQb2ludC0xO2NbMV09aW50UG9pbnQ7Y1syXT1pbnRQb2ludD50aGlzLnBvaW50cy5sZW5ndGgtMj90aGlzLnBvaW50cy5sZW5ndGgtMTppbnRQb2ludCsxO2NbM109aW50UG9pbnQ+dGhpcy5wb2ludHMubGVuZ3RoLTM/dGhpcy5wb2ludHMubGVuZ3RoLTE6aW50UG9pbnQrMjtwYT10aGlzLnBvaW50c1tjWzBdXTtwYj10aGlzLnBvaW50c1tjWzFdXTtwYz10aGlzLnBvaW50c1tjWzJdXTtwZD10aGlzLnBvaW50c1tjWzNdXTt3Mj13ZWlnaHQqd2VpZ2h0O3czPXdlaWdodCp3Mjt2My54PWludGVycG9sYXRlKHBhLngscGIueCxwYy54LHBkLngsd2VpZ2h0LHcyLHczKTt2My55PWludGVycG9sYXRlKHBhLnkscGIueSxwYy55LHBkLnksd2VpZ2h0LHcyLHczKTt2My56PWludGVycG9sYXRlKHBhLnoscGIueixwYy56LHBkLnosd2VpZ2h0LHcyLHczKTtyZXR1cm4gdjM7fTt0aGlzLmdldENvbnRyb2xQb2ludHNBcnJheT1mdW5jdGlvbigpe3ZhciBpLHAsbD10aGlzLnBvaW50cy5sZW5ndGgsY29vcmRzPVtdO2ZvcihpPTA7aTxsO2krKyl7cD10aGlzLnBvaW50c1tpXTtjb29yZHNbaV09W3AueCxwLnkscC56XTt9cmV0dXJuIGNvb3Jkczt9Oy8vIGFwcHJveGltYXRlIGxlbmd0aCBieSBzdW1taW5nIGxpbmVhciBzZWdtZW50c1xudGhpcy5nZXRMZW5ndGg9ZnVuY3Rpb24oblN1YkRpdmlzaW9ucyl7dmFyIGksaW5kZXgsblNhbXBsZXMscG9zaXRpb24scG9pbnQ9MCxpbnRQb2ludD0wLG9sZEludFBvaW50PTAsb2xkUG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKSx0bXBWZWM9bmV3IFRIUkVFLlZlY3RvcjMoKSxjaHVua0xlbmd0aHM9W10sdG90YWxMZW5ndGg9MDsvLyBmaXJzdCBwb2ludCBoYXMgMCBsZW5ndGhcbmNodW5rTGVuZ3Roc1swXT0wO2lmKCFuU3ViRGl2aXNpb25zKW5TdWJEaXZpc2lvbnM9MTAwO25TYW1wbGVzPXRoaXMucG9pbnRzLmxlbmd0aCpuU3ViRGl2aXNpb25zO29sZFBvc2l0aW9uLmNvcHkodGhpcy5wb2ludHNbMF0pO2ZvcihpPTE7aTxuU2FtcGxlcztpKyspe2luZGV4PWkvblNhbXBsZXM7cG9zaXRpb249dGhpcy5nZXRQb2ludChpbmRleCk7dG1wVmVjLmNvcHkocG9zaXRpb24pO3RvdGFsTGVuZ3RoKz10bXBWZWMuZGlzdGFuY2VUbyhvbGRQb3NpdGlvbik7b2xkUG9zaXRpb24uY29weShwb3NpdGlvbik7cG9pbnQ9KHRoaXMucG9pbnRzLmxlbmd0aC0xKSppbmRleDtpbnRQb2ludD1NYXRoLmZsb29yKHBvaW50KTtpZihpbnRQb2ludCE9PW9sZEludFBvaW50KXtjaHVua0xlbmd0aHNbaW50UG9pbnRdPXRvdGFsTGVuZ3RoO29sZEludFBvaW50PWludFBvaW50O319Ly8gbGFzdCBwb2ludCBlbmRzIHdpdGggdG90YWwgbGVuZ3RoXG5jaHVua0xlbmd0aHNbY2h1bmtMZW5ndGhzLmxlbmd0aF09dG90YWxMZW5ndGg7cmV0dXJue2NodW5rczpjaHVua0xlbmd0aHMsdG90YWw6dG90YWxMZW5ndGh9O307dGhpcy5yZXBhcmFtZXRyaXplQnlBcmNMZW5ndGg9ZnVuY3Rpb24oc2FtcGxpbmdDb2VmKXt2YXIgaSxqLGluZGV4LGluZGV4Q3VycmVudCxpbmRleE5leHQscmVhbERpc3RhbmNlLHNhbXBsaW5nLHBvc2l0aW9uLG5ld3BvaW50cz1bXSx0bXBWZWM9bmV3IFRIUkVFLlZlY3RvcjMoKSxzbD10aGlzLmdldExlbmd0aCgpO25ld3BvaW50cy5wdXNoKHRtcFZlYy5jb3B5KHRoaXMucG9pbnRzWzBdKS5jbG9uZSgpKTtmb3IoaT0xO2k8dGhpcy5wb2ludHMubGVuZ3RoO2krKyl7Ly90bXBWZWMuY29weSggdGhpcy5wb2ludHNbIGkgLSAxIF0gKTtcbi8vbGluZWFyRGlzdGFuY2UgPSB0bXBWZWMuZGlzdGFuY2VUbyggdGhpcy5wb2ludHNbIGkgXSApO1xucmVhbERpc3RhbmNlPXNsLmNodW5rc1tpXS1zbC5jaHVua3NbaS0xXTtzYW1wbGluZz1NYXRoLmNlaWwoc2FtcGxpbmdDb2VmKnJlYWxEaXN0YW5jZS9zbC50b3RhbCk7aW5kZXhDdXJyZW50PShpLTEpLyh0aGlzLnBvaW50cy5sZW5ndGgtMSk7aW5kZXhOZXh0PWkvKHRoaXMucG9pbnRzLmxlbmd0aC0xKTtmb3Ioaj0xO2o8c2FtcGxpbmctMTtqKyspe2luZGV4PWluZGV4Q3VycmVudCtqKigxL3NhbXBsaW5nKSooaW5kZXhOZXh0LWluZGV4Q3VycmVudCk7cG9zaXRpb249dGhpcy5nZXRQb2ludChpbmRleCk7bmV3cG9pbnRzLnB1c2godG1wVmVjLmNvcHkocG9zaXRpb24pLmNsb25lKCkpO31uZXdwb2ludHMucHVzaCh0bXBWZWMuY29weSh0aGlzLnBvaW50c1tpXSkuY2xvbmUoKSk7fXRoaXMucG9pbnRzPW5ld3BvaW50czt9Oy8vIENhdG11bGwtUm9tXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZShwMCxwMSxwMixwMyx0LHQyLHQzKXt2YXIgdjA9KHAyLXAwKSowLjUsdjE9KHAzLXAxKSowLjU7cmV0dXJuKDIqKHAxLXAyKSt2MCt2MSkqdDMrKC0zKihwMS1wMiktMip2MC12MSkqdDIrdjAqdCtwMTt9fTsvLyBGaWxlOnNyYy9tYXRoL1RyaWFuZ2xlLmpzXG4vKipcclxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5UcmlhbmdsZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5hPWEhPT11bmRlZmluZWQ/YTpuZXcgVEhSRUUuVmVjdG9yMygpO3RoaXMuYj1iIT09dW5kZWZpbmVkP2I6bmV3IFRIUkVFLlZlY3RvcjMoKTt0aGlzLmM9YyE9PXVuZGVmaW5lZD9jOm5ldyBUSFJFRS5WZWN0b3IzKCk7fTtUSFJFRS5UcmlhbmdsZS5ub3JtYWw9ZnVuY3Rpb24oKXt2YXIgdjA9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsb3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5WZWN0b3IzKCk7cmVzdWx0LnN1YlZlY3RvcnMoYyxiKTt2MC5zdWJWZWN0b3JzKGEsYik7cmVzdWx0LmNyb3NzKHYwKTt2YXIgcmVzdWx0TGVuZ3RoU3E9cmVzdWx0Lmxlbmd0aFNxKCk7aWYocmVzdWx0TGVuZ3RoU3E+MCl7cmV0dXJuIHJlc3VsdC5tdWx0aXBseVNjYWxhcigxL01hdGguc3FydChyZXN1bHRMZW5ndGhTcSkpO31yZXR1cm4gcmVzdWx0LnNldCgwLDAsMCk7fTt9KCk7Ly8gc3RhdGljL2luc3RhbmNlIG1ldGhvZCB0byBjYWxjdWxhdGUgYmFyeWNlbnRyaWMgY29vcmRpbmF0ZXNcbi8vIGJhc2VkIG9uOiBodHRwOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcG9pbnRpbnBvbHkvZGVmYXVsdC5odG1sXG5USFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQ9ZnVuY3Rpb24oKXt2YXIgdjA9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjI9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24ocG9pbnQsYSxiLGMsb3B0aW9uYWxUYXJnZXQpe3YwLnN1YlZlY3RvcnMoYyxhKTt2MS5zdWJWZWN0b3JzKGIsYSk7djIuc3ViVmVjdG9ycyhwb2ludCxhKTt2YXIgZG90MDA9djAuZG90KHYwKTt2YXIgZG90MDE9djAuZG90KHYxKTt2YXIgZG90MDI9djAuZG90KHYyKTt2YXIgZG90MTE9djEuZG90KHYxKTt2YXIgZG90MTI9djEuZG90KHYyKTt2YXIgZGVub209ZG90MDAqZG90MTEtZG90MDEqZG90MDE7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTsvLyBjb2xsaW5lYXIgb3Igc2luZ3VsYXIgdHJpYW5nbGVcbmlmKGRlbm9tPT09MCl7Ly8gYXJiaXRyYXJ5IGxvY2F0aW9uIG91dHNpZGUgb2YgdHJpYW5nbGU/XG4vLyBub3Qgc3VyZSBpZiB0aGlzIGlzIHRoZSBiZXN0IGlkZWEsIG1heWJlIHNob3VsZCBiZSByZXR1cm5pbmcgdW5kZWZpbmVkXG5yZXR1cm4gcmVzdWx0LnNldCgtMiwtMSwtMSk7fXZhciBpbnZEZW5vbT0xL2Rlbm9tO3ZhciB1PShkb3QxMSpkb3QwMi1kb3QwMSpkb3QxMikqaW52RGVub207dmFyIHY9KGRvdDAwKmRvdDEyLWRvdDAxKmRvdDAyKSppbnZEZW5vbTsvLyBiYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBtdXN0IGFsd2F5cyBzdW0gdG8gMVxucmV0dXJuIHJlc3VsdC5zZXQoMS11LXYsdix1KTt9O30oKTtUSFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKHBvaW50LGEsYixjKXt2YXIgcmVzdWx0PVRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChwb2ludCxhLGIsYyx2MSk7cmV0dXJuIHJlc3VsdC54Pj0wJiZyZXN1bHQueT49MCYmcmVzdWx0LngrcmVzdWx0Lnk8PTE7fTt9KCk7VEhSRUUuVHJpYW5nbGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5UcmlhbmdsZSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzO30sc2V0RnJvbVBvaW50c0FuZEluZGljZXM6ZnVuY3Rpb24ocG9pbnRzLGkwLGkxLGkyKXt0aGlzLmEuY29weShwb2ludHNbaTBdKTt0aGlzLmIuY29weShwb2ludHNbaTFdKTt0aGlzLmMuY29weShwb2ludHNbaTJdKTtyZXR1cm4gdGhpczt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24odHJpYW5nbGUpe3RoaXMuYS5jb3B5KHRyaWFuZ2xlLmEpO3RoaXMuYi5jb3B5KHRyaWFuZ2xlLmIpO3RoaXMuYy5jb3B5KHRyaWFuZ2xlLmMpO3JldHVybiB0aGlzO30sYXJlYTpmdW5jdGlvbigpe3ZhciB2MD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbigpe3YwLnN1YlZlY3RvcnModGhpcy5jLHRoaXMuYik7djEuc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKTtyZXR1cm4gdjAuY3Jvc3ModjEpLmxlbmd0aCgpKjAuNTt9O30oKSxtaWRwb2ludDpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gcmVzdWx0LmFkZFZlY3RvcnModGhpcy5hLHRoaXMuYikuYWRkKHRoaXMuYykubXVsdGlwbHlTY2FsYXIoMS8zKTt9LG5vcm1hbDpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLm5vcm1hbCh0aGlzLmEsdGhpcy5iLHRoaXMuYyxvcHRpb25hbFRhcmdldCk7fSxwbGFuZTpmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlBsYW5lKCk7cmV0dXJuIHJlc3VsdC5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpO30sYmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKHBvaW50LG9wdGlvbmFsVGFyZ2V0KXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jLG9wdGlvbmFsVGFyZ2V0KTt9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24ocG9pbnQpe3JldHVybiBUSFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50KHBvaW50LHRoaXMuYSx0aGlzLmIsdGhpcy5jKTt9LGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgcGxhbmUsZWRnZUxpc3QscHJvamVjdGVkUG9pbnQsY2xvc2VzdFBvaW50O3JldHVybiBmdW5jdGlvbiBjbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50LG9wdGlvbmFsVGFyZ2V0KXtpZihwbGFuZT09PXVuZGVmaW5lZCl7cGxhbmU9bmV3IFRIUkVFLlBsYW5lKCk7ZWRnZUxpc3Q9W25ldyBUSFJFRS5MaW5lMygpLG5ldyBUSFJFRS5MaW5lMygpLG5ldyBUSFJFRS5MaW5lMygpXTtwcm9qZWN0ZWRQb2ludD1uZXcgVEhSRUUuVmVjdG9yMygpO2Nsb3Nlc3RQb2ludD1uZXcgVEhSRUUuVmVjdG9yMygpO312YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBtaW5EaXN0YW5jZT1JbmZpbml0eTsvLyBwcm9qZWN0IHRoZSBwb2ludCBvbnRvIHRoZSBwbGFuZSBvZiB0aGUgdHJpYW5nbGVcbnBsYW5lLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyk7cGxhbmUucHJvamVjdFBvaW50KHBvaW50LHByb2plY3RlZFBvaW50KTsvLyBjaGVjayBpZiB0aGUgcHJvamVjdGlvbiBsaWVzIHdpdGhpbiB0aGUgdHJpYW5nbGVcbmlmKHRoaXMuY29udGFpbnNQb2ludChwcm9qZWN0ZWRQb2ludCk9PT10cnVlKXsvLyBpZiBzbywgdGhpcyBpcyB0aGUgY2xvc2VzdCBwb2ludFxucmVzdWx0LmNvcHkocHJvamVjdGVkUG9pbnQpO31lbHNley8vIGlmIG5vdCwgdGhlIHBvaW50IGZhbGxzIG91dHNpZGUgdGhlIHRyaWFuZ2xlLiB0aGUgcmVzdWx0IGlzIHRoZSBjbG9zZXN0IHBvaW50IHRvIHRoZSB0cmlhbmdsZSdzIGVkZ2VzIG9yIHZlcnRpY2VzXG5lZGdlTGlzdFswXS5zZXQodGhpcy5hLHRoaXMuYik7ZWRnZUxpc3RbMV0uc2V0KHRoaXMuYix0aGlzLmMpO2VkZ2VMaXN0WzJdLnNldCh0aGlzLmMsdGhpcy5hKTtmb3IodmFyIGk9MDtpPGVkZ2VMaXN0Lmxlbmd0aDtpKyspe2VkZ2VMaXN0W2ldLmNsb3Nlc3RQb2ludFRvUG9pbnQocHJvamVjdGVkUG9pbnQsdHJ1ZSxjbG9zZXN0UG9pbnQpO3ZhciBkaXN0YW5jZT1wcm9qZWN0ZWRQb2ludC5kaXN0YW5jZVRvU3F1YXJlZChjbG9zZXN0UG9pbnQpO2lmKGRpc3RhbmNlPG1pbkRpc3RhbmNlKXttaW5EaXN0YW5jZT1kaXN0YW5jZTtyZXN1bHQuY29weShjbG9zZXN0UG9pbnQpO319fXJldHVybiByZXN1bHQ7fTt9KCksZXF1YWxzOmZ1bmN0aW9uKHRyaWFuZ2xlKXtyZXR1cm4gdHJpYW5nbGUuYS5lcXVhbHModGhpcy5hKSYmdHJpYW5nbGUuYi5lcXVhbHModGhpcy5iKSYmdHJpYW5nbGUuYy5lcXVhbHModGhpcy5jKTt9fTsvLyBGaWxlOnNyYy9tYXRoL0ludGVycG9sYW50LmpzXG4vKipcclxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBvZiBpbnRlcnBvbGFudHMgb3ZlciBwYXJhbWV0cmljIHNhbXBsZXMuXHJcbiAqXHJcbiAqIFRoZSBwYXJhbWV0ZXIgZG9tYWluIGlzIG9uZSBkaW1lbnNpb25hbCwgdHlwaWNhbGx5IHRoZSB0aW1lIG9yIGEgcGF0aFxyXG4gKiBhbG9uZyBhIGN1cnZlIGRlZmluZWQgYnkgdGhlIGRhdGEuXHJcbiAqXHJcbiAqIFRoZSBzYW1wbGUgdmFsdWVzIGNhbiBoYXZlIGFueSBkaW1lbnNpb25hbGl0eSBhbmQgZGVyaXZlZCBjbGFzc2VzIG1heVxyXG4gKiBhcHBseSBzcGVjaWFsIGludGVycHJldGF0aW9ucyB0byB0aGUgZGF0YS5cclxuICpcclxuICogVGhpcyBjbGFzcyBwcm92aWRlcyB0aGUgaW50ZXJ2YWwgc2VlayBpbiBhIFRlbXBsYXRlIE1ldGhvZCwgZGVmZXJyaW5nXHJcbiAqIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiB0byBkZXJpdmVkIGNsYXNzZXMuXHJcbiAqXHJcbiAqIFRpbWUgY29tcGxleGl0eSBpcyBPKDEpIGZvciBsaW5lYXIgYWNjZXNzIGNyb3NzaW5nIGF0IG1vc3QgdHdvIHBvaW50c1xyXG4gKiBhbmQgTyhsb2cgTikgZm9yIHJhbmRvbSBhY2Nlc3MsIHdoZXJlIE4gaXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMuXHJcbiAqXHJcbiAqIFJlZmVyZW5jZXM6XHJcbiAqXHJcbiAqIFx0XHRodHRwOi8vd3d3Lm9vZGVzaWduLmNvbS90ZW1wbGF0ZS1tZXRob2QtcGF0dGVybi5odG1sXHJcbiAqXHJcbiAqIEBhdXRob3IgdHNjaHdcclxuICovVEhSRUUuSW50ZXJwb2xhbnQ9ZnVuY3Rpb24ocGFyYW1ldGVyUG9zaXRpb25zLHNhbXBsZVZhbHVlcyxzYW1wbGVTaXplLHJlc3VsdEJ1ZmZlcil7dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM9cGFyYW1ldGVyUG9zaXRpb25zO3RoaXMuX2NhY2hlZEluZGV4PTA7dGhpcy5yZXN1bHRCdWZmZXI9cmVzdWx0QnVmZmVyIT09dW5kZWZpbmVkP3Jlc3VsdEJ1ZmZlcjpuZXcgc2FtcGxlVmFsdWVzLmNvbnN0cnVjdG9yKHNhbXBsZVNpemUpO3RoaXMuc2FtcGxlVmFsdWVzPXNhbXBsZVZhbHVlczt0aGlzLnZhbHVlU2l6ZT1zYW1wbGVTaXplO307VEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5JbnRlcnBvbGFudCxldmFsdWF0ZTpmdW5jdGlvbih0KXt2YXIgcHA9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsaTE9dGhpcy5fY2FjaGVkSW5kZXgsdDE9cHBbaTFdLHQwPXBwW2kxLTFdO3ZhbGlkYXRlX2ludGVydmFsOntzZWVrOnt2YXIgcmlnaHQ7bGluZWFyX3NjYW46ey8vLSBTZWUgaHR0cDovL2pzcGVyZi5jb20vY29tcGFyaXNvbi10by11bmRlZmluZWQvM1xuLy8tIHNsb3dlciBjb2RlOlxuLy8tXG4vLy0gXHRcdFx0XHRpZiAoIHQgPj0gdDEgfHwgdDEgPT09IHVuZGVmaW5lZCApIHtcbmZvcndhcmRfc2NhbjppZighKHQ8dDEpKXtmb3IodmFyIGdpdmVVcEF0PWkxKzI7Oyl7aWYodDE9PT11bmRlZmluZWQpe2lmKHQ8dDApYnJlYWsgZm9yd2FyZF9zY2FuOy8vIGFmdGVyIGVuZFxuaTE9cHAubGVuZ3RoO3RoaXMuX2NhY2hlZEluZGV4PWkxO3JldHVybiB0aGlzLmFmdGVyRW5kXyhpMS0xLHQsdDApO31pZihpMT09PWdpdmVVcEF0KWJyZWFrOy8vIHRoaXMgbG9vcFxudDA9dDE7dDE9cHBbKytpMV07aWYodDx0MSl7Ly8gd2UgaGF2ZSBhcnJpdmVkIGF0IHRoZSBzb3VnaHQgaW50ZXJ2YWxcbmJyZWFrIHNlZWs7fX0vLyBwcmVwYXJlIGJpbmFyeSBzZWFyY2ggb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIGluZGV4XG5yaWdodD1wcC5sZW5ndGg7YnJlYWsgbGluZWFyX3NjYW47fS8vLSBzbG93ZXIgY29kZTpcbi8vLVx0XHRcdFx0XHRpZiAoIHQgPCB0MCB8fCB0MCA9PT0gdW5kZWZpbmVkICkge1xuaWYoISh0Pj10MCkpey8vIGxvb3Bpbmc/XG52YXIgdDFnbG9iYWw9cHBbMV07aWYodDx0MWdsb2JhbCl7aTE9MjsvLyArIDEsIHVzaW5nIHRoZSBzY2FuIGZvciB0aGUgZGV0YWlsc1xudDA9dDFnbG9iYWw7fS8vIGxpbmVhciByZXZlcnNlIHNjYW5cbmZvcih2YXIgZ2l2ZVVwQXQ9aTEtMjs7KXtpZih0MD09PXVuZGVmaW5lZCl7Ly8gYmVmb3JlIHN0YXJ0XG50aGlzLl9jYWNoZWRJbmRleD0wO3JldHVybiB0aGlzLmJlZm9yZVN0YXJ0XygwLHQsdDEpO31pZihpMT09PWdpdmVVcEF0KWJyZWFrOy8vIHRoaXMgbG9vcFxudDE9dDA7dDA9cHBbLS1pMS0xXTtpZih0Pj10MCl7Ly8gd2UgaGF2ZSBhcnJpdmVkIGF0IHRoZSBzb3VnaHQgaW50ZXJ2YWxcbmJyZWFrIHNlZWs7fX0vLyBwcmVwYXJlIGJpbmFyeSBzZWFyY2ggb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgaW5kZXhcbnJpZ2h0PWkxO2kxPTA7YnJlYWsgbGluZWFyX3NjYW47fS8vIHRoZSBpbnRlcnZhbCBpcyB2YWxpZFxuYnJlYWsgdmFsaWRhdGVfaW50ZXJ2YWw7fS8vIGxpbmVhciBzY2FuXG4vLyBiaW5hcnkgc2VhcmNoXG53aGlsZShpMTxyaWdodCl7dmFyIG1pZD1pMStyaWdodD4+PjE7aWYodDxwcFttaWRdKXtyaWdodD1taWQ7fWVsc2V7aTE9bWlkKzE7fX10MT1wcFtpMV07dDA9cHBbaTEtMV07Ly8gY2hlY2sgYm91bmRhcnkgY2FzZXMsIGFnYWluXG5pZih0MD09PXVuZGVmaW5lZCl7dGhpcy5fY2FjaGVkSW5kZXg9MDtyZXR1cm4gdGhpcy5iZWZvcmVTdGFydF8oMCx0LHQxKTt9aWYodDE9PT11bmRlZmluZWQpe2kxPXBwLmxlbmd0aDt0aGlzLl9jYWNoZWRJbmRleD1pMTtyZXR1cm4gdGhpcy5hZnRlckVuZF8oaTEtMSx0MCx0KTt9fS8vIHNlZWtcbnRoaXMuX2NhY2hlZEluZGV4PWkxO3RoaXMuaW50ZXJ2YWxDaGFuZ2VkXyhpMSx0MCx0MSk7fS8vIHZhbGlkYXRlX2ludGVydmFsXG5yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8oaTEsdDAsdCx0MSk7fSxzZXR0aW5nczpudWxsLC8vIG9wdGlvbmFsLCBzdWJjbGFzcy1zcGVjaWZpYyBzZXR0aW5ncyBzdHJ1Y3R1cmVcbi8vIE5vdGU6IFRoZSBpbmRpcmVjdGlvbiBhbGxvd3MgY2VudHJhbCBjb250cm9sIG9mIG1hbnkgaW50ZXJwb2xhbnRzLlxuLy8gLS0tIFByb3RlY3RlZCBpbnRlcmZhY2VcbkRlZmF1bHRTZXR0aW5nc186e30sZ2V0U2V0dGluZ3NfOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3N8fHRoaXMuRGVmYXVsdFNldHRpbmdzXzt9LGNvcHlTYW1wbGVWYWx1ZV86ZnVuY3Rpb24oaW5kZXgpey8vIGNvcGllcyBhIHNhbXBsZSB2YWx1ZSB0byB0aGUgcmVzdWx0IGJ1ZmZlclxudmFyIHJlc3VsdD10aGlzLnJlc3VsdEJ1ZmZlcix2YWx1ZXM9dGhpcy5zYW1wbGVWYWx1ZXMsc3RyaWRlPXRoaXMudmFsdWVTaXplLG9mZnNldD1pbmRleCpzdHJpZGU7Zm9yKHZhciBpPTA7aSE9PXN0cmlkZTsrK2kpe3Jlc3VsdFtpXT12YWx1ZXNbb2Zmc2V0K2ldO31yZXR1cm4gcmVzdWx0O30sLy8gVGVtcGxhdGUgbWV0aG9kcyBmb3IgZGVyaXZlZCBjbGFzc2VzOlxuaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGkxLHQwLHQsdDEpe3Rocm93IG5ldyBFcnJvcihcImNhbGwgdG8gYWJzdHJhY3QgbWV0aG9kXCIpOy8vIGltcGxlbWVudGF0aW9ucyBzaGFsbCByZXR1cm4gdGhpcy5yZXN1bHRCdWZmZXJcbn0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbihpMSx0MCx0MSl7Ly8gZW1wdHlcbn19O09iamVjdC5hc3NpZ24oVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlLHtiZWZvcmVTdGFydF86Ly8oIDAsIHQsIHQwICksIHJldHVybnMgdGhpcy5yZXN1bHRCdWZmZXJcblRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLGFmdGVyRW5kXzovLyggTi0xLCB0Ti0xLCB0ICksIHJldHVybnMgdGhpcy5yZXN1bHRCdWZmZXJcblRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVffSk7Ly8gRmlsZTpzcmMvbWF0aC9pbnRlcnBvbGFudHMvQ3ViaWNJbnRlcnBvbGFudC5qc1xuLyoqXHJcbiAqIEZhc3QgYW5kIHNpbXBsZSBjdWJpYyBzcGxpbmUgaW50ZXJwb2xhbnQuXHJcbiAqXHJcbiAqIEl0IHdhcyBkZXJpdmVkIGZyb20gYSBIZXJtaXRpYW4gY29uc3RydWN0aW9uIHNldHRpbmcgdGhlIGZpcnN0IGRlcml2YXRpdmVcclxuICogYXQgZWFjaCBzYW1wbGUgcG9zaXRpb24gdG8gdGhlIGxpbmVhciBzbG9wZSBiZXR3ZWVuIG5laWdoYm9yaW5nIHBvc2l0aW9uc1xyXG4gKiBvdmVyIHRoZWlyIHBhcmFtZXRlciBpbnRlcnZhbC5cclxuICpcclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5DdWJpY0ludGVycG9sYW50PWZ1bmN0aW9uKHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpe1RIUkVFLkludGVycG9sYW50LmNhbGwodGhpcyxwYXJhbWV0ZXJQb3NpdGlvbnMsc2FtcGxlVmFsdWVzLHNhbXBsZVNpemUscmVzdWx0QnVmZmVyKTt0aGlzLl93ZWlnaHRQcmV2PS0wO3RoaXMuX29mZnNldFByZXY9LTA7dGhpcy5fd2VpZ2h0TmV4dD0tMDt0aGlzLl9vZmZzZXROZXh0PS0wO307VEhSRUUuQ3ViaWNJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkN1YmljSW50ZXJwb2xhbnQsRGVmYXVsdFNldHRpbmdzXzp7ZW5kaW5nU3RhcnQ6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZyxlbmRpbmdFbmQ6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZ30saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbihpMSx0MCx0MSl7dmFyIHBwPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLGlQcmV2PWkxLTIsaU5leHQ9aTErMSx0UHJldj1wcFtpUHJldl0sdE5leHQ9cHBbaU5leHRdO2lmKHRQcmV2PT09dW5kZWZpbmVkKXtzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdTdGFydCl7Y2FzZSBUSFJFRS5aZXJvU2xvcGVFbmRpbmc6Ly8gZicodDApID0gMFxuaVByZXY9aTE7dFByZXY9Mip0MC10MTticmVhaztjYXNlIFRIUkVFLldyYXBBcm91bmRFbmRpbmc6Ly8gdXNlIHRoZSBvdGhlciBlbmQgb2YgdGhlIGN1cnZlXG5pUHJldj1wcC5sZW5ndGgtMjt0UHJldj10MCtwcFtpUHJldl0tcHBbaVByZXYrMV07YnJlYWs7ZGVmYXVsdDovLyBaZXJvQ3VydmF0dXJlRW5kaW5nXG4vLyBmJycodDApID0gMCBhLmsuYS4gTmF0dXJhbCBTcGxpbmVcbmlQcmV2PWkxO3RQcmV2PXQxO319aWYodE5leHQ9PT11bmRlZmluZWQpe3N3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ0VuZCl7Y2FzZSBUSFJFRS5aZXJvU2xvcGVFbmRpbmc6Ly8gZicodE4pID0gMFxuaU5leHQ9aTE7dE5leHQ9Mip0MS10MDticmVhaztjYXNlIFRIUkVFLldyYXBBcm91bmRFbmRpbmc6Ly8gdXNlIHRoZSBvdGhlciBlbmQgb2YgdGhlIGN1cnZlXG5pTmV4dD0xO3ROZXh0PXQxK3BwWzFdLXBwWzBdO2JyZWFrO2RlZmF1bHQ6Ly8gWmVyb0N1cnZhdHVyZUVuZGluZ1xuLy8gZicnKHROKSA9IDAsIGEuay5hLiBOYXR1cmFsIFNwbGluZVxuaU5leHQ9aTEtMTt0TmV4dD10MDt9fXZhciBoYWxmRHQ9KHQxLXQwKSowLjUsc3RyaWRlPXRoaXMudmFsdWVTaXplO3RoaXMuX3dlaWdodFByZXY9aGFsZkR0Lyh0MC10UHJldik7dGhpcy5fd2VpZ2h0TmV4dD1oYWxmRHQvKHROZXh0LXQxKTt0aGlzLl9vZmZzZXRQcmV2PWlQcmV2KnN0cmlkZTt0aGlzLl9vZmZzZXROZXh0PWlOZXh0KnN0cmlkZTt9LGludGVycG9sYXRlXzpmdW5jdGlvbihpMSx0MCx0LHQxKXt2YXIgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsbzE9aTEqc3RyaWRlLG8wPW8xLXN0cmlkZSxvUD10aGlzLl9vZmZzZXRQcmV2LG9OPXRoaXMuX29mZnNldE5leHQsd1A9dGhpcy5fd2VpZ2h0UHJldix3Tj10aGlzLl93ZWlnaHROZXh0LHA9KHQtdDApLyh0MS10MCkscHA9cCpwLHBwcD1wcCpwOy8vIGV2YWx1YXRlIHBvbHlub21pYWxzXG52YXIgc1A9LXdQKnBwcCsyKndQKnBwLXdQKnA7dmFyIHMwPSgxK3dQKSpwcHArKC0xLjUtMip3UCkqcHArKC0wLjUrd1ApKnArMTt2YXIgczE9KC0xLXdOKSpwcHArKDEuNSt3TikqcHArMC41KnA7dmFyIHNOPXdOKnBwcC13TipwcDsvLyBjb21iaW5lIGRhdGEgbGluZWFybHlcbmZvcih2YXIgaT0wO2khPT1zdHJpZGU7KytpKXtyZXN1bHRbaV09c1AqdmFsdWVzW29QK2ldK3MwKnZhbHVlc1tvMCtpXStzMSp2YWx1ZXNbbzEraV0rc04qdmFsdWVzW29OK2ldO31yZXR1cm4gcmVzdWx0O319KTsvLyBGaWxlOnNyYy9tYXRoL2ludGVycG9sYW50cy9EaXNjcmV0ZUludGVycG9sYW50LmpzXG4vKipcclxuICpcclxuICogSW50ZXJwb2xhbnQgdGhhdCBldmFsdWF0ZXMgdG8gdGhlIHNhbXBsZSB2YWx1ZSBhdCB0aGUgcG9zaXRpb24gcHJlY2VlZGluZ1xyXG4gKiB0aGUgcGFyYW1ldGVyLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLkRpc2NyZXRlSW50ZXJwb2xhbnQ9ZnVuY3Rpb24ocGFyYW1ldGVyUG9zaXRpb25zLHNhbXBsZVZhbHVlcyxzYW1wbGVTaXplLHJlc3VsdEJ1ZmZlcil7VEhSRUUuSW50ZXJwb2xhbnQuY2FsbCh0aGlzLHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpO307VEhSRUUuRGlzY3JldGVJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkRpc2NyZXRlSW50ZXJwb2xhbnQsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGkxLHQwLHQsdDEpe3JldHVybiB0aGlzLmNvcHlTYW1wbGVWYWx1ZV8oaTEtMSk7fX0pOy8vIEZpbGU6c3JjL21hdGgvaW50ZXJwb2xhbnRzL0xpbmVhckludGVycG9sYW50LmpzXG4vKipcclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5MaW5lYXJJbnRlcnBvbGFudD1mdW5jdGlvbihwYXJhbWV0ZXJQb3NpdGlvbnMsc2FtcGxlVmFsdWVzLHNhbXBsZVNpemUscmVzdWx0QnVmZmVyKXtUSFJFRS5JbnRlcnBvbGFudC5jYWxsKHRoaXMscGFyYW1ldGVyUG9zaXRpb25zLHNhbXBsZVZhbHVlcyxzYW1wbGVTaXplLHJlc3VsdEJ1ZmZlcik7fTtUSFJFRS5MaW5lYXJJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkxpbmVhckludGVycG9sYW50LGludGVycG9sYXRlXzpmdW5jdGlvbihpMSx0MCx0LHQxKXt2YXIgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsb2Zmc2V0MT1pMSpzdHJpZGUsb2Zmc2V0MD1vZmZzZXQxLXN0cmlkZSx3ZWlnaHQxPSh0LXQwKS8odDEtdDApLHdlaWdodDA9MS13ZWlnaHQxO2Zvcih2YXIgaT0wO2khPT1zdHJpZGU7KytpKXtyZXN1bHRbaV09dmFsdWVzW29mZnNldDAraV0qd2VpZ2h0MCt2YWx1ZXNbb2Zmc2V0MStpXSp3ZWlnaHQxO31yZXR1cm4gcmVzdWx0O319KTsvLyBGaWxlOnNyYy9tYXRoL2ludGVycG9sYW50cy9RdWF0ZXJuaW9uTGluZWFySW50ZXJwb2xhbnQuanNcbi8qKlxyXG4gKiBTcGhlcmljYWwgbGluZWFyIHVuaXQgcXVhdGVybmlvbiBpbnRlcnBvbGFudC5cclxuICpcclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5RdWF0ZXJuaW9uTGluZWFySW50ZXJwb2xhbnQ9ZnVuY3Rpb24ocGFyYW1ldGVyUG9zaXRpb25zLHNhbXBsZVZhbHVlcyxzYW1wbGVTaXplLHJlc3VsdEJ1ZmZlcil7VEhSRUUuSW50ZXJwb2xhbnQuY2FsbCh0aGlzLHBhcmFtZXRlclBvc2l0aW9ucyxzYW1wbGVWYWx1ZXMsc2FtcGxlU2l6ZSxyZXN1bHRCdWZmZXIpO307VEhSRUUuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50LGludGVycG9sYXRlXzpmdW5jdGlvbihpMSx0MCx0LHQxKXt2YXIgcmVzdWx0PXRoaXMucmVzdWx0QnVmZmVyLHZhbHVlcz10aGlzLnNhbXBsZVZhbHVlcyxzdHJpZGU9dGhpcy52YWx1ZVNpemUsb2Zmc2V0PWkxKnN0cmlkZSxhbHBoYT0odC10MCkvKHQxLXQwKTtmb3IodmFyIGVuZD1vZmZzZXQrc3RyaWRlO29mZnNldCE9PWVuZDtvZmZzZXQrPTQpe1RIUkVFLlF1YXRlcm5pb24uc2xlcnBGbGF0KHJlc3VsdCwwLHZhbHVlcyxvZmZzZXQtc3RyaWRlLHZhbHVlcyxvZmZzZXQsYWxwaGEpO31yZXR1cm4gcmVzdWx0O319KTsvLyBGaWxlOnNyYy9jb3JlL0Nsb2NrLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuQ2xvY2s9ZnVuY3Rpb24oYXV0b1N0YXJ0KXt0aGlzLmF1dG9TdGFydD1hdXRvU3RhcnQhPT11bmRlZmluZWQ/YXV0b1N0YXJ0OnRydWU7dGhpcy5zdGFydFRpbWU9MDt0aGlzLm9sZFRpbWU9MDt0aGlzLmVsYXBzZWRUaW1lPTA7dGhpcy5ydW5uaW5nPWZhbHNlO307VEhSRUUuQ2xvY2sucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5DbG9jayxzdGFydDpmdW5jdGlvbigpe3RoaXMuc3RhcnRUaW1lPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCk7dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lO3RoaXMucnVubmluZz10cnVlO30sc3RvcDpmdW5jdGlvbigpe3RoaXMuZ2V0RWxhcHNlZFRpbWUoKTt0aGlzLnJ1bm5pbmc9ZmFsc2U7fSxnZXRFbGFwc2VkVGltZTpmdW5jdGlvbigpe3RoaXMuZ2V0RGVsdGEoKTtyZXR1cm4gdGhpcy5lbGFwc2VkVGltZTt9LGdldERlbHRhOmZ1bmN0aW9uKCl7dmFyIGRpZmY9MDtpZih0aGlzLmF1dG9TdGFydCYmIXRoaXMucnVubmluZyl7dGhpcy5zdGFydCgpO31pZih0aGlzLnJ1bm5pbmcpe3ZhciBuZXdUaW1lPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCk7ZGlmZj0obmV3VGltZS10aGlzLm9sZFRpbWUpLzEwMDA7dGhpcy5vbGRUaW1lPW5ld1RpbWU7dGhpcy5lbGFwc2VkVGltZSs9ZGlmZjt9cmV0dXJuIGRpZmY7fX07Ly8gRmlsZTpzcmMvY29yZS9FdmVudERpc3BhdGNoZXIuanNcbi8qKlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL2V2ZW50ZGlzcGF0Y2hlci5qcy9cclxuICovVEhSRUUuRXZlbnREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7fTtPYmplY3QuYXNzaWduKFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odHlwZSxsaXN0ZW5lcil7aWYodGhpcy5fbGlzdGVuZXJzPT09dW5kZWZpbmVkKXRoaXMuX2xpc3RlbmVycz17fTt2YXIgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVycztpZihsaXN0ZW5lcnNbdHlwZV09PT11bmRlZmluZWQpe2xpc3RlbmVyc1t0eXBlXT1bXTt9aWYobGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpPT09LTEpe2xpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTt9fSxoYXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHR5cGUsbGlzdGVuZXIpe2lmKHRoaXMuX2xpc3RlbmVycz09PXVuZGVmaW5lZClyZXR1cm4gZmFsc2U7dmFyIGxpc3RlbmVycz10aGlzLl9saXN0ZW5lcnM7aWYobGlzdGVuZXJzW3R5cGVdIT09dW5kZWZpbmVkJiZsaXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcikhPT0tMSl7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odHlwZSxsaXN0ZW5lcil7aWYodGhpcy5fbGlzdGVuZXJzPT09dW5kZWZpbmVkKXJldHVybjt2YXIgbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVyczt2YXIgbGlzdGVuZXJBcnJheT1saXN0ZW5lcnNbdHlwZV07aWYobGlzdGVuZXJBcnJheSE9PXVuZGVmaW5lZCl7dmFyIGluZGV4PWxpc3RlbmVyQXJyYXkuaW5kZXhPZihsaXN0ZW5lcik7aWYoaW5kZXghPT0tMSl7bGlzdGVuZXJBcnJheS5zcGxpY2UoaW5kZXgsMSk7fX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oZXZlbnQpe2lmKHRoaXMuX2xpc3RlbmVycz09PXVuZGVmaW5lZClyZXR1cm47dmFyIGxpc3RlbmVycz10aGlzLl9saXN0ZW5lcnM7dmFyIGxpc3RlbmVyQXJyYXk9bGlzdGVuZXJzW2V2ZW50LnR5cGVdO2lmKGxpc3RlbmVyQXJyYXkhPT11bmRlZmluZWQpe2V2ZW50LnRhcmdldD10aGlzO3ZhciBhcnJheT1bXSxpPTA7dmFyIGxlbmd0aD1saXN0ZW5lckFycmF5Lmxlbmd0aDtmb3IoaT0wO2k8bGVuZ3RoO2krKyl7YXJyYXlbaV09bGlzdGVuZXJBcnJheVtpXTt9Zm9yKGk9MDtpPGxlbmd0aDtpKyspe2FycmF5W2ldLmNhbGwodGhpcyxldmVudCk7fX19fSk7Ly8gRmlsZTpzcmMvY29yZS9MYXllcnMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5MYXllcnM9ZnVuY3Rpb24oKXt0aGlzLm1hc2s9MTt9O1RIUkVFLkxheWVycy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkxheWVycyxzZXQ6ZnVuY3Rpb24oY2hhbm5lbCl7dGhpcy5tYXNrPTE8PGNoYW5uZWw7fSxlbmFibGU6ZnVuY3Rpb24oY2hhbm5lbCl7dGhpcy5tYXNrfD0xPDxjaGFubmVsO30sdG9nZ2xlOmZ1bmN0aW9uKGNoYW5uZWwpe3RoaXMubWFza149MTw8Y2hhbm5lbDt9LGRpc2FibGU6ZnVuY3Rpb24oY2hhbm5lbCl7dGhpcy5tYXNrJj1+KDE8PGNoYW5uZWwpO30sdGVzdDpmdW5jdGlvbihsYXllcnMpe3JldHVybih0aGlzLm1hc2smbGF5ZXJzLm1hc2spIT09MDt9fTsvLyBGaWxlOnNyYy9jb3JlL1JheWNhc3Rlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3Igc3RlcGhvbWkgLyBodHRwOi8vc3RlcGhhbmVnaW5pZXIuY29tL1xyXG4gKi8oZnVuY3Rpb24oVEhSRUUpe1RIUkVFLlJheWNhc3Rlcj1mdW5jdGlvbihvcmlnaW4sZGlyZWN0aW9uLG5lYXIsZmFyKXt0aGlzLnJheT1uZXcgVEhSRUUuUmF5KG9yaWdpbixkaXJlY3Rpb24pOy8vIGRpcmVjdGlvbiBpcyBhc3N1bWVkIHRvIGJlIG5vcm1hbGl6ZWQgKGZvciBhY2N1cmF0ZSBkaXN0YW5jZSBjYWxjdWxhdGlvbnMpXG50aGlzLm5lYXI9bmVhcnx8MDt0aGlzLmZhcj1mYXJ8fEluZmluaXR5O3RoaXMucGFyYW1zPXtNZXNoOnt9LExpbmU6e30sTE9EOnt9LFBvaW50czp7dGhyZXNob2xkOjF9LFNwcml0ZTp7fX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5wYXJhbXMse1BvaW50Q2xvdWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuUmF5Y2FzdGVyOiBwYXJhbXMuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIHBhcmFtcy5Qb2ludHMuJyk7cmV0dXJuIHRoaXMuUG9pbnRzO319fSk7fTtmdW5jdGlvbiBhc2NTb3J0KGEsYil7cmV0dXJuIGEuZGlzdGFuY2UtYi5kaXN0YW5jZTt9ZnVuY3Rpb24gaW50ZXJzZWN0T2JqZWN0KG9iamVjdCxyYXljYXN0ZXIsaW50ZXJzZWN0cyxyZWN1cnNpdmUpe2lmKG9iamVjdC52aXNpYmxlPT09ZmFsc2UpcmV0dXJuO29iamVjdC5yYXljYXN0KHJheWNhc3RlcixpbnRlcnNlY3RzKTtpZihyZWN1cnNpdmU9PT10cnVlKXt2YXIgY2hpbGRyZW49b2JqZWN0LmNoaWxkcmVuO2Zvcih2YXIgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe2ludGVyc2VjdE9iamVjdChjaGlsZHJlbltpXSxyYXljYXN0ZXIsaW50ZXJzZWN0cyx0cnVlKTt9fX0vL1xuVEhSRUUuUmF5Y2FzdGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUmF5Y2FzdGVyLGxpbmVQcmVjaXNpb246MSxzZXQ6ZnVuY3Rpb24ob3JpZ2luLGRpcmVjdGlvbil7Ly8gZGlyZWN0aW9uIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZCAoZm9yIGFjY3VyYXRlIGRpc3RhbmNlIGNhbGN1bGF0aW9ucylcbnRoaXMucmF5LnNldChvcmlnaW4sZGlyZWN0aW9uKTt9LHNldEZyb21DYW1lcmE6ZnVuY3Rpb24oY29vcmRzLGNhbWVyYSl7aWYoY2FtZXJhIGluc3RhbmNlb2YgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpe3RoaXMucmF5Lm9yaWdpbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTt0aGlzLnJheS5kaXJlY3Rpb24uc2V0KGNvb3Jkcy54LGNvb3Jkcy55LDAuNSkudW5wcm9qZWN0KGNhbWVyYSkuc3ViKHRoaXMucmF5Lm9yaWdpbikubm9ybWFsaXplKCk7fWVsc2UgaWYoY2FtZXJhIGluc3RhbmNlb2YgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKXt0aGlzLnJheS5vcmlnaW4uc2V0KGNvb3Jkcy54LGNvb3Jkcy55LC0xKS51bnByb2plY3QoY2FtZXJhKTt0aGlzLnJheS5kaXJlY3Rpb24uc2V0KDAsMCwtMSkudHJhbnNmb3JtRGlyZWN0aW9uKGNhbWVyYS5tYXRyaXhXb3JsZCk7fWVsc2V7Y29uc29sZS5lcnJvcignVEhSRUUuUmF5Y2FzdGVyOiBVbnN1cHBvcnRlZCBjYW1lcmEgdHlwZS4nKTt9fSxpbnRlcnNlY3RPYmplY3Q6ZnVuY3Rpb24ob2JqZWN0LHJlY3Vyc2l2ZSl7dmFyIGludGVyc2VjdHM9W107aW50ZXJzZWN0T2JqZWN0KG9iamVjdCx0aGlzLGludGVyc2VjdHMscmVjdXJzaXZlKTtpbnRlcnNlY3RzLnNvcnQoYXNjU29ydCk7cmV0dXJuIGludGVyc2VjdHM7fSxpbnRlcnNlY3RPYmplY3RzOmZ1bmN0aW9uKG9iamVjdHMscmVjdXJzaXZlKXt2YXIgaW50ZXJzZWN0cz1bXTtpZihBcnJheS5pc0FycmF5KG9iamVjdHMpPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHM6IG9iamVjdHMgaXMgbm90IGFuIEFycmF5LicpO3JldHVybiBpbnRlcnNlY3RzO31mb3IodmFyIGk9MCxsPW9iamVjdHMubGVuZ3RoO2k8bDtpKyspe2ludGVyc2VjdE9iamVjdChvYmplY3RzW2ldLHRoaXMsaW50ZXJzZWN0cyxyZWN1cnNpdmUpO31pbnRlcnNlY3RzLnNvcnQoYXNjU29ydCk7cmV0dXJuIGludGVyc2VjdHM7fX07fSkoVEhSRUUpOy8vIEZpbGU6c3JjL2NvcmUvT2JqZWN0M0QuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICogQGF1dGhvciBlbGVwaGFudGF0d29yayAvIHd3dy5lbGVwaGFudGF0d29yay5jaFxyXG4gKi9USFJFRS5PYmplY3QzRD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOlRIUkVFLk9iamVjdDNESWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nT2JqZWN0M0QnO3RoaXMucGFyZW50PW51bGw7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnVwPVRIUkVFLk9iamVjdDNELkRlZmF1bHRVcC5jbG9uZSgpO3ZhciBwb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciByb3RhdGlvbj1uZXcgVEhSRUUuRXVsZXIoKTt2YXIgcXVhdGVybmlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbigpO3ZhciBzY2FsZT1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7ZnVuY3Rpb24gb25Sb3RhdGlvbkNoYW5nZSgpe3F1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uLGZhbHNlKTt9ZnVuY3Rpb24gb25RdWF0ZXJuaW9uQ2hhbmdlKCl7cm90YXRpb24uc2V0RnJvbVF1YXRlcm5pb24ocXVhdGVybmlvbix1bmRlZmluZWQsZmFsc2UpO31yb3RhdGlvbi5vbkNoYW5nZShvblJvdGF0aW9uQ2hhbmdlKTtxdWF0ZXJuaW9uLm9uQ2hhbmdlKG9uUXVhdGVybmlvbkNoYW5nZSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cG9zaXRpb246e2VudW1lcmFibGU6dHJ1ZSx2YWx1ZTpwb3NpdGlvbn0scm90YXRpb246e2VudW1lcmFibGU6dHJ1ZSx2YWx1ZTpyb3RhdGlvbn0scXVhdGVybmlvbjp7ZW51bWVyYWJsZTp0cnVlLHZhbHVlOnF1YXRlcm5pb259LHNjYWxlOntlbnVtZXJhYmxlOnRydWUsdmFsdWU6c2NhbGV9LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IFRIUkVFLk1hdHJpeDQoKX0sbm9ybWFsTWF0cml4Ont2YWx1ZTpuZXcgVEhSRUUuTWF0cml4MygpfX0pO3RoaXMubWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7dGhpcy5tYXRyaXhXb3JsZD1uZXcgVEhSRUUuTWF0cml4NCgpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1USFJFRS5PYmplY3QzRC5EZWZhdWx0TWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5sYXllcnM9bmV3IFRIUkVFLkxheWVycygpO3RoaXMudmlzaWJsZT10cnVlO3RoaXMuY2FzdFNoYWRvdz1mYWxzZTt0aGlzLnJlY2VpdmVTaGFkb3c9ZmFsc2U7dGhpcy5mcnVzdHVtQ3VsbGVkPXRydWU7dGhpcy5yZW5kZXJPcmRlcj0wO3RoaXMudXNlckRhdGE9e307fTtUSFJFRS5PYmplY3QzRC5EZWZhdWx0VXA9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO1RIUkVFLk9iamVjdDNELkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPXRydWU7T2JqZWN0LmFzc2lnbihUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7YXBwbHlNYXRyaXg6ZnVuY3Rpb24obWF0cml4KXt0aGlzLm1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCx0aGlzLm1hdHJpeCk7dGhpcy5tYXRyaXguZGVjb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO30sc2V0Um90YXRpb25Gcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uKGF4aXMsYW5nbGUpey8vIGFzc3VtZXMgYXhpcyBpcyBub3JtYWxpemVkXG50aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShheGlzLGFuZ2xlKTt9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGV1bGVyKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGV1bGVyLHRydWUpO30sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKG0pey8vIGFzc3VtZXMgdGhlIHVwcGVyIDN4MyBvZiBtIGlzIGEgcHVyZSByb3RhdGlvbiBtYXRyaXggKGkuZSwgdW5zY2FsZWQpXG50aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KG0pO30sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihxKXsvLyBhc3N1bWVzIHEgaXMgbm9ybWFsaXplZFxudGhpcy5xdWF0ZXJuaW9uLmNvcHkocSk7fSxyb3RhdGVPbkF4aXM6ZnVuY3Rpb24oKXsvLyByb3RhdGUgb2JqZWN0IG9uIGF4aXMgaW4gb2JqZWN0IHNwYWNlXG4vLyBheGlzIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZFxudmFyIHExPW5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uKGF4aXMsYW5nbGUpe3ExLnNldEZyb21BeGlzQW5nbGUoYXhpcyxhbmdsZSk7dGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KHExKTtyZXR1cm4gdGhpczt9O30oKSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYW5nbGUpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyh2MSxhbmdsZSk7fTt9KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGFuZ2xlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXModjEsYW5nbGUpO307fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihhbmdsZSl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKHYxLGFuZ2xlKTt9O30oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXsvLyB0cmFuc2xhdGUgb2JqZWN0IGJ5IGRpc3RhbmNlIGFsb25nIGF4aXMgaW4gb2JqZWN0IHNwYWNlXG4vLyBheGlzIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZFxudmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKGF4aXMsZGlzdGFuY2Upe3YxLmNvcHkoYXhpcykuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7dGhpcy5wb3NpdGlvbi5hZGQodjEubXVsdGlwbHlTY2FsYXIoZGlzdGFuY2UpKTtyZXR1cm4gdGhpczt9O30oKSx0cmFuc2xhdGVYOmZ1bmN0aW9uKCl7dmFyIHYxPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oZGlzdGFuY2Upe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyh2MSxkaXN0YW5jZSk7fTt9KCksdHJhbnNsYXRlWTpmdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGRpc3RhbmNlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXModjEsZGlzdGFuY2UpO307fSgpLHRyYW5zbGF0ZVo6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihkaXN0YW5jZSl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKHYxLGRpc3RhbmNlKTt9O30oKSxsb2NhbFRvV29ybGQ6ZnVuY3Rpb24odmVjdG9yKXtyZXR1cm4gdmVjdG9yLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTt9LHdvcmxkVG9Mb2NhbDpmdW5jdGlvbigpe3ZhciBtMT1uZXcgVEhSRUUuTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbih2ZWN0b3Ipe3JldHVybiB2ZWN0b3IuYXBwbHlNYXRyaXg0KG0xLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpO307fSgpLGxvb2tBdDpmdW5jdGlvbigpey8vIFRoaXMgcm91dGluZSBkb2VzIG5vdCBzdXBwb3J0IG9iamVjdHMgd2l0aCByb3RhdGVkIGFuZC9vciB0cmFuc2xhdGVkIHBhcmVudChzKVxudmFyIG0xPW5ldyBUSFJFRS5NYXRyaXg0KCk7cmV0dXJuIGZ1bmN0aW9uKHZlY3Rvcil7bTEubG9va0F0KHZlY3Rvcix0aGlzLnBvc2l0aW9uLHRoaXMudXApO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgobTEpO307fSgpLGFkZDpmdW5jdGlvbihvYmplY3Qpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dGhpcy5hZGQoYXJndW1lbnRzW2ldKTt9cmV0dXJuIHRoaXM7fWlmKG9iamVjdD09PXRoaXMpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi5cIixvYmplY3QpO3JldHVybiB0aGlzO31pZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCl7aWYob2JqZWN0LnBhcmVudCE9PW51bGwpe29iamVjdC5wYXJlbnQucmVtb3ZlKG9iamVjdCk7fW9iamVjdC5wYXJlbnQ9dGhpcztvYmplY3QuZGlzcGF0Y2hFdmVudCh7dHlwZTonYWRkZWQnfSk7dGhpcy5jaGlsZHJlbi5wdXNoKG9iamVjdCk7fWVsc2V7Y29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5PYmplY3QzRC5cIixvYmplY3QpO31yZXR1cm4gdGhpczt9LHJlbW92ZTpmdW5jdGlvbihvYmplY3Qpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dGhpcy5yZW1vdmUoYXJndW1lbnRzW2ldKTt9fXZhciBpbmRleD10aGlzLmNoaWxkcmVuLmluZGV4T2Yob2JqZWN0KTtpZihpbmRleCE9PS0xKXtvYmplY3QucGFyZW50PW51bGw7b2JqZWN0LmRpc3BhdGNoRXZlbnQoe3R5cGU6J3JlbW92ZWQnfSk7dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsMSk7fX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihpZCl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgnaWQnLGlkKTt9LGdldE9iamVjdEJ5TmFtZTpmdW5jdGlvbihuYW1lKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KCduYW1lJyxuYW1lKTt9LGdldE9iamVjdEJ5UHJvcGVydHk6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7aWYodGhpc1tuYW1lXT09PXZhbHVlKXJldHVybiB0aGlzO2Zvcih2YXIgaT0wLGw9dGhpcy5jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7dmFyIGNoaWxkPXRoaXMuY2hpbGRyZW5baV07dmFyIG9iamVjdD1jaGlsZC5nZXRPYmplY3RCeVByb3BlcnR5KG5hbWUsdmFsdWUpO2lmKG9iamVjdCE9PXVuZGVmaW5lZCl7cmV0dXJuIG9iamVjdDt9fXJldHVybiB1bmRlZmluZWQ7fSxnZXRXb3JsZFBvc2l0aW9uOmZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3RoaXMudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7cmV0dXJuIHJlc3VsdC5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7fSxnZXRXb3JsZFF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgcG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgc2NhbGU9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24ob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShwb3NpdGlvbixyZXN1bHQsc2NhbGUpO3JldHVybiByZXN1bHQ7fTt9KCksZ2V0V29ybGRSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBxdWF0ZXJuaW9uPW5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuRXVsZXIoKTt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihxdWF0ZXJuaW9uKTtyZXR1cm4gcmVzdWx0LnNldEZyb21RdWF0ZXJuaW9uKHF1YXRlcm5pb24sdGhpcy5yb3RhdGlvbi5vcmRlcixmYWxzZSk7fTt9KCksZ2V0V29ybGRTY2FsZTpmdW5jdGlvbigpe3ZhciBwb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBxdWF0ZXJuaW9uPW5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7cmV0dXJuIGZ1bmN0aW9uKG9wdGlvbmFsVGFyZ2V0KXt2YXIgcmVzdWx0PW9wdGlvbmFsVGFyZ2V0fHxuZXcgVEhSRUUuVmVjdG9yMygpO3RoaXMudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UocG9zaXRpb24scXVhdGVybmlvbixyZXN1bHQpO3JldHVybiByZXN1bHQ7fTt9KCksZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgcXVhdGVybmlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbigpO3JldHVybiBmdW5jdGlvbihvcHRpb25hbFRhcmdldCl7dmFyIHJlc3VsdD1vcHRpb25hbFRhcmdldHx8bmV3IFRIUkVFLlZlY3RvcjMoKTt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihxdWF0ZXJuaW9uKTtyZXR1cm4gcmVzdWx0LnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pO307fSgpLHJheWNhc3Q6ZnVuY3Rpb24oKXt9LHRyYXZlcnNlOmZ1bmN0aW9uKGNhbGxiYWNrKXtjYWxsYmFjayh0aGlzKTt2YXIgY2hpbGRyZW49dGhpcy5jaGlsZHJlbjtmb3IodmFyIGk9MCxsPWNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXtjaGlsZHJlbltpXS50cmF2ZXJzZShjYWxsYmFjayk7fX0sdHJhdmVyc2VWaXNpYmxlOmZ1bmN0aW9uKGNhbGxiYWNrKXtpZih0aGlzLnZpc2libGU9PT1mYWxzZSlyZXR1cm47Y2FsbGJhY2sodGhpcyk7dmFyIGNoaWxkcmVuPXRoaXMuY2hpbGRyZW47Zm9yKHZhciBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7Y2hpbGRyZW5baV0udHJhdmVyc2VWaXNpYmxlKGNhbGxiYWNrKTt9fSx0cmF2ZXJzZUFuY2VzdG9yczpmdW5jdGlvbihjYWxsYmFjayl7dmFyIHBhcmVudD10aGlzLnBhcmVudDtpZihwYXJlbnQhPT1udWxsKXtjYWxsYmFjayhwYXJlbnQpO3BhcmVudC50cmF2ZXJzZUFuY2VzdG9ycyhjYWxsYmFjayk7fX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dHJ1ZTt9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGZvcmNlKXtpZih0aGlzLm1hdHJpeEF1dG9VcGRhdGU9PT10cnVlKXRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPT09dHJ1ZXx8Zm9yY2U9PT10cnVlKXtpZih0aGlzLnBhcmVudD09PW51bGwpe3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk7fWVsc2V7dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KTt9dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPWZhbHNlO2ZvcmNlPXRydWU7fS8vIHVwZGF0ZSBjaGlsZHJlblxuZm9yKHZhciBpPTAsbD10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmNoaWxkcmVuW2ldLnVwZGF0ZU1hdHJpeFdvcmxkKGZvcmNlKTt9fSx0b0pTT046ZnVuY3Rpb24obWV0YSl7Ly8gbWV0YSBpcyAnJyB3aGVuIGNhbGxlZCBmcm9tIEpTT04uc3RyaW5naWZ5XG52YXIgaXNSb290T2JqZWN0PW1ldGE9PT11bmRlZmluZWR8fG1ldGE9PT0nJzt2YXIgb3V0cHV0PXt9Oy8vIG1ldGEgaXMgYSBoYXNoIHVzZWQgdG8gY29sbGVjdCBnZW9tZXRyaWVzLCBtYXRlcmlhbHMuXG4vLyBub3QgcHJvdmlkaW5nIGl0IGltcGxpZXMgdGhhdCB0aGlzIGlzIHRoZSByb290IG9iamVjdFxuLy8gYmVpbmcgc2VyaWFsaXplZC5cbmlmKGlzUm9vdE9iamVjdCl7Ly8gaW5pdGlhbGl6ZSBtZXRhIG9ialxubWV0YT17Z2VvbWV0cmllczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30saW1hZ2VzOnt9fTtvdXRwdXQubWV0YWRhdGE9e3ZlcnNpb246NC40LHR5cGU6J09iamVjdCcsZ2VuZXJhdG9yOidPYmplY3QzRC50b0pTT04nfTt9Ly8gc3RhbmRhcmQgT2JqZWN0M0Qgc2VyaWFsaXphdGlvblxudmFyIG9iamVjdD17fTtvYmplY3QudXVpZD10aGlzLnV1aWQ7b2JqZWN0LnR5cGU9dGhpcy50eXBlO2lmKHRoaXMubmFtZSE9PScnKW9iamVjdC5uYW1lPXRoaXMubmFtZTtpZihKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSE9PSd7fScpb2JqZWN0LnVzZXJEYXRhPXRoaXMudXNlckRhdGE7aWYodGhpcy5jYXN0U2hhZG93PT09dHJ1ZSlvYmplY3QuY2FzdFNoYWRvdz10cnVlO2lmKHRoaXMucmVjZWl2ZVNoYWRvdz09PXRydWUpb2JqZWN0LnJlY2VpdmVTaGFkb3c9dHJ1ZTtpZih0aGlzLnZpc2libGU9PT1mYWxzZSlvYmplY3QudmlzaWJsZT1mYWxzZTtvYmplY3QubWF0cml4PXRoaXMubWF0cml4LnRvQXJyYXkoKTsvL1xuaWYodGhpcy5nZW9tZXRyeSE9PXVuZGVmaW5lZCl7aWYobWV0YS5nZW9tZXRyaWVzW3RoaXMuZ2VvbWV0cnkudXVpZF09PT11bmRlZmluZWQpe21ldGEuZ2VvbWV0cmllc1t0aGlzLmdlb21ldHJ5LnV1aWRdPXRoaXMuZ2VvbWV0cnkudG9KU09OKG1ldGEpO31vYmplY3QuZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeS51dWlkO31pZih0aGlzLm1hdGVyaWFsIT09dW5kZWZpbmVkKXtpZihtZXRhLm1hdGVyaWFsc1t0aGlzLm1hdGVyaWFsLnV1aWRdPT09dW5kZWZpbmVkKXttZXRhLm1hdGVyaWFsc1t0aGlzLm1hdGVyaWFsLnV1aWRdPXRoaXMubWF0ZXJpYWwudG9KU09OKG1ldGEpO31vYmplY3QubWF0ZXJpYWw9dGhpcy5tYXRlcmlhbC51dWlkO30vL1xuaWYodGhpcy5jaGlsZHJlbi5sZW5ndGg+MCl7b2JqZWN0LmNoaWxkcmVuPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5jaGlsZHJlbi5sZW5ndGg7aSsrKXtvYmplY3QuY2hpbGRyZW4ucHVzaCh0aGlzLmNoaWxkcmVuW2ldLnRvSlNPTihtZXRhKS5vYmplY3QpO319aWYoaXNSb290T2JqZWN0KXt2YXIgZ2VvbWV0cmllcz1leHRyYWN0RnJvbUNhY2hlKG1ldGEuZ2VvbWV0cmllcyk7dmFyIG1hdGVyaWFscz1leHRyYWN0RnJvbUNhY2hlKG1ldGEubWF0ZXJpYWxzKTt2YXIgdGV4dHVyZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnRleHR1cmVzKTt2YXIgaW1hZ2VzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS5pbWFnZXMpO2lmKGdlb21ldHJpZXMubGVuZ3RoPjApb3V0cHV0Lmdlb21ldHJpZXM9Z2VvbWV0cmllcztpZihtYXRlcmlhbHMubGVuZ3RoPjApb3V0cHV0Lm1hdGVyaWFscz1tYXRlcmlhbHM7aWYodGV4dHVyZXMubGVuZ3RoPjApb3V0cHV0LnRleHR1cmVzPXRleHR1cmVzO2lmKGltYWdlcy5sZW5ndGg+MClvdXRwdXQuaW1hZ2VzPWltYWdlczt9b3V0cHV0Lm9iamVjdD1vYmplY3Q7cmV0dXJuIG91dHB1dDsvLyBleHRyYWN0IGRhdGEgZnJvbSB0aGUgY2FjaGUgaGFzaFxuLy8gcmVtb3ZlIG1ldGFkYXRhIG9uIGVhY2ggaXRlbVxuLy8gYW5kIHJldHVybiBhcyBhcnJheVxuZnVuY3Rpb24gZXh0cmFjdEZyb21DYWNoZShjYWNoZSl7dmFyIHZhbHVlcz1bXTtmb3IodmFyIGtleSBpbiBjYWNoZSl7dmFyIGRhdGE9Y2FjaGVba2V5XTtkZWxldGUgZGF0YS5tZXRhZGF0YTt2YWx1ZXMucHVzaChkYXRhKTt9cmV0dXJuIHZhbHVlczt9fSxjbG9uZTpmdW5jdGlvbihyZWN1cnNpdmUpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyxyZWN1cnNpdmUpO30sY29weTpmdW5jdGlvbihzb3VyY2UscmVjdXJzaXZlKXtpZihyZWN1cnNpdmU9PT11bmRlZmluZWQpcmVjdXJzaXZlPXRydWU7dGhpcy5uYW1lPXNvdXJjZS5uYW1lO3RoaXMudXAuY29weShzb3VyY2UudXApO3RoaXMucG9zaXRpb24uY29weShzb3VyY2UucG9zaXRpb24pO3RoaXMucXVhdGVybmlvbi5jb3B5KHNvdXJjZS5xdWF0ZXJuaW9uKTt0aGlzLnNjYWxlLmNvcHkoc291cmNlLnNjYWxlKTt0aGlzLm1hdHJpeC5jb3B5KHNvdXJjZS5tYXRyaXgpO3RoaXMubWF0cml4V29ybGQuY29weShzb3VyY2UubWF0cml4V29ybGQpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1zb3VyY2UubWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9c291cmNlLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7dGhpcy52aXNpYmxlPXNvdXJjZS52aXNpYmxlO3RoaXMuY2FzdFNoYWRvdz1zb3VyY2UuY2FzdFNoYWRvdzt0aGlzLnJlY2VpdmVTaGFkb3c9c291cmNlLnJlY2VpdmVTaGFkb3c7dGhpcy5mcnVzdHVtQ3VsbGVkPXNvdXJjZS5mcnVzdHVtQ3VsbGVkO3RoaXMucmVuZGVyT3JkZXI9c291cmNlLnJlbmRlck9yZGVyO3RoaXMudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UudXNlckRhdGEpKTtpZihyZWN1cnNpdmU9PT10cnVlKXtmb3IodmFyIGk9MDtpPHNvdXJjZS5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgY2hpbGQ9c291cmNlLmNoaWxkcmVuW2ldO3RoaXMuYWRkKGNoaWxkLmNsb25lKCkpO319cmV0dXJuIHRoaXM7fX0pO1RIUkVFLk9iamVjdDNESWRDb3VudD0wOy8vIEZpbGU6c3JjL2NvcmUvRmFjZTMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5GYWNlMz1mdW5jdGlvbihhLGIsYyxub3JtYWwsY29sb3IsbWF0ZXJpYWxJbmRleCl7dGhpcy5hPWE7dGhpcy5iPWI7dGhpcy5jPWM7dGhpcy5ub3JtYWw9bm9ybWFsIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMz9ub3JtYWw6bmV3IFRIUkVFLlZlY3RvcjMoKTt0aGlzLnZlcnRleE5vcm1hbHM9QXJyYXkuaXNBcnJheShub3JtYWwpP25vcm1hbDpbXTt0aGlzLmNvbG9yPWNvbG9yIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/Y29sb3I6bmV3IFRIUkVFLkNvbG9yKCk7dGhpcy52ZXJ0ZXhDb2xvcnM9QXJyYXkuaXNBcnJheShjb2xvcik/Y29sb3I6W107dGhpcy5tYXRlcmlhbEluZGV4PW1hdGVyaWFsSW5kZXghPT11bmRlZmluZWQ/bWF0ZXJpYWxJbmRleDowO307VEhSRUUuRmFjZTMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5GYWNlMyxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7dGhpcy5hPXNvdXJjZS5hO3RoaXMuYj1zb3VyY2UuYjt0aGlzLmM9c291cmNlLmM7dGhpcy5ub3JtYWwuY29weShzb3VyY2Uubm9ybWFsKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hdGVyaWFsSW5kZXg9c291cmNlLm1hdGVyaWFsSW5kZXg7Zm9yKHZhciBpPTAsaWw9c291cmNlLnZlcnRleE5vcm1hbHMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLnZlcnRleE5vcm1hbHNbaV09c291cmNlLnZlcnRleE5vcm1hbHNbaV0uY2xvbmUoKTt9Zm9yKHZhciBpPTAsaWw9c291cmNlLnZlcnRleENvbG9ycy5sZW5ndGg7aTxpbDtpKyspe3RoaXMudmVydGV4Q29sb3JzW2ldPXNvdXJjZS52ZXJ0ZXhDb2xvcnNbaV0uY2xvbmUoKTt9cmV0dXJuIHRoaXM7fX07Ly8gRmlsZTpzcmMvY29yZS9CdWZmZXJBdHRyaWJ1dGUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5CdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYXJyYXksaXRlbVNpemUsbm9ybWFsaXplZCl7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5hcnJheT1hcnJheTt0aGlzLml0ZW1TaXplPWl0ZW1TaXplO3RoaXMuZHluYW1pYz1mYWxzZTt0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX07dGhpcy52ZXJzaW9uPTA7dGhpcy5ub3JtYWxpemVkPW5vcm1hbGl6ZWQ9PT10cnVlO307VEhSRUUuQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQnVmZmVyQXR0cmlidXRlLGdldCBjb3VudCgpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aC90aGlzLml0ZW1TaXplO30sc2V0IG5lZWRzVXBkYXRlKHZhbHVlKXtpZih2YWx1ZT09PXRydWUpdGhpcy52ZXJzaW9uKys7fSxzZXREeW5hbWljOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmR5bmFtaWM9dmFsdWU7cmV0dXJuIHRoaXM7fSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7dGhpcy5hcnJheT1uZXcgc291cmNlLmFycmF5LmNvbnN0cnVjdG9yKHNvdXJjZS5hcnJheSk7dGhpcy5pdGVtU2l6ZT1zb3VyY2UuaXRlbVNpemU7dGhpcy5keW5hbWljPXNvdXJjZS5keW5hbWljO3JldHVybiB0aGlzO30sY29weUF0OmZ1bmN0aW9uKGluZGV4MSxhdHRyaWJ1dGUsaW5kZXgyKXtpbmRleDEqPXRoaXMuaXRlbVNpemU7aW5kZXgyKj1hdHRyaWJ1dGUuaXRlbVNpemU7Zm9yKHZhciBpPTAsbD10aGlzLml0ZW1TaXplO2k8bDtpKyspe3RoaXMuYXJyYXlbaW5kZXgxK2ldPWF0dHJpYnV0ZS5hcnJheVtpbmRleDIraV07fXJldHVybiB0aGlzO30sY29weUFycmF5OmZ1bmN0aW9uKGFycmF5KXt0aGlzLmFycmF5LnNldChhcnJheSk7cmV0dXJuIHRoaXM7fSxjb3B5Q29sb3JzQXJyYXk6ZnVuY3Rpb24oY29sb3JzKXt2YXIgYXJyYXk9dGhpcy5hcnJheSxvZmZzZXQ9MDtmb3IodmFyIGk9MCxsPWNvbG9ycy5sZW5ndGg7aTxsO2krKyl7dmFyIGNvbG9yPWNvbG9yc1tpXTtpZihjb2xvcj09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weUNvbG9yc0FycmF5KCk6IGNvbG9yIGlzIHVuZGVmaW5lZCcsaSk7Y29sb3I9bmV3IFRIUkVFLkNvbG9yKCk7fWFycmF5W29mZnNldCsrXT1jb2xvci5yO2FycmF5W29mZnNldCsrXT1jb2xvci5nO2FycmF5W29mZnNldCsrXT1jb2xvci5iO31yZXR1cm4gdGhpczt9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24oaW5kaWNlcyl7dmFyIGFycmF5PXRoaXMuYXJyYXksb2Zmc2V0PTA7Zm9yKHZhciBpPTAsbD1pbmRpY2VzLmxlbmd0aDtpPGw7aSsrKXt2YXIgaW5kZXg9aW5kaWNlc1tpXTthcnJheVtvZmZzZXQrK109aW5kZXguYTthcnJheVtvZmZzZXQrK109aW5kZXguYjthcnJheVtvZmZzZXQrK109aW5kZXguYzt9cmV0dXJuIHRoaXM7fSxjb3B5VmVjdG9yMnNBcnJheTpmdW5jdGlvbih2ZWN0b3JzKXt2YXIgYXJyYXk9dGhpcy5hcnJheSxvZmZzZXQ9MDtmb3IodmFyIGk9MCxsPXZlY3RvcnMubGVuZ3RoO2k8bDtpKyspe3ZhciB2ZWN0b3I9dmVjdG9yc1tpXTtpZih2ZWN0b3I9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWQnLGkpO3ZlY3Rvcj1uZXcgVEhSRUUuVmVjdG9yMigpO31hcnJheVtvZmZzZXQrK109dmVjdG9yLng7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci55O31yZXR1cm4gdGhpczt9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKHZlY3RvcnMpe3ZhciBhcnJheT10aGlzLmFycmF5LG9mZnNldD0wO2Zvcih2YXIgaT0wLGw9dmVjdG9ycy5sZW5ndGg7aTxsO2krKyl7dmFyIHZlY3Rvcj12ZWN0b3JzW2ldO2lmKHZlY3Rvcj09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZCcsaSk7dmVjdG9yPW5ldyBUSFJFRS5WZWN0b3IzKCk7fWFycmF5W29mZnNldCsrXT12ZWN0b3IueDthcnJheVtvZmZzZXQrK109dmVjdG9yLnk7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci56O31yZXR1cm4gdGhpczt9LGNvcHlWZWN0b3I0c0FycmF5OmZ1bmN0aW9uKHZlY3RvcnMpe3ZhciBhcnJheT10aGlzLmFycmF5LG9mZnNldD0wO2Zvcih2YXIgaT0wLGw9dmVjdG9ycy5sZW5ndGg7aTxsO2krKyl7dmFyIHZlY3Rvcj12ZWN0b3JzW2ldO2lmKHZlY3Rvcj09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjRzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZCcsaSk7dmVjdG9yPW5ldyBUSFJFRS5WZWN0b3I0KCk7fWFycmF5W29mZnNldCsrXT12ZWN0b3IueDthcnJheVtvZmZzZXQrK109dmVjdG9yLnk7YXJyYXlbb2Zmc2V0KytdPXZlY3Rvci56O2FycmF5W29mZnNldCsrXT12ZWN0b3Iudzt9cmV0dXJuIHRoaXM7fSxzZXQ6ZnVuY3Rpb24odmFsdWUsb2Zmc2V0KXtpZihvZmZzZXQ9PT11bmRlZmluZWQpb2Zmc2V0PTA7dGhpcy5hcnJheS5zZXQodmFsdWUsb2Zmc2V0KTtyZXR1cm4gdGhpczt9LGdldFg6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiB0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemVdO30sc2V0WDpmdW5jdGlvbihpbmRleCx4KXt0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemVdPXg7cmV0dXJuIHRoaXM7fSxnZXRZOmZ1bmN0aW9uKGluZGV4KXtyZXR1cm4gdGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzFdO30sc2V0WTpmdW5jdGlvbihpbmRleCx5KXt0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemUrMV09eTtyZXR1cm4gdGhpczt9LGdldFo6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiB0aGlzLmFycmF5W2luZGV4KnRoaXMuaXRlbVNpemUrMl07fSxzZXRaOmZ1bmN0aW9uKGluZGV4LHope3RoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZSsyXT16O3JldHVybiB0aGlzO30sZ2V0VzpmdW5jdGlvbihpbmRleCl7cmV0dXJuIHRoaXMuYXJyYXlbaW5kZXgqdGhpcy5pdGVtU2l6ZSszXTt9LHNldFc6ZnVuY3Rpb24oaW5kZXgsdyl7dGhpcy5hcnJheVtpbmRleCp0aGlzLml0ZW1TaXplKzNdPXc7cmV0dXJuIHRoaXM7fSxzZXRYWTpmdW5jdGlvbihpbmRleCx4LHkpe2luZGV4Kj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbaW5kZXgrMF09eDt0aGlzLmFycmF5W2luZGV4KzFdPXk7cmV0dXJuIHRoaXM7fSxzZXRYWVo6ZnVuY3Rpb24oaW5kZXgseCx5LHope2luZGV4Kj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbaW5kZXgrMF09eDt0aGlzLmFycmF5W2luZGV4KzFdPXk7dGhpcy5hcnJheVtpbmRleCsyXT16O3JldHVybiB0aGlzO30sc2V0WFlaVzpmdW5jdGlvbihpbmRleCx4LHkseix3KXtpbmRleCo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2luZGV4KzBdPXg7dGhpcy5hcnJheVtpbmRleCsxXT15O3RoaXMuYXJyYXlbaW5kZXgrMl09ejt0aGlzLmFycmF5W2luZGV4KzNdPXc7cmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fX07Ly9cblRIUkVFLkludDhBdHRyaWJ1dGU9ZnVuY3Rpb24oYXJyYXksaXRlbVNpemUpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBJbnQ4QXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9O1RIUkVFLlVpbnQ4QXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDhBcnJheShhcnJheSksaXRlbVNpemUpO307VEhSRUUuVWludDhDbGFtcGVkQXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9O1RIUkVFLkludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgSW50MTZBcnJheShhcnJheSksaXRlbVNpemUpO307VEhSRUUuVWludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDE2QXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9O1RIUkVFLkludDMyQXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgSW50MzJBcnJheShhcnJheSksaXRlbVNpemUpO307VEhSRUUuVWludDMyQXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDMyQXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9O1RIUkVFLkZsb2F0MzJBdHRyaWJ1dGU9ZnVuY3Rpb24oYXJyYXksaXRlbVNpemUpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9O1RIUkVFLkZsb2F0NjRBdHRyaWJ1dGU9ZnVuY3Rpb24oYXJyYXksaXRlbVNpemUpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDY0QXJyYXkoYXJyYXkpLGl0ZW1TaXplKTt9Oy8vIERlcHJlY2F0ZWRcblRIUkVFLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYXJyYXksaXRlbVNpemUpe2NvbnNvbGUud2FybignVEhSRUUuRHluYW1pY0J1ZmZlckF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSgpLnNldER5bmFtaWMoIHRydWUgKSBpbnN0ZWFkLicpO3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGFycmF5LGl0ZW1TaXplKS5zZXREeW5hbWljKHRydWUpO307Ly8gRmlsZTpzcmMvY29yZS9JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGJlbmFhZGFtcyAvIGh0dHBzOi8vdHdpdHRlci5jb20vYmVuX2FfYWRhbXNcclxuICovVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGFycmF5LGl0ZW1TaXplLG1lc2hQZXJBdHRyaWJ1dGUpe1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jYWxsKHRoaXMsYXJyYXksaXRlbVNpemUpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1tZXNoUGVyQXR0cmlidXRlfHwxO307VEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO1RIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlO1RIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9c291cmNlLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXM7fTsvLyBGaWxlOnNyYy9jb3JlL0ludGVybGVhdmVkQnVmZmVyLmpzXG4vKipcclxuICogQGF1dGhvciBiZW5hYWRhbXMgLyBodHRwczovL3R3aXR0ZXIuY29tL2Jlbl9hX2FkYW1zXHJcbiAqL1RIUkVFLkludGVybGVhdmVkQnVmZmVyPWZ1bmN0aW9uKGFycmF5LHN0cmlkZSl7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5hcnJheT1hcnJheTt0aGlzLnN0cmlkZT1zdHJpZGU7dGhpcy5keW5hbWljPWZhbHNlO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLnZlcnNpb249MDt9O1RIUkVFLkludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIsZ2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aDt9LGdldCBjb3VudCgpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aC90aGlzLnN0cmlkZTt9LHNldCBuZWVkc1VwZGF0ZSh2YWx1ZSl7aWYodmFsdWU9PT10cnVlKXRoaXMudmVyc2lvbisrO30sc2V0RHluYW1pYzpmdW5jdGlvbih2YWx1ZSl7dGhpcy5keW5hbWljPXZhbHVlO3JldHVybiB0aGlzO30sY29weTpmdW5jdGlvbihzb3VyY2Upe3RoaXMuYXJyYXk9bmV3IHNvdXJjZS5hcnJheS5jb25zdHJ1Y3Rvcihzb3VyY2UuYXJyYXkpO3RoaXMuc3RyaWRlPXNvdXJjZS5zdHJpZGU7dGhpcy5keW5hbWljPXNvdXJjZS5keW5hbWljO3JldHVybiB0aGlzO30sY29weUF0OmZ1bmN0aW9uKGluZGV4MSxhdHRyaWJ1dGUsaW5kZXgyKXtpbmRleDEqPXRoaXMuc3RyaWRlO2luZGV4Mio9YXR0cmlidXRlLnN0cmlkZTtmb3IodmFyIGk9MCxsPXRoaXMuc3RyaWRlO2k8bDtpKyspe3RoaXMuYXJyYXlbaW5kZXgxK2ldPWF0dHJpYnV0ZS5hcnJheVtpbmRleDIraV07fXJldHVybiB0aGlzO30sc2V0OmZ1bmN0aW9uKHZhbHVlLG9mZnNldCl7aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3RoaXMuYXJyYXkuc2V0KHZhbHVlLG9mZnNldCk7cmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fX07Ly8gRmlsZTpzcmMvY29yZS9JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmVuYWFkYW1zIC8gaHR0cHM6Ly90d2l0dGVyLmNvbS9iZW5fYV9hZGFtc1xyXG4gKi9USFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj1mdW5jdGlvbihhcnJheSxzdHJpZGUsbWVzaFBlckF0dHJpYnV0ZSl7VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIuY2FsbCh0aGlzLGFycmF5LHN0cmlkZSk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPW1lc2hQZXJBdHRyaWJ1dGV8fDE7fTtUSFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGUpO1RIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcjtUSFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLkludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1zb3VyY2UubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpczt9Oy8vIEZpbGU6c3JjL2NvcmUvSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGJlbmFhZGFtcyAvIGh0dHBzOi8vdHdpdHRlci5jb20vYmVuX2FfYWRhbXNcclxuICovVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oaW50ZXJsZWF2ZWRCdWZmZXIsaXRlbVNpemUsb2Zmc2V0KXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLmRhdGE9aW50ZXJsZWF2ZWRCdWZmZXI7dGhpcy5pdGVtU2l6ZT1pdGVtU2l6ZTt0aGlzLm9mZnNldD1vZmZzZXQ7fTtUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLGdldCBsZW5ndGgoKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIC5jb3VudC4nKTtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGg7fSxnZXQgY291bnQoKXtyZXR1cm4gdGhpcy5kYXRhLmNvdW50O30sc2V0WDpmdW5jdGlvbihpbmRleCx4KXt0aGlzLmRhdGEuYXJyYXlbaW5kZXgqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldF09eDtyZXR1cm4gdGhpczt9LHNldFk6ZnVuY3Rpb24oaW5kZXgseSl7dGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMV09eTtyZXR1cm4gdGhpczt9LHNldFo6ZnVuY3Rpb24oaW5kZXgseil7dGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMl09ejtyZXR1cm4gdGhpczt9LHNldFc6ZnVuY3Rpb24oaW5kZXgsdyl7dGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrM109dztyZXR1cm4gdGhpczt9LGdldFg6ZnVuY3Rpb24oaW5kZXgpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbaW5kZXgqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldF07fSxnZXRZOmZ1bmN0aW9uKGluZGV4KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMV07fSxnZXRaOmZ1bmN0aW9uKGluZGV4KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMl07fSxnZXRXOmZ1bmN0aW9uKGluZGV4KXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2luZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrM107fSxzZXRYWTpmdW5jdGlvbihpbmRleCx4LHkpe2luZGV4PWluZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2luZGV4KzBdPXg7dGhpcy5kYXRhLmFycmF5W2luZGV4KzFdPXk7cmV0dXJuIHRoaXM7fSxzZXRYWVo6ZnVuY3Rpb24oaW5kZXgseCx5LHope2luZGV4PWluZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2luZGV4KzBdPXg7dGhpcy5kYXRhLmFycmF5W2luZGV4KzFdPXk7dGhpcy5kYXRhLmFycmF5W2luZGV4KzJdPXo7cmV0dXJuIHRoaXM7fSxzZXRYWVpXOmZ1bmN0aW9uKGluZGV4LHgseSx6LHcpe2luZGV4PWluZGV4KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2luZGV4KzBdPXg7dGhpcy5kYXRhLmFycmF5W2luZGV4KzFdPXk7dGhpcy5kYXRhLmFycmF5W2luZGV4KzJdPXo7dGhpcy5kYXRhLmFycmF5W2luZGV4KzNdPXc7cmV0dXJuIHRoaXM7fX07Ly8gRmlsZTpzcmMvY29yZS9HZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3Iga2lsZSAvIGh0dHA6Ly9raWxlLnN0cmF2YWdhbnphLm9yZy9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvXHJcbiAqL1RIUkVFLkdlb21ldHJ5PWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ2lkJyx7dmFsdWU6VEhSRUUuR2VvbWV0cnlJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9Jyc7dGhpcy50eXBlPSdHZW9tZXRyeSc7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuYm91bmRpbmdTcGhlcmU9bnVsbDsvLyB1cGRhdGUgZmxhZ3NcbnRoaXMudmVydGljZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuZWxlbWVudHNOZWVkVXBkYXRlPWZhbHNlO3RoaXMudXZzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuY29sb3JzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT1mYWxzZTt9O09iamVjdC5hc3NpZ24oVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUse2FwcGx5TWF0cml4OmZ1bmN0aW9uKG1hdHJpeCl7dmFyIG5vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO2Zvcih2YXIgaT0wLGlsPXRoaXMudmVydGljZXMubGVuZ3RoO2k8aWw7aSsrKXt2YXIgdmVydGV4PXRoaXMudmVydGljZXNbaV07dmVydGV4LmFwcGx5TWF0cml4NChtYXRyaXgpO31mb3IodmFyIGk9MCxpbD10aGlzLmZhY2VzLmxlbmd0aDtpPGlsO2krKyl7dmFyIGZhY2U9dGhpcy5mYWNlc1tpXTtmYWNlLm5vcm1hbC5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTtmb3IodmFyIGo9MCxqbD1mYWNlLnZlcnRleE5vcm1hbHMubGVuZ3RoO2o8amw7aisrKXtmYWNlLnZlcnRleE5vcm1hbHNbal0uYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7fX1pZih0aGlzLmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt9aWYodGhpcy5ib3VuZGluZ1NwaGVyZSE9PW51bGwpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7fXRoaXMudmVydGljZXNOZWVkVXBkYXRlPXRydWU7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10cnVlO3JldHVybiB0aGlzO30scm90YXRlWDpmdW5jdGlvbigpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgeC1heGlzXG52YXIgbTE7cmV0dXJuIGZ1bmN0aW9uIHJvdGF0ZVgoYW5nbGUpe2lmKG0xPT09dW5kZWZpbmVkKW0xPW5ldyBUSFJFRS5NYXRyaXg0KCk7bTEubWFrZVJvdGF0aW9uWChhbmdsZSk7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCkscm90YXRlWTpmdW5jdGlvbigpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgeS1heGlzXG52YXIgbTE7cmV0dXJuIGZ1bmN0aW9uIHJvdGF0ZVkoYW5nbGUpe2lmKG0xPT09dW5kZWZpbmVkKW0xPW5ldyBUSFJFRS5NYXRyaXg0KCk7bTEubWFrZVJvdGF0aW9uWShhbmdsZSk7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCkscm90YXRlWjpmdW5jdGlvbigpey8vIHJvdGF0ZSBnZW9tZXRyeSBhcm91bmQgd29ybGQgei1heGlzXG52YXIgbTE7cmV0dXJuIGZ1bmN0aW9uIHJvdGF0ZVooYW5nbGUpe2lmKG0xPT09dW5kZWZpbmVkKW0xPW5ldyBUSFJFRS5NYXRyaXg0KCk7bTEubWFrZVJvdGF0aW9uWihhbmdsZSk7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCksdHJhbnNsYXRlOmZ1bmN0aW9uKCl7Ly8gdHJhbnNsYXRlIGdlb21ldHJ5XG52YXIgbTE7cmV0dXJuIGZ1bmN0aW9uIHRyYW5zbGF0ZSh4LHkseil7aWYobTE9PT11bmRlZmluZWQpbTE9bmV3IFRIUkVFLk1hdHJpeDQoKTttMS5tYWtlVHJhbnNsYXRpb24oeCx5LHopO3RoaXMuYXBwbHlNYXRyaXgobTEpO3JldHVybiB0aGlzO307fSgpLHNjYWxlOmZ1bmN0aW9uKCl7Ly8gc2NhbGUgZ2VvbWV0cnlcbnZhciBtMTtyZXR1cm4gZnVuY3Rpb24gc2NhbGUoeCx5LHope2lmKG0xPT09dW5kZWZpbmVkKW0xPW5ldyBUSFJFRS5NYXRyaXg0KCk7bTEubWFrZVNjYWxlKHgseSx6KTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgb2JqO3JldHVybiBmdW5jdGlvbiBsb29rQXQodmVjdG9yKXtpZihvYmo9PT11bmRlZmluZWQpb2JqPW5ldyBUSFJFRS5PYmplY3QzRCgpO29iai5sb29rQXQodmVjdG9yKTtvYmoudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChvYmoubWF0cml4KTt9O30oKSxmcm9tQnVmZmVyR2VvbWV0cnk6ZnVuY3Rpb24oZ2VvbWV0cnkpe3ZhciBzY29wZT10aGlzO3ZhciBpbmRpY2VzPWdlb21ldHJ5LmluZGV4IT09bnVsbD9nZW9tZXRyeS5pbmRleC5hcnJheTp1bmRlZmluZWQ7dmFyIGF0dHJpYnV0ZXM9Z2VvbWV0cnkuYXR0cmlidXRlczt2YXIgcG9zaXRpb25zPWF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7dmFyIG5vcm1hbHM9YXR0cmlidXRlcy5ub3JtYWwhPT11bmRlZmluZWQ/YXR0cmlidXRlcy5ub3JtYWwuYXJyYXk6dW5kZWZpbmVkO3ZhciBjb2xvcnM9YXR0cmlidXRlcy5jb2xvciE9PXVuZGVmaW5lZD9hdHRyaWJ1dGVzLmNvbG9yLmFycmF5OnVuZGVmaW5lZDt2YXIgdXZzPWF0dHJpYnV0ZXMudXYhPT11bmRlZmluZWQ/YXR0cmlidXRlcy51di5hcnJheTp1bmRlZmluZWQ7dmFyIHV2czI9YXR0cmlidXRlcy51djIhPT11bmRlZmluZWQ/YXR0cmlidXRlcy51djIuYXJyYXk6dW5kZWZpbmVkO2lmKHV2czIhPT11bmRlZmluZWQpdGhpcy5mYWNlVmVydGV4VXZzWzFdPVtdO3ZhciB0ZW1wTm9ybWFscz1bXTt2YXIgdGVtcFVWcz1bXTt2YXIgdGVtcFVWczI9W107Zm9yKHZhciBpPTAsaj0wO2k8cG9zaXRpb25zLmxlbmd0aDtpKz0zLGorPTIpe3Njb3BlLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMocG9zaXRpb25zW2ldLHBvc2l0aW9uc1tpKzFdLHBvc2l0aW9uc1tpKzJdKSk7aWYobm9ybWFscyE9PXVuZGVmaW5lZCl7dGVtcE5vcm1hbHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhub3JtYWxzW2ldLG5vcm1hbHNbaSsxXSxub3JtYWxzW2krMl0pKTt9aWYoY29sb3JzIT09dW5kZWZpbmVkKXtzY29wZS5jb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoY29sb3JzW2ldLGNvbG9yc1tpKzFdLGNvbG9yc1tpKzJdKSk7fWlmKHV2cyE9PXVuZGVmaW5lZCl7dGVtcFVWcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHV2c1tqXSx1dnNbaisxXSkpO31pZih1dnMyIT09dW5kZWZpbmVkKXt0ZW1wVVZzMi5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHV2czJbal0sdXZzMltqKzFdKSk7fX1mdW5jdGlvbiBhZGRGYWNlKGEsYixjLG1hdGVyaWFsSW5kZXgpe3ZhciB2ZXJ0ZXhOb3JtYWxzPW5vcm1hbHMhPT11bmRlZmluZWQ/W3RlbXBOb3JtYWxzW2FdLmNsb25lKCksdGVtcE5vcm1hbHNbYl0uY2xvbmUoKSx0ZW1wTm9ybWFsc1tjXS5jbG9uZSgpXTpbXTt2YXIgdmVydGV4Q29sb3JzPWNvbG9ycyE9PXVuZGVmaW5lZD9bc2NvcGUuY29sb3JzW2FdLmNsb25lKCksc2NvcGUuY29sb3JzW2JdLmNsb25lKCksc2NvcGUuY29sb3JzW2NdLmNsb25lKCldOltdO3ZhciBmYWNlPW5ldyBUSFJFRS5GYWNlMyhhLGIsYyx2ZXJ0ZXhOb3JtYWxzLHZlcnRleENvbG9ycyxtYXRlcmlhbEluZGV4KTtzY29wZS5mYWNlcy5wdXNoKGZhY2UpO2lmKHV2cyE9PXVuZGVmaW5lZCl7c2NvcGUuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt0ZW1wVVZzW2FdLmNsb25lKCksdGVtcFVWc1tiXS5jbG9uZSgpLHRlbXBVVnNbY10uY2xvbmUoKV0pO31pZih1dnMyIT09dW5kZWZpbmVkKXtzY29wZS5mYWNlVmVydGV4VXZzWzFdLnB1c2goW3RlbXBVVnMyW2FdLmNsb25lKCksdGVtcFVWczJbYl0uY2xvbmUoKSx0ZW1wVVZzMltjXS5jbG9uZSgpXSk7fX1pZihpbmRpY2VzIT09dW5kZWZpbmVkKXt2YXIgZ3JvdXBzPWdlb21ldHJ5Lmdyb3VwcztpZihncm91cHMubGVuZ3RoPjApe2Zvcih2YXIgaT0wO2k8Z3JvdXBzLmxlbmd0aDtpKyspe3ZhciBncm91cD1ncm91cHNbaV07dmFyIHN0YXJ0PWdyb3VwLnN0YXJ0O3ZhciBjb3VudD1ncm91cC5jb3VudDtmb3IodmFyIGo9c3RhcnQsamw9c3RhcnQrY291bnQ7ajxqbDtqKz0zKXthZGRGYWNlKGluZGljZXNbal0saW5kaWNlc1tqKzFdLGluZGljZXNbaisyXSxncm91cC5tYXRlcmlhbEluZGV4KTt9fX1lbHNle2Zvcih2YXIgaT0wO2k8aW5kaWNlcy5sZW5ndGg7aSs9Myl7YWRkRmFjZShpbmRpY2VzW2ldLGluZGljZXNbaSsxXSxpbmRpY2VzW2krMl0pO319fWVsc2V7Zm9yKHZhciBpPTA7aTxwb3NpdGlvbnMubGVuZ3RoLzM7aSs9Myl7YWRkRmFjZShpLGkrMSxpKzIpO319dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTtpZihnZW9tZXRyeS5ib3VuZGluZ0JveCE9PW51bGwpe3RoaXMuYm91bmRpbmdCb3g9Z2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTt9aWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUhPT1udWxsKXt0aGlzLmJvdW5kaW5nU3BoZXJlPWdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlLmNsb25lKCk7fXJldHVybiB0aGlzO30sY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgb2Zmc2V0PXRoaXMuYm91bmRpbmdCb3guY2VudGVyKCkubmVnYXRlKCk7dGhpcy50cmFuc2xhdGUob2Zmc2V0Lngsb2Zmc2V0Lnksb2Zmc2V0LnopO3JldHVybiBvZmZzZXQ7fSxub3JtYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3ZhciBjZW50ZXI9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7dmFyIHJhZGl1cz10aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1czt2YXIgcz1yYWRpdXM9PT0wPzE6MS4wL3JhZGl1czt2YXIgbWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7bWF0cml4LnNldChzLDAsMCwtcypjZW50ZXIueCwwLHMsMCwtcypjZW50ZXIueSwwLDAscywtcypjZW50ZXIueiwwLDAsMCwxKTt0aGlzLmFwcGx5TWF0cml4KG1hdHJpeCk7cmV0dXJuIHRoaXM7fSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgY2I9bmV3IFRIUkVFLlZlY3RvcjMoKSxhYj1uZXcgVEhSRUUuVmVjdG9yMygpO2Zvcih2YXIgZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXt2YXIgZmFjZT10aGlzLmZhY2VzW2ZdO3ZhciB2QT10aGlzLnZlcnRpY2VzW2ZhY2UuYV07dmFyIHZCPXRoaXMudmVydGljZXNbZmFjZS5iXTt2YXIgdkM9dGhpcy52ZXJ0aWNlc1tmYWNlLmNdO2NiLnN1YlZlY3RvcnModkMsdkIpO2FiLnN1YlZlY3RvcnModkEsdkIpO2NiLmNyb3NzKGFiKTtjYi5ub3JtYWxpemUoKTtmYWNlLm5vcm1hbC5jb3B5KGNiKTt9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbihhcmVhV2VpZ2h0ZWQpe2lmKGFyZWFXZWlnaHRlZD09PXVuZGVmaW5lZClhcmVhV2VpZ2h0ZWQ9dHJ1ZTt2YXIgdix2bCxmLGZsLGZhY2UsdmVydGljZXM7dmVydGljZXM9bmV3IEFycmF5KHRoaXMudmVydGljZXMubGVuZ3RoKTtmb3Iodj0wLHZsPXRoaXMudmVydGljZXMubGVuZ3RoO3Y8dmw7disrKXt2ZXJ0aWNlc1t2XT1uZXcgVEhSRUUuVmVjdG9yMygpO31pZihhcmVhV2VpZ2h0ZWQpey8vIHZlcnRleCBub3JtYWxzIHdlaWdodGVkIGJ5IHRyaWFuZ2xlIGFyZWFzXG4vLyBodHRwOi8vd3d3LmlxdWlsZXpsZXMub3JnL3d3dy9hcnRpY2xlcy9ub3JtYWxzL25vcm1hbHMuaHRtXG52YXIgdkEsdkIsdkM7dmFyIGNiPW5ldyBUSFJFRS5WZWN0b3IzKCksYWI9bmV3IFRIUkVFLlZlY3RvcjMoKTtmb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlPXRoaXMuZmFjZXNbZl07dkE9dGhpcy52ZXJ0aWNlc1tmYWNlLmFdO3ZCPXRoaXMudmVydGljZXNbZmFjZS5iXTt2Qz10aGlzLnZlcnRpY2VzW2ZhY2UuY107Y2Iuc3ViVmVjdG9ycyh2Qyx2Qik7YWIuc3ViVmVjdG9ycyh2QSx2Qik7Y2IuY3Jvc3MoYWIpO3ZlcnRpY2VzW2ZhY2UuYV0uYWRkKGNiKTt2ZXJ0aWNlc1tmYWNlLmJdLmFkZChjYik7dmVydGljZXNbZmFjZS5jXS5hZGQoY2IpO319ZWxzZXtmb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlPXRoaXMuZmFjZXNbZl07dmVydGljZXNbZmFjZS5hXS5hZGQoZmFjZS5ub3JtYWwpO3ZlcnRpY2VzW2ZhY2UuYl0uYWRkKGZhY2Uubm9ybWFsKTt2ZXJ0aWNlc1tmYWNlLmNdLmFkZChmYWNlLm5vcm1hbCk7fX1mb3Iodj0wLHZsPXRoaXMudmVydGljZXMubGVuZ3RoO3Y8dmw7disrKXt2ZXJ0aWNlc1t2XS5ub3JtYWxpemUoKTt9Zm9yKGY9MCxmbD10aGlzLmZhY2VzLmxlbmd0aDtmPGZsO2YrKyl7ZmFjZT10aGlzLmZhY2VzW2ZdO3ZhciB2ZXJ0ZXhOb3JtYWxzPWZhY2UudmVydGV4Tm9ybWFscztpZih2ZXJ0ZXhOb3JtYWxzLmxlbmd0aD09PTMpe3ZlcnRleE5vcm1hbHNbMF0uY29weSh2ZXJ0aWNlc1tmYWNlLmFdKTt2ZXJ0ZXhOb3JtYWxzWzFdLmNvcHkodmVydGljZXNbZmFjZS5iXSk7dmVydGV4Tm9ybWFsc1syXS5jb3B5KHZlcnRpY2VzW2ZhY2UuY10pO31lbHNle3ZlcnRleE5vcm1hbHNbMF09dmVydGljZXNbZmFjZS5hXS5jbG9uZSgpO3ZlcnRleE5vcm1hbHNbMV09dmVydGljZXNbZmFjZS5iXS5jbG9uZSgpO3ZlcnRleE5vcm1hbHNbMl09dmVydGljZXNbZmFjZS5jXS5jbG9uZSgpO319aWYodGhpcy5mYWNlcy5sZW5ndGg+MCl7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10cnVlO319LGNvbXB1dGVNb3JwaE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgaSxpbCxmLGZsLGZhY2U7Ly8gc2F2ZSBvcmlnaW5hbCBub3JtYWxzXG4vLyAtIGNyZWF0ZSB0ZW1wIHZhcmlhYmxlcyBvbiBmaXJzdCBhY2Nlc3Ncbi8vICAgb3RoZXJ3aXNlIGp1c3QgY29weSAoZm9yIGZhc3RlciByZXBlYXRlZCBjYWxscylcbmZvcihmPTAsZmw9dGhpcy5mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe2ZhY2U9dGhpcy5mYWNlc1tmXTtpZighZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbCl7ZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbD1mYWNlLm5vcm1hbC5jbG9uZSgpO31lbHNle2ZhY2UuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShmYWNlLm5vcm1hbCk7fWlmKCFmYWNlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzKWZhY2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHM9W107Zm9yKGk9MCxpbD1mYWNlLnZlcnRleE5vcm1hbHMubGVuZ3RoO2k8aWw7aSsrKXtpZighZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXSl7ZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXT1mYWNlLnZlcnRleE5vcm1hbHNbaV0uY2xvbmUoKTt9ZWxzZXtmYWNlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2ldLmNvcHkoZmFjZS52ZXJ0ZXhOb3JtYWxzW2ldKTt9fX0vLyB1c2UgdGVtcCBnZW9tZXRyeSB0byBjb21wdXRlIGZhY2UgYW5kIHZlcnRleCBub3JtYWxzIGZvciBlYWNoIG1vcnBoXG52YXIgdG1wR2VvPW5ldyBUSFJFRS5HZW9tZXRyeSgpO3RtcEdlby5mYWNlcz10aGlzLmZhY2VzO2ZvcihpPTAsaWw9dGhpcy5tb3JwaFRhcmdldHMubGVuZ3RoO2k8aWw7aSsrKXsvLyBjcmVhdGUgb24gZmlyc3QgYWNjZXNzXG5pZighdGhpcy5tb3JwaE5vcm1hbHNbaV0pe3RoaXMubW9ycGhOb3JtYWxzW2ldPXt9O3RoaXMubW9ycGhOb3JtYWxzW2ldLmZhY2VOb3JtYWxzPVtdO3RoaXMubW9ycGhOb3JtYWxzW2ldLnZlcnRleE5vcm1hbHM9W107dmFyIGRzdE5vcm1hbHNGYWNlPXRoaXMubW9ycGhOb3JtYWxzW2ldLmZhY2VOb3JtYWxzO3ZhciBkc3ROb3JtYWxzVmVydGV4PXRoaXMubW9ycGhOb3JtYWxzW2ldLnZlcnRleE5vcm1hbHM7dmFyIGZhY2VOb3JtYWwsdmVydGV4Tm9ybWFscztmb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlTm9ybWFsPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmVydGV4Tm9ybWFscz17YTpuZXcgVEhSRUUuVmVjdG9yMygpLGI6bmV3IFRIUkVFLlZlY3RvcjMoKSxjOm5ldyBUSFJFRS5WZWN0b3IzKCl9O2RzdE5vcm1hbHNGYWNlLnB1c2goZmFjZU5vcm1hbCk7ZHN0Tm9ybWFsc1ZlcnRleC5wdXNoKHZlcnRleE5vcm1hbHMpO319dmFyIG1vcnBoTm9ybWFscz10aGlzLm1vcnBoTm9ybWFsc1tpXTsvLyBzZXQgdmVydGljZXMgdG8gbW9ycGggdGFyZ2V0XG50bXBHZW8udmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbaV0udmVydGljZXM7Ly8gY29tcHV0ZSBtb3JwaCBub3JtYWxzXG50bXBHZW8uY29tcHV0ZUZhY2VOb3JtYWxzKCk7dG1wR2VvLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7Ly8gc3RvcmUgbW9ycGggbm9ybWFsc1xudmFyIGZhY2VOb3JtYWwsdmVydGV4Tm9ybWFscztmb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlPXRoaXMuZmFjZXNbZl07ZmFjZU5vcm1hbD1tb3JwaE5vcm1hbHMuZmFjZU5vcm1hbHNbZl07dmVydGV4Tm9ybWFscz1tb3JwaE5vcm1hbHMudmVydGV4Tm9ybWFsc1tmXTtmYWNlTm9ybWFsLmNvcHkoZmFjZS5ub3JtYWwpO3ZlcnRleE5vcm1hbHMuYS5jb3B5KGZhY2UudmVydGV4Tm9ybWFsc1swXSk7dmVydGV4Tm9ybWFscy5iLmNvcHkoZmFjZS52ZXJ0ZXhOb3JtYWxzWzFdKTt2ZXJ0ZXhOb3JtYWxzLmMuY29weShmYWNlLnZlcnRleE5vcm1hbHNbMl0pO319Ly8gcmVzdG9yZSBvcmlnaW5hbCBub3JtYWxzXG5mb3IoZj0wLGZsPXRoaXMuZmFjZXMubGVuZ3RoO2Y8Zmw7ZisrKXtmYWNlPXRoaXMuZmFjZXNbZl07ZmFjZS5ub3JtYWw9ZmFjZS5fX29yaWdpbmFsRmFjZU5vcm1hbDtmYWNlLnZlcnRleE5vcm1hbHM9ZmFjZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsczt9fSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7dmFyIGQ9MDt2YXIgdmVydGljZXM9dGhpcy52ZXJ0aWNlcztmb3IodmFyIGk9MCxpbD12ZXJ0aWNlcy5sZW5ndGg7aTxpbDtpKyspe2lmKGk+MCl7ZCs9dmVydGljZXNbaV0uZGlzdGFuY2VUbyh2ZXJ0aWNlc1tpLTFdKTt9dGhpcy5saW5lRGlzdGFuY2VzW2ldPWQ7fX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7aWYodGhpcy5ib3VuZGluZ0JveD09PW51bGwpe3RoaXMuYm91bmRpbmdCb3g9bmV3IFRIUkVFLkJveDMoKTt9dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpO30sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7aWYodGhpcy5ib3VuZGluZ1NwaGVyZT09PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSgpO310aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyk7fSxtZXJnZTpmdW5jdGlvbihnZW9tZXRyeSxtYXRyaXgsbWF0ZXJpYWxJbmRleE9mZnNldCl7aWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeT09PWZhbHNlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5HZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuR2VvbWV0cnkuJyxnZW9tZXRyeSk7cmV0dXJuO312YXIgbm9ybWFsTWF0cml4LHZlcnRleE9mZnNldD10aGlzLnZlcnRpY2VzLmxlbmd0aCx2ZXJ0aWNlczE9dGhpcy52ZXJ0aWNlcyx2ZXJ0aWNlczI9Z2VvbWV0cnkudmVydGljZXMsZmFjZXMxPXRoaXMuZmFjZXMsZmFjZXMyPWdlb21ldHJ5LmZhY2VzLHV2czE9dGhpcy5mYWNlVmVydGV4VXZzWzBdLHV2czI9Z2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXTtpZihtYXRlcmlhbEluZGV4T2Zmc2V0PT09dW5kZWZpbmVkKW1hdGVyaWFsSW5kZXhPZmZzZXQ9MDtpZihtYXRyaXghPT11bmRlZmluZWQpe25vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO30vLyB2ZXJ0aWNlc1xuZm9yKHZhciBpPTAsaWw9dmVydGljZXMyLmxlbmd0aDtpPGlsO2krKyl7dmFyIHZlcnRleD12ZXJ0aWNlczJbaV07dmFyIHZlcnRleENvcHk9dmVydGV4LmNsb25lKCk7aWYobWF0cml4IT09dW5kZWZpbmVkKXZlcnRleENvcHkuYXBwbHlNYXRyaXg0KG1hdHJpeCk7dmVydGljZXMxLnB1c2godmVydGV4Q29weSk7fS8vIGZhY2VzXG5mb3IoaT0wLGlsPWZhY2VzMi5sZW5ndGg7aTxpbDtpKyspe3ZhciBmYWNlPWZhY2VzMltpXSxmYWNlQ29weSxub3JtYWwsY29sb3IsZmFjZVZlcnRleE5vcm1hbHM9ZmFjZS52ZXJ0ZXhOb3JtYWxzLGZhY2VWZXJ0ZXhDb2xvcnM9ZmFjZS52ZXJ0ZXhDb2xvcnM7ZmFjZUNvcHk9bmV3IFRIUkVFLkZhY2UzKGZhY2UuYSt2ZXJ0ZXhPZmZzZXQsZmFjZS5iK3ZlcnRleE9mZnNldCxmYWNlLmMrdmVydGV4T2Zmc2V0KTtmYWNlQ29weS5ub3JtYWwuY29weShmYWNlLm5vcm1hbCk7aWYobm9ybWFsTWF0cml4IT09dW5kZWZpbmVkKXtmYWNlQ29weS5ub3JtYWwuYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7fWZvcih2YXIgaj0wLGpsPWZhY2VWZXJ0ZXhOb3JtYWxzLmxlbmd0aDtqPGpsO2orKyl7bm9ybWFsPWZhY2VWZXJ0ZXhOb3JtYWxzW2pdLmNsb25lKCk7aWYobm9ybWFsTWF0cml4IT09dW5kZWZpbmVkKXtub3JtYWwuYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7fWZhY2VDb3B5LnZlcnRleE5vcm1hbHMucHVzaChub3JtYWwpO31mYWNlQ29weS5jb2xvci5jb3B5KGZhY2UuY29sb3IpO2Zvcih2YXIgaj0wLGpsPWZhY2VWZXJ0ZXhDb2xvcnMubGVuZ3RoO2o8amw7aisrKXtjb2xvcj1mYWNlVmVydGV4Q29sb3JzW2pdO2ZhY2VDb3B5LnZlcnRleENvbG9ycy5wdXNoKGNvbG9yLmNsb25lKCkpO31mYWNlQ29weS5tYXRlcmlhbEluZGV4PWZhY2UubWF0ZXJpYWxJbmRleCttYXRlcmlhbEluZGV4T2Zmc2V0O2ZhY2VzMS5wdXNoKGZhY2VDb3B5KTt9Ly8gdXZzXG5mb3IoaT0wLGlsPXV2czIubGVuZ3RoO2k8aWw7aSsrKXt2YXIgdXY9dXZzMltpXSx1dkNvcHk9W107aWYodXY9PT11bmRlZmluZWQpe2NvbnRpbnVlO31mb3IodmFyIGo9MCxqbD11di5sZW5ndGg7ajxqbDtqKyspe3V2Q29weS5wdXNoKHV2W2pdLmNsb25lKCkpO311dnMxLnB1c2godXZDb3B5KTt9fSxtZXJnZU1lc2g6ZnVuY3Rpb24obWVzaCl7aWYobWVzaCBpbnN0YW5jZW9mIFRIUkVFLk1lc2g9PT1mYWxzZSl7Y29uc29sZS5lcnJvcignVEhSRUUuR2VvbWV0cnkubWVyZ2VNZXNoKCk6IG1lc2ggbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk1lc2guJyxtZXNoKTtyZXR1cm47fW1lc2gubWF0cml4QXV0b1VwZGF0ZSYmbWVzaC51cGRhdGVNYXRyaXgoKTt0aGlzLm1lcmdlKG1lc2guZ2VvbWV0cnksbWVzaC5tYXRyaXgpO30sLypcclxuXHQgKiBDaGVja3MgZm9yIGR1cGxpY2F0ZSB2ZXJ0aWNlcyB3aXRoIGhhc2htYXAuXHJcblx0ICogRHVwbGljYXRlZCB2ZXJ0aWNlcyBhcmUgcmVtb3ZlZFxyXG5cdCAqIGFuZCBmYWNlcycgdmVydGljZXMgYXJlIHVwZGF0ZWQuXHJcblx0ICovbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciB2ZXJ0aWNlc01hcD17fTsvLyBIYXNobWFwIGZvciBsb29raW5nIHVwIHZlcnRpY2VzIGJ5IHBvc2l0aW9uIGNvb3JkaW5hdGVzIChhbmQgbWFraW5nIHN1cmUgdGhleSBhcmUgdW5pcXVlKVxudmFyIHVuaXF1ZT1bXSxjaGFuZ2VzPVtdO3ZhciB2LGtleTt2YXIgcHJlY2lzaW9uUG9pbnRzPTQ7Ly8gbnVtYmVyIG9mIGRlY2ltYWwgcG9pbnRzLCBlLmcuIDQgZm9yIGVwc2lsb24gb2YgMC4wMDAxXG52YXIgcHJlY2lzaW9uPU1hdGgucG93KDEwLHByZWNpc2lvblBvaW50cyk7dmFyIGksaWwsZmFjZTt2YXIgaW5kaWNlcyxqLGpsO2ZvcihpPTAsaWw9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7aTxpbDtpKyspe3Y9dGhpcy52ZXJ0aWNlc1tpXTtrZXk9TWF0aC5yb3VuZCh2LngqcHJlY2lzaW9uKSsnXycrTWF0aC5yb3VuZCh2LnkqcHJlY2lzaW9uKSsnXycrTWF0aC5yb3VuZCh2LnoqcHJlY2lzaW9uKTtpZih2ZXJ0aWNlc01hcFtrZXldPT09dW5kZWZpbmVkKXt2ZXJ0aWNlc01hcFtrZXldPWk7dW5pcXVlLnB1c2godGhpcy52ZXJ0aWNlc1tpXSk7Y2hhbmdlc1tpXT11bmlxdWUubGVuZ3RoLTE7fWVsc2V7Ly9jb25zb2xlLmxvZygnRHVwbGljYXRlIHZlcnRleCBmb3VuZC4gJywgaSwgJyBjb3VsZCBiZSB1c2luZyAnLCB2ZXJ0aWNlc01hcFtrZXldKTtcbmNoYW5nZXNbaV09Y2hhbmdlc1t2ZXJ0aWNlc01hcFtrZXldXTt9fS8vIGlmIGZhY2VzIGFyZSBjb21wbGV0ZWx5IGRlZ2VuZXJhdGUgYWZ0ZXIgbWVyZ2luZyB2ZXJ0aWNlcywgd2Vcbi8vIGhhdmUgdG8gcmVtb3ZlIHRoZW0gZnJvbSB0aGUgZ2VvbWV0cnkuXG52YXIgZmFjZUluZGljZXNUb1JlbW92ZT1bXTtmb3IoaT0wLGlsPXRoaXMuZmFjZXMubGVuZ3RoO2k8aWw7aSsrKXtmYWNlPXRoaXMuZmFjZXNbaV07ZmFjZS5hPWNoYW5nZXNbZmFjZS5hXTtmYWNlLmI9Y2hhbmdlc1tmYWNlLmJdO2ZhY2UuYz1jaGFuZ2VzW2ZhY2UuY107aW5kaWNlcz1bZmFjZS5hLGZhY2UuYixmYWNlLmNdO3ZhciBkdXBJbmRleD0tMTsvLyBpZiBhbnkgZHVwbGljYXRlIHZlcnRpY2VzIGFyZSBmb3VuZCBpbiBhIEZhY2UzXG4vLyB3ZSBoYXZlIHRvIHJlbW92ZSB0aGUgZmFjZSBhcyBub3RoaW5nIGNhbiBiZSBzYXZlZFxuZm9yKHZhciBuPTA7bjwzO24rKyl7aWYoaW5kaWNlc1tuXT09PWluZGljZXNbKG4rMSklM10pe2R1cEluZGV4PW47ZmFjZUluZGljZXNUb1JlbW92ZS5wdXNoKGkpO2JyZWFrO319fWZvcihpPWZhY2VJbmRpY2VzVG9SZW1vdmUubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBpZHg9ZmFjZUluZGljZXNUb1JlbW92ZVtpXTt0aGlzLmZhY2VzLnNwbGljZShpZHgsMSk7Zm9yKGo9MCxqbD10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2o8amw7aisrKXt0aGlzLmZhY2VWZXJ0ZXhVdnNbal0uc3BsaWNlKGlkeCwxKTt9fS8vIFVzZSB1bmlxdWUgc2V0IG9mIHZlcnRpY2VzXG52YXIgZGlmZj10aGlzLnZlcnRpY2VzLmxlbmd0aC11bmlxdWUubGVuZ3RoO3RoaXMudmVydGljZXM9dW5pcXVlO3JldHVybiBkaWZmO30sc29ydEZhY2VzQnlNYXRlcmlhbEluZGV4OmZ1bmN0aW9uKCl7dmFyIGZhY2VzPXRoaXMuZmFjZXM7dmFyIGxlbmd0aD1mYWNlcy5sZW5ndGg7Ly8gdGFnIGZhY2VzXG5mb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe2ZhY2VzW2ldLl9pZD1pO30vLyBzb3J0IGZhY2VzXG5mdW5jdGlvbiBtYXRlcmlhbEluZGV4U29ydChhLGIpe3JldHVybiBhLm1hdGVyaWFsSW5kZXgtYi5tYXRlcmlhbEluZGV4O31mYWNlcy5zb3J0KG1hdGVyaWFsSW5kZXhTb3J0KTsvLyBzb3J0IHV2c1xudmFyIHV2czE9dGhpcy5mYWNlVmVydGV4VXZzWzBdO3ZhciB1dnMyPXRoaXMuZmFjZVZlcnRleFV2c1sxXTt2YXIgbmV3VXZzMSxuZXdVdnMyO2lmKHV2czEmJnV2czEubGVuZ3RoPT09bGVuZ3RoKW5ld1V2czE9W107aWYodXZzMiYmdXZzMi5sZW5ndGg9PT1sZW5ndGgpbmV3VXZzMj1bXTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhciBpZD1mYWNlc1tpXS5faWQ7aWYobmV3VXZzMSluZXdVdnMxLnB1c2godXZzMVtpZF0pO2lmKG5ld1V2czIpbmV3VXZzMi5wdXNoKHV2czJbaWRdKTt9aWYobmV3VXZzMSl0aGlzLmZhY2VWZXJ0ZXhVdnNbMF09bmV3VXZzMTtpZihuZXdVdnMyKXRoaXMuZmFjZVZlcnRleFV2c1sxXT1uZXdVdnMyO30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGRhdGE9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNCx0eXBlOidHZW9tZXRyeScsZ2VuZXJhdG9yOidHZW9tZXRyeS50b0pTT04nfX07Ly8gc3RhbmRhcmQgR2VvbWV0cnkgc2VyaWFsaXphdGlvblxuZGF0YS51dWlkPXRoaXMudXVpZDtkYXRhLnR5cGU9dGhpcy50eXBlO2lmKHRoaXMubmFtZSE9PScnKWRhdGEubmFtZT10aGlzLm5hbWU7aWYodGhpcy5wYXJhbWV0ZXJzIT09dW5kZWZpbmVkKXt2YXIgcGFyYW1ldGVycz10aGlzLnBhcmFtZXRlcnM7Zm9yKHZhciBrZXkgaW4gcGFyYW1ldGVycyl7aWYocGFyYW1ldGVyc1trZXldIT09dW5kZWZpbmVkKWRhdGFba2V5XT1wYXJhbWV0ZXJzW2tleV07fXJldHVybiBkYXRhO312YXIgdmVydGljZXM9W107Zm9yKHZhciBpPTA7aTx0aGlzLnZlcnRpY2VzLmxlbmd0aDtpKyspe3ZhciB2ZXJ0ZXg9dGhpcy52ZXJ0aWNlc1tpXTt2ZXJ0aWNlcy5wdXNoKHZlcnRleC54LHZlcnRleC55LHZlcnRleC56KTt9dmFyIGZhY2VzPVtdO3ZhciBub3JtYWxzPVtdO3ZhciBub3JtYWxzSGFzaD17fTt2YXIgY29sb3JzPVtdO3ZhciBjb2xvcnNIYXNoPXt9O3ZhciB1dnM9W107dmFyIHV2c0hhc2g9e307Zm9yKHZhciBpPTA7aTx0aGlzLmZhY2VzLmxlbmd0aDtpKyspe3ZhciBmYWNlPXRoaXMuZmFjZXNbaV07dmFyIGhhc01hdGVyaWFsPXRydWU7dmFyIGhhc0ZhY2VVdj1mYWxzZTsvLyBkZXByZWNhdGVkXG52YXIgaGFzRmFjZVZlcnRleFV2PXRoaXMuZmFjZVZlcnRleFV2c1swXVtpXSE9PXVuZGVmaW5lZDt2YXIgaGFzRmFjZU5vcm1hbD1mYWNlLm5vcm1hbC5sZW5ndGgoKT4wO3ZhciBoYXNGYWNlVmVydGV4Tm9ybWFsPWZhY2UudmVydGV4Tm9ybWFscy5sZW5ndGg+MDt2YXIgaGFzRmFjZUNvbG9yPWZhY2UuY29sb3IuciE9PTF8fGZhY2UuY29sb3IuZyE9PTF8fGZhY2UuY29sb3IuYiE9PTE7dmFyIGhhc0ZhY2VWZXJ0ZXhDb2xvcj1mYWNlLnZlcnRleENvbG9ycy5sZW5ndGg+MDt2YXIgZmFjZVR5cGU9MDtmYWNlVHlwZT1zZXRCaXQoZmFjZVR5cGUsMCwwKTsvLyBpc1F1YWRcbmZhY2VUeXBlPXNldEJpdChmYWNlVHlwZSwxLGhhc01hdGVyaWFsKTtmYWNlVHlwZT1zZXRCaXQoZmFjZVR5cGUsMixoYXNGYWNlVXYpO2ZhY2VUeXBlPXNldEJpdChmYWNlVHlwZSwzLGhhc0ZhY2VWZXJ0ZXhVdik7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDQsaGFzRmFjZU5vcm1hbCk7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDUsaGFzRmFjZVZlcnRleE5vcm1hbCk7ZmFjZVR5cGU9c2V0Qml0KGZhY2VUeXBlLDYsaGFzRmFjZUNvbG9yKTtmYWNlVHlwZT1zZXRCaXQoZmFjZVR5cGUsNyxoYXNGYWNlVmVydGV4Q29sb3IpO2ZhY2VzLnB1c2goZmFjZVR5cGUpO2ZhY2VzLnB1c2goZmFjZS5hLGZhY2UuYixmYWNlLmMpO2ZhY2VzLnB1c2goZmFjZS5tYXRlcmlhbEluZGV4KTtpZihoYXNGYWNlVmVydGV4VXYpe3ZhciBmYWNlVmVydGV4VXZzPXRoaXMuZmFjZVZlcnRleFV2c1swXVtpXTtmYWNlcy5wdXNoKGdldFV2SW5kZXgoZmFjZVZlcnRleFV2c1swXSksZ2V0VXZJbmRleChmYWNlVmVydGV4VXZzWzFdKSxnZXRVdkluZGV4KGZhY2VWZXJ0ZXhVdnNbMl0pKTt9aWYoaGFzRmFjZU5vcm1hbCl7ZmFjZXMucHVzaChnZXROb3JtYWxJbmRleChmYWNlLm5vcm1hbCkpO31pZihoYXNGYWNlVmVydGV4Tm9ybWFsKXt2YXIgdmVydGV4Tm9ybWFscz1mYWNlLnZlcnRleE5vcm1hbHM7ZmFjZXMucHVzaChnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzBdKSxnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzFdKSxnZXROb3JtYWxJbmRleCh2ZXJ0ZXhOb3JtYWxzWzJdKSk7fWlmKGhhc0ZhY2VDb2xvcil7ZmFjZXMucHVzaChnZXRDb2xvckluZGV4KGZhY2UuY29sb3IpKTt9aWYoaGFzRmFjZVZlcnRleENvbG9yKXt2YXIgdmVydGV4Q29sb3JzPWZhY2UudmVydGV4Q29sb3JzO2ZhY2VzLnB1c2goZ2V0Q29sb3JJbmRleCh2ZXJ0ZXhDb2xvcnNbMF0pLGdldENvbG9ySW5kZXgodmVydGV4Q29sb3JzWzFdKSxnZXRDb2xvckluZGV4KHZlcnRleENvbG9yc1syXSkpO319ZnVuY3Rpb24gc2V0Qml0KHZhbHVlLHBvc2l0aW9uLGVuYWJsZWQpe3JldHVybiBlbmFibGVkP3ZhbHVlfDE8PHBvc2l0aW9uOnZhbHVlJn4oMTw8cG9zaXRpb24pO31mdW5jdGlvbiBnZXROb3JtYWxJbmRleChub3JtYWwpe3ZhciBoYXNoPW5vcm1hbC54LnRvU3RyaW5nKCkrbm9ybWFsLnkudG9TdHJpbmcoKStub3JtYWwuei50b1N0cmluZygpO2lmKG5vcm1hbHNIYXNoW2hhc2hdIT09dW5kZWZpbmVkKXtyZXR1cm4gbm9ybWFsc0hhc2hbaGFzaF07fW5vcm1hbHNIYXNoW2hhc2hdPW5vcm1hbHMubGVuZ3RoLzM7bm9ybWFscy5wdXNoKG5vcm1hbC54LG5vcm1hbC55LG5vcm1hbC56KTtyZXR1cm4gbm9ybWFsc0hhc2hbaGFzaF07fWZ1bmN0aW9uIGdldENvbG9ySW5kZXgoY29sb3Ipe3ZhciBoYXNoPWNvbG9yLnIudG9TdHJpbmcoKStjb2xvci5nLnRvU3RyaW5nKCkrY29sb3IuYi50b1N0cmluZygpO2lmKGNvbG9yc0hhc2hbaGFzaF0hPT11bmRlZmluZWQpe3JldHVybiBjb2xvcnNIYXNoW2hhc2hdO31jb2xvcnNIYXNoW2hhc2hdPWNvbG9ycy5sZW5ndGg7Y29sb3JzLnB1c2goY29sb3IuZ2V0SGV4KCkpO3JldHVybiBjb2xvcnNIYXNoW2hhc2hdO31mdW5jdGlvbiBnZXRVdkluZGV4KHV2KXt2YXIgaGFzaD11di54LnRvU3RyaW5nKCkrdXYueS50b1N0cmluZygpO2lmKHV2c0hhc2hbaGFzaF0hPT11bmRlZmluZWQpe3JldHVybiB1dnNIYXNoW2hhc2hdO311dnNIYXNoW2hhc2hdPXV2cy5sZW5ndGgvMjt1dnMucHVzaCh1di54LHV2LnkpO3JldHVybiB1dnNIYXNoW2hhc2hdO31kYXRhLmRhdGE9e307ZGF0YS5kYXRhLnZlcnRpY2VzPXZlcnRpY2VzO2RhdGEuZGF0YS5ub3JtYWxzPW5vcm1hbHM7aWYoY29sb3JzLmxlbmd0aD4wKWRhdGEuZGF0YS5jb2xvcnM9Y29sb3JzO2lmKHV2cy5sZW5ndGg+MClkYXRhLmRhdGEudXZzPVt1dnNdOy8vIHRlbXBvcmFsIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmRhdGEuZGF0YS5mYWNlcz1mYWNlcztyZXR1cm4gZGF0YTt9LGNsb25lOmZ1bmN0aW9uKCl7LypcclxuXHRcdC8vIEhhbmRsZSBwcmltaXRpdmVzXHJcblxyXG5cdFx0dmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG5cdFx0aWYgKCBwYXJhbWV0ZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHR2YXIgdmFsdWVzID0gW107XHJcblxyXG5cdFx0XHRmb3IgKCB2YXIga2V5IGluIHBhcmFtZXRlcnMgKSB7XHJcblxyXG5cdFx0XHRcdHZhbHVlcy5wdXNoKCBwYXJhbWV0ZXJzWyBrZXkgXSApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGdlb21ldHJ5ID0gT2JqZWN0LmNyZWF0ZSggdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgKTtcclxuXHRcdFx0dGhpcy5jb25zdHJ1Y3Rvci5hcHBseSggZ2VvbWV0cnksIHZhbHVlcyApO1xyXG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkoIHRoaXMgKTtcclxuXHRcdCovcmV0dXJuIG5ldyBUSFJFRS5HZW9tZXRyeSgpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3ZhciB2ZXJ0aWNlcz1zb3VyY2UudmVydGljZXM7Zm9yKHZhciBpPTAsaWw9dmVydGljZXMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLnZlcnRpY2VzLnB1c2godmVydGljZXNbaV0uY2xvbmUoKSk7fXZhciBmYWNlcz1zb3VyY2UuZmFjZXM7Zm9yKHZhciBpPTAsaWw9ZmFjZXMubGVuZ3RoO2k8aWw7aSsrKXt0aGlzLmZhY2VzLnB1c2goZmFjZXNbaV0uY2xvbmUoKSk7fWZvcih2YXIgaT0wLGlsPXNvdXJjZS5mYWNlVmVydGV4VXZzLmxlbmd0aDtpPGlsO2krKyl7dmFyIGZhY2VWZXJ0ZXhVdnM9c291cmNlLmZhY2VWZXJ0ZXhVdnNbaV07aWYodGhpcy5mYWNlVmVydGV4VXZzW2ldPT09dW5kZWZpbmVkKXt0aGlzLmZhY2VWZXJ0ZXhVdnNbaV09W107fWZvcih2YXIgaj0wLGpsPWZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2o8amw7aisrKXt2YXIgdXZzPWZhY2VWZXJ0ZXhVdnNbal0sdXZzQ29weT1bXTtmb3IodmFyIGs9MCxrbD11dnMubGVuZ3RoO2s8a2w7aysrKXt2YXIgdXY9dXZzW2tdO3V2c0NvcHkucHVzaCh1di5jbG9uZSgpKTt9dGhpcy5mYWNlVmVydGV4VXZzW2ldLnB1c2godXZzQ29weSk7fX1yZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fX0pO1RIUkVFLkdlb21ldHJ5SWRDb3VudD0wOy8vIEZpbGU6c3JjL2NvcmUvRGlyZWN0R2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5EaXJlY3RHZW9tZXRyeT1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOlRIUkVFLkdlb21ldHJ5SWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nRGlyZWN0R2VvbWV0cnknO3RoaXMuaW5kaWNlcz1bXTt0aGlzLnZlcnRpY2VzPVtdO3RoaXMubm9ybWFscz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLnV2cz1bXTt0aGlzLnV2czI9W107dGhpcy5ncm91cHM9W107dGhpcy5tb3JwaFRhcmdldHM9e307dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdOy8vIHRoaXMubGluZURpc3RhbmNlcyA9IFtdO1xudGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuYm91bmRpbmdTcGhlcmU9bnVsbDsvLyB1cGRhdGUgZmxhZ3NcbnRoaXMudmVydGljZXNOZWVkVXBkYXRlPWZhbHNlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9ZmFsc2U7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWZhbHNlO3RoaXMudXZzTmVlZFVwZGF0ZT1mYWxzZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9ZmFsc2U7fTtPYmplY3QuYXNzaWduKFRIUkVFLkRpcmVjdEdlb21ldHJ5LnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtjb21wdXRlQm91bmRpbmdCb3g6VEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVCb3VuZGluZ0JveCxjb21wdXRlQm91bmRpbmdTcGhlcmU6VEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkRpcmVjdEdlb21ldHJ5OiBjb21wdXRlRmFjZU5vcm1hbHMoKSBpcyBub3QgYSBtZXRob2Qgb2YgdGhpcyB0eXBlIG9mIGdlb21ldHJ5LicpO30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkRpcmVjdEdlb21ldHJ5OiBjb21wdXRlVmVydGV4Tm9ybWFscygpIGlzIG5vdCBhIG1ldGhvZCBvZiB0aGlzIHR5cGUgb2YgZ2VvbWV0cnkuJyk7fSxjb21wdXRlR3JvdXBzOmZ1bmN0aW9uKGdlb21ldHJ5KXt2YXIgZ3JvdXA7dmFyIGdyb3Vwcz1bXTt2YXIgbWF0ZXJpYWxJbmRleDt2YXIgZmFjZXM9Z2VvbWV0cnkuZmFjZXM7Zm9yKHZhciBpPTA7aTxmYWNlcy5sZW5ndGg7aSsrKXt2YXIgZmFjZT1mYWNlc1tpXTsvLyBtYXRlcmlhbHNcbmlmKGZhY2UubWF0ZXJpYWxJbmRleCE9PW1hdGVyaWFsSW5kZXgpe21hdGVyaWFsSW5kZXg9ZmFjZS5tYXRlcmlhbEluZGV4O2lmKGdyb3VwIT09dW5kZWZpbmVkKXtncm91cC5jb3VudD1pKjMtZ3JvdXAuc3RhcnQ7Z3JvdXBzLnB1c2goZ3JvdXApO31ncm91cD17c3RhcnQ6aSozLG1hdGVyaWFsSW5kZXg6bWF0ZXJpYWxJbmRleH07fX1pZihncm91cCE9PXVuZGVmaW5lZCl7Z3JvdXAuY291bnQ9aSozLWdyb3VwLnN0YXJ0O2dyb3Vwcy5wdXNoKGdyb3VwKTt9dGhpcy5ncm91cHM9Z3JvdXBzO30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKGdlb21ldHJ5KXt2YXIgZmFjZXM9Z2VvbWV0cnkuZmFjZXM7dmFyIHZlcnRpY2VzPWdlb21ldHJ5LnZlcnRpY2VzO3ZhciBmYWNlVmVydGV4VXZzPWdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnM7dmFyIGhhc0ZhY2VWZXJ0ZXhVdj1mYWNlVmVydGV4VXZzWzBdJiZmYWNlVmVydGV4VXZzWzBdLmxlbmd0aD4wO3ZhciBoYXNGYWNlVmVydGV4VXYyPWZhY2VWZXJ0ZXhVdnNbMV0mJmZhY2VWZXJ0ZXhVdnNbMV0ubGVuZ3RoPjA7Ly8gbW9ycGhzXG52YXIgbW9ycGhUYXJnZXRzPWdlb21ldHJ5Lm1vcnBoVGFyZ2V0czt2YXIgbW9ycGhUYXJnZXRzTGVuZ3RoPW1vcnBoVGFyZ2V0cy5sZW5ndGg7dmFyIG1vcnBoVGFyZ2V0c1Bvc2l0aW9uO2lmKG1vcnBoVGFyZ2V0c0xlbmd0aD4wKXttb3JwaFRhcmdldHNQb3NpdGlvbj1bXTtmb3IodmFyIGk9MDtpPG1vcnBoVGFyZ2V0c0xlbmd0aDtpKyspe21vcnBoVGFyZ2V0c1Bvc2l0aW9uW2ldPVtdO310aGlzLm1vcnBoVGFyZ2V0cy5wb3NpdGlvbj1tb3JwaFRhcmdldHNQb3NpdGlvbjt9dmFyIG1vcnBoTm9ybWFscz1nZW9tZXRyeS5tb3JwaE5vcm1hbHM7dmFyIG1vcnBoTm9ybWFsc0xlbmd0aD1tb3JwaE5vcm1hbHMubGVuZ3RoO3ZhciBtb3JwaFRhcmdldHNOb3JtYWw7aWYobW9ycGhOb3JtYWxzTGVuZ3RoPjApe21vcnBoVGFyZ2V0c05vcm1hbD1bXTtmb3IodmFyIGk9MDtpPG1vcnBoTm9ybWFsc0xlbmd0aDtpKyspe21vcnBoVGFyZ2V0c05vcm1hbFtpXT1bXTt9dGhpcy5tb3JwaFRhcmdldHMubm9ybWFsPW1vcnBoVGFyZ2V0c05vcm1hbDt9Ly8gc2tpbnNcbnZhciBza2luSW5kaWNlcz1nZW9tZXRyeS5za2luSW5kaWNlczt2YXIgc2tpbldlaWdodHM9Z2VvbWV0cnkuc2tpbldlaWdodHM7dmFyIGhhc1NraW5JbmRpY2VzPXNraW5JbmRpY2VzLmxlbmd0aD09PXZlcnRpY2VzLmxlbmd0aDt2YXIgaGFzU2tpbldlaWdodHM9c2tpbldlaWdodHMubGVuZ3RoPT09dmVydGljZXMubGVuZ3RoOy8vXG5mb3IodmFyIGk9MDtpPGZhY2VzLmxlbmd0aDtpKyspe3ZhciBmYWNlPWZhY2VzW2ldO3RoaXMudmVydGljZXMucHVzaCh2ZXJ0aWNlc1tmYWNlLmFdLHZlcnRpY2VzW2ZhY2UuYl0sdmVydGljZXNbZmFjZS5jXSk7dmFyIHZlcnRleE5vcm1hbHM9ZmFjZS52ZXJ0ZXhOb3JtYWxzO2lmKHZlcnRleE5vcm1hbHMubGVuZ3RoPT09Myl7dGhpcy5ub3JtYWxzLnB1c2godmVydGV4Tm9ybWFsc1swXSx2ZXJ0ZXhOb3JtYWxzWzFdLHZlcnRleE5vcm1hbHNbMl0pO31lbHNle3ZhciBub3JtYWw9ZmFjZS5ub3JtYWw7dGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsLG5vcm1hbCxub3JtYWwpO312YXIgdmVydGV4Q29sb3JzPWZhY2UudmVydGV4Q29sb3JzO2lmKHZlcnRleENvbG9ycy5sZW5ndGg9PT0zKXt0aGlzLmNvbG9ycy5wdXNoKHZlcnRleENvbG9yc1swXSx2ZXJ0ZXhDb2xvcnNbMV0sdmVydGV4Q29sb3JzWzJdKTt9ZWxzZXt2YXIgY29sb3I9ZmFjZS5jb2xvcjt0aGlzLmNvbG9ycy5wdXNoKGNvbG9yLGNvbG9yLGNvbG9yKTt9aWYoaGFzRmFjZVZlcnRleFV2PT09dHJ1ZSl7dmFyIHZlcnRleFV2cz1mYWNlVmVydGV4VXZzWzBdW2ldO2lmKHZlcnRleFV2cyE9PXVuZGVmaW5lZCl7dGhpcy51dnMucHVzaCh2ZXJ0ZXhVdnNbMF0sdmVydGV4VXZzWzFdLHZlcnRleFV2c1syXSk7fWVsc2V7Y29uc29sZS53YXJuKCdUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2ICcsaSk7dGhpcy51dnMucHVzaChuZXcgVEhSRUUuVmVjdG9yMigpLG5ldyBUSFJFRS5WZWN0b3IyKCksbmV3IFRIUkVFLlZlY3RvcjIoKSk7fX1pZihoYXNGYWNlVmVydGV4VXYyPT09dHJ1ZSl7dmFyIHZlcnRleFV2cz1mYWNlVmVydGV4VXZzWzFdW2ldO2lmKHZlcnRleFV2cyE9PXVuZGVmaW5lZCl7dGhpcy51dnMyLnB1c2godmVydGV4VXZzWzBdLHZlcnRleFV2c1sxXSx2ZXJ0ZXhVdnNbMl0pO31lbHNle2NvbnNvbGUud2FybignVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdjIgJyxpKTt0aGlzLnV2czIucHVzaChuZXcgVEhSRUUuVmVjdG9yMigpLG5ldyBUSFJFRS5WZWN0b3IyKCksbmV3IFRIUkVFLlZlY3RvcjIoKSk7fX0vLyBtb3JwaHNcbmZvcih2YXIgaj0wO2o8bW9ycGhUYXJnZXRzTGVuZ3RoO2orKyl7dmFyIG1vcnBoVGFyZ2V0PW1vcnBoVGFyZ2V0c1tqXS52ZXJ0aWNlczttb3JwaFRhcmdldHNQb3NpdGlvbltqXS5wdXNoKG1vcnBoVGFyZ2V0W2ZhY2UuYV0sbW9ycGhUYXJnZXRbZmFjZS5iXSxtb3JwaFRhcmdldFtmYWNlLmNdKTt9Zm9yKHZhciBqPTA7ajxtb3JwaE5vcm1hbHNMZW5ndGg7aisrKXt2YXIgbW9ycGhOb3JtYWw9bW9ycGhOb3JtYWxzW2pdLnZlcnRleE5vcm1hbHNbaV07bW9ycGhUYXJnZXRzTm9ybWFsW2pdLnB1c2gobW9ycGhOb3JtYWwuYSxtb3JwaE5vcm1hbC5iLG1vcnBoTm9ybWFsLmMpO30vLyBza2luc1xuaWYoaGFzU2tpbkluZGljZXMpe3RoaXMuc2tpbkluZGljZXMucHVzaChza2luSW5kaWNlc1tmYWNlLmFdLHNraW5JbmRpY2VzW2ZhY2UuYl0sc2tpbkluZGljZXNbZmFjZS5jXSk7fWlmKGhhc1NraW5XZWlnaHRzKXt0aGlzLnNraW5XZWlnaHRzLnB1c2goc2tpbldlaWdodHNbZmFjZS5hXSxza2luV2VpZ2h0c1tmYWNlLmJdLHNraW5XZWlnaHRzW2ZhY2UuY10pO319dGhpcy5jb21wdXRlR3JvdXBzKGdlb21ldHJ5KTt0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT1nZW9tZXRyeS5ub3JtYWxzTmVlZFVwZGF0ZTt0aGlzLmNvbG9yc05lZWRVcGRhdGU9Z2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9Z2VvbWV0cnkudXZzTmVlZFVwZGF0ZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9Z2VvbWV0cnkuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fX0pOy8vIEZpbGU6c3JjL2NvcmUvQnVmZmVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5CdWZmZXJHZW9tZXRyeT1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOlRIUkVFLkdlb21ldHJ5SWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nQnVmZmVyR2VvbWV0cnknO3RoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuYm91bmRpbmdTcGhlcmU9bnVsbDt0aGlzLmRyYXdSYW5nZT17c3RhcnQ6MCxjb3VudDpJbmZpbml0eX07fTtPYmplY3QuYXNzaWduKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4O30sc2V0SW5kZXg6ZnVuY3Rpb24oaW5kZXgpe3RoaXMuaW5kZXg9aW5kZXg7fSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24obmFtZSxhdHRyaWJ1dGUpe2lmKGF0dHJpYnV0ZSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZT09PWZhbHNlJiZhdHRyaWJ1dGUgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkQXR0cmlidXRlKCkgbm93IGV4cGVjdHMgKCBuYW1lLCBhdHRyaWJ1dGUgKS4nKTt0aGlzLmFkZEF0dHJpYnV0ZShuYW1lLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkpO3JldHVybjt9aWYobmFtZT09PSdpbmRleCcpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS4nKTt0aGlzLnNldEluZGV4KGF0dHJpYnV0ZSk7cmV0dXJuO310aGlzLmF0dHJpYnV0ZXNbbmFtZV09YXR0cmlidXRlO3JldHVybiB0aGlzO30sZ2V0QXR0cmlidXRlOmZ1bmN0aW9uKG5hbWUpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07fSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24obmFtZSl7ZGVsZXRlIHRoaXMuYXR0cmlidXRlc1tuYW1lXTtyZXR1cm4gdGhpczt9LGFkZEdyb3VwOmZ1bmN0aW9uKHN0YXJ0LGNvdW50LG1hdGVyaWFsSW5kZXgpe3RoaXMuZ3JvdXBzLnB1c2goe3N0YXJ0OnN0YXJ0LGNvdW50OmNvdW50LG1hdGVyaWFsSW5kZXg6bWF0ZXJpYWxJbmRleCE9PXVuZGVmaW5lZD9tYXRlcmlhbEluZGV4OjB9KTt9LGNsZWFyR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy5ncm91cHM9W107fSxzZXREcmF3UmFuZ2U6ZnVuY3Rpb24oc3RhcnQsY291bnQpe3RoaXMuZHJhd1JhbmdlLnN0YXJ0PXN0YXJ0O3RoaXMuZHJhd1JhbmdlLmNvdW50PWNvdW50O30sYXBwbHlNYXRyaXg6ZnVuY3Rpb24obWF0cml4KXt2YXIgcG9zaXRpb249dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKHBvc2l0aW9uIT09dW5kZWZpbmVkKXttYXRyaXguYXBwbHlUb1ZlY3RvcjNBcnJheShwb3NpdGlvbi5hcnJheSk7cG9zaXRpb24ubmVlZHNVcGRhdGU9dHJ1ZTt9dmFyIG5vcm1hbD10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO2lmKG5vcm1hbCE9PXVuZGVmaW5lZCl7dmFyIG5vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeChtYXRyaXgpO25vcm1hbE1hdHJpeC5hcHBseVRvVmVjdG9yM0FycmF5KG5vcm1hbC5hcnJheSk7bm9ybWFsLm5lZWRzVXBkYXRlPXRydWU7fWlmKHRoaXMuYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO31pZih0aGlzLmJvdW5kaW5nU3BoZXJlIT09bnVsbCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt9cmV0dXJuIHRoaXM7fSxyb3RhdGVYOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB4LWF4aXNcbnZhciBtMTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlWChhbmdsZSl7aWYobTE9PT11bmRlZmluZWQpbTE9bmV3IFRIUkVFLk1hdHJpeDQoKTttMS5tYWtlUm90YXRpb25YKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB5LWF4aXNcbnZhciBtMTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlWShhbmdsZSl7aWYobTE9PT11bmRlZmluZWQpbTE9bmV3IFRIUkVFLk1hdHJpeDQoKTttMS5tYWtlUm90YXRpb25ZKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7Ly8gcm90YXRlIGdlb21ldHJ5IGFyb3VuZCB3b3JsZCB6LWF4aXNcbnZhciBtMTtyZXR1cm4gZnVuY3Rpb24gcm90YXRlWihhbmdsZSl7aWYobTE9PT11bmRlZmluZWQpbTE9bmV3IFRIUkVFLk1hdHJpeDQoKTttMS5tYWtlUm90YXRpb25aKGFuZ2xlKTt0aGlzLmFwcGx5TWF0cml4KG0xKTtyZXR1cm4gdGhpczt9O30oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXsvLyB0cmFuc2xhdGUgZ2VvbWV0cnlcbnZhciBtMTtyZXR1cm4gZnVuY3Rpb24gdHJhbnNsYXRlKHgseSx6KXtpZihtMT09PXVuZGVmaW5lZCltMT1uZXcgVEhSRUUuTWF0cml4NCgpO20xLm1ha2VUcmFuc2xhdGlvbih4LHkseik7dGhpcy5hcHBseU1hdHJpeChtMSk7cmV0dXJuIHRoaXM7fTt9KCksc2NhbGU6ZnVuY3Rpb24oKXsvLyBzY2FsZSBnZW9tZXRyeVxudmFyIG0xO3JldHVybiBmdW5jdGlvbiBzY2FsZSh4LHkseil7aWYobTE9PT11bmRlZmluZWQpbTE9bmV3IFRIUkVFLk1hdHJpeDQoKTttMS5tYWtlU2NhbGUoeCx5LHopO3RoaXMuYXBwbHlNYXRyaXgobTEpO3JldHVybiB0aGlzO307fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciBvYmo7cmV0dXJuIGZ1bmN0aW9uIGxvb2tBdCh2ZWN0b3Ipe2lmKG9iaj09PXVuZGVmaW5lZClvYmo9bmV3IFRIUkVFLk9iamVjdDNEKCk7b2JqLmxvb2tBdCh2ZWN0b3IpO29iai51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4KG9iai5tYXRyaXgpO307fSgpLGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIG9mZnNldD10aGlzLmJvdW5kaW5nQm94LmNlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKG9mZnNldC54LG9mZnNldC55LG9mZnNldC56KTtyZXR1cm4gb2Zmc2V0O30sc2V0RnJvbU9iamVjdDpmdW5jdGlvbihvYmplY3Qpey8vIGNvbnNvbGUubG9nKCAnVEhSRUUuQnVmZmVyR2VvbWV0cnkuc2V0RnJvbU9iamVjdCgpLiBDb252ZXJ0aW5nJywgb2JqZWN0LCB0aGlzICk7XG52YXIgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O2lmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBvaW50c3x8b2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZSl7dmFyIHBvc2l0aW9ucz1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgqMywzKTt2YXIgY29sb3JzPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKGdlb21ldHJ5LmNvbG9ycy5sZW5ndGgqMywzKTt0aGlzLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLHBvc2l0aW9ucy5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS52ZXJ0aWNlcykpO3RoaXMuYWRkQXR0cmlidXRlKCdjb2xvcicsY29sb3JzLmNvcHlDb2xvcnNBcnJheShnZW9tZXRyeS5jb2xvcnMpKTtpZihnZW9tZXRyeS5saW5lRGlzdGFuY2VzJiZnZW9tZXRyeS5saW5lRGlzdGFuY2VzLmxlbmd0aD09PWdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCl7dmFyIGxpbmVEaXN0YW5jZXM9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoZ2VvbWV0cnkubGluZURpc3RhbmNlcy5sZW5ndGgsMSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ2xpbmVEaXN0YW5jZScsbGluZURpc3RhbmNlcy5jb3B5QXJyYXkoZ2VvbWV0cnkubGluZURpc3RhbmNlcykpO31pZihnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSE9PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9Z2VvbWV0cnkuYm91bmRpbmdTcGhlcmUuY2xvbmUoKTt9aWYoZ2VvbWV0cnkuYm91bmRpbmdCb3ghPT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PWdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7fX1lbHNlIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2lmKGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpe3RoaXMuZnJvbUdlb21ldHJ5KGdlb21ldHJ5KTt9fXJldHVybiB0aGlzO30sdXBkYXRlRnJvbU9iamVjdDpmdW5jdGlvbihvYmplY3Qpe3ZhciBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7aWYob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCl7dmFyIGRpcmVjdD1nZW9tZXRyeS5fX2RpcmVjdEdlb21ldHJ5O2lmKGRpcmVjdD09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZnJvbUdlb21ldHJ5KGdlb21ldHJ5KTt9ZGlyZWN0LnZlcnRpY2VzTmVlZFVwZGF0ZT1nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU7ZGlyZWN0Lm5vcm1hbHNOZWVkVXBkYXRlPWdlb21ldHJ5Lm5vcm1hbHNOZWVkVXBkYXRlO2RpcmVjdC5jb2xvcnNOZWVkVXBkYXRlPWdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU7ZGlyZWN0LnV2c05lZWRVcGRhdGU9Z2VvbWV0cnkudXZzTmVlZFVwZGF0ZTtkaXJlY3QuZ3JvdXBzTmVlZFVwZGF0ZT1nZW9tZXRyeS5ncm91cHNOZWVkVXBkYXRlO2dlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeS5ub3JtYWxzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPWZhbHNlO2dlb21ldHJ5LnV2c05lZWRVcGRhdGU9ZmFsc2U7Z2VvbWV0cnkuZ3JvdXBzTmVlZFVwZGF0ZT1mYWxzZTtnZW9tZXRyeT1kaXJlY3Q7fWlmKGdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT09PXRydWUpe3ZhciBhdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKGF0dHJpYnV0ZSE9PXVuZGVmaW5lZCl7YXR0cmlidXRlLmNvcHlWZWN0b3Izc0FycmF5KGdlb21ldHJ5LnZlcnRpY2VzKTthdHRyaWJ1dGUubmVlZHNVcGRhdGU9dHJ1ZTt9Z2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPWZhbHNlO31pZihnZW9tZXRyeS5ub3JtYWxzTmVlZFVwZGF0ZT09PXRydWUpe3ZhciBhdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS5ub3JtYWxzKTthdHRyaWJ1dGUubmVlZHNVcGRhdGU9dHJ1ZTt9Z2VvbWV0cnkubm9ybWFsc05lZWRVcGRhdGU9ZmFsc2U7fWlmKGdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU9PT10cnVlKXt2YXIgYXR0cmlidXRlPXRoaXMuYXR0cmlidXRlcy5jb2xvcjtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5Q29sb3JzQXJyYXkoZ2VvbWV0cnkuY29sb3JzKTthdHRyaWJ1dGUubmVlZHNVcGRhdGU9dHJ1ZTt9Z2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZT1mYWxzZTt9aWYoZ2VvbWV0cnkudXZzTmVlZFVwZGF0ZSl7dmFyIGF0dHJpYnV0ZT10aGlzLmF0dHJpYnV0ZXMudXY7aWYoYXR0cmlidXRlIT09dW5kZWZpbmVkKXthdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoZ2VvbWV0cnkudXZzKTthdHRyaWJ1dGUubmVlZHNVcGRhdGU9dHJ1ZTt9Z2VvbWV0cnkudXZzTmVlZFVwZGF0ZT1mYWxzZTt9aWYoZ2VvbWV0cnkubGluZURpc3RhbmNlc05lZWRVcGRhdGUpe3ZhciBhdHRyaWJ1dGU9dGhpcy5hdHRyaWJ1dGVzLmxpbmVEaXN0YW5jZTtpZihhdHRyaWJ1dGUhPT11bmRlZmluZWQpe2F0dHJpYnV0ZS5jb3B5QXJyYXkoZ2VvbWV0cnkubGluZURpc3RhbmNlcyk7YXR0cmlidXRlLm5lZWRzVXBkYXRlPXRydWU7fWdlb21ldHJ5LmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPWZhbHNlO31pZihnZW9tZXRyeS5ncm91cHNOZWVkVXBkYXRlKXtnZW9tZXRyeS5jb21wdXRlR3JvdXBzKG9iamVjdC5nZW9tZXRyeSk7dGhpcy5ncm91cHM9Z2VvbWV0cnkuZ3JvdXBzO2dlb21ldHJ5Lmdyb3Vwc05lZWRVcGRhdGU9ZmFsc2U7fXJldHVybiB0aGlzO30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKGdlb21ldHJ5KXtnZW9tZXRyeS5fX2RpcmVjdEdlb21ldHJ5PW5ldyBUSFJFRS5EaXJlY3RHZW9tZXRyeSgpLmZyb21HZW9tZXRyeShnZW9tZXRyeSk7cmV0dXJuIHRoaXMuZnJvbURpcmVjdEdlb21ldHJ5KGdlb21ldHJ5Ll9fZGlyZWN0R2VvbWV0cnkpO30sZnJvbURpcmVjdEdlb21ldHJ5OmZ1bmN0aW9uKGdlb21ldHJ5KXt2YXIgcG9zaXRpb25zPW5ldyBGbG9hdDMyQXJyYXkoZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoKjMpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsMykuY29weVZlY3RvcjNzQXJyYXkoZ2VvbWV0cnkudmVydGljZXMpKTtpZihnZW9tZXRyeS5ub3JtYWxzLmxlbmd0aD4wKXt2YXIgbm9ybWFscz1uZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5Lm5vcm1hbHMubGVuZ3RoKjMpO3RoaXMuYWRkQXR0cmlidXRlKCdub3JtYWwnLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKS5jb3B5VmVjdG9yM3NBcnJheShnZW9tZXRyeS5ub3JtYWxzKSk7fWlmKGdlb21ldHJ5LmNvbG9ycy5sZW5ndGg+MCl7dmFyIGNvbG9ycz1uZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5LmNvbG9ycy5sZW5ndGgqMyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ2NvbG9yJyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGNvbG9ycywzKS5jb3B5Q29sb3JzQXJyYXkoZ2VvbWV0cnkuY29sb3JzKSk7fWlmKGdlb21ldHJ5LnV2cy5sZW5ndGg+MCl7dmFyIHV2cz1uZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5LnV2cy5sZW5ndGgqMik7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2JyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHV2cywyKS5jb3B5VmVjdG9yMnNBcnJheShnZW9tZXRyeS51dnMpKTt9aWYoZ2VvbWV0cnkudXZzMi5sZW5ndGg+MCl7dmFyIHV2czI9bmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS51dnMyLmxlbmd0aCoyKTt0aGlzLmFkZEF0dHJpYnV0ZSgndXYyJyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHV2czIsMikuY29weVZlY3RvcjJzQXJyYXkoZ2VvbWV0cnkudXZzMikpO31pZihnZW9tZXRyeS5pbmRpY2VzLmxlbmd0aD4wKXt2YXIgVHlwZUFycmF5PWdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aD42NTUzNT9VaW50MzJBcnJheTpVaW50MTZBcnJheTt2YXIgaW5kaWNlcz1uZXcgVHlwZUFycmF5KGdlb21ldHJ5LmluZGljZXMubGVuZ3RoKjMpO3RoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShpbmRpY2VzLDEpLmNvcHlJbmRpY2VzQXJyYXkoZ2VvbWV0cnkuaW5kaWNlcykpO30vLyBncm91cHNcbnRoaXMuZ3JvdXBzPWdlb21ldHJ5Lmdyb3VwczsvLyBtb3JwaHNcbmZvcih2YXIgbmFtZSBpbiBnZW9tZXRyeS5tb3JwaFRhcmdldHMpe3ZhciBhcnJheT1bXTt2YXIgbW9ycGhUYXJnZXRzPWdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1tuYW1lXTtmb3IodmFyIGk9MCxsPW1vcnBoVGFyZ2V0cy5sZW5ndGg7aTxsO2krKyl7dmFyIG1vcnBoVGFyZ2V0PW1vcnBoVGFyZ2V0c1tpXTt2YXIgYXR0cmlidXRlPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKG1vcnBoVGFyZ2V0Lmxlbmd0aCozLDMpO2FycmF5LnB1c2goYXR0cmlidXRlLmNvcHlWZWN0b3Izc0FycmF5KG1vcnBoVGFyZ2V0KSk7fXRoaXMubW9ycGhBdHRyaWJ1dGVzW25hbWVdPWFycmF5O30vLyBza2lubmluZ1xuaWYoZ2VvbWV0cnkuc2tpbkluZGljZXMubGVuZ3RoPjApe3ZhciBza2luSW5kaWNlcz1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShnZW9tZXRyeS5za2luSW5kaWNlcy5sZW5ndGgqNCw0KTt0aGlzLmFkZEF0dHJpYnV0ZSgnc2tpbkluZGV4Jyxza2luSW5kaWNlcy5jb3B5VmVjdG9yNHNBcnJheShnZW9tZXRyeS5za2luSW5kaWNlcykpO31pZihnZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGg+MCl7dmFyIHNraW5XZWlnaHRzPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKGdlb21ldHJ5LnNraW5XZWlnaHRzLmxlbmd0aCo0LDQpO3RoaXMuYWRkQXR0cmlidXRlKCdza2luV2VpZ2h0Jyxza2luV2VpZ2h0cy5jb3B5VmVjdG9yNHNBcnJheShnZW9tZXRyeS5za2luV2VpZ2h0cykpO30vL1xuaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUhPT1udWxsKXt0aGlzLmJvdW5kaW5nU3BoZXJlPWdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlLmNsb25lKCk7fWlmKGdlb21ldHJ5LmJvdW5kaW5nQm94IT09bnVsbCl7dGhpcy5ib3VuZGluZ0JveD1nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO31yZXR1cm4gdGhpczt9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe2lmKHRoaXMuYm91bmRpbmdCb3g9PT1udWxsKXt0aGlzLmJvdW5kaW5nQm94PW5ldyBUSFJFRS5Cb3gzKCk7fXZhciBwb3NpdGlvbnM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKHBvc2l0aW9ucyE9PXVuZGVmaW5lZCl7dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQXJyYXkocG9zaXRpb25zKTt9ZWxzZXt0aGlzLmJvdW5kaW5nQm94Lm1ha2VFbXB0eSgpO31pZihpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi54KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueSl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnopKXtjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3g6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyk7fX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGJveD1uZXcgVEhSRUUuQm94MygpO3ZhciB2ZWN0b3I9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl7aWYodGhpcy5ib3VuZGluZ1NwaGVyZT09PW51bGwpe3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSgpO312YXIgcG9zaXRpb25zPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihwb3NpdGlvbnMpe3ZhciBjZW50ZXI9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7Ym94LnNldEZyb21BcnJheShwb3NpdGlvbnMpO2JveC5jZW50ZXIoY2VudGVyKTsvLyBob3BpbmcgdG8gZmluZCBhIGJvdW5kaW5nU3BoZXJlIHdpdGggYSByYWRpdXMgc21hbGxlciB0aGFuIHRoZVxuLy8gYm91bmRpbmdTcGhlcmUgb2YgdGhlIGJvdW5kaW5nQm94OiBzcXJ0KDMpIHNtYWxsZXIgaW4gdGhlIGJlc3QgY2FzZVxudmFyIG1heFJhZGl1c1NxPTA7Zm9yKHZhciBpPTAsaWw9cG9zaXRpb25zLmxlbmd0aDtpPGlsO2krPTMpe3ZlY3Rvci5mcm9tQXJyYXkocG9zaXRpb25zLGkpO21heFJhZGl1c1NxPU1hdGgubWF4KG1heFJhZGl1c1NxLGNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh2ZWN0b3IpKTt9dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KG1heFJhZGl1c1NxKTtpZihpc05hTih0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBDb21wdXRlZCByYWRpdXMgaXMgTmFOLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyk7fX19O30oKSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxufSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe3ZhciBpbmRleD10aGlzLmluZGV4O3ZhciBhdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlczt2YXIgZ3JvdXBzPXRoaXMuZ3JvdXBzO2lmKGF0dHJpYnV0ZXMucG9zaXRpb24pe3ZhciBwb3NpdGlvbnM9YXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihhdHRyaWJ1dGVzLm5vcm1hbD09PXVuZGVmaW5lZCl7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHBvc2l0aW9ucy5sZW5ndGgpLDMpKTt9ZWxzZXsvLyByZXNldCBleGlzdGluZyBub3JtYWxzIHRvIHplcm9cbnZhciBhcnJheT1hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheTtmb3IodmFyIGk9MCxpbD1hcnJheS5sZW5ndGg7aTxpbDtpKyspe2FycmF5W2ldPTA7fX12YXIgbm9ybWFscz1hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheTt2YXIgdkEsdkIsdkMscEE9bmV3IFRIUkVFLlZlY3RvcjMoKSxwQj1uZXcgVEhSRUUuVmVjdG9yMygpLHBDPW5ldyBUSFJFRS5WZWN0b3IzKCksY2I9bmV3IFRIUkVFLlZlY3RvcjMoKSxhYj1uZXcgVEhSRUUuVmVjdG9yMygpOy8vIGluZGV4ZWQgZWxlbWVudHNcbmlmKGluZGV4KXt2YXIgaW5kaWNlcz1pbmRleC5hcnJheTtpZihncm91cHMubGVuZ3RoPT09MCl7dGhpcy5hZGRHcm91cCgwLGluZGljZXMubGVuZ3RoKTt9Zm9yKHZhciBqPTAsamw9Z3JvdXBzLmxlbmd0aDtqPGpsOysrail7dmFyIGdyb3VwPWdyb3Vwc1tqXTt2YXIgc3RhcnQ9Z3JvdXAuc3RhcnQ7dmFyIGNvdW50PWdyb3VwLmNvdW50O2Zvcih2YXIgaT1zdGFydCxpbD1zdGFydCtjb3VudDtpPGlsO2krPTMpe3ZBPWluZGljZXNbaSswXSozO3ZCPWluZGljZXNbaSsxXSozO3ZDPWluZGljZXNbaSsyXSozO3BBLmZyb21BcnJheShwb3NpdGlvbnMsdkEpO3BCLmZyb21BcnJheShwb3NpdGlvbnMsdkIpO3BDLmZyb21BcnJheShwb3NpdGlvbnMsdkMpO2NiLnN1YlZlY3RvcnMocEMscEIpO2FiLnN1YlZlY3RvcnMocEEscEIpO2NiLmNyb3NzKGFiKTtub3JtYWxzW3ZBXSs9Y2IueDtub3JtYWxzW3ZBKzFdKz1jYi55O25vcm1hbHNbdkErMl0rPWNiLno7bm9ybWFsc1t2Ql0rPWNiLng7bm9ybWFsc1t2QisxXSs9Y2IueTtub3JtYWxzW3ZCKzJdKz1jYi56O25vcm1hbHNbdkNdKz1jYi54O25vcm1hbHNbdkMrMV0rPWNiLnk7bm9ybWFsc1t2QysyXSs9Y2Iuejt9fX1lbHNley8vIG5vbi1pbmRleGVkIGVsZW1lbnRzICh1bmNvbm5lY3RlZCB0cmlhbmdsZSBzb3VwKVxuZm9yKHZhciBpPTAsaWw9cG9zaXRpb25zLmxlbmd0aDtpPGlsO2krPTkpe3BBLmZyb21BcnJheShwb3NpdGlvbnMsaSk7cEIuZnJvbUFycmF5KHBvc2l0aW9ucyxpKzMpO3BDLmZyb21BcnJheShwb3NpdGlvbnMsaSs2KTtjYi5zdWJWZWN0b3JzKHBDLHBCKTthYi5zdWJWZWN0b3JzKHBBLHBCKTtjYi5jcm9zcyhhYik7bm9ybWFsc1tpXT1jYi54O25vcm1hbHNbaSsxXT1jYi55O25vcm1hbHNbaSsyXT1jYi56O25vcm1hbHNbaSszXT1jYi54O25vcm1hbHNbaSs0XT1jYi55O25vcm1hbHNbaSs1XT1jYi56O25vcm1hbHNbaSs2XT1jYi54O25vcm1hbHNbaSs3XT1jYi55O25vcm1hbHNbaSs4XT1jYi56O319dGhpcy5ub3JtYWxpemVOb3JtYWxzKCk7YXR0cmlidXRlcy5ub3JtYWwubmVlZHNVcGRhdGU9dHJ1ZTt9fSxtZXJnZTpmdW5jdGlvbihnZW9tZXRyeSxvZmZzZXQpe2lmKGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk9PT1mYWxzZSl7Y29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LicsZ2VvbWV0cnkpO3JldHVybjt9aWYob2Zmc2V0PT09dW5kZWZpbmVkKW9mZnNldD0wO3ZhciBhdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlcztmb3IodmFyIGtleSBpbiBhdHRyaWJ1dGVzKXtpZihnZW9tZXRyeS5hdHRyaWJ1dGVzW2tleV09PT11bmRlZmluZWQpY29udGludWU7dmFyIGF0dHJpYnV0ZTE9YXR0cmlidXRlc1trZXldO3ZhciBhdHRyaWJ1dGVBcnJheTE9YXR0cmlidXRlMS5hcnJheTt2YXIgYXR0cmlidXRlMj1nZW9tZXRyeS5hdHRyaWJ1dGVzW2tleV07dmFyIGF0dHJpYnV0ZUFycmF5Mj1hdHRyaWJ1dGUyLmFycmF5O3ZhciBhdHRyaWJ1dGVTaXplPWF0dHJpYnV0ZTIuaXRlbVNpemU7Zm9yKHZhciBpPTAsaj1hdHRyaWJ1dGVTaXplKm9mZnNldDtpPGF0dHJpYnV0ZUFycmF5Mi5sZW5ndGg7aSsrLGorKyl7YXR0cmlidXRlQXJyYXkxW2pdPWF0dHJpYnV0ZUFycmF5MltpXTt9fXJldHVybiB0aGlzO30sbm9ybWFsaXplTm9ybWFsczpmdW5jdGlvbigpe3ZhciBub3JtYWxzPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7dmFyIHgseSx6LG47Zm9yKHZhciBpPTAsaWw9bm9ybWFscy5sZW5ndGg7aTxpbDtpKz0zKXt4PW5vcm1hbHNbaV07eT1ub3JtYWxzW2krMV07ej1ub3JtYWxzW2krMl07bj0xLjAvTWF0aC5zcXJ0KHgqeCt5Knkreip6KTtub3JtYWxzW2ldKj1uO25vcm1hbHNbaSsxXSo9bjtub3JtYWxzW2krMl0qPW47fX0sdG9Ob25JbmRleGVkOmZ1bmN0aW9uKCl7aWYodGhpcy5pbmRleD09PW51bGwpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnkudG9Ob25JbmRleGVkKCk6IEdlb21ldHJ5IGlzIGFscmVhZHkgbm9uLWluZGV4ZWQuJyk7cmV0dXJuIHRoaXM7fXZhciBnZW9tZXRyeTI9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7dmFyIGluZGljZXM9dGhpcy5pbmRleC5hcnJheTt2YXIgYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7Zm9yKHZhciBuYW1lIGluIGF0dHJpYnV0ZXMpe3ZhciBhdHRyaWJ1dGU9YXR0cmlidXRlc1tuYW1lXTt2YXIgYXJyYXk9YXR0cmlidXRlLmFycmF5O3ZhciBpdGVtU2l6ZT1hdHRyaWJ1dGUuaXRlbVNpemU7dmFyIGFycmF5Mj1uZXcgYXJyYXkuY29uc3RydWN0b3IoaW5kaWNlcy5sZW5ndGgqaXRlbVNpemUpO3ZhciBpbmRleD0wLGluZGV4Mj0wO2Zvcih2YXIgaT0wLGw9aW5kaWNlcy5sZW5ndGg7aTxsO2krKyl7aW5kZXg9aW5kaWNlc1tpXSppdGVtU2l6ZTtmb3IodmFyIGo9MDtqPGl0ZW1TaXplO2orKyl7YXJyYXkyW2luZGV4MisrXT1hcnJheVtpbmRleCsrXTt9fWdlb21ldHJ5Mi5hZGRBdHRyaWJ1dGUobmFtZSxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGFycmF5MixpdGVtU2l6ZSkpO31yZXR1cm4gZ2VvbWV0cnkyO30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGRhdGE9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNCx0eXBlOidCdWZmZXJHZW9tZXRyeScsZ2VuZXJhdG9yOidCdWZmZXJHZW9tZXRyeS50b0pTT04nfX07Ly8gc3RhbmRhcmQgQnVmZmVyR2VvbWV0cnkgc2VyaWFsaXphdGlvblxuZGF0YS51dWlkPXRoaXMudXVpZDtkYXRhLnR5cGU9dGhpcy50eXBlO2lmKHRoaXMubmFtZSE9PScnKWRhdGEubmFtZT10aGlzLm5hbWU7aWYodGhpcy5wYXJhbWV0ZXJzIT09dW5kZWZpbmVkKXt2YXIgcGFyYW1ldGVycz10aGlzLnBhcmFtZXRlcnM7Zm9yKHZhciBrZXkgaW4gcGFyYW1ldGVycyl7aWYocGFyYW1ldGVyc1trZXldIT09dW5kZWZpbmVkKWRhdGFba2V5XT1wYXJhbWV0ZXJzW2tleV07fXJldHVybiBkYXRhO31kYXRhLmRhdGE9e2F0dHJpYnV0ZXM6e319O3ZhciBpbmRleD10aGlzLmluZGV4O2lmKGluZGV4IT09bnVsbCl7dmFyIGFycmF5PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGluZGV4LmFycmF5KTtkYXRhLmRhdGEuaW5kZXg9e3R5cGU6aW5kZXguYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTphcnJheX07fXZhciBhdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlcztmb3IodmFyIGtleSBpbiBhdHRyaWJ1dGVzKXt2YXIgYXR0cmlidXRlPWF0dHJpYnV0ZXNba2V5XTt2YXIgYXJyYXk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXR0cmlidXRlLmFycmF5KTtkYXRhLmRhdGEuYXR0cmlidXRlc1trZXldPXtpdGVtU2l6ZTphdHRyaWJ1dGUuaXRlbVNpemUsdHlwZTphdHRyaWJ1dGUuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTphcnJheSxub3JtYWxpemVkOmF0dHJpYnV0ZS5ub3JtYWxpemVkfTt9dmFyIGdyb3Vwcz10aGlzLmdyb3VwcztpZihncm91cHMubGVuZ3RoPjApe2RhdGEuZGF0YS5ncm91cHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShncm91cHMpKTt9dmFyIGJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdTcGhlcmU7aWYoYm91bmRpbmdTcGhlcmUhPT1udWxsKXtkYXRhLmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjpib3VuZGluZ1NwaGVyZS5jZW50ZXIudG9BcnJheSgpLHJhZGl1czpib3VuZGluZ1NwaGVyZS5yYWRpdXN9O31yZXR1cm4gZGF0YTt9LGNsb25lOmZ1bmN0aW9uKCl7LypcclxuXHRcdC8vIEhhbmRsZSBwcmltaXRpdmVzXHJcblxyXG5cdFx0dmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG5cdFx0aWYgKCBwYXJhbWV0ZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHR2YXIgdmFsdWVzID0gW107XHJcblxyXG5cdFx0XHRmb3IgKCB2YXIga2V5IGluIHBhcmFtZXRlcnMgKSB7XHJcblxyXG5cdFx0XHRcdHZhbHVlcy5wdXNoKCBwYXJhbWV0ZXJzWyBrZXkgXSApO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGdlb21ldHJ5ID0gT2JqZWN0LmNyZWF0ZSggdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgKTtcclxuXHRcdFx0dGhpcy5jb25zdHJ1Y3Rvci5hcHBseSggZ2VvbWV0cnksIHZhbHVlcyApO1xyXG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkoIHRoaXMgKTtcclxuXHRcdCovcmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7dmFyIGluZGV4PXNvdXJjZS5pbmRleDtpZihpbmRleCE9PW51bGwpe3RoaXMuc2V0SW5kZXgoaW5kZXguY2xvbmUoKSk7fXZhciBhdHRyaWJ1dGVzPXNvdXJjZS5hdHRyaWJ1dGVzO2Zvcih2YXIgbmFtZSBpbiBhdHRyaWJ1dGVzKXt2YXIgYXR0cmlidXRlPWF0dHJpYnV0ZXNbbmFtZV07dGhpcy5hZGRBdHRyaWJ1dGUobmFtZSxhdHRyaWJ1dGUuY2xvbmUoKSk7fXZhciBncm91cHM9c291cmNlLmdyb3Vwcztmb3IodmFyIGk9MCxsPWdyb3Vwcy5sZW5ndGg7aTxsO2krKyl7dmFyIGdyb3VwPWdyb3Vwc1tpXTt0aGlzLmFkZEdyb3VwKGdyb3VwLnN0YXJ0LGdyb3VwLmNvdW50LGdyb3VwLm1hdGVyaWFsSW5kZXgpO31yZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fX0pO1RIUkVFLkJ1ZmZlckdlb21ldHJ5Lk1heEluZGV4PTY1NTM1Oy8vIEZpbGU6c3JjL2NvcmUvSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGJlbmFhZGFtcyAvIGh0dHBzOi8vdHdpdHRlci5jb20vYmVuX2FfYWRhbXNcclxuICovVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnknO3RoaXMubWF4SW5zdGFuY2VkQ291bnQ9dW5kZWZpbmVkO307VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk7VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmFkZEdyb3VwPWZ1bmN0aW9uKHN0YXJ0LGNvdW50LGluc3RhbmNlcyl7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6c3RhcnQsY291bnQ6Y291bnQsaW5zdGFuY2VzOmluc3RhbmNlc30pO307VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXt2YXIgaW5kZXg9c291cmNlLmluZGV4O2lmKGluZGV4IT09bnVsbCl7dGhpcy5zZXRJbmRleChpbmRleC5jbG9uZSgpKTt9dmFyIGF0dHJpYnV0ZXM9c291cmNlLmF0dHJpYnV0ZXM7Zm9yKHZhciBuYW1lIGluIGF0dHJpYnV0ZXMpe3ZhciBhdHRyaWJ1dGU9YXR0cmlidXRlc1tuYW1lXTt0aGlzLmFkZEF0dHJpYnV0ZShuYW1lLGF0dHJpYnV0ZS5jbG9uZSgpKTt9dmFyIGdyb3Vwcz1zb3VyY2UuZ3JvdXBzO2Zvcih2YXIgaT0wLGw9Z3JvdXBzLmxlbmd0aDtpPGw7aSsrKXt2YXIgZ3JvdXA9Z3JvdXBzW2ldO3RoaXMuYWRkR3JvdXAoZ3JvdXAuc3RhcnQsZ3JvdXAuY291bnQsZ3JvdXAuaW5zdGFuY2VzKTt9cmV0dXJuIHRoaXM7fTsvLyBGaWxlOnNyYy9jb3JlL1VuaWZvcm0uanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Vbmlmb3JtPWZ1bmN0aW9uKHZhbHVlKXtpZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyl7Y29uc29sZS53YXJuKCdUSFJFRS5Vbmlmb3JtOiBUeXBlIHBhcmFtZXRlciBpcyBubyBsb25nZXIgbmVlZGVkLicpO3ZhbHVlPWFyZ3VtZW50c1sxXTt9dGhpcy52YWx1ZT12YWx1ZTt0aGlzLmR5bmFtaWM9ZmFsc2U7fTtUSFJFRS5Vbmlmb3JtLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVW5pZm9ybSxvblVwZGF0ZTpmdW5jdGlvbihjYWxsYmFjayl7dGhpcy5keW5hbWljPXRydWU7dGhpcy5vblVwZGF0ZUNhbGxiYWNrPWNhbGxiYWNrO3JldHVybiB0aGlzO319Oy8vIEZpbGU6c3JjL2FuaW1hdGlvbi9BbmltYXRpb25BY3Rpb24uanNcbi8qKlxyXG4gKlxyXG4gKiBBY3Rpb24gcHJvdmlkZWQgYnkgQW5pbWF0aW9uTWl4ZXIgZm9yIHNjaGVkdWxpbmcgY2xpcCBwbGF5YmFjayBvbiBzcGVjaWZpY1xyXG4gKiBvYmplY3RzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJlbiBIb3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvL1xyXG4gKiBAYXV0aG9yIERhdmlkIFNhcm5vIC8gaHR0cDovL2xpZ2h0aGF1cy51cy9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKlxyXG4gKi9USFJFRS5BbmltYXRpb25BY3Rpb249ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5BbmltYXRpb25BY3Rpb246IFwiK1wiVXNlIG1peGVyLmNsaXBBY3Rpb24gZm9yIGNvbnN0cnVjdGlvbi5cIik7fTtUSFJFRS5BbmltYXRpb25BY3Rpb24uX25ldz1mdW5jdGlvbiBBbmltYXRpb25BY3Rpb24obWl4ZXIsY2xpcCxsb2NhbFJvb3Qpe3RoaXMuX21peGVyPW1peGVyO3RoaXMuX2NsaXA9Y2xpcDt0aGlzLl9sb2NhbFJvb3Q9bG9jYWxSb290fHxudWxsO3ZhciB0cmFja3M9Y2xpcC50cmFja3MsblRyYWNrcz10cmFja3MubGVuZ3RoLGludGVycG9sYW50cz1uZXcgQXJyYXkoblRyYWNrcyk7dmFyIGludGVycG9sYW50U2V0dGluZ3M9e2VuZGluZ1N0YXJ0OlRIUkVFLlplcm9DdXJ2YXR1cmVFbmRpbmcsZW5kaW5nRW5kOlRIUkVFLlplcm9DdXJ2YXR1cmVFbmRpbmd9O2Zvcih2YXIgaT0wO2khPT1uVHJhY2tzOysraSl7dmFyIGludGVycG9sYW50PXRyYWNrc1tpXS5jcmVhdGVJbnRlcnBvbGFudChudWxsKTtpbnRlcnBvbGFudHNbaV09aW50ZXJwb2xhbnQ7aW50ZXJwb2xhbnQuc2V0dGluZ3M9aW50ZXJwb2xhbnRTZXR0aW5nczt9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncz1pbnRlcnBvbGFudFNldHRpbmdzO3RoaXMuX2ludGVycG9sYW50cz1pbnRlcnBvbGFudHM7Ly8gYm91bmQgYnkgdGhlIG1peGVyXG4vLyBpbnNpZGU6IFByb3BlcnR5TWl4ZXIgKG1hbmFnZWQgYnkgdGhlIG1peGVyKVxudGhpcy5fcHJvcGVydHlCaW5kaW5ncz1uZXcgQXJyYXkoblRyYWNrcyk7dGhpcy5fY2FjaGVJbmRleD1udWxsOy8vIGZvciB0aGUgbWVtb3J5IG1hbmFnZXJcbnRoaXMuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDsvLyBmb3IgdGhlIG1lbW9yeSBtYW5hZ2VyXG50aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsO3RoaXMuX3dlaWdodEludGVycG9sYW50PW51bGw7dGhpcy5sb29wPVRIUkVFLkxvb3BSZXBlYXQ7dGhpcy5fbG9vcENvdW50PS0xOy8vIGdsb2JhbCBtaXhlciB0aW1lIHdoZW4gdGhlIGFjdGlvbiBpcyB0byBiZSBzdGFydGVkXG4vLyBpdCdzIHNldCBiYWNrIHRvICdudWxsJyB1cG9uIHN0YXJ0IG9mIHRoZSBhY3Rpb25cbnRoaXMuX3N0YXJ0VGltZT1udWxsOy8vIHNjYWxlZCBsb2NhbCB0aW1lIG9mIHRoZSBhY3Rpb25cbi8vIGdldHMgY2xhbXBlZCBvciB3cmFwcGVkIHRvIDAuLmNsaXAuZHVyYXRpb24gYWNjb3JkaW5nIHRvIGxvb3BcbnRoaXMudGltZT0wO3RoaXMudGltZVNjYWxlPTE7dGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPTE7dGhpcy53ZWlnaHQ9MTt0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9MTt0aGlzLnJlcGV0aXRpb25zPUluZmluaXR5Oy8vIG5vLiBvZiByZXBldGl0aW9ucyB3aGVuIGxvb3BpbmdcbnRoaXMucGF1c2VkPWZhbHNlOy8vIGZhbHNlIC0+IHplcm8gZWZmZWN0aXZlIHRpbWUgc2NhbGVcbnRoaXMuZW5hYmxlZD10cnVlOy8vIHRydWUgLT4gemVybyBlZmZlY3RpdmUgd2VpZ2h0XG50aGlzLmNsYW1wV2hlbkZpbmlzaGVkPWZhbHNlOy8vIGtlZXAgZmVlZGluZyB0aGUgbGFzdCBmcmFtZT9cbnRoaXMuemVyb1Nsb3BlQXRTdGFydD10cnVlOy8vIGZvciBzbW9vdGggaW50ZXJwb2xhdGlvbiB3L28gc2VwYXJhdGVcbnRoaXMuemVyb1Nsb3BlQXRFbmQ9dHJ1ZTsvLyBjbGlwcyBmb3Igc3RhcnQsIGxvb3AgYW5kIGVuZFxufTtUSFJFRS5BbmltYXRpb25BY3Rpb24uX25ldy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkFuaW1hdGlvbkFjdGlvbi5fbmV3LC8vIFN0YXRlICYgU2NoZWR1bGluZ1xucGxheTpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpczt9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLl9taXhlci5fZGVhY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpcy5yZXNldCgpO30scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlZD1mYWxzZTt0aGlzLmVuYWJsZWQ9dHJ1ZTt0aGlzLnRpbWU9MDsvLyByZXN0YXJ0IGNsaXBcbnRoaXMuX2xvb3BDb3VudD0tMTsvLyBmb3JnZXQgcHJldmlvdXMgbG9vcHNcbnRoaXMuX3N0YXJ0VGltZT1udWxsOy8vIGZvcmdldCBzY2hlZHVsaW5nXG5yZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKTt9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBzdGFydD10aGlzLl9zdGFydFRpbWU7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiZ0aGlzLnRpbWVTY2FsZSE9PTAmJnRoaXMuX3N0YXJ0VGltZT09PW51bGwmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKTt9LC8vIHJldHVybiB0cnVlIHdoZW4gcGxheSBoYXMgYmVlbiBjYWxsZWRcbmlzU2NoZWR1bGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKTt9LHN0YXJ0QXQ6ZnVuY3Rpb24odGltZSl7dGhpcy5fc3RhcnRUaW1lPXRpbWU7cmV0dXJuIHRoaXM7fSxzZXRMb29wOmZ1bmN0aW9uKG1vZGUscmVwZXRpdGlvbnMpe3RoaXMubG9vcD1tb2RlO3RoaXMucmVwZXRpdGlvbnM9cmVwZXRpdGlvbnM7cmV0dXJuIHRoaXM7fSwvLyBXZWlnaHRcbi8vIHNldCB0aGUgd2VpZ2h0IHN0b3BwaW5nIGFueSBzY2hlZHVsZWQgZmFkaW5nXG4vLyBhbHRob3VnaCAuZW5hYmxlZCA9IGZhbHNlIHlpZWxkcyBhbiBlZmZlY3RpdmUgd2VpZ2h0IG9mIHplcm8sIHRoaXNcbi8vIG1ldGhvZCBkb2VzICpub3QqIGNoYW5nZSAuZW5hYmxlZCwgYmVjYXVzZSBpdCB3b3VsZCBiZSBjb25mdXNpbmdcbnNldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbih3ZWlnaHQpe3RoaXMud2VpZ2h0PXdlaWdodDsvLyBub3RlOiBzYW1lIGxvZ2ljIGFzIHdoZW4gdXBkYXRlZCBhdCBydW50aW1lXG50aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy5lbmFibGVkP3dlaWdodDowO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKTt9LC8vIHJldHVybiB0aGUgd2VpZ2h0IGNvbnNpZGVyaW5nIGZhZGluZyBhbmQgLmVuYWJsZWRcbmdldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ7fSxmYWRlSW46ZnVuY3Rpb24oZHVyYXRpb24pe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhkdXJhdGlvbiwwLDEpO30sZmFkZU91dDpmdW5jdGlvbihkdXJhdGlvbil7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGR1cmF0aW9uLDEsMCk7fSxjcm9zc0ZhZGVGcm9tOmZ1bmN0aW9uKGZhZGVPdXRBY3Rpb24sZHVyYXRpb24sd2FycCl7dmFyIG1peGVyPXRoaXMuX21peGVyO2ZhZGVPdXRBY3Rpb24uZmFkZU91dChkdXJhdGlvbik7dGhpcy5mYWRlSW4oZHVyYXRpb24pO2lmKHdhcnApe3ZhciBmYWRlSW5EdXJhdGlvbj10aGlzLl9jbGlwLmR1cmF0aW9uLGZhZGVPdXREdXJhdGlvbj1mYWRlT3V0QWN0aW9uLl9jbGlwLmR1cmF0aW9uLHN0YXJ0RW5kUmF0aW89ZmFkZU91dER1cmF0aW9uL2ZhZGVJbkR1cmF0aW9uLGVuZFN0YXJ0UmF0aW89ZmFkZUluRHVyYXRpb24vZmFkZU91dER1cmF0aW9uO2ZhZGVPdXRBY3Rpb24ud2FycCgxLjAsc3RhcnRFbmRSYXRpbyxkdXJhdGlvbik7dGhpcy53YXJwKGVuZFN0YXJ0UmF0aW8sMS4wLGR1cmF0aW9uKTt9cmV0dXJuIHRoaXM7fSxjcm9zc0ZhZGVUbzpmdW5jdGlvbihmYWRlSW5BY3Rpb24sZHVyYXRpb24sd2FycCl7cmV0dXJuIGZhZGVJbkFjdGlvbi5jcm9zc0ZhZGVGcm9tKHRoaXMsZHVyYXRpb24sd2FycCk7fSxzdG9wRmFkaW5nOmZ1bmN0aW9uKCl7dmFyIHdlaWdodEludGVycG9sYW50PXRoaXMuX3dlaWdodEludGVycG9sYW50O2lmKHdlaWdodEludGVycG9sYW50IT09bnVsbCl7dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbDt0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQod2VpZ2h0SW50ZXJwb2xhbnQpO31yZXR1cm4gdGhpczt9LC8vIFRpbWUgU2NhbGUgQ29udHJvbFxuLy8gc2V0IHRoZSB3ZWlnaHQgc3RvcHBpbmcgYW55IHNjaGVkdWxlZCB3YXJwaW5nXG4vLyBhbHRob3VnaCAucGF1c2VkID0gdHJ1ZSB5aWVsZHMgYW4gZWZmZWN0aXZlIHRpbWUgc2NhbGUgb2YgemVybywgdGhpc1xuLy8gbWV0aG9kIGRvZXMgKm5vdCogY2hhbmdlIC5wYXVzZWQsIGJlY2F1c2UgaXQgd291bGQgYmUgY29uZnVzaW5nXG5zZXRFZmZlY3RpdmVUaW1lU2NhbGU6ZnVuY3Rpb24odGltZVNjYWxlKXt0aGlzLnRpbWVTY2FsZT10aW1lU2NhbGU7dGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPXRoaXMucGF1c2VkPzA6dGltZVNjYWxlO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCk7fSwvLyByZXR1cm4gdGhlIHRpbWUgc2NhbGUgY29uc2lkZXJpbmcgd2FycGluZyBhbmQgLnBhdXNlZFxuZ2V0RWZmZWN0aXZlVGltZVNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZTt9LHNldER1cmF0aW9uOmZ1bmN0aW9uKGR1cmF0aW9uKXt0aGlzLnRpbWVTY2FsZT10aGlzLl9jbGlwLmR1cmF0aW9uL2R1cmF0aW9uO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCk7fSxzeW5jV2l0aDpmdW5jdGlvbihhY3Rpb24pe3RoaXMudGltZT1hY3Rpb24udGltZTt0aGlzLnRpbWVTY2FsZT1hY3Rpb24udGltZVNjYWxlO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCk7fSxoYWx0OmZ1bmN0aW9uKGR1cmF0aW9uKXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLGR1cmF0aW9uKTt9LHdhcnA6ZnVuY3Rpb24oc3RhcnRUaW1lU2NhbGUsZW5kVGltZVNjYWxlLGR1cmF0aW9uKXt2YXIgbWl4ZXI9dGhpcy5fbWl4ZXIsbm93PW1peGVyLnRpbWUsaW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQsdGltZVNjYWxlPXRoaXMudGltZVNjYWxlO2lmKGludGVycG9sYW50PT09bnVsbCl7aW50ZXJwb2xhbnQ9bWl4ZXIuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSx0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1pbnRlcnBvbGFudDt9dmFyIHRpbWVzPWludGVycG9sYW50LnBhcmFtZXRlclBvc2l0aW9ucyx2YWx1ZXM9aW50ZXJwb2xhbnQuc2FtcGxlVmFsdWVzO3RpbWVzWzBdPW5vdzt0aW1lc1sxXT1ub3crZHVyYXRpb247dmFsdWVzWzBdPXN0YXJ0VGltZVNjYWxlL3RpbWVTY2FsZTt2YWx1ZXNbMV09ZW5kVGltZVNjYWxlL3RpbWVTY2FsZTtyZXR1cm4gdGhpczt9LHN0b3BXYXJwaW5nOmZ1bmN0aW9uKCl7dmFyIHRpbWVTY2FsZUludGVycG9sYW50PXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKHRpbWVTY2FsZUludGVycG9sYW50IT09bnVsbCl7dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9bnVsbDt0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQodGltZVNjYWxlSW50ZXJwb2xhbnQpO31yZXR1cm4gdGhpczt9LC8vIE9iamVjdCBBY2Nlc3NvcnNcbmdldE1peGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21peGVyO30sZ2V0Q2xpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGlwO30sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fHRoaXMuX21peGVyLl9yb290O30sLy8gSW50ZXJuYVxuX3VwZGF0ZTpmdW5jdGlvbih0aW1lLGRlbHRhVGltZSx0aW1lRGlyZWN0aW9uLGFjY3VJbmRleCl7Ly8gY2FsbGVkIGJ5IHRoZSBtaXhlclxudmFyIHN0YXJ0VGltZT10aGlzLl9zdGFydFRpbWU7aWYoc3RhcnRUaW1lIT09bnVsbCl7Ly8gY2hlY2sgZm9yIHNjaGVkdWxlZCBzdGFydCBvZiBhY3Rpb25cbnZhciB0aW1lUnVubmluZz0odGltZS1zdGFydFRpbWUpKnRpbWVEaXJlY3Rpb247aWYodGltZVJ1bm5pbmc8MHx8dGltZURpcmVjdGlvbj09PTApe3JldHVybjsvLyB5ZXQgdG8gY29tZSAvIGRvbid0IGRlY2lkZSB3aGVuIGRlbHRhID0gMFxufS8vIHN0YXJ0XG50aGlzLl9zdGFydFRpbWU9bnVsbDsvLyB1bnNjaGVkdWxlXG5kZWx0YVRpbWU9dGltZURpcmVjdGlvbip0aW1lUnVubmluZzt9Ly8gYXBwbHkgdGltZSBzY2FsZSBhbmQgYWR2YW5jZSB0aW1lXG5kZWx0YVRpbWUqPXRoaXMuX3VwZGF0ZVRpbWVTY2FsZSh0aW1lKTt2YXIgY2xpcFRpbWU9dGhpcy5fdXBkYXRlVGltZShkZWx0YVRpbWUpOy8vIG5vdGU6IF91cGRhdGVUaW1lIG1heSBkaXNhYmxlIHRoZSBhY3Rpb24gcmVzdWx0aW5nIGluXG4vLyBhbiBlZmZlY3RpdmUgd2VpZ2h0IG9mIDBcbnZhciB3ZWlnaHQ9dGhpcy5fdXBkYXRlV2VpZ2h0KHRpbWUpO2lmKHdlaWdodD4wKXt2YXIgaW50ZXJwb2xhbnRzPXRoaXMuX2ludGVycG9sYW50czt2YXIgcHJvcGVydHlNaXhlcnM9dGhpcy5fcHJvcGVydHlCaW5kaW5ncztmb3IodmFyIGo9MCxtPWludGVycG9sYW50cy5sZW5ndGg7aiE9PW07KytqKXtpbnRlcnBvbGFudHNbal0uZXZhbHVhdGUoY2xpcFRpbWUpO3Byb3BlcnR5TWl4ZXJzW2pdLmFjY3VtdWxhdGUoYWNjdUluZGV4LHdlaWdodCk7fX19LF91cGRhdGVXZWlnaHQ6ZnVuY3Rpb24odGltZSl7dmFyIHdlaWdodD0wO2lmKHRoaXMuZW5hYmxlZCl7d2VpZ2h0PXRoaXMud2VpZ2h0O3ZhciBpbnRlcnBvbGFudD10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihpbnRlcnBvbGFudCE9PW51bGwpe3ZhciBpbnRlcnBvbGFudFZhbHVlPWludGVycG9sYW50LmV2YWx1YXRlKHRpbWUpWzBdO3dlaWdodCo9aW50ZXJwb2xhbnRWYWx1ZTtpZih0aW1lPmludGVycG9sYW50LnBhcmFtZXRlclBvc2l0aW9uc1sxXSl7dGhpcy5zdG9wRmFkaW5nKCk7aWYoaW50ZXJwb2xhbnRWYWx1ZT09PTApey8vIGZhZGVkIG91dCwgZGlzYWJsZVxudGhpcy5lbmFibGVkPWZhbHNlO319fX10aGlzLl9lZmZlY3RpdmVXZWlnaHQ9d2VpZ2h0O3JldHVybiB3ZWlnaHQ7fSxfdXBkYXRlVGltZVNjYWxlOmZ1bmN0aW9uKHRpbWUpe3ZhciB0aW1lU2NhbGU9MDtpZighdGhpcy5wYXVzZWQpe3RpbWVTY2FsZT10aGlzLnRpbWVTY2FsZTt2YXIgaW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ7aWYoaW50ZXJwb2xhbnQhPT1udWxsKXt2YXIgaW50ZXJwb2xhbnRWYWx1ZT1pbnRlcnBvbGFudC5ldmFsdWF0ZSh0aW1lKVswXTt0aW1lU2NhbGUqPWludGVycG9sYW50VmFsdWU7aWYodGltZT5pbnRlcnBvbGFudC5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0pe3RoaXMuc3RvcFdhcnBpbmcoKTtpZih0aW1lU2NhbGU9PT0wKXsvLyBtb3Rpb24gaGFzIGhhbHRlZCwgcGF1c2VcbnRoaXMucGF1c2VkPXRydWU7fWVsc2V7Ly8gd2FycCBkb25lIC0gYXBwbHkgZmluYWwgdGltZSBzY2FsZVxudGhpcy50aW1lU2NhbGU9dGltZVNjYWxlO319fX10aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGltZVNjYWxlO3JldHVybiB0aW1lU2NhbGU7fSxfdXBkYXRlVGltZTpmdW5jdGlvbihkZWx0YVRpbWUpe3ZhciB0aW1lPXRoaXMudGltZStkZWx0YVRpbWU7aWYoZGVsdGFUaW1lPT09MClyZXR1cm4gdGltZTt2YXIgZHVyYXRpb249dGhpcy5fY2xpcC5kdXJhdGlvbixsb29wPXRoaXMubG9vcCxsb29wQ291bnQ9dGhpcy5fbG9vcENvdW50O2lmKGxvb3A9PT1USFJFRS5Mb29wT25jZSl7aWYobG9vcENvdW50PT09LTEpey8vIGp1c3Qgc3RhcnRlZFxudGhpcy5sb29wQ291bnQ9MDt0aGlzLl9zZXRFbmRpbmdzKHRydWUsdHJ1ZSxmYWxzZSk7fWhhbmRsZV9zdG9wOntpZih0aW1lPj1kdXJhdGlvbil7dGltZT1kdXJhdGlvbjt9ZWxzZSBpZih0aW1lPDApe3RpbWU9MDt9ZWxzZSBicmVhayBoYW5kbGVfc3RvcDtpZih0aGlzLmNsYW1wV2hlbkZpbmlzaGVkKXRoaXMucGF1c2VkPXRydWU7ZWxzZSB0aGlzLmVuYWJsZWQ9ZmFsc2U7dGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTonZmluaXNoZWQnLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjpkZWx0YVRpbWU8MD8tMToxfSk7fX1lbHNley8vIHJlcGV0aXRpdmUgUmVwZWF0IG9yIFBpbmdQb25nXG52YXIgcGluZ1Bvbmc9bG9vcD09PVRIUkVFLkxvb3BQaW5nUG9uZztpZihsb29wQ291bnQ9PT0tMSl7Ly8ganVzdCBzdGFydGVkXG5pZihkZWx0YVRpbWU+PTApe2xvb3BDb3VudD0wO3RoaXMuX3NldEVuZGluZ3ModHJ1ZSx0aGlzLnJlcGV0aXRpb25zPT09MCxwaW5nUG9uZyk7fWVsc2V7Ly8gd2hlbiBsb29waW5nIGluIHJldmVyc2UgZGlyZWN0aW9uLCB0aGUgaW5pdGlhbFxuLy8gdHJhbnNpdGlvbiB0aHJvdWdoIHplcm8gY291bnRzIGFzIGEgcmVwZXRpdGlvbixcbi8vIHNvIGxlYXZlIGxvb3BDb3VudCBhdCAtMVxudGhpcy5fc2V0RW5kaW5ncyh0aGlzLnJlcGV0aXRpb25zPT09MCx0cnVlLHBpbmdQb25nKTt9fWlmKHRpbWU+PWR1cmF0aW9ufHx0aW1lPDApey8vIHdyYXAgYXJvdW5kXG52YXIgbG9vcERlbHRhPU1hdGguZmxvb3IodGltZS9kdXJhdGlvbik7Ly8gc2lnbmVkXG50aW1lLT1kdXJhdGlvbipsb29wRGVsdGE7bG9vcENvdW50Kz1NYXRoLmFicyhsb29wRGVsdGEpO3ZhciBwZW5kaW5nPXRoaXMucmVwZXRpdGlvbnMtbG9vcENvdW50O2lmKHBlbmRpbmc8MCl7Ly8gaGF2ZSB0byBzdG9wIChzd2l0Y2ggc3RhdGUsIGNsYW1wIHRpbWUsIGZpcmUgZXZlbnQpXG5pZih0aGlzLmNsYW1wV2hlbkZpbmlzaGVkKXRoaXMucGF1c2VkPXRydWU7ZWxzZSB0aGlzLmVuYWJsZWQ9ZmFsc2U7dGltZT1kZWx0YVRpbWU+MD9kdXJhdGlvbjowO3RoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2ZpbmlzaGVkJyxhY3Rpb246dGhpcyxkaXJlY3Rpb246ZGVsdGFUaW1lPjA/MTotMX0pO31lbHNley8vIGtlZXAgcnVubmluZ1xuaWYocGVuZGluZz09PTApey8vIGVudGVyaW5nIHRoZSBsYXN0IHJvdW5kXG52YXIgYXRTdGFydD1kZWx0YVRpbWU8MDt0aGlzLl9zZXRFbmRpbmdzKGF0U3RhcnQsIWF0U3RhcnQscGluZ1BvbmcpO31lbHNle3RoaXMuX3NldEVuZGluZ3MoZmFsc2UsZmFsc2UscGluZ1BvbmcpO310aGlzLl9sb29wQ291bnQ9bG9vcENvdW50O3RoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2xvb3AnLGFjdGlvbjp0aGlzLGxvb3BEZWx0YTpsb29wRGVsdGF9KTt9fWlmKHBpbmdQb25nJiYobG9vcENvdW50JjEpPT09MSl7Ly8gaW52ZXJ0IHRpbWUgZm9yIHRoZSBcInBvbmcgcm91bmRcIlxudGhpcy50aW1lPXRpbWU7cmV0dXJuIGR1cmF0aW9uLXRpbWU7fX10aGlzLnRpbWU9dGltZTtyZXR1cm4gdGltZTt9LF9zZXRFbmRpbmdzOmZ1bmN0aW9uKGF0U3RhcnQsYXRFbmQscGluZ1Bvbmcpe3ZhciBzZXR0aW5ncz10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzO2lmKHBpbmdQb25nKXtzZXR0aW5ncy5lbmRpbmdTdGFydD1USFJFRS5aZXJvU2xvcGVFbmRpbmc7c2V0dGluZ3MuZW5kaW5nRW5kPVRIUkVFLlplcm9TbG9wZUVuZGluZzt9ZWxzZXsvLyBhc3N1bWluZyBmb3IgTG9vcE9uY2UgYXRTdGFydCA9PSBhdEVuZCA9PSB0cnVlXG5pZihhdFN0YXJ0KXtzZXR0aW5ncy5lbmRpbmdTdGFydD10aGlzLnplcm9TbG9wZUF0U3RhcnQ/VEhSRUUuWmVyb1Nsb3BlRW5kaW5nOlRIUkVFLlplcm9DdXJ2YXR1cmVFbmRpbmc7fWVsc2V7c2V0dGluZ3MuZW5kaW5nU3RhcnQ9VEhSRUUuV3JhcEFyb3VuZEVuZGluZzt9aWYoYXRFbmQpe3NldHRpbmdzLmVuZGluZ0VuZD10aGlzLnplcm9TbG9wZUF0RW5kP1RIUkVFLlplcm9TbG9wZUVuZGluZzpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nO31lbHNle3NldHRpbmdzLmVuZGluZ0VuZD1USFJFRS5XcmFwQXJvdW5kRW5kaW5nO319fSxfc2NoZWR1bGVGYWRpbmc6ZnVuY3Rpb24oZHVyYXRpb24sd2VpZ2h0Tm93LHdlaWdodFRoZW4pe3ZhciBtaXhlcj10aGlzLl9taXhlcixub3c9bWl4ZXIudGltZSxpbnRlcnBvbGFudD10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihpbnRlcnBvbGFudD09PW51bGwpe2ludGVycG9sYW50PW1peGVyLl9sZW5kQ29udHJvbEludGVycG9sYW50KCksdGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9aW50ZXJwb2xhbnQ7fXZhciB0aW1lcz1pbnRlcnBvbGFudC5wYXJhbWV0ZXJQb3NpdGlvbnMsdmFsdWVzPWludGVycG9sYW50LnNhbXBsZVZhbHVlczt0aW1lc1swXT1ub3c7dmFsdWVzWzBdPXdlaWdodE5vdzt0aW1lc1sxXT1ub3crZHVyYXRpb247dmFsdWVzWzFdPXdlaWdodFRoZW47cmV0dXJuIHRoaXM7fX07Ly8gRmlsZTpzcmMvYW5pbWF0aW9uL0FuaW1hdGlvbkNsaXAuanNcbi8qKlxyXG4gKlxyXG4gKiBSZXVzYWJsZSBzZXQgb2YgVHJhY2tzIHRoYXQgcmVwcmVzZW50IGFuIGFuaW1hdGlvbi5cclxuICpcclxuICogQGF1dGhvciBCZW4gSG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pby9cclxuICogQGF1dGhvciBEYXZpZCBTYXJubyAvIGh0dHA6Ly9saWdodGhhdXMudXMvXHJcbiAqL1RIUkVFLkFuaW1hdGlvbkNsaXA9ZnVuY3Rpb24obmFtZSxkdXJhdGlvbix0cmFja3Mpe3RoaXMubmFtZT1uYW1lO3RoaXMudHJhY2tzPXRyYWNrczt0aGlzLmR1cmF0aW9uPWR1cmF0aW9uIT09dW5kZWZpbmVkP2R1cmF0aW9uOi0xO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpOy8vIHRoaXMgbWVhbnMgaXQgc2hvdWxkIGZpZ3VyZSBvdXQgaXRzIGR1cmF0aW9uIGJ5IHNjYW5uaW5nIHRoZSB0cmFja3NcbmlmKHRoaXMuZHVyYXRpb248MCl7dGhpcy5yZXNldER1cmF0aW9uKCk7fS8vIG1heWJlIG9ubHkgZG8gdGhlc2Ugb24gZGVtYW5kLCBhcyBkb2luZyB0aGVtIGhlcmUgY291bGQgcG90ZW50aWFsbHkgc2xvdyBkb3duIGxvYWRpbmdcbi8vIGJ1dCBsZWF2aW5nIHRoZXNlIGhlcmUgZHVyaW5nIGRldmVsb3BtZW50IGFzIHRoaXMgZW5zdXJlcyBhIGxvdCBvZiB0ZXN0aW5nIG9mIHRoZXNlIGZ1bmN0aW9uc1xudGhpcy50cmltKCk7dGhpcy5vcHRpbWl6ZSgpO307VEhSRUUuQW5pbWF0aW9uQ2xpcC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkFuaW1hdGlvbkNsaXAscmVzZXREdXJhdGlvbjpmdW5jdGlvbigpe3ZhciB0cmFja3M9dGhpcy50cmFja3MsZHVyYXRpb249MDtmb3IodmFyIGk9MCxuPXRyYWNrcy5sZW5ndGg7aSE9PW47KytpKXt2YXIgdHJhY2s9dGhpcy50cmFja3NbaV07ZHVyYXRpb249TWF0aC5tYXgoZHVyYXRpb24sdHJhY2sudGltZXNbdHJhY2sudGltZXMubGVuZ3RoLTFdKTt9dGhpcy5kdXJhdGlvbj1kdXJhdGlvbjt9LHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMudHJhY2tzLmxlbmd0aDtpKyspe3RoaXMudHJhY2tzW2ldLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTt9cmV0dXJuIHRoaXM7fSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy50cmFja3MubGVuZ3RoO2krKyl7dGhpcy50cmFja3NbaV0ub3B0aW1pemUoKTt9cmV0dXJuIHRoaXM7fX07Ly8gU3RhdGljIG1ldGhvZHM6XG5PYmplY3QuYXNzaWduKFRIUkVFLkFuaW1hdGlvbkNsaXAse3BhcnNlOmZ1bmN0aW9uKGpzb24pe3ZhciB0cmFja3M9W10sanNvblRyYWNrcz1qc29uLnRyYWNrcyxmcmFtZVRpbWU9MS4wLyhqc29uLmZwc3x8MS4wKTtmb3IodmFyIGk9MCxuPWpzb25UcmFja3MubGVuZ3RoO2khPT1uOysraSl7dHJhY2tzLnB1c2goVEhSRUUuS2V5ZnJhbWVUcmFjay5wYXJzZShqc29uVHJhY2tzW2ldKS5zY2FsZShmcmFtZVRpbWUpKTt9cmV0dXJuIG5ldyBUSFJFRS5BbmltYXRpb25DbGlwKGpzb24ubmFtZSxqc29uLmR1cmF0aW9uLHRyYWNrcyk7fSx0b0pTT046ZnVuY3Rpb24oY2xpcCl7dmFyIHRyYWNrcz1bXSxjbGlwVHJhY2tzPWNsaXAudHJhY2tzO3ZhciBqc29uPXsnbmFtZSc6Y2xpcC5uYW1lLCdkdXJhdGlvbic6Y2xpcC5kdXJhdGlvbiwndHJhY2tzJzp0cmFja3N9O2Zvcih2YXIgaT0wLG49Y2xpcFRyYWNrcy5sZW5ndGg7aSE9PW47KytpKXt0cmFja3MucHVzaChUSFJFRS5LZXlmcmFtZVRyYWNrLnRvSlNPTihjbGlwVHJhY2tzW2ldKSk7fXJldHVybiBqc29uO30sQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2U6ZnVuY3Rpb24obmFtZSxtb3JwaFRhcmdldFNlcXVlbmNlLGZwcyxub0xvb3Ape3ZhciBudW1Nb3JwaFRhcmdldHM9bW9ycGhUYXJnZXRTZXF1ZW5jZS5sZW5ndGg7dmFyIHRyYWNrcz1bXTtmb3IodmFyIGk9MDtpPG51bU1vcnBoVGFyZ2V0cztpKyspe3ZhciB0aW1lcz1bXTt2YXIgdmFsdWVzPVtdO3RpbWVzLnB1c2goKGkrbnVtTW9ycGhUYXJnZXRzLTEpJW51bU1vcnBoVGFyZ2V0cyxpLChpKzEpJW51bU1vcnBoVGFyZ2V0cyk7dmFsdWVzLnB1c2goMCwxLDApO3ZhciBvcmRlcj1USFJFRS5BbmltYXRpb25VdGlscy5nZXRLZXlmcmFtZU9yZGVyKHRpbWVzKTt0aW1lcz1USFJFRS5BbmltYXRpb25VdGlscy5zb3J0ZWRBcnJheSh0aW1lcywxLG9yZGVyKTt2YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuc29ydGVkQXJyYXkodmFsdWVzLDEsb3JkZXIpOy8vIGlmIHRoZXJlIGlzIGEga2V5IGF0IHRoZSBmaXJzdCBmcmFtZSwgZHVwbGljYXRlIGl0IGFzIHRoZVxuLy8gbGFzdCBmcmFtZSBhcyB3ZWxsIGZvciBwZXJmZWN0IGxvb3AuXG5pZighbm9Mb29wJiZ0aW1lc1swXT09PTApe3RpbWVzLnB1c2gobnVtTW9ycGhUYXJnZXRzKTt2YWx1ZXMucHVzaCh2YWx1ZXNbMF0pO310cmFja3MucHVzaChuZXcgVEhSRUUuTnVtYmVyS2V5ZnJhbWVUcmFjaygnLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1snK21vcnBoVGFyZ2V0U2VxdWVuY2VbaV0ubmFtZSsnXScsdGltZXMsdmFsdWVzKS5zY2FsZSgxLjAvZnBzKSk7fXJldHVybiBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcChuYW1lLC0xLHRyYWNrcyk7fSxmaW5kQnlOYW1lOmZ1bmN0aW9uKG9iamVjdE9yQ2xpcEFycmF5LG5hbWUpe3ZhciBjbGlwQXJyYXk9b2JqZWN0T3JDbGlwQXJyYXk7aWYoIUFycmF5LmlzQXJyYXkob2JqZWN0T3JDbGlwQXJyYXkpKXt2YXIgbz1vYmplY3RPckNsaXBBcnJheTtjbGlwQXJyYXk9by5nZW9tZXRyeSYmby5nZW9tZXRyeS5hbmltYXRpb25zfHxvLmFuaW1hdGlvbnM7fWZvcih2YXIgaT0wO2k8Y2xpcEFycmF5Lmxlbmd0aDtpKyspe2lmKGNsaXBBcnJheVtpXS5uYW1lPT09bmFtZSl7cmV0dXJuIGNsaXBBcnJheVtpXTt9fXJldHVybiBudWxsO30sQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXM6ZnVuY3Rpb24obW9ycGhUYXJnZXRzLGZwcyxub0xvb3Ape3ZhciBhbmltYXRpb25Ub01vcnBoVGFyZ2V0cz17fTsvLyB0ZXN0ZWQgd2l0aCBodHRwczovL3JlZ2V4MTAxLmNvbS8gb24gdHJpY2sgc2VxdWVuY2VzXG4vLyBzdWNoIGZsYW1pbmdvX2ZseUFfMDAzLCBmbGFtaW5nb19ydW4xXzAwMywgY3JkZWF0aDAwNTlcbnZhciBwYXR0ZXJuPS9eKFtcXHctXSo/KShbXFxkXSspJC87Ly8gc29ydCBtb3JwaCB0YXJnZXQgbmFtZXMgaW50byBhbmltYXRpb24gZ3JvdXBzIGJhc2VkXG4vLyBwYXR0ZXJucyBsaWtlIFdhbGtfMDAxLCBXYWxrXzAwMiwgUnVuXzAwMSwgUnVuXzAwMlxuZm9yKHZhciBpPTAsaWw9bW9ycGhUYXJnZXRzLmxlbmd0aDtpPGlsO2krKyl7dmFyIG1vcnBoVGFyZ2V0PW1vcnBoVGFyZ2V0c1tpXTt2YXIgcGFydHM9bW9ycGhUYXJnZXQubmFtZS5tYXRjaChwYXR0ZXJuKTtpZihwYXJ0cyYmcGFydHMubGVuZ3RoPjEpe3ZhciBuYW1lPXBhcnRzWzFdO3ZhciBhbmltYXRpb25Nb3JwaFRhcmdldHM9YW5pbWF0aW9uVG9Nb3JwaFRhcmdldHNbbmFtZV07aWYoIWFuaW1hdGlvbk1vcnBoVGFyZ2V0cyl7YW5pbWF0aW9uVG9Nb3JwaFRhcmdldHNbbmFtZV09YW5pbWF0aW9uTW9ycGhUYXJnZXRzPVtdO31hbmltYXRpb25Nb3JwaFRhcmdldHMucHVzaChtb3JwaFRhcmdldCk7fX12YXIgY2xpcHM9W107Zm9yKHZhciBuYW1lIGluIGFuaW1hdGlvblRvTW9ycGhUYXJnZXRzKXtjbGlwcy5wdXNoKFRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UobmFtZSxhbmltYXRpb25Ub01vcnBoVGFyZ2V0c1tuYW1lXSxmcHMsbm9Mb29wKSk7fXJldHVybiBjbGlwczt9LC8vIHBhcnNlIHRoZSBhbmltYXRpb24uaGllcmFyY2h5IGZvcm1hdFxucGFyc2VBbmltYXRpb246ZnVuY3Rpb24oYW5pbWF0aW9uLGJvbmVzLG5vZGVOYW1lKXtpZighYW5pbWF0aW9uKXtjb25zb2xlLmVycm9yKFwiICBubyBhbmltYXRpb24gaW4gSlNPTkxvYWRlciBkYXRhXCIpO3JldHVybiBudWxsO312YXIgYWRkTm9uZW1wdHlUcmFjaz1mdW5jdGlvbih0cmFja1R5cGUsdHJhY2tOYW1lLGFuaW1hdGlvbktleXMscHJvcGVydHlOYW1lLGRlc3RUcmFja3Mpey8vIG9ubHkgcmV0dXJuIHRyYWNrIGlmIHRoZXJlIGFyZSBhY3R1YWxseSBrZXlzLlxuaWYoYW5pbWF0aW9uS2V5cy5sZW5ndGghPT0wKXt2YXIgdGltZXM9W107dmFyIHZhbHVlcz1bXTtUSFJFRS5BbmltYXRpb25VdGlscy5mbGF0dGVuSlNPTihhbmltYXRpb25LZXlzLHRpbWVzLHZhbHVlcyxwcm9wZXJ0eU5hbWUpOy8vIGVtcHR5IGtleXMgYXJlIGZpbHRlcmVkIG91dCwgc28gY2hlY2sgYWdhaW5cbmlmKHRpbWVzLmxlbmd0aCE9PTApe2Rlc3RUcmFja3MucHVzaChuZXcgdHJhY2tUeXBlKHRyYWNrTmFtZSx0aW1lcyx2YWx1ZXMpKTt9fX07dmFyIHRyYWNrcz1bXTt2YXIgY2xpcE5hbWU9YW5pbWF0aW9uLm5hbWV8fCdkZWZhdWx0JzsvLyBhdXRvbWF0aWMgbGVuZ3RoIGRldGVybWluYXRpb24gaW4gQW5pbWF0aW9uQ2xpcC5cbnZhciBkdXJhdGlvbj1hbmltYXRpb24ubGVuZ3RofHwtMTt2YXIgZnBzPWFuaW1hdGlvbi5mcHN8fDMwO3ZhciBoaWVyYXJjaHlUcmFja3M9YW5pbWF0aW9uLmhpZXJhcmNoeXx8W107Zm9yKHZhciBoPTA7aDxoaWVyYXJjaHlUcmFja3MubGVuZ3RoO2grKyl7dmFyIGFuaW1hdGlvbktleXM9aGllcmFyY2h5VHJhY2tzW2hdLmtleXM7Ly8gc2tpcCBlbXB0eSB0cmFja3NcbmlmKCFhbmltYXRpb25LZXlzfHxhbmltYXRpb25LZXlzLmxlbmd0aD09PTApY29udGludWU7Ly8gcHJvY2VzcyBtb3JwaCB0YXJnZXRzIGluIGEgd2F5IGV4YWN0bHkgY29tcGF0aWJsZVxuLy8gd2l0aCBBbmltYXRpb25IYW5kbGVyLmluaXQoIGFuaW1hdGlvbiApXG5pZihhbmltYXRpb25LZXlzWzBdLm1vcnBoVGFyZ2V0cyl7Ly8gZmlndXJlIG91dCBhbGwgbW9ycGggdGFyZ2V0cyB1c2VkIGluIHRoaXMgdHJhY2tcbnZhciBtb3JwaFRhcmdldE5hbWVzPXt9O2Zvcih2YXIgaz0wO2s8YW5pbWF0aW9uS2V5cy5sZW5ndGg7aysrKXtpZihhbmltYXRpb25LZXlzW2tdLm1vcnBoVGFyZ2V0cyl7Zm9yKHZhciBtPTA7bTxhbmltYXRpb25LZXlzW2tdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7bSsrKXttb3JwaFRhcmdldE5hbWVzW2FuaW1hdGlvbktleXNba10ubW9ycGhUYXJnZXRzW21dXT0tMTt9fX0vLyBjcmVhdGUgYSB0cmFjayBmb3IgZWFjaCBtb3JwaCB0YXJnZXQgd2l0aCBhbGwgemVyb1xuLy8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGV4Y2VwdCBmb3IgdGhlIGtleXMgaW4gd2hpY2hcbi8vIHRoZSBtb3JwaFRhcmdldCBpcyBuYW1lZC5cbmZvcih2YXIgbW9ycGhUYXJnZXROYW1lIGluIG1vcnBoVGFyZ2V0TmFtZXMpe3ZhciB0aW1lcz1bXTt2YXIgdmFsdWVzPVtdO2Zvcih2YXIgbT0wO20hPT1hbmltYXRpb25LZXlzW2tdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7KyttKXt2YXIgYW5pbWF0aW9uS2V5PWFuaW1hdGlvbktleXNba107dGltZXMucHVzaChhbmltYXRpb25LZXkudGltZSk7dmFsdWVzLnB1c2goYW5pbWF0aW9uS2V5Lm1vcnBoVGFyZ2V0PT09bW9ycGhUYXJnZXROYW1lPzE6MCk7fXRyYWNrcy5wdXNoKG5ldyBUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrKCcubW9ycGhUYXJnZXRJbmZsdWVuY2VbJyttb3JwaFRhcmdldE5hbWUrJ10nLHRpbWVzLHZhbHVlcykpO31kdXJhdGlvbj1tb3JwaFRhcmdldE5hbWVzLmxlbmd0aCooZnBzfHwxLjApO31lbHNley8vIC4uLmFzc3VtZSBza2VsZXRhbCBhbmltYXRpb25cbnZhciBib25lTmFtZT0nLmJvbmVzWycrYm9uZXNbaF0ubmFtZSsnXSc7YWRkTm9uZW1wdHlUcmFjayhUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrLGJvbmVOYW1lKycucG9zaXRpb24nLGFuaW1hdGlvbktleXMsJ3BvcycsdHJhY2tzKTthZGROb25lbXB0eVRyYWNrKFRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLGJvbmVOYW1lKycucXVhdGVybmlvbicsYW5pbWF0aW9uS2V5cywncm90Jyx0cmFja3MpO2FkZE5vbmVtcHR5VHJhY2soVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayxib25lTmFtZSsnLnNjYWxlJyxhbmltYXRpb25LZXlzLCdzY2wnLHRyYWNrcyk7fX1pZih0cmFja3MubGVuZ3RoPT09MCl7cmV0dXJuIG51bGw7fXZhciBjbGlwPW5ldyBUSFJFRS5BbmltYXRpb25DbGlwKGNsaXBOYW1lLGR1cmF0aW9uLHRyYWNrcyk7cmV0dXJuIGNsaXA7fX0pOy8vIEZpbGU6c3JjL2FuaW1hdGlvbi9BbmltYXRpb25NaXhlci5qc1xuLyoqXHJcbiAqXHJcbiAqIFBsYXllciBmb3IgQW5pbWF0aW9uQ2xpcHMuXHJcbiAqXHJcbiAqXHJcbiAqIEBhdXRob3IgQmVuIEhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3IgRGF2aWQgU2Fybm8gLyBodHRwOi8vbGlnaHRoYXVzLnVzL1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLkFuaW1hdGlvbk1peGVyPWZ1bmN0aW9uKHJvb3Qpe3RoaXMuX3Jvb3Q9cm9vdDt0aGlzLl9pbml0TWVtb3J5TWFuYWdlcigpO3RoaXMuX2FjY3VJbmRleD0wO3RoaXMudGltZT0wO3RoaXMudGltZVNjYWxlPTEuMDt9O09iamVjdC5hc3NpZ24oVEhSRUUuQW5pbWF0aW9uTWl4ZXIucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUsey8vIHJldHVybiBhbiBhY3Rpb24gZm9yIGEgY2xpcCBvcHRpb25hbGx5IHVzaW5nIGEgY3VzdG9tIHJvb3QgdGFyZ2V0XG4vLyBvYmplY3QgKHRoaXMgbWV0aG9kIGFsbG9jYXRlcyBhIGxvdCBvZiBkeW5hbWljIG1lbW9yeSBpbiBjYXNlIGFcbi8vIHByZXZpb3VzbHkgdW5rbm93biBjbGlwL3Jvb3QgY29tYmluYXRpb24gaXMgc3BlY2lmaWVkKVxuY2xpcEFjdGlvbjpmdW5jdGlvbihjbGlwLG9wdGlvbmFsUm9vdCl7dmFyIHJvb3Q9b3B0aW9uYWxSb290fHx0aGlzLl9yb290LHJvb3RVdWlkPXJvb3QudXVpZCxjbGlwT2JqZWN0PXR5cGVvZiBjbGlwPT09J3N0cmluZyc/VEhSRUUuQW5pbWF0aW9uQ2xpcC5maW5kQnlOYW1lKHJvb3QsY2xpcCk6Y2xpcCxjbGlwVXVpZD1jbGlwT2JqZWN0IT09bnVsbD9jbGlwT2JqZWN0LnV1aWQ6Y2xpcCxhY3Rpb25zRm9yQ2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwW2NsaXBVdWlkXSxwcm90b3R5cGVBY3Rpb249bnVsbDtpZihhY3Rpb25zRm9yQ2xpcCE9PXVuZGVmaW5lZCl7dmFyIGV4aXN0aW5nQWN0aW9uPWFjdGlvbnNGb3JDbGlwLmFjdGlvbkJ5Um9vdFtyb290VXVpZF07aWYoZXhpc3RpbmdBY3Rpb24hPT11bmRlZmluZWQpe3JldHVybiBleGlzdGluZ0FjdGlvbjt9Ly8gd2Uga25vdyB0aGUgY2xpcCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBwYXJzZSBhbGxcbi8vIHRoZSBiaW5kaW5ncyBhZ2FpbiBidXQgY2FuIGp1c3QgY29weVxucHJvdG90eXBlQWN0aW9uPWFjdGlvbnNGb3JDbGlwLmtub3duQWN0aW9uc1swXTsvLyBhbHNvLCB0YWtlIHRoZSBjbGlwIGZyb20gdGhlIHByb3RvdHlwZSBhY3Rpb25cbmlmKGNsaXBPYmplY3Q9PT1udWxsKWNsaXBPYmplY3Q9cHJvdG90eXBlQWN0aW9uLl9jbGlwO30vLyBjbGlwIG11c3QgYmUga25vd24gd2hlbiBzcGVjaWZpZWQgdmlhIHN0cmluZ1xuaWYoY2xpcE9iamVjdD09PW51bGwpcmV0dXJuIG51bGw7Ly8gYWxsb2NhdGUgYWxsIHJlc291cmNlcyByZXF1aXJlZCB0byBydW4gaXRcbnZhciBuZXdBY3Rpb249bmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyLl9BY3Rpb24odGhpcyxjbGlwT2JqZWN0LG9wdGlvbmFsUm9vdCk7dGhpcy5fYmluZEFjdGlvbihuZXdBY3Rpb24scHJvdG90eXBlQWN0aW9uKTsvLyBhbmQgbWFrZSB0aGUgYWN0aW9uIGtub3duIHRvIHRoZSBtZW1vcnkgbWFuYWdlclxudGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24obmV3QWN0aW9uLGNsaXBVdWlkLHJvb3RVdWlkKTtyZXR1cm4gbmV3QWN0aW9uO30sLy8gZ2V0IGFuIGV4aXN0aW5nIGFjdGlvblxuZXhpc3RpbmdBY3Rpb246ZnVuY3Rpb24oY2xpcCxvcHRpb25hbFJvb3Qpe3ZhciByb290PW9wdGlvbmFsUm9vdHx8dGhpcy5fcm9vdCxyb290VXVpZD1yb290LnV1aWQsY2xpcE9iamVjdD10eXBlb2YgY2xpcD09PSdzdHJpbmcnP1RIUkVFLkFuaW1hdGlvbkNsaXAuZmluZEJ5TmFtZShyb290LGNsaXApOmNsaXAsY2xpcFV1aWQ9Y2xpcE9iamVjdD9jbGlwT2JqZWN0LnV1aWQ6Y2xpcCxhY3Rpb25zRm9yQ2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwW2NsaXBVdWlkXTtpZihhY3Rpb25zRm9yQ2xpcCE9PXVuZGVmaW5lZCl7cmV0dXJuIGFjdGlvbnNGb3JDbGlwLmFjdGlvbkJ5Um9vdFtyb290VXVpZF18fG51bGw7fXJldHVybiBudWxsO30sLy8gZGVhY3RpdmF0ZXMgYWxsIHByZXZpb3VzbHkgc2NoZWR1bGVkIGFjdGlvbnNcbnN0b3BBbGxBY3Rpb246ZnVuY3Rpb24oKXt2YXIgYWN0aW9ucz10aGlzLl9hY3Rpb25zLG5BY3Rpb25zPXRoaXMuX25BY3RpdmVBY3Rpb25zLGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzLG5CaW5kaW5ncz10aGlzLl9uQWN0aXZlQmluZGluZ3M7dGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDt0aGlzLl9uQWN0aXZlQmluZGluZ3M9MDtmb3IodmFyIGk9MDtpIT09bkFjdGlvbnM7KytpKXthY3Rpb25zW2ldLnJlc2V0KCk7fWZvcih2YXIgaT0wO2khPT1uQmluZGluZ3M7KytpKXtiaW5kaW5nc1tpXS51c2VDb3VudD0wO31yZXR1cm4gdGhpczt9LC8vIGFkdmFuY2UgdGhlIHRpbWUgYW5kIHVwZGF0ZSBhcHBseSB0aGUgYW5pbWF0aW9uXG51cGRhdGU6ZnVuY3Rpb24oZGVsdGFUaW1lKXtkZWx0YVRpbWUqPXRoaXMudGltZVNjYWxlO3ZhciBhY3Rpb25zPXRoaXMuX2FjdGlvbnMsbkFjdGlvbnM9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsdGltZT10aGlzLnRpbWUrPWRlbHRhVGltZSx0aW1lRGlyZWN0aW9uPU1hdGguc2lnbihkZWx0YVRpbWUpLGFjY3VJbmRleD10aGlzLl9hY2N1SW5kZXhePTE7Ly8gcnVuIGFjdGl2ZSBhY3Rpb25zXG5mb3IodmFyIGk9MDtpIT09bkFjdGlvbnM7KytpKXt2YXIgYWN0aW9uPWFjdGlvbnNbaV07aWYoYWN0aW9uLmVuYWJsZWQpe2FjdGlvbi5fdXBkYXRlKHRpbWUsZGVsdGFUaW1lLHRpbWVEaXJlY3Rpb24sYWNjdUluZGV4KTt9fS8vIHVwZGF0ZSBzY2VuZSBncmFwaFxudmFyIGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzLG5CaW5kaW5ncz10aGlzLl9uQWN0aXZlQmluZGluZ3M7Zm9yKHZhciBpPTA7aSE9PW5CaW5kaW5nczsrK2kpe2JpbmRpbmdzW2ldLmFwcGx5KGFjY3VJbmRleCk7fXJldHVybiB0aGlzO30sLy8gcmV0dXJuIHRoaXMgbWl4ZXIncyByb290IHRhcmdldCBvYmplY3RcbmdldFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdDt9LC8vIGZyZWUgYWxsIHJlc291cmNlcyBzcGVjaWZpYyB0byBhIHBhcnRpY3VsYXIgY2xpcFxudW5jYWNoZUNsaXA6ZnVuY3Rpb24oY2xpcCl7dmFyIGFjdGlvbnM9dGhpcy5fYWN0aW9ucyxjbGlwVXVpZD1jbGlwLnV1aWQsYWN0aW9uc0J5Q2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwLGFjdGlvbnNGb3JDbGlwPWFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdO2lmKGFjdGlvbnNGb3JDbGlwIT09dW5kZWZpbmVkKXsvLyBub3RlOiBqdXN0IGNhbGxpbmcgX3JlbW92ZUluYWN0aXZlQWN0aW9uIHdvdWxkIG1lc3MgdXAgdGhlXG4vLyBpdGVyYXRpb24gc3RhdGUgYW5kIGFsc28gcmVxdWlyZSB1cGRhdGluZyB0aGUgc3RhdGUgd2UgY2FuXG4vLyBqdXN0IHRocm93IGF3YXlcbnZhciBhY3Rpb25zVG9SZW1vdmU9YWN0aW9uc0ZvckNsaXAua25vd25BY3Rpb25zO2Zvcih2YXIgaT0wLG49YWN0aW9uc1RvUmVtb3ZlLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBhY3Rpb249YWN0aW9uc1RvUmVtb3ZlW2ldO3RoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYWN0aW9uKTt2YXIgY2FjaGVJbmRleD1hY3Rpb24uX2NhY2hlSW5kZXgsbGFzdEluYWN0aXZlQWN0aW9uPWFjdGlvbnNbYWN0aW9ucy5sZW5ndGgtMV07YWN0aW9uLl9jYWNoZUluZGV4PW51bGw7YWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7bGFzdEluYWN0aXZlQWN0aW9uLl9jYWNoZUluZGV4PWNhY2hlSW5kZXg7YWN0aW9uc1tjYWNoZUluZGV4XT1sYXN0SW5hY3RpdmVBY3Rpb247YWN0aW9ucy5wb3AoKTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGFjdGlvbik7fWRlbGV0ZSBhY3Rpb25zQnlDbGlwW2NsaXBVdWlkXTt9fSwvLyBmcmVlIGFsbCByZXNvdXJjZXMgc3BlY2lmaWMgdG8gYSBwYXJ0aWN1bGFyIHJvb3QgdGFyZ2V0IG9iamVjdFxudW5jYWNoZVJvb3Q6ZnVuY3Rpb24ocm9vdCl7dmFyIHJvb3RVdWlkPXJvb3QudXVpZCxhY3Rpb25zQnlDbGlwPXRoaXMuX2FjdGlvbnNCeUNsaXA7Zm9yKHZhciBjbGlwVXVpZCBpbiBhY3Rpb25zQnlDbGlwKXt2YXIgYWN0aW9uQnlSb290PWFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdLmFjdGlvbkJ5Um9vdCxhY3Rpb249YWN0aW9uQnlSb290W3Jvb3RVdWlkXTtpZihhY3Rpb24hPT11bmRlZmluZWQpe3RoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYWN0aW9uKTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihhY3Rpb24pO319dmFyIGJpbmRpbmdzQnlSb290PXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxiaW5kaW5nQnlOYW1lPWJpbmRpbmdzQnlSb290W3Jvb3RVdWlkXTtpZihiaW5kaW5nQnlOYW1lIT09dW5kZWZpbmVkKXtmb3IodmFyIHRyYWNrTmFtZSBpbiBiaW5kaW5nQnlOYW1lKXt2YXIgYmluZGluZz1iaW5kaW5nQnlOYW1lW3RyYWNrTmFtZV07YmluZGluZy5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpO3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhiaW5kaW5nKTt9fX0sLy8gcmVtb3ZlIGEgdGFyZ2V0ZWQgY2xpcCBmcm9tIHRoZSBjYWNoZVxudW5jYWNoZUFjdGlvbjpmdW5jdGlvbihjbGlwLG9wdGlvbmFsUm9vdCl7dmFyIGFjdGlvbj10aGlzLmV4aXN0aW5nQWN0aW9uKGNsaXAsb3B0aW9uYWxSb290KTtpZihhY3Rpb24hPT1udWxsKXt0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGFjdGlvbik7dGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24oYWN0aW9uKTt9fX0pO1RIUkVFLkFuaW1hdGlvbk1peGVyLl9BY3Rpb249VEhSRUUuQW5pbWF0aW9uQWN0aW9uLl9uZXc7Ly8gSW1wbGVtZW50YXRpb24gZGV0YWlsczpcbk9iamVjdC5hc3NpZ24oVEhSRUUuQW5pbWF0aW9uTWl4ZXIucHJvdG90eXBlLHtfYmluZEFjdGlvbjpmdW5jdGlvbihhY3Rpb24scHJvdG90eXBlQWN0aW9uKXt2YXIgcm9vdD1hY3Rpb24uX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCx0cmFja3M9YWN0aW9uLl9jbGlwLnRyYWNrcyxuVHJhY2tzPXRyYWNrcy5sZW5ndGgsYmluZGluZ3M9YWN0aW9uLl9wcm9wZXJ0eUJpbmRpbmdzLGludGVycG9sYW50cz1hY3Rpb24uX2ludGVycG9sYW50cyxyb290VXVpZD1yb290LnV1aWQsYmluZGluZ3NCeVJvb3Q9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGJpbmRpbmdzQnlOYW1lPWJpbmRpbmdzQnlSb290W3Jvb3RVdWlkXTtpZihiaW5kaW5nc0J5TmFtZT09PXVuZGVmaW5lZCl7YmluZGluZ3NCeU5hbWU9e307YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdPWJpbmRpbmdzQnlOYW1lO31mb3IodmFyIGk9MDtpIT09blRyYWNrczsrK2kpe3ZhciB0cmFjaz10cmFja3NbaV0sdHJhY2tOYW1lPXRyYWNrLm5hbWUsYmluZGluZz1iaW5kaW5nc0J5TmFtZVt0cmFja05hbWVdO2lmKGJpbmRpbmchPT11bmRlZmluZWQpe2JpbmRpbmdzW2ldPWJpbmRpbmc7fWVsc2V7YmluZGluZz1iaW5kaW5nc1tpXTtpZihiaW5kaW5nIT09dW5kZWZpbmVkKXsvLyBleGlzdGluZyBiaW5kaW5nLCBtYWtlIHN1cmUgdGhlIGNhY2hlIGtub3dzXG5pZihiaW5kaW5nLl9jYWNoZUluZGV4PT09bnVsbCl7KytiaW5kaW5nLnJlZmVyZW5jZUNvdW50O3RoaXMuX2FkZEluYWN0aXZlQmluZGluZyhiaW5kaW5nLHJvb3RVdWlkLHRyYWNrTmFtZSk7fWNvbnRpbnVlO312YXIgcGF0aD1wcm90b3R5cGVBY3Rpb24mJnByb3RvdHlwZUFjdGlvbi5fcHJvcGVydHlCaW5kaW5nc1tpXS5iaW5kaW5nLnBhcnNlZFBhdGg7YmluZGluZz1uZXcgVEhSRUUuUHJvcGVydHlNaXhlcihUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuY3JlYXRlKHJvb3QsdHJhY2tOYW1lLHBhdGgpLHRyYWNrLlZhbHVlVHlwZU5hbWUsdHJhY2suZ2V0VmFsdWVTaXplKCkpOysrYmluZGluZy5yZWZlcmVuY2VDb3VudDt0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcoYmluZGluZyxyb290VXVpZCx0cmFja05hbWUpO2JpbmRpbmdzW2ldPWJpbmRpbmc7fWludGVycG9sYW50c1tpXS5yZXN1bHRCdWZmZXI9YmluZGluZy5idWZmZXI7fX0sX2FjdGl2YXRlQWN0aW9uOmZ1bmN0aW9uKGFjdGlvbil7aWYoIXRoaXMuX2lzQWN0aXZlQWN0aW9uKGFjdGlvbikpe2lmKGFjdGlvbi5fY2FjaGVJbmRleD09PW51bGwpey8vIHRoaXMgYWN0aW9uIGhhcyBiZWVuIGZvcmdvdHRlbiBieSB0aGUgY2FjaGUsIGJ1dCB0aGUgdXNlclxuLy8gYXBwZWFycyB0byBiZSBzdGlsbCB1c2luZyBpdCAtPiByZWJpbmRcbnZhciByb290VXVpZD0oYWN0aW9uLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWQsY2xpcFV1aWQ9YWN0aW9uLl9jbGlwLnV1aWQsYWN0aW9uc0ZvckNsaXA9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF07dGhpcy5fYmluZEFjdGlvbihhY3Rpb24sYWN0aW9uc0ZvckNsaXAmJmFjdGlvbnNGb3JDbGlwLmtub3duQWN0aW9uc1swXSk7dGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24oYWN0aW9uLGNsaXBVdWlkLHJvb3RVdWlkKTt9dmFyIGJpbmRpbmdzPWFjdGlvbi5fcHJvcGVydHlCaW5kaW5nczsvLyBpbmNyZW1lbnQgcmVmZXJlbmNlIGNvdW50cyAvIHNvcnQgb3V0IHN0YXRlXG5mb3IodmFyIGk9MCxuPWJpbmRpbmdzLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBiaW5kaW5nPWJpbmRpbmdzW2ldO2lmKGJpbmRpbmcudXNlQ291bnQrKz09PTApe3RoaXMuX2xlbmRCaW5kaW5nKGJpbmRpbmcpO2JpbmRpbmcuc2F2ZU9yaWdpbmFsU3RhdGUoKTt9fXRoaXMuX2xlbmRBY3Rpb24oYWN0aW9uKTt9fSxfZGVhY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhY3Rpb24pe2lmKHRoaXMuX2lzQWN0aXZlQWN0aW9uKGFjdGlvbikpe3ZhciBiaW5kaW5ncz1hY3Rpb24uX3Byb3BlcnR5QmluZGluZ3M7Ly8gZGVjcmVtZW50IHJlZmVyZW5jZSBjb3VudHMgLyBzb3J0IG91dCBzdGF0ZVxuZm9yKHZhciBpPTAsbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXt2YXIgYmluZGluZz1iaW5kaW5nc1tpXTtpZigtLWJpbmRpbmcudXNlQ291bnQ9PT0wKXtiaW5kaW5nLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCk7dGhpcy5fdGFrZUJhY2tCaW5kaW5nKGJpbmRpbmcpO319dGhpcy5fdGFrZUJhY2tBY3Rpb24oYWN0aW9uKTt9fSwvLyBNZW1vcnkgbWFuYWdlclxuX2luaXRNZW1vcnlNYW5hZ2VyOmZ1bmN0aW9uKCl7dGhpcy5fYWN0aW9ucz1bXTsvLyAnbkFjdGl2ZUFjdGlvbnMnIGZvbGxvd2VkIGJ5IGluYWN0aXZlIG9uZXNcbnRoaXMuX25BY3RpdmVBY3Rpb25zPTA7dGhpcy5fYWN0aW9uc0J5Q2xpcD17fTsvLyBpbnNpZGU6XG4vLyB7XG4vLyBcdFx0a25vd25BY3Rpb25zOiBBcnJheTwgX0FjdGlvbiA+XHQtIHVzZWQgYXMgcHJvdG90eXBlc1xuLy8gXHRcdGFjdGlvbkJ5Um9vdDogX0FjdGlvblx0XHRcdC0gbG9va3VwXG4vLyB9XG50aGlzLl9iaW5kaW5ncz1bXTsvLyAnbkFjdGl2ZUJpbmRpbmdzJyBmb2xsb3dlZCBieSBpbmFjdGl2ZSBvbmVzXG50aGlzLl9uQWN0aXZlQmluZGluZ3M9MDt0aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU9e307Ly8gaW5zaWRlOiBNYXA8IG5hbWUsIFByb3BlcnR5TWl4ZXIgPlxudGhpcy5fY29udHJvbEludGVycG9sYW50cz1bXTsvLyBzYW1lIGdhbWUgYXMgYWJvdmVcbnRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzPTA7dmFyIHNjb3BlPXRoaXM7dGhpcy5zdGF0cz17YWN0aW9uczp7Z2V0IHRvdGFsKCl7cmV0dXJuIHNjb3BlLl9hY3Rpb25zLmxlbmd0aDt9LGdldCBpblVzZSgpe3JldHVybiBzY29wZS5fbkFjdGl2ZUFjdGlvbnM7fX0sYmluZGluZ3M6e2dldCB0b3RhbCgpe3JldHVybiBzY29wZS5fYmluZGluZ3MubGVuZ3RoO30sZ2V0IGluVXNlKCl7cmV0dXJuIHNjb3BlLl9uQWN0aXZlQmluZGluZ3M7fX0sY29udHJvbEludGVycG9sYW50czp7Z2V0IHRvdGFsKCl7cmV0dXJuIHNjb3BlLl9jb250cm9sSW50ZXJwb2xhbnRzLmxlbmd0aDt9LGdldCBpblVzZSgpe3JldHVybiBzY29wZS5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHM7fX19O30sLy8gTWVtb3J5IG1hbmFnZW1lbnQgZm9yIF9BY3Rpb24gb2JqZWN0c1xuX2lzQWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGFjdGlvbil7dmFyIGluZGV4PWFjdGlvbi5fY2FjaGVJbmRleDtyZXR1cm4gaW5kZXghPT1udWxsJiZpbmRleDx0aGlzLl9uQWN0aXZlQWN0aW9uczt9LF9hZGRJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbihhY3Rpb24sY2xpcFV1aWQscm9vdFV1aWQpe3ZhciBhY3Rpb25zPXRoaXMuX2FjdGlvbnMsYWN0aW9uc0J5Q2xpcD10aGlzLl9hY3Rpb25zQnlDbGlwLGFjdGlvbnNGb3JDbGlwPWFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdO2lmKGFjdGlvbnNGb3JDbGlwPT09dW5kZWZpbmVkKXthY3Rpb25zRm9yQ2xpcD17a25vd25BY3Rpb25zOlthY3Rpb25dLGFjdGlvbkJ5Um9vdDp7fX07YWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4PTA7YWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF09YWN0aW9uc0ZvckNsaXA7fWVsc2V7dmFyIGtub3duQWN0aW9ucz1hY3Rpb25zRm9yQ2xpcC5rbm93bkFjdGlvbnM7YWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4PWtub3duQWN0aW9ucy5sZW5ndGg7a25vd25BY3Rpb25zLnB1c2goYWN0aW9uKTt9YWN0aW9uLl9jYWNoZUluZGV4PWFjdGlvbnMubGVuZ3RoO2FjdGlvbnMucHVzaChhY3Rpb24pO2FjdGlvbnNGb3JDbGlwLmFjdGlvbkJ5Um9vdFtyb290VXVpZF09YWN0aW9uO30sX3JlbW92ZUluYWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGFjdGlvbil7dmFyIGFjdGlvbnM9dGhpcy5fYWN0aW9ucyxsYXN0SW5hY3RpdmVBY3Rpb249YWN0aW9uc1thY3Rpb25zLmxlbmd0aC0xXSxjYWNoZUluZGV4PWFjdGlvbi5fY2FjaGVJbmRleDtsYXN0SW5hY3RpdmVBY3Rpb24uX2NhY2hlSW5kZXg9Y2FjaGVJbmRleDthY3Rpb25zW2NhY2hlSW5kZXhdPWxhc3RJbmFjdGl2ZUFjdGlvbjthY3Rpb25zLnBvcCgpO2FjdGlvbi5fY2FjaGVJbmRleD1udWxsO3ZhciBjbGlwVXVpZD1hY3Rpb24uX2NsaXAudXVpZCxhY3Rpb25zQnlDbGlwPXRoaXMuX2FjdGlvbnNCeUNsaXAsYWN0aW9uc0ZvckNsaXA9YWN0aW9uc0J5Q2xpcFtjbGlwVXVpZF0sa25vd25BY3Rpb25zRm9yQ2xpcD1hY3Rpb25zRm9yQ2xpcC5rbm93bkFjdGlvbnMsbGFzdEtub3duQWN0aW9uPWtub3duQWN0aW9uc0ZvckNsaXBba25vd25BY3Rpb25zRm9yQ2xpcC5sZW5ndGgtMV0sYnlDbGlwQ2FjaGVJbmRleD1hY3Rpb24uX2J5Q2xpcENhY2hlSW5kZXg7bGFzdEtub3duQWN0aW9uLl9ieUNsaXBDYWNoZUluZGV4PWJ5Q2xpcENhY2hlSW5kZXg7a25vd25BY3Rpb25zRm9yQ2xpcFtieUNsaXBDYWNoZUluZGV4XT1sYXN0S25vd25BY3Rpb247a25vd25BY3Rpb25zRm9yQ2xpcC5wb3AoKTthY3Rpb24uX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDt2YXIgYWN0aW9uQnlSb290PWFjdGlvbnNGb3JDbGlwLmFjdGlvbkJ5Um9vdCxyb290VXVpZD0oYWN0aW9ucy5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkO2RlbGV0ZSBhY3Rpb25CeVJvb3Rbcm9vdFV1aWRdO2lmKGtub3duQWN0aW9uc0ZvckNsaXAubGVuZ3RoPT09MCl7ZGVsZXRlIGFjdGlvbnNCeUNsaXBbY2xpcFV1aWRdO310aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGFjdGlvbik7fSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbjpmdW5jdGlvbihhY3Rpb24pe3ZhciBiaW5kaW5ncz1hY3Rpb24uX3Byb3BlcnR5QmluZGluZ3M7Zm9yKHZhciBpPTAsbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXt2YXIgYmluZGluZz1iaW5kaW5nc1tpXTtpZigtLWJpbmRpbmcucmVmZXJlbmNlQ291bnQ9PT0wKXt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoYmluZGluZyk7fX19LF9sZW5kQWN0aW9uOmZ1bmN0aW9uKGFjdGlvbil7Ly8gWyBhY3RpdmUgYWN0aW9ucyB8ICBpbmFjdGl2ZSBhY3Rpb25zICBdXG4vLyBbICBhY3RpdmUgYWN0aW9ucyA+fCBpbmFjdGl2ZSBhY3Rpb25zIF1cbi8vICAgICAgICAgICAgICAgICBzICAgICAgICBhXG4vLyAgICAgICAgICAgICAgICAgIDwtc3dhcC0+XG4vLyAgICAgICAgICAgICAgICAgYSAgICAgICAgc1xudmFyIGFjdGlvbnM9dGhpcy5fYWN0aW9ucyxwcmV2SW5kZXg9YWN0aW9uLl9jYWNoZUluZGV4LGxhc3RBY3RpdmVJbmRleD10aGlzLl9uQWN0aXZlQWN0aW9ucysrLGZpcnN0SW5hY3RpdmVBY3Rpb249YWN0aW9uc1tsYXN0QWN0aXZlSW5kZXhdO2FjdGlvbi5fY2FjaGVJbmRleD1sYXN0QWN0aXZlSW5kZXg7YWN0aW9uc1tsYXN0QWN0aXZlSW5kZXhdPWFjdGlvbjtmaXJzdEluYWN0aXZlQWN0aW9uLl9jYWNoZUluZGV4PXByZXZJbmRleDthY3Rpb25zW3ByZXZJbmRleF09Zmlyc3RJbmFjdGl2ZUFjdGlvbjt9LF90YWtlQmFja0FjdGlvbjpmdW5jdGlvbihhY3Rpb24pey8vIFsgIGFjdGl2ZSBhY3Rpb25zICB8IGluYWN0aXZlIGFjdGlvbnMgXVxuLy8gWyBhY3RpdmUgYWN0aW9ucyB8PCBpbmFjdGl2ZSBhY3Rpb25zICBdXG4vLyAgICAgICAgYSAgICAgICAgc1xuLy8gICAgICAgICA8LXN3YXAtPlxuLy8gICAgICAgIHMgICAgICAgIGFcbnZhciBhY3Rpb25zPXRoaXMuX2FjdGlvbnMscHJldkluZGV4PWFjdGlvbi5fY2FjaGVJbmRleCxmaXJzdEluYWN0aXZlSW5kZXg9LS10aGlzLl9uQWN0aXZlQWN0aW9ucyxsYXN0QWN0aXZlQWN0aW9uPWFjdGlvbnNbZmlyc3RJbmFjdGl2ZUluZGV4XTthY3Rpb24uX2NhY2hlSW5kZXg9Zmlyc3RJbmFjdGl2ZUluZGV4O2FjdGlvbnNbZmlyc3RJbmFjdGl2ZUluZGV4XT1hY3Rpb247bGFzdEFjdGl2ZUFjdGlvbi5fY2FjaGVJbmRleD1wcmV2SW5kZXg7YWN0aW9uc1twcmV2SW5kZXhdPWxhc3RBY3RpdmVBY3Rpb247fSwvLyBNZW1vcnkgbWFuYWdlbWVudCBmb3IgUHJvcGVydHlNaXhlciBvYmplY3RzXG5fYWRkSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKGJpbmRpbmcscm9vdFV1aWQsdHJhY2tOYW1lKXt2YXIgYmluZGluZ3NCeVJvb3Q9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGJpbmRpbmdCeU5hbWU9YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdLGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzO2lmKGJpbmRpbmdCeU5hbWU9PT11bmRlZmluZWQpe2JpbmRpbmdCeU5hbWU9e307YmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdPWJpbmRpbmdCeU5hbWU7fWJpbmRpbmdCeU5hbWVbdHJhY2tOYW1lXT1iaW5kaW5nO2JpbmRpbmcuX2NhY2hlSW5kZXg9YmluZGluZ3MubGVuZ3RoO2JpbmRpbmdzLnB1c2goYmluZGluZyk7fSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKGJpbmRpbmcpe3ZhciBiaW5kaW5ncz10aGlzLl9iaW5kaW5ncyxwcm9wQmluZGluZz1iaW5kaW5nLmJpbmRpbmcscm9vdFV1aWQ9cHJvcEJpbmRpbmcucm9vdE5vZGUudXVpZCx0cmFja05hbWU9cHJvcEJpbmRpbmcucGF0aCxiaW5kaW5nc0J5Um9vdD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsYmluZGluZ0J5TmFtZT1iaW5kaW5nc0J5Um9vdFtyb290VXVpZF0sbGFzdEluYWN0aXZlQmluZGluZz1iaW5kaW5nc1tiaW5kaW5ncy5sZW5ndGgtMV0sY2FjaGVJbmRleD1iaW5kaW5nLl9jYWNoZUluZGV4O2xhc3RJbmFjdGl2ZUJpbmRpbmcuX2NhY2hlSW5kZXg9Y2FjaGVJbmRleDtiaW5kaW5nc1tjYWNoZUluZGV4XT1sYXN0SW5hY3RpdmVCaW5kaW5nO2JpbmRpbmdzLnBvcCgpO2RlbGV0ZSBiaW5kaW5nQnlOYW1lW3RyYWNrTmFtZV07cmVtb3ZlX2VtcHR5X21hcDp7Zm9yKHZhciBfIGluIGJpbmRpbmdCeU5hbWUpYnJlYWsgcmVtb3ZlX2VtcHR5X21hcDtkZWxldGUgYmluZGluZ3NCeVJvb3Rbcm9vdFV1aWRdO319LF9sZW5kQmluZGluZzpmdW5jdGlvbihiaW5kaW5nKXt2YXIgYmluZGluZ3M9dGhpcy5fYmluZGluZ3MscHJldkluZGV4PWJpbmRpbmcuX2NhY2hlSW5kZXgsbGFzdEFjdGl2ZUluZGV4PXRoaXMuX25BY3RpdmVCaW5kaW5ncysrLGZpcnN0SW5hY3RpdmVCaW5kaW5nPWJpbmRpbmdzW2xhc3RBY3RpdmVJbmRleF07YmluZGluZy5fY2FjaGVJbmRleD1sYXN0QWN0aXZlSW5kZXg7YmluZGluZ3NbbGFzdEFjdGl2ZUluZGV4XT1iaW5kaW5nO2ZpcnN0SW5hY3RpdmVCaW5kaW5nLl9jYWNoZUluZGV4PXByZXZJbmRleDtiaW5kaW5nc1twcmV2SW5kZXhdPWZpcnN0SW5hY3RpdmVCaW5kaW5nO30sX3Rha2VCYWNrQmluZGluZzpmdW5jdGlvbihiaW5kaW5nKXt2YXIgYmluZGluZ3M9dGhpcy5fYmluZGluZ3MscHJldkluZGV4PWJpbmRpbmcuX2NhY2hlSW5kZXgsZmlyc3RJbmFjdGl2ZUluZGV4PS0tdGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGxhc3RBY3RpdmVCaW5kaW5nPWJpbmRpbmdzW2ZpcnN0SW5hY3RpdmVJbmRleF07YmluZGluZy5fY2FjaGVJbmRleD1maXJzdEluYWN0aXZlSW5kZXg7YmluZGluZ3NbZmlyc3RJbmFjdGl2ZUluZGV4XT1iaW5kaW5nO2xhc3RBY3RpdmVCaW5kaW5nLl9jYWNoZUluZGV4PXByZXZJbmRleDtiaW5kaW5nc1twcmV2SW5kZXhdPWxhc3RBY3RpdmVCaW5kaW5nO30sLy8gTWVtb3J5IG1hbmFnZW1lbnQgb2YgSW50ZXJwb2xhbnRzIGZvciB3ZWlnaHQgYW5kIHRpbWUgc2NhbGVcbl9sZW5kQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKCl7dmFyIGludGVycG9sYW50cz10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGxhc3RBY3RpdmVJbmRleD10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cysrLGludGVycG9sYW50PWludGVycG9sYW50c1tsYXN0QWN0aXZlSW5kZXhdO2lmKGludGVycG9sYW50PT09dW5kZWZpbmVkKXtpbnRlcnBvbGFudD1uZXcgVEhSRUUuTGluZWFySW50ZXJwb2xhbnQobmV3IEZsb2F0MzJBcnJheSgyKSxuZXcgRmxvYXQzMkFycmF5KDIpLDEsdGhpcy5fY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcik7aW50ZXJwb2xhbnQuX19jYWNoZUluZGV4PWxhc3RBY3RpdmVJbmRleDtpbnRlcnBvbGFudHNbbGFzdEFjdGl2ZUluZGV4XT1pbnRlcnBvbGFudDt9cmV0dXJuIGludGVycG9sYW50O30sX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKGludGVycG9sYW50KXt2YXIgaW50ZXJwb2xhbnRzPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMscHJldkluZGV4PWludGVycG9sYW50Ll9fY2FjaGVJbmRleCxmaXJzdEluYWN0aXZlSW5kZXg9LS10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cyxsYXN0QWN0aXZlSW50ZXJwb2xhbnQ9aW50ZXJwb2xhbnRzW2ZpcnN0SW5hY3RpdmVJbmRleF07aW50ZXJwb2xhbnQuX19jYWNoZUluZGV4PWZpcnN0SW5hY3RpdmVJbmRleDtpbnRlcnBvbGFudHNbZmlyc3RJbmFjdGl2ZUluZGV4XT1pbnRlcnBvbGFudDtsYXN0QWN0aXZlSW50ZXJwb2xhbnQuX19jYWNoZUluZGV4PXByZXZJbmRleDtpbnRlcnBvbGFudHNbcHJldkluZGV4XT1sYXN0QWN0aXZlSW50ZXJwb2xhbnQ7fSxfY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcjpuZXcgRmxvYXQzMkFycmF5KDEpfSk7Ly8gRmlsZTpzcmMvYW5pbWF0aW9uL0FuaW1hdGlvbk9iamVjdEdyb3VwLmpzXG4vKipcclxuICpcclxuICogQSBncm91cCBvZiBvYmplY3RzIHRoYXQgcmVjZWl2ZXMgYSBzaGFyZWQgYW5pbWF0aW9uIHN0YXRlLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogXHQtXHRBZGQgb2JqZWN0cyB5b3Ugd291bGQgb3RoZXJ3aXNlIHBhc3MgYXMgJ3Jvb3QnIHRvIHRoZVxyXG4gKiBcdFx0Y29uc3RydWN0b3Igb3IgdGhlIC5jbGlwQWN0aW9uIG1ldGhvZCBvZiBBbmltYXRpb25NaXhlci5cclxuICpcclxuICogXHQtXHRJbnN0ZWFkIHBhc3MgdGhpcyBvYmplY3QgYXMgJ3Jvb3QnLlxyXG4gKlxyXG4gKiBcdC1cdFlvdSBjYW4gYWxzbyBhZGQgYW5kIHJlbW92ZSBvYmplY3RzIGxhdGVyIHdoZW4gdGhlIG1peGVyXHJcbiAqIFx0XHRpcyBydW5uaW5nLlxyXG4gKlxyXG4gKiBOb3RlOlxyXG4gKlxyXG4gKiAgXHRPYmplY3RzIG9mIHRoaXMgY2xhc3MgYXBwZWFyIGFzIG9uZSBvYmplY3QgdG8gdGhlIG1peGVyLFxyXG4gKiAgXHRzbyBjYWNoZSBjb250cm9sIG9mIHRoZSBpbmRpdmlkdWFsIG9iamVjdHMgbXVzdCBiZSBkb25lXHJcbiAqICBcdG9uIHRoZSBncm91cC5cclxuICpcclxuICogTGltaXRhdGlvbjpcclxuICpcclxuICogXHQtIFx0VGhlIGFuaW1hdGVkIHByb3BlcnRpZXMgbXVzdCBiZSBjb21wYXRpYmxlIGFtb25nIHRoZVxyXG4gKiBcdFx0YWxsIG9iamVjdHMgaW4gdGhlIGdyb3VwLlxyXG4gKlxyXG4gKiAgLVx0QSBzaW5nbGUgcHJvcGVydHkgY2FuIGVpdGhlciBiZSBjb250cm9sbGVkIHRocm91Z2ggYVxyXG4gKiAgXHR0YXJnZXQgZ3JvdXAgb3IgZGlyZWN0bHksIGJ1dCBub3QgYm90aC5cclxuICpcclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5BbmltYXRpb25PYmplY3RHcm91cD1mdW5jdGlvbih2YXJfYXJncyl7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7Ly8gY2FjaGVkIG9iamVjdHMgZm9sbG93ZWQgYnkgdGhlIGFjdGl2ZSBvbmVzXG50aGlzLl9vYmplY3RzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dGhpcy5uQ2FjaGVkT2JqZWN0c189MDsvLyB0aHJlc2hvbGRcbi8vIG5vdGU6IHJlYWQgYnkgUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZVxudmFyIGluZGljZXM9e307dGhpcy5faW5kaWNlc0J5VVVJRD1pbmRpY2VzOy8vIGZvciBib29ra2VlcGluZ1xuZm9yKHZhciBpPTAsbj1hcmd1bWVudHMubGVuZ3RoO2khPT1uOysraSl7aW5kaWNlc1thcmd1bWVudHNbaV0udXVpZF09aTt9dGhpcy5fcGF0aHM9W107Ly8gaW5zaWRlOiBzdHJpbmdcbnRoaXMuX3BhcnNlZFBhdGhzPVtdOy8vIGluc2lkZTogeyB3ZSBkb24ndCBjYXJlLCBoZXJlIH1cbnRoaXMuX2JpbmRpbmdzPVtdOy8vIGluc2lkZTogQXJyYXk8IFByb3BlcnR5QmluZGluZyA+XG50aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGg9e307Ly8gaW5zaWRlOiBpbmRpY2VzIGluIHRoZXNlIGFycmF5c1xudmFyIHNjb3BlPXRoaXM7dGhpcy5zdGF0cz17b2JqZWN0czp7Z2V0IHRvdGFsKCl7cmV0dXJuIHNjb3BlLl9vYmplY3RzLmxlbmd0aDt9LGdldCBpblVzZSgpe3JldHVybiB0aGlzLnRvdGFsLXNjb3BlLm5DYWNoZWRPYmplY3RzXzt9fSxnZXQgYmluZGluZ3NQZXJPYmplY3QoKXtyZXR1cm4gc2NvcGUuX2JpbmRpbmdzLmxlbmd0aDt9fTt9O1RIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQW5pbWF0aW9uT2JqZWN0R3JvdXAsYWRkOmZ1bmN0aW9uKHZhcl9hcmdzKXt2YXIgb2JqZWN0cz10aGlzLl9vYmplY3RzLG5PYmplY3RzPW9iamVjdHMubGVuZ3RoLG5DYWNoZWRPYmplY3RzPXRoaXMubkNhY2hlZE9iamVjdHNfLGluZGljZXNCeVVVSUQ9dGhpcy5faW5kaWNlc0J5VVVJRCxwYXRocz10aGlzLl9wYXRocyxwYXJzZWRQYXRocz10aGlzLl9wYXJzZWRQYXRocyxiaW5kaW5ncz10aGlzLl9iaW5kaW5ncyxuQmluZGluZ3M9YmluZGluZ3MubGVuZ3RoO2Zvcih2YXIgaT0wLG49YXJndW1lbnRzLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBvYmplY3Q9YXJndW1lbnRzW2ldLHV1aWQ9b2JqZWN0LnV1aWQsaW5kZXg9aW5kaWNlc0J5VVVJRFt1dWlkXTtpZihpbmRleD09PXVuZGVmaW5lZCl7Ly8gdW5rbm93biBvYmplY3QgLT4gYWRkIGl0IHRvIHRoZSBBQ1RJVkUgcmVnaW9uXG5pbmRleD1uT2JqZWN0cysrO2luZGljZXNCeVVVSURbdXVpZF09aW5kZXg7b2JqZWN0cy5wdXNoKG9iamVjdCk7Ly8gYWNjb3VudGluZyBpcyBkb25lLCBub3cgZG8gdGhlIHNhbWUgZm9yIGFsbCBiaW5kaW5nc1xuZm9yKHZhciBqPTAsbT1uQmluZGluZ3M7aiE9PW07KytqKXtiaW5kaW5nc1tqXS5wdXNoKG5ldyBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcob2JqZWN0LHBhdGhzW2pdLHBhcnNlZFBhdGhzW2pdKSk7fX1lbHNlIGlmKGluZGV4PG5DYWNoZWRPYmplY3RzKXt2YXIga25vd25PYmplY3Q9b2JqZWN0c1tpbmRleF07Ly8gbW92ZSBleGlzdGluZyBvYmplY3QgdG8gdGhlIEFDVElWRSByZWdpb25cbnZhciBmaXJzdEFjdGl2ZUluZGV4PS0tbkNhY2hlZE9iamVjdHMsbGFzdENhY2hlZE9iamVjdD1vYmplY3RzW2ZpcnN0QWN0aXZlSW5kZXhdO2luZGljZXNCeVVVSURbbGFzdENhY2hlZE9iamVjdC51dWlkXT1pbmRleDtvYmplY3RzW2luZGV4XT1sYXN0Q2FjaGVkT2JqZWN0O2luZGljZXNCeVVVSURbdXVpZF09Zmlyc3RBY3RpdmVJbmRleDtvYmplY3RzW2ZpcnN0QWN0aXZlSW5kZXhdPW9iamVjdDsvLyBhY2NvdW50aW5nIGlzIGRvbmUsIG5vdyBkbyB0aGUgc2FtZSBmb3IgYWxsIGJpbmRpbmdzXG5mb3IodmFyIGo9MCxtPW5CaW5kaW5ncztqIT09bTsrK2ope3ZhciBiaW5kaW5nc0ZvclBhdGg9YmluZGluZ3Nbal0sbGFzdENhY2hlZD1iaW5kaW5nc0ZvclBhdGhbZmlyc3RBY3RpdmVJbmRleF0sYmluZGluZz1iaW5kaW5nc0ZvclBhdGhbaW5kZXhdO2JpbmRpbmdzRm9yUGF0aFtpbmRleF09bGFzdENhY2hlZDtpZihiaW5kaW5nPT09dW5kZWZpbmVkKXsvLyBzaW5jZSB3ZSBkbyBub3QgYm90aGVyIHRvIGNyZWF0ZSBuZXcgYmluZGluZ3Ncbi8vIGZvciBvYmplY3RzIHRoYXQgYXJlIGNhY2hlZCwgdGhlIGJpbmRpbmcgbWF5XG4vLyBvciBtYXkgbm90IGV4aXN0XG5iaW5kaW5nPW5ldyBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcob2JqZWN0LHBhdGhzW2pdLHBhcnNlZFBhdGhzW2pdKTt9YmluZGluZ3NGb3JQYXRoW2ZpcnN0QWN0aXZlSW5kZXhdPWJpbmRpbmc7fX1lbHNlIGlmKG9iamVjdHNbaW5kZXhdIT09a25vd25PYmplY3Qpe2NvbnNvbGUuZXJyb3IoXCJEaWZmZXJlbnQgb2JqZWN0cyB3aXRoIHRoZSBzYW1lIFVVSUQgXCIrXCJkZXRlY3RlZC4gQ2xlYW4gdGhlIGNhY2hlcyBvciByZWNyZWF0ZSB5b3VyIFwiK1wiaW5mcmFzdHJ1Y3R1cmUgd2hlbiByZWxvYWRpbmcgc2NlbmVzLi4uXCIpO30vLyBlbHNlIHRoZSBvYmplY3QgaXMgYWxyZWFkeSB3aGVyZSB3ZSB3YW50IGl0IHRvIGJlXG59Ly8gZm9yIGFyZ3VtZW50c1xudGhpcy5uQ2FjaGVkT2JqZWN0c189bkNhY2hlZE9iamVjdHM7fSxyZW1vdmU6ZnVuY3Rpb24odmFyX2FyZ3Mpe3ZhciBvYmplY3RzPXRoaXMuX29iamVjdHMsbk9iamVjdHM9b2JqZWN0cy5sZW5ndGgsbkNhY2hlZE9iamVjdHM9dGhpcy5uQ2FjaGVkT2JqZWN0c18saW5kaWNlc0J5VVVJRD10aGlzLl9pbmRpY2VzQnlVVUlELGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzLG5CaW5kaW5ncz1iaW5kaW5ncy5sZW5ndGg7Zm9yKHZhciBpPTAsbj1hcmd1bWVudHMubGVuZ3RoO2khPT1uOysraSl7dmFyIG9iamVjdD1hcmd1bWVudHNbaV0sdXVpZD1vYmplY3QudXVpZCxpbmRleD1pbmRpY2VzQnlVVUlEW3V1aWRdO2lmKGluZGV4IT09dW5kZWZpbmVkJiZpbmRleD49bkNhY2hlZE9iamVjdHMpey8vIG1vdmUgZXhpc3Rpbmcgb2JqZWN0IGludG8gdGhlIENBQ0hFRCByZWdpb25cbnZhciBsYXN0Q2FjaGVkSW5kZXg9bkNhY2hlZE9iamVjdHMrKyxmaXJzdEFjdGl2ZU9iamVjdD1vYmplY3RzW2xhc3RDYWNoZWRJbmRleF07aW5kaWNlc0J5VVVJRFtmaXJzdEFjdGl2ZU9iamVjdC51dWlkXT1pbmRleDtvYmplY3RzW2luZGV4XT1maXJzdEFjdGl2ZU9iamVjdDtpbmRpY2VzQnlVVUlEW3V1aWRdPWxhc3RDYWNoZWRJbmRleDtvYmplY3RzW2xhc3RDYWNoZWRJbmRleF09b2JqZWN0Oy8vIGFjY291bnRpbmcgaXMgZG9uZSwgbm93IGRvIHRoZSBzYW1lIGZvciBhbGwgYmluZGluZ3NcbmZvcih2YXIgaj0wLG09bkJpbmRpbmdzO2ohPT1tOysrail7dmFyIGJpbmRpbmdzRm9yUGF0aD1iaW5kaW5nc1tqXSxmaXJzdEFjdGl2ZT1iaW5kaW5nc0ZvclBhdGhbbGFzdENhY2hlZEluZGV4XSxiaW5kaW5nPWJpbmRpbmdzRm9yUGF0aFtpbmRleF07YmluZGluZ3NGb3JQYXRoW2luZGV4XT1maXJzdEFjdGl2ZTtiaW5kaW5nc0ZvclBhdGhbbGFzdENhY2hlZEluZGV4XT1iaW5kaW5nO319fS8vIGZvciBhcmd1bWVudHNcbnRoaXMubkNhY2hlZE9iamVjdHNfPW5DYWNoZWRPYmplY3RzO30sLy8gcmVtb3ZlICYgZm9yZ2V0XG51bmNhY2hlOmZ1bmN0aW9uKHZhcl9hcmdzKXt2YXIgb2JqZWN0cz10aGlzLl9vYmplY3RzLG5PYmplY3RzPW9iamVjdHMubGVuZ3RoLG5DYWNoZWRPYmplY3RzPXRoaXMubkNhY2hlZE9iamVjdHNfLGluZGljZXNCeVVVSUQ9dGhpcy5faW5kaWNlc0J5VVVJRCxiaW5kaW5ncz10aGlzLl9iaW5kaW5ncyxuQmluZGluZ3M9YmluZGluZ3MubGVuZ3RoO2Zvcih2YXIgaT0wLG49YXJndW1lbnRzLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBvYmplY3Q9YXJndW1lbnRzW2ldLHV1aWQ9b2JqZWN0LnV1aWQsaW5kZXg9aW5kaWNlc0J5VVVJRFt1dWlkXTtpZihpbmRleCE9PXVuZGVmaW5lZCl7ZGVsZXRlIGluZGljZXNCeVVVSURbdXVpZF07aWYoaW5kZXg8bkNhY2hlZE9iamVjdHMpey8vIG9iamVjdCBpcyBjYWNoZWQsIHNocmluayB0aGUgQ0FDSEVEIHJlZ2lvblxudmFyIGZpcnN0QWN0aXZlSW5kZXg9LS1uQ2FjaGVkT2JqZWN0cyxsYXN0Q2FjaGVkT2JqZWN0PW9iamVjdHNbZmlyc3RBY3RpdmVJbmRleF0sbGFzdEluZGV4PS0tbk9iamVjdHMsbGFzdE9iamVjdD1vYmplY3RzW2xhc3RJbmRleF07Ly8gbGFzdCBjYWNoZWQgb2JqZWN0IHRha2VzIHRoaXMgb2JqZWN0J3MgcGxhY2VcbmluZGljZXNCeVVVSURbbGFzdENhY2hlZE9iamVjdC51dWlkXT1pbmRleDtvYmplY3RzW2luZGV4XT1sYXN0Q2FjaGVkT2JqZWN0Oy8vIGxhc3Qgb2JqZWN0IGdvZXMgdG8gdGhlIGFjdGl2YXRlZCBzbG90IGFuZCBwb3BcbmluZGljZXNCeVVVSURbbGFzdE9iamVjdC51dWlkXT1maXJzdEFjdGl2ZUluZGV4O29iamVjdHNbZmlyc3RBY3RpdmVJbmRleF09bGFzdE9iamVjdDtvYmplY3RzLnBvcCgpOy8vIGFjY291bnRpbmcgaXMgZG9uZSwgbm93IGRvIHRoZSBzYW1lIGZvciBhbGwgYmluZGluZ3NcbmZvcih2YXIgaj0wLG09bkJpbmRpbmdzO2ohPT1tOysrail7dmFyIGJpbmRpbmdzRm9yUGF0aD1iaW5kaW5nc1tqXSxsYXN0Q2FjaGVkPWJpbmRpbmdzRm9yUGF0aFtmaXJzdEFjdGl2ZUluZGV4XSxsYXN0PWJpbmRpbmdzRm9yUGF0aFtsYXN0SW5kZXhdO2JpbmRpbmdzRm9yUGF0aFtpbmRleF09bGFzdENhY2hlZDtiaW5kaW5nc0ZvclBhdGhbZmlyc3RBY3RpdmVJbmRleF09bGFzdDtiaW5kaW5nc0ZvclBhdGgucG9wKCk7fX1lbHNley8vIG9iamVjdCBpcyBhY3RpdmUsIGp1c3Qgc3dhcCB3aXRoIHRoZSBsYXN0IGFuZCBwb3BcbnZhciBsYXN0SW5kZXg9LS1uT2JqZWN0cyxsYXN0T2JqZWN0PW9iamVjdHNbbGFzdEluZGV4XTtpbmRpY2VzQnlVVUlEW2xhc3RPYmplY3QudXVpZF09aW5kZXg7b2JqZWN0c1tpbmRleF09bGFzdE9iamVjdDtvYmplY3RzLnBvcCgpOy8vIGFjY291bnRpbmcgaXMgZG9uZSwgbm93IGRvIHRoZSBzYW1lIGZvciBhbGwgYmluZGluZ3NcbmZvcih2YXIgaj0wLG09bkJpbmRpbmdzO2ohPT1tOysrail7dmFyIGJpbmRpbmdzRm9yUGF0aD1iaW5kaW5nc1tqXTtiaW5kaW5nc0ZvclBhdGhbaW5kZXhdPWJpbmRpbmdzRm9yUGF0aFtsYXN0SW5kZXhdO2JpbmRpbmdzRm9yUGF0aC5wb3AoKTt9fS8vIGNhY2hlZCBvciBhY3RpdmVcbn0vLyBpZiBvYmplY3QgaXMga25vd25cbn0vLyBmb3IgYXJndW1lbnRzXG50aGlzLm5DYWNoZWRPYmplY3RzXz1uQ2FjaGVkT2JqZWN0czt9LC8vIEludGVybmFsIGludGVyZmFjZSB1c2VkIGJ5IGJlZnJpZW5kZWQgUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZTpcbnN1YnNjcmliZV86ZnVuY3Rpb24ocGF0aCxwYXJzZWRQYXRoKXsvLyByZXR1cm5zIGFuIGFycmF5IG9mIGJpbmRpbmdzIGZvciB0aGUgZ2l2ZW4gcGF0aCB0aGF0IGlzIGNoYW5nZWRcbi8vIGFjY29yZGluZyB0byB0aGUgY29udGFpbmVkIG9iamVjdHMgaW4gdGhlIGdyb3VwXG52YXIgaW5kaWNlc0J5UGF0aD10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsaW5kZXg9aW5kaWNlc0J5UGF0aFtwYXRoXSxiaW5kaW5ncz10aGlzLl9iaW5kaW5ncztpZihpbmRleCE9PXVuZGVmaW5lZClyZXR1cm4gYmluZGluZ3NbaW5kZXhdO3ZhciBwYXRocz10aGlzLl9wYXRocyxwYXJzZWRQYXRocz10aGlzLl9wYXJzZWRQYXRocyxvYmplY3RzPXRoaXMuX29iamVjdHMsbk9iamVjdHM9b2JqZWN0cy5sZW5ndGgsbkNhY2hlZE9iamVjdHM9dGhpcy5uQ2FjaGVkT2JqZWN0c18sYmluZGluZ3NGb3JQYXRoPW5ldyBBcnJheShuT2JqZWN0cyk7aW5kZXg9YmluZGluZ3MubGVuZ3RoO2luZGljZXNCeVBhdGhbcGF0aF09aW5kZXg7cGF0aHMucHVzaChwYXRoKTtwYXJzZWRQYXRocy5wdXNoKHBhcnNlZFBhdGgpO2JpbmRpbmdzLnB1c2goYmluZGluZ3NGb3JQYXRoKTtmb3IodmFyIGk9bkNhY2hlZE9iamVjdHMsbj1vYmplY3RzLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBvYmplY3Q9b2JqZWN0c1tpXTtiaW5kaW5nc0ZvclBhdGhbaV09bmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhvYmplY3QscGF0aCxwYXJzZWRQYXRoKTt9cmV0dXJuIGJpbmRpbmdzRm9yUGF0aDt9LHVuc3Vic2NyaWJlXzpmdW5jdGlvbihwYXRoKXsvLyB0ZWxscyB0aGUgZ3JvdXAgdG8gZm9yZ2V0IGFib3V0IGEgcHJvcGVydHkgcGF0aCBhbmQgbm8gbG9uZ2VyXG4vLyB1cGRhdGUgdGhlIGFycmF5IHByZXZpb3VzbHkgb2J0YWluZWQgd2l0aCAnc3Vic2NyaWJlXydcbnZhciBpbmRpY2VzQnlQYXRoPXRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aCxpbmRleD1pbmRpY2VzQnlQYXRoW3BhdGhdO2lmKGluZGV4IT09dW5kZWZpbmVkKXt2YXIgcGF0aHM9dGhpcy5fcGF0aHMscGFyc2VkUGF0aHM9dGhpcy5fcGFyc2VkUGF0aHMsYmluZGluZ3M9dGhpcy5fYmluZGluZ3MsbGFzdEJpbmRpbmdzSW5kZXg9YmluZGluZ3MubGVuZ3RoLTEsbGFzdEJpbmRpbmdzPWJpbmRpbmdzW2xhc3RCaW5kaW5nc0luZGV4XSxsYXN0QmluZGluZ3NQYXRoPXBhdGhbbGFzdEJpbmRpbmdzSW5kZXhdO2luZGljZXNCeVBhdGhbbGFzdEJpbmRpbmdzUGF0aF09aW5kZXg7YmluZGluZ3NbaW5kZXhdPWxhc3RCaW5kaW5ncztiaW5kaW5ncy5wb3AoKTtwYXJzZWRQYXRoc1tpbmRleF09cGFyc2VkUGF0aHNbbGFzdEJpbmRpbmdzSW5kZXhdO3BhcnNlZFBhdGhzLnBvcCgpO3BhdGhzW2luZGV4XT1wYXRoc1tsYXN0QmluZGluZ3NJbmRleF07cGF0aHMucG9wKCk7fX19Oy8vIEZpbGU6c3JjL2FuaW1hdGlvbi9BbmltYXRpb25VdGlscy5qc1xuLyoqXHJcbiAqIEBhdXRob3IgdHNjaHdcclxuICogQGF1dGhvciBCZW4gSG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pby9cclxuICogQGF1dGhvciBEYXZpZCBTYXJubyAvIGh0dHA6Ly9saWdodGhhdXMudXMvXHJcbiAqL1RIUkVFLkFuaW1hdGlvblV0aWxzPXsvLyBzYW1lIGFzIEFycmF5LnByb3RvdHlwZS5zbGljZSwgYnV0IGFsc28gd29ya3Mgb24gdHlwZWQgYXJyYXlzXG5hcnJheVNsaWNlOmZ1bmN0aW9uKGFycmF5LGZyb20sdG8pe2lmKFRIUkVFLkFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheShhcnJheSkpe3JldHVybiBuZXcgYXJyYXkuY29uc3RydWN0b3IoYXJyYXkuc3ViYXJyYXkoZnJvbSx0bykpO31yZXR1cm4gYXJyYXkuc2xpY2UoZnJvbSx0byk7fSwvLyBjb252ZXJ0cyBhbiBhcnJheSB0byBhIHNwZWNpZmljIHR5cGVcbmNvbnZlcnRBcnJheTpmdW5jdGlvbihhcnJheSx0eXBlLGZvcmNlQ2xvbmUpe2lmKCFhcnJheXx8Ly8gbGV0ICd1bmRlZmluZWQnIGFuZCAnbnVsbCcgcGFzc1xuIWZvcmNlQ2xvbmUmJmFycmF5LmNvbnN0cnVjdG9yPT09dHlwZSlyZXR1cm4gYXJyYXk7aWYodHlwZW9mIHR5cGUuQllURVNfUEVSX0VMRU1FTlQ9PT0nbnVtYmVyJyl7cmV0dXJuIG5ldyB0eXBlKGFycmF5KTsvLyBjcmVhdGUgdHlwZWQgYXJyYXlcbn1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXkpOy8vIGNyZWF0ZSBBcnJheVxufSxpc1R5cGVkQXJyYXk6ZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KG9iamVjdCkmJiEob2JqZWN0IGluc3RhbmNlb2YgRGF0YVZpZXcpO30sLy8gcmV0dXJucyBhbiBhcnJheSBieSB3aGljaCB0aW1lcyBhbmQgdmFsdWVzIGNhbiBiZSBzb3J0ZWRcbmdldEtleWZyYW1lT3JkZXI6ZnVuY3Rpb24odGltZXMpe2Z1bmN0aW9uIGNvbXBhcmVUaW1lKGksail7cmV0dXJuIHRpbWVzW2ldLXRpbWVzW2pdO312YXIgbj10aW1lcy5sZW5ndGg7dmFyIHJlc3VsdD1uZXcgQXJyYXkobik7Zm9yKHZhciBpPTA7aSE9PW47KytpKXJlc3VsdFtpXT1pO3Jlc3VsdC5zb3J0KGNvbXBhcmVUaW1lKTtyZXR1cm4gcmVzdWx0O30sLy8gdXNlcyB0aGUgYXJyYXkgcHJldmlvdXNseSByZXR1cm5lZCBieSAnZ2V0S2V5ZnJhbWVPcmRlcicgdG8gc29ydCBkYXRhXG5zb3J0ZWRBcnJheTpmdW5jdGlvbih2YWx1ZXMsc3RyaWRlLG9yZGVyKXt2YXIgblZhbHVlcz12YWx1ZXMubGVuZ3RoO3ZhciByZXN1bHQ9bmV3IHZhbHVlcy5jb25zdHJ1Y3RvcihuVmFsdWVzKTtmb3IodmFyIGk9MCxkc3RPZmZzZXQ9MDtkc3RPZmZzZXQhPT1uVmFsdWVzOysraSl7dmFyIHNyY09mZnNldD1vcmRlcltpXSpzdHJpZGU7Zm9yKHZhciBqPTA7aiE9PXN0cmlkZTsrK2ope3Jlc3VsdFtkc3RPZmZzZXQrK109dmFsdWVzW3NyY09mZnNldCtqXTt9fXJldHVybiByZXN1bHQ7fSwvLyBmdW5jdGlvbiBmb3IgcGFyc2luZyBBT1Mga2V5ZnJhbWUgZm9ybWF0c1xuZmxhdHRlbkpTT046ZnVuY3Rpb24oanNvbktleXMsdGltZXMsdmFsdWVzLHZhbHVlUHJvcGVydHlOYW1lKXt2YXIgaT0xLGtleT1qc29uS2V5c1swXTt3aGlsZShrZXkhPT11bmRlZmluZWQmJmtleVt2YWx1ZVByb3BlcnR5TmFtZV09PT11bmRlZmluZWQpe2tleT1qc29uS2V5c1tpKytdO31pZihrZXk9PT11bmRlZmluZWQpcmV0dXJuOy8vIG5vIGRhdGFcbnZhciB2YWx1ZT1rZXlbdmFsdWVQcm9wZXJ0eU5hbWVdO2lmKHZhbHVlPT09dW5kZWZpbmVkKXJldHVybjsvLyBubyBkYXRhXG5pZihBcnJheS5pc0FycmF5KHZhbHVlKSl7ZG97dmFsdWU9a2V5W3ZhbHVlUHJvcGVydHlOYW1lXTtpZih2YWx1ZSE9PXVuZGVmaW5lZCl7dGltZXMucHVzaChrZXkudGltZSk7dmFsdWVzLnB1c2guYXBwbHkodmFsdWVzLHZhbHVlKTsvLyBwdXNoIGFsbCBlbGVtZW50c1xufWtleT1qc29uS2V5c1tpKytdO313aGlsZShrZXkhPT11bmRlZmluZWQpO31lbHNlIGlmKHZhbHVlLnRvQXJyYXkhPT11bmRlZmluZWQpey8vIC4uLmFzc3VtZSBUSFJFRS5NYXRoLWlzaFxuZG97dmFsdWU9a2V5W3ZhbHVlUHJvcGVydHlOYW1lXTtpZih2YWx1ZSE9PXVuZGVmaW5lZCl7dGltZXMucHVzaChrZXkudGltZSk7dmFsdWUudG9BcnJheSh2YWx1ZXMsdmFsdWVzLmxlbmd0aCk7fWtleT1qc29uS2V5c1tpKytdO313aGlsZShrZXkhPT11bmRlZmluZWQpO31lbHNley8vIG90aGVyd2lzZSBwdXNoIGFzLWlzXG5kb3t2YWx1ZT1rZXlbdmFsdWVQcm9wZXJ0eU5hbWVdO2lmKHZhbHVlIT09dW5kZWZpbmVkKXt0aW1lcy5wdXNoKGtleS50aW1lKTt2YWx1ZXMucHVzaCh2YWx1ZSk7fWtleT1qc29uS2V5c1tpKytdO313aGlsZShrZXkhPT11bmRlZmluZWQpO319fTsvLyBGaWxlOnNyYy9hbmltYXRpb24vS2V5ZnJhbWVUcmFjay5qc1xuLyoqXHJcbiAqXHJcbiAqIEEgdGltZWQgc2VxdWVuY2Ugb2Yga2V5ZnJhbWVzIGZvciBhIHNwZWNpZmljIHByb3BlcnR5LlxyXG4gKlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJlbiBIb3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvL1xyXG4gKiBAYXV0aG9yIERhdmlkIFNhcm5vIC8gaHR0cDovL2xpZ2h0aGF1cy51cy9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5LZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKG5hbWUsdGltZXMsdmFsdWVzLGludGVycG9sYXRpb24pe2lmKG5hbWU9PT11bmRlZmluZWQpdGhyb3cgbmV3IEVycm9yKFwidHJhY2sgbmFtZSBpcyB1bmRlZmluZWRcIik7aWYodGltZXM9PT11bmRlZmluZWR8fHRpbWVzLmxlbmd0aD09PTApe3Rocm93IG5ldyBFcnJvcihcIm5vIGtleWZyYW1lcyBpbiB0cmFjayBuYW1lZCBcIituYW1lKTt9dGhpcy5uYW1lPW5hbWU7dGhpcy50aW1lcz1USFJFRS5BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkodGltZXMsdGhpcy5UaW1lQnVmZmVyVHlwZSk7dGhpcy52YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KHZhbHVlcyx0aGlzLlZhbHVlQnVmZmVyVHlwZSk7dGhpcy5zZXRJbnRlcnBvbGF0aW9uKGludGVycG9sYXRpb258fHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pO3RoaXMudmFsaWRhdGUoKTt0aGlzLm9wdGltaXplKCk7fTtUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuS2V5ZnJhbWVUcmFjayxUaW1lQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksVmFsdWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjpUSFJFRS5JbnRlcnBvbGF0ZUxpbmVhcixJbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpmdW5jdGlvbihyZXN1bHQpe3JldHVybiBuZXcgVEhSRUUuRGlzY3JldGVJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCkscmVzdWx0KTt9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbihyZXN1bHQpe3JldHVybiBuZXcgVEhSRUUuTGluZWFySW50ZXJwb2xhbnQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHJlc3VsdCk7fSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6ZnVuY3Rpb24ocmVzdWx0KXtyZXR1cm4gbmV3IFRIUkVFLkN1YmljSW50ZXJwb2xhbnQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHJlc3VsdCk7fSxzZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKGludGVycG9sYXRpb24pe3ZhciBmYWN0b3J5TWV0aG9kO3N3aXRjaChpbnRlcnBvbGF0aW9uKXtjYXNlIFRIUkVFLkludGVycG9sYXRlRGlzY3JldGU6ZmFjdG9yeU1ldGhvZD10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlO2JyZWFrO2Nhc2UgVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXI6ZmFjdG9yeU1ldGhvZD10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjticmVhaztjYXNlIFRIUkVFLkludGVycG9sYXRlU21vb3RoOmZhY3RvcnlNZXRob2Q9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg7YnJlYWs7fWlmKGZhY3RvcnlNZXRob2Q9PT11bmRlZmluZWQpe3ZhciBtZXNzYWdlPVwidW5zdXBwb3J0ZWQgaW50ZXJwb2xhdGlvbiBmb3IgXCIrdGhpcy5WYWx1ZVR5cGVOYW1lK1wiIGtleWZyYW1lIHRyYWNrIG5hbWVkIFwiK3RoaXMubmFtZTtpZih0aGlzLmNyZWF0ZUludGVycG9sYW50PT09dW5kZWZpbmVkKXsvLyBmYWxsIGJhY2sgdG8gZGVmYXVsdCwgdW5sZXNzIHRoZSBkZWZhdWx0IGl0c2VsZiBpcyBtZXNzZWQgdXBcbmlmKGludGVycG9sYXRpb24hPT10aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKXt0aGlzLnNldEludGVycG9sYXRpb24odGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbik7fWVsc2V7dGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOy8vIGZhdGFsLCBpbiB0aGlzIGNhc2Vcbn19Y29uc29sZS53YXJuKG1lc3NhZ2UpO3JldHVybjt9dGhpcy5jcmVhdGVJbnRlcnBvbGFudD1mYWN0b3J5TWV0aG9kO30sZ2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNyZWF0ZUludGVycG9sYW50KXtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6cmV0dXJuIFRIUkVFLkludGVycG9sYXRlRGlzY3JldGU7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpyZXR1cm4gVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXI7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDpyZXR1cm4gVEhSRUUuSW50ZXJwb2xhdGVTbW9vdGg7fX0sZ2V0VmFsdWVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aC90aGlzLnRpbWVzLmxlbmd0aDt9LC8vIG1vdmUgYWxsIGtleWZyYW1lcyBlaXRoZXIgZm9yd2FyZHMgb3IgYmFja3dhcmRzIGluIHRpbWVcbnNoaWZ0OmZ1bmN0aW9uKHRpbWVPZmZzZXQpe2lmKHRpbWVPZmZzZXQhPT0wLjApe3ZhciB0aW1lcz10aGlzLnRpbWVzO2Zvcih2YXIgaT0wLG49dGltZXMubGVuZ3RoO2khPT1uOysraSl7dGltZXNbaV0rPXRpbWVPZmZzZXQ7fX1yZXR1cm4gdGhpczt9LC8vIHNjYWxlIGFsbCBrZXlmcmFtZSB0aW1lcyBieSBhIGZhY3RvciAodXNlZnVsIGZvciBmcmFtZSA8LT4gc2Vjb25kcyBjb252ZXJzaW9ucylcbnNjYWxlOmZ1bmN0aW9uKHRpbWVTY2FsZSl7aWYodGltZVNjYWxlIT09MS4wKXt2YXIgdGltZXM9dGhpcy50aW1lcztmb3IodmFyIGk9MCxuPXRpbWVzLmxlbmd0aDtpIT09bjsrK2kpe3RpbWVzW2ldKj10aW1lU2NhbGU7fX1yZXR1cm4gdGhpczt9LC8vIHJlbW92ZXMga2V5ZnJhbWVzIGJlZm9yZSBhbmQgYWZ0ZXIgYW5pbWF0aW9uIHdpdGhvdXQgY2hhbmdpbmcgYW55IHZhbHVlcyB3aXRoaW4gdGhlIHJhbmdlIFtzdGFydFRpbWUsIGVuZFRpbWVdLlxuLy8gSU1QT1JUQU5UOiBXZSBkbyBub3Qgc2hpZnQgYXJvdW5kIGtleXMgdG8gdGhlIHN0YXJ0IG9mIHRoZSB0cmFjayB0aW1lLCBiZWNhdXNlIGZvciBpbnRlcnBvbGF0ZWQga2V5cyB0aGlzIHdpbGwgY2hhbmdlIHRoZWlyIHZhbHVlc1xudHJpbTpmdW5jdGlvbihzdGFydFRpbWUsZW5kVGltZSl7dmFyIHRpbWVzPXRoaXMudGltZXMsbktleXM9dGltZXMubGVuZ3RoLGZyb209MCx0bz1uS2V5cy0xO3doaWxlKGZyb20hPT1uS2V5cyYmdGltZXNbZnJvbV08c3RhcnRUaW1lKSsrZnJvbTt3aGlsZSh0byE9PS0xJiZ0aW1lc1t0b10+ZW5kVGltZSktLXRvOysrdG87Ly8gaW5jbHVzaXZlIC0+IGV4Y2x1c2l2ZSBib3VuZFxuaWYoZnJvbSE9PTB8fHRvIT09bktleXMpey8vIGVtcHR5IHRyYWNrcyBhcmUgZm9yYmlkZGVuLCBzbyBrZWVwIGF0IGxlYXN0IG9uZSBrZXlmcmFtZVxuaWYoZnJvbT49dG8pdG89TWF0aC5tYXgodG8sMSksZnJvbT10by0xO3ZhciBzdHJpZGU9dGhpcy5nZXRWYWx1ZVNpemUoKTt0aGlzLnRpbWVzPVRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UodGltZXMsZnJvbSx0byk7dGhpcy52YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSh0aGlzLnZhbHVlcyxmcm9tKnN0cmlkZSx0bypzdHJpZGUpO31yZXR1cm4gdGhpczt9LC8vIGVuc3VyZSB3ZSBkbyBub3QgZ2V0IGEgR2FyYmFnZUluR2FyYmFnZU91dCBzaXR1YXRpb24sIG1ha2Ugc3VyZSB0cmFja3MgYXJlIGF0IGxlYXN0IG1pbmltYWxseSB2aWFibGVcbnZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIHZhbGlkPXRydWU7dmFyIHZhbHVlU2l6ZT10aGlzLmdldFZhbHVlU2l6ZSgpO2lmKHZhbHVlU2l6ZS1NYXRoLmZsb29yKHZhbHVlU2l6ZSkhPT0wKXtjb25zb2xlLmVycm9yKFwiaW52YWxpZCB2YWx1ZSBzaXplIGluIHRyYWNrXCIsdGhpcyk7dmFsaWQ9ZmFsc2U7fXZhciB0aW1lcz10aGlzLnRpbWVzLHZhbHVlcz10aGlzLnZhbHVlcyxuS2V5cz10aW1lcy5sZW5ndGg7aWYobktleXM9PT0wKXtjb25zb2xlLmVycm9yKFwidHJhY2sgaXMgZW1wdHlcIix0aGlzKTt2YWxpZD1mYWxzZTt9dmFyIHByZXZUaW1lPW51bGw7Zm9yKHZhciBpPTA7aSE9PW5LZXlzO2krKyl7dmFyIGN1cnJUaW1lPXRpbWVzW2ldO2lmKHR5cGVvZiBjdXJyVGltZT09PSdudW1iZXInJiZpc05hTihjdXJyVGltZSkpe2NvbnNvbGUuZXJyb3IoXCJ0aW1lIGlzIG5vdCBhIHZhbGlkIG51bWJlclwiLHRoaXMsaSxjdXJyVGltZSk7dmFsaWQ9ZmFsc2U7YnJlYWs7fWlmKHByZXZUaW1lIT09bnVsbCYmcHJldlRpbWU+Y3VyclRpbWUpe2NvbnNvbGUuZXJyb3IoXCJvdXQgb2Ygb3JkZXIga2V5c1wiLHRoaXMsaSxjdXJyVGltZSxwcmV2VGltZSk7dmFsaWQ9ZmFsc2U7YnJlYWs7fXByZXZUaW1lPWN1cnJUaW1lO31pZih2YWx1ZXMhPT11bmRlZmluZWQpe2lmKFRIUkVFLkFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheSh2YWx1ZXMpKXtmb3IodmFyIGk9MCxuPXZhbHVlcy5sZW5ndGg7aSE9PW47KytpKXt2YXIgdmFsdWU9dmFsdWVzW2ldO2lmKGlzTmFOKHZhbHVlKSl7Y29uc29sZS5lcnJvcihcInZhbHVlIGlzIG5vdCBhIHZhbGlkIG51bWJlclwiLHRoaXMsaSx2YWx1ZSk7dmFsaWQ9ZmFsc2U7YnJlYWs7fX19fXJldHVybiB2YWxpZDt9LC8vIHJlbW92ZXMgZXF1aXZhbGVudCBzZXF1ZW50aWFsIGtleXMgYXMgY29tbW9uIGluIG1vcnBoIHRhcmdldCBzZXF1ZW5jZXNcbi8vICgwLDAsMCwwLDEsMSwxLDAsMCwwLDAsMCwwLDApIC0tPiAoMCwwLDEsMSwwLDApXG5vcHRpbWl6ZTpmdW5jdGlvbigpe3ZhciB0aW1lcz10aGlzLnRpbWVzLHZhbHVlcz10aGlzLnZhbHVlcyxzdHJpZGU9dGhpcy5nZXRWYWx1ZVNpemUoKSx3cml0ZUluZGV4PTE7Zm9yKHZhciBpPTEsbj10aW1lcy5sZW5ndGgtMTtpPD1uOysraSl7dmFyIGtlZXA9ZmFsc2U7dmFyIHRpbWU9dGltZXNbaV07dmFyIHRpbWVOZXh0PXRpbWVzW2krMV07Ly8gcmVtb3ZlIGFkamFjZW50IGtleWZyYW1lcyBzY2hlZHVsZWQgYXQgdGhlIHNhbWUgdGltZVxuaWYodGltZSE9PXRpbWVOZXh0JiYoaSE9PTF8fHRpbWUhPT10aW1lWzBdKSl7Ly8gcmVtb3ZlIHVubmVjZXNzYXJ5IGtleWZyYW1lcyBzYW1lIGFzIHRoZWlyIG5laWdoYm9yc1xudmFyIG9mZnNldD1pKnN0cmlkZSxvZmZzZXRQPW9mZnNldC1zdHJpZGUsb2Zmc2V0Tj1vZmZzZXQrc3RyaWRlO2Zvcih2YXIgaj0wO2ohPT1zdHJpZGU7KytqKXt2YXIgdmFsdWU9dmFsdWVzW29mZnNldCtqXTtpZih2YWx1ZSE9PXZhbHVlc1tvZmZzZXRQK2pdfHx2YWx1ZSE9PXZhbHVlc1tvZmZzZXROK2pdKXtrZWVwPXRydWU7YnJlYWs7fX19Ly8gaW4tcGxhY2UgY29tcGFjdGlvblxuaWYoa2VlcCl7aWYoaSE9PXdyaXRlSW5kZXgpe3RpbWVzW3dyaXRlSW5kZXhdPXRpbWVzW2ldO3ZhciByZWFkT2Zmc2V0PWkqc3RyaWRlLHdyaXRlT2Zmc2V0PXdyaXRlSW5kZXgqc3RyaWRlO2Zvcih2YXIgaj0wO2ohPT1zdHJpZGU7KytqKXt2YWx1ZXNbd3JpdGVPZmZzZXQral09dmFsdWVzW3JlYWRPZmZzZXQral07fX0rK3dyaXRlSW5kZXg7fX1pZih3cml0ZUluZGV4IT09dGltZXMubGVuZ3RoKXt0aGlzLnRpbWVzPVRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UodGltZXMsMCx3cml0ZUluZGV4KTt0aGlzLnZhbHVlcz1USFJFRS5BbmltYXRpb25VdGlscy5hcnJheVNsaWNlKHZhbHVlcywwLHdyaXRlSW5kZXgqc3RyaWRlKTt9cmV0dXJuIHRoaXM7fX07Ly8gU3RhdGljIG1ldGhvZHM6XG5PYmplY3QuYXNzaWduKFRIUkVFLktleWZyYW1lVHJhY2ssey8vIFNlcmlhbGl6YXRpb24gKGluIHN0YXRpYyBjb250ZXh0LCBiZWNhdXNlIG9mIGNvbnN0cnVjdG9yIGludm9jYXRpb25cbi8vIGFuZCBhdXRvbWF0aWMgaW52b2NhdGlvbiBvZiAudG9KU09OKTpcbnBhcnNlOmZ1bmN0aW9uKGpzb24pe2lmKGpzb24udHlwZT09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKFwidHJhY2sgdHlwZSB1bmRlZmluZWQsIGNhbiBub3QgcGFyc2VcIik7fXZhciB0cmFja1R5cGU9VEhSRUUuS2V5ZnJhbWVUcmFjay5fZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZShqc29uLnR5cGUpO2lmKGpzb24udGltZXM9PT11bmRlZmluZWQpe3ZhciB0aW1lcz1bXSx2YWx1ZXM9W107VEhSRUUuQW5pbWF0aW9uVXRpbHMuZmxhdHRlbkpTT04oanNvbi5rZXlzLHRpbWVzLHZhbHVlcywndmFsdWUnKTtqc29uLnRpbWVzPXRpbWVzO2pzb24udmFsdWVzPXZhbHVlczt9Ly8gZGVyaXZlZCBjbGFzc2VzIGNhbiBkZWZpbmUgYSBzdGF0aWMgcGFyc2UgbWV0aG9kXG5pZih0cmFja1R5cGUucGFyc2UhPT11bmRlZmluZWQpe3JldHVybiB0cmFja1R5cGUucGFyc2UoanNvbik7fWVsc2V7Ly8gYnkgZGVmYXVsdCwgd2UgYXNzc3VtZSBhIGNvbnN0cnVjdG9yIGNvbXBhdGlibGUgd2l0aCB0aGUgYmFzZVxucmV0dXJuIG5ldyB0cmFja1R5cGUoanNvbi5uYW1lLGpzb24udGltZXMsanNvbi52YWx1ZXMsanNvbi5pbnRlcnBvbGF0aW9uKTt9fSx0b0pTT046ZnVuY3Rpb24odHJhY2spe3ZhciB0cmFja1R5cGU9dHJhY2suY29uc3RydWN0b3I7dmFyIGpzb247Ly8gZGVyaXZlZCBjbGFzc2VzIGNhbiBkZWZpbmUgYSBzdGF0aWMgdG9KU09OIG1ldGhvZFxuaWYodHJhY2tUeXBlLnRvSlNPTiE9PXVuZGVmaW5lZCl7anNvbj10cmFja1R5cGUudG9KU09OKHRyYWNrKTt9ZWxzZXsvLyBieSBkZWZhdWx0LCB3ZSBhc3N1bWUgdGhlIGRhdGEgY2FuIGJlIHNlcmlhbGl6ZWQgYXMtaXNcbmpzb249eyduYW1lJzp0cmFjay5uYW1lLCd0aW1lcyc6VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KHRyYWNrLnRpbWVzLEFycmF5KSwndmFsdWVzJzpUSFJFRS5BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkodHJhY2sudmFsdWVzLEFycmF5KX07dmFyIGludGVycG9sYXRpb249dHJhY2suZ2V0SW50ZXJwb2xhdGlvbigpO2lmKGludGVycG9sYXRpb24hPT10cmFjay5EZWZhdWx0SW50ZXJwb2xhdGlvbil7anNvbi5pbnRlcnBvbGF0aW9uPWludGVycG9sYXRpb247fX1qc29uLnR5cGU9dHJhY2suVmFsdWVUeXBlTmFtZTsvLyBtYW5kYXRvcnlcbnJldHVybiBqc29uO30sX2dldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWU6ZnVuY3Rpb24odHlwZU5hbWUpe3N3aXRjaCh0eXBlTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJzY2FsYXJcIjpjYXNlXCJkb3VibGVcIjpjYXNlXCJmbG9hdFwiOmNhc2VcIm51bWJlclwiOmNhc2VcImludGVnZXJcIjpyZXR1cm4gVEhSRUUuTnVtYmVyS2V5ZnJhbWVUcmFjaztjYXNlXCJ2ZWN0b3JcIjpjYXNlXCJ2ZWN0b3IyXCI6Y2FzZVwidmVjdG9yM1wiOmNhc2VcInZlY3RvcjRcIjpyZXR1cm4gVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjaztjYXNlXCJjb2xvclwiOnJldHVybiBUSFJFRS5Db2xvcktleWZyYW1lVHJhY2s7Y2FzZVwicXVhdGVybmlvblwiOnJldHVybiBUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaztjYXNlXCJib29sXCI6Y2FzZVwiYm9vbGVhblwiOnJldHVybiBUSFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjaztjYXNlXCJzdHJpbmdcIjpyZXR1cm4gVEhSRUUuU3RyaW5nS2V5ZnJhbWVUcmFjazt9dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdHlwZU5hbWU6IFwiK3R5cGVOYW1lKTt9fSk7Ly8gRmlsZTpzcmMvYW5pbWF0aW9uL1Byb3BlcnR5QmluZGluZy5qc1xuLyoqXHJcbiAqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcmVhbCBwcm9wZXJ0eSBpbiB0aGUgc2NlbmUgZ3JhcGguXHJcbiAqXHJcbiAqXHJcbiAqIEBhdXRob3IgQmVuIEhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3IgRGF2aWQgU2Fybm8gLyBodHRwOi8vbGlnaHRoYXVzLnVzL1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLlByb3BlcnR5QmluZGluZz1mdW5jdGlvbihyb290Tm9kZSxwYXRoLHBhcnNlZFBhdGgpe3RoaXMucGF0aD1wYXRoO3RoaXMucGFyc2VkUGF0aD1wYXJzZWRQYXRofHxUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcucGFyc2VUcmFja05hbWUocGF0aCk7dGhpcy5ub2RlPVRIUkVFLlByb3BlcnR5QmluZGluZy5maW5kTm9kZShyb290Tm9kZSx0aGlzLnBhcnNlZFBhdGgubm9kZU5hbWUpfHxyb290Tm9kZTt0aGlzLnJvb3ROb2RlPXJvb3ROb2RlO307VEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUHJvcGVydHlCaW5kaW5nLGdldFZhbHVlOmZ1bmN0aW9uIGdldFZhbHVlX3VuYm91bmQodGFyZ2V0QXJyYXksb2Zmc2V0KXt0aGlzLmJpbmQoKTt0aGlzLmdldFZhbHVlKHRhcmdldEFycmF5LG9mZnNldCk7Ly8gTm90ZTogVGhpcyBjbGFzcyB1c2VzIGEgU3RhdGUgcGF0dGVybiBvbiBhIHBlci1tZXRob2QgYmFzaXM6XG4vLyAnYmluZCcgc2V0cyAndGhpcy5nZXRWYWx1ZScgLyAnc2V0VmFsdWUnIGFuZCBzaGFkb3dzIHRoZVxuLy8gcHJvdG90eXBlIHZlcnNpb24gb2YgdGhlc2UgbWV0aG9kcyB3aXRoIG9uZSB0aGF0IHJlcHJlc2VudHNcbi8vIHRoZSBib3VuZCBzdGF0ZS4gV2hlbiB0aGUgcHJvcGVydHkgaXMgbm90IGZvdW5kLCB0aGUgbWV0aG9kc1xuLy8gYmVjb21lIG5vLW9wcy5cbn0sc2V0VmFsdWU6ZnVuY3Rpb24gZ2V0VmFsdWVfdW5ib3VuZChzb3VyY2VBcnJheSxvZmZzZXQpe3RoaXMuYmluZCgpO3RoaXMuc2V0VmFsdWUoc291cmNlQXJyYXksb2Zmc2V0KTt9LC8vIGNyZWF0ZSBnZXR0ZXIgLyBzZXR0ZXIgcGFpciBmb3IgYSBwcm9wZXJ0eSBpbiB0aGUgc2NlbmUgZ3JhcGhcbmJpbmQ6ZnVuY3Rpb24oKXt2YXIgdGFyZ2V0T2JqZWN0PXRoaXMubm9kZSxwYXJzZWRQYXRoPXRoaXMucGFyc2VkUGF0aCxvYmplY3ROYW1lPXBhcnNlZFBhdGgub2JqZWN0TmFtZSxwcm9wZXJ0eU5hbWU9cGFyc2VkUGF0aC5wcm9wZXJ0eU5hbWUscHJvcGVydHlJbmRleD1wYXJzZWRQYXRoLnByb3BlcnR5SW5kZXg7aWYoIXRhcmdldE9iamVjdCl7dGFyZ2V0T2JqZWN0PVRIUkVFLlByb3BlcnR5QmluZGluZy5maW5kTm9kZSh0aGlzLnJvb3ROb2RlLHBhcnNlZFBhdGgubm9kZU5hbWUpfHx0aGlzLnJvb3ROb2RlO3RoaXMubm9kZT10YXJnZXRPYmplY3Q7fS8vIHNldCBmYWlsIHN0YXRlIHNvIHdlIGNhbiBqdXN0ICdyZXR1cm4nIG9uIGVycm9yXG50aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYXZhaWxhYmxlO3RoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5hdmFpbGFibGU7Ly8gZW5zdXJlIHRoZXJlIGlzIGEgdmFsdWUgbm9kZVxuaWYoIXRhcmdldE9iamVjdCl7Y29uc29sZS5lcnJvcihcIiAgdHJ5aW5nIHRvIHVwZGF0ZSBub2RlIGZvciB0cmFjazogXCIrdGhpcy5wYXRoK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIpO3JldHVybjt9aWYob2JqZWN0TmFtZSl7dmFyIG9iamVjdEluZGV4PXBhcnNlZFBhdGgub2JqZWN0SW5kZXg7Ly8gc3BlY2lhbCBjYXNlcyB3ZXJlIHdlIG5lZWQgdG8gcmVhY2ggZGVlcGVyIGludG8gdGhlIGhpZXJhcmNoeSB0byBnZXQgdGhlIGZhY2UgbWF0ZXJpYWxzLi4uLlxuc3dpdGNoKG9iamVjdE5hbWUpe2Nhc2UnbWF0ZXJpYWxzJzppZighdGFyZ2V0T2JqZWN0Lm1hdGVyaWFsKXtjb25zb2xlLmVycm9yKCcgIGNhbiBub3QgYmluZCB0byBtYXRlcmlhbCBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbCcsdGhpcyk7cmV0dXJuO31pZighdGFyZ2V0T2JqZWN0Lm1hdGVyaWFsLm1hdGVyaWFscyl7Y29uc29sZS5lcnJvcignICBjYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwubWF0ZXJpYWxzIGFzIG5vZGUubWF0ZXJpYWwgZG9lcyBub3QgaGF2ZSBhIG1hdGVyaWFscyBhcnJheScsdGhpcyk7cmV0dXJuO310YXJnZXRPYmplY3Q9dGFyZ2V0T2JqZWN0Lm1hdGVyaWFsLm1hdGVyaWFsczticmVhaztjYXNlJ2JvbmVzJzppZighdGFyZ2V0T2JqZWN0LnNrZWxldG9uKXtjb25zb2xlLmVycm9yKCcgIGNhbiBub3QgYmluZCB0byBib25lcyBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBza2VsZXRvbicsdGhpcyk7cmV0dXJuO30vLyBwb3RlbnRpYWwgZnV0dXJlIG9wdGltaXphdGlvbjogc2tpcCB0aGlzIGlmIHByb3BlcnR5SW5kZXggaXMgYWxyZWFkeSBhbiBpbnRlZ2VyXG4vLyBhbmQgY29udmVydCB0aGUgaW50ZWdlciBzdHJpbmcgdG8gYSB0cnVlIGludGVnZXIuXG50YXJnZXRPYmplY3Q9dGFyZ2V0T2JqZWN0LnNrZWxldG9uLmJvbmVzOy8vIHN1cHBvcnQgcmVzb2x2aW5nIG1vcnBoVGFyZ2V0IG5hbWVzIGludG8gaW5kaWNlcy5cbmZvcih2YXIgaT0wO2k8dGFyZ2V0T2JqZWN0Lmxlbmd0aDtpKyspe2lmKHRhcmdldE9iamVjdFtpXS5uYW1lPT09b2JqZWN0SW5kZXgpe29iamVjdEluZGV4PWk7YnJlYWs7fX1icmVhaztkZWZhdWx0OmlmKHRhcmdldE9iamVjdFtvYmplY3ROYW1lXT09PXVuZGVmaW5lZCl7Y29uc29sZS5lcnJvcignICBjYW4gbm90IGJpbmQgdG8gb2JqZWN0TmFtZSBvZiBub2RlLCB1bmRlZmluZWQnLHRoaXMpO3JldHVybjt9dGFyZ2V0T2JqZWN0PXRhcmdldE9iamVjdFtvYmplY3ROYW1lXTt9aWYob2JqZWN0SW5kZXghPT11bmRlZmluZWQpe2lmKHRhcmdldE9iamVjdFtvYmplY3RJbmRleF09PT11bmRlZmluZWQpe2NvbnNvbGUuZXJyb3IoXCIgIHRyeWluZyB0byBiaW5kIHRvIG9iamVjdEluZGV4IG9mIG9iamVjdE5hbWUsIGJ1dCBpcyB1bmRlZmluZWQ6XCIsdGhpcyx0YXJnZXRPYmplY3QpO3JldHVybjt9dGFyZ2V0T2JqZWN0PXRhcmdldE9iamVjdFtvYmplY3RJbmRleF07fX0vLyByZXNvbHZlIHByb3BlcnR5XG52YXIgbm9kZVByb3BlcnR5PXRhcmdldE9iamVjdFtwcm9wZXJ0eU5hbWVdO2lmKCFub2RlUHJvcGVydHkpe3ZhciBub2RlTmFtZT1wYXJzZWRQYXRoLm5vZGVOYW1lO2NvbnNvbGUuZXJyb3IoXCIgIHRyeWluZyB0byB1cGRhdGUgcHJvcGVydHkgZm9yIHRyYWNrOiBcIitub2RlTmFtZSsnLicrcHJvcGVydHlOYW1lK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIsdGFyZ2V0T2JqZWN0KTtyZXR1cm47fS8vIGRldGVybWluZSB2ZXJzaW9uaW5nIHNjaGVtZVxudmFyIHZlcnNpb25pbmc9dGhpcy5WZXJzaW9uaW5nLk5vbmU7aWYodGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlIT09dW5kZWZpbmVkKXsvLyBtYXRlcmlhbFxudmVyc2lvbmluZz10aGlzLlZlcnNpb25pbmcuTmVlZHNVcGRhdGU7dGhpcy50YXJnZXRPYmplY3Q9dGFyZ2V0T2JqZWN0O31lbHNlIGlmKHRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlIT09dW5kZWZpbmVkKXsvLyBub2RlIHRyYW5zZm9ybVxudmVyc2lvbmluZz10aGlzLlZlcnNpb25pbmcuTWF0cml4V29ybGROZWVkc1VwZGF0ZTt0aGlzLnRhcmdldE9iamVjdD10YXJnZXRPYmplY3Q7fS8vIGRldGVybWluZSBob3cgdGhlIHByb3BlcnR5IGdldHMgYm91bmRcbnZhciBiaW5kaW5nVHlwZT10aGlzLkJpbmRpbmdUeXBlLkRpcmVjdDtpZihwcm9wZXJ0eUluZGV4IT09dW5kZWZpbmVkKXsvLyBhY2Nlc3MgYSBzdWIgZWxlbWVudCBvZiB0aGUgcHJvcGVydHkgYXJyYXkgKG9ubHkgcHJpbWl0aXZlcyBhcmUgc3VwcG9ydGVkIHJpZ2h0IG5vdylcbmlmKHByb3BlcnR5TmFtZT09PVwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIpey8vIHBvdGVudGlhbCBvcHRpbWl6YXRpb24sIHNraXAgdGhpcyBpZiBwcm9wZXJ0eUluZGV4IGlzIGFscmVhZHkgYW4gaW50ZWdlciwgYW5kIGNvbnZlcnQgdGhlIGludGVnZXIgc3RyaW5nIHRvIGEgdHJ1ZSBpbnRlZ2VyLlxuLy8gc3VwcG9ydCByZXNvbHZpbmcgbW9ycGhUYXJnZXQgbmFtZXMgaW50byBpbmRpY2VzLlxuaWYoIXRhcmdldE9iamVjdC5nZW9tZXRyeSl7Y29uc29sZS5lcnJvcignICBjYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2FzdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Jyx0aGlzKTtyZXR1cm47fWlmKCF0YXJnZXRPYmplY3QuZ2VvbWV0cnkubW9ycGhUYXJnZXRzKXtjb25zb2xlLmVycm9yKCcgIGNhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXN1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkubW9ycGhUYXJnZXRzJyx0aGlzKTtyZXR1cm47fWZvcih2YXIgaT0wO2k8dGhpcy5ub2RlLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7aSsrKXtpZih0YXJnZXRPYmplY3QuZ2VvbWV0cnkubW9ycGhUYXJnZXRzW2ldLm5hbWU9PT1wcm9wZXJ0eUluZGV4KXtwcm9wZXJ0eUluZGV4PWk7YnJlYWs7fX19YmluZGluZ1R5cGU9dGhpcy5CaW5kaW5nVHlwZS5BcnJheUVsZW1lbnQ7dGhpcy5yZXNvbHZlZFByb3BlcnR5PW5vZGVQcm9wZXJ0eTt0aGlzLnByb3BlcnR5SW5kZXg9cHJvcGVydHlJbmRleDt9ZWxzZSBpZihub2RlUHJvcGVydHkuZnJvbUFycmF5IT09dW5kZWZpbmVkJiZub2RlUHJvcGVydHkudG9BcnJheSE9PXVuZGVmaW5lZCl7Ly8gbXVzdCB1c2UgY29weSBmb3IgT2JqZWN0M0QuRXVsZXIvUXVhdGVybmlvblxuYmluZGluZ1R5cGU9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheTt0aGlzLnJlc29sdmVkUHJvcGVydHk9bm9kZVByb3BlcnR5O31lbHNlIGlmKG5vZGVQcm9wZXJ0eS5sZW5ndGghPT11bmRlZmluZWQpe2JpbmRpbmdUeXBlPXRoaXMuQmluZGluZ1R5cGUuRW50aXJlQXJyYXk7dGhpcy5yZXNvbHZlZFByb3BlcnR5PW5vZGVQcm9wZXJ0eTt9ZWxzZXt0aGlzLnByb3BlcnR5TmFtZT1wcm9wZXJ0eU5hbWU7fS8vIHNlbGVjdCBnZXR0ZXIgLyBzZXR0ZXJcbnRoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW2JpbmRpbmdUeXBlXTt0aGlzLnNldFZhbHVlPXRoaXMuU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmdbYmluZGluZ1R5cGVdW3ZlcnNpb25pbmddO30sdW5iaW5kOmZ1bmN0aW9uKCl7dGhpcy5ub2RlPW51bGw7Ly8gYmFjayB0byB0aGUgcHJvdG90eXBlIHZlcnNpb24gb2YgZ2V0VmFsdWUgLyBzZXRWYWx1ZVxuLy8gbm90ZTogYXZvaWRpbmcgdG8gbXV0YXRlIHRoZSBzaGFwZSBvZiAndGhpcycgdmlhICdkZWxldGUnXG50aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYm91bmQ7dGhpcy5zZXRWYWx1ZT10aGlzLl9zZXRWYWx1ZV91bmJvdW5kO319O09iamVjdC5hc3NpZ24oVEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZSx7Ly8gcHJvdG90eXBlLCBjb250aW51ZWRcbi8vIHRoZXNlIGFyZSB1c2VkIHRvIFwiYmluZFwiIGEgbm9uZXhpc3RlbnQgcHJvcGVydHlcbl9nZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sX3NldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSwvLyBpbml0aWFsIHN0YXRlIG9mIHRoZXNlIG1ldGhvZHMgdGhhdCBjYWxscyAnYmluZCdcbl9nZXRWYWx1ZV91bmJvdW5kOlRIUkVFLlByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuZ2V0VmFsdWUsX3NldFZhbHVlX3VuYm91bmQ6VEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5zZXRWYWx1ZSxCaW5kaW5nVHlwZTp7RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfSxWZXJzaW9uaW5nOntOb25lOjAsTmVlZHNVcGRhdGU6MSxNYXRyaXhXb3JsZE5lZWRzVXBkYXRlOjJ9LEdldHRlckJ5QmluZGluZ1R5cGU6W2Z1bmN0aW9uIGdldFZhbHVlX2RpcmVjdChidWZmZXIsb2Zmc2V0KXtidWZmZXJbb2Zmc2V0XT10aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdO30sZnVuY3Rpb24gZ2V0VmFsdWVfYXJyYXkoYnVmZmVyLG9mZnNldCl7dmFyIHNvdXJjZT10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKHZhciBpPTAsbj1zb3VyY2UubGVuZ3RoO2khPT1uOysraSl7YnVmZmVyW29mZnNldCsrXT1zb3VyY2VbaV07fX0sZnVuY3Rpb24gZ2V0VmFsdWVfYXJyYXlFbGVtZW50KGJ1ZmZlcixvZmZzZXQpe2J1ZmZlcltvZmZzZXRdPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdO30sZnVuY3Rpb24gZ2V0VmFsdWVfdG9BcnJheShidWZmZXIsb2Zmc2V0KXt0aGlzLnJlc29sdmVkUHJvcGVydHkudG9BcnJheShidWZmZXIsb2Zmc2V0KTt9XSxTZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZzpbWy8vIERpcmVjdFxuZnVuY3Rpb24gc2V0VmFsdWVfZGlyZWN0KGJ1ZmZlcixvZmZzZXQpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5TmFtZV09YnVmZmVyW29mZnNldF07fSxmdW5jdGlvbiBzZXRWYWx1ZV9kaXJlY3Rfc2V0TmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXT1idWZmZXJbb2Zmc2V0XTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT10cnVlO30sZnVuY3Rpb24gc2V0VmFsdWVfZGlyZWN0X3NldE1hdHJpeFdvcmxkTmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXT1idWZmZXJbb2Zmc2V0XTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRydWU7fV0sWy8vIEVudGlyZUFycmF5XG5mdW5jdGlvbiBzZXRWYWx1ZV9hcnJheShidWZmZXIsb2Zmc2V0KXt2YXIgZGVzdD10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKHZhciBpPTAsbj1kZXN0Lmxlbmd0aDtpIT09bjsrK2kpe2Rlc3RbaV09YnVmZmVyW29mZnNldCsrXTt9fSxmdW5jdGlvbiBzZXRWYWx1ZV9hcnJheV9zZXROZWVkc1VwZGF0ZShidWZmZXIsb2Zmc2V0KXt2YXIgZGVzdD10aGlzLnJlc29sdmVkUHJvcGVydHk7Zm9yKHZhciBpPTAsbj1kZXN0Lmxlbmd0aDtpIT09bjsrK2kpe2Rlc3RbaV09YnVmZmVyW29mZnNldCsrXTt9dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9dHJ1ZTt9LGZ1bmN0aW9uIHNldFZhbHVlX2FycmF5X3NldE1hdHJpeFdvcmxkTmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dmFyIGRlc3Q9dGhpcy5yZXNvbHZlZFByb3BlcnR5O2Zvcih2YXIgaT0wLG49ZGVzdC5sZW5ndGg7aSE9PW47KytpKXtkZXN0W2ldPWJ1ZmZlcltvZmZzZXQrK107fXRoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dHJ1ZTt9XSxbLy8gQXJyYXlFbGVtZW50XG5mdW5jdGlvbiBzZXRWYWx1ZV9hcnJheUVsZW1lbnQoYnVmZmVyLG9mZnNldCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YnVmZmVyW29mZnNldF07fSxmdW5jdGlvbiBzZXRWYWx1ZV9hcnJheUVsZW1lbnRfc2V0TmVlZHNVcGRhdGUoYnVmZmVyLG9mZnNldCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YnVmZmVyW29mZnNldF07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9dHJ1ZTt9LGZ1bmN0aW9uIHNldFZhbHVlX2FycmF5RWxlbWVudF9zZXRNYXRyaXhXb3JsZE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWJ1ZmZlcltvZmZzZXRdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dHJ1ZTt9XSxbLy8gSGFzVG9Gcm9tQXJyYXlcbmZ1bmN0aW9uIHNldFZhbHVlX2Zyb21BcnJheShidWZmZXIsb2Zmc2V0KXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGJ1ZmZlcixvZmZzZXQpO30sZnVuY3Rpb24gc2V0VmFsdWVfZnJvbUFycmF5X3NldE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYnVmZmVyLG9mZnNldCk7dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9dHJ1ZTt9LGZ1bmN0aW9uIHNldFZhbHVlX2Zyb21BcnJheV9zZXRNYXRyaXhXb3JsZE5lZWRzVXBkYXRlKGJ1ZmZlcixvZmZzZXQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYnVmZmVyLG9mZnNldCk7dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT10cnVlO31dXX0pO1RIUkVFLlByb3BlcnR5QmluZGluZy5Db21wb3NpdGU9ZnVuY3Rpb24odGFyZ2V0R3JvdXAscGF0aCxvcHRpb25hbFBhcnNlZFBhdGgpe3ZhciBwYXJzZWRQYXRoPW9wdGlvbmFsUGFyc2VkUGF0aHx8VEhSRUUuUHJvcGVydHlCaW5kaW5nLnBhcnNlVHJhY2tOYW1lKHBhdGgpO3RoaXMuX3RhcmdldEdyb3VwPXRhcmdldEdyb3VwO3RoaXMuX2JpbmRpbmdzPXRhcmdldEdyb3VwLnN1YnNjcmliZV8ocGF0aCxwYXJzZWRQYXRoKTt9O1RIUkVFLlByb3BlcnR5QmluZGluZy5Db21wb3NpdGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuQ29tcG9zaXRlLGdldFZhbHVlOmZ1bmN0aW9uKGFycmF5LG9mZnNldCl7dGhpcy5iaW5kKCk7Ly8gYmluZCBhbGwgYmluZGluZ1xudmFyIGZpcnN0VmFsaWRJbmRleD10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sYmluZGluZz10aGlzLl9iaW5kaW5nc1tmaXJzdFZhbGlkSW5kZXhdOy8vIGFuZCBvbmx5IGNhbGwgLmdldFZhbHVlIG9uIHRoZSBmaXJzdFxuaWYoYmluZGluZyE9PXVuZGVmaW5lZCliaW5kaW5nLmdldFZhbHVlKGFycmF5LG9mZnNldCk7fSxzZXRWYWx1ZTpmdW5jdGlvbihhcnJheSxvZmZzZXQpe3ZhciBiaW5kaW5ncz10aGlzLl9iaW5kaW5ncztmb3IodmFyIGk9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLG49YmluZGluZ3MubGVuZ3RoO2khPT1uOysraSl7YmluZGluZ3NbaV0uc2V0VmFsdWUoYXJyYXksb2Zmc2V0KTt9fSxiaW5kOmZ1bmN0aW9uKCl7dmFyIGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzO2Zvcih2YXIgaT10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXtiaW5kaW5nc1tpXS5iaW5kKCk7fX0sdW5iaW5kOmZ1bmN0aW9uKCl7dmFyIGJpbmRpbmdzPXRoaXMuX2JpbmRpbmdzO2Zvcih2YXIgaT10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sbj1iaW5kaW5ncy5sZW5ndGg7aSE9PW47KytpKXtiaW5kaW5nc1tpXS51bmJpbmQoKTt9fX07VEhSRUUuUHJvcGVydHlCaW5kaW5nLmNyZWF0ZT1mdW5jdGlvbihyb290LHBhdGgscGFyc2VkUGF0aCl7aWYoIShyb290IGluc3RhbmNlb2YgVEhSRUUuQW5pbWF0aW9uT2JqZWN0R3JvdXApKXtyZXR1cm4gbmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhyb290LHBhdGgscGFyc2VkUGF0aCk7fWVsc2V7cmV0dXJuIG5ldyBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuQ29tcG9zaXRlKHJvb3QscGF0aCxwYXJzZWRQYXRoKTt9fTtUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcucGFyc2VUcmFja05hbWU9ZnVuY3Rpb24odHJhY2tOYW1lKXsvLyBtYXRjaGVzIHN0cmluZ3MgaW4gdGhlIGZvcm0gb2Y6XG4vLyAgICBub2RlTmFtZS5wcm9wZXJ0eVxuLy8gICAgbm9kZU5hbWUucHJvcGVydHlbYWNjZXNzb3JdXG4vLyAgICBub2RlTmFtZS5tYXRlcmlhbC5wcm9wZXJ0eVthY2Nlc3Nvcl1cbi8vICAgIHV1aWQucHJvcGVydHlbYWNjZXNzb3JdXG4vLyAgICB1dWlkLm9iamVjdE5hbWVbb2JqZWN0SW5kZXhdLnByb3BlcnR5TmFtZVtwcm9wZXJ0eUluZGV4XVxuLy8gICAgcGFyZW50TmFtZS9ub2RlTmFtZS5wcm9wZXJ0eVxuLy8gICAgcGFyZW50TmFtZS9wYXJlbnROYW1lL25vZGVOYW1lLnByb3BlcnR5W2luZGV4XVxuLy9cdCAgLmJvbmVbQXJtYXR1cmUuREVGX2NvZ10ucG9zaXRpb25cbi8vIGNyZWF0ZWQgYW5kIHRlc3RlZCB2aWEgaHR0cHM6Ly9yZWdleDEwMS5jb20vI2phdmFzY3JpcHRcbnZhciByZT0vXigoW1xcd10rXFwvKSopKFtcXHctXFxkXSspPyhcXC4oW1xcd10rKShcXFsoW1xcd1xcZFxcW1xcXVxcXy46XFwtIF0rKVxcXSk/KT8oXFwuKFtcXHcuXSspKFxcWyhbXFx3XFxkXFxbXFxdXFxfLiBdKylcXF0pPykkLzt2YXIgbWF0Y2hlcz1yZS5leGVjKHRyYWNrTmFtZSk7aWYoIW1hdGNoZXMpe3Rocm93IG5ldyBFcnJvcihcImNhbm5vdCBwYXJzZSB0cmFja05hbWUgYXQgYWxsOiBcIit0cmFja05hbWUpO31pZihtYXRjaGVzLmluZGV4PT09cmUubGFzdEluZGV4KXtyZS5sYXN0SW5kZXgrKzt9dmFyIHJlc3VsdHM9ey8vIGRpcmVjdG9yeU5hbWU6IG1hdGNoZXNbMV0sIC8vICh0c2NodykgY3VycmVudGx5IHVudXNlZFxubm9kZU5hbWU6bWF0Y2hlc1szXSwvLyBhbGxvd2VkIHRvIGJlIG51bGwsIHNwZWNpZmllZCByb290IG5vZGUuXG5vYmplY3ROYW1lOm1hdGNoZXNbNV0sb2JqZWN0SW5kZXg6bWF0Y2hlc1s3XSxwcm9wZXJ0eU5hbWU6bWF0Y2hlc1s5XSxwcm9wZXJ0eUluZGV4Om1hdGNoZXNbMTFdLy8gYWxsb3dlZCB0byBiZSBudWxsLCBzcGVjaWZpZXMgdGhhdCB0aGUgd2hvbGUgcHJvcGVydHkgaXMgc2V0LlxufTtpZihyZXN1bHRzLnByb3BlcnR5TmFtZT09PW51bGx8fHJlc3VsdHMucHJvcGVydHlOYW1lLmxlbmd0aD09PTApe3Rocm93IG5ldyBFcnJvcihcImNhbiBub3QgcGFyc2UgcHJvcGVydHlOYW1lIGZyb20gdHJhY2tOYW1lOiBcIit0cmFja05hbWUpO31yZXR1cm4gcmVzdWx0czt9O1RIUkVFLlByb3BlcnR5QmluZGluZy5maW5kTm9kZT1mdW5jdGlvbihyb290LG5vZGVOYW1lKXtpZighbm9kZU5hbWV8fG5vZGVOYW1lPT09XCJcInx8bm9kZU5hbWU9PT1cInJvb3RcInx8bm9kZU5hbWU9PT1cIi5cInx8bm9kZU5hbWU9PT0tMXx8bm9kZU5hbWU9PT1yb290Lm5hbWV8fG5vZGVOYW1lPT09cm9vdC51dWlkKXtyZXR1cm4gcm9vdDt9Ly8gc2VhcmNoIGludG8gc2tlbGV0b24gYm9uZXMuXG5pZihyb290LnNrZWxldG9uKXt2YXIgc2VhcmNoU2tlbGV0b249ZnVuY3Rpb24oc2tlbGV0b24pe2Zvcih2YXIgaT0wO2k8c2tlbGV0b24uYm9uZXMubGVuZ3RoO2krKyl7dmFyIGJvbmU9c2tlbGV0b24uYm9uZXNbaV07aWYoYm9uZS5uYW1lPT09bm9kZU5hbWUpe3JldHVybiBib25lO319cmV0dXJuIG51bGw7fTt2YXIgYm9uZT1zZWFyY2hTa2VsZXRvbihyb290LnNrZWxldG9uKTtpZihib25lKXtyZXR1cm4gYm9uZTt9fS8vIHNlYXJjaCBpbnRvIG5vZGUgc3VidHJlZS5cbmlmKHJvb3QuY2hpbGRyZW4pe3ZhciBzZWFyY2hOb2RlU3VidHJlZT1mdW5jdGlvbihjaGlsZHJlbil7Zm9yKHZhciBpPTA7aTxjaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgY2hpbGROb2RlPWNoaWxkcmVuW2ldO2lmKGNoaWxkTm9kZS5uYW1lPT09bm9kZU5hbWV8fGNoaWxkTm9kZS51dWlkPT09bm9kZU5hbWUpe3JldHVybiBjaGlsZE5vZGU7fXZhciByZXN1bHQ9c2VhcmNoTm9kZVN1YnRyZWUoY2hpbGROb2RlLmNoaWxkcmVuKTtpZihyZXN1bHQpcmV0dXJuIHJlc3VsdDt9cmV0dXJuIG51bGw7fTt2YXIgc3ViVHJlZU5vZGU9c2VhcmNoTm9kZVN1YnRyZWUocm9vdC5jaGlsZHJlbik7aWYoc3ViVHJlZU5vZGUpe3JldHVybiBzdWJUcmVlTm9kZTt9fXJldHVybiBudWxsO307Ly8gRmlsZTpzcmMvYW5pbWF0aW9uL1Byb3BlcnR5TWl4ZXIuanNcbi8qKlxyXG4gKlxyXG4gKiBCdWZmZXJlZCBzY2VuZSBncmFwaCBwcm9wZXJ0eSB0aGF0IGFsbG93cyB3ZWlnaHRlZCBhY2N1bXVsYXRpb24uXHJcbiAqXHJcbiAqXHJcbiAqIEBhdXRob3IgQmVuIEhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3IgRGF2aWQgU2Fybm8gLyBodHRwOi8vbGlnaHRoYXVzLnVzL1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLlByb3BlcnR5TWl4ZXI9ZnVuY3Rpb24oYmluZGluZyx0eXBlTmFtZSx2YWx1ZVNpemUpe3RoaXMuYmluZGluZz1iaW5kaW5nO3RoaXMudmFsdWVTaXplPXZhbHVlU2l6ZTt2YXIgYnVmZmVyVHlwZT1GbG9hdDY0QXJyYXksbWl4RnVuY3Rpb247c3dpdGNoKHR5cGVOYW1lKXtjYXNlJ3F1YXRlcm5pb24nOm1peEZ1bmN0aW9uPXRoaXMuX3NsZXJwO2JyZWFrO2Nhc2Unc3RyaW5nJzpjYXNlJ2Jvb2wnOmJ1ZmZlclR5cGU9QXJyYXksbWl4RnVuY3Rpb249dGhpcy5fc2VsZWN0O2JyZWFrO2RlZmF1bHQ6bWl4RnVuY3Rpb249dGhpcy5fbGVycDt9dGhpcy5idWZmZXI9bmV3IGJ1ZmZlclR5cGUodmFsdWVTaXplKjQpOy8vIGxheW91dDogWyBpbmNvbWluZyB8IGFjY3UwIHwgYWNjdTEgfCBvcmlnIF1cbi8vXG4vLyBpbnRlcnBvbGF0b3JzIGNhbiB1c2UgLmJ1ZmZlciBhcyB0aGVpciAucmVzdWx0XG4vLyB0aGUgZGF0YSB0aGVuIGdvZXMgdG8gJ2luY29taW5nJ1xuLy9cbi8vICdhY2N1MCcgYW5kICdhY2N1MScgYXJlIHVzZWQgZnJhbWUtaW50ZXJsZWF2ZWQgZm9yXG4vLyB0aGUgY3VtdWxhdGl2ZSByZXN1bHQgYW5kIGFyZSBjb21wYXJlZCB0byBkZXRlY3Rcbi8vIGNoYW5nZXNcbi8vXG4vLyAnb3JpZycgc3RvcmVzIHRoZSBvcmlnaW5hbCBzdGF0ZSBvZiB0aGUgcHJvcGVydHlcbnRoaXMuX21peEJ1ZmZlclJlZ2lvbj1taXhGdW5jdGlvbjt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MDt0aGlzLnVzZUNvdW50PTA7dGhpcy5yZWZlcmVuY2VDb3VudD0wO307VEhSRUUuUHJvcGVydHlNaXhlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlByb3BlcnR5TWl4ZXIsLy8gYWNjdW11bGF0ZSBkYXRhIGluIHRoZSAnaW5jb21pbmcnIHJlZ2lvbiBpbnRvICdhY2N1PGk+J1xuYWNjdW11bGF0ZTpmdW5jdGlvbihhY2N1SW5kZXgsd2VpZ2h0KXsvLyBub3RlOiBoYXBwaWx5IGFjY3VtdWxhdGluZyBub3RoaW5nIHdoZW4gd2VpZ2h0ID0gMCwgdGhlIGNhbGxlciBrbm93c1xuLy8gdGhlIHdlaWdodCBhbmQgc2hvdWxkbid0IGhhdmUgbWFkZSB0aGUgY2FsbCBpbiB0aGUgZmlyc3QgcGxhY2VcbnZhciBidWZmZXI9dGhpcy5idWZmZXIsc3RyaWRlPXRoaXMudmFsdWVTaXplLG9mZnNldD1hY2N1SW5kZXgqc3RyaWRlK3N0cmlkZSxjdXJyZW50V2VpZ2h0PXRoaXMuY3VtdWxhdGl2ZVdlaWdodDtpZihjdXJyZW50V2VpZ2h0PT09MCl7Ly8gYWNjdU4gOj0gaW5jb21pbmcgKiB3ZWlnaHRcbmZvcih2YXIgaT0wO2khPT1zdHJpZGU7KytpKXtidWZmZXJbb2Zmc2V0K2ldPWJ1ZmZlcltpXTt9Y3VycmVudFdlaWdodD13ZWlnaHQ7fWVsc2V7Ly8gYWNjdU4gOj0gYWNjdU4gKyBpbmNvbWluZyAqIHdlaWdodFxuY3VycmVudFdlaWdodCs9d2VpZ2h0O3ZhciBtaXg9d2VpZ2h0L2N1cnJlbnRXZWlnaHQ7dGhpcy5fbWl4QnVmZmVyUmVnaW9uKGJ1ZmZlcixvZmZzZXQsMCxtaXgsc3RyaWRlKTt9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PWN1cnJlbnRXZWlnaHQ7fSwvLyBhcHBseSB0aGUgc3RhdGUgb2YgJ2FjY3U8aT4nIHRvIHRoZSBiaW5kaW5nIHdoZW4gYWNjdXMgZGlmZmVyXG5hcHBseTpmdW5jdGlvbihhY2N1SW5kZXgpe3ZhciBzdHJpZGU9dGhpcy52YWx1ZVNpemUsYnVmZmVyPXRoaXMuYnVmZmVyLG9mZnNldD1hY2N1SW5kZXgqc3RyaWRlK3N0cmlkZSx3ZWlnaHQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0LGJpbmRpbmc9dGhpcy5iaW5kaW5nO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD0wO2lmKHdlaWdodDwxKXsvLyBhY2N1TiA6PSBhY2N1TiArIG9yaWdpbmFsICogKCAxIC0gY3VtdWxhdGl2ZVdlaWdodCApXG52YXIgb3JpZ2luYWxWYWx1ZU9mZnNldD1zdHJpZGUqMzt0aGlzLl9taXhCdWZmZXJSZWdpb24oYnVmZmVyLG9mZnNldCxvcmlnaW5hbFZhbHVlT2Zmc2V0LDEtd2VpZ2h0LHN0cmlkZSk7fWZvcih2YXIgaT1zdHJpZGUsZT1zdHJpZGUrc3RyaWRlO2khPT1lOysraSl7aWYoYnVmZmVyW2ldIT09YnVmZmVyW2krc3RyaWRlXSl7Ly8gdmFsdWUgaGFzIGNoYW5nZWQgLT4gdXBkYXRlIHNjZW5lIGdyYXBoXG5iaW5kaW5nLnNldFZhbHVlKGJ1ZmZlcixvZmZzZXQpO2JyZWFrO319fSwvLyByZW1lbWJlciB0aGUgc3RhdGUgb2YgdGhlIGJvdW5kIHByb3BlcnR5IGFuZCBjb3B5IGl0IHRvIGJvdGggYWNjdXNcbnNhdmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGJpbmRpbmc9dGhpcy5iaW5kaW5nO3ZhciBidWZmZXI9dGhpcy5idWZmZXIsc3RyaWRlPXRoaXMudmFsdWVTaXplLG9yaWdpbmFsVmFsdWVPZmZzZXQ9c3RyaWRlKjM7YmluZGluZy5nZXRWYWx1ZShidWZmZXIsb3JpZ2luYWxWYWx1ZU9mZnNldCk7Ly8gYWNjdVswLi4xXSA6PSBvcmlnIC0tIGluaXRpYWxseSBkZXRlY3QgY2hhbmdlcyBhZ2FpbnN0IHRoZSBvcmlnaW5hbFxuZm9yKHZhciBpPXN0cmlkZSxlPW9yaWdpbmFsVmFsdWVPZmZzZXQ7aSE9PWU7KytpKXtidWZmZXJbaV09YnVmZmVyW29yaWdpbmFsVmFsdWVPZmZzZXQraSVzdHJpZGVdO310aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MDt9LC8vIGFwcGx5IHRoZSBzdGF0ZSBwcmV2aW91c2x5IHRha2VuIHZpYSAnc2F2ZU9yaWdpbmFsU3RhdGUnIHRvIHRoZSBiaW5kaW5nXG5yZXN0b3JlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe3ZhciBvcmlnaW5hbFZhbHVlT2Zmc2V0PXRoaXMudmFsdWVTaXplKjM7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLG9yaWdpbmFsVmFsdWVPZmZzZXQpO30sLy8gbWl4IGZ1bmN0aW9uc1xuX3NlbGVjdDpmdW5jdGlvbihidWZmZXIsZHN0T2Zmc2V0LHNyY09mZnNldCx0LHN0cmlkZSl7aWYodD49MC41KXtmb3IodmFyIGk9MDtpIT09c3RyaWRlOysraSl7YnVmZmVyW2RzdE9mZnNldCtpXT1idWZmZXJbc3JjT2Zmc2V0K2ldO319fSxfc2xlcnA6ZnVuY3Rpb24oYnVmZmVyLGRzdE9mZnNldCxzcmNPZmZzZXQsdCxzdHJpZGUpe1RIUkVFLlF1YXRlcm5pb24uc2xlcnBGbGF0KGJ1ZmZlcixkc3RPZmZzZXQsYnVmZmVyLGRzdE9mZnNldCxidWZmZXIsc3JjT2Zmc2V0LHQpO30sX2xlcnA6ZnVuY3Rpb24oYnVmZmVyLGRzdE9mZnNldCxzcmNPZmZzZXQsdCxzdHJpZGUpe3ZhciBzPTEtdDtmb3IodmFyIGk9MDtpIT09c3RyaWRlOysraSl7dmFyIGo9ZHN0T2Zmc2V0K2k7YnVmZmVyW2pdPWJ1ZmZlcltqXSpzK2J1ZmZlcltzcmNPZmZzZXQraV0qdDt9fX07Ly8gRmlsZTpzcmMvYW5pbWF0aW9uL3RyYWNrcy9Cb29sZWFuS2V5ZnJhbWVUcmFjay5qc1xuLyoqXHJcbiAqXHJcbiAqIEEgVHJhY2sgb2YgQm9vbGVhbiBrZXlmcmFtZSB2YWx1ZXMuXHJcbiAqXHJcbiAqXHJcbiAqIEBhdXRob3IgQmVuIEhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3IgRGF2aWQgU2Fybm8gLyBodHRwOi8vbGlnaHRoYXVzLnVzL1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLkJvb2xlYW5LZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKG5hbWUsdGltZXMsdmFsdWVzKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxuYW1lLHRpbWVzLHZhbHVlcyk7fTtUSFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLktleWZyYW1lVHJhY2sucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuQm9vbGVhbktleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTonYm9vbCcsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOlRIUkVFLkludGVycG9sYXRlRGlzY3JldGUsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnVuZGVmaW5lZCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dW5kZWZpbmVkLy8gTm90ZTogQWN0dWFsbHkgdGhpcyB0cmFjayBjb3VsZCBoYXZlIGEgb3B0aW1pemVkIC8gY29tcHJlc3NlZFxuLy8gcmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgdmFsdWUgYW5kIGEgY3VzdG9tIGludGVycG9sYW50IHRoYXRcbi8vIGNvbXB1dGVzIFwiZmlyc3RWYWx1ZSBeIGlzT2RkKCBpbmRleCApXCIuXG59KTsvLyBGaWxlOnNyYy9hbmltYXRpb24vdHJhY2tzL0NvbG9yS2V5ZnJhbWVUcmFjay5qc1xuLyoqXHJcbiAqXHJcbiAqIEEgVHJhY2sgb2Yga2V5ZnJhbWUgdmFsdWVzIHRoYXQgcmVwcmVzZW50IGNvbG9yLlxyXG4gKlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJlbiBIb3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvL1xyXG4gKiBAYXV0aG9yIERhdmlkIFNhcm5vIC8gaHR0cDovL2xpZ2h0aGF1cy51cy9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5Db2xvcktleWZyYW1lVHJhY2s9ZnVuY3Rpb24obmFtZSx0aW1lcyx2YWx1ZXMsaW50ZXJwb2xhdGlvbil7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsbmFtZSx0aW1lcyx2YWx1ZXMsaW50ZXJwb2xhdGlvbik7fTtUSFJFRS5Db2xvcktleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkNvbG9yS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOidjb2xvcicvLyBWYWx1ZUJ1ZmZlclR5cGUgaXMgaW5oZXJpdGVkXG4vLyBEZWZhdWx0SW50ZXJwb2xhdGlvbiBpcyBpbmhlcml0ZWRcbi8vIE5vdGU6IFZlcnkgYmFzaWMgaW1wbGVtZW50YXRpb24gYW5kIG5vdGhpbmcgc3BlY2lhbCB5ZXQuXG4vLyBIb3dldmVyLCB0aGlzIGlzIHRoZSBwbGFjZSBmb3IgY29sb3Igc3BhY2UgcGFyYW1ldGVyaXphdGlvbi5cbn0pOy8vIEZpbGU6c3JjL2FuaW1hdGlvbi90cmFja3MvTnVtYmVyS2V5ZnJhbWVUcmFjay5qc1xuLyoqXHJcbiAqXHJcbiAqIEEgVHJhY2sgb2YgbnVtZXJpYyBrZXlmcmFtZSB2YWx1ZXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQmVuIEhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW8vXHJcbiAqIEBhdXRob3IgRGF2aWQgU2Fybm8gLyBodHRwOi8vbGlnaHRoYXVzLnVzL1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLk51bWJlcktleWZyYW1lVHJhY2s9ZnVuY3Rpb24obmFtZSx0aW1lcyx2YWx1ZXMsaW50ZXJwb2xhdGlvbil7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsbmFtZSx0aW1lcyx2YWx1ZXMsaW50ZXJwb2xhdGlvbik7fTtUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrLFZhbHVlVHlwZU5hbWU6J251bWJlcicvLyBWYWx1ZUJ1ZmZlclR5cGUgaXMgaW5oZXJpdGVkXG4vLyBEZWZhdWx0SW50ZXJwb2xhdGlvbiBpcyBpbmhlcml0ZWRcbn0pOy8vIEZpbGU6c3JjL2FuaW1hdGlvbi90cmFja3MvUXVhdGVybmlvbktleWZyYW1lVHJhY2suanNcbi8qKlxyXG4gKlxyXG4gKiBBIFRyYWNrIG9mIHF1YXRlcm5pb24ga2V5ZnJhbWUgdmFsdWVzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJlbiBIb3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvL1xyXG4gKiBAYXV0aG9yIERhdmlkIFNhcm5vIC8gaHR0cDovL2xpZ2h0aGF1cy51cy9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKTt9O1RIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOidxdWF0ZXJuaW9uJywvLyBWYWx1ZUJ1ZmZlclR5cGUgaXMgaW5oZXJpdGVkXG5EZWZhdWx0SW50ZXJwb2xhdGlvbjpUSFJFRS5JbnRlcnBvbGF0ZUxpbmVhcixJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24ocmVzdWx0KXtyZXR1cm4gbmV3IFRIUkVFLlF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCkscmVzdWx0KTt9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp1bmRlZmluZWQvLyBub3QgeWV0IGltcGxlbWVudGVkXG59KTsvLyBGaWxlOnNyYy9hbmltYXRpb24vdHJhY2tzL1N0cmluZ0tleWZyYW1lVHJhY2suanNcbi8qKlxyXG4gKlxyXG4gKiBBIFRyYWNrIHRoYXQgaW50ZXJwb2xhdGVzIFN0cmluZ3NcclxuICpcclxuICpcclxuICogQGF1dGhvciBCZW4gSG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pby9cclxuICogQGF1dGhvciBEYXZpZCBTYXJubyAvIGh0dHA6Ly9saWdodGhhdXMudXMvXHJcbiAqIEBhdXRob3IgdHNjaHdcclxuICovVEhSRUUuU3RyaW5nS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKTt9O1RIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTonc3RyaW5nJyxWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246VEhSRUUuSW50ZXJwb2xhdGVEaXNjcmV0ZSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dW5kZWZpbmVkLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp1bmRlZmluZWR9KTsvLyBGaWxlOnNyYy9hbmltYXRpb24vdHJhY2tzL1ZlY3RvcktleWZyYW1lVHJhY2suanNcbi8qKlxyXG4gKlxyXG4gKiBBIFRyYWNrIG9mIHZlY3RvcmVkIGtleWZyYW1lIHZhbHVlcy5cclxuICpcclxuICpcclxuICogQGF1dGhvciBCZW4gSG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pby9cclxuICogQGF1dGhvciBEYXZpZCBTYXJubyAvIGh0dHA6Ly9saWdodGhhdXMudXMvXHJcbiAqIEBhdXRob3IgdHNjaHdcclxuICovVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxuYW1lLHRpbWVzLHZhbHVlcyxpbnRlcnBvbGF0aW9uKTt9O1RIUkVFLlZlY3RvcktleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcktleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTondmVjdG9yJy8vIFZhbHVlQnVmZmVyVHlwZSBpcyBpbmhlcml0ZWRcbi8vIERlZmF1bHRJbnRlcnBvbGF0aW9uIGlzIGluaGVyaXRlZFxufSk7Ly8gRmlsZTpzcmMvYXVkaW8vQXVkaW8uanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIFJlZWNlIEFhcm9uIExlY3JpdmFpbiAvIGh0dHA6Ly9yZWVjZW5vdGVzLmNvbS9cclxuICovVEhSRUUuQXVkaW89ZnVuY3Rpb24obGlzdGVuZXIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdBdWRpbyc7dGhpcy5jb250ZXh0PWxpc3RlbmVyLmNvbnRleHQ7dGhpcy5zb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3RoaXMuc291cmNlLm9uZW5kZWQ9dGhpcy5vbkVuZGVkLmJpbmQodGhpcyk7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QobGlzdGVuZXIuZ2V0SW5wdXQoKSk7dGhpcy5hdXRvcGxheT1mYWxzZTt0aGlzLnN0YXJ0VGltZT0wO3RoaXMucGxheWJhY2tSYXRlPTE7dGhpcy5pc1BsYXlpbmc9ZmFsc2U7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9dHJ1ZTt0aGlzLnNvdXJjZVR5cGU9J2VtcHR5Jzt0aGlzLmZpbHRlcnM9W107fTtUSFJFRS5BdWRpby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkF1ZGlvLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW47fSxzZXROb2RlU291cmNlOmZ1bmN0aW9uKGF1ZGlvTm9kZSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ZmFsc2U7dGhpcy5zb3VyY2VUeXBlPSdhdWRpb05vZGUnO3RoaXMuc291cmNlPWF1ZGlvTm9kZTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpczt9LHNldEJ1ZmZlcjpmdW5jdGlvbihhdWRpb0J1ZmZlcil7dGhpcy5zb3VyY2UuYnVmZmVyPWF1ZGlvQnVmZmVyO3RoaXMuc291cmNlVHlwZT0nYnVmZmVyJztpZih0aGlzLmF1dG9wbGF5KXRoaXMucGxheSgpO3JldHVybiB0aGlzO30scGxheTpmdW5jdGlvbigpe2lmKHRoaXMuaXNQbGF5aW5nPT09dHJ1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5BdWRpbzogQXVkaW8gaXMgYWxyZWFkeSBwbGF5aW5nLicpO3JldHVybjt9aWYodGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9PT1mYWxzZSl7Y29uc29sZS53YXJuKCdUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC4nKTtyZXR1cm47fXZhciBzb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3NvdXJjZS5idWZmZXI9dGhpcy5zb3VyY2UuYnVmZmVyO3NvdXJjZS5sb29wPXRoaXMuc291cmNlLmxvb3A7c291cmNlLm9uZW5kZWQ9dGhpcy5zb3VyY2Uub25lbmRlZDtzb3VyY2Uuc3RhcnQoMCx0aGlzLnN0YXJ0VGltZSk7c291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZT10aGlzLnBsYXliYWNrUmF0ZTt0aGlzLmlzUGxheWluZz10cnVlO3RoaXMuc291cmNlPXNvdXJjZTtyZXR1cm4gdGhpcy5jb25uZWN0KCk7fSxwYXVzZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzUGxheWJhY2tDb250cm9sPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuJyk7cmV0dXJuO310aGlzLnNvdXJjZS5zdG9wKCk7dGhpcy5zdGFydFRpbWU9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lO3JldHVybiB0aGlzO30sc3RvcDpmdW5jdGlvbigpe2lmKHRoaXMuaGFzUGxheWJhY2tDb250cm9sPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuJyk7cmV0dXJuO310aGlzLnNvdXJjZS5zdG9wKCk7dGhpcy5zdGFydFRpbWU9MDtyZXR1cm4gdGhpczt9LGNvbm5lY3Q6ZnVuY3Rpb24oKXtpZih0aGlzLmZpbHRlcnMubGVuZ3RoPjApe3RoaXMuc291cmNlLmNvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IodmFyIGk9MSxsPXRoaXMuZmlsdGVycy5sZW5ndGg7aTxsO2krKyl7dGhpcy5maWx0ZXJzW2ktMV0uY29ubmVjdCh0aGlzLmZpbHRlcnNbaV0pO310aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO31lbHNle3RoaXMuc291cmNlLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7fXJldHVybiB0aGlzO30sZGlzY29ubmVjdDpmdW5jdGlvbigpe2lmKHRoaXMuZmlsdGVycy5sZW5ndGg+MCl7dGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2Zvcih2YXIgaT0xLGw9dGhpcy5maWx0ZXJzLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmZpbHRlcnNbaS0xXS5kaXNjb25uZWN0KHRoaXMuZmlsdGVyc1tpXSk7fXRoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7fWVsc2V7dGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTt9cmV0dXJuIHRoaXM7fSxnZXRGaWx0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyczt9LHNldEZpbHRlcnM6ZnVuY3Rpb24odmFsdWUpe2lmKCF2YWx1ZSl2YWx1ZT1bXTtpZih0aGlzLmlzUGxheWluZz09PXRydWUpe3RoaXMuZGlzY29ubmVjdCgpO3RoaXMuZmlsdGVycz12YWx1ZTt0aGlzLmNvbm5lY3QoKTt9ZWxzZXt0aGlzLmZpbHRlcnM9dmFsdWU7fXJldHVybiB0aGlzO30sZ2V0RmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdO30sc2V0RmlsdGVyOmZ1bmN0aW9uKGZpbHRlcil7cmV0dXJuIHRoaXMuc2V0RmlsdGVycyhmaWx0ZXI/W2ZpbHRlcl06W10pO30sc2V0UGxheWJhY2tSYXRlOmZ1bmN0aW9uKHZhbHVlKXtpZih0aGlzLmhhc1BsYXliYWNrQ29udHJvbD09PWZhbHNlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLicpO3JldHVybjt9dGhpcy5wbGF5YmFja1JhdGU9dmFsdWU7aWYodGhpcy5pc1BsYXlpbmc9PT10cnVlKXt0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU9dGhpcy5wbGF5YmFja1JhdGU7fXJldHVybiB0aGlzO30sZ2V0UGxheWJhY2tSYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWJhY2tSYXRlO30sb25FbmRlZDpmdW5jdGlvbigpe3RoaXMuaXNQbGF5aW5nPWZhbHNlO30sZ2V0TG9vcDpmdW5jdGlvbigpe2lmKHRoaXMuaGFzUGxheWJhY2tDb250cm9sPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuJyk7cmV0dXJuIGZhbHNlO31yZXR1cm4gdGhpcy5zb3VyY2UubG9vcDt9LHNldExvb3A6ZnVuY3Rpb24odmFsdWUpe2lmKHRoaXMuaGFzUGxheWJhY2tDb250cm9sPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuJyk7cmV0dXJuO310aGlzLnNvdXJjZS5sb29wPXZhbHVlO30sZ2V0Vm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlO30sc2V0Vm9sdW1lOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmdhaW4uZ2Fpbi52YWx1ZT12YWx1ZTtyZXR1cm4gdGhpczt9fSk7Ly8gRmlsZTpzcmMvYXVkaW8vQXVkaW9BbmFseXNlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLkF1ZGlvQW5hbHlzZXI9ZnVuY3Rpb24oYXVkaW8sZmZ0U2l6ZSl7dGhpcy5hbmFseXNlcj1hdWRpby5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7dGhpcy5hbmFseXNlci5mZnRTaXplPWZmdFNpemUhPT11bmRlZmluZWQ/ZmZ0U2l6ZToyMDQ4O3RoaXMuZGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KTthdWRpby5nZXRPdXRwdXQoKS5jb25uZWN0KHRoaXMuYW5hbHlzZXIpO307T2JqZWN0LmFzc2lnbihUSFJFRS5BdWRpb0FuYWx5c2VyLnByb3RvdHlwZSx7Z2V0RnJlcXVlbmN5RGF0YTpmdW5jdGlvbigpe3RoaXMuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5kYXRhKTtyZXR1cm4gdGhpcy5kYXRhO30sZ2V0QXZlcmFnZUZyZXF1ZW5jeTpmdW5jdGlvbigpe3ZhciB2YWx1ZT0wLGRhdGE9dGhpcy5nZXRGcmVxdWVuY3lEYXRhKCk7Zm9yKHZhciBpPTA7aTxkYXRhLmxlbmd0aDtpKyspe3ZhbHVlKz1kYXRhW2ldO31yZXR1cm4gdmFsdWUvZGF0YS5sZW5ndGg7fX0pOy8vIEZpbGU6c3JjL2F1ZGlvL0F1ZGlvQ29udGV4dC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL09iamVjdC5kZWZpbmVQcm9wZXJ0eShUSFJFRSwnQXVkaW9Db250ZXh0Jyx7Z2V0OmZ1bmN0aW9uKCl7dmFyIGNvbnRleHQ7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY29udGV4dD09PXVuZGVmaW5lZCl7Y29udGV4dD1uZXcod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTt9cmV0dXJuIGNvbnRleHQ7fTt9KCl9KTsvLyBGaWxlOnNyYy9hdWRpby9Qb3NpdGlvbmFsQXVkaW8uanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Qb3NpdGlvbmFsQXVkaW89ZnVuY3Rpb24obGlzdGVuZXIpe1RIUkVFLkF1ZGlvLmNhbGwodGhpcyxsaXN0ZW5lcik7dGhpcy5wYW5uZXI9dGhpcy5jb250ZXh0LmNyZWF0ZVBhbm5lcigpO3RoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKTt9O1RIUkVFLlBvc2l0aW9uYWxBdWRpby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkF1ZGlvLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBvc2l0aW9uYWxBdWRpbyxnZXRPdXRwdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXI7fSxnZXRSZWZEaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZTt9LHNldFJlZkRpc3RhbmNlOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnBhbm5lci5yZWZEaXN0YW5jZT12YWx1ZTt9LGdldFJvbGxvZmZGYWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3Rvcjt9LHNldFJvbGxvZmZGYWN0b3I6ZnVuY3Rpb24odmFsdWUpe3RoaXMucGFubmVyLnJvbGxvZmZGYWN0b3I9dmFsdWU7fSxnZXREaXN0YW5jZU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFubmVyLmRpc3RhbmNlTW9kZWw7fSxzZXREaXN0YW5jZU1vZGVsOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsPXZhbHVlO30sZ2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2U7fSxzZXRNYXhEaXN0YW5jZTpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wYW5uZXIubWF4RGlzdGFuY2U9dmFsdWU7fSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbigpe3ZhciBwb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbiB1cGRhdGVNYXRyaXhXb3JsZChmb3JjZSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxmb3JjZSk7cG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3RoaXMucGFubmVyLnNldFBvc2l0aW9uKHBvc2l0aW9uLngscG9zaXRpb24ueSxwb3NpdGlvbi56KTt9O30oKX0pOy8vIEZpbGU6c3JjL2F1ZGlvL0F1ZGlvTGlzdGVuZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5BdWRpb0xpc3RlbmVyPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0F1ZGlvTGlzdGVuZXInO3RoaXMuY29udGV4dD1USFJFRS5BdWRpb0NvbnRleHQ7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTt0aGlzLmZpbHRlcj1udWxsO307VEhSRUUuQXVkaW9MaXN0ZW5lci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkF1ZGlvTGlzdGVuZXIsZ2V0SW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluO30scmVtb3ZlRmlsdGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5maWx0ZXIhPT1udWxsKXt0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmZpbHRlcik7dGhpcy5maWx0ZXIuZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7dGhpcy5maWx0ZXI9bnVsbDt9fSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXI7fSxzZXRGaWx0ZXI6ZnVuY3Rpb24odmFsdWUpe2lmKHRoaXMuZmlsdGVyIT09bnVsbCl7dGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpO3RoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTt9ZWxzZXt0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO310aGlzLmZpbHRlcj12YWx1ZTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmZpbHRlcik7dGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO30sZ2V0TWFzdGVyVm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlO30sc2V0TWFzdGVyVm9sdW1lOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmdhaW4uZ2Fpbi52YWx1ZT12YWx1ZTt9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKCl7dmFyIHBvc2l0aW9uPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHF1YXRlcm5pb249bmV3IFRIUkVFLlF1YXRlcm5pb24oKTt2YXIgc2NhbGU9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgb3JpZW50YXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gdXBkYXRlTWF0cml4V29ybGQoZm9yY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsZm9yY2UpO3ZhciBsaXN0ZW5lcj10aGlzLmNvbnRleHQubGlzdGVuZXI7dmFyIHVwPXRoaXMudXA7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UocG9zaXRpb24scXVhdGVybmlvbixzY2FsZSk7b3JpZW50YXRpb24uc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pO2xpc3RlbmVyLnNldFBvc2l0aW9uKHBvc2l0aW9uLngscG9zaXRpb24ueSxwb3NpdGlvbi56KTtsaXN0ZW5lci5zZXRPcmllbnRhdGlvbihvcmllbnRhdGlvbi54LG9yaWVudGF0aW9uLnksb3JpZW50YXRpb24ueix1cC54LHVwLnksdXAueik7fTt9KCl9KTsvLyBGaWxlOnNyYy9jYW1lcmFzL0NhbWVyYS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4qL1RIUkVFLkNhbWVyYT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdDYW1lcmEnO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBUSFJFRS5NYXRyaXg0KCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7fTtUSFJFRS5DYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNhbWVyYTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmdldFdvcmxkRGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIHF1YXRlcm5pb249bmV3IFRIUkVFLlF1YXRlcm5pb24oKTtyZXR1cm4gZnVuY3Rpb24ob3B0aW9uYWxUYXJnZXQpe3ZhciByZXN1bHQ9b3B0aW9uYWxUYXJnZXR8fG5ldyBUSFJFRS5WZWN0b3IzKCk7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24ocXVhdGVybmlvbik7cmV0dXJuIHJlc3VsdC5zZXQoMCwwLC0xKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbik7fTt9KCk7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5sb29rQXQ9ZnVuY3Rpb24oKXsvLyBUaGlzIHJvdXRpbmUgZG9lcyBub3Qgc3VwcG9ydCBjYW1lcmFzIHdpdGggcm90YXRlZCBhbmQvb3IgdHJhbnNsYXRlZCBwYXJlbnQocylcbnZhciBtMT1uZXcgVEhSRUUuTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbih2ZWN0b3Ipe20xLmxvb2tBdCh0aGlzLnBvc2l0aW9uLHZlY3Rvcix0aGlzLnVwKTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KG0xKTt9O30oKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9O1RIUkVFLkNhbWVyYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkoc291cmNlLm1hdHJpeFdvcmxkSW52ZXJzZSk7dGhpcy5wcm9qZWN0aW9uTWF0cml4LmNvcHkoc291cmNlLnByb2plY3Rpb25NYXRyaXgpO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvY2FtZXJhcy9DdWJlQ2FtZXJhLmpzXG4vKipcclxuICogQ2FtZXJhIGZvciByZW5kZXJpbmcgY3ViZSBtYXBzXHJcbiAqXHQtIHJlbmRlcnMgc2NlbmUgaW50byBheGlzLWFsaWduZWQgY3ViZVxyXG4gKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5DdWJlQ2FtZXJhPWZ1bmN0aW9uKG5lYXIsZmFyLGN1YmVSZXNvbHV0aW9uKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nQ3ViZUNhbWVyYSc7dmFyIGZvdj05MCxhc3BlY3Q9MTt2YXIgY2FtZXJhUFg9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYVBYLnVwLnNldCgwLC0xLDApO2NhbWVyYVBYLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygxLDAsMCkpO3RoaXMuYWRkKGNhbWVyYVBYKTt2YXIgY2FtZXJhTlg9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYU5YLnVwLnNldCgwLC0xLDApO2NhbWVyYU5YLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygtMSwwLDApKTt0aGlzLmFkZChjYW1lcmFOWCk7dmFyIGNhbWVyYVBZPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShmb3YsYXNwZWN0LG5lYXIsZmFyKTtjYW1lcmFQWS51cC5zZXQoMCwwLDEpO2NhbWVyYVBZLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCkpO3RoaXMuYWRkKGNhbWVyYVBZKTt2YXIgY2FtZXJhTlk9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGZvdixhc3BlY3QsbmVhcixmYXIpO2NhbWVyYU5ZLnVwLnNldCgwLDAsLTEpO2NhbWVyYU5ZLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApKTt0aGlzLmFkZChjYW1lcmFOWSk7dmFyIGNhbWVyYVBaPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShmb3YsYXNwZWN0LG5lYXIsZmFyKTtjYW1lcmFQWi51cC5zZXQoMCwtMSwwKTtjYW1lcmFQWi5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpKTt0aGlzLmFkZChjYW1lcmFQWik7dmFyIGNhbWVyYU5aPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShmb3YsYXNwZWN0LG5lYXIsZmFyKTtjYW1lcmFOWi51cC5zZXQoMCwtMSwwKTtjYW1lcmFOWi5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKSk7dGhpcy5hZGQoY2FtZXJhTlopO3ZhciBvcHRpb25zPXtmb3JtYXQ6VEhSRUUuUkdCRm9ybWF0LG1hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXIsbWluRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcn07dGhpcy5yZW5kZXJUYXJnZXQ9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZShjdWJlUmVzb2x1dGlvbixjdWJlUmVzb2x1dGlvbixvcHRpb25zKTt0aGlzLnVwZGF0ZUN1YmVNYXA9ZnVuY3Rpb24ocmVuZGVyZXIsc2NlbmUpe2lmKHRoaXMucGFyZW50PT09bnVsbCl0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIHJlbmRlclRhcmdldD10aGlzLnJlbmRlclRhcmdldDt2YXIgZ2VuZXJhdGVNaXBtYXBzPXJlbmRlclRhcmdldC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcztyZW5kZXJUYXJnZXQudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7cmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlPTA7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYVBYLHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlPTE7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYU5YLHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlPTI7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYVBZLHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlPTM7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYU5ZLHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlPTQ7cmVuZGVyZXIucmVuZGVyKHNjZW5lLGNhbWVyYVBaLHJlbmRlclRhcmdldCk7cmVuZGVyVGFyZ2V0LnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWdlbmVyYXRlTWlwbWFwcztyZW5kZXJUYXJnZXQuYWN0aXZlQ3ViZUZhY2U9NTtyZW5kZXJlci5yZW5kZXIoc2NlbmUsY2FtZXJhTloscmVuZGVyVGFyZ2V0KTtyZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQobnVsbCk7fTt9O1RIUkVFLkN1YmVDYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5DdWJlQ2FtZXJhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DdWJlQ2FtZXJhOy8vIEZpbGU6c3JjL2NhbWVyYXMvT3J0aG9ncmFwaGljQ2FtZXJhLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhPWZ1bmN0aW9uKGxlZnQscmlnaHQsdG9wLGJvdHRvbSxuZWFyLGZhcil7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy50eXBlPSdPcnRob2dyYXBoaWNDYW1lcmEnO3RoaXMuem9vbT0xO3RoaXMubGVmdD1sZWZ0O3RoaXMucmlnaHQ9cmlnaHQ7dGhpcy50b3A9dG9wO3RoaXMuYm90dG9tPWJvdHRvbTt0aGlzLm5lYXI9bmVhciE9PXVuZGVmaW5lZD9uZWFyOjAuMTt0aGlzLmZhcj1mYXIhPT11bmRlZmluZWQ/ZmFyOjIwMDA7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fTtUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5DYW1lcmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLGNvcHk6ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5sZWZ0PXNvdXJjZS5sZWZ0O3RoaXMucmlnaHQ9c291cmNlLnJpZ2h0O3RoaXMudG9wPXNvdXJjZS50b3A7dGhpcy5ib3R0b209c291cmNlLmJvdHRvbTt0aGlzLm5lYXI9c291cmNlLm5lYXI7dGhpcy5mYXI9c291cmNlLmZhcjt0aGlzLnpvb209c291cmNlLnpvb207cmV0dXJuIHRoaXM7fSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGR4PSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvKDIqdGhpcy56b29tKTt2YXIgZHk9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pO3ZhciBjeD0odGhpcy5yaWdodCt0aGlzLmxlZnQpLzI7dmFyIGN5PSh0aGlzLnRvcCt0aGlzLmJvdHRvbSkvMjt0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyhjeC1keCxjeCtkeCxjeStkeSxjeS1keSx0aGlzLm5lYXIsdGhpcy5mYXIpO30sdG9KU09OOmZ1bmN0aW9uKG1ldGEpe3ZhciBkYXRhPVRIUkVFLk9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLG1ldGEpO2RhdGEub2JqZWN0Lnpvb209dGhpcy56b29tO2RhdGEub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0O2RhdGEub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQ7ZGF0YS5vYmplY3QudG9wPXRoaXMudG9wO2RhdGEub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbTtkYXRhLm9iamVjdC5uZWFyPXRoaXMubmVhcjtkYXRhLm9iamVjdC5mYXI9dGhpcy5mYXI7cmV0dXJuIGRhdGE7fX0pOy8vIEZpbGU6c3JjL2NhbWVyYXMvUGVyc3BlY3RpdmVDYW1lcmEuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGdyZWdnbWFuIC8gaHR0cDovL2dhbWVzLmdyZWdnbWFuLmNvbS9cclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqL1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhPWZ1bmN0aW9uKGZvdixhc3BlY3QsbmVhcixmYXIpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nUGVyc3BlY3RpdmVDYW1lcmEnO3RoaXMuZm92PWZvdiE9PXVuZGVmaW5lZD9mb3Y6NTA7dGhpcy56b29tPTE7dGhpcy5uZWFyPW5lYXIhPT11bmRlZmluZWQ/bmVhcjowLjE7dGhpcy5mYXI9ZmFyIT09dW5kZWZpbmVkP2ZhcjoyMDAwO3RoaXMuZm9jdXM9MTA7dGhpcy5hc3BlY3Q9YXNwZWN0IT09dW5kZWZpbmVkP2FzcGVjdDoxO3RoaXMudmlldz1udWxsO3RoaXMuZmlsbUdhdWdlPTM1Oy8vIHdpZHRoIG9mIHRoZSBmaWxtIChkZWZhdWx0IGluIG1pbGxpbWV0ZXJzKVxudGhpcy5maWxtT2Zmc2V0PTA7Ly8gaG9yaXpvbnRhbCBmaWxtIG9mZnNldCAoc2FtZSB1bml0IGFzIGdhdWdlKVxudGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fTtUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkNhbWVyYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMuZm92PXNvdXJjZS5mb3Y7dGhpcy56b29tPXNvdXJjZS56b29tO3RoaXMubmVhcj1zb3VyY2UubmVhcjt0aGlzLmZhcj1zb3VyY2UuZmFyO3RoaXMuZm9jdXM9c291cmNlLmZvY3VzO3RoaXMuYXNwZWN0PXNvdXJjZS5hc3BlY3Q7dGhpcy52aWV3PXNvdXJjZS52aWV3PT09bnVsbD9udWxsOk9iamVjdC5hc3NpZ24oe30sc291cmNlLnZpZXcpO3RoaXMuZmlsbUdhdWdlPXNvdXJjZS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PXNvdXJjZS5maWxtT2Zmc2V0O3JldHVybiB0aGlzO30sLyoqXHJcblx0ICogU2V0cyB0aGUgRk9WIGJ5IGZvY2FsIGxlbmd0aCBpbiByZXNwZWN0IHRvIHRoZSBjdXJyZW50IC5maWxtR2F1Z2UuXHJcblx0ICpcclxuXHQgKiBUaGUgZGVmYXVsdCBmaWxtIGdhdWdlIGlzIDM1LCBzbyB0aGF0IHRoZSBmb2NhbCBsZW5ndGggY2FuIGJlIHNwZWNpZmllZCBmb3JcclxuXHQgKiBhIDM1bW0gKGZ1bGwgZnJhbWUpIGNhbWVyYS5cclxuXHQgKlxyXG5cdCAqIFZhbHVlcyBmb3IgZm9jYWwgbGVuZ3RoIGFuZCBmaWxtIGdhdWdlIG11c3QgaGF2ZSB0aGUgc2FtZSB1bml0LlxyXG5cdCAqL3NldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKGZvY2FsTGVuZ3RoKXsvLyBzZWUgaHR0cDovL3d3dy5ib2JhdGtpbnMuY29tL3Bob3RvZ3JhcGh5L3RlY2huaWNhbC9maWVsZF9vZl92aWV3Lmh0bWxcbnZhciB2RXh0ZW50U2xvcGU9MC41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL2ZvY2FsTGVuZ3RoO3RoaXMuZm92PVRIUkVFLk1hdGguUkFEMkRFRyoyKk1hdGguYXRhbih2RXh0ZW50U2xvcGUpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO30sLyoqXHJcblx0ICogQ2FsY3VsYXRlcyB0aGUgZm9jYWwgbGVuZ3RoIGZyb20gdGhlIGN1cnJlbnQgLmZvdiBhbmQgLmZpbG1HYXVnZS5cclxuXHQgKi9nZXRGb2NhbExlbmd0aDpmdW5jdGlvbigpe3ZhciB2RXh0ZW50U2xvcGU9TWF0aC50YW4oVEhSRUUuTWF0aC5ERUcyUkFEKjAuNSp0aGlzLmZvdik7cmV0dXJuIDAuNSp0aGlzLmdldEZpbG1IZWlnaHQoKS92RXh0ZW50U2xvcGU7fSxnZXRFZmZlY3RpdmVGT1Y6ZnVuY3Rpb24oKXtyZXR1cm4gVEhSRUUuTWF0aC5SQUQyREVHKjIqTWF0aC5hdGFuKE1hdGgudGFuKFRIUkVFLk1hdGguREVHMlJBRCowLjUqdGhpcy5mb3YpL3RoaXMuem9vbSk7fSxnZXRGaWxtV2lkdGg6ZnVuY3Rpb24oKXsvLyBmaWxtIG5vdCBjb21wbGV0ZWx5IGNvdmVyZWQgaW4gcG9ydHJhaXQgZm9ybWF0IChhc3BlY3QgPCAxKVxucmV0dXJuIHRoaXMuZmlsbUdhdWdlKk1hdGgubWluKHRoaXMuYXNwZWN0LDEpO30sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpey8vIGZpbG0gbm90IGNvbXBsZXRlbHkgY292ZXJlZCBpbiBsYW5kc2NhcGUgZm9ybWF0IChhc3BlY3QgPiAxKVxucmV0dXJuIHRoaXMuZmlsbUdhdWdlL01hdGgubWF4KHRoaXMuYXNwZWN0LDEpO30sLyoqXHJcblx0ICogU2V0cyBhbiBvZmZzZXQgaW4gYSBsYXJnZXIgZnJ1c3R1bS4gVGhpcyBpcyB1c2VmdWwgZm9yIG11bHRpLXdpbmRvdyBvclxyXG5cdCAqIG11bHRpLW1vbml0b3IvbXVsdGktbWFjaGluZSBzZXR1cHMuXHJcblx0ICpcclxuXHQgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUgM3gyIG1vbml0b3JzIGFuZCBlYWNoIG1vbml0b3IgaXMgMTkyMHgxMDgwIGFuZFxyXG5cdCAqIHRoZSBtb25pdG9ycyBhcmUgaW4gZ3JpZCBsaWtlIHRoaXNcclxuXHQgKlxyXG5cdCAqICAgKy0tLSstLS0rLS0tK1xyXG5cdCAqICAgfCBBIHwgQiB8IEMgfFxyXG5cdCAqICAgKy0tLSstLS0rLS0tK1xyXG5cdCAqICAgfCBEIHwgRSB8IEYgfFxyXG5cdCAqICAgKy0tLSstLS0rLS0tK1xyXG5cdCAqXHJcblx0ICogdGhlbiBmb3IgZWFjaCBtb25pdG9yIHlvdSB3b3VsZCBjYWxsIGl0IGxpa2UgdGhpc1xyXG5cdCAqXHJcblx0ICogICB2YXIgdyA9IDE5MjA7XHJcblx0ICogICB2YXIgaCA9IDEwODA7XHJcblx0ICogICB2YXIgZnVsbFdpZHRoID0gdyAqIDM7XHJcblx0ICogICB2YXIgZnVsbEhlaWdodCA9IGggKiAyO1xyXG5cdCAqXHJcblx0ICogICAtLUEtLVxyXG5cdCAqICAgY2FtZXJhLnNldE9mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMCwgaCAqIDAsIHcsIGggKTtcclxuXHQgKiAgIC0tQi0tXHJcblx0ICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAxLCBoICogMCwgdywgaCApO1xyXG5cdCAqICAgLS1DLS1cclxuXHQgKiAgIGNhbWVyYS5zZXRPZmZzZXQoIGZ1bGxXaWR0aCwgZnVsbEhlaWdodCwgdyAqIDIsIGggKiAwLCB3LCBoICk7XHJcblx0ICogICAtLUQtLVxyXG5cdCAqICAgY2FtZXJhLnNldE9mZnNldCggZnVsbFdpZHRoLCBmdWxsSGVpZ2h0LCB3ICogMCwgaCAqIDEsIHcsIGggKTtcclxuXHQgKiAgIC0tRS0tXHJcblx0ICogICBjYW1lcmEuc2V0T2Zmc2V0KCBmdWxsV2lkdGgsIGZ1bGxIZWlnaHQsIHcgKiAxLCBoICogMSwgdywgaCApO1xyXG5cdCAqICAgLS1GLS1cclxuXHQgKiAgIGNhbWVyYS5zZXRPZmZzZXQoIGZ1bGxXaWR0aCwgZnVsbEhlaWdodCwgdyAqIDIsIGggKiAxLCB3LCBoICk7XHJcblx0ICpcclxuXHQgKiAgIE5vdGUgdGhlcmUgaXMgbm8gcmVhc29uIG1vbml0b3JzIGhhdmUgdG8gYmUgdGhlIHNhbWUgc2l6ZSBvciBpbiBhIGdyaWQuXHJcblx0ICovc2V0Vmlld09mZnNldDpmdW5jdGlvbihmdWxsV2lkdGgsZnVsbEhlaWdodCx4LHksd2lkdGgsaGVpZ2h0KXt0aGlzLmFzcGVjdD1mdWxsV2lkdGgvZnVsbEhlaWdodDt0aGlzLnZpZXc9e2Z1bGxXaWR0aDpmdWxsV2lkdGgsZnVsbEhlaWdodDpmdWxsSGVpZ2h0LG9mZnNldFg6eCxvZmZzZXRZOnksd2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodH07dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXc9bnVsbDt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9LHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6ZnVuY3Rpb24oKXt2YXIgbmVhcj10aGlzLm5lYXIsdG9wPW5lYXIqTWF0aC50YW4oVEhSRUUuTWF0aC5ERUcyUkFEKjAuNSp0aGlzLmZvdikvdGhpcy56b29tLGhlaWdodD0yKnRvcCx3aWR0aD10aGlzLmFzcGVjdCpoZWlnaHQsbGVmdD0tMC41KndpZHRoLHZpZXc9dGhpcy52aWV3O2lmKHZpZXchPT1udWxsKXt2YXIgZnVsbFdpZHRoPXZpZXcuZnVsbFdpZHRoLGZ1bGxIZWlnaHQ9dmlldy5mdWxsSGVpZ2h0O2xlZnQrPXZpZXcub2Zmc2V0WCp3aWR0aC9mdWxsV2lkdGg7dG9wLT12aWV3Lm9mZnNldFkqaGVpZ2h0L2Z1bGxIZWlnaHQ7d2lkdGgqPXZpZXcud2lkdGgvZnVsbFdpZHRoO2hlaWdodCo9dmlldy5oZWlnaHQvZnVsbEhlaWdodDt9dmFyIHNrZXc9dGhpcy5maWxtT2Zmc2V0O2lmKHNrZXchPT0wKWxlZnQrPW5lYXIqc2tldy90aGlzLmdldEZpbG1XaWR0aCgpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlRnJ1c3R1bShsZWZ0LGxlZnQrd2lkdGgsdG9wLWhlaWdodCx0b3AsbmVhcix0aGlzLmZhcik7fSx0b0pTT046ZnVuY3Rpb24obWV0YSl7dmFyIGRhdGE9VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsbWV0YSk7ZGF0YS5vYmplY3QuZm92PXRoaXMuZm92O2RhdGEub2JqZWN0Lnpvb209dGhpcy56b29tO2RhdGEub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2RhdGEub2JqZWN0LmZhcj10aGlzLmZhcjtkYXRhLm9iamVjdC5mb2N1cz10aGlzLmZvY3VzO2RhdGEub2JqZWN0LmFzcGVjdD10aGlzLmFzcGVjdDtpZih0aGlzLnZpZXchPT1udWxsKWRhdGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpO2RhdGEub2JqZWN0LmZpbG1HYXVnZT10aGlzLmZpbG1HYXVnZTtkYXRhLm9iamVjdC5maWxtT2Zmc2V0PXRoaXMuZmlsbU9mZnNldDtyZXR1cm4gZGF0YTt9fSk7Ly8gRmlsZTpzcmMvY2FtZXJhcy9TdGVyZW9DYW1lcmEuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5TdGVyZW9DYW1lcmE9ZnVuY3Rpb24oKXt0aGlzLnR5cGU9J1N0ZXJlb0NhbWVyYSc7dGhpcy5hc3BlY3Q9MTt0aGlzLmNhbWVyYUw9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCk7dGhpcy5jYW1lcmFMLmxheWVycy5lbmFibGUoMSk7dGhpcy5jYW1lcmFMLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5jYW1lcmFSPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgpO3RoaXMuY2FtZXJhUi5sYXllcnMuZW5hYmxlKDIpO3RoaXMuY2FtZXJhUi5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO307T2JqZWN0LmFzc2lnbihUSFJFRS5TdGVyZW9DYW1lcmEucHJvdG90eXBlLHt1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgZm9jdXMsZm92LGFzcGVjdCxuZWFyLGZhcjt2YXIgZXllUmlnaHQ9bmV3IFRIUkVFLk1hdHJpeDQoKTt2YXIgZXllTGVmdD1uZXcgVEhSRUUuTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiB1cGRhdGUoY2FtZXJhKXt2YXIgbmVlZHNVcGRhdGU9Zm9jdXMhPT1jYW1lcmEuZm9jdXN8fGZvdiE9PWNhbWVyYS5mb3Z8fGFzcGVjdCE9PWNhbWVyYS5hc3BlY3QqdGhpcy5hc3BlY3R8fG5lYXIhPT1jYW1lcmEubmVhcnx8ZmFyIT09Y2FtZXJhLmZhcjtpZihuZWVkc1VwZGF0ZSl7Zm9jdXM9Y2FtZXJhLmZvY3VzO2Zvdj1jYW1lcmEuZm92O2FzcGVjdD1jYW1lcmEuYXNwZWN0KnRoaXMuYXNwZWN0O25lYXI9Y2FtZXJhLm5lYXI7ZmFyPWNhbWVyYS5mYXI7Ly8gT2ZmLWF4aXMgc3RlcmVvc2NvcGljIGVmZmVjdCBiYXNlZCBvblxuLy8gaHR0cDovL3BhdWxib3Vya2UubmV0L3N0ZXJlb2dyYXBoaWNzL3N0ZXJlb3JlbmRlci9cbnZhciBwcm9qZWN0aW9uTWF0cml4PWNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmNsb25lKCk7dmFyIGV5ZVNlcD0wLjA2NC8yO3ZhciBleWVTZXBPblByb2plY3Rpb249ZXllU2VwKm5lYXIvZm9jdXM7dmFyIHltYXg9bmVhcipNYXRoLnRhbihUSFJFRS5NYXRoLkRFRzJSQUQqZm92KjAuNSk7dmFyIHhtaW4seG1heDsvLyB0cmFuc2xhdGUgeE9mZnNldFxuZXllTGVmdC5lbGVtZW50c1sxMl09LWV5ZVNlcDtleWVSaWdodC5lbGVtZW50c1sxMl09ZXllU2VwOy8vIGZvciBsZWZ0IGV5ZVxueG1pbj0teW1heCphc3BlY3QrZXllU2VwT25Qcm9qZWN0aW9uO3htYXg9eW1heCphc3BlY3QrZXllU2VwT25Qcm9qZWN0aW9uO3Byb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMF09MipuZWFyLyh4bWF4LXhtaW4pO3Byb2plY3Rpb25NYXRyaXguZWxlbWVudHNbOF09KHhtYXgreG1pbikvKHhtYXgteG1pbik7dGhpcy5jYW1lcmFMLnByb2plY3Rpb25NYXRyaXguY29weShwcm9qZWN0aW9uTWF0cml4KTsvLyBmb3IgcmlnaHQgZXllXG54bWluPS15bWF4KmFzcGVjdC1leWVTZXBPblByb2plY3Rpb247eG1heD15bWF4KmFzcGVjdC1leWVTZXBPblByb2plY3Rpb247cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1swXT0yKm5lYXIvKHhtYXgteG1pbik7cHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1s4XT0oeG1heCt4bWluKS8oeG1heC14bWluKTt0aGlzLmNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5jb3B5KHByb2plY3Rpb25NYXRyaXgpO310aGlzLmNhbWVyYUwubWF0cml4V29ybGQuY29weShjYW1lcmEubWF0cml4V29ybGQpLm11bHRpcGx5KGV5ZUxlZnQpO3RoaXMuY2FtZXJhUi5tYXRyaXhXb3JsZC5jb3B5KGNhbWVyYS5tYXRyaXhXb3JsZCkubXVsdGlwbHkoZXllUmlnaHQpO307fSgpfSk7Ly8gRmlsZTpzcmMvbGlnaHRzL0xpZ2h0LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuTGlnaHQ9ZnVuY3Rpb24oY29sb3IsaW50ZW5zaXR5KXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTGlnaHQnO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGNvbG9yKTt0aGlzLmludGVuc2l0eT1pbnRlbnNpdHkhPT11bmRlZmluZWQ/aW50ZW5zaXR5OjE7dGhpcy5yZWNlaXZlU2hhZG93PXVuZGVmaW5lZDt9O1RIUkVFLkxpZ2h0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTGlnaHQsY29weTpmdW5jdGlvbihzb3VyY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMuaW50ZW5zaXR5PXNvdXJjZS5pbnRlbnNpdHk7cmV0dXJuIHRoaXM7fSx0b0pTT046ZnVuY3Rpb24obWV0YSl7dmFyIGRhdGE9VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsbWV0YSk7ZGF0YS5vYmplY3QuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKTtkYXRhLm9iamVjdC5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7aWYodGhpcy5ncm91bmRDb2xvciE9PXVuZGVmaW5lZClkYXRhLm9iamVjdC5ncm91bmRDb2xvcj10aGlzLmdyb3VuZENvbG9yLmdldEhleCgpO2lmKHRoaXMuZGlzdGFuY2UhPT11bmRlZmluZWQpZGF0YS5vYmplY3QuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZTtpZih0aGlzLmFuZ2xlIT09dW5kZWZpbmVkKWRhdGEub2JqZWN0LmFuZ2xlPXRoaXMuYW5nbGU7aWYodGhpcy5kZWNheSE9PXVuZGVmaW5lZClkYXRhLm9iamVjdC5kZWNheT10aGlzLmRlY2F5O2lmKHRoaXMucGVudW1icmEhPT11bmRlZmluZWQpZGF0YS5vYmplY3QucGVudW1icmE9dGhpcy5wZW51bWJyYTtyZXR1cm4gZGF0YTt9fSk7Ly8gRmlsZTpzcmMvbGlnaHRzL0xpZ2h0U2hhZG93LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuTGlnaHRTaGFkb3c9ZnVuY3Rpb24oY2FtZXJhKXt0aGlzLmNhbWVyYT1jYW1lcmE7dGhpcy5iaWFzPTA7dGhpcy5yYWRpdXM9MTt0aGlzLm1hcFNpemU9bmV3IFRIUkVFLlZlY3RvcjIoNTEyLDUxMik7dGhpcy5tYXA9bnVsbDt0aGlzLm1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCgpO307T2JqZWN0LmFzc2lnbihUSFJFRS5MaWdodFNoYWRvdy5wcm90b3R5cGUse2NvcHk6ZnVuY3Rpb24oc291cmNlKXt0aGlzLmNhbWVyYT1zb3VyY2UuY2FtZXJhLmNsb25lKCk7dGhpcy5iaWFzPXNvdXJjZS5iaWFzO3RoaXMucmFkaXVzPXNvdXJjZS5yYWRpdXM7dGhpcy5tYXBTaXplLmNvcHkoc291cmNlLm1hcFNpemUpO3JldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO319KTsvLyBGaWxlOnNyYy9saWdodHMvQW1iaWVudExpZ2h0LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuQW1iaWVudExpZ2h0PWZ1bmN0aW9uKGNvbG9yLGludGVuc2l0eSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdBbWJpZW50TGlnaHQnO3RoaXMuY2FzdFNoYWRvdz11bmRlZmluZWQ7fTtUSFJFRS5BbWJpZW50TGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5BbWJpZW50TGlnaHR9KTsvLyBGaWxlOnNyYy9saWdodHMvRGlyZWN0aW9uYWxMaWdodC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqL1RIUkVFLkRpcmVjdGlvbmFsTGlnaHQ9ZnVuY3Rpb24oY29sb3IsaW50ZW5zaXR5KXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsY29sb3IsaW50ZW5zaXR5KTt0aGlzLnR5cGU9J0RpcmVjdGlvbmFsTGlnaHQnO3RoaXMucG9zaXRpb24uc2V0KDAsMSwwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRCgpO3RoaXMuc2hhZG93PW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0U2hhZG93KCk7fTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuRGlyZWN0aW9uYWxMaWdodCxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy50YXJnZXQ9c291cmNlLnRhcmdldC5jbG9uZSgpO3RoaXMuc2hhZG93PXNvdXJjZS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpczt9fSk7Ly8gRmlsZTpzcmMvbGlnaHRzL0RpcmVjdGlvbmFsTGlnaHRTaGFkb3cuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5EaXJlY3Rpb25hbExpZ2h0U2hhZG93PWZ1bmN0aW9uKGxpZ2h0KXtUSFJFRS5MaWdodFNoYWRvdy5jYWxsKHRoaXMsbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSgtNSw1LDUsLTUsMC41LDUwMCkpO307VEhSRUUuRGlyZWN0aW9uYWxMaWdodFNoYWRvdy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0U2hhZG93LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3d9KTsvLyBGaWxlOnNyYy9saWdodHMvSGVtaXNwaGVyZUxpZ2h0LmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuSGVtaXNwaGVyZUxpZ2h0PWZ1bmN0aW9uKHNreUNvbG9yLGdyb3VuZENvbG9yLGludGVuc2l0eSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLHNreUNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdIZW1pc3BoZXJlTGlnaHQnO3RoaXMuY2FzdFNoYWRvdz11bmRlZmluZWQ7dGhpcy5wb3NpdGlvbi5zZXQoMCwxLDApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy5ncm91bmRDb2xvcj1uZXcgVEhSRUUuQ29sb3IoZ3JvdW5kQ29sb3IpO307VEhSRUUuSGVtaXNwaGVyZUxpZ2h0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuSGVtaXNwaGVyZUxpZ2h0LGNvcHk6ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5MaWdodC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmdyb3VuZENvbG9yLmNvcHkoc291cmNlLmdyb3VuZENvbG9yKTtyZXR1cm4gdGhpczt9fSk7Ly8gRmlsZTpzcmMvbGlnaHRzL1BvaW50TGlnaHQuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Qb2ludExpZ2h0PWZ1bmN0aW9uKGNvbG9yLGludGVuc2l0eSxkaXN0YW5jZSxkZWNheSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdQb2ludExpZ2h0JztPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywncG93ZXInLHtnZXQ6ZnVuY3Rpb24oKXsvLyBpbnRlbnNpdHkgPSBwb3dlciBwZXIgc29saWQgYW5nbGUuXG4vLyByZWY6IGVxdWF0aW9uICgxNSkgZnJvbSBodHRwOi8vd3d3LmZyb3N0Yml0ZS5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTQvMTEvY291cnNlX25vdGVzX21vdmluZ19mcm9zdGJpdGVfdG9fcGJyLnBkZlxucmV0dXJuIHRoaXMuaW50ZW5zaXR5KjQqTWF0aC5QSTt9LHNldDpmdW5jdGlvbihwb3dlcil7Ly8gaW50ZW5zaXR5ID0gcG93ZXIgcGVyIHNvbGlkIGFuZ2xlLlxuLy8gcmVmOiBlcXVhdGlvbiAoMTUpIGZyb20gaHR0cDovL3d3dy5mcm9zdGJpdGUuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE0LzExL2NvdXJzZV9ub3Rlc19tb3ZpbmdfZnJvc3RiaXRlX3RvX3Bici5wZGZcbnRoaXMuaW50ZW5zaXR5PXBvd2VyLyg0Kk1hdGguUEkpO319KTt0aGlzLmRpc3RhbmNlPWRpc3RhbmNlIT09dW5kZWZpbmVkP2Rpc3RhbmNlOjA7dGhpcy5kZWNheT1kZWNheSE9PXVuZGVmaW5lZD9kZWNheToxOy8vIGZvciBwaHlzaWNhbGx5IGNvcnJlY3QgbGlnaHRzLCBzaG91bGQgYmUgMi5cbnRoaXMuc2hhZG93PW5ldyBUSFJFRS5MaWdodFNoYWRvdyhuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSwwLjUsNTAwKSk7fTtUSFJFRS5Qb2ludExpZ2h0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUG9pbnRMaWdodCxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5kaXN0YW5jZT1zb3VyY2UuZGlzdGFuY2U7dGhpcy5kZWNheT1zb3VyY2UuZGVjYXk7dGhpcy5zaGFkb3c9c291cmNlLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzO319KTsvLyBGaWxlOnNyYy9saWdodHMvU3BvdExpZ2h0LmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuU3BvdExpZ2h0PWZ1bmN0aW9uKGNvbG9yLGludGVuc2l0eSxkaXN0YW5jZSxhbmdsZSxwZW51bWJyYSxkZWNheSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGNvbG9yLGludGVuc2l0eSk7dGhpcy50eXBlPSdTcG90TGlnaHQnO3RoaXMucG9zaXRpb24uc2V0KDAsMSwwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRCgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdwb3dlcicse2dldDpmdW5jdGlvbigpey8vIGludGVuc2l0eSA9IHBvd2VyIHBlciBzb2xpZCBhbmdsZS5cbi8vIHJlZjogZXF1YXRpb24gKDE3KSBmcm9tIGh0dHA6Ly93d3cuZnJvc3RiaXRlLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxNC8xMS9jb3Vyc2Vfbm90ZXNfbW92aW5nX2Zyb3N0Yml0ZV90b19wYnIucGRmXG5yZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSTt9LHNldDpmdW5jdGlvbihwb3dlcil7Ly8gaW50ZW5zaXR5ID0gcG93ZXIgcGVyIHNvbGlkIGFuZ2xlLlxuLy8gcmVmOiBlcXVhdGlvbiAoMTcpIGZyb20gaHR0cDovL3d3dy5mcm9zdGJpdGUuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE0LzExL2NvdXJzZV9ub3Rlc19tb3ZpbmdfZnJvc3RiaXRlX3RvX3Bici5wZGZcbnRoaXMuaW50ZW5zaXR5PXBvd2VyL01hdGguUEk7fX0pO3RoaXMuZGlzdGFuY2U9ZGlzdGFuY2UhPT11bmRlZmluZWQ/ZGlzdGFuY2U6MDt0aGlzLmFuZ2xlPWFuZ2xlIT09dW5kZWZpbmVkP2FuZ2xlOk1hdGguUEkvMzt0aGlzLnBlbnVtYnJhPXBlbnVtYnJhIT09dW5kZWZpbmVkP3BlbnVtYnJhOjA7dGhpcy5kZWNheT1kZWNheSE9PXVuZGVmaW5lZD9kZWNheToxOy8vIGZvciBwaHlzaWNhbGx5IGNvcnJlY3QgbGlnaHRzLCBzaG91bGQgYmUgMi5cbnRoaXMuc2hhZG93PW5ldyBUSFJFRS5TcG90TGlnaHRTaGFkb3coKTt9O1RIUkVFLlNwb3RMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlNwb3RMaWdodCxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5kaXN0YW5jZT1zb3VyY2UuZGlzdGFuY2U7dGhpcy5hbmdsZT1zb3VyY2UuYW5nbGU7dGhpcy5wZW51bWJyYT1zb3VyY2UucGVudW1icmE7dGhpcy5kZWNheT1zb3VyY2UuZGVjYXk7dGhpcy50YXJnZXQ9c291cmNlLnRhcmdldC5jbG9uZSgpO3RoaXMuc2hhZG93PXNvdXJjZS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpczt9fSk7Ly8gRmlsZTpzcmMvbGlnaHRzL1Nwb3RMaWdodFNoYWRvdy5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLlNwb3RMaWdodFNoYWRvdz1mdW5jdGlvbigpe1RIUkVFLkxpZ2h0U2hhZG93LmNhbGwodGhpcyxuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNTAsMSwwLjUsNTAwKSk7fTtUSFJFRS5TcG90TGlnaHRTaGFkb3cucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodFNoYWRvdy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TcG90TGlnaHRTaGFkb3csdXBkYXRlOmZ1bmN0aW9uKGxpZ2h0KXt2YXIgZm92PVRIUkVFLk1hdGguUkFEMkRFRyoyKmxpZ2h0LmFuZ2xlO3ZhciBhc3BlY3Q9dGhpcy5tYXBTaXplLndpZHRoL3RoaXMubWFwU2l6ZS5oZWlnaHQ7dmFyIGZhcj1saWdodC5kaXN0YW5jZXx8NTAwO3ZhciBjYW1lcmE9dGhpcy5jYW1lcmE7aWYoZm92IT09Y2FtZXJhLmZvdnx8YXNwZWN0IT09Y2FtZXJhLmFzcGVjdHx8ZmFyIT09Y2FtZXJhLmZhcil7Y2FtZXJhLmZvdj1mb3Y7Y2FtZXJhLmFzcGVjdD1hc3BlY3Q7Y2FtZXJhLmZhcj1mYXI7Y2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt9fX0pOy8vIEZpbGU6c3JjL2xvYWRlcnMvQXVkaW9Mb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIFJlZWNlIEFhcm9uIExlY3JpdmFpbiAvIGh0dHA6Ly9yZWVjZW5vdGVzLmNvbS9cclxuICovVEhSRUUuQXVkaW9Mb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7fTtUSFJFRS5BdWRpb0xvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkF1ZGlvTG9hZGVyLGxvYWQ6ZnVuY3Rpb24odXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe3ZhciBsb2FkZXI9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2xvYWRlci5zZXRSZXNwb25zZVR5cGUoJ2FycmF5YnVmZmVyJyk7bG9hZGVyLmxvYWQodXJsLGZ1bmN0aW9uKGJ1ZmZlcil7dmFyIGNvbnRleHQ9VEhSRUUuQXVkaW9Db250ZXh0O2NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGJ1ZmZlcixmdW5jdGlvbihhdWRpb0J1ZmZlcil7b25Mb2FkKGF1ZGlvQnVmZmVyKTt9KTt9LG9uUHJvZ3Jlc3Msb25FcnJvcik7fX07Ly8gRmlsZTpzcmMvbG9hZGVycy9DYWNoZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLkNhY2hlPXtlbmFibGVkOmZhbHNlLGZpbGVzOnt9LGFkZDpmdW5jdGlvbihrZXksZmlsZSl7aWYodGhpcy5lbmFibGVkPT09ZmFsc2UpcmV0dXJuOy8vIGNvbnNvbGUubG9nKCAnVEhSRUUuQ2FjaGUnLCAnQWRkaW5nIGtleTonLCBrZXkgKTtcbnRoaXMuZmlsZXNba2V5XT1maWxlO30sZ2V0OmZ1bmN0aW9uKGtleSl7aWYodGhpcy5lbmFibGVkPT09ZmFsc2UpcmV0dXJuOy8vIGNvbnNvbGUubG9nKCAnVEhSRUUuQ2FjaGUnLCAnQ2hlY2tpbmcga2V5OicsIGtleSApO1xucmV0dXJuIHRoaXMuZmlsZXNba2V5XTt9LHJlbW92ZTpmdW5jdGlvbihrZXkpe2RlbGV0ZSB0aGlzLmZpbGVzW2tleV07fSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuZmlsZXM9e307fX07Ly8gRmlsZTpzcmMvbG9hZGVycy9Mb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5Mb2FkZXI9ZnVuY3Rpb24oKXt0aGlzLm9uTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZFByb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7fTt9O1RIUkVFLkxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkxvYWRlcixjcm9zc09yaWdpbjp1bmRlZmluZWQsZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24odXJsKXt2YXIgcGFydHM9dXJsLnNwbGl0KCcvJyk7aWYocGFydHMubGVuZ3RoPT09MSlyZXR1cm4nLi8nO3BhcnRzLnBvcCgpO3JldHVybiBwYXJ0cy5qb2luKCcvJykrJy8nO30saW5pdE1hdGVyaWFsczpmdW5jdGlvbihtYXRlcmlhbHMsdGV4dHVyZVBhdGgsY3Jvc3NPcmlnaW4pe3ZhciBhcnJheT1bXTtmb3IodmFyIGk9MDtpPG1hdGVyaWFscy5sZW5ndGg7KytpKXthcnJheVtpXT10aGlzLmNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsc1tpXSx0ZXh0dXJlUGF0aCxjcm9zc09yaWdpbik7fXJldHVybiBhcnJheTt9LGNyZWF0ZU1hdGVyaWFsOmZ1bmN0aW9uKCl7dmFyIGNvbG9yLHRleHR1cmVMb2FkZXIsbWF0ZXJpYWxMb2FkZXI7cmV0dXJuIGZ1bmN0aW9uKG0sdGV4dHVyZVBhdGgsY3Jvc3NPcmlnaW4pe2lmKGNvbG9yPT09dW5kZWZpbmVkKWNvbG9yPW5ldyBUSFJFRS5Db2xvcigpO2lmKHRleHR1cmVMb2FkZXI9PT11bmRlZmluZWQpdGV4dHVyZUxvYWRlcj1uZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO2lmKG1hdGVyaWFsTG9hZGVyPT09dW5kZWZpbmVkKW1hdGVyaWFsTG9hZGVyPW5ldyBUSFJFRS5NYXRlcmlhbExvYWRlcigpOy8vIGNvbnZlcnQgZnJvbSBvbGQgbWF0ZXJpYWwgZm9ybWF0XG52YXIgdGV4dHVyZXM9e307ZnVuY3Rpb24gbG9hZFRleHR1cmUocGF0aCxyZXBlYXQsb2Zmc2V0LHdyYXAsYW5pc290cm9weSl7dmFyIGZ1bGxQYXRoPXRleHR1cmVQYXRoK3BhdGg7dmFyIGxvYWRlcj1USFJFRS5Mb2FkZXIuSGFuZGxlcnMuZ2V0KGZ1bGxQYXRoKTt2YXIgdGV4dHVyZTtpZihsb2FkZXIhPT1udWxsKXt0ZXh0dXJlPWxvYWRlci5sb2FkKGZ1bGxQYXRoKTt9ZWxzZXt0ZXh0dXJlTG9hZGVyLnNldENyb3NzT3JpZ2luKGNyb3NzT3JpZ2luKTt0ZXh0dXJlPXRleHR1cmVMb2FkZXIubG9hZChmdWxsUGF0aCk7fWlmKHJlcGVhdCE9PXVuZGVmaW5lZCl7dGV4dHVyZS5yZXBlYXQuZnJvbUFycmF5KHJlcGVhdCk7aWYocmVwZWF0WzBdIT09MSl0ZXh0dXJlLndyYXBTPVRIUkVFLlJlcGVhdFdyYXBwaW5nO2lmKHJlcGVhdFsxXSE9PTEpdGV4dHVyZS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZzt9aWYob2Zmc2V0IT09dW5kZWZpbmVkKXt0ZXh0dXJlLm9mZnNldC5mcm9tQXJyYXkob2Zmc2V0KTt9aWYod3JhcCE9PXVuZGVmaW5lZCl7aWYod3JhcFswXT09PSdyZXBlYXQnKXRleHR1cmUud3JhcFM9VEhSRUUuUmVwZWF0V3JhcHBpbmc7aWYod3JhcFswXT09PSdtaXJyb3InKXRleHR1cmUud3JhcFM9VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZztpZih3cmFwWzFdPT09J3JlcGVhdCcpdGV4dHVyZS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZztpZih3cmFwWzFdPT09J21pcnJvcicpdGV4dHVyZS53cmFwVD1USFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nO31pZihhbmlzb3Ryb3B5IT09dW5kZWZpbmVkKXt0ZXh0dXJlLmFuaXNvdHJvcHk9YW5pc290cm9weTt9dmFyIHV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0ZXh0dXJlc1t1dWlkXT10ZXh0dXJlO3JldHVybiB1dWlkO30vL1xudmFyIGpzb249e3V1aWQ6VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKSx0eXBlOidNZXNoTGFtYmVydE1hdGVyaWFsJ307Zm9yKHZhciBuYW1lIGluIG0pe3ZhciB2YWx1ZT1tW25hbWVdO3N3aXRjaChuYW1lKXtjYXNlJ0RiZ0NvbG9yJzpjYXNlJ0RiZ0luZGV4JzpjYXNlJ29wdGljYWxEZW5zaXR5JzpjYXNlJ2lsbHVtaW5hdGlvbic6YnJlYWs7Y2FzZSdEYmdOYW1lJzpqc29uLm5hbWU9dmFsdWU7YnJlYWs7Y2FzZSdibGVuZGluZyc6anNvbi5ibGVuZGluZz1USFJFRVt2YWx1ZV07YnJlYWs7Y2FzZSdjb2xvckFtYmllbnQnOmNhc2UnbWFwQW1iaWVudCc6Y29uc29sZS53YXJuKCdUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6JyxuYW1lLCdpcyBubyBsb25nZXIgc3VwcG9ydGVkLicpO2JyZWFrO2Nhc2UnY29sb3JEaWZmdXNlJzpqc29uLmNvbG9yPWNvbG9yLmZyb21BcnJheSh2YWx1ZSkuZ2V0SGV4KCk7YnJlYWs7Y2FzZSdjb2xvclNwZWN1bGFyJzpqc29uLnNwZWN1bGFyPWNvbG9yLmZyb21BcnJheSh2YWx1ZSkuZ2V0SGV4KCk7YnJlYWs7Y2FzZSdjb2xvckVtaXNzaXZlJzpqc29uLmVtaXNzaXZlPWNvbG9yLmZyb21BcnJheSh2YWx1ZSkuZ2V0SGV4KCk7YnJlYWs7Y2FzZSdzcGVjdWxhckNvZWYnOmpzb24uc2hpbmluZXNzPXZhbHVlO2JyZWFrO2Nhc2Unc2hhZGluZyc6aWYodmFsdWUudG9Mb3dlckNhc2UoKT09PSdiYXNpYycpanNvbi50eXBlPSdNZXNoQmFzaWNNYXRlcmlhbCc7aWYodmFsdWUudG9Mb3dlckNhc2UoKT09PSdwaG9uZycpanNvbi50eXBlPSdNZXNoUGhvbmdNYXRlcmlhbCc7YnJlYWs7Y2FzZSdtYXBEaWZmdXNlJzpqc29uLm1hcD1sb2FkVGV4dHVyZSh2YWx1ZSxtLm1hcERpZmZ1c2VSZXBlYXQsbS5tYXBEaWZmdXNlT2Zmc2V0LG0ubWFwRGlmZnVzZVdyYXAsbS5tYXBEaWZmdXNlQW5pc290cm9weSk7YnJlYWs7Y2FzZSdtYXBEaWZmdXNlUmVwZWF0JzpjYXNlJ21hcERpZmZ1c2VPZmZzZXQnOmNhc2UnbWFwRGlmZnVzZVdyYXAnOmNhc2UnbWFwRGlmZnVzZUFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwTGlnaHQnOmpzb24ubGlnaHRNYXA9bG9hZFRleHR1cmUodmFsdWUsbS5tYXBMaWdodFJlcGVhdCxtLm1hcExpZ2h0T2Zmc2V0LG0ubWFwTGlnaHRXcmFwLG0ubWFwTGlnaHRBbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcExpZ2h0UmVwZWF0JzpjYXNlJ21hcExpZ2h0T2Zmc2V0JzpjYXNlJ21hcExpZ2h0V3JhcCc6Y2FzZSdtYXBMaWdodEFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwQU8nOmpzb24uYW9NYXA9bG9hZFRleHR1cmUodmFsdWUsbS5tYXBBT1JlcGVhdCxtLm1hcEFPT2Zmc2V0LG0ubWFwQU9XcmFwLG0ubWFwQU9Bbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcEFPUmVwZWF0JzpjYXNlJ21hcEFPT2Zmc2V0JzpjYXNlJ21hcEFPV3JhcCc6Y2FzZSdtYXBBT0FuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwQnVtcCc6anNvbi5idW1wTWFwPWxvYWRUZXh0dXJlKHZhbHVlLG0ubWFwQnVtcFJlcGVhdCxtLm1hcEJ1bXBPZmZzZXQsbS5tYXBCdW1wV3JhcCxtLm1hcEJ1bXBBbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcEJ1bXBTY2FsZSc6anNvbi5idW1wU2NhbGU9dmFsdWU7YnJlYWs7Y2FzZSdtYXBCdW1wUmVwZWF0JzpjYXNlJ21hcEJ1bXBPZmZzZXQnOmNhc2UnbWFwQnVtcFdyYXAnOmNhc2UnbWFwQnVtcEFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwTm9ybWFsJzpqc29uLm5vcm1hbE1hcD1sb2FkVGV4dHVyZSh2YWx1ZSxtLm1hcE5vcm1hbFJlcGVhdCxtLm1hcE5vcm1hbE9mZnNldCxtLm1hcE5vcm1hbFdyYXAsbS5tYXBOb3JtYWxBbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcE5vcm1hbEZhY3Rvcic6anNvbi5ub3JtYWxTY2FsZT1bdmFsdWUsdmFsdWVdO2JyZWFrO2Nhc2UnbWFwTm9ybWFsUmVwZWF0JzpjYXNlJ21hcE5vcm1hbE9mZnNldCc6Y2FzZSdtYXBOb3JtYWxXcmFwJzpjYXNlJ21hcE5vcm1hbEFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwU3BlY3VsYXInOmpzb24uc3BlY3VsYXJNYXA9bG9hZFRleHR1cmUodmFsdWUsbS5tYXBTcGVjdWxhclJlcGVhdCxtLm1hcFNwZWN1bGFyT2Zmc2V0LG0ubWFwU3BlY3VsYXJXcmFwLG0ubWFwU3BlY3VsYXJBbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcFNwZWN1bGFyUmVwZWF0JzpjYXNlJ21hcFNwZWN1bGFyT2Zmc2V0JzpjYXNlJ21hcFNwZWN1bGFyV3JhcCc6Y2FzZSdtYXBTcGVjdWxhckFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnbWFwQWxwaGEnOmpzb24uYWxwaGFNYXA9bG9hZFRleHR1cmUodmFsdWUsbS5tYXBBbHBoYVJlcGVhdCxtLm1hcEFscGhhT2Zmc2V0LG0ubWFwQWxwaGFXcmFwLG0ubWFwQWxwaGFBbmlzb3Ryb3B5KTticmVhaztjYXNlJ21hcEFscGhhUmVwZWF0JzpjYXNlJ21hcEFscGhhT2Zmc2V0JzpjYXNlJ21hcEFscGhhV3JhcCc6Y2FzZSdtYXBBbHBoYUFuaXNvdHJvcHknOmJyZWFrO2Nhc2UnZmxpcFNpZGVkJzpqc29uLnNpZGU9VEhSRUUuQmFja1NpZGU7YnJlYWs7Y2FzZSdkb3VibGVTaWRlZCc6anNvbi5zaWRlPVRIUkVFLkRvdWJsZVNpZGU7YnJlYWs7Y2FzZSd0cmFuc3BhcmVuY3knOmNvbnNvbGUud2FybignVEhSRUUuTG9hZGVyLmNyZWF0ZU1hdGVyaWFsOiB0cmFuc3BhcmVuY3kgaGFzIGJlZW4gcmVuYW1lZCB0byBvcGFjaXR5Jyk7anNvbi5vcGFjaXR5PXZhbHVlO2JyZWFrO2Nhc2UnZGVwdGhUZXN0JzpjYXNlJ2RlcHRoV3JpdGUnOmNhc2UnY29sb3JXcml0ZSc6Y2FzZSdvcGFjaXR5JzpjYXNlJ3JlZmxlY3Rpdml0eSc6Y2FzZSd0cmFuc3BhcmVudCc6Y2FzZSd2aXNpYmxlJzpjYXNlJ3dpcmVmcmFtZSc6anNvbltuYW1lXT12YWx1ZTticmVhaztjYXNlJ3ZlcnRleENvbG9ycyc6aWYodmFsdWU9PT10cnVlKWpzb24udmVydGV4Q29sb3JzPVRIUkVFLlZlcnRleENvbG9ycztpZih2YWx1ZT09PSdmYWNlJylqc29uLnZlcnRleENvbG9ycz1USFJFRS5GYWNlQ29sb3JzO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcignVEhSRUUuTG9hZGVyLmNyZWF0ZU1hdGVyaWFsOiBVbnN1cHBvcnRlZCcsbmFtZSx2YWx1ZSk7YnJlYWs7fX1pZihqc29uLnR5cGU9PT0nTWVzaEJhc2ljTWF0ZXJpYWwnKWRlbGV0ZSBqc29uLmVtaXNzaXZlO2lmKGpzb24udHlwZSE9PSdNZXNoUGhvbmdNYXRlcmlhbCcpZGVsZXRlIGpzb24uc3BlY3VsYXI7aWYoanNvbi5vcGFjaXR5PDEpanNvbi50cmFuc3BhcmVudD10cnVlO21hdGVyaWFsTG9hZGVyLnNldFRleHR1cmVzKHRleHR1cmVzKTtyZXR1cm4gbWF0ZXJpYWxMb2FkZXIucGFyc2UoanNvbik7fTt9KCl9O1RIUkVFLkxvYWRlci5IYW5kbGVycz17aGFuZGxlcnM6W10sYWRkOmZ1bmN0aW9uKHJlZ2V4LGxvYWRlcil7dGhpcy5oYW5kbGVycy5wdXNoKHJlZ2V4LGxvYWRlcik7fSxnZXQ6ZnVuY3Rpb24oZmlsZSl7dmFyIGhhbmRsZXJzPXRoaXMuaGFuZGxlcnM7Zm9yKHZhciBpPTAsbD1oYW5kbGVycy5sZW5ndGg7aTxsO2krPTIpe3ZhciByZWdleD1oYW5kbGVyc1tpXTt2YXIgbG9hZGVyPWhhbmRsZXJzW2krMV07aWYocmVnZXgudGVzdChmaWxlKSl7cmV0dXJuIGxvYWRlcjt9fXJldHVybiBudWxsO319Oy8vIEZpbGU6c3JjL2xvYWRlcnMvWEhSTG9hZGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuWEhSTG9hZGVyPWZ1bmN0aW9uKG1hbmFnZXIpe3RoaXMubWFuYWdlcj1tYW5hZ2VyIT09dW5kZWZpbmVkP21hbmFnZXI6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO307VEhSRUUuWEhSTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuWEhSTG9hZGVyLGxvYWQ6ZnVuY3Rpb24odXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe2lmKHRoaXMucGF0aCE9PXVuZGVmaW5lZCl1cmw9dGhpcy5wYXRoK3VybDt2YXIgc2NvcGU9dGhpczt2YXIgY2FjaGVkPVRIUkVFLkNhY2hlLmdldCh1cmwpO2lmKGNhY2hlZCE9PXVuZGVmaW5lZCl7aWYob25Mb2FkKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b25Mb2FkKGNhY2hlZCk7fSwwKTt9cmV0dXJuIGNhY2hlZDt9dmFyIHJlcXVlc3Q9bmV3IFhNTEh0dHBSZXF1ZXN0KCk7cmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluJyk7cmVxdWVzdC5vcGVuKCdHRVQnLHVybCx0cnVlKTtyZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGZ1bmN0aW9uKGV2ZW50KXt2YXIgcmVzcG9uc2U9ZXZlbnQudGFyZ2V0LnJlc3BvbnNlO1RIUkVFLkNhY2hlLmFkZCh1cmwscmVzcG9uc2UpO2lmKHRoaXMuc3RhdHVzPT09MjAwKXtpZihvbkxvYWQpb25Mb2FkKHJlc3BvbnNlKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9ZWxzZSBpZih0aGlzLnN0YXR1cz09PTApey8vIFNvbWUgYnJvd3NlcnMgcmV0dXJuIEhUVFAgU3RhdHVzIDAgd2hlbiB1c2luZyBub24taHR0cCBwcm90b2NvbFxuLy8gZS5nLiAnZmlsZTovLycgb3IgJ2RhdGE6Ly8nLiBIYW5kbGUgYXMgc3VjY2Vzcy5cbmNvbnNvbGUud2FybignVEhSRUUuWEhSTG9hZGVyOiBIVFRQIFN0YXR1cyAwIHJlY2VpdmVkLicpO2lmKG9uTG9hZClvbkxvYWQocmVzcG9uc2UpO3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO31lbHNle2lmKG9uRXJyb3Ipb25FcnJvcihldmVudCk7c2NvcGUubWFuYWdlci5pdGVtRXJyb3IodXJsKTt9fSxmYWxzZSk7aWYob25Qcm9ncmVzcyE9PXVuZGVmaW5lZCl7cmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsZnVuY3Rpb24oZXZlbnQpe29uUHJvZ3Jlc3MoZXZlbnQpO30sZmFsc2UpO31yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxmdW5jdGlvbihldmVudCl7aWYob25FcnJvcilvbkVycm9yKGV2ZW50KTtzY29wZS5tYW5hZ2VyLml0ZW1FcnJvcih1cmwpO30sZmFsc2UpO2lmKHRoaXMucmVzcG9uc2VUeXBlIT09dW5kZWZpbmVkKXJlcXVlc3QucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlO2lmKHRoaXMud2l0aENyZWRlbnRpYWxzIT09dW5kZWZpbmVkKXJlcXVlc3Qud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzO3JlcXVlc3Quc2VuZChudWxsKTtzY29wZS5tYW5hZ2VyLml0ZW1TdGFydCh1cmwpO3JldHVybiByZXF1ZXN0O30sc2V0UGF0aDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wYXRoPXZhbHVlO30sc2V0UmVzcG9uc2VUeXBlOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnJlc3BvbnNlVHlwZT12YWx1ZTt9LHNldFdpdGhDcmVkZW50aWFsczpmdW5jdGlvbih2YWx1ZSl7dGhpcy53aXRoQ3JlZGVudGlhbHM9dmFsdWU7fX07Ly8gRmlsZTpzcmMvbG9hZGVycy9Gb250TG9hZGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuRm9udExvYWRlcj1mdW5jdGlvbihtYW5hZ2VyKXt0aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt9O1RIUkVFLkZvbnRMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Gb250TG9hZGVyLGxvYWQ6ZnVuY3Rpb24odXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe3ZhciBzY29wZT10aGlzO3ZhciBsb2FkZXI9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2xvYWRlci5sb2FkKHVybCxmdW5jdGlvbih0ZXh0KXt2YXIganNvbjt0cnl7anNvbj1KU09OLnBhcnNlKHRleHQpO31jYXRjaChlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkZvbnRMb2FkZXI6IHR5cGVmYWNlLmpzIHN1cHBvcnQgaXMgYmVpbmcgZGVwcmVjYXRlZC4gVXNlIHR5cGVmYWNlLmpzb24gaW5zdGVhZC4nKTtqc29uPUpTT04ucGFyc2UodGV4dC5zdWJzdHJpbmcoNjUsdGV4dC5sZW5ndGgtMikpO312YXIgZm9udD1zY29wZS5wYXJzZShqc29uKTtpZihvbkxvYWQpb25Mb2FkKGZvbnQpO30sb25Qcm9ncmVzcyxvbkVycm9yKTt9LHBhcnNlOmZ1bmN0aW9uKGpzb24pe3JldHVybiBuZXcgVEhSRUUuRm9udChqc29uKTt9fTsvLyBGaWxlOnNyYy9sb2FkZXJzL0ltYWdlTG9hZGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuSW1hZ2VMb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7fTtUSFJFRS5JbWFnZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkltYWdlTG9hZGVyLGxvYWQ6ZnVuY3Rpb24odXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe2lmKHRoaXMucGF0aCE9PXVuZGVmaW5lZCl1cmw9dGhpcy5wYXRoK3VybDt2YXIgc2NvcGU9dGhpczt2YXIgY2FjaGVkPVRIUkVFLkNhY2hlLmdldCh1cmwpO2lmKGNhY2hlZCE9PXVuZGVmaW5lZCl7c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtpZihvbkxvYWQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtvbkxvYWQoY2FjaGVkKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LDApO31lbHNle3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO31yZXR1cm4gY2FjaGVkO312YXIgaW1hZ2U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7aW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsZnVuY3Rpb24oZXZlbnQpe1RIUkVFLkNhY2hlLmFkZCh1cmwsdGhpcyk7aWYob25Mb2FkKW9uTG9hZCh0aGlzKTtzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTt9LGZhbHNlKTtpZihvblByb2dyZXNzIT09dW5kZWZpbmVkKXtpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsZnVuY3Rpb24oZXZlbnQpe29uUHJvZ3Jlc3MoZXZlbnQpO30sZmFsc2UpO31pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsZnVuY3Rpb24oZXZlbnQpe2lmKG9uRXJyb3Ipb25FcnJvcihldmVudCk7c2NvcGUubWFuYWdlci5pdGVtRXJyb3IodXJsKTt9LGZhbHNlKTtpZih0aGlzLmNyb3NzT3JpZ2luIT09dW5kZWZpbmVkKWltYWdlLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW47c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtpbWFnZS5zcmM9dXJsO3JldHVybiBpbWFnZTt9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmNyb3NzT3JpZ2luPXZhbHVlO30sc2V0UGF0aDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wYXRoPXZhbHVlO319Oy8vIEZpbGU6c3JjL2xvYWRlcnMvSlNPTkxvYWRlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqL1RIUkVFLkpTT05Mb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7aWYodHlwZW9mIG1hbmFnZXI9PT0nYm9vbGVhbicpe2NvbnNvbGUud2FybignVEhSRUUuSlNPTkxvYWRlcjogc2hvd1N0YXR1cyBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGNvbnN0cnVjdG9yLicpO21hbmFnZXI9dW5kZWZpbmVkO310aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLndpdGhDcmVkZW50aWFscz1mYWxzZTt9O1RIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5KU09OTG9hZGVyLC8vIERlcHJlY2F0ZWRcbmdldCBzdGF0dXNEb21FbGVtZW50KCl7aWYodGhpcy5fc3RhdHVzRG9tRWxlbWVudD09PXVuZGVmaW5lZCl7dGhpcy5fc3RhdHVzRG9tRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTt9Y29uc29sZS53YXJuKCdUSFJFRS5KU09OTG9hZGVyOiAuc3RhdHVzRG9tRWxlbWVudCBoYXMgYmVlbiByZW1vdmVkLicpO3JldHVybiB0aGlzLl9zdGF0dXNEb21FbGVtZW50O30sbG9hZDpmdW5jdGlvbih1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHNjb3BlPXRoaXM7dmFyIHRleHR1cmVQYXRoPXRoaXMudGV4dHVyZVBhdGgmJnR5cGVvZiB0aGlzLnRleHR1cmVQYXRoPT09XCJzdHJpbmdcIj90aGlzLnRleHR1cmVQYXRoOlRIUkVFLkxvYWRlci5wcm90b3R5cGUuZXh0cmFjdFVybEJhc2UodXJsKTt2YXIgbG9hZGVyPW5ldyBUSFJFRS5YSFJMb2FkZXIodGhpcy5tYW5hZ2VyKTtsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKHRoaXMud2l0aENyZWRlbnRpYWxzKTtsb2FkZXIubG9hZCh1cmwsZnVuY3Rpb24odGV4dCl7dmFyIGpzb249SlNPTi5wYXJzZSh0ZXh0KTt2YXIgbWV0YWRhdGE9anNvbi5tZXRhZGF0YTtpZihtZXRhZGF0YSE9PXVuZGVmaW5lZCl7dmFyIHR5cGU9bWV0YWRhdGEudHlwZTtpZih0eXBlIT09dW5kZWZpbmVkKXtpZih0eXBlLnRvTG93ZXJDYXNlKCk9PT0nb2JqZWN0Jyl7Y29uc29sZS5lcnJvcignVEhSRUUuSlNPTkxvYWRlcjogJyt1cmwrJyBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuT2JqZWN0TG9hZGVyIGluc3RlYWQuJyk7cmV0dXJuO31pZih0eXBlLnRvTG93ZXJDYXNlKCk9PT0nc2NlbmUnKXtjb25zb2xlLmVycm9yKCdUSFJFRS5KU09OTG9hZGVyOiAnK3VybCsnIHNob3VsZCBiZSBsb2FkZWQgd2l0aCBUSFJFRS5TY2VuZUxvYWRlciBpbnN0ZWFkLicpO3JldHVybjt9fX12YXIgb2JqZWN0PXNjb3BlLnBhcnNlKGpzb24sdGV4dHVyZVBhdGgpO29uTG9hZChvYmplY3QuZ2VvbWV0cnksb2JqZWN0Lm1hdGVyaWFscyk7fSxvblByb2dyZXNzLG9uRXJyb3IpO30sc2V0VGV4dHVyZVBhdGg6ZnVuY3Rpb24odmFsdWUpe3RoaXMudGV4dHVyZVBhdGg9dmFsdWU7fSxwYXJzZTpmdW5jdGlvbihqc29uLHRleHR1cmVQYXRoKXt2YXIgZ2VvbWV0cnk9bmV3IFRIUkVFLkdlb21ldHJ5KCksc2NhbGU9anNvbi5zY2FsZSE9PXVuZGVmaW5lZD8xLjAvanNvbi5zY2FsZToxLjA7cGFyc2VNb2RlbChzY2FsZSk7cGFyc2VTa2luKCk7cGFyc2VNb3JwaGluZyhzY2FsZSk7cGFyc2VBbmltYXRpb25zKCk7Z2VvbWV0cnkuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Z2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7ZnVuY3Rpb24gcGFyc2VNb2RlbChzY2FsZSl7ZnVuY3Rpb24gaXNCaXRTZXQodmFsdWUscG9zaXRpb24pe3JldHVybiB2YWx1ZSYxPDxwb3NpdGlvbjt9dmFyIGksaixmaSxvZmZzZXQsekxlbmd0aCxjb2xvckluZGV4LG5vcm1hbEluZGV4LHV2SW5kZXgsbWF0ZXJpYWxJbmRleCx0eXBlLGlzUXVhZCxoYXNNYXRlcmlhbCxoYXNGYWNlVmVydGV4VXYsaGFzRmFjZU5vcm1hbCxoYXNGYWNlVmVydGV4Tm9ybWFsLGhhc0ZhY2VDb2xvcixoYXNGYWNlVmVydGV4Q29sb3IsdmVydGV4LGZhY2UsZmFjZUEsZmFjZUIsaGV4LG5vcm1hbCx1dkxheWVyLHV2LHUsdixmYWNlcz1qc29uLmZhY2VzLHZlcnRpY2VzPWpzb24udmVydGljZXMsbm9ybWFscz1qc29uLm5vcm1hbHMsY29sb3JzPWpzb24uY29sb3JzLG5VdkxheWVycz0wO2lmKGpzb24udXZzIT09dW5kZWZpbmVkKXsvLyBkaXNyZWdhcmQgZW1wdHkgYXJyYXlzXG5mb3IoaT0wO2k8anNvbi51dnMubGVuZ3RoO2krKyl7aWYoanNvbi51dnNbaV0ubGVuZ3RoKW5VdkxheWVycysrO31mb3IoaT0wO2k8blV2TGF5ZXJzO2krKyl7Z2VvbWV0cnkuZmFjZVZlcnRleFV2c1tpXT1bXTt9fW9mZnNldD0wO3pMZW5ndGg9dmVydGljZXMubGVuZ3RoO3doaWxlKG9mZnNldDx6TGVuZ3RoKXt2ZXJ0ZXg9bmV3IFRIUkVFLlZlY3RvcjMoKTt2ZXJ0ZXgueD12ZXJ0aWNlc1tvZmZzZXQrK10qc2NhbGU7dmVydGV4Lnk9dmVydGljZXNbb2Zmc2V0KytdKnNjYWxlO3ZlcnRleC56PXZlcnRpY2VzW29mZnNldCsrXSpzY2FsZTtnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKHZlcnRleCk7fW9mZnNldD0wO3pMZW5ndGg9ZmFjZXMubGVuZ3RoO3doaWxlKG9mZnNldDx6TGVuZ3RoKXt0eXBlPWZhY2VzW29mZnNldCsrXTtpc1F1YWQ9aXNCaXRTZXQodHlwZSwwKTtoYXNNYXRlcmlhbD1pc0JpdFNldCh0eXBlLDEpO2hhc0ZhY2VWZXJ0ZXhVdj1pc0JpdFNldCh0eXBlLDMpO2hhc0ZhY2VOb3JtYWw9aXNCaXRTZXQodHlwZSw0KTtoYXNGYWNlVmVydGV4Tm9ybWFsPWlzQml0U2V0KHR5cGUsNSk7aGFzRmFjZUNvbG9yPWlzQml0U2V0KHR5cGUsNik7aGFzRmFjZVZlcnRleENvbG9yPWlzQml0U2V0KHR5cGUsNyk7Ly8gY29uc29sZS5sb2coXCJ0eXBlXCIsIHR5cGUsIFwiYml0c1wiLCBpc1F1YWQsIGhhc01hdGVyaWFsLCBoYXNGYWNlVmVydGV4VXYsIGhhc0ZhY2VOb3JtYWwsIGhhc0ZhY2VWZXJ0ZXhOb3JtYWwsIGhhc0ZhY2VDb2xvciwgaGFzRmFjZVZlcnRleENvbG9yKTtcbmlmKGlzUXVhZCl7ZmFjZUE9bmV3IFRIUkVFLkZhY2UzKCk7ZmFjZUEuYT1mYWNlc1tvZmZzZXRdO2ZhY2VBLmI9ZmFjZXNbb2Zmc2V0KzFdO2ZhY2VBLmM9ZmFjZXNbb2Zmc2V0KzNdO2ZhY2VCPW5ldyBUSFJFRS5GYWNlMygpO2ZhY2VCLmE9ZmFjZXNbb2Zmc2V0KzFdO2ZhY2VCLmI9ZmFjZXNbb2Zmc2V0KzJdO2ZhY2VCLmM9ZmFjZXNbb2Zmc2V0KzNdO29mZnNldCs9NDtpZihoYXNNYXRlcmlhbCl7bWF0ZXJpYWxJbmRleD1mYWNlc1tvZmZzZXQrK107ZmFjZUEubWF0ZXJpYWxJbmRleD1tYXRlcmlhbEluZGV4O2ZhY2VCLm1hdGVyaWFsSW5kZXg9bWF0ZXJpYWxJbmRleDt9Ly8gdG8gZ2V0IGZhY2UgPD0+IHV2IGluZGV4IGNvcnJlc3BvbmRlbmNlXG5maT1nZW9tZXRyeS5mYWNlcy5sZW5ndGg7aWYoaGFzRmFjZVZlcnRleFV2KXtmb3IoaT0wO2k8blV2TGF5ZXJzO2krKyl7dXZMYXllcj1qc29uLnV2c1tpXTtnZW9tZXRyeS5mYWNlVmVydGV4VXZzW2ldW2ZpXT1bXTtnZW9tZXRyeS5mYWNlVmVydGV4VXZzW2ldW2ZpKzFdPVtdO2ZvcihqPTA7ajw0O2orKyl7dXZJbmRleD1mYWNlc1tvZmZzZXQrK107dT11dkxheWVyW3V2SW5kZXgqMl07dj11dkxheWVyW3V2SW5kZXgqMisxXTt1dj1uZXcgVEhSRUUuVmVjdG9yMih1LHYpO2lmKGohPT0yKWdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbaV1bZmldLnB1c2godXYpO2lmKGohPT0wKWdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbaV1bZmkrMV0ucHVzaCh1dik7fX19aWYoaGFzRmFjZU5vcm1hbCl7bm9ybWFsSW5kZXg9ZmFjZXNbb2Zmc2V0KytdKjM7ZmFjZUEubm9ybWFsLnNldChub3JtYWxzW25vcm1hbEluZGV4KytdLG5vcm1hbHNbbm9ybWFsSW5kZXgrK10sbm9ybWFsc1tub3JtYWxJbmRleF0pO2ZhY2VCLm5vcm1hbC5jb3B5KGZhY2VBLm5vcm1hbCk7fWlmKGhhc0ZhY2VWZXJ0ZXhOb3JtYWwpe2ZvcihpPTA7aTw0O2krKyl7bm9ybWFsSW5kZXg9ZmFjZXNbb2Zmc2V0KytdKjM7bm9ybWFsPW5ldyBUSFJFRS5WZWN0b3IzKG5vcm1hbHNbbm9ybWFsSW5kZXgrK10sbm9ybWFsc1tub3JtYWxJbmRleCsrXSxub3JtYWxzW25vcm1hbEluZGV4XSk7aWYoaSE9PTIpZmFjZUEudmVydGV4Tm9ybWFscy5wdXNoKG5vcm1hbCk7aWYoaSE9PTApZmFjZUIudmVydGV4Tm9ybWFscy5wdXNoKG5vcm1hbCk7fX1pZihoYXNGYWNlQ29sb3Ipe2NvbG9ySW5kZXg9ZmFjZXNbb2Zmc2V0KytdO2hleD1jb2xvcnNbY29sb3JJbmRleF07ZmFjZUEuY29sb3Iuc2V0SGV4KGhleCk7ZmFjZUIuY29sb3Iuc2V0SGV4KGhleCk7fWlmKGhhc0ZhY2VWZXJ0ZXhDb2xvcil7Zm9yKGk9MDtpPDQ7aSsrKXtjb2xvckluZGV4PWZhY2VzW29mZnNldCsrXTtoZXg9Y29sb3JzW2NvbG9ySW5kZXhdO2lmKGkhPT0yKWZhY2VBLnZlcnRleENvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihoZXgpKTtpZihpIT09MClmYWNlQi52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoaGV4KSk7fX1nZW9tZXRyeS5mYWNlcy5wdXNoKGZhY2VBKTtnZW9tZXRyeS5mYWNlcy5wdXNoKGZhY2VCKTt9ZWxzZXtmYWNlPW5ldyBUSFJFRS5GYWNlMygpO2ZhY2UuYT1mYWNlc1tvZmZzZXQrK107ZmFjZS5iPWZhY2VzW29mZnNldCsrXTtmYWNlLmM9ZmFjZXNbb2Zmc2V0KytdO2lmKGhhc01hdGVyaWFsKXttYXRlcmlhbEluZGV4PWZhY2VzW29mZnNldCsrXTtmYWNlLm1hdGVyaWFsSW5kZXg9bWF0ZXJpYWxJbmRleDt9Ly8gdG8gZ2V0IGZhY2UgPD0+IHV2IGluZGV4IGNvcnJlc3BvbmRlbmNlXG5maT1nZW9tZXRyeS5mYWNlcy5sZW5ndGg7aWYoaGFzRmFjZVZlcnRleFV2KXtmb3IoaT0wO2k8blV2TGF5ZXJzO2krKyl7dXZMYXllcj1qc29uLnV2c1tpXTtnZW9tZXRyeS5mYWNlVmVydGV4VXZzW2ldW2ZpXT1bXTtmb3Ioaj0wO2o8MztqKyspe3V2SW5kZXg9ZmFjZXNbb2Zmc2V0KytdO3U9dXZMYXllclt1dkluZGV4KjJdO3Y9dXZMYXllclt1dkluZGV4KjIrMV07dXY9bmV3IFRIUkVFLlZlY3RvcjIodSx2KTtnZW9tZXRyeS5mYWNlVmVydGV4VXZzW2ldW2ZpXS5wdXNoKHV2KTt9fX1pZihoYXNGYWNlTm9ybWFsKXtub3JtYWxJbmRleD1mYWNlc1tvZmZzZXQrK10qMztmYWNlLm5vcm1hbC5zZXQobm9ybWFsc1tub3JtYWxJbmRleCsrXSxub3JtYWxzW25vcm1hbEluZGV4KytdLG5vcm1hbHNbbm9ybWFsSW5kZXhdKTt9aWYoaGFzRmFjZVZlcnRleE5vcm1hbCl7Zm9yKGk9MDtpPDM7aSsrKXtub3JtYWxJbmRleD1mYWNlc1tvZmZzZXQrK10qMztub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMobm9ybWFsc1tub3JtYWxJbmRleCsrXSxub3JtYWxzW25vcm1hbEluZGV4KytdLG5vcm1hbHNbbm9ybWFsSW5kZXhdKTtmYWNlLnZlcnRleE5vcm1hbHMucHVzaChub3JtYWwpO319aWYoaGFzRmFjZUNvbG9yKXtjb2xvckluZGV4PWZhY2VzW29mZnNldCsrXTtmYWNlLmNvbG9yLnNldEhleChjb2xvcnNbY29sb3JJbmRleF0pO31pZihoYXNGYWNlVmVydGV4Q29sb3Ipe2ZvcihpPTA7aTwzO2krKyl7Y29sb3JJbmRleD1mYWNlc1tvZmZzZXQrK107ZmFjZS52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoY29sb3JzW2NvbG9ySW5kZXhdKSk7fX1nZW9tZXRyeS5mYWNlcy5wdXNoKGZhY2UpO319fWZ1bmN0aW9uIHBhcnNlU2tpbigpe3ZhciBpbmZsdWVuY2VzUGVyVmVydGV4PWpzb24uaW5mbHVlbmNlc1BlclZlcnRleCE9PXVuZGVmaW5lZD9qc29uLmluZmx1ZW5jZXNQZXJWZXJ0ZXg6MjtpZihqc29uLnNraW5XZWlnaHRzKXtmb3IodmFyIGk9MCxsPWpzb24uc2tpbldlaWdodHMubGVuZ3RoO2k8bDtpKz1pbmZsdWVuY2VzUGVyVmVydGV4KXt2YXIgeD1qc29uLnNraW5XZWlnaHRzW2ldO3ZhciB5PWluZmx1ZW5jZXNQZXJWZXJ0ZXg+MT9qc29uLnNraW5XZWlnaHRzW2krMV06MDt2YXIgej1pbmZsdWVuY2VzUGVyVmVydGV4PjI/anNvbi5za2luV2VpZ2h0c1tpKzJdOjA7dmFyIHc9aW5mbHVlbmNlc1BlclZlcnRleD4zP2pzb24uc2tpbldlaWdodHNbaSszXTowO2dlb21ldHJ5LnNraW5XZWlnaHRzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjQoeCx5LHosdykpO319aWYoanNvbi5za2luSW5kaWNlcyl7Zm9yKHZhciBpPTAsbD1qc29uLnNraW5JbmRpY2VzLmxlbmd0aDtpPGw7aSs9aW5mbHVlbmNlc1BlclZlcnRleCl7dmFyIGE9anNvbi5za2luSW5kaWNlc1tpXTt2YXIgYj1pbmZsdWVuY2VzUGVyVmVydGV4PjE/anNvbi5za2luSW5kaWNlc1tpKzFdOjA7dmFyIGM9aW5mbHVlbmNlc1BlclZlcnRleD4yP2pzb24uc2tpbkluZGljZXNbaSsyXTowO3ZhciBkPWluZmx1ZW5jZXNQZXJWZXJ0ZXg+Mz9qc29uLnNraW5JbmRpY2VzW2krM106MDtnZW9tZXRyeS5za2luSW5kaWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3I0KGEsYixjLGQpKTt9fWdlb21ldHJ5LmJvbmVzPWpzb24uYm9uZXM7aWYoZ2VvbWV0cnkuYm9uZXMmJmdlb21ldHJ5LmJvbmVzLmxlbmd0aD4wJiYoZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoIT09Z2VvbWV0cnkuc2tpbkluZGljZXMubGVuZ3RofHxnZW9tZXRyeS5za2luSW5kaWNlcy5sZW5ndGghPT1nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgpKXtjb25zb2xlLndhcm4oJ1doZW4gc2tpbm5pbmcsIG51bWJlciBvZiB2ZXJ0aWNlcyAoJytnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgrJyksIHNraW5JbmRpY2VzICgnK2dlb21ldHJ5LnNraW5JbmRpY2VzLmxlbmd0aCsnKSwgYW5kIHNraW5XZWlnaHRzICgnK2dlb21ldHJ5LnNraW5XZWlnaHRzLmxlbmd0aCsnKSBzaG91bGQgbWF0Y2guJyk7fX1mdW5jdGlvbiBwYXJzZU1vcnBoaW5nKHNjYWxlKXtpZihqc29uLm1vcnBoVGFyZ2V0cyE9PXVuZGVmaW5lZCl7Zm9yKHZhciBpPTAsbD1qc29uLm1vcnBoVGFyZ2V0cy5sZW5ndGg7aTxsO2krKyl7Z2VvbWV0cnkubW9ycGhUYXJnZXRzW2ldPXt9O2dlb21ldHJ5Lm1vcnBoVGFyZ2V0c1tpXS5uYW1lPWpzb24ubW9ycGhUYXJnZXRzW2ldLm5hbWU7Z2VvbWV0cnkubW9ycGhUYXJnZXRzW2ldLnZlcnRpY2VzPVtdO3ZhciBkc3RWZXJ0aWNlcz1nZW9tZXRyeS5tb3JwaFRhcmdldHNbaV0udmVydGljZXM7dmFyIHNyY1ZlcnRpY2VzPWpzb24ubW9ycGhUYXJnZXRzW2ldLnZlcnRpY2VzO2Zvcih2YXIgdj0wLHZsPXNyY1ZlcnRpY2VzLmxlbmd0aDt2PHZsO3YrPTMpe3ZhciB2ZXJ0ZXg9bmV3IFRIUkVFLlZlY3RvcjMoKTt2ZXJ0ZXgueD1zcmNWZXJ0aWNlc1t2XSpzY2FsZTt2ZXJ0ZXgueT1zcmNWZXJ0aWNlc1t2KzFdKnNjYWxlO3ZlcnRleC56PXNyY1ZlcnRpY2VzW3YrMl0qc2NhbGU7ZHN0VmVydGljZXMucHVzaCh2ZXJ0ZXgpO319fWlmKGpzb24ubW9ycGhDb2xvcnMhPT11bmRlZmluZWQmJmpzb24ubW9ycGhDb2xvcnMubGVuZ3RoPjApe2NvbnNvbGUud2FybignVEhSRUUuSlNPTkxvYWRlcjogXCJtb3JwaENvbG9yc1wiIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFVzaW5nIHRoZW0gYXMgZmFjZSBjb2xvcnMuJyk7dmFyIGZhY2VzPWdlb21ldHJ5LmZhY2VzO3ZhciBtb3JwaENvbG9ycz1qc29uLm1vcnBoQ29sb3JzWzBdLmNvbG9ycztmb3IodmFyIGk9MCxsPWZhY2VzLmxlbmd0aDtpPGw7aSsrKXtmYWNlc1tpXS5jb2xvci5mcm9tQXJyYXkobW9ycGhDb2xvcnMsaSozKTt9fX1mdW5jdGlvbiBwYXJzZUFuaW1hdGlvbnMoKXt2YXIgb3V0cHV0QW5pbWF0aW9ucz1bXTsvLyBwYXJzZSBvbGQgc3R5bGUgQm9uZS9IaWVyYXJjaHkgYW5pbWF0aW9uc1xudmFyIGFuaW1hdGlvbnM9W107aWYoanNvbi5hbmltYXRpb24hPT11bmRlZmluZWQpe2FuaW1hdGlvbnMucHVzaChqc29uLmFuaW1hdGlvbik7fWlmKGpzb24uYW5pbWF0aW9ucyE9PXVuZGVmaW5lZCl7aWYoanNvbi5hbmltYXRpb25zLmxlbmd0aCl7YW5pbWF0aW9ucz1hbmltYXRpb25zLmNvbmNhdChqc29uLmFuaW1hdGlvbnMpO31lbHNle2FuaW1hdGlvbnMucHVzaChqc29uLmFuaW1hdGlvbnMpO319Zm9yKHZhciBpPTA7aTxhbmltYXRpb25zLmxlbmd0aDtpKyspe3ZhciBjbGlwPVRIUkVFLkFuaW1hdGlvbkNsaXAucGFyc2VBbmltYXRpb24oYW5pbWF0aW9uc1tpXSxnZW9tZXRyeS5ib25lcyk7aWYoY2xpcClvdXRwdXRBbmltYXRpb25zLnB1c2goY2xpcCk7fS8vIHBhcnNlIGltcGxpY2l0IG1vcnBoIGFuaW1hdGlvbnNcbmlmKGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cyl7Ly8gVE9ETzogRmlndXJlIG91dCB3aGF0IGFuIGFwcHJvcHJhaXRlIEZQUyBpcyBmb3IgbW9ycGggdGFyZ2V0IGFuaW1hdGlvbnMgLS0gZGVmYXVsdGluZyB0byAxMCwgYnV0IHJlYWxseSBpdCBpcyBjb21wbGV0ZWx5IGFyYml0cmFyeS5cbnZhciBtb3JwaEFuaW1hdGlvbkNsaXBzPVRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXMoZ2VvbWV0cnkubW9ycGhUYXJnZXRzLDEwKTtvdXRwdXRBbmltYXRpb25zPW91dHB1dEFuaW1hdGlvbnMuY29uY2F0KG1vcnBoQW5pbWF0aW9uQ2xpcHMpO31pZihvdXRwdXRBbmltYXRpb25zLmxlbmd0aD4wKWdlb21ldHJ5LmFuaW1hdGlvbnM9b3V0cHV0QW5pbWF0aW9uczt9aWYoanNvbi5tYXRlcmlhbHM9PT11bmRlZmluZWR8fGpzb24ubWF0ZXJpYWxzLmxlbmd0aD09PTApe3JldHVybntnZW9tZXRyeTpnZW9tZXRyeX07fWVsc2V7dmFyIG1hdGVyaWFscz1USFJFRS5Mb2FkZXIucHJvdG90eXBlLmluaXRNYXRlcmlhbHMoanNvbi5tYXRlcmlhbHMsdGV4dHVyZVBhdGgsdGhpcy5jcm9zc09yaWdpbik7cmV0dXJue2dlb21ldHJ5Omdlb21ldHJ5LG1hdGVyaWFsczptYXRlcmlhbHN9O319fTsvLyBGaWxlOnNyYy9sb2FkZXJzL0xvYWRpbmdNYW5hZ2VyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuTG9hZGluZ01hbmFnZXI9ZnVuY3Rpb24ob25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHNjb3BlPXRoaXM7dmFyIGlzTG9hZGluZz1mYWxzZSxpdGVtc0xvYWRlZD0wLGl0ZW1zVG90YWw9MDt0aGlzLm9uU3RhcnQ9dW5kZWZpbmVkO3RoaXMub25Mb2FkPW9uTG9hZDt0aGlzLm9uUHJvZ3Jlc3M9b25Qcm9ncmVzczt0aGlzLm9uRXJyb3I9b25FcnJvcjt0aGlzLml0ZW1TdGFydD1mdW5jdGlvbih1cmwpe2l0ZW1zVG90YWwrKztpZihpc0xvYWRpbmc9PT1mYWxzZSl7aWYoc2NvcGUub25TdGFydCE9PXVuZGVmaW5lZCl7c2NvcGUub25TdGFydCh1cmwsaXRlbXNMb2FkZWQsaXRlbXNUb3RhbCk7fX1pc0xvYWRpbmc9dHJ1ZTt9O3RoaXMuaXRlbUVuZD1mdW5jdGlvbih1cmwpe2l0ZW1zTG9hZGVkKys7aWYoc2NvcGUub25Qcm9ncmVzcyE9PXVuZGVmaW5lZCl7c2NvcGUub25Qcm9ncmVzcyh1cmwsaXRlbXNMb2FkZWQsaXRlbXNUb3RhbCk7fWlmKGl0ZW1zTG9hZGVkPT09aXRlbXNUb3RhbCl7aXNMb2FkaW5nPWZhbHNlO2lmKHNjb3BlLm9uTG9hZCE9PXVuZGVmaW5lZCl7c2NvcGUub25Mb2FkKCk7fX19O3RoaXMuaXRlbUVycm9yPWZ1bmN0aW9uKHVybCl7aWYoc2NvcGUub25FcnJvciE9PXVuZGVmaW5lZCl7c2NvcGUub25FcnJvcih1cmwpO319O307VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyPW5ldyBUSFJFRS5Mb2FkaW5nTWFuYWdlcigpOy8vIEZpbGU6c3JjL2xvYWRlcnMvQnVmZmVyR2VvbWV0cnlMb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlcj1mdW5jdGlvbihtYW5hZ2VyKXt0aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt9O1RIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIsbG9hZDpmdW5jdGlvbih1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHNjb3BlPXRoaXM7dmFyIGxvYWRlcj1uZXcgVEhSRUUuWEhSTG9hZGVyKHNjb3BlLm1hbmFnZXIpO2xvYWRlci5sb2FkKHVybCxmdW5jdGlvbih0ZXh0KXtvbkxvYWQoc2NvcGUucGFyc2UoSlNPTi5wYXJzZSh0ZXh0KSkpO30sb25Qcm9ncmVzcyxvbkVycm9yKTt9LHBhcnNlOmZ1bmN0aW9uKGpzb24pe3ZhciBnZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTt2YXIgaW5kZXg9anNvbi5kYXRhLmluZGV4O3ZhciBUWVBFRF9BUlJBWVM9eydJbnQ4QXJyYXknOkludDhBcnJheSwnVWludDhBcnJheSc6VWludDhBcnJheSwnVWludDhDbGFtcGVkQXJyYXknOlVpbnQ4Q2xhbXBlZEFycmF5LCdJbnQxNkFycmF5JzpJbnQxNkFycmF5LCdVaW50MTZBcnJheSc6VWludDE2QXJyYXksJ0ludDMyQXJyYXknOkludDMyQXJyYXksJ1VpbnQzMkFycmF5JzpVaW50MzJBcnJheSwnRmxvYXQzMkFycmF5JzpGbG9hdDMyQXJyYXksJ0Zsb2F0NjRBcnJheSc6RmxvYXQ2NEFycmF5fTtpZihpbmRleCE9PXVuZGVmaW5lZCl7dmFyIHR5cGVkQXJyYXk9bmV3IFRZUEVEX0FSUkFZU1tpbmRleC50eXBlXShpbmRleC5hcnJheSk7Z2VvbWV0cnkuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSh0eXBlZEFycmF5LDEpKTt9dmFyIGF0dHJpYnV0ZXM9anNvbi5kYXRhLmF0dHJpYnV0ZXM7Zm9yKHZhciBrZXkgaW4gYXR0cmlidXRlcyl7dmFyIGF0dHJpYnV0ZT1hdHRyaWJ1dGVzW2tleV07dmFyIHR5cGVkQXJyYXk9bmV3IFRZUEVEX0FSUkFZU1thdHRyaWJ1dGUudHlwZV0oYXR0cmlidXRlLmFycmF5KTtnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoa2V5LG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodHlwZWRBcnJheSxhdHRyaWJ1dGUuaXRlbVNpemUsYXR0cmlidXRlLm5vcm1hbGl6ZWQpKTt9dmFyIGdyb3Vwcz1qc29uLmRhdGEuZ3JvdXBzfHxqc29uLmRhdGEuZHJhd2NhbGxzfHxqc29uLmRhdGEub2Zmc2V0cztpZihncm91cHMhPT11bmRlZmluZWQpe2Zvcih2YXIgaT0wLG49Z3JvdXBzLmxlbmd0aDtpIT09bjsrK2kpe3ZhciBncm91cD1ncm91cHNbaV07Z2VvbWV0cnkuYWRkR3JvdXAoZ3JvdXAuc3RhcnQsZ3JvdXAuY291bnQsZ3JvdXAubWF0ZXJpYWxJbmRleCk7fX12YXIgYm91bmRpbmdTcGhlcmU9anNvbi5kYXRhLmJvdW5kaW5nU3BoZXJlO2lmKGJvdW5kaW5nU3BoZXJlIT09dW5kZWZpbmVkKXt2YXIgY2VudGVyPW5ldyBUSFJFRS5WZWN0b3IzKCk7aWYoYm91bmRpbmdTcGhlcmUuY2VudGVyIT09dW5kZWZpbmVkKXtjZW50ZXIuZnJvbUFycmF5KGJvdW5kaW5nU3BoZXJlLmNlbnRlcik7fWdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUoY2VudGVyLGJvdW5kaW5nU3BoZXJlLnJhZGl1cyk7fXJldHVybiBnZW9tZXRyeTt9fTsvLyBGaWxlOnNyYy9sb2FkZXJzL01hdGVyaWFsTG9hZGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuTWF0ZXJpYWxMb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7dGhpcy50ZXh0dXJlcz17fTt9O1RIUkVFLk1hdGVyaWFsTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0ZXJpYWxMb2FkZXIsbG9hZDpmdW5jdGlvbih1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHNjb3BlPXRoaXM7dmFyIGxvYWRlcj1uZXcgVEhSRUUuWEhSTG9hZGVyKHNjb3BlLm1hbmFnZXIpO2xvYWRlci5sb2FkKHVybCxmdW5jdGlvbih0ZXh0KXtvbkxvYWQoc2NvcGUucGFyc2UoSlNPTi5wYXJzZSh0ZXh0KSkpO30sb25Qcm9ncmVzcyxvbkVycm9yKTt9LHNldFRleHR1cmVzOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRleHR1cmVzPXZhbHVlO30sZ2V0VGV4dHVyZTpmdW5jdGlvbihuYW1lKXt2YXIgdGV4dHVyZXM9dGhpcy50ZXh0dXJlcztpZih0ZXh0dXJlc1tuYW1lXT09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRlcmlhbExvYWRlcjogVW5kZWZpbmVkIHRleHR1cmUnLG5hbWUpO31yZXR1cm4gdGV4dHVyZXNbbmFtZV07fSxwYXJzZTpmdW5jdGlvbihqc29uKXt2YXIgbWF0ZXJpYWw9bmV3IFRIUkVFW2pzb24udHlwZV0oKTtpZihqc29uLnV1aWQhPT11bmRlZmluZWQpbWF0ZXJpYWwudXVpZD1qc29uLnV1aWQ7aWYoanNvbi5uYW1lIT09dW5kZWZpbmVkKW1hdGVyaWFsLm5hbWU9anNvbi5uYW1lO2lmKGpzb24uY29sb3IhPT11bmRlZmluZWQpbWF0ZXJpYWwuY29sb3Iuc2V0SGV4KGpzb24uY29sb3IpO2lmKGpzb24ucm91Z2huZXNzIT09dW5kZWZpbmVkKW1hdGVyaWFsLnJvdWdobmVzcz1qc29uLnJvdWdobmVzcztpZihqc29uLm1ldGFsbmVzcyE9PXVuZGVmaW5lZCltYXRlcmlhbC5tZXRhbG5lc3M9anNvbi5tZXRhbG5lc3M7aWYoanNvbi5lbWlzc2l2ZSE9PXVuZGVmaW5lZCltYXRlcmlhbC5lbWlzc2l2ZS5zZXRIZXgoanNvbi5lbWlzc2l2ZSk7aWYoanNvbi5zcGVjdWxhciE9PXVuZGVmaW5lZCltYXRlcmlhbC5zcGVjdWxhci5zZXRIZXgoanNvbi5zcGVjdWxhcik7aWYoanNvbi5zaGluaW5lc3MhPT11bmRlZmluZWQpbWF0ZXJpYWwuc2hpbmluZXNzPWpzb24uc2hpbmluZXNzO2lmKGpzb24udW5pZm9ybXMhPT11bmRlZmluZWQpbWF0ZXJpYWwudW5pZm9ybXM9anNvbi51bmlmb3JtcztpZihqc29uLnZlcnRleFNoYWRlciE9PXVuZGVmaW5lZCltYXRlcmlhbC52ZXJ0ZXhTaGFkZXI9anNvbi52ZXJ0ZXhTaGFkZXI7aWYoanNvbi5mcmFnbWVudFNoYWRlciE9PXVuZGVmaW5lZCltYXRlcmlhbC5mcmFnbWVudFNoYWRlcj1qc29uLmZyYWdtZW50U2hhZGVyO2lmKGpzb24udmVydGV4Q29sb3JzIT09dW5kZWZpbmVkKW1hdGVyaWFsLnZlcnRleENvbG9ycz1qc29uLnZlcnRleENvbG9ycztpZihqc29uLnNoYWRpbmchPT11bmRlZmluZWQpbWF0ZXJpYWwuc2hhZGluZz1qc29uLnNoYWRpbmc7aWYoanNvbi5ibGVuZGluZyE9PXVuZGVmaW5lZCltYXRlcmlhbC5ibGVuZGluZz1qc29uLmJsZW5kaW5nO2lmKGpzb24uc2lkZSE9PXVuZGVmaW5lZCltYXRlcmlhbC5zaWRlPWpzb24uc2lkZTtpZihqc29uLm9wYWNpdHkhPT11bmRlZmluZWQpbWF0ZXJpYWwub3BhY2l0eT1qc29uLm9wYWNpdHk7aWYoanNvbi50cmFuc3BhcmVudCE9PXVuZGVmaW5lZCltYXRlcmlhbC50cmFuc3BhcmVudD1qc29uLnRyYW5zcGFyZW50O2lmKGpzb24uYWxwaGFUZXN0IT09dW5kZWZpbmVkKW1hdGVyaWFsLmFscGhhVGVzdD1qc29uLmFscGhhVGVzdDtpZihqc29uLmRlcHRoVGVzdCE9PXVuZGVmaW5lZCltYXRlcmlhbC5kZXB0aFRlc3Q9anNvbi5kZXB0aFRlc3Q7aWYoanNvbi5kZXB0aFdyaXRlIT09dW5kZWZpbmVkKW1hdGVyaWFsLmRlcHRoV3JpdGU9anNvbi5kZXB0aFdyaXRlO2lmKGpzb24uY29sb3JXcml0ZSE9PXVuZGVmaW5lZCltYXRlcmlhbC5jb2xvcldyaXRlPWpzb24uY29sb3JXcml0ZTtpZihqc29uLndpcmVmcmFtZSE9PXVuZGVmaW5lZCltYXRlcmlhbC53aXJlZnJhbWU9anNvbi53aXJlZnJhbWU7aWYoanNvbi53aXJlZnJhbWVMaW5ld2lkdGghPT11bmRlZmluZWQpbWF0ZXJpYWwud2lyZWZyYW1lTGluZXdpZHRoPWpzb24ud2lyZWZyYW1lTGluZXdpZHRoOy8vIGZvciBQb2ludHNNYXRlcmlhbFxuaWYoanNvbi5zaXplIT09dW5kZWZpbmVkKW1hdGVyaWFsLnNpemU9anNvbi5zaXplO2lmKGpzb24uc2l6ZUF0dGVudWF0aW9uIT09dW5kZWZpbmVkKW1hdGVyaWFsLnNpemVBdHRlbnVhdGlvbj1qc29uLnNpemVBdHRlbnVhdGlvbjsvLyBtYXBzXG5pZihqc29uLm1hcCE9PXVuZGVmaW5lZCltYXRlcmlhbC5tYXA9dGhpcy5nZXRUZXh0dXJlKGpzb24ubWFwKTtpZihqc29uLmFscGhhTWFwIT09dW5kZWZpbmVkKXttYXRlcmlhbC5hbHBoYU1hcD10aGlzLmdldFRleHR1cmUoanNvbi5hbHBoYU1hcCk7bWF0ZXJpYWwudHJhbnNwYXJlbnQ9dHJ1ZTt9aWYoanNvbi5idW1wTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLmJ1bXBNYXA9dGhpcy5nZXRUZXh0dXJlKGpzb24uYnVtcE1hcCk7aWYoanNvbi5idW1wU2NhbGUhPT11bmRlZmluZWQpbWF0ZXJpYWwuYnVtcFNjYWxlPWpzb24uYnVtcFNjYWxlO2lmKGpzb24ubm9ybWFsTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLm5vcm1hbE1hcD10aGlzLmdldFRleHR1cmUoanNvbi5ub3JtYWxNYXApO2lmKGpzb24ubm9ybWFsU2NhbGUhPT11bmRlZmluZWQpe3ZhciBub3JtYWxTY2FsZT1qc29uLm5vcm1hbFNjYWxlO2lmKEFycmF5LmlzQXJyYXkobm9ybWFsU2NhbGUpPT09ZmFsc2Upey8vIEJsZW5kZXIgZXhwb3J0ZXIgdXNlZCB0byBleHBvcnQgYSBzY2FsYXIuIFNlZSAjNzQ1OVxubm9ybWFsU2NhbGU9W25vcm1hbFNjYWxlLG5vcm1hbFNjYWxlXTt9bWF0ZXJpYWwubm9ybWFsU2NhbGU9bmV3IFRIUkVFLlZlY3RvcjIoKS5mcm9tQXJyYXkobm9ybWFsU2NhbGUpO31pZihqc29uLmRpc3BsYWNlbWVudE1hcCE9PXVuZGVmaW5lZCltYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA9dGhpcy5nZXRUZXh0dXJlKGpzb24uZGlzcGxhY2VtZW50TWFwKTtpZihqc29uLmRpc3BsYWNlbWVudFNjYWxlIT09dW5kZWZpbmVkKW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlPWpzb24uZGlzcGxhY2VtZW50U2NhbGU7aWYoanNvbi5kaXNwbGFjZW1lbnRCaWFzIT09dW5kZWZpbmVkKW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM9anNvbi5kaXNwbGFjZW1lbnRCaWFzO2lmKGpzb24ucm91Z2huZXNzTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLnJvdWdobmVzc01hcD10aGlzLmdldFRleHR1cmUoanNvbi5yb3VnaG5lc3NNYXApO2lmKGpzb24ubWV0YWxuZXNzTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLm1ldGFsbmVzc01hcD10aGlzLmdldFRleHR1cmUoanNvbi5tZXRhbG5lc3NNYXApO2lmKGpzb24uZW1pc3NpdmVNYXAhPT11bmRlZmluZWQpbWF0ZXJpYWwuZW1pc3NpdmVNYXA9dGhpcy5nZXRUZXh0dXJlKGpzb24uZW1pc3NpdmVNYXApO2lmKGpzb24uZW1pc3NpdmVJbnRlbnNpdHkhPT11bmRlZmluZWQpbWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHk9anNvbi5lbWlzc2l2ZUludGVuc2l0eTtpZihqc29uLnNwZWN1bGFyTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLnNwZWN1bGFyTWFwPXRoaXMuZ2V0VGV4dHVyZShqc29uLnNwZWN1bGFyTWFwKTtpZihqc29uLmVudk1hcCE9PXVuZGVmaW5lZCl7bWF0ZXJpYWwuZW52TWFwPXRoaXMuZ2V0VGV4dHVyZShqc29uLmVudk1hcCk7bWF0ZXJpYWwuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt9aWYoanNvbi5yZWZsZWN0aXZpdHkpbWF0ZXJpYWwucmVmbGVjdGl2aXR5PWpzb24ucmVmbGVjdGl2aXR5O2lmKGpzb24ubGlnaHRNYXAhPT11bmRlZmluZWQpbWF0ZXJpYWwubGlnaHRNYXA9dGhpcy5nZXRUZXh0dXJlKGpzb24ubGlnaHRNYXApO2lmKGpzb24ubGlnaHRNYXBJbnRlbnNpdHkhPT11bmRlZmluZWQpbWF0ZXJpYWwubGlnaHRNYXBJbnRlbnNpdHk9anNvbi5saWdodE1hcEludGVuc2l0eTtpZihqc29uLmFvTWFwIT09dW5kZWZpbmVkKW1hdGVyaWFsLmFvTWFwPXRoaXMuZ2V0VGV4dHVyZShqc29uLmFvTWFwKTtpZihqc29uLmFvTWFwSW50ZW5zaXR5IT09dW5kZWZpbmVkKW1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5PWpzb24uYW9NYXBJbnRlbnNpdHk7Ly8gTXVsdGlNYXRlcmlhbFxuaWYoanNvbi5tYXRlcmlhbHMhPT11bmRlZmluZWQpe2Zvcih2YXIgaT0wLGw9anNvbi5tYXRlcmlhbHMubGVuZ3RoO2k8bDtpKyspe21hdGVyaWFsLm1hdGVyaWFscy5wdXNoKHRoaXMucGFyc2UoanNvbi5tYXRlcmlhbHNbaV0pKTt9fXJldHVybiBtYXRlcmlhbDt9fTsvLyBGaWxlOnNyYy9sb2FkZXJzL09iamVjdExvYWRlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLk9iamVjdExvYWRlcj1mdW5jdGlvbihtYW5hZ2VyKXt0aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLnRleHR1cmVQYXRoPScnO307VEhSRUUuT2JqZWN0TG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuT2JqZWN0TG9hZGVyLGxvYWQ6ZnVuY3Rpb24odXJsLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe2lmKHRoaXMudGV4dHVyZVBhdGg9PT0nJyl7dGhpcy50ZXh0dXJlUGF0aD11cmwuc3Vic3RyaW5nKDAsdXJsLmxhc3RJbmRleE9mKCcvJykrMSk7fXZhciBzY29wZT10aGlzO3ZhciBsb2FkZXI9bmV3IFRIUkVFLlhIUkxvYWRlcihzY29wZS5tYW5hZ2VyKTtsb2FkZXIubG9hZCh1cmwsZnVuY3Rpb24odGV4dCl7c2NvcGUucGFyc2UoSlNPTi5wYXJzZSh0ZXh0KSxvbkxvYWQpO30sb25Qcm9ncmVzcyxvbkVycm9yKTt9LHNldFRleHR1cmVQYXRoOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnRleHR1cmVQYXRoPXZhbHVlO30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24odmFsdWUpe3RoaXMuY3Jvc3NPcmlnaW49dmFsdWU7fSxwYXJzZTpmdW5jdGlvbihqc29uLG9uTG9hZCl7dmFyIGdlb21ldHJpZXM9dGhpcy5wYXJzZUdlb21ldHJpZXMoanNvbi5nZW9tZXRyaWVzKTt2YXIgaW1hZ2VzPXRoaXMucGFyc2VJbWFnZXMoanNvbi5pbWFnZXMsZnVuY3Rpb24oKXtpZihvbkxvYWQhPT11bmRlZmluZWQpb25Mb2FkKG9iamVjdCk7fSk7dmFyIHRleHR1cmVzPXRoaXMucGFyc2VUZXh0dXJlcyhqc29uLnRleHR1cmVzLGltYWdlcyk7dmFyIG1hdGVyaWFscz10aGlzLnBhcnNlTWF0ZXJpYWxzKGpzb24ubWF0ZXJpYWxzLHRleHR1cmVzKTt2YXIgb2JqZWN0PXRoaXMucGFyc2VPYmplY3QoanNvbi5vYmplY3QsZ2VvbWV0cmllcyxtYXRlcmlhbHMpO2lmKGpzb24uYW5pbWF0aW9ucyl7b2JqZWN0LmFuaW1hdGlvbnM9dGhpcy5wYXJzZUFuaW1hdGlvbnMoanNvbi5hbmltYXRpb25zKTt9aWYoanNvbi5pbWFnZXM9PT11bmRlZmluZWR8fGpzb24uaW1hZ2VzLmxlbmd0aD09PTApe2lmKG9uTG9hZCE9PXVuZGVmaW5lZClvbkxvYWQob2JqZWN0KTt9cmV0dXJuIG9iamVjdDt9LHBhcnNlR2VvbWV0cmllczpmdW5jdGlvbihqc29uKXt2YXIgZ2VvbWV0cmllcz17fTtpZihqc29uIT09dW5kZWZpbmVkKXt2YXIgZ2VvbWV0cnlMb2FkZXI9bmV3IFRIUkVFLkpTT05Mb2FkZXIoKTt2YXIgYnVmZmVyR2VvbWV0cnlMb2FkZXI9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyKCk7Zm9yKHZhciBpPTAsbD1qc29uLmxlbmd0aDtpPGw7aSsrKXt2YXIgZ2VvbWV0cnk7dmFyIGRhdGE9anNvbltpXTtzd2l0Y2goZGF0YS50eXBlKXtjYXNlJ1BsYW5lR2VvbWV0cnknOmNhc2UnUGxhbmVCdWZmZXJHZW9tZXRyeSc6Z2VvbWV0cnk9bmV3IFRIUkVFW2RhdGEudHlwZV0oZGF0YS53aWR0aCxkYXRhLmhlaWdodCxkYXRhLndpZHRoU2VnbWVudHMsZGF0YS5oZWlnaHRTZWdtZW50cyk7YnJlYWs7Y2FzZSdCb3hHZW9tZXRyeSc6Y2FzZSdCb3hCdWZmZXJHZW9tZXRyeSc6Y2FzZSdDdWJlR2VvbWV0cnknOi8vIGJhY2t3YXJkcyBjb21wYXRpYmxlXG5nZW9tZXRyeT1uZXcgVEhSRUVbZGF0YS50eXBlXShkYXRhLndpZHRoLGRhdGEuaGVpZ2h0LGRhdGEuZGVwdGgsZGF0YS53aWR0aFNlZ21lbnRzLGRhdGEuaGVpZ2h0U2VnbWVudHMsZGF0YS5kZXB0aFNlZ21lbnRzKTticmVhaztjYXNlJ0NpcmNsZUdlb21ldHJ5JzpjYXNlJ0NpcmNsZUJ1ZmZlckdlb21ldHJ5JzpnZW9tZXRyeT1uZXcgVEhSRUVbZGF0YS50eXBlXShkYXRhLnJhZGl1cyxkYXRhLnNlZ21lbnRzLGRhdGEudGhldGFTdGFydCxkYXRhLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlJ0N5bGluZGVyR2VvbWV0cnknOmNhc2UnQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeSc6Z2VvbWV0cnk9bmV3IFRIUkVFW2RhdGEudHlwZV0oZGF0YS5yYWRpdXNUb3AsZGF0YS5yYWRpdXNCb3R0b20sZGF0YS5oZWlnaHQsZGF0YS5yYWRpYWxTZWdtZW50cyxkYXRhLmhlaWdodFNlZ21lbnRzLGRhdGEub3BlbkVuZGVkLGRhdGEudGhldGFTdGFydCxkYXRhLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlJ0NvbmVHZW9tZXRyeSc6Y2FzZSdDb25lQnVmZmVyR2VvbWV0cnknOmdlb21ldHJ5PW5ldyBUSFJFRVtkYXRhLnR5cGVdKGRhdGEucmFkaXVzLGRhdGEuaGVpZ2h0LGRhdGEucmFkaWFsU2VnbWVudHMsZGF0YS5oZWlnaHRTZWdtZW50cyxkYXRhLm9wZW5FbmRlZCxkYXRhLnRoZXRhU3RhcnQsZGF0YS50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSdTcGhlcmVHZW9tZXRyeSc6Y2FzZSdTcGhlcmVCdWZmZXJHZW9tZXRyeSc6Z2VvbWV0cnk9bmV3IFRIUkVFW2RhdGEudHlwZV0oZGF0YS5yYWRpdXMsZGF0YS53aWR0aFNlZ21lbnRzLGRhdGEuaGVpZ2h0U2VnbWVudHMsZGF0YS5waGlTdGFydCxkYXRhLnBoaUxlbmd0aCxkYXRhLnRoZXRhU3RhcnQsZGF0YS50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSdEb2RlY2FoZWRyb25HZW9tZXRyeSc6Y2FzZSdJY29zYWhlZHJvbkdlb21ldHJ5JzpjYXNlJ09jdGFoZWRyb25HZW9tZXRyeSc6Y2FzZSdUZXRyYWhlZHJvbkdlb21ldHJ5JzpnZW9tZXRyeT1uZXcgVEhSRUVbZGF0YS50eXBlXShkYXRhLnJhZGl1cyxkYXRhLmRldGFpbCk7YnJlYWs7Y2FzZSdSaW5nR2VvbWV0cnknOmNhc2UnUmluZ0J1ZmZlckdlb21ldHJ5JzpnZW9tZXRyeT1uZXcgVEhSRUVbZGF0YS50eXBlXShkYXRhLmlubmVyUmFkaXVzLGRhdGEub3V0ZXJSYWRpdXMsZGF0YS50aGV0YVNlZ21lbnRzLGRhdGEucGhpU2VnbWVudHMsZGF0YS50aGV0YVN0YXJ0LGRhdGEudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UnVG9ydXNHZW9tZXRyeSc6Y2FzZSdUb3J1c0J1ZmZlckdlb21ldHJ5JzpnZW9tZXRyeT1uZXcgVEhSRUVbZGF0YS50eXBlXShkYXRhLnJhZGl1cyxkYXRhLnR1YmUsZGF0YS5yYWRpYWxTZWdtZW50cyxkYXRhLnR1YnVsYXJTZWdtZW50cyxkYXRhLmFyYyk7YnJlYWs7Y2FzZSdUb3J1c0tub3RHZW9tZXRyeSc6Y2FzZSdUb3J1c0tub3RCdWZmZXJHZW9tZXRyeSc6Z2VvbWV0cnk9bmV3IFRIUkVFW2RhdGEudHlwZV0oZGF0YS5yYWRpdXMsZGF0YS50dWJlLGRhdGEudHVidWxhclNlZ21lbnRzLGRhdGEucmFkaWFsU2VnbWVudHMsZGF0YS5wLGRhdGEucSk7YnJlYWs7Y2FzZSdMYXRoZUdlb21ldHJ5JzpjYXNlJ0xhdGhlQnVmZmVyR2VvbWV0cnknOmdlb21ldHJ5PW5ldyBUSFJFRVtkYXRhLnR5cGVdKGRhdGEucG9pbnRzLGRhdGEuc2VnbWVudHMsZGF0YS5waGlTdGFydCxkYXRhLnBoaUxlbmd0aCk7YnJlYWs7Y2FzZSdCdWZmZXJHZW9tZXRyeSc6Z2VvbWV0cnk9YnVmZmVyR2VvbWV0cnlMb2FkZXIucGFyc2UoZGF0YSk7YnJlYWs7Y2FzZSdHZW9tZXRyeSc6Z2VvbWV0cnk9Z2VvbWV0cnlMb2FkZXIucGFyc2UoZGF0YS5kYXRhLHRoaXMudGV4dHVyZVBhdGgpLmdlb21ldHJ5O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGUgXCInK2RhdGEudHlwZSsnXCInKTtjb250aW51ZTt9Z2VvbWV0cnkudXVpZD1kYXRhLnV1aWQ7aWYoZGF0YS5uYW1lIT09dW5kZWZpbmVkKWdlb21ldHJ5Lm5hbWU9ZGF0YS5uYW1lO2dlb21ldHJpZXNbZGF0YS51dWlkXT1nZW9tZXRyeTt9fXJldHVybiBnZW9tZXRyaWVzO30scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oanNvbix0ZXh0dXJlcyl7dmFyIG1hdGVyaWFscz17fTtpZihqc29uIT09dW5kZWZpbmVkKXt2YXIgbG9hZGVyPW5ldyBUSFJFRS5NYXRlcmlhbExvYWRlcigpO2xvYWRlci5zZXRUZXh0dXJlcyh0ZXh0dXJlcyk7Zm9yKHZhciBpPTAsbD1qc29uLmxlbmd0aDtpPGw7aSsrKXt2YXIgbWF0ZXJpYWw9bG9hZGVyLnBhcnNlKGpzb25baV0pO21hdGVyaWFsc1ttYXRlcmlhbC51dWlkXT1tYXRlcmlhbDt9fXJldHVybiBtYXRlcmlhbHM7fSxwYXJzZUFuaW1hdGlvbnM6ZnVuY3Rpb24oanNvbil7dmFyIGFuaW1hdGlvbnM9W107Zm9yKHZhciBpPTA7aTxqc29uLmxlbmd0aDtpKyspe3ZhciBjbGlwPVRIUkVFLkFuaW1hdGlvbkNsaXAucGFyc2UoanNvbltpXSk7YW5pbWF0aW9ucy5wdXNoKGNsaXApO31yZXR1cm4gYW5pbWF0aW9uczt9LHBhcnNlSW1hZ2VzOmZ1bmN0aW9uKGpzb24sb25Mb2FkKXt2YXIgc2NvcGU9dGhpczt2YXIgaW1hZ2VzPXt9O2Z1bmN0aW9uIGxvYWRJbWFnZSh1cmwpe3Njb3BlLm1hbmFnZXIuaXRlbVN0YXJ0KHVybCk7cmV0dXJuIGxvYWRlci5sb2FkKHVybCxmdW5jdGlvbigpe3Njb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO30pO31pZihqc29uIT09dW5kZWZpbmVkJiZqc29uLmxlbmd0aD4wKXt2YXIgbWFuYWdlcj1uZXcgVEhSRUUuTG9hZGluZ01hbmFnZXIob25Mb2FkKTt2YXIgbG9hZGVyPW5ldyBUSFJFRS5JbWFnZUxvYWRlcihtYW5hZ2VyKTtsb2FkZXIuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Zm9yKHZhciBpPTAsbD1qc29uLmxlbmd0aDtpPGw7aSsrKXt2YXIgaW1hZ2U9anNvbltpXTt2YXIgcGF0aD0vXihcXC9cXC8pfChbYS16XSs6KFxcL1xcLyk/KS9pLnRlc3QoaW1hZ2UudXJsKT9pbWFnZS51cmw6c2NvcGUudGV4dHVyZVBhdGgraW1hZ2UudXJsO2ltYWdlc1tpbWFnZS51dWlkXT1sb2FkSW1hZ2UocGF0aCk7fX1yZXR1cm4gaW1hZ2VzO30scGFyc2VUZXh0dXJlczpmdW5jdGlvbihqc29uLGltYWdlcyl7ZnVuY3Rpb24gcGFyc2VDb25zdGFudCh2YWx1ZSl7aWYodHlwZW9mIHZhbHVlPT09J251bWJlcicpcmV0dXJuIHZhbHVlO2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlVGV4dHVyZTogQ29uc3RhbnQgc2hvdWxkIGJlIGluIG51bWVyaWMgZm9ybS4nLHZhbHVlKTtyZXR1cm4gVEhSRUVbdmFsdWVdO312YXIgdGV4dHVyZXM9e307aWYoanNvbiE9PXVuZGVmaW5lZCl7Zm9yKHZhciBpPTAsbD1qc29uLmxlbmd0aDtpPGw7aSsrKXt2YXIgZGF0YT1qc29uW2ldO2lmKGRhdGEuaW1hZ2U9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyOiBObyBcImltYWdlXCIgc3BlY2lmaWVkIGZvcicsZGF0YS51dWlkKTt9aWYoaW1hZ2VzW2RhdGEuaW1hZ2VdPT09dW5kZWZpbmVkKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlJyxkYXRhLmltYWdlKTt9dmFyIHRleHR1cmU9bmV3IFRIUkVFLlRleHR1cmUoaW1hZ2VzW2RhdGEuaW1hZ2VdKTt0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7dGV4dHVyZS51dWlkPWRhdGEudXVpZDtpZihkYXRhLm5hbWUhPT11bmRlZmluZWQpdGV4dHVyZS5uYW1lPWRhdGEubmFtZTtpZihkYXRhLm1hcHBpbmchPT11bmRlZmluZWQpdGV4dHVyZS5tYXBwaW5nPXBhcnNlQ29uc3RhbnQoZGF0YS5tYXBwaW5nKTtpZihkYXRhLm9mZnNldCE9PXVuZGVmaW5lZCl0ZXh0dXJlLm9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMihkYXRhLm9mZnNldFswXSxkYXRhLm9mZnNldFsxXSk7aWYoZGF0YS5yZXBlYXQhPT11bmRlZmluZWQpdGV4dHVyZS5yZXBlYXQ9bmV3IFRIUkVFLlZlY3RvcjIoZGF0YS5yZXBlYXRbMF0sZGF0YS5yZXBlYXRbMV0pO2lmKGRhdGEubWluRmlsdGVyIT09dW5kZWZpbmVkKXRleHR1cmUubWluRmlsdGVyPXBhcnNlQ29uc3RhbnQoZGF0YS5taW5GaWx0ZXIpO2lmKGRhdGEubWFnRmlsdGVyIT09dW5kZWZpbmVkKXRleHR1cmUubWFnRmlsdGVyPXBhcnNlQ29uc3RhbnQoZGF0YS5tYWdGaWx0ZXIpO2lmKGRhdGEuYW5pc290cm9weSE9PXVuZGVmaW5lZCl0ZXh0dXJlLmFuaXNvdHJvcHk9ZGF0YS5hbmlzb3Ryb3B5O2lmKEFycmF5LmlzQXJyYXkoZGF0YS53cmFwKSl7dGV4dHVyZS53cmFwUz1wYXJzZUNvbnN0YW50KGRhdGEud3JhcFswXSk7dGV4dHVyZS53cmFwVD1wYXJzZUNvbnN0YW50KGRhdGEud3JhcFsxXSk7fXRleHR1cmVzW2RhdGEudXVpZF09dGV4dHVyZTt9fXJldHVybiB0ZXh0dXJlczt9LHBhcnNlT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIG1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbihkYXRhLGdlb21ldHJpZXMsbWF0ZXJpYWxzKXt2YXIgb2JqZWN0O2Z1bmN0aW9uIGdldEdlb21ldHJ5KG5hbWUpe2lmKGdlb21ldHJpZXNbbmFtZV09PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgZ2VvbWV0cnknLG5hbWUpO31yZXR1cm4gZ2VvbWV0cmllc1tuYW1lXTt9ZnVuY3Rpb24gZ2V0TWF0ZXJpYWwobmFtZSl7aWYobmFtZT09PXVuZGVmaW5lZClyZXR1cm4gdW5kZWZpbmVkO2lmKG1hdGVyaWFsc1tuYW1lXT09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbCcsbmFtZSk7fXJldHVybiBtYXRlcmlhbHNbbmFtZV07fXN3aXRjaChkYXRhLnR5cGUpe2Nhc2UnU2NlbmUnOm9iamVjdD1uZXcgVEhSRUUuU2NlbmUoKTticmVhaztjYXNlJ1BlcnNwZWN0aXZlQ2FtZXJhJzpvYmplY3Q9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGRhdGEuZm92LGRhdGEuYXNwZWN0LGRhdGEubmVhcixkYXRhLmZhcik7aWYoZGF0YS5mb2N1cyE9PXVuZGVmaW5lZClvYmplY3QuZm9jdXM9ZGF0YS5mb2N1cztpZihkYXRhLnpvb20hPT11bmRlZmluZWQpb2JqZWN0Lnpvb209ZGF0YS56b29tO2lmKGRhdGEuZmlsbUdhdWdlIT09dW5kZWZpbmVkKW9iamVjdC5maWxtR2F1Z2U9ZGF0YS5maWxtR2F1Z2U7aWYoZGF0YS5maWxtT2Zmc2V0IT09dW5kZWZpbmVkKW9iamVjdC5maWxtT2Zmc2V0PWRhdGEuZmlsbU9mZnNldDtpZihkYXRhLnZpZXchPT11bmRlZmluZWQpb2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSxkYXRhLnZpZXcpO2JyZWFrO2Nhc2UnT3J0aG9ncmFwaGljQ2FtZXJhJzpvYmplY3Q9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShkYXRhLmxlZnQsZGF0YS5yaWdodCxkYXRhLnRvcCxkYXRhLmJvdHRvbSxkYXRhLm5lYXIsZGF0YS5mYXIpO2JyZWFrO2Nhc2UnQW1iaWVudExpZ2h0JzpvYmplY3Q9bmV3IFRIUkVFLkFtYmllbnRMaWdodChkYXRhLmNvbG9yLGRhdGEuaW50ZW5zaXR5KTticmVhaztjYXNlJ0RpcmVjdGlvbmFsTGlnaHQnOm9iamVjdD1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodChkYXRhLmNvbG9yLGRhdGEuaW50ZW5zaXR5KTticmVhaztjYXNlJ1BvaW50TGlnaHQnOm9iamVjdD1uZXcgVEhSRUUuUG9pbnRMaWdodChkYXRhLmNvbG9yLGRhdGEuaW50ZW5zaXR5LGRhdGEuZGlzdGFuY2UsZGF0YS5kZWNheSk7YnJlYWs7Y2FzZSdTcG90TGlnaHQnOm9iamVjdD1uZXcgVEhSRUUuU3BvdExpZ2h0KGRhdGEuY29sb3IsZGF0YS5pbnRlbnNpdHksZGF0YS5kaXN0YW5jZSxkYXRhLmFuZ2xlLGRhdGEucGVudW1icmEsZGF0YS5kZWNheSk7YnJlYWs7Y2FzZSdIZW1pc3BoZXJlTGlnaHQnOm9iamVjdD1uZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KGRhdGEuY29sb3IsZGF0YS5ncm91bmRDb2xvcixkYXRhLmludGVuc2l0eSk7YnJlYWs7Y2FzZSdNZXNoJzp2YXIgZ2VvbWV0cnk9Z2V0R2VvbWV0cnkoZGF0YS5nZW9tZXRyeSk7dmFyIG1hdGVyaWFsPWdldE1hdGVyaWFsKGRhdGEubWF0ZXJpYWwpO2lmKGdlb21ldHJ5LmJvbmVzJiZnZW9tZXRyeS5ib25lcy5sZW5ndGg+MCl7b2JqZWN0PW5ldyBUSFJFRS5Ta2lubmVkTWVzaChnZW9tZXRyeSxtYXRlcmlhbCk7fWVsc2V7b2JqZWN0PW5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LG1hdGVyaWFsKTt9YnJlYWs7Y2FzZSdMT0QnOm9iamVjdD1uZXcgVEhSRUUuTE9EKCk7YnJlYWs7Y2FzZSdMaW5lJzpvYmplY3Q9bmV3IFRIUkVFLkxpbmUoZ2V0R2VvbWV0cnkoZGF0YS5nZW9tZXRyeSksZ2V0TWF0ZXJpYWwoZGF0YS5tYXRlcmlhbCksZGF0YS5tb2RlKTticmVhaztjYXNlJ1BvaW50Q2xvdWQnOmNhc2UnUG9pbnRzJzpvYmplY3Q9bmV3IFRIUkVFLlBvaW50cyhnZXRHZW9tZXRyeShkYXRhLmdlb21ldHJ5KSxnZXRNYXRlcmlhbChkYXRhLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSdTcHJpdGUnOm9iamVjdD1uZXcgVEhSRUUuU3ByaXRlKGdldE1hdGVyaWFsKGRhdGEubWF0ZXJpYWwpKTticmVhaztjYXNlJ0dyb3VwJzpvYmplY3Q9bmV3IFRIUkVFLkdyb3VwKCk7YnJlYWs7ZGVmYXVsdDpvYmplY3Q9bmV3IFRIUkVFLk9iamVjdDNEKCk7fW9iamVjdC51dWlkPWRhdGEudXVpZDtpZihkYXRhLm5hbWUhPT11bmRlZmluZWQpb2JqZWN0Lm5hbWU9ZGF0YS5uYW1lO2lmKGRhdGEubWF0cml4IT09dW5kZWZpbmVkKXttYXRyaXguZnJvbUFycmF5KGRhdGEubWF0cml4KTttYXRyaXguZGVjb21wb3NlKG9iamVjdC5wb3NpdGlvbixvYmplY3QucXVhdGVybmlvbixvYmplY3Quc2NhbGUpO31lbHNle2lmKGRhdGEucG9zaXRpb24hPT11bmRlZmluZWQpb2JqZWN0LnBvc2l0aW9uLmZyb21BcnJheShkYXRhLnBvc2l0aW9uKTtpZihkYXRhLnJvdGF0aW9uIT09dW5kZWZpbmVkKW9iamVjdC5yb3RhdGlvbi5mcm9tQXJyYXkoZGF0YS5yb3RhdGlvbik7aWYoZGF0YS5zY2FsZSE9PXVuZGVmaW5lZClvYmplY3Quc2NhbGUuZnJvbUFycmF5KGRhdGEuc2NhbGUpO31pZihkYXRhLmNhc3RTaGFkb3chPT11bmRlZmluZWQpb2JqZWN0LmNhc3RTaGFkb3c9ZGF0YS5jYXN0U2hhZG93O2lmKGRhdGEucmVjZWl2ZVNoYWRvdyE9PXVuZGVmaW5lZClvYmplY3QucmVjZWl2ZVNoYWRvdz1kYXRhLnJlY2VpdmVTaGFkb3c7aWYoZGF0YS52aXNpYmxlIT09dW5kZWZpbmVkKW9iamVjdC52aXNpYmxlPWRhdGEudmlzaWJsZTtpZihkYXRhLnVzZXJEYXRhIT09dW5kZWZpbmVkKW9iamVjdC51c2VyRGF0YT1kYXRhLnVzZXJEYXRhO2lmKGRhdGEuY2hpbGRyZW4hPT11bmRlZmluZWQpe2Zvcih2YXIgY2hpbGQgaW4gZGF0YS5jaGlsZHJlbil7b2JqZWN0LmFkZCh0aGlzLnBhcnNlT2JqZWN0KGRhdGEuY2hpbGRyZW5bY2hpbGRdLGdlb21ldHJpZXMsbWF0ZXJpYWxzKSk7fX1pZihkYXRhLnR5cGU9PT0nTE9EJyl7dmFyIGxldmVscz1kYXRhLmxldmVscztmb3IodmFyIGw9MDtsPGxldmVscy5sZW5ndGg7bCsrKXt2YXIgbGV2ZWw9bGV2ZWxzW2xdO3ZhciBjaGlsZD1vYmplY3QuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndXVpZCcsbGV2ZWwub2JqZWN0KTtpZihjaGlsZCE9PXVuZGVmaW5lZCl7b2JqZWN0LmFkZExldmVsKGNoaWxkLGxldmVsLmRpc3RhbmNlKTt9fX1yZXR1cm4gb2JqZWN0O307fSgpfTsvLyBGaWxlOnNyYy9sb2FkZXJzL1RleHR1cmVMb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5UZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKG1hbmFnZXIpe3RoaXMubWFuYWdlcj1tYW5hZ2VyIT09dW5kZWZpbmVkP21hbmFnZXI6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO307VEhSRUUuVGV4dHVyZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRleHR1cmVMb2FkZXIsbG9hZDpmdW5jdGlvbih1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHRleHR1cmU9bmV3IFRIUkVFLlRleHR1cmUoKTt2YXIgbG9hZGVyPW5ldyBUSFJFRS5JbWFnZUxvYWRlcih0aGlzLm1hbmFnZXIpO2xvYWRlci5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtsb2FkZXIuc2V0UGF0aCh0aGlzLnBhdGgpO2xvYWRlci5sb2FkKHVybCxmdW5jdGlvbihpbWFnZSl7dGV4dHVyZS5pbWFnZT1pbWFnZTt0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7aWYob25Mb2FkIT09dW5kZWZpbmVkKXtvbkxvYWQodGV4dHVyZSk7fX0sb25Qcm9ncmVzcyxvbkVycm9yKTtyZXR1cm4gdGV4dHVyZTt9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmNyb3NzT3JpZ2luPXZhbHVlO30sc2V0UGF0aDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wYXRoPXZhbHVlO319Oy8vIEZpbGU6c3JjL2xvYWRlcnMvQ3ViZVRleHR1cmVMb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5DdWJlVGV4dHVyZUxvYWRlcj1mdW5jdGlvbihtYW5hZ2VyKXt0aGlzLm1hbmFnZXI9bWFuYWdlciE9PXVuZGVmaW5lZD9tYW5hZ2VyOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt9O1RIUkVFLkN1YmVUZXh0dXJlTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIsbG9hZDpmdW5jdGlvbih1cmxzLG9uTG9hZCxvblByb2dyZXNzLG9uRXJyb3Ipe3ZhciB0ZXh0dXJlPW5ldyBUSFJFRS5DdWJlVGV4dHVyZSgpO3ZhciBsb2FkZXI9bmV3IFRIUkVFLkltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7bG9hZGVyLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2xvYWRlci5zZXRQYXRoKHRoaXMucGF0aCk7dmFyIGxvYWRlZD0wO2Z1bmN0aW9uIGxvYWRUZXh0dXJlKGkpe2xvYWRlci5sb2FkKHVybHNbaV0sZnVuY3Rpb24oaW1hZ2Upe3RleHR1cmUuaW1hZ2VzW2ldPWltYWdlO2xvYWRlZCsrO2lmKGxvYWRlZD09PTYpe3RleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTtpZihvbkxvYWQpb25Mb2FkKHRleHR1cmUpO319LHVuZGVmaW5lZCxvbkVycm9yKTt9Zm9yKHZhciBpPTA7aTx1cmxzLmxlbmd0aDsrK2kpe2xvYWRUZXh0dXJlKGkpO31yZXR1cm4gdGV4dHVyZTt9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmNyb3NzT3JpZ2luPXZhbHVlO30sc2V0UGF0aDpmdW5jdGlvbih2YWx1ZSl7dGhpcy5wYXRoPXZhbHVlO319Oy8vIEZpbGU6c3JjL2xvYWRlcnMvQmluYXJ5VGV4dHVyZUxvYWRlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgTmlrb3MgTS4gLyBodHRwczovL2dpdGh1Yi5jb20vZm9vMTIzL1xyXG4gKlxyXG4gKiBBYnN0cmFjdCBCYXNlIGNsYXNzIHRvIGxvYWQgZ2VuZXJpYyBiaW5hcnkgdGV4dHVyZXMgZm9ybWF0cyAocmdiZSwgaGRyLCAuLi4pXHJcbiAqL1RIUkVFLkRhdGFUZXh0dXJlTG9hZGVyPVRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7Ly8gb3ZlcnJpZGUgaW4gc3ViIGNsYXNzZXNcbnRoaXMuX3BhcnNlcj1udWxsO307VEhSRUUuQmluYXJ5VGV4dHVyZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXIsbG9hZDpmdW5jdGlvbih1cmwsb25Mb2FkLG9uUHJvZ3Jlc3Msb25FcnJvcil7dmFyIHNjb3BlPXRoaXM7dmFyIHRleHR1cmU9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKCk7dmFyIGxvYWRlcj1uZXcgVEhSRUUuWEhSTG9hZGVyKHRoaXMubWFuYWdlcik7bG9hZGVyLnNldFJlc3BvbnNlVHlwZSgnYXJyYXlidWZmZXInKTtsb2FkZXIubG9hZCh1cmwsZnVuY3Rpb24oYnVmZmVyKXt2YXIgdGV4RGF0YT1zY29wZS5fcGFyc2VyKGJ1ZmZlcik7aWYoIXRleERhdGEpcmV0dXJuO2lmKHVuZGVmaW5lZCE9PXRleERhdGEuaW1hZ2Upe3RleHR1cmUuaW1hZ2U9dGV4RGF0YS5pbWFnZTt9ZWxzZSBpZih1bmRlZmluZWQhPT10ZXhEYXRhLmRhdGEpe3RleHR1cmUuaW1hZ2Uud2lkdGg9dGV4RGF0YS53aWR0aDt0ZXh0dXJlLmltYWdlLmhlaWdodD10ZXhEYXRhLmhlaWdodDt0ZXh0dXJlLmltYWdlLmRhdGE9dGV4RGF0YS5kYXRhO310ZXh0dXJlLndyYXBTPXVuZGVmaW5lZCE9PXRleERhdGEud3JhcFM/dGV4RGF0YS53cmFwUzpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RleHR1cmUud3JhcFQ9dW5kZWZpbmVkIT09dGV4RGF0YS53cmFwVD90ZXhEYXRhLndyYXBUOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGV4dHVyZS5tYWdGaWx0ZXI9dW5kZWZpbmVkIT09dGV4RGF0YS5tYWdGaWx0ZXI/dGV4RGF0YS5tYWdGaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyO3RleHR1cmUubWluRmlsdGVyPXVuZGVmaW5lZCE9PXRleERhdGEubWluRmlsdGVyP3RleERhdGEubWluRmlsdGVyOlRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcjt0ZXh0dXJlLmFuaXNvdHJvcHk9dW5kZWZpbmVkIT09dGV4RGF0YS5hbmlzb3Ryb3B5P3RleERhdGEuYW5pc290cm9weToxO2lmKHVuZGVmaW5lZCE9PXRleERhdGEuZm9ybWF0KXt0ZXh0dXJlLmZvcm1hdD10ZXhEYXRhLmZvcm1hdDt9aWYodW5kZWZpbmVkIT09dGV4RGF0YS50eXBlKXt0ZXh0dXJlLnR5cGU9dGV4RGF0YS50eXBlO31pZih1bmRlZmluZWQhPT10ZXhEYXRhLm1pcG1hcHMpe3RleHR1cmUubWlwbWFwcz10ZXhEYXRhLm1pcG1hcHM7fWlmKDE9PT10ZXhEYXRhLm1pcG1hcENvdW50KXt0ZXh0dXJlLm1pbkZpbHRlcj1USFJFRS5MaW5lYXJGaWx0ZXI7fXRleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTtpZihvbkxvYWQpb25Mb2FkKHRleHR1cmUsdGV4RGF0YSk7fSxvblByb2dyZXNzLG9uRXJyb3IpO3JldHVybiB0ZXh0dXJlO319Oy8vIEZpbGU6c3JjL2xvYWRlcnMvQ29tcHJlc3NlZFRleHR1cmVMb2FkZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKlxyXG4gKiBBYnN0cmFjdCBCYXNlIGNsYXNzIHRvIGJsb2NrIGJhc2VkIHRleHR1cmVzIGxvYWRlciAoZGRzLCBwdnIsIC4uLilcclxuICovVEhSRUUuQ29tcHJlc3NlZFRleHR1cmVMb2FkZXI9ZnVuY3Rpb24obWFuYWdlcil7dGhpcy5tYW5hZ2VyPW1hbmFnZXIhPT11bmRlZmluZWQ/bWFuYWdlcjpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7Ly8gb3ZlcnJpZGUgaW4gc3ViIGNsYXNzZXNcbnRoaXMuX3BhcnNlcj1udWxsO307VEhSRUUuQ29tcHJlc3NlZFRleHR1cmVMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Db21wcmVzc2VkVGV4dHVyZUxvYWRlcixsb2FkOmZ1bmN0aW9uKHVybCxvbkxvYWQsb25Qcm9ncmVzcyxvbkVycm9yKXt2YXIgc2NvcGU9dGhpczt2YXIgaW1hZ2VzPVtdO3ZhciB0ZXh0dXJlPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZSgpO3RleHR1cmUuaW1hZ2U9aW1hZ2VzO3ZhciBsb2FkZXI9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2xvYWRlci5zZXRQYXRoKHRoaXMucGF0aCk7bG9hZGVyLnNldFJlc3BvbnNlVHlwZSgnYXJyYXlidWZmZXInKTtmdW5jdGlvbiBsb2FkVGV4dHVyZShpKXtsb2FkZXIubG9hZCh1cmxbaV0sZnVuY3Rpb24oYnVmZmVyKXt2YXIgdGV4RGF0YXM9c2NvcGUuX3BhcnNlcihidWZmZXIsdHJ1ZSk7aW1hZ2VzW2ldPXt3aWR0aDp0ZXhEYXRhcy53aWR0aCxoZWlnaHQ6dGV4RGF0YXMuaGVpZ2h0LGZvcm1hdDp0ZXhEYXRhcy5mb3JtYXQsbWlwbWFwczp0ZXhEYXRhcy5taXBtYXBzfTtsb2FkZWQrPTE7aWYobG9hZGVkPT09Nil7aWYodGV4RGF0YXMubWlwbWFwQ291bnQ9PT0xKXRleHR1cmUubWluRmlsdGVyPVRIUkVFLkxpbmVhckZpbHRlcjt0ZXh0dXJlLmZvcm1hdD10ZXhEYXRhcy5mb3JtYXQ7dGV4dHVyZS5uZWVkc1VwZGF0ZT10cnVlO2lmKG9uTG9hZClvbkxvYWQodGV4dHVyZSk7fX0sb25Qcm9ncmVzcyxvbkVycm9yKTt9aWYoQXJyYXkuaXNBcnJheSh1cmwpKXt2YXIgbG9hZGVkPTA7Zm9yKHZhciBpPTAsaWw9dXJsLmxlbmd0aDtpPGlsOysraSl7bG9hZFRleHR1cmUoaSk7fX1lbHNley8vIGNvbXByZXNzZWQgY3ViZW1hcCB0ZXh0dXJlIHN0b3JlZCBpbiBhIHNpbmdsZSBERFMgZmlsZVxubG9hZGVyLmxvYWQodXJsLGZ1bmN0aW9uKGJ1ZmZlcil7dmFyIHRleERhdGFzPXNjb3BlLl9wYXJzZXIoYnVmZmVyLHRydWUpO2lmKHRleERhdGFzLmlzQ3ViZW1hcCl7dmFyIGZhY2VzPXRleERhdGFzLm1pcG1hcHMubGVuZ3RoL3RleERhdGFzLm1pcG1hcENvdW50O2Zvcih2YXIgZj0wO2Y8ZmFjZXM7ZisrKXtpbWFnZXNbZl09e21pcG1hcHM6W119O2Zvcih2YXIgaT0wO2k8dGV4RGF0YXMubWlwbWFwQ291bnQ7aSsrKXtpbWFnZXNbZl0ubWlwbWFwcy5wdXNoKHRleERhdGFzLm1pcG1hcHNbZip0ZXhEYXRhcy5taXBtYXBDb3VudCtpXSk7aW1hZ2VzW2ZdLmZvcm1hdD10ZXhEYXRhcy5mb3JtYXQ7aW1hZ2VzW2ZdLndpZHRoPXRleERhdGFzLndpZHRoO2ltYWdlc1tmXS5oZWlnaHQ9dGV4RGF0YXMuaGVpZ2h0O319fWVsc2V7dGV4dHVyZS5pbWFnZS53aWR0aD10ZXhEYXRhcy53aWR0aDt0ZXh0dXJlLmltYWdlLmhlaWdodD10ZXhEYXRhcy5oZWlnaHQ7dGV4dHVyZS5taXBtYXBzPXRleERhdGFzLm1pcG1hcHM7fWlmKHRleERhdGFzLm1pcG1hcENvdW50PT09MSl7dGV4dHVyZS5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyO310ZXh0dXJlLmZvcm1hdD10ZXhEYXRhcy5mb3JtYXQ7dGV4dHVyZS5uZWVkc1VwZGF0ZT10cnVlO2lmKG9uTG9hZClvbkxvYWQodGV4dHVyZSk7fSxvblByb2dyZXNzLG9uRXJyb3IpO31yZXR1cm4gdGV4dHVyZTt9LHNldFBhdGg6ZnVuY3Rpb24odmFsdWUpe3RoaXMucGF0aD12YWx1ZTt9fTsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5NYXRlcmlhbD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOlRIUkVFLk1hdGVyaWFsSWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPScnO3RoaXMudHlwZT0nTWF0ZXJpYWwnO3RoaXMuZm9nPXRydWU7dGhpcy5saWdodHM9dHJ1ZTt0aGlzLmJsZW5kaW5nPVRIUkVFLk5vcm1hbEJsZW5kaW5nO3RoaXMuc2lkZT1USFJFRS5Gcm9udFNpZGU7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7Ly8gVEhSRUUuRmxhdFNoYWRpbmcsIFRIUkVFLlNtb290aFNoYWRpbmdcbnRoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzOy8vIFRIUkVFLk5vQ29sb3JzLCBUSFJFRS5WZXJ0ZXhDb2xvcnMsIFRIUkVFLkZhY2VDb2xvcnNcbnRoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9ZmFsc2U7dGhpcy5ibGVuZFNyYz1USFJFRS5TcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRHN0PVRIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I7dGhpcy5ibGVuZEVxdWF0aW9uPVRIUkVFLkFkZEVxdWF0aW9uO3RoaXMuYmxlbmRTcmNBbHBoYT1udWxsO3RoaXMuYmxlbmREc3RBbHBoYT1udWxsO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPW51bGw7dGhpcy5kZXB0aEZ1bmM9VEhSRUUuTGVzc0VxdWFsRGVwdGg7dGhpcy5kZXB0aFRlc3Q9dHJ1ZTt0aGlzLmRlcHRoV3JpdGU9dHJ1ZTt0aGlzLmNsaXBwaW5nUGxhbmVzPW51bGw7dGhpcy5jbGlwU2hhZG93cz1mYWxzZTt0aGlzLmNvbG9yV3JpdGU9dHJ1ZTt0aGlzLnByZWNpc2lvbj1udWxsOy8vIG92ZXJyaWRlIHRoZSByZW5kZXJlcidzIGRlZmF1bHQgcHJlY2lzaW9uIGZvciB0aGlzIG1hdGVyaWFsXG50aGlzLnBvbHlnb25PZmZzZXQ9ZmFsc2U7dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9MDt0aGlzLmFscGhhVGVzdD0wO3RoaXMucHJlbXVsdGlwbGllZEFscGhhPWZhbHNlO3RoaXMub3ZlcmRyYXc9MDsvLyBPdmVyZHJhd24gcGl4ZWxzICh0eXBpY2FsbHkgYmV0d2VlbiAwIGFuZCAxKSBmb3IgZml4aW5nIGFudGlhbGlhc2luZyBnYXBzIGluIENhbnZhc1JlbmRlcmVyXG50aGlzLnZpc2libGU9dHJ1ZTt0aGlzLl9uZWVkc1VwZGF0ZT10cnVlO307VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRlcmlhbCxnZXQgbmVlZHNVcGRhdGUoKXtyZXR1cm4gdGhpcy5fbmVlZHNVcGRhdGU7fSxzZXQgbmVlZHNVcGRhdGUodmFsdWUpe2lmKHZhbHVlPT09dHJ1ZSl0aGlzLnVwZGF0ZSgpO3RoaXMuX25lZWRzVXBkYXRlPXZhbHVlO30sc2V0VmFsdWVzOmZ1bmN0aW9uKHZhbHVlcyl7aWYodmFsdWVzPT09dW5kZWZpbmVkKXJldHVybjtmb3IodmFyIGtleSBpbiB2YWx1ZXMpe3ZhciBuZXdWYWx1ZT12YWx1ZXNba2V5XTtpZihuZXdWYWx1ZT09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6ICdcIitrZXkrXCInIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuXCIpO2NvbnRpbnVlO312YXIgY3VycmVudFZhbHVlPXRoaXNba2V5XTtpZihjdXJyZW50VmFsdWU9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogJ1wiK2tleStcIicgaXMgbm90IGEgcHJvcGVydHkgb2YgdGhpcyBtYXRlcmlhbC5cIik7Y29udGludWU7fWlmKGN1cnJlbnRWYWx1ZSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yKXtjdXJyZW50VmFsdWUuc2V0KG5ld1ZhbHVlKTt9ZWxzZSBpZihjdXJyZW50VmFsdWUgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzJiZuZXdWYWx1ZSBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjMpe2N1cnJlbnRWYWx1ZS5jb3B5KG5ld1ZhbHVlKTt9ZWxzZSBpZihrZXk9PT0nb3ZlcmRyYXcnKXsvLyBlbnN1cmUgb3ZlcmRyYXcgaXMgYmFja3dhcmRzLWNvbXBhdGlibGUgd2l0aCBsZWdhY3kgYm9vbGVhbiB0eXBlXG50aGlzW2tleV09TnVtYmVyKG5ld1ZhbHVlKTt9ZWxzZXt0aGlzW2tleV09bmV3VmFsdWU7fX19LHRvSlNPTjpmdW5jdGlvbihtZXRhKXt2YXIgaXNSb290PW1ldGE9PT11bmRlZmluZWQ7aWYoaXNSb290KXttZXRhPXt0ZXh0dXJlczp7fSxpbWFnZXM6e319O312YXIgZGF0YT17bWV0YWRhdGE6e3ZlcnNpb246NC40LHR5cGU6J01hdGVyaWFsJyxnZW5lcmF0b3I6J01hdGVyaWFsLnRvSlNPTid9fTsvLyBzdGFuZGFyZCBNYXRlcmlhbCBzZXJpYWxpemF0aW9uXG5kYXRhLnV1aWQ9dGhpcy51dWlkO2RhdGEudHlwZT10aGlzLnR5cGU7aWYodGhpcy5uYW1lIT09JycpZGF0YS5uYW1lPXRoaXMubmFtZTtpZih0aGlzLmNvbG9yIGluc3RhbmNlb2YgVEhSRUUuQ29sb3IpZGF0YS5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpO2lmKHRoaXMucm91Z2huZXNzIT09MC41KWRhdGEucm91Z2huZXNzPXRoaXMucm91Z2huZXNzO2lmKHRoaXMubWV0YWxuZXNzIT09MC41KWRhdGEubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzO2lmKHRoaXMuZW1pc3NpdmUgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcilkYXRhLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCk7aWYodGhpcy5zcGVjdWxhciBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yKWRhdGEuc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKTtpZih0aGlzLnNoaW5pbmVzcyE9PXVuZGVmaW5lZClkYXRhLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcztpZih0aGlzLm1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpZGF0YS5tYXA9dGhpcy5tYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5hbHBoYU1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpZGF0YS5hbHBoYU1hcD10aGlzLmFscGhhTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMubGlnaHRNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlKWRhdGEubGlnaHRNYXA9dGhpcy5saWdodE1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmJ1bXBNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlKXtkYXRhLmJ1bXBNYXA9dGhpcy5idW1wTWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEuYnVtcFNjYWxlPXRoaXMuYnVtcFNjYWxlO31pZih0aGlzLm5vcm1hbE1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpe2RhdGEubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEubm9ybWFsU2NhbGU9dGhpcy5ub3JtYWxTY2FsZS50b0FycmF5KCk7fWlmKHRoaXMuZGlzcGxhY2VtZW50TWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSl7ZGF0YS5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKG1ldGEpLnV1aWQ7ZGF0YS5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlO2RhdGEuZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXM7fWlmKHRoaXMucm91Z2huZXNzTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSlkYXRhLnJvdWdobmVzc01hcD10aGlzLnJvdWdobmVzc01hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLm1ldGFsbmVzc01hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpZGF0YS5tZXRhbG5lc3NNYXA9dGhpcy5tZXRhbG5lc3NNYXAudG9KU09OKG1ldGEpLnV1aWQ7aWYodGhpcy5lbWlzc2l2ZU1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpZGF0YS5lbWlzc2l2ZU1hcD10aGlzLmVtaXNzaXZlTWFwLnRvSlNPTihtZXRhKS51dWlkO2lmKHRoaXMuc3BlY3VsYXJNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlKWRhdGEuc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcC50b0pTT04obWV0YSkudXVpZDtpZih0aGlzLmVudk1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUpe2RhdGEuZW52TWFwPXRoaXMuZW52TWFwLnRvSlNPTihtZXRhKS51dWlkO2RhdGEucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5Oy8vIFNjYWxlIGJlaGluZCBlbnZNYXBcbn1pZih0aGlzLnNpemUhPT11bmRlZmluZWQpZGF0YS5zaXplPXRoaXMuc2l6ZTtpZih0aGlzLnNpemVBdHRlbnVhdGlvbiE9PXVuZGVmaW5lZClkYXRhLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbjtpZih0aGlzLmJsZW5kaW5nIT09VEhSRUUuTm9ybWFsQmxlbmRpbmcpZGF0YS5ibGVuZGluZz10aGlzLmJsZW5kaW5nO2lmKHRoaXMuc2hhZGluZyE9PVRIUkVFLlNtb290aFNoYWRpbmcpZGF0YS5zaGFkaW5nPXRoaXMuc2hhZGluZztpZih0aGlzLnNpZGUhPT1USFJFRS5Gcm9udFNpZGUpZGF0YS5zaWRlPXRoaXMuc2lkZTtpZih0aGlzLnZlcnRleENvbG9ycyE9PVRIUkVFLk5vQ29sb3JzKWRhdGEudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2lmKHRoaXMub3BhY2l0eTwxKWRhdGEub3BhY2l0eT10aGlzLm9wYWNpdHk7aWYodGhpcy50cmFuc3BhcmVudD09PXRydWUpZGF0YS50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50O2lmKHRoaXMuYWxwaGFUZXN0PjApZGF0YS5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3Q7aWYodGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9PT10cnVlKWRhdGEucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhO2lmKHRoaXMud2lyZWZyYW1lPT09dHJ1ZSlkYXRhLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTtpZih0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD4xKWRhdGEud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoOy8vIFRPRE86IENvcGllZCBmcm9tIE9iamVjdDNELnRvSlNPTlxuZnVuY3Rpb24gZXh0cmFjdEZyb21DYWNoZShjYWNoZSl7dmFyIHZhbHVlcz1bXTtmb3IodmFyIGtleSBpbiBjYWNoZSl7dmFyIGRhdGE9Y2FjaGVba2V5XTtkZWxldGUgZGF0YS5tZXRhZGF0YTt2YWx1ZXMucHVzaChkYXRhKTt9cmV0dXJuIHZhbHVlczt9aWYoaXNSb290KXt2YXIgdGV4dHVyZXM9ZXh0cmFjdEZyb21DYWNoZShtZXRhLnRleHR1cmVzKTt2YXIgaW1hZ2VzPWV4dHJhY3RGcm9tQ2FjaGUobWV0YS5pbWFnZXMpO2lmKHRleHR1cmVzLmxlbmd0aD4wKWRhdGEudGV4dHVyZXM9dGV4dHVyZXM7aWYoaW1hZ2VzLmxlbmd0aD4wKWRhdGEuaW1hZ2VzPWltYWdlczt9cmV0dXJuIGRhdGE7fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLmNvcHkodGhpcyk7fSxjb3B5OmZ1bmN0aW9uKHNvdXJjZSl7dGhpcy5uYW1lPXNvdXJjZS5uYW1lO3RoaXMuZm9nPXNvdXJjZS5mb2c7dGhpcy5saWdodHM9c291cmNlLmxpZ2h0czt0aGlzLmJsZW5kaW5nPXNvdXJjZS5ibGVuZGluZzt0aGlzLnNpZGU9c291cmNlLnNpZGU7dGhpcy52ZXJ0ZXhDb2xvcnM9c291cmNlLnZlcnRleENvbG9yczt0aGlzLm9wYWNpdHk9c291cmNlLm9wYWNpdHk7dGhpcy50cmFuc3BhcmVudD1zb3VyY2UudHJhbnNwYXJlbnQ7dGhpcy5ibGVuZFNyYz1zb3VyY2UuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1zb3VyY2UuYmxlbmREc3Q7dGhpcy5ibGVuZEVxdWF0aW9uPXNvdXJjZS5ibGVuZEVxdWF0aW9uO3RoaXMuYmxlbmRTcmNBbHBoYT1zb3VyY2UuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9c291cmNlLmJsZW5kRHN0QWxwaGE7dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9c291cmNlLmJsZW5kRXF1YXRpb25BbHBoYTt0aGlzLmRlcHRoRnVuYz1zb3VyY2UuZGVwdGhGdW5jO3RoaXMuZGVwdGhUZXN0PXNvdXJjZS5kZXB0aFRlc3Q7dGhpcy5kZXB0aFdyaXRlPXNvdXJjZS5kZXB0aFdyaXRlO3RoaXMuY29sb3JXcml0ZT1zb3VyY2UuY29sb3JXcml0ZTt0aGlzLnByZWNpc2lvbj1zb3VyY2UucHJlY2lzaW9uO3RoaXMucG9seWdvbk9mZnNldD1zb3VyY2UucG9seWdvbk9mZnNldDt0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9c291cmNlLnBvbHlnb25PZmZzZXRGYWN0b3I7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9c291cmNlLnBvbHlnb25PZmZzZXRVbml0czt0aGlzLmFscGhhVGVzdD1zb3VyY2UuYWxwaGFUZXN0O3RoaXMucHJlbXVsdGlwbGllZEFscGhhPXNvdXJjZS5wcmVtdWx0aXBsaWVkQWxwaGE7dGhpcy5vdmVyZHJhdz1zb3VyY2Uub3ZlcmRyYXc7dGhpcy52aXNpYmxlPXNvdXJjZS52aXNpYmxlO3RoaXMuY2xpcFNoYWRvd3M9c291cmNlLmNsaXBTaGFkb3dzO3ZhciBzcmNQbGFuZXM9c291cmNlLmNsaXBwaW5nUGxhbmVzLGRzdFBsYW5lcz1udWxsO2lmKHNyY1BsYW5lcyE9PW51bGwpe3ZhciBuPXNyY1BsYW5lcy5sZW5ndGg7ZHN0UGxhbmVzPW5ldyBBcnJheShuKTtmb3IodmFyIGk9MDtpIT09bjsrK2kpZHN0UGxhbmVzW2ldPXNyY1BsYW5lc1tpXS5jbG9uZSgpO310aGlzLmNsaXBwaW5nUGxhbmVzPWRzdFBsYW5lcztyZXR1cm4gdGhpczt9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTondXBkYXRlJ30pO30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTonZGlzcG9zZSd9KTt9fTtPYmplY3QuYXNzaWduKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlKTtUSFJFRS5NYXRlcmlhbElkQ291bnQ9MDsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvTGluZUJhc2ljTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKiAgY29sb3I6IDxoZXg+LFxyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICpcclxuICogIGxpbmV3aWR0aDogPGZsb2F0PixcclxuICogIGxpbmVjYXA6IFwicm91bmRcIixcclxuICogIGxpbmVqb2luOiBcInJvdW5kXCJcclxuICogfVxyXG4gKi9USFJFRS5MaW5lQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihwYXJhbWV0ZXJzKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTGluZUJhc2ljTWF0ZXJpYWwnO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDB4ZmZmZmZmKTt0aGlzLmxpbmV3aWR0aD0xO3RoaXMubGluZWNhcD0ncm91bmQnO3RoaXMubGluZWpvaW49J3JvdW5kJzt0aGlzLmxpZ2h0cz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxpbmVCYXNpY01hdGVyaWFsO1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5saW5ld2lkdGg9c291cmNlLmxpbmV3aWR0aDt0aGlzLmxpbmVjYXA9c291cmNlLmxpbmVjYXA7dGhpcy5saW5lam9pbj1zb3VyY2UubGluZWpvaW47cmV0dXJuIHRoaXM7fTsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvTGluZURhc2hlZE1hdGVyaWFsLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICpcclxuICogcGFyYW1ldGVycyA9IHtcclxuICogIGNvbG9yOiA8aGV4PixcclxuICogIG9wYWNpdHk6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICBsaW5ld2lkdGg6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICBzY2FsZTogPGZsb2F0PixcclxuICogIGRhc2hTaXplOiA8ZmxvYXQ+LFxyXG4gKiAgZ2FwU2l6ZTogPGZsb2F0PlxyXG4gKiB9XHJcbiAqL1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbD1mdW5jdGlvbihwYXJhbWV0ZXJzKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTGluZURhc2hlZE1hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7dGhpcy5saW5ld2lkdGg9MTt0aGlzLnNjYWxlPTE7dGhpcy5kYXNoU2l6ZT0zO3RoaXMuZ2FwU2l6ZT0xO3RoaXMubGlnaHRzPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO307VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw7VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5saW5ld2lkdGg9c291cmNlLmxpbmV3aWR0aDt0aGlzLnNjYWxlPXNvdXJjZS5zY2FsZTt0aGlzLmRhc2hTaXplPXNvdXJjZS5kYXNoU2l6ZTt0aGlzLmdhcFNpemU9c291cmNlLmdhcFNpemU7cmV0dXJuIHRoaXM7fTsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvTWVzaEJhc2ljTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKiAgY29sb3I6IDxoZXg+LFxyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIGFvTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKiAgYW9NYXBJbnRlbnNpdHk6IDxmbG9hdD5cclxuICpcclxuICogIHNwZWN1bGFyTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqXHJcbiAqICBlbnZNYXA6IG5ldyBUSFJFRS5UZXh0dXJlQ3ViZSggW3Bvc3gsIG5lZ3gsIHBvc3ksIG5lZ3ksIHBvc3osIG5lZ3pdICksXHJcbiAqICBjb21iaW5lOiBUSFJFRS5NdWx0aXBseSxcclxuICogIHJlZmxlY3Rpdml0eTogPGZsb2F0PixcclxuICogIHJlZnJhY3Rpb25SYXRpbzogPGZsb2F0PixcclxuICpcclxuICogIHNoYWRpbmc6IFRIUkVFLlNtb290aFNoYWRpbmcsXHJcbiAqICBkZXB0aFRlc3Q6IDxib29sPixcclxuICogIGRlcHRoV3JpdGU6IDxib29sPixcclxuICpcclxuICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LFxyXG4gKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgc2tpbm5pbmc6IDxib29sPixcclxuICogIG1vcnBoVGFyZ2V0czogPGJvb2w+XHJcbiAqIH1cclxuICovVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWw9ZnVuY3Rpb24ocGFyYW1ldGVycyl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J01lc2hCYXNpY01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7Ly8gZW1pc3NpdmVcbnRoaXMubWFwPW51bGw7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MS4wO3RoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5lbnZNYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0wLjk4O3RoaXMud2lyZWZyYW1lPWZhbHNlO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lY2FwPSdyb3VuZCc7dGhpcy53aXJlZnJhbWVMaW5lam9pbj0ncm91bmQnO3RoaXMuc2tpbm5pbmc9ZmFsc2U7dGhpcy5tb3JwaFRhcmdldHM9ZmFsc2U7dGhpcy5saWdodHM9ZmFsc2U7dGhpcy5zZXRWYWx1ZXMocGFyYW1ldGVycyk7fTtUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoQmFzaWNNYXRlcmlhbDtUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hb01hcD1zb3VyY2UuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1zb3VyY2UuYW9NYXBJbnRlbnNpdHk7dGhpcy5zcGVjdWxhck1hcD1zb3VyY2Uuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5lbnZNYXA9c291cmNlLmVudk1hcDt0aGlzLmNvbWJpbmU9c291cmNlLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9c291cmNlLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1zb3VyY2UucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1zb3VyY2Uuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9c291cmNlLm1vcnBoVGFyZ2V0cztyZXR1cm4gdGhpczt9Oy8vIEZpbGU6c3JjL21hdGVyaWFscy9NZXNoRGVwdGhNYXRlcmlhbC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwczovL2NsYXJhLmlvXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKlxyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICpcclxuICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgZGlzcGxhY2VtZW50TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKiAgZGlzcGxhY2VtZW50U2NhbGU6IDxmbG9hdD4sXHJcbiAqICBkaXNwbGFjZW1lbnRCaWFzOiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sXHJcbiAqICB3aXJlZnJhbWVMaW5ld2lkdGg6IDxmbG9hdD5cclxuICogfVxyXG4gKi9USFJFRS5NZXNoRGVwdGhNYXRlcmlhbD1mdW5jdGlvbihwYXJhbWV0ZXJzKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTWVzaERlcHRoTWF0ZXJpYWwnO3RoaXMuZGVwdGhQYWNraW5nPVRIUkVFLkJhc2ljRGVwdGhQYWNraW5nO3RoaXMuc2tpbm5pbmc9ZmFsc2U7dGhpcy5tb3JwaFRhcmdldHM9ZmFsc2U7dGhpcy5tYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmZvZz1mYWxzZTt0aGlzLmxpZ2h0cz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsO1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5kZXB0aFBhY2tpbmc9c291cmNlLmRlcHRoUGFja2luZzt0aGlzLnNraW5uaW5nPXNvdXJjZS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1zb3VyY2UubW9ycGhUYXJnZXRzO3RoaXMubWFwPXNvdXJjZS5tYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy53aXJlZnJhbWU9c291cmNlLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1zb3VyY2Uud2lyZWZyYW1lTGluZXdpZHRoO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL01lc2hMYW1iZXJ0TWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKiAgY29sb3I6IDxoZXg+LFxyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICpcclxuICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIGxpZ2h0TWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKiAgbGlnaHRNYXBJbnRlbnNpdHk6IDxmbG9hdD5cclxuICpcclxuICogIGFvTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKiAgYW9NYXBJbnRlbnNpdHk6IDxmbG9hdD5cclxuICpcclxuICogIGVtaXNzaXZlOiA8aGV4PixcclxuICogIGVtaXNzaXZlSW50ZW5zaXR5OiA8ZmxvYXQ+XHJcbiAqICBlbWlzc2l2ZU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIHNwZWN1bGFyTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgYWxwaGFNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqXHJcbiAqICBlbnZNYXA6IG5ldyBUSFJFRS5UZXh0dXJlQ3ViZSggW3Bvc3gsIG5lZ3gsIHBvc3ksIG5lZ3ksIHBvc3osIG5lZ3pdICksXHJcbiAqICBjb21iaW5lOiBUSFJFRS5NdWx0aXBseSxcclxuICogIHJlZmxlY3Rpdml0eTogPGZsb2F0PixcclxuICogIHJlZnJhY3Rpb25SYXRpbzogPGZsb2F0PixcclxuICpcclxuICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LFxyXG4gKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgc2tpbm5pbmc6IDxib29sPixcclxuICogIG1vcnBoVGFyZ2V0czogPGJvb2w+LFxyXG4gKiAgbW9ycGhOb3JtYWxzOiA8Ym9vbD5cclxuICogfVxyXG4gKi9USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsPWZ1bmN0aW9uKHBhcmFtZXRlcnMpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPSdNZXNoTGFtYmVydE1hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7Ly8gZGlmZnVzZVxudGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xLjA7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEuMDt0aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLmVudk1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVjYXA9J3JvdW5kJzt0aGlzLndpcmVmcmFtZUxpbmVqb2luPSdyb3VuZCc7dGhpcy5za2lubmluZz1mYWxzZTt0aGlzLm1vcnBoVGFyZ2V0cz1mYWxzZTt0aGlzLm1vcnBoTm9ybWFscz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsO1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShzb3VyY2UuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9c291cmNlLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9c291cmNlLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9c291cmNlLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5jb21iaW5lPXNvdXJjZS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PXNvdXJjZS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89c291cmNlLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1zb3VyY2Uud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPXNvdXJjZS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPXNvdXJjZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49c291cmNlLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9c291cmNlLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPXNvdXJjZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9c291cmNlLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpczt9Oy8vIEZpbGU6c3JjL21hdGVyaWFscy9NZXNoTm9ybWFsTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICpcclxuICogIHdpcmVmcmFtZTogPGJvb2xlYW4+LFxyXG4gKiAgd2lyZWZyYW1lTGluZXdpZHRoOiA8ZmxvYXQ+XHJcbiAqIH1cclxuICovVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsPWZ1bmN0aW9uKHBhcmFtZXRlcnMpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyxwYXJhbWV0ZXJzKTt0aGlzLnR5cGU9J01lc2hOb3JtYWxNYXRlcmlhbCc7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmZvZz1mYWxzZTt0aGlzLmxpZ2h0cz1mYWxzZTt0aGlzLm1vcnBoVGFyZ2V0cz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsO1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpczt9Oy8vIEZpbGU6c3JjL21hdGVyaWFscy9NZXNoUGhvbmdNYXRlcmlhbC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqXHJcbiAqIHBhcmFtZXRlcnMgPSB7XHJcbiAqICBjb2xvcjogPGhleD4sXHJcbiAqICBzcGVjdWxhcjogPGhleD4sXHJcbiAqICBzaGluaW5lc3M6IDxmbG9hdD4sXHJcbiAqICBvcGFjaXR5OiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgbGlnaHRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBsaWdodE1hcEludGVuc2l0eTogPGZsb2F0PlxyXG4gKlxyXG4gKiAgYW9NYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBhb01hcEludGVuc2l0eTogPGZsb2F0PlxyXG4gKlxyXG4gKiAgZW1pc3NpdmU6IDxoZXg+LFxyXG4gKiAgZW1pc3NpdmVJbnRlbnNpdHk6IDxmbG9hdD5cclxuICogIGVtaXNzaXZlTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgYnVtcE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICogIGJ1bXBTY2FsZTogPGZsb2F0PixcclxuICpcclxuICogIG5vcm1hbE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICogIG5vcm1hbFNjYWxlOiA8VmVjdG9yMj4sXHJcbiAqXHJcbiAqICBkaXNwbGFjZW1lbnRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBkaXNwbGFjZW1lbnRTY2FsZTogPGZsb2F0PixcclxuICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICBzcGVjdWxhck1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIGFscGhhTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgZW52TWFwOiBuZXcgVEhSRUUuVGV4dHVyZUN1YmUoIFtwb3N4LCBuZWd4LCBwb3N5LCBuZWd5LCBwb3N6LCBuZWd6XSApLFxyXG4gKiAgY29tYmluZTogVEhSRUUuTXVsdGlwbHksXHJcbiAqICByZWZsZWN0aXZpdHk6IDxmbG9hdD4sXHJcbiAqICByZWZyYWN0aW9uUmF0aW86IDxmbG9hdD4sXHJcbiAqXHJcbiAqICB3aXJlZnJhbWU6IDxib29sZWFuPixcclxuICogIHdpcmVmcmFtZUxpbmV3aWR0aDogPGZsb2F0PixcclxuICpcclxuICogIHNraW5uaW5nOiA8Ym9vbD4sXHJcbiAqICBtb3JwaFRhcmdldHM6IDxib29sPixcclxuICogIG1vcnBoTm9ybWFsczogPGJvb2w+XHJcbiAqIH1cclxuICovVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw9ZnVuY3Rpb24ocGFyYW1ldGVycyl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J01lc2hQaG9uZ01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7Ly8gZGlmZnVzZVxudGhpcy5zcGVjdWxhcj1uZXcgVEhSRUUuQ29sb3IoMHgxMTExMTEpO3RoaXMuc2hpbmluZXNzPTMwO3RoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MS4wO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTEuMDt0aGlzLmVtaXNzaXZlPW5ldyBUSFJFRS5Db2xvcigweDAwMDAwMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xLjA7dGhpcy5lbWlzc2l2ZU1hcD1udWxsO3RoaXMuYnVtcE1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuYWxwaGFNYXA9bnVsbDt0aGlzLmVudk1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy53aXJlZnJhbWU9ZmFsc2U7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVjYXA9J3JvdW5kJzt0aGlzLndpcmVmcmFtZUxpbmVqb2luPSdyb3VuZCc7dGhpcy5za2lubmluZz1mYWxzZTt0aGlzLm1vcnBoVGFyZ2V0cz1mYWxzZTt0aGlzLm1vcnBoTm9ybWFscz1mYWxzZTt0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaFBob25nTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsO1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5jb2xvci5jb3B5KHNvdXJjZS5jb2xvcik7dGhpcy5zcGVjdWxhci5jb3B5KHNvdXJjZS5zcGVjdWxhcik7dGhpcy5zaGluaW5lc3M9c291cmNlLnNoaW5pbmVzczt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShzb3VyY2UuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9c291cmNlLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9c291cmNlLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuYnVtcE1hcD1zb3VyY2UuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1zb3VyY2UuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPXNvdXJjZS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KHNvdXJjZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5zcGVjdWxhck1hcD1zb3VyY2Uuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1zb3VyY2UuYWxwaGFNYXA7dGhpcy5lbnZNYXA9c291cmNlLmVudk1hcDt0aGlzLmNvbWJpbmU9c291cmNlLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9c291cmNlLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1zb3VyY2UucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1zb3VyY2Uuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9c291cmNlLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1zb3VyY2UubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL01lc2hTdGFuZGFyZE1hdGVyaWFsLmpzXG4vKipcclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqXHJcbiAqIHBhcmFtZXRlcnMgPSB7XHJcbiAqICBjb2xvcjogPGhleD4sXHJcbiAqICByb3VnaG5lc3M6IDxmbG9hdD4sXHJcbiAqICBtZXRhbG5lc3M6IDxmbG9hdD4sXHJcbiAqICBvcGFjaXR5OiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgbGlnaHRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBsaWdodE1hcEludGVuc2l0eTogPGZsb2F0PlxyXG4gKlxyXG4gKiAgYW9NYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBhb01hcEludGVuc2l0eTogPGZsb2F0PlxyXG4gKlxyXG4gKiAgZW1pc3NpdmU6IDxoZXg+LFxyXG4gKiAgZW1pc3NpdmVJbnRlbnNpdHk6IDxmbG9hdD5cclxuICogIGVtaXNzaXZlTWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgYnVtcE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICogIGJ1bXBTY2FsZTogPGZsb2F0PixcclxuICpcclxuICogIG5vcm1hbE1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICogIG5vcm1hbFNjYWxlOiA8VmVjdG9yMj4sXHJcbiAqXHJcbiAqICBkaXNwbGFjZW1lbnRNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqICBkaXNwbGFjZW1lbnRTY2FsZTogPGZsb2F0PixcclxuICogIGRpc3BsYWNlbWVudEJpYXM6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICByb3VnaG5lc3NNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqXHJcbiAqICBtZXRhbG5lc3NNYXA6IG5ldyBUSFJFRS5UZXh0dXJlKCA8SW1hZ2U+ICksXHJcbiAqXHJcbiAqICBhbHBoYU1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICogIGVudk1hcDogbmV3IFRIUkVFLkN1YmVUZXh0dXJlKCBbcG9zeCwgbmVneCwgcG9zeSwgbmVneSwgcG9zeiwgbmVnel0gKSxcclxuICogIGVudk1hcEludGVuc2l0eTogPGZsb2F0PlxyXG4gKlxyXG4gKiAgcmVmcmFjdGlvblJhdGlvOiA8ZmxvYXQ+LFxyXG4gKlxyXG4gKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sXHJcbiAqICB3aXJlZnJhbWVMaW5ld2lkdGg6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICBza2lubmluZzogPGJvb2w+LFxyXG4gKiAgbW9ycGhUYXJnZXRzOiA8Ym9vbD4sXHJcbiAqICBtb3JwaE5vcm1hbHM6IDxib29sPlxyXG4gKiB9XHJcbiAqL1RIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsPWZ1bmN0aW9uKHBhcmFtZXRlcnMpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5kZWZpbmVzPXsnU1RBTkRBUkQnOicnfTt0aGlzLnR5cGU9J01lc2hTdGFuZGFyZE1hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7Ly8gZGlmZnVzZVxudGhpcy5yb3VnaG5lc3M9MC41O3RoaXMubWV0YWxuZXNzPTAuNTt0aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEuMDt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xLjA7dGhpcy5lbWlzc2l2ZT1uZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MS4wO3RoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMucm91Z2huZXNzTWFwPW51bGw7dGhpcy5tZXRhbG5lc3NNYXA9bnVsbDt0aGlzLmFscGhhTWFwPW51bGw7dGhpcy5lbnZNYXA9bnVsbDt0aGlzLmVudk1hcEludGVuc2l0eT0xLjA7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWNhcD0ncm91bmQnO3RoaXMud2lyZWZyYW1lTGluZWpvaW49J3JvdW5kJzt0aGlzLnNraW5uaW5nPWZhbHNlO3RoaXMubW9ycGhUYXJnZXRzPWZhbHNlO3RoaXMubW9ycGhOb3JtYWxzPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO307VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWw7VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmRlZmluZXM9eydTVEFOREFSRCc6Jyd9O3RoaXMuY29sb3IuY29weShzb3VyY2UuY29sb3IpO3RoaXMucm91Z2huZXNzPXNvdXJjZS5yb3VnaG5lc3M7dGhpcy5tZXRhbG5lc3M9c291cmNlLm1ldGFsbmVzczt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMubGlnaHRNYXA9c291cmNlLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9c291cmNlLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9c291cmNlLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9c291cmNlLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShzb3VyY2UuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9c291cmNlLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9c291cmNlLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuYnVtcE1hcD1zb3VyY2UuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1zb3VyY2UuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPXNvdXJjZS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KHNvdXJjZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9c291cmNlLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXNvdXJjZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9c291cmNlLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5yb3VnaG5lc3NNYXA9c291cmNlLnJvdWdobmVzc01hcDt0aGlzLm1ldGFsbmVzc01hcD1zb3VyY2UubWV0YWxuZXNzTWFwO3RoaXMuYWxwaGFNYXA9c291cmNlLmFscGhhTWFwO3RoaXMuZW52TWFwPXNvdXJjZS5lbnZNYXA7dGhpcy5lbnZNYXBJbnRlbnNpdHk9c291cmNlLmVudk1hcEludGVuc2l0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1zb3VyY2UucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9c291cmNlLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1zb3VyY2Uud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1zb3VyY2Uuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9c291cmNlLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1zb3VyY2UubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL01lc2hQaHlzaWNhbE1hdGVyaWFsLmpzXG4vKipcclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqXHJcbiAqIHBhcmFtZXRlcnMgPSB7XHJcbiAqICByZWZsZWN0aXZpdHk6IDxmbG9hdD5cclxuICogfVxyXG4gKi9USFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbD1mdW5jdGlvbihwYXJhbWV0ZXJzKXtUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17J1BIWVNJQ0FMJzonJ307dGhpcy50eXBlPSdNZXNoUGh5c2ljYWxNYXRlcmlhbCc7dGhpcy5yZWZsZWN0aXZpdHk9MC41Oy8vIG1hcHMgdG8gRjAgPSAwLjA0XG50aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9O1RIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsO1RIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSl7VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHNvdXJjZSk7dGhpcy5kZWZpbmVzPXsnUEhZU0lDQUwnOicnfTt0aGlzLnJlZmxlY3Rpdml0eT1zb3VyY2UucmVmbGVjdGl2aXR5O3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL011bHRpTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5NdWx0aU1hdGVyaWFsPWZ1bmN0aW9uKG1hdGVyaWFscyl7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy50eXBlPSdNdWx0aU1hdGVyaWFsJzt0aGlzLm1hdGVyaWFscz1tYXRlcmlhbHMgaW5zdGFuY2VvZiBBcnJheT9tYXRlcmlhbHM6W107dGhpcy52aXNpYmxlPXRydWU7fTtUSFJFRS5NdWx0aU1hdGVyaWFsLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTXVsdGlNYXRlcmlhbCx0b0pTT046ZnVuY3Rpb24obWV0YSl7dmFyIG91dHB1dD17bWV0YWRhdGE6e3ZlcnNpb246NC4yLHR5cGU6J21hdGVyaWFsJyxnZW5lcmF0b3I6J01hdGVyaWFsRXhwb3J0ZXInfSx1dWlkOnRoaXMudXVpZCx0eXBlOnRoaXMudHlwZSxtYXRlcmlhbHM6W119O3ZhciBtYXRlcmlhbHM9dGhpcy5tYXRlcmlhbHM7Zm9yKHZhciBpPTAsbD1tYXRlcmlhbHMubGVuZ3RoO2k8bDtpKyspe3ZhciBtYXRlcmlhbD1tYXRlcmlhbHNbaV0udG9KU09OKG1ldGEpO2RlbGV0ZSBtYXRlcmlhbC5tZXRhZGF0YTtvdXRwdXQubWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpO31vdXRwdXQudmlzaWJsZT10aGlzLnZpc2libGU7cmV0dXJuIG91dHB1dDt9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIG1hdGVyaWFsPW5ldyB0aGlzLmNvbnN0cnVjdG9yKCk7Zm9yKHZhciBpPTA7aTx0aGlzLm1hdGVyaWFscy5sZW5ndGg7aSsrKXttYXRlcmlhbC5tYXRlcmlhbHMucHVzaCh0aGlzLm1hdGVyaWFsc1tpXS5jbG9uZSgpKTt9bWF0ZXJpYWwudmlzaWJsZT10aGlzLnZpc2libGU7cmV0dXJuIG1hdGVyaWFsO319Oy8vIEZpbGU6c3JjL21hdGVyaWFscy9Qb2ludHNNYXRlcmlhbC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqXHJcbiAqIHBhcmFtZXRlcnMgPSB7XHJcbiAqICBjb2xvcjogPGhleD4sXHJcbiAqICBvcGFjaXR5OiA8ZmxvYXQ+LFxyXG4gKiAgbWFwOiBuZXcgVEhSRUUuVGV4dHVyZSggPEltYWdlPiApLFxyXG4gKlxyXG4gKiAgc2l6ZTogPGZsb2F0PixcclxuICogIHNpemVBdHRlbnVhdGlvbjogPGJvb2w+XHJcbiAqIH1cclxuICovVEhSRUUuUG9pbnRzTWF0ZXJpYWw9ZnVuY3Rpb24ocGFyYW1ldGVycyl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1BvaW50c01hdGVyaWFsJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7dGhpcy5tYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj10cnVlO3RoaXMubGlnaHRzPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO307VEhSRUUuUG9pbnRzTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5Qb2ludHNNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUG9pbnRzTWF0ZXJpYWw7VEhSRUUuUG9pbnRzTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMuc2l6ZT1zb3VyY2Uuc2l6ZTt0aGlzLnNpemVBdHRlbnVhdGlvbj1zb3VyY2Uuc2l6ZUF0dGVudWF0aW9uO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL1NoYWRlck1hdGVyaWFsLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICpcclxuICogcGFyYW1ldGVycyA9IHtcclxuICogIGRlZmluZXM6IHsgXCJsYWJlbFwiIDogXCJ2YWx1ZVwiIH0sXHJcbiAqICB1bmlmb3JtczogeyBcInBhcmFtZXRlcjFcIjogeyB0eXBlOiBcIjFmXCIsIHZhbHVlOiAxLjAgfSwgXCJwYXJhbWV0ZXIyXCI6IHsgdHlwZTogXCIxaVwiIHZhbHVlMjogMiB9IH0sXHJcbiAqXHJcbiAqICBmcmFnbWVudFNoYWRlcjogPHN0cmluZz4sXHJcbiAqICB2ZXJ0ZXhTaGFkZXI6IDxzdHJpbmc+LFxyXG4gKlxyXG4gKiAgd2lyZWZyYW1lOiA8Ym9vbGVhbj4sXHJcbiAqICB3aXJlZnJhbWVMaW5ld2lkdGg6IDxmbG9hdD4sXHJcbiAqXHJcbiAqICBsaWdodHM6IDxib29sPixcclxuICpcclxuICogIHNraW5uaW5nOiA8Ym9vbD4sXHJcbiAqICBtb3JwaFRhcmdldHM6IDxib29sPixcclxuICogIG1vcnBoTm9ybWFsczogPGJvb2w+XHJcbiAqIH1cclxuICovVEhSRUUuU2hhZGVyTWF0ZXJpYWw9ZnVuY3Rpb24ocGFyYW1ldGVycyl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1NoYWRlck1hdGVyaWFsJzt0aGlzLmRlZmluZXM9e307dGhpcy51bmlmb3Jtcz17fTt0aGlzLnZlcnRleFNoYWRlcj0ndm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59Jzt0aGlzLmZyYWdtZW50U2hhZGVyPSd2b2lkIG1haW4oKSB7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDAuMCwgMS4wICk7XFxufSc7dGhpcy5saW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZT1mYWxzZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMuZm9nPWZhbHNlOy8vIHNldCB0byB1c2Ugc2NlbmUgZm9nXG50aGlzLmxpZ2h0cz1mYWxzZTsvLyBzZXQgdG8gdXNlIHNjZW5lIGxpZ2h0c1xudGhpcy5jbGlwcGluZz1mYWxzZTsvLyBzZXQgdG8gdXNlIHVzZXItZGVmaW5lZCBjbGlwcGluZyBwbGFuZXNcbnRoaXMuc2tpbm5pbmc9ZmFsc2U7Ly8gc2V0IHRvIHVzZSBza2lubmluZyBhdHRyaWJ1dGUgc3RyZWFtc1xudGhpcy5tb3JwaFRhcmdldHM9ZmFsc2U7Ly8gc2V0IHRvIHVzZSBtb3JwaCB0YXJnZXRzXG50aGlzLm1vcnBoTm9ybWFscz1mYWxzZTsvLyBzZXQgdG8gdXNlIG1vcnBoIG5vcm1hbHNcbnRoaXMuZXh0ZW5zaW9ucz17ZGVyaXZhdGl2ZXM6ZmFsc2UsLy8gc2V0IHRvIHVzZSBkZXJpdmF0aXZlc1xuZnJhZ0RlcHRoOmZhbHNlLC8vIHNldCB0byB1c2UgZnJhZ21lbnQgZGVwdGggdmFsdWVzXG5kcmF3QnVmZmVyczpmYWxzZSwvLyBzZXQgdG8gdXNlIGRyYXcgYnVmZmVyc1xuc2hhZGVyVGV4dHVyZUxPRDpmYWxzZS8vIHNldCB0byB1c2Ugc2hhZGVyIHRleHR1cmUgTE9EXG59Oy8vIFdoZW4gcmVuZGVyZWQgZ2VvbWV0cnkgZG9lc24ndCBpbmNsdWRlIHRoZXNlIGF0dHJpYnV0ZXMgYnV0IHRoZSBtYXRlcmlhbCBkb2VzLFxuLy8gdXNlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGluIFdlYkdMLiBUaGlzIGF2b2lkcyBlcnJvcnMgd2hlbiBidWZmZXIgZGF0YSBpcyBtaXNzaW5nLlxudGhpcy5kZWZhdWx0QXR0cmlidXRlVmFsdWVzPXsnY29sb3InOlsxLDEsMV0sJ3V2JzpbMCwwXSwndXYyJzpbMCwwXX07dGhpcy5pbmRleDBBdHRyaWJ1dGVOYW1lPXVuZGVmaW5lZDtpZihwYXJhbWV0ZXJzIT09dW5kZWZpbmVkKXtpZihwYXJhbWV0ZXJzLmF0dHJpYnV0ZXMhPT11bmRlZmluZWQpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLicpO310aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTt9fTtUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TaGFkZXJNYXRlcmlhbDtUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihzb3VyY2Upe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMuZnJhZ21lbnRTaGFkZXI9c291cmNlLmZyYWdtZW50U2hhZGVyO3RoaXMudmVydGV4U2hhZGVyPXNvdXJjZS52ZXJ0ZXhTaGFkZXI7dGhpcy51bmlmb3Jtcz1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKHNvdXJjZS51bmlmb3Jtcyk7dGhpcy5kZWZpbmVzPXNvdXJjZS5kZWZpbmVzO3RoaXMud2lyZWZyYW1lPXNvdXJjZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9c291cmNlLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLmxpZ2h0cz1zb3VyY2UubGlnaHRzO3RoaXMuY2xpcHBpbmc9c291cmNlLmNsaXBwaW5nO3RoaXMuc2tpbm5pbmc9c291cmNlLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPXNvdXJjZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9c291cmNlLm1vcnBoTm9ybWFsczt0aGlzLmV4dGVuc2lvbnM9c291cmNlLmV4dGVuc2lvbnM7cmV0dXJuIHRoaXM7fTtUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKG1ldGEpe3ZhciBkYXRhPVRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLG1ldGEpO2RhdGEudW5pZm9ybXM9dGhpcy51bmlmb3JtcztkYXRhLnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcjtkYXRhLmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7cmV0dXJuIGRhdGE7fTsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvUmF3U2hhZGVyTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5SYXdTaGFkZXJNYXRlcmlhbD1mdW5jdGlvbihwYXJhbWV0ZXJzKXtUSFJFRS5TaGFkZXJNYXRlcmlhbC5jYWxsKHRoaXMscGFyYW1ldGVycyk7dGhpcy50eXBlPSdSYXdTaGFkZXJNYXRlcmlhbCc7fTtUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlJhd1NoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5SYXdTaGFkZXJNYXRlcmlhbDsvLyBGaWxlOnNyYy9tYXRlcmlhbHMvU3ByaXRlTWF0ZXJpYWwuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKiAgY29sb3I6IDxoZXg+LFxyXG4gKiAgb3BhY2l0eTogPGZsb2F0PixcclxuICogIG1hcDogbmV3IFRIUkVFLlRleHR1cmUoIDxJbWFnZT4gKSxcclxuICpcclxuICpcdHV2T2Zmc2V0OiBuZXcgVEhSRUUuVmVjdG9yMigpLFxyXG4gKlx0dXZTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoKVxyXG4gKiB9XHJcbiAqL1RIUkVFLlNwcml0ZU1hdGVyaWFsPWZ1bmN0aW9uKHBhcmFtZXRlcnMpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPSdTcHJpdGVNYXRlcmlhbCc7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMHhmZmZmZmYpO3RoaXMubWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMuZm9nPWZhbHNlO3RoaXMubGlnaHRzPWZhbHNlO3RoaXMuc2V0VmFsdWVzKHBhcmFtZXRlcnMpO307VEhSRUUuU3ByaXRlTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5TcHJpdGVNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3ByaXRlTWF0ZXJpYWw7VEhSRUUuU3ByaXRlTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc291cmNlKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsc291cmNlKTt0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTt0aGlzLm1hcD1zb3VyY2UubWFwO3RoaXMucm90YXRpb249c291cmNlLnJvdGF0aW9uO3JldHVybiB0aGlzO307Ly8gRmlsZTpzcmMvbWF0ZXJpYWxzL1NoYWRvd01hdGVyaWFsLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuU2hhZG93TWF0ZXJpYWw9ZnVuY3Rpb24oKXtUSFJFRS5TaGFkZXJNYXRlcmlhbC5jYWxsKHRoaXMse3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliW1wibGlnaHRzXCJdLHtvcGFjaXR5Ont2YWx1ZToxLjB9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snc2hhZG93X3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snc2hhZG93X2ZyYWcnXX0pO3RoaXMubGlnaHRzPXRydWU7dGhpcy50cmFuc3BhcmVudD10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse29wYWNpdHk6e2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmlmb3Jtcy5vcGFjaXR5LnZhbHVlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnVuaWZvcm1zLm9wYWNpdHkudmFsdWU9dmFsdWU7fX19KTt9O1RIUkVFLlNoYWRvd01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuU2hhZG93TWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNoYWRvd01hdGVyaWFsOy8vIEZpbGU6c3JjL3RleHR1cmVzL1RleHR1cmUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIHN6aW1layAvIGh0dHBzOi8vZ2l0aHViLmNvbS9zemltZWsvXHJcbiAqL1RIUkVFLlRleHR1cmU9ZnVuY3Rpb24oaW1hZ2UsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2Rpbmcpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCdpZCcse3ZhbHVlOlRIUkVFLlRleHR1cmVJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9Jyc7dGhpcy5zb3VyY2VGaWxlPScnO3RoaXMuaW1hZ2U9aW1hZ2UhPT11bmRlZmluZWQ/aW1hZ2U6VEhSRUUuVGV4dHVyZS5ERUZBVUxUX0lNQUdFO3RoaXMubWlwbWFwcz1bXTt0aGlzLm1hcHBpbmc9bWFwcGluZyE9PXVuZGVmaW5lZD9tYXBwaW5nOlRIUkVFLlRleHR1cmUuREVGQVVMVF9NQVBQSU5HO3RoaXMud3JhcFM9d3JhcFMhPT11bmRlZmluZWQ/d3JhcFM6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLndyYXBUPXdyYXBUIT09dW5kZWZpbmVkP3dyYXBUOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy5tYWdGaWx0ZXI9bWFnRmlsdGVyIT09dW5kZWZpbmVkP21hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9bWluRmlsdGVyIT09dW5kZWZpbmVkP21pbkZpbHRlcjpUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI7dGhpcy5hbmlzb3Ryb3B5PWFuaXNvdHJvcHkhPT11bmRlZmluZWQ/YW5pc290cm9weToxO3RoaXMuZm9ybWF0PWZvcm1hdCE9PXVuZGVmaW5lZD9mb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdDt0aGlzLnR5cGU9dHlwZSE9PXVuZGVmaW5lZD90eXBlOlRIUkVFLlVuc2lnbmVkQnl0ZVR5cGU7dGhpcy5vZmZzZXQ9bmV3IFRIUkVFLlZlY3RvcjIoMCwwKTt0aGlzLnJlcGVhdD1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRydWU7dGhpcy5wcmVtdWx0aXBseUFscGhhPWZhbHNlO3RoaXMuZmxpcFk9dHJ1ZTt0aGlzLnVucGFja0FsaWdubWVudD00Oy8vIHZhbGlkIHZhbHVlczogMSwgMiwgNCwgOCAoc2VlIGh0dHA6Ly93d3cua2hyb25vcy5vcmcvb3BlbmdsZXMvc2RrL2RvY3MvbWFuL3hodG1sL2dsUGl4ZWxTdG9yZWkueG1sKVxuLy8gVmFsdWVzIG9mIGVuY29kaW5nICE9PSBUSFJFRS5MaW5lYXJFbmNvZGluZyBvbmx5IHN1cHBvcnRlZCBvbiBtYXAsIGVudk1hcCBhbmQgZW1pc3NpdmVNYXAuXG4vL1xuLy8gQWxzbyBjaGFuZ2luZyB0aGUgZW5jb2RpbmcgYWZ0ZXIgYWxyZWFkeSB1c2VkIGJ5IGEgTWF0ZXJpYWwgd2lsbCBub3QgYXV0b21hdGljYWxseSBtYWtlIHRoZSBNYXRlcmlhbFxuLy8gdXBkYXRlLiAgWW91IG5lZWQgdG8gZXhwbGljaXRseSBjYWxsIE1hdGVyaWFsLm5lZWRzVXBkYXRlIHRvIHRyaWdnZXIgaXQgdG8gcmVjb21waWxlLlxudGhpcy5lbmNvZGluZz1lbmNvZGluZyE9PXVuZGVmaW5lZD9lbmNvZGluZzpUSFJFRS5MaW5lYXJFbmNvZGluZzt0aGlzLnZlcnNpb249MDt0aGlzLm9uVXBkYXRlPW51bGw7fTtUSFJFRS5UZXh0dXJlLkRFRkFVTFRfSU1BR0U9dW5kZWZpbmVkO1RIUkVFLlRleHR1cmUuREVGQVVMVF9NQVBQSU5HPVRIUkVFLlVWTWFwcGluZztUSFJFRS5UZXh0dXJlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVGV4dHVyZSxzZXQgbmVlZHNVcGRhdGUodmFsdWUpe2lmKHZhbHVlPT09dHJ1ZSl0aGlzLnZlcnNpb24rKzt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTt9LGNvcHk6ZnVuY3Rpb24oc291cmNlKXt0aGlzLmltYWdlPXNvdXJjZS5pbWFnZTt0aGlzLm1pcG1hcHM9c291cmNlLm1pcG1hcHMuc2xpY2UoMCk7dGhpcy5tYXBwaW5nPXNvdXJjZS5tYXBwaW5nO3RoaXMud3JhcFM9c291cmNlLndyYXBTO3RoaXMud3JhcFQ9c291cmNlLndyYXBUO3RoaXMubWFnRmlsdGVyPXNvdXJjZS5tYWdGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9c291cmNlLm1pbkZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9c291cmNlLmFuaXNvdHJvcHk7dGhpcy5mb3JtYXQ9c291cmNlLmZvcm1hdDt0aGlzLnR5cGU9c291cmNlLnR5cGU7dGhpcy5vZmZzZXQuY29weShzb3VyY2Uub2Zmc2V0KTt0aGlzLnJlcGVhdC5jb3B5KHNvdXJjZS5yZXBlYXQpO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXNvdXJjZS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy5wcmVtdWx0aXBseUFscGhhPXNvdXJjZS5wcmVtdWx0aXBseUFscGhhO3RoaXMuZmxpcFk9c291cmNlLmZsaXBZO3RoaXMudW5wYWNrQWxpZ25tZW50PXNvdXJjZS51bnBhY2tBbGlnbm1lbnQ7dGhpcy5lbmNvZGluZz1zb3VyY2UuZW5jb2Rpbmc7cmV0dXJuIHRoaXM7fSx0b0pTT046ZnVuY3Rpb24obWV0YSl7aWYobWV0YS50ZXh0dXJlc1t0aGlzLnV1aWRdIT09dW5kZWZpbmVkKXtyZXR1cm4gbWV0YS50ZXh0dXJlc1t0aGlzLnV1aWRdO31mdW5jdGlvbiBnZXREYXRhVVJMKGltYWdlKXt2YXIgY2FudmFzO2lmKGltYWdlLnRvRGF0YVVSTCE9PXVuZGVmaW5lZCl7Y2FudmFzPWltYWdlO31lbHNle2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtjYW52YXMud2lkdGg9aW1hZ2Uud2lkdGg7Y2FudmFzLmhlaWdodD1pbWFnZS5oZWlnaHQ7Y2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKGltYWdlLDAsMCxpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQpO31pZihjYW52YXMud2lkdGg+MjA0OHx8Y2FudmFzLmhlaWdodD4yMDQ4KXtyZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsMC42KTt9ZWxzZXtyZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7fX12YXIgb3V0cHV0PXttZXRhZGF0YTp7dmVyc2lvbjo0LjQsdHlwZTonVGV4dHVyZScsZ2VuZXJhdG9yOidUZXh0dXJlLnRvSlNPTid9LHV1aWQ6dGhpcy51dWlkLG5hbWU6dGhpcy5uYW1lLG1hcHBpbmc6dGhpcy5tYXBwaW5nLHJlcGVhdDpbdGhpcy5yZXBlYXQueCx0aGlzLnJlcGVhdC55XSxvZmZzZXQ6W3RoaXMub2Zmc2V0LngsdGhpcy5vZmZzZXQueV0sd3JhcDpbdGhpcy53cmFwUyx0aGlzLndyYXBUXSxtaW5GaWx0ZXI6dGhpcy5taW5GaWx0ZXIsbWFnRmlsdGVyOnRoaXMubWFnRmlsdGVyLGFuaXNvdHJvcHk6dGhpcy5hbmlzb3Ryb3B5fTtpZih0aGlzLmltYWdlIT09dW5kZWZpbmVkKXsvLyBUT0RPOiBNb3ZlIHRvIFRIUkVFLkltYWdlXG52YXIgaW1hZ2U9dGhpcy5pbWFnZTtpZihpbWFnZS51dWlkPT09dW5kZWZpbmVkKXtpbWFnZS51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7Ly8gVUdIXG59aWYobWV0YS5pbWFnZXNbaW1hZ2UudXVpZF09PT11bmRlZmluZWQpe21ldGEuaW1hZ2VzW2ltYWdlLnV1aWRdPXt1dWlkOmltYWdlLnV1aWQsdXJsOmdldERhdGFVUkwoaW1hZ2UpfTt9b3V0cHV0LmltYWdlPWltYWdlLnV1aWQ7fW1ldGEudGV4dHVyZXNbdGhpcy51dWlkXT1vdXRwdXQ7cmV0dXJuIG91dHB1dDt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6J2Rpc3Bvc2UnfSk7fSx0cmFuc2Zvcm1VdjpmdW5jdGlvbih1dil7aWYodGhpcy5tYXBwaW5nIT09VEhSRUUuVVZNYXBwaW5nKXJldHVybjt1di5tdWx0aXBseSh0aGlzLnJlcGVhdCk7dXYuYWRkKHRoaXMub2Zmc2V0KTtpZih1di54PDB8fHV2Lng+MSl7c3dpdGNoKHRoaXMud3JhcFMpe2Nhc2UgVEhSRUUuUmVwZWF0V3JhcHBpbmc6dXYueD11di54LU1hdGguZmxvb3IodXYueCk7YnJlYWs7Y2FzZSBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nOnV2Lng9dXYueDwwPzA6MTticmVhaztjYXNlIFRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6aWYoTWF0aC5hYnMoTWF0aC5mbG9vcih1di54KSUyKT09PTEpe3V2Lng9TWF0aC5jZWlsKHV2LngpLXV2Lng7fWVsc2V7dXYueD11di54LU1hdGguZmxvb3IodXYueCk7fWJyZWFrO319aWYodXYueTwwfHx1di55PjEpe3N3aXRjaCh0aGlzLndyYXBUKXtjYXNlIFRIUkVFLlJlcGVhdFdyYXBwaW5nOnV2Lnk9dXYueS1NYXRoLmZsb29yKHV2LnkpO2JyZWFrO2Nhc2UgVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzp1di55PXV2Lnk8MD8wOjE7YnJlYWs7Y2FzZSBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nOmlmKE1hdGguYWJzKE1hdGguZmxvb3IodXYueSklMik9PT0xKXt1di55PU1hdGguY2VpbCh1di55KS11di55O31lbHNle3V2Lnk9dXYueS1NYXRoLmZsb29yKHV2LnkpO31icmVhazt9fWlmKHRoaXMuZmxpcFkpe3V2Lnk9MS11di55O319fTtPYmplY3QuYXNzaWduKFRIUkVFLlRleHR1cmUucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpO1RIUkVFLlRleHR1cmVJZENvdW50PTA7Ly8gRmlsZTpzcmMvdGV4dHVyZXMvRGVwdGhUZXh0dXJlLmpzXG4vKipcclxuICogQGF1dGhvciBNYXR0IERlc0xhdXJpZXJzIC8gQG1hdHRkZXNsXHJcbiAqL1RIUkVFLkRlcHRoVGV4dHVyZT1mdW5jdGlvbih3aWR0aCxoZWlnaHQsdHlwZSxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsYW5pc290cm9weSl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsbnVsbCxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsVEhSRUUuRGVwdGhGb3JtYXQsdHlwZSxhbmlzb3Ryb3B5KTt0aGlzLmltYWdlPXt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fTt0aGlzLnR5cGU9dHlwZSE9PXVuZGVmaW5lZD90eXBlOlRIUkVFLlVuc2lnbmVkU2hvcnRUeXBlO3RoaXMubWFnRmlsdGVyPW1hZ0ZpbHRlciE9PXVuZGVmaW5lZD9tYWdGaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcjt0aGlzLm1pbkZpbHRlcj1taW5GaWx0ZXIhPT11bmRlZmluZWQ/bWluRmlsdGVyOlRIUkVFLk5lYXJlc3RGaWx0ZXI7dGhpcy5mbGlwWT1mYWxzZTt0aGlzLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt9O1RIUkVFLkRlcHRoVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuRGVwdGhUZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5EZXB0aFRleHR1cmU7Ly8gRmlsZTpzcmMvdGV4dHVyZXMvQ2FudmFzVGV4dHVyZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLkNhbnZhc1RleHR1cmU9ZnVuY3Rpb24oY2FudmFzLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5KXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxjYW52YXMsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHkpO3RoaXMubmVlZHNVcGRhdGU9dHJ1ZTt9O1RIUkVFLkNhbnZhc1RleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLkNhbnZhc1RleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNhbnZhc1RleHR1cmU7Ly8gRmlsZTpzcmMvdGV4dHVyZXMvQ3ViZVRleHR1cmUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5DdWJlVGV4dHVyZT1mdW5jdGlvbihpbWFnZXMsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2Rpbmcpe2ltYWdlcz1pbWFnZXMhPT11bmRlZmluZWQ/aW1hZ2VzOltdO21hcHBpbmc9bWFwcGluZyE9PXVuZGVmaW5lZD9tYXBwaW5nOlRIUkVFLkN1YmVSZWZsZWN0aW9uTWFwcGluZztUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxpbWFnZXMsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2RpbmcpO3RoaXMuZmxpcFk9ZmFsc2U7fTtUSFJFRS5DdWJlVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuQ3ViZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN1YmVUZXh0dXJlO09iamVjdC5kZWZpbmVQcm9wZXJ0eShUSFJFRS5DdWJlVGV4dHVyZS5wcm90b3R5cGUsJ2ltYWdlcycse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltYWdlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmltYWdlPXZhbHVlO319KTsvLyBGaWxlOnNyYy90ZXh0dXJlcy9Db21wcmVzc2VkVGV4dHVyZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqL1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlPWZ1bmN0aW9uKG1pcG1hcHMsd2lkdGgsaGVpZ2h0LGZvcm1hdCx0eXBlLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixhbmlzb3Ryb3B5LGVuY29kaW5nKXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxudWxsLG1hcHBpbmcsd3JhcFMsd3JhcFQsbWFnRmlsdGVyLG1pbkZpbHRlcixmb3JtYXQsdHlwZSxhbmlzb3Ryb3B5LGVuY29kaW5nKTt0aGlzLmltYWdlPXt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fTt0aGlzLm1pcG1hcHM9bWlwbWFwczsvLyBubyBmbGlwcGluZyBmb3IgY3ViZSB0ZXh0dXJlc1xuLy8gKGFsc28gZmxpcHBpbmcgZG9lc24ndCB3b3JrIGZvciBjb21wcmVzc2VkIHRleHR1cmVzIClcbnRoaXMuZmxpcFk9ZmFsc2U7Ly8gY2FuJ3QgZ2VuZXJhdGUgbWlwbWFwcyBmb3IgY29tcHJlc3NlZCB0ZXh0dXJlc1xuLy8gbWlwcyBtdXN0IGJlIGVtYmVkZGVkIGluIEREUyBmaWxlc1xudGhpcy5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7fTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNvbXByZXNzZWRUZXh0dXJlOy8vIEZpbGU6c3JjL3RleHR1cmVzL0RhdGFUZXh0dXJlLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuRGF0YVRleHR1cmU9ZnVuY3Rpb24oZGF0YSx3aWR0aCxoZWlnaHQsZm9ybWF0LHR5cGUsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGFuaXNvdHJvcHksZW5jb2Rpbmcpe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHksZW5jb2RpbmcpO3RoaXMuaW1hZ2U9e2RhdGE6ZGF0YSx3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fTt0aGlzLm1hZ0ZpbHRlcj1tYWdGaWx0ZXIhPT11bmRlZmluZWQ/bWFnRmlsdGVyOlRIUkVFLk5lYXJlc3RGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9bWluRmlsdGVyIT09dW5kZWZpbmVkP21pbkZpbHRlcjpUSFJFRS5OZWFyZXN0RmlsdGVyO3RoaXMuZmxpcFk9ZmFsc2U7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7fTtUSFJFRS5EYXRhVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuRGF0YVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkRhdGFUZXh0dXJlOy8vIEZpbGU6c3JjL3RleHR1cmVzL1ZpZGVvVGV4dHVyZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLlZpZGVvVGV4dHVyZT1mdW5jdGlvbih2aWRlbyxtYXBwaW5nLHdyYXBTLHdyYXBULG1hZ0ZpbHRlcixtaW5GaWx0ZXIsZm9ybWF0LHR5cGUsYW5pc290cm9weSl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsdmlkZW8sbWFwcGluZyx3cmFwUyx3cmFwVCxtYWdGaWx0ZXIsbWluRmlsdGVyLGZvcm1hdCx0eXBlLGFuaXNvdHJvcHkpO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPWZhbHNlO3ZhciBzY29wZT10aGlzO2Z1bmN0aW9uIHVwZGF0ZSgpe3JlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO2lmKHZpZGVvLnJlYWR5U3RhdGU+PXZpZGVvLkhBVkVfQ1VSUkVOVF9EQVRBKXtzY29wZS5uZWVkc1VwZGF0ZT10cnVlO319dXBkYXRlKCk7fTtUSFJFRS5WaWRlb1RleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLlZpZGVvVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVmlkZW9UZXh0dXJlOy8vIEZpbGU6c3JjL29iamVjdHMvR3JvdXAuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Hcm91cD1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdHcm91cCc7fTtUSFJFRS5Hcm91cC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkdyb3VwfSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9Qb2ludHMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5Qb2ludHM9ZnVuY3Rpb24oZ2VvbWV0cnksbWF0ZXJpYWwpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdQb2ludHMnO3RoaXMuZ2VvbWV0cnk9Z2VvbWV0cnkhPT11bmRlZmluZWQ/Z2VvbWV0cnk6bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7dGhpcy5tYXRlcmlhbD1tYXRlcmlhbCE9PXVuZGVmaW5lZD9tYXRlcmlhbDpuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoe2NvbG9yOk1hdGgucmFuZG9tKCkqMHhmZmZmZmZ9KTt9O1RIUkVFLlBvaW50cy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBvaW50cyxyYXljYXN0OmZ1bmN0aW9uKCl7dmFyIGludmVyc2VNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQoKTt2YXIgcmF5PW5ldyBUSFJFRS5SYXkoKTt2YXIgc3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUoKTtyZXR1cm4gZnVuY3Rpb24gcmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7dmFyIG9iamVjdD10aGlzO3ZhciBnZW9tZXRyeT10aGlzLmdlb21ldHJ5O3ZhciBtYXRyaXhXb3JsZD10aGlzLm1hdHJpeFdvcmxkO3ZhciB0aHJlc2hvbGQ9cmF5Y2FzdGVyLnBhcmFtcy5Qb2ludHMudGhyZXNob2xkOy8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlIGRpc3RhbmNlIHRvIHJheVxuaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmU9PT1udWxsKWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3NwaGVyZS5jb3B5KGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlKTtzcGhlcmUuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTtpZihyYXljYXN0ZXIucmF5LmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKT09PWZhbHNlKXJldHVybjsvL1xuaW52ZXJzZU1hdHJpeC5nZXRJbnZlcnNlKG1hdHJpeFdvcmxkKTtyYXkuY29weShyYXljYXN0ZXIucmF5KS5hcHBseU1hdHJpeDQoaW52ZXJzZU1hdHJpeCk7dmFyIGxvY2FsVGhyZXNob2xkPXRocmVzaG9sZC8oKHRoaXMuc2NhbGUueCt0aGlzLnNjYWxlLnkrdGhpcy5zY2FsZS56KS8zKTt2YXIgbG9jYWxUaHJlc2hvbGRTcT1sb2NhbFRocmVzaG9sZCpsb2NhbFRocmVzaG9sZDt2YXIgcG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKTtmdW5jdGlvbiB0ZXN0UG9pbnQocG9pbnQsaW5kZXgpe3ZhciByYXlQb2ludERpc3RhbmNlU3E9cmF5LmRpc3RhbmNlU3FUb1BvaW50KHBvaW50KTtpZihyYXlQb2ludERpc3RhbmNlU3E8bG9jYWxUaHJlc2hvbGRTcSl7dmFyIGludGVyc2VjdFBvaW50PXJheS5jbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50KTtpbnRlcnNlY3RQb2ludC5hcHBseU1hdHJpeDQobWF0cml4V29ybGQpO3ZhciBkaXN0YW5jZT1yYXljYXN0ZXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGludGVyc2VjdFBvaW50KTtpZihkaXN0YW5jZTxyYXljYXN0ZXIubmVhcnx8ZGlzdGFuY2U+cmF5Y2FzdGVyLmZhcilyZXR1cm47aW50ZXJzZWN0cy5wdXNoKHtkaXN0YW5jZTpkaXN0YW5jZSxkaXN0YW5jZVRvUmF5Ok1hdGguc3FydChyYXlQb2ludERpc3RhbmNlU3EpLHBvaW50OmludGVyc2VjdFBvaW50LmNsb25lKCksaW5kZXg6aW5kZXgsZmFjZTpudWxsLG9iamVjdDpvYmplY3R9KTt9fWlmKGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBpbmRleD1nZW9tZXRyeS5pbmRleDt2YXIgYXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO3ZhciBwb3NpdGlvbnM9YXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihpbmRleCE9PW51bGwpe3ZhciBpbmRpY2VzPWluZGV4LmFycmF5O2Zvcih2YXIgaT0wLGlsPWluZGljZXMubGVuZ3RoO2k8aWw7aSsrKXt2YXIgYT1pbmRpY2VzW2ldO3Bvc2l0aW9uLmZyb21BcnJheShwb3NpdGlvbnMsYSozKTt0ZXN0UG9pbnQocG9zaXRpb24sYSk7fX1lbHNle2Zvcih2YXIgaT0wLGw9cG9zaXRpb25zLmxlbmd0aC8zO2k8bDtpKyspe3Bvc2l0aW9uLmZyb21BcnJheShwb3NpdGlvbnMsaSozKTt0ZXN0UG9pbnQocG9zaXRpb24saSk7fX19ZWxzZXt2YXIgdmVydGljZXM9Z2VvbWV0cnkudmVydGljZXM7Zm9yKHZhciBpPTAsbD12ZXJ0aWNlcy5sZW5ndGg7aTxsO2krKyl7dGVzdFBvaW50KHZlcnRpY2VzW2ldLGkpO319fTt9KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKS5jb3B5KHRoaXMpO319KTsvLyBGaWxlOnNyYy9vYmplY3RzL0xpbmUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5MaW5lPWZ1bmN0aW9uKGdlb21ldHJ5LG1hdGVyaWFsLG1vZGUpe2lmKG1vZGU9PT0xKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpbmU6IHBhcmFtZXRlciBUSFJFRS5MaW5lUGllY2VzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIENyZWF0ZWQgVEhSRUUuTGluZVNlZ21lbnRzIGluc3RlYWQuJyk7cmV0dXJuIG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoZ2VvbWV0cnksbWF0ZXJpYWwpO31USFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT0nTGluZSc7dGhpcy5nZW9tZXRyeT1nZW9tZXRyeSE9PXVuZGVmaW5lZD9nZW9tZXRyeTpuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTt0aGlzLm1hdGVyaWFsPW1hdGVyaWFsIT09dW5kZWZpbmVkP21hdGVyaWFsOm5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6TWF0aC5yYW5kb20oKSoweGZmZmZmZn0pO307VEhSRUUuTGluZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkxpbmUscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBpbnZlcnNlTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7dmFyIHJheT1uZXcgVEhSRUUuUmF5KCk7dmFyIHNwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKCk7cmV0dXJuIGZ1bmN0aW9uIHJheWNhc3QocmF5Y2FzdGVyLGludGVyc2VjdHMpe3ZhciBwcmVjaXNpb249cmF5Y2FzdGVyLmxpbmVQcmVjaXNpb247dmFyIHByZWNpc2lvblNxPXByZWNpc2lvbipwcmVjaXNpb247dmFyIGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7dmFyIG1hdHJpeFdvcmxkPXRoaXMubWF0cml4V29ybGQ7Ly8gQ2hlY2tpbmcgYm91bmRpbmdTcGhlcmUgZGlzdGFuY2UgdG8gcmF5XG5pZihnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZT09PW51bGwpZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7c3BoZXJlLmNvcHkoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUpO3NwaGVyZS5hcHBseU1hdHJpeDQobWF0cml4V29ybGQpO2lmKHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0c1NwaGVyZShzcGhlcmUpPT09ZmFsc2UpcmV0dXJuOy8vXG5pbnZlcnNlTWF0cml4LmdldEludmVyc2UobWF0cml4V29ybGQpO3JheS5jb3B5KHJheWNhc3Rlci5yYXkpLmFwcGx5TWF0cml4NChpbnZlcnNlTWF0cml4KTt2YXIgdlN0YXJ0PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHZFbmQ9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgaW50ZXJTZWdtZW50PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIGludGVyUmF5PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHN0ZXA9dGhpcyBpbnN0YW5jZW9mIFRIUkVFLkxpbmVTZWdtZW50cz8yOjE7aWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIGluZGV4PWdlb21ldHJ5LmluZGV4O3ZhciBhdHRyaWJ1dGVzPWdlb21ldHJ5LmF0dHJpYnV0ZXM7dmFyIHBvc2l0aW9ucz1hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKGluZGV4IT09bnVsbCl7dmFyIGluZGljZXM9aW5kZXguYXJyYXk7Zm9yKHZhciBpPTAsbD1pbmRpY2VzLmxlbmd0aC0xO2k8bDtpKz1zdGVwKXt2YXIgYT1pbmRpY2VzW2ldO3ZhciBiPWluZGljZXNbaSsxXTt2U3RhcnQuZnJvbUFycmF5KHBvc2l0aW9ucyxhKjMpO3ZFbmQuZnJvbUFycmF5KHBvc2l0aW9ucyxiKjMpO3ZhciBkaXN0U3E9cmF5LmRpc3RhbmNlU3FUb1NlZ21lbnQodlN0YXJ0LHZFbmQsaW50ZXJSYXksaW50ZXJTZWdtZW50KTtpZihkaXN0U3E+cHJlY2lzaW9uU3EpY29udGludWU7aW50ZXJSYXkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpOy8vTW92ZSBiYWNrIHRvIHdvcmxkIHNwYWNlIGZvciBkaXN0YW5jZSBjYWxjdWxhdGlvblxudmFyIGRpc3RhbmNlPXJheWNhc3Rlci5yYXkub3JpZ2luLmRpc3RhbmNlVG8oaW50ZXJSYXkpO2lmKGRpc3RhbmNlPHJheWNhc3Rlci5uZWFyfHxkaXN0YW5jZT5yYXljYXN0ZXIuZmFyKWNvbnRpbnVlO2ludGVyc2VjdHMucHVzaCh7ZGlzdGFuY2U6ZGlzdGFuY2UsLy8gV2hhdCBkbyB3ZSB3YW50PyBpbnRlcnNlY3Rpb24gcG9pbnQgb24gdGhlIHJheSBvciBvbiB0aGUgc2VnbWVudD8/XG4vLyBwb2ludDogcmF5Y2FzdGVyLnJheS5hdCggZGlzdGFuY2UgKSxcbnBvaW50OmludGVyU2VnbWVudC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDppLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pO319ZWxzZXtmb3IodmFyIGk9MCxsPXBvc2l0aW9ucy5sZW5ndGgvMy0xO2k8bDtpKz1zdGVwKXt2U3RhcnQuZnJvbUFycmF5KHBvc2l0aW9ucywzKmkpO3ZFbmQuZnJvbUFycmF5KHBvc2l0aW9ucywzKmkrMyk7dmFyIGRpc3RTcT1yYXkuZGlzdGFuY2VTcVRvU2VnbWVudCh2U3RhcnQsdkVuZCxpbnRlclJheSxpbnRlclNlZ21lbnQpO2lmKGRpc3RTcT5wcmVjaXNpb25TcSljb250aW51ZTtpbnRlclJheS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7Ly9Nb3ZlIGJhY2sgdG8gd29ybGQgc3BhY2UgZm9yIGRpc3RhbmNlIGNhbGN1bGF0aW9uXG52YXIgZGlzdGFuY2U9cmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlclJheSk7aWYoZGlzdGFuY2U8cmF5Y2FzdGVyLm5lYXJ8fGRpc3RhbmNlPnJheWNhc3Rlci5mYXIpY29udGludWU7aW50ZXJzZWN0cy5wdXNoKHtkaXN0YW5jZTpkaXN0YW5jZSwvLyBXaGF0IGRvIHdlIHdhbnQ/IGludGVyc2VjdGlvbiBwb2ludCBvbiB0aGUgcmF5IG9yIG9uIHRoZSBzZWdtZW50Pz9cbi8vIHBvaW50OiByYXljYXN0ZXIucmF5LmF0KCBkaXN0YW5jZSApLFxucG9pbnQ6aW50ZXJTZWdtZW50LmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmksZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSk7fX19ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXt2YXIgdmVydGljZXM9Z2VvbWV0cnkudmVydGljZXM7dmFyIG5iVmVydGljZXM9dmVydGljZXMubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bmJWZXJ0aWNlcy0xO2krPXN0ZXApe3ZhciBkaXN0U3E9cmF5LmRpc3RhbmNlU3FUb1NlZ21lbnQodmVydGljZXNbaV0sdmVydGljZXNbaSsxXSxpbnRlclJheSxpbnRlclNlZ21lbnQpO2lmKGRpc3RTcT5wcmVjaXNpb25TcSljb250aW51ZTtpbnRlclJheS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7Ly9Nb3ZlIGJhY2sgdG8gd29ybGQgc3BhY2UgZm9yIGRpc3RhbmNlIGNhbGN1bGF0aW9uXG52YXIgZGlzdGFuY2U9cmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlclJheSk7aWYoZGlzdGFuY2U8cmF5Y2FzdGVyLm5lYXJ8fGRpc3RhbmNlPnJheWNhc3Rlci5mYXIpY29udGludWU7aW50ZXJzZWN0cy5wdXNoKHtkaXN0YW5jZTpkaXN0YW5jZSwvLyBXaGF0IGRvIHdlIHdhbnQ/IGludGVyc2VjdGlvbiBwb2ludCBvbiB0aGUgcmF5IG9yIG9uIHRoZSBzZWdtZW50Pz9cbi8vIHBvaW50OiByYXljYXN0ZXIucmF5LmF0KCBkaXN0YW5jZSApLFxucG9pbnQ6aW50ZXJTZWdtZW50LmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmksZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSk7fX19O30oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpLmNvcHkodGhpcyk7fX0pOy8vIEZpbGU6c3JjL29iamVjdHMvTGluZVNlZ21lbnRzLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuTGluZVNlZ21lbnRzPWZ1bmN0aW9uKGdlb21ldHJ5LG1hdGVyaWFsKXtUSFJFRS5MaW5lLmNhbGwodGhpcyxnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy50eXBlPSdMaW5lU2VnbWVudHMnO307VEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MaW5lU2VnbWVudHN9KTsvLyBGaWxlOnNyYy9vYmplY3RzL01lc2guanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGpvbm9icjEgLyBodHRwOi8vam9ub2JyMS5jb20vXHJcbiAqL1RIUkVFLk1lc2g9ZnVuY3Rpb24oZ2VvbWV0cnksbWF0ZXJpYWwpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdNZXNoJzt0aGlzLmdlb21ldHJ5PWdlb21ldHJ5IT09dW5kZWZpbmVkP2dlb21ldHJ5Om5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO3RoaXMubWF0ZXJpYWw9bWF0ZXJpYWwhPT11bmRlZmluZWQ/bWF0ZXJpYWw6bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjpNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmfSk7dGhpcy5kcmF3TW9kZT1USFJFRS5UcmlhbmdsZXNEcmF3TW9kZTt0aGlzLnVwZGF0ZU1vcnBoVGFyZ2V0cygpO307VEhSRUUuTWVzaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLk1lc2gsc2V0RHJhd01vZGU6ZnVuY3Rpb24odmFsdWUpe3RoaXMuZHJhd01vZGU9dmFsdWU7fSx1cGRhdGVNb3JwaFRhcmdldHM6ZnVuY3Rpb24oKXtpZih0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cyE9PXVuZGVmaW5lZCYmdGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoPjApe3RoaXMubW9ycGhUYXJnZXRCYXNlPS0xO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2Zvcih2YXIgbT0wLG1sPXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDttPG1sO20rKyl7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVt0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1ttXS5uYW1lXT1tO319fSxnZXRNb3JwaFRhcmdldEluZGV4QnlOYW1lOmZ1bmN0aW9uKG5hbWUpe2lmKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25hbWVdIT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbbmFtZV07fWNvbnNvbGUud2FybignVEhSRUUuTWVzaC5nZXRNb3JwaFRhcmdldEluZGV4QnlOYW1lOiBtb3JwaCB0YXJnZXQgJytuYW1lKycgZG9lcyBub3QgZXhpc3QuIFJldHVybmluZyAwLicpO3JldHVybiAwO30scmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBpbnZlcnNlTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7dmFyIHJheT1uZXcgVEhSRUUuUmF5KCk7dmFyIHNwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKCk7dmFyIHZBPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHZCPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHZDPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHRlbXBBPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHRlbXBCPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHRlbXBDPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHV2QT1uZXcgVEhSRUUuVmVjdG9yMigpO3ZhciB1dkI9bmV3IFRIUkVFLlZlY3RvcjIoKTt2YXIgdXZDPW5ldyBUSFJFRS5WZWN0b3IyKCk7dmFyIGJhcnljb29yZD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBpbnRlcnNlY3Rpb25Qb2ludD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBpbnRlcnNlY3Rpb25Qb2ludFdvcmxkPW5ldyBUSFJFRS5WZWN0b3IzKCk7ZnVuY3Rpb24gdXZJbnRlcnNlY3Rpb24ocG9pbnQscDEscDIscDMsdXYxLHV2Mix1djMpe1RIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChwb2ludCxwMSxwMixwMyxiYXJ5Y29vcmQpO3V2MS5tdWx0aXBseVNjYWxhcihiYXJ5Y29vcmQueCk7dXYyLm11bHRpcGx5U2NhbGFyKGJhcnljb29yZC55KTt1djMubXVsdGlwbHlTY2FsYXIoYmFyeWNvb3JkLnopO3V2MS5hZGQodXYyKS5hZGQodXYzKTtyZXR1cm4gdXYxLmNsb25lKCk7fWZ1bmN0aW9uIGNoZWNrSW50ZXJzZWN0aW9uKG9iamVjdCxyYXljYXN0ZXIscmF5LHBBLHBCLHBDLHBvaW50KXt2YXIgaW50ZXJzZWN0O3ZhciBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYobWF0ZXJpYWwuc2lkZT09PVRIUkVFLkJhY2tTaWRlKXtpbnRlcnNlY3Q9cmF5LmludGVyc2VjdFRyaWFuZ2xlKHBDLHBCLHBBLHRydWUscG9pbnQpO31lbHNle2ludGVyc2VjdD1yYXkuaW50ZXJzZWN0VHJpYW5nbGUocEEscEIscEMsbWF0ZXJpYWwuc2lkZSE9PVRIUkVFLkRvdWJsZVNpZGUscG9pbnQpO31pZihpbnRlcnNlY3Q9PT1udWxsKXJldHVybiBudWxsO2ludGVyc2VjdGlvblBvaW50V29ybGQuY29weShwb2ludCk7aW50ZXJzZWN0aW9uUG9pbnRXb3JsZC5hcHBseU1hdHJpeDQob2JqZWN0Lm1hdHJpeFdvcmxkKTt2YXIgZGlzdGFuY2U9cmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlcnNlY3Rpb25Qb2ludFdvcmxkKTtpZihkaXN0YW5jZTxyYXljYXN0ZXIubmVhcnx8ZGlzdGFuY2U+cmF5Y2FzdGVyLmZhcilyZXR1cm4gbnVsbDtyZXR1cm57ZGlzdGFuY2U6ZGlzdGFuY2UscG9pbnQ6aW50ZXJzZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpLG9iamVjdDpvYmplY3R9O31mdW5jdGlvbiBjaGVja0J1ZmZlckdlb21ldHJ5SW50ZXJzZWN0aW9uKG9iamVjdCxyYXljYXN0ZXIscmF5LHBvc2l0aW9ucyx1dnMsYSxiLGMpe3ZBLmZyb21BcnJheShwb3NpdGlvbnMsYSozKTt2Qi5mcm9tQXJyYXkocG9zaXRpb25zLGIqMyk7dkMuZnJvbUFycmF5KHBvc2l0aW9ucyxjKjMpO3ZhciBpbnRlcnNlY3Rpb249Y2hlY2tJbnRlcnNlY3Rpb24ob2JqZWN0LHJheWNhc3RlcixyYXksdkEsdkIsdkMsaW50ZXJzZWN0aW9uUG9pbnQpO2lmKGludGVyc2VjdGlvbil7aWYodXZzKXt1dkEuZnJvbUFycmF5KHV2cyxhKjIpO3V2Qi5mcm9tQXJyYXkodXZzLGIqMik7dXZDLmZyb21BcnJheSh1dnMsYyoyKTtpbnRlcnNlY3Rpb24udXY9dXZJbnRlcnNlY3Rpb24oaW50ZXJzZWN0aW9uUG9pbnQsdkEsdkIsdkMsdXZBLHV2Qix1dkMpO31pbnRlcnNlY3Rpb24uZmFjZT1uZXcgVEhSRUUuRmFjZTMoYSxiLGMsVEhSRUUuVHJpYW5nbGUubm9ybWFsKHZBLHZCLHZDKSk7aW50ZXJzZWN0aW9uLmZhY2VJbmRleD1hO31yZXR1cm4gaW50ZXJzZWN0aW9uO31yZXR1cm4gZnVuY3Rpb24gcmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7dmFyIGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7dmFyIG1hdGVyaWFsPXRoaXMubWF0ZXJpYWw7dmFyIG1hdHJpeFdvcmxkPXRoaXMubWF0cml4V29ybGQ7aWYobWF0ZXJpYWw9PT11bmRlZmluZWQpcmV0dXJuOy8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlIGRpc3RhbmNlIHRvIHJheVxuaWYoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmU9PT1udWxsKWdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3NwaGVyZS5jb3B5KGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlKTtzcGhlcmUuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTtpZihyYXljYXN0ZXIucmF5LmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKT09PWZhbHNlKXJldHVybjsvL1xuaW52ZXJzZU1hdHJpeC5nZXRJbnZlcnNlKG1hdHJpeFdvcmxkKTtyYXkuY29weShyYXljYXN0ZXIucmF5KS5hcHBseU1hdHJpeDQoaW52ZXJzZU1hdHJpeCk7Ly8gQ2hlY2sgYm91bmRpbmdCb3ggYmVmb3JlIGNvbnRpbnVpbmdcbmlmKGdlb21ldHJ5LmJvdW5kaW5nQm94IT09bnVsbCl7aWYocmF5LmludGVyc2VjdHNCb3goZ2VvbWV0cnkuYm91bmRpbmdCb3gpPT09ZmFsc2UpcmV0dXJuO312YXIgdXZzLGludGVyc2VjdGlvbjtpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgYSxiLGM7dmFyIGluZGV4PWdlb21ldHJ5LmluZGV4O3ZhciBhdHRyaWJ1dGVzPWdlb21ldHJ5LmF0dHJpYnV0ZXM7dmFyIHBvc2l0aW9ucz1hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKGF0dHJpYnV0ZXMudXYhPT11bmRlZmluZWQpe3V2cz1hdHRyaWJ1dGVzLnV2LmFycmF5O31pZihpbmRleCE9PW51bGwpe3ZhciBpbmRpY2VzPWluZGV4LmFycmF5O2Zvcih2YXIgaT0wLGw9aW5kaWNlcy5sZW5ndGg7aTxsO2krPTMpe2E9aW5kaWNlc1tpXTtiPWluZGljZXNbaSsxXTtjPWluZGljZXNbaSsyXTtpbnRlcnNlY3Rpb249Y2hlY2tCdWZmZXJHZW9tZXRyeUludGVyc2VjdGlvbih0aGlzLHJheWNhc3RlcixyYXkscG9zaXRpb25zLHV2cyxhLGIsYyk7aWYoaW50ZXJzZWN0aW9uKXtpbnRlcnNlY3Rpb24uZmFjZUluZGV4PU1hdGguZmxvb3IoaS8zKTsvLyB0cmlhbmdsZSBudW1iZXIgaW4gaW5kaWNlcyBidWZmZXIgc2VtYW50aWNzXG5pbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX1lbHNle2Zvcih2YXIgaT0wLGw9cG9zaXRpb25zLmxlbmd0aDtpPGw7aSs9OSl7YT1pLzM7Yj1hKzE7Yz1hKzI7aW50ZXJzZWN0aW9uPWNoZWNrQnVmZmVyR2VvbWV0cnlJbnRlcnNlY3Rpb24odGhpcyxyYXljYXN0ZXIscmF5LHBvc2l0aW9ucyx1dnMsYSxiLGMpO2lmKGludGVyc2VjdGlvbil7aW50ZXJzZWN0aW9uLmluZGV4PWE7Ly8gdHJpYW5nbGUgbnVtYmVyIGluIHBvc2l0aW9ucyBidWZmZXIgc2VtYW50aWNzXG5pbnRlcnNlY3RzLnB1c2goaW50ZXJzZWN0aW9uKTt9fX19ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXt2YXIgZnZBLGZ2QixmdkM7dmFyIGlzRmFjZU1hdGVyaWFsPW1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTXVsdGlNYXRlcmlhbDt2YXIgbWF0ZXJpYWxzPWlzRmFjZU1hdGVyaWFsPT09dHJ1ZT9tYXRlcmlhbC5tYXRlcmlhbHM6bnVsbDt2YXIgdmVydGljZXM9Z2VvbWV0cnkudmVydGljZXM7dmFyIGZhY2VzPWdlb21ldHJ5LmZhY2VzO3ZhciBmYWNlVmVydGV4VXZzPWdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMF07aWYoZmFjZVZlcnRleFV2cy5sZW5ndGg+MCl1dnM9ZmFjZVZlcnRleFV2cztmb3IodmFyIGY9MCxmbD1mYWNlcy5sZW5ndGg7ZjxmbDtmKyspe3ZhciBmYWNlPWZhY2VzW2ZdO3ZhciBmYWNlTWF0ZXJpYWw9aXNGYWNlTWF0ZXJpYWw9PT10cnVlP21hdGVyaWFsc1tmYWNlLm1hdGVyaWFsSW5kZXhdOm1hdGVyaWFsO2lmKGZhY2VNYXRlcmlhbD09PXVuZGVmaW5lZCljb250aW51ZTtmdkE9dmVydGljZXNbZmFjZS5hXTtmdkI9dmVydGljZXNbZmFjZS5iXTtmdkM9dmVydGljZXNbZmFjZS5jXTtpZihmYWNlTWF0ZXJpYWwubW9ycGhUYXJnZXRzPT09dHJ1ZSl7dmFyIG1vcnBoVGFyZ2V0cz1nZW9tZXRyeS5tb3JwaFRhcmdldHM7dmFyIG1vcnBoSW5mbHVlbmNlcz10aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlczt2QS5zZXQoMCwwLDApO3ZCLnNldCgwLDAsMCk7dkMuc2V0KDAsMCwwKTtmb3IodmFyIHQ9MCx0bD1tb3JwaFRhcmdldHMubGVuZ3RoO3Q8dGw7dCsrKXt2YXIgaW5mbHVlbmNlPW1vcnBoSW5mbHVlbmNlc1t0XTtpZihpbmZsdWVuY2U9PT0wKWNvbnRpbnVlO3ZhciB0YXJnZXRzPW1vcnBoVGFyZ2V0c1t0XS52ZXJ0aWNlczt2QS5hZGRTY2FsZWRWZWN0b3IodGVtcEEuc3ViVmVjdG9ycyh0YXJnZXRzW2ZhY2UuYV0sZnZBKSxpbmZsdWVuY2UpO3ZCLmFkZFNjYWxlZFZlY3Rvcih0ZW1wQi5zdWJWZWN0b3JzKHRhcmdldHNbZmFjZS5iXSxmdkIpLGluZmx1ZW5jZSk7dkMuYWRkU2NhbGVkVmVjdG9yKHRlbXBDLnN1YlZlY3RvcnModGFyZ2V0c1tmYWNlLmNdLGZ2QyksaW5mbHVlbmNlKTt9dkEuYWRkKGZ2QSk7dkIuYWRkKGZ2Qik7dkMuYWRkKGZ2Qyk7ZnZBPXZBO2Z2Qj12QjtmdkM9dkM7fWludGVyc2VjdGlvbj1jaGVja0ludGVyc2VjdGlvbih0aGlzLHJheWNhc3RlcixyYXksZnZBLGZ2QixmdkMsaW50ZXJzZWN0aW9uUG9pbnQpO2lmKGludGVyc2VjdGlvbil7aWYodXZzKXt2YXIgdXZzX2Y9dXZzW2ZdO3V2QS5jb3B5KHV2c19mWzBdKTt1dkIuY29weSh1dnNfZlsxXSk7dXZDLmNvcHkodXZzX2ZbMl0pO2ludGVyc2VjdGlvbi51dj11dkludGVyc2VjdGlvbihpbnRlcnNlY3Rpb25Qb2ludCxmdkEsZnZCLGZ2Qyx1dkEsdXZCLHV2Qyk7fWludGVyc2VjdGlvbi5mYWNlPWZhY2U7aW50ZXJzZWN0aW9uLmZhY2VJbmRleD1mO2ludGVyc2VjdHMucHVzaChpbnRlcnNlY3Rpb24pO319fX07fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKTt9fSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9Cb25lLmpzXG4vKipcclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBpa2VyciAvIGh0dHA6Ly92ZXJvbGQuY29tXHJcbiAqL1RIUkVFLkJvbmU9ZnVuY3Rpb24oc2tpbil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0JvbmUnO3RoaXMuc2tpbj1za2luO307VEhSRUUuQm9uZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkJvbmUsY29weTpmdW5jdGlvbihzb3VyY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMuc2tpbj1zb3VyY2Uuc2tpbjtyZXR1cm4gdGhpczt9fSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9Ta2VsZXRvbi5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgbWljaGFlbCBndWVycmVybyAvIGh0dHA6Ly9yZWFsaXR5bWVsdGRvd24uY29tXHJcbiAqIEBhdXRob3IgaWtlcnIgLyBodHRwOi8vdmVyb2xkLmNvbVxyXG4gKi9USFJFRS5Ta2VsZXRvbj1mdW5jdGlvbihib25lcyxib25lSW52ZXJzZXMsdXNlVmVydGV4VGV4dHVyZSl7dGhpcy51c2VWZXJ0ZXhUZXh0dXJlPXVzZVZlcnRleFRleHR1cmUhPT11bmRlZmluZWQ/dXNlVmVydGV4VGV4dHVyZTp0cnVlO3RoaXMuaWRlbnRpdHlNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQoKTsvLyBjb3B5IHRoZSBib25lIGFycmF5XG5ib25lcz1ib25lc3x8W107dGhpcy5ib25lcz1ib25lcy5zbGljZSgwKTsvLyBjcmVhdGUgYSBib25lIHRleHR1cmUgb3IgYW4gYXJyYXkgb2YgZmxvYXRzXG5pZih0aGlzLnVzZVZlcnRleFRleHR1cmUpey8vIGxheW91dCAoMSBtYXRyaXggPSA0IHBpeGVscylcbi8vICAgICAgUkdCQSBSR0JBIFJHQkEgUkdCQSAoPT4gY29sdW1uMSwgY29sdW1uMiwgY29sdW1uMywgY29sdW1uNClcbi8vICB3aXRoICA4eDggIHBpeGVsIHRleHR1cmUgbWF4ICAgMTYgYm9uZXMgKiA0IHBpeGVscyA9ICAoOCAqIDgpXG4vLyAgICAgICAxNngxNiBwaXhlbCB0ZXh0dXJlIG1heCAgIDY0IGJvbmVzICogNCBwaXhlbHMgPSAoMTYgKiAxNilcbi8vICAgICAgIDMyeDMyIHBpeGVsIHRleHR1cmUgbWF4ICAyNTYgYm9uZXMgKiA0IHBpeGVscyA9ICgzMiAqIDMyKVxuLy8gICAgICAgNjR4NjQgcGl4ZWwgdGV4dHVyZSBtYXggMTAyNCBib25lcyAqIDQgcGl4ZWxzID0gKDY0ICogNjQpXG52YXIgc2l6ZT1NYXRoLnNxcnQodGhpcy5ib25lcy5sZW5ndGgqNCk7Ly8gNCBwaXhlbHMgbmVlZGVkIGZvciAxIG1hdHJpeFxuc2l6ZT1USFJFRS5NYXRoLm5leHRQb3dlck9mVHdvKE1hdGguY2VpbChzaXplKSk7c2l6ZT1NYXRoLm1heChzaXplLDQpO3RoaXMuYm9uZVRleHR1cmVXaWR0aD1zaXplO3RoaXMuYm9uZVRleHR1cmVIZWlnaHQ9c2l6ZTt0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYm9uZVRleHR1cmVXaWR0aCp0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0KjQpOy8vIDQgZmxvYXRzIHBlciBSR0JBIHBpeGVsXG50aGlzLmJvbmVUZXh0dXJlPW5ldyBUSFJFRS5EYXRhVGV4dHVyZSh0aGlzLmJvbmVNYXRyaWNlcyx0aGlzLmJvbmVUZXh0dXJlV2lkdGgsdGhpcy5ib25lVGV4dHVyZUhlaWdodCxUSFJFRS5SR0JBRm9ybWF0LFRIUkVFLkZsb2F0VHlwZSk7fWVsc2V7dGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSgxNip0aGlzLmJvbmVzLmxlbmd0aCk7fS8vIHVzZSB0aGUgc3VwcGxpZWQgYm9uZSBpbnZlcnNlcyBvciBjYWxjdWxhdGUgdGhlIGludmVyc2VzXG5pZihib25lSW52ZXJzZXM9PT11bmRlZmluZWQpe3RoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTt9ZWxzZXtpZih0aGlzLmJvbmVzLmxlbmd0aD09PWJvbmVJbnZlcnNlcy5sZW5ndGgpe3RoaXMuYm9uZUludmVyc2VzPWJvbmVJbnZlcnNlcy5zbGljZSgwKTt9ZWxzZXtjb25zb2xlLndhcm4oJ1RIUkVFLlNrZWxldG9uIGJvbkludmVyc2VzIGlzIHRoZSB3cm9uZyBsZW5ndGguJyk7dGhpcy5ib25lSW52ZXJzZXM9W107Zm9yKHZhciBiPTAsYmw9dGhpcy5ib25lcy5sZW5ndGg7YjxibDtiKyspe3RoaXMuYm9uZUludmVyc2VzLnB1c2gobmV3IFRIUkVFLk1hdHJpeDQoKSk7fX19fTtPYmplY3QuYXNzaWduKFRIUkVFLlNrZWxldG9uLnByb3RvdHlwZSx7Y2FsY3VsYXRlSW52ZXJzZXM6ZnVuY3Rpb24oKXt0aGlzLmJvbmVJbnZlcnNlcz1bXTtmb3IodmFyIGI9MCxibD10aGlzLmJvbmVzLmxlbmd0aDtiPGJsO2IrKyl7dmFyIGludmVyc2U9bmV3IFRIUkVFLk1hdHJpeDQoKTtpZih0aGlzLmJvbmVzW2JdKXtpbnZlcnNlLmdldEludmVyc2UodGhpcy5ib25lc1tiXS5tYXRyaXhXb3JsZCk7fXRoaXMuYm9uZUludmVyc2VzLnB1c2goaW52ZXJzZSk7fX0scG9zZTpmdW5jdGlvbigpe3ZhciBib25lOy8vIHJlY292ZXIgdGhlIGJpbmQtdGltZSB3b3JsZCBtYXRyaWNlc1xuZm9yKHZhciBiPTAsYmw9dGhpcy5ib25lcy5sZW5ndGg7YjxibDtiKyspe2JvbmU9dGhpcy5ib25lc1tiXTtpZihib25lKXtib25lLm1hdHJpeFdvcmxkLmdldEludmVyc2UodGhpcy5ib25lSW52ZXJzZXNbYl0pO319Ly8gY29tcHV0ZSB0aGUgbG9jYWwgbWF0cmljZXMsIHBvc2l0aW9ucywgcm90YXRpb25zIGFuZCBzY2FsZXNcbmZvcih2YXIgYj0wLGJsPXRoaXMuYm9uZXMubGVuZ3RoO2I8Ymw7YisrKXtib25lPXRoaXMuYm9uZXNbYl07aWYoYm9uZSl7aWYoYm9uZS5wYXJlbnQpe2JvbmUubWF0cml4LmdldEludmVyc2UoYm9uZS5wYXJlbnQubWF0cml4V29ybGQpO2JvbmUubWF0cml4Lm11bHRpcGx5KGJvbmUubWF0cml4V29ybGQpO31lbHNle2JvbmUubWF0cml4LmNvcHkoYm9uZS5tYXRyaXhXb3JsZCk7fWJvbmUubWF0cml4LmRlY29tcG9zZShib25lLnBvc2l0aW9uLGJvbmUucXVhdGVybmlvbixib25lLnNjYWxlKTt9fX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIG9mZnNldE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCgpO3JldHVybiBmdW5jdGlvbiB1cGRhdGUoKXsvLyBmbGF0dGVuIGJvbmUgbWF0cmljZXMgdG8gYXJyYXlcbmZvcih2YXIgYj0wLGJsPXRoaXMuYm9uZXMubGVuZ3RoO2I8Ymw7YisrKXsvLyBjb21wdXRlIHRoZSBvZmZzZXQgYmV0d2VlbiB0aGUgY3VycmVudCBhbmQgdGhlIG9yaWdpbmFsIHRyYW5zZm9ybVxudmFyIG1hdHJpeD10aGlzLmJvbmVzW2JdP3RoaXMuYm9uZXNbYl0ubWF0cml4V29ybGQ6dGhpcy5pZGVudGl0eU1hdHJpeDtvZmZzZXRNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsdGhpcy5ib25lSW52ZXJzZXNbYl0pO29mZnNldE1hdHJpeC50b0FycmF5KHRoaXMuYm9uZU1hdHJpY2VzLGIqMTYpO31pZih0aGlzLnVzZVZlcnRleFRleHR1cmUpe3RoaXMuYm9uZVRleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTt9fTt9KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlNrZWxldG9uKHRoaXMuYm9uZXMsdGhpcy5ib25lSW52ZXJzZXMsdGhpcy51c2VWZXJ0ZXhUZXh0dXJlKTt9fSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9Ta2lubmVkTWVzaC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbWlrYWVsIGVtdGluZ2VyIC8gaHR0cDovL2dvbW8uc2UvXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgaWtlcnIgLyBodHRwOi8vdmVyb2xkLmNvbVxyXG4gKi9USFJFRS5Ta2lubmVkTWVzaD1mdW5jdGlvbihnZW9tZXRyeSxtYXRlcmlhbCx1c2VWZXJ0ZXhUZXh0dXJlKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy50eXBlPSdTa2lubmVkTWVzaCc7dGhpcy5iaW5kTW9kZT1cImF0dGFjaGVkXCI7dGhpcy5iaW5kTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7dGhpcy5iaW5kTWF0cml4SW52ZXJzZT1uZXcgVEhSRUUuTWF0cml4NCgpOy8vIGluaXQgYm9uZXNcbi8vIFRPRE86IHJlbW92ZSBib25lIGNyZWF0aW9uIGFzIHRoZXJlIGlzIG5vIHJlYXNvbiAob3RoZXIgdGhhblxuLy8gY29udmVuaWVuY2UpIGZvciBUSFJFRS5Ta2lubmVkTWVzaCB0byBkbyB0aGlzLlxudmFyIGJvbmVzPVtdO2lmKHRoaXMuZ2VvbWV0cnkmJnRoaXMuZ2VvbWV0cnkuYm9uZXMhPT11bmRlZmluZWQpe3ZhciBib25lLGdib25lO2Zvcih2YXIgYj0wLGJsPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2I8Ymw7KytiKXtnYm9uZT10aGlzLmdlb21ldHJ5LmJvbmVzW2JdO2JvbmU9bmV3IFRIUkVFLkJvbmUodGhpcyk7Ym9uZXMucHVzaChib25lKTtib25lLm5hbWU9Z2JvbmUubmFtZTtib25lLnBvc2l0aW9uLmZyb21BcnJheShnYm9uZS5wb3MpO2JvbmUucXVhdGVybmlvbi5mcm9tQXJyYXkoZ2JvbmUucm90cSk7aWYoZ2JvbmUuc2NsIT09dW5kZWZpbmVkKWJvbmUuc2NhbGUuZnJvbUFycmF5KGdib25lLnNjbCk7fWZvcih2YXIgYj0wLGJsPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2I8Ymw7KytiKXtnYm9uZT10aGlzLmdlb21ldHJ5LmJvbmVzW2JdO2lmKGdib25lLnBhcmVudCE9PS0xJiZnYm9uZS5wYXJlbnQhPT1udWxsJiZib25lc1tnYm9uZS5wYXJlbnRdIT09dW5kZWZpbmVkKXtib25lc1tnYm9uZS5wYXJlbnRdLmFkZChib25lc1tiXSk7fWVsc2V7dGhpcy5hZGQoYm9uZXNbYl0pO319fXRoaXMubm9ybWFsaXplU2tpbldlaWdodHMoKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3RoaXMuYmluZChuZXcgVEhSRUUuU2tlbGV0b24oYm9uZXMsdW5kZWZpbmVkLHVzZVZlcnRleFRleHR1cmUpLHRoaXMubWF0cml4V29ybGQpO307VEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlNraW5uZWRNZXNoLGJpbmQ6ZnVuY3Rpb24oc2tlbGV0b24sYmluZE1hdHJpeCl7dGhpcy5za2VsZXRvbj1za2VsZXRvbjtpZihiaW5kTWF0cml4PT09dW5kZWZpbmVkKXt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3RoaXMuc2tlbGV0b24uY2FsY3VsYXRlSW52ZXJzZXMoKTtiaW5kTWF0cml4PXRoaXMubWF0cml4V29ybGQ7fXRoaXMuYmluZE1hdHJpeC5jb3B5KGJpbmRNYXRyaXgpO3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZShiaW5kTWF0cml4KTt9LHBvc2U6ZnVuY3Rpb24oKXt0aGlzLnNrZWxldG9uLnBvc2UoKTt9LG5vcm1hbGl6ZVNraW5XZWlnaHRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXtmb3IodmFyIGk9MDtpPHRoaXMuZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoO2krKyl7dmFyIHN3PXRoaXMuZ2VvbWV0cnkuc2tpbldlaWdodHNbaV07dmFyIHNjYWxlPTEuMC9zdy5sZW5ndGhNYW5oYXR0YW4oKTtpZihzY2FsZSE9PUluZmluaXR5KXtzdy5tdWx0aXBseVNjYWxhcihzY2FsZSk7fWVsc2V7c3cuc2V0KDEsMCwwLDApOy8vIGRvIHNvbWV0aGluZyByZWFzb25hYmxlXG59fX1lbHNlIGlmKHRoaXMuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIHZlYz1uZXcgVEhSRUUuVmVjdG9yNCgpO3ZhciBza2luV2VpZ2h0PXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0O2Zvcih2YXIgaT0wO2k8c2tpbldlaWdodC5jb3VudDtpKyspe3ZlYy54PXNraW5XZWlnaHQuZ2V0WChpKTt2ZWMueT1za2luV2VpZ2h0LmdldFkoaSk7dmVjLno9c2tpbldlaWdodC5nZXRaKGkpO3ZlYy53PXNraW5XZWlnaHQuZ2V0VyhpKTt2YXIgc2NhbGU9MS4wL3ZlYy5sZW5ndGhNYW5oYXR0YW4oKTtpZihzY2FsZSE9PUluZmluaXR5KXt2ZWMubXVsdGlwbHlTY2FsYXIoc2NhbGUpO31lbHNle3ZlYy5zZXQoMSwwLDAsMCk7Ly8gZG8gc29tZXRoaW5nIHJlYXNvbmFibGVcbn1za2luV2VpZ2h0LnNldFhZWlcoaSx2ZWMueCx2ZWMueSx2ZWMueix2ZWMudyk7fX19LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGZvcmNlKXtUSFJFRS5NZXNoLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsdHJ1ZSk7aWYodGhpcy5iaW5kTW9kZT09PVwiYXR0YWNoZWRcIil7dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpO31lbHNlIGlmKHRoaXMuYmluZE1vZGU9PT1cImRldGFjaGVkXCIpe3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLmJpbmRNYXRyaXgpO31lbHNle2NvbnNvbGUud2FybignVEhSRUUuU2tpbm5lZE1lc2ggdW5yZWNvZ25pemVkIGJpbmRNb2RlOiAnK3RoaXMuYmluZE1vZGUpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCx0aGlzLnVzZVZlcnRleFRleHR1cmUpLmNvcHkodGhpcyk7fX0pOy8vIEZpbGU6c3JjL29iamVjdHMvTE9ELmpzXG4vKipcclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuTE9EPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0xPRCc7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7bGV2ZWxzOntlbnVtZXJhYmxlOnRydWUsdmFsdWU6W119fSk7fTtUSFJFRS5MT0QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MT0QsY29weTpmdW5jdGlvbihzb3VyY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UsZmFsc2UpO3ZhciBsZXZlbHM9c291cmNlLmxldmVscztmb3IodmFyIGk9MCxsPWxldmVscy5sZW5ndGg7aTxsO2krKyl7dmFyIGxldmVsPWxldmVsc1tpXTt0aGlzLmFkZExldmVsKGxldmVsLm9iamVjdC5jbG9uZSgpLGxldmVsLmRpc3RhbmNlKTt9cmV0dXJuIHRoaXM7fSxhZGRMZXZlbDpmdW5jdGlvbihvYmplY3QsZGlzdGFuY2Upe2lmKGRpc3RhbmNlPT09dW5kZWZpbmVkKWRpc3RhbmNlPTA7ZGlzdGFuY2U9TWF0aC5hYnMoZGlzdGFuY2UpO3ZhciBsZXZlbHM9dGhpcy5sZXZlbHM7Zm9yKHZhciBsPTA7bDxsZXZlbHMubGVuZ3RoO2wrKyl7aWYoZGlzdGFuY2U8bGV2ZWxzW2xdLmRpc3RhbmNlKXticmVhazt9fWxldmVscy5zcGxpY2UobCwwLHtkaXN0YW5jZTpkaXN0YW5jZSxvYmplY3Q6b2JqZWN0fSk7dGhpcy5hZGQob2JqZWN0KTt9LGdldE9iamVjdEZvckRpc3RhbmNlOmZ1bmN0aW9uKGRpc3RhbmNlKXt2YXIgbGV2ZWxzPXRoaXMubGV2ZWxzO2Zvcih2YXIgaT0xLGw9bGV2ZWxzLmxlbmd0aDtpPGw7aSsrKXtpZihkaXN0YW5jZTxsZXZlbHNbaV0uZGlzdGFuY2Upe2JyZWFrO319cmV0dXJuIGxldmVsc1tpLTFdLm9iamVjdDt9LHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgbWF0cml4UG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gcmF5Y2FzdChyYXljYXN0ZXIsaW50ZXJzZWN0cyl7bWF0cml4UG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3ZhciBkaXN0YW5jZT1yYXljYXN0ZXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKG1hdHJpeFBvc2l0aW9uKTt0aGlzLmdldE9iamVjdEZvckRpc3RhbmNlKGRpc3RhbmNlKS5yYXljYXN0KHJheWNhc3RlcixpbnRlcnNlY3RzKTt9O30oKSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjI9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKGNhbWVyYSl7dmFyIGxldmVscz10aGlzLmxldmVscztpZihsZXZlbHMubGVuZ3RoPjEpe3YxLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpO3YyLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt2YXIgZGlzdGFuY2U9djEuZGlzdGFuY2VUbyh2Mik7bGV2ZWxzWzBdLm9iamVjdC52aXNpYmxlPXRydWU7Zm9yKHZhciBpPTEsbD1sZXZlbHMubGVuZ3RoO2k8bDtpKyspe2lmKGRpc3RhbmNlPj1sZXZlbHNbaV0uZGlzdGFuY2Upe2xldmVsc1tpLTFdLm9iamVjdC52aXNpYmxlPWZhbHNlO2xldmVsc1tpXS5vYmplY3QudmlzaWJsZT10cnVlO31lbHNle2JyZWFrO319Zm9yKDtpPGw7aSsrKXtsZXZlbHNbaV0ub2JqZWN0LnZpc2libGU9ZmFsc2U7fX19O30oKSx0b0pTT046ZnVuY3Rpb24obWV0YSl7dmFyIGRhdGE9VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsbWV0YSk7ZGF0YS5vYmplY3QubGV2ZWxzPVtdO3ZhciBsZXZlbHM9dGhpcy5sZXZlbHM7Zm9yKHZhciBpPTAsbD1sZXZlbHMubGVuZ3RoO2k8bDtpKyspe3ZhciBsZXZlbD1sZXZlbHNbaV07ZGF0YS5vYmplY3QubGV2ZWxzLnB1c2goe29iamVjdDpsZXZlbC5vYmplY3QudXVpZCxkaXN0YW5jZTpsZXZlbC5kaXN0YW5jZX0pO31yZXR1cm4gZGF0YTt9fSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9TcHJpdGUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5TcHJpdGU9ZnVuY3Rpb24obWF0ZXJpYWwpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPSdTcHJpdGUnO3RoaXMubWF0ZXJpYWw9bWF0ZXJpYWwhPT11bmRlZmluZWQ/bWF0ZXJpYWw6bmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsKCk7fTtUSFJFRS5TcHJpdGUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TcHJpdGUscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBtYXRyaXhQb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbiByYXljYXN0KHJheWNhc3RlcixpbnRlcnNlY3RzKXttYXRyaXhQb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7dmFyIGRpc3RhbmNlU3E9cmF5Y2FzdGVyLnJheS5kaXN0YW5jZVNxVG9Qb2ludChtYXRyaXhQb3NpdGlvbik7dmFyIGd1ZXNzU2l6ZVNxPXRoaXMuc2NhbGUueCp0aGlzLnNjYWxlLnkvNDtpZihkaXN0YW5jZVNxPmd1ZXNzU2l6ZVNxKXtyZXR1cm47fWludGVyc2VjdHMucHVzaCh7ZGlzdGFuY2U6TWF0aC5zcXJ0KGRpc3RhbmNlU3EpLHBvaW50OnRoaXMucG9zaXRpb24sZmFjZTpudWxsLG9iamVjdDp0aGlzfSk7fTt9KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKTt9fSk7Ly8gRmlsZTpzcmMvb2JqZWN0cy9MZW5zRmxhcmUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5MZW5zRmxhcmU9ZnVuY3Rpb24odGV4dHVyZSxzaXplLGRpc3RhbmNlLGJsZW5kaW5nLGNvbG9yKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGVuc0ZsYXJlcz1bXTt0aGlzLnBvc2l0aW9uU2NyZWVuPW5ldyBUSFJFRS5WZWN0b3IzKCk7dGhpcy5jdXN0b21VcGRhdGVDYWxsYmFjaz11bmRlZmluZWQ7aWYodGV4dHVyZSE9PXVuZGVmaW5lZCl7dGhpcy5hZGQodGV4dHVyZSxzaXplLGRpc3RhbmNlLGJsZW5kaW5nLGNvbG9yKTt9fTtUSFJFRS5MZW5zRmxhcmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MZW5zRmxhcmUsY29weTpmdW5jdGlvbihzb3VyY2Upe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UpO3RoaXMucG9zaXRpb25TY3JlZW4uY29weShzb3VyY2UucG9zaXRpb25TY3JlZW4pO3RoaXMuY3VzdG9tVXBkYXRlQ2FsbGJhY2s9c291cmNlLmN1c3RvbVVwZGF0ZUNhbGxiYWNrO2Zvcih2YXIgaT0wLGw9c291cmNlLmxlbnNGbGFyZXMubGVuZ3RoO2k8bDtpKyspe3RoaXMubGVuc0ZsYXJlcy5wdXNoKHNvdXJjZS5sZW5zRmxhcmVzW2ldKTt9cmV0dXJuIHRoaXM7fSxhZGQ6ZnVuY3Rpb24odGV4dHVyZSxzaXplLGRpc3RhbmNlLGJsZW5kaW5nLGNvbG9yLG9wYWNpdHkpe2lmKHNpemU9PT11bmRlZmluZWQpc2l6ZT0tMTtpZihkaXN0YW5jZT09PXVuZGVmaW5lZClkaXN0YW5jZT0wO2lmKG9wYWNpdHk9PT11bmRlZmluZWQpb3BhY2l0eT0xO2lmKGNvbG9yPT09dW5kZWZpbmVkKWNvbG9yPW5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7aWYoYmxlbmRpbmc9PT11bmRlZmluZWQpYmxlbmRpbmc9VEhSRUUuTm9ybWFsQmxlbmRpbmc7ZGlzdGFuY2U9TWF0aC5taW4oZGlzdGFuY2UsTWF0aC5tYXgoMCxkaXN0YW5jZSkpO3RoaXMubGVuc0ZsYXJlcy5wdXNoKHt0ZXh0dXJlOnRleHR1cmUsLy8gVEhSRUUuVGV4dHVyZVxuc2l6ZTpzaXplLC8vIHNpemUgaW4gcGl4ZWxzICgtMSA9IHVzZSB0ZXh0dXJlLndpZHRoKVxuZGlzdGFuY2U6ZGlzdGFuY2UsLy8gZGlzdGFuY2UgKDAtMSkgZnJvbSBsaWdodCBzb3VyY2UgKDA9YXQgbGlnaHQgc291cmNlKVxueDowLHk6MCx6OjAsLy8gc2NyZWVuIHBvc2l0aW9uICgtMSA9PiAxKSB6ID0gMCBpcyBpbiBmcm9udCB6ID0gMSBpcyBiYWNrXG5zY2FsZToxLC8vIHNjYWxlXG5yb3RhdGlvbjowLC8vIHJvdGF0aW9uXG5vcGFjaXR5Om9wYWNpdHksLy8gb3BhY2l0eVxuY29sb3I6Y29sb3IsLy8gY29sb3JcbmJsZW5kaW5nOmJsZW5kaW5nLy8gYmxlbmRpbmdcbn0pO30sLypcclxuXHQgKiBVcGRhdGUgbGVucyBmbGFyZXMgdXBkYXRlIHBvc2l0aW9ucyBvbiBhbGwgZmxhcmVzIGJhc2VkIG9uIHRoZSBzY3JlZW4gcG9zaXRpb25cclxuXHQgKiBTZXQgbXlMZW5zRmxhcmUuY3VzdG9tVXBkYXRlQ2FsbGJhY2sgdG8gYWx0ZXIgdGhlIGZsYXJlcyBpbiB5b3VyIHByb2plY3Qgc3BlY2lmaWMgd2F5LlxyXG5cdCAqL3VwZGF0ZUxlbnNGbGFyZXM6ZnVuY3Rpb24oKXt2YXIgZixmbD10aGlzLmxlbnNGbGFyZXMubGVuZ3RoO3ZhciBmbGFyZTt2YXIgdmVjWD0tdGhpcy5wb3NpdGlvblNjcmVlbi54KjI7dmFyIHZlY1k9LXRoaXMucG9zaXRpb25TY3JlZW4ueSoyO2ZvcihmPTA7ZjxmbDtmKyspe2ZsYXJlPXRoaXMubGVuc0ZsYXJlc1tmXTtmbGFyZS54PXRoaXMucG9zaXRpb25TY3JlZW4ueCt2ZWNYKmZsYXJlLmRpc3RhbmNlO2ZsYXJlLnk9dGhpcy5wb3NpdGlvblNjcmVlbi55K3ZlY1kqZmxhcmUuZGlzdGFuY2U7ZmxhcmUud2FudGVkUm90YXRpb249ZmxhcmUueCpNYXRoLlBJKjAuMjU7ZmxhcmUucm90YXRpb24rPShmbGFyZS53YW50ZWRSb3RhdGlvbi1mbGFyZS5yb3RhdGlvbikqMC4yNTt9fX0pOy8vIEZpbGU6c3JjL3NjZW5lcy9TY2VuZS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLlNjZW5lPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1NjZW5lJzt0aGlzLmZvZz1udWxsO3RoaXMub3ZlcnJpZGVNYXRlcmlhbD1udWxsO3RoaXMuYXV0b1VwZGF0ZT10cnVlOy8vIGNoZWNrZWQgYnkgdGhlIHJlbmRlcmVyXG59O1RIUkVFLlNjZW5lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuU2NlbmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNjZW5lO1RIUkVFLlNjZW5lLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHNvdXJjZSxyZWN1cnNpdmUpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxzb3VyY2UscmVjdXJzaXZlKTtpZihzb3VyY2UuZm9nIT09bnVsbCl0aGlzLmZvZz1zb3VyY2UuZm9nLmNsb25lKCk7aWYoc291cmNlLm92ZXJyaWRlTWF0ZXJpYWwhPT1udWxsKXRoaXMub3ZlcnJpZGVNYXRlcmlhbD1zb3VyY2Uub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpO3RoaXMuYXV0b1VwZGF0ZT1zb3VyY2UuYXV0b1VwZGF0ZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9c291cmNlLm1hdHJpeEF1dG9VcGRhdGU7cmV0dXJuIHRoaXM7fTsvLyBGaWxlOnNyYy9zY2VuZXMvRm9nLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuRm9nPWZ1bmN0aW9uKGNvbG9yLG5lYXIsZmFyKXt0aGlzLm5hbWU9Jyc7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoY29sb3IpO3RoaXMubmVhcj1uZWFyIT09dW5kZWZpbmVkP25lYXI6MTt0aGlzLmZhcj1mYXIhPT11bmRlZmluZWQ/ZmFyOjEwMDA7fTtUSFJFRS5Gb2cucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5Gb2codGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLm5lYXIsdGhpcy5mYXIpO307Ly8gRmlsZTpzcmMvc2NlbmVzL0ZvZ0V4cDIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5Gb2dFeHAyPWZ1bmN0aW9uKGNvbG9yLGRlbnNpdHkpe3RoaXMubmFtZT0nJzt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihjb2xvcik7dGhpcy5kZW5zaXR5PWRlbnNpdHkhPT11bmRlZmluZWQ/ZGVuc2l0eTowLjAwMDI1O307VEhSRUUuRm9nRXhwMi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkZvZ0V4cDIodGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLmRlbnNpdHkpO307Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsuanNcblRIUkVFLlNoYWRlckNodW5rPXt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2FscGhhbWFwX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydhbHBoYW1hcF9mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblx0ZGlmZnVzZUNvbG9yLmEgKj0gdGV4dHVyZTJEKCBhbHBoYU1hcCwgdlV2ICkuZztcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9hbHBoYW1hcF9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydhbHBoYW1hcF9wYXJzX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9hbHBoYXRlc3RfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2FscGhhdGVzdF9mcmFnbWVudCddPVwiI2lmZGVmIEFMUEhBVEVTVFxcblx0aWYgKCBkaWZmdXNlQ29sb3IuYSA8IEFMUEhBVEVTVCApIGRpc2NhcmQ7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvYW9tYXBfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2FvbWFwX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX0FPTUFQXFxuXHRmbG9hdCBhbWJpZW50T2NjbHVzaW9uID0gKCB0ZXh0dXJlMkQoIGFvTWFwLCB2VXYyICkuciAtIDEuMCApICogYW9NYXBJbnRlbnNpdHkgKyAxLjA7XFxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gYW1iaWVudE9jY2x1c2lvbjtcXG5cdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblx0XHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXHRcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKj0gY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBkb3ROViwgYW1iaWVudE9jY2x1c2lvbiwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cdCNlbmRpZlxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2FvbWFwX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2FvbWFwX3BhcnNfZnJhZ21lbnQnXT1cIiNpZmRlZiBVU0VfQU9NQVBcXG5cdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblx0dW5pZm9ybSBmbG9hdCBhb01hcEludGVuc2l0eTtcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9iZWdpbl92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2JlZ2luX3ZlcnRleCddPVwiXFxudmVjMyB0cmFuc2Zvcm1lZCA9IHZlYzMoIHBvc2l0aW9uICk7XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvYmVnaW5ub3JtYWxfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydiZWdpbm5vcm1hbF92ZXJ0ZXgnXT1cIlxcbnZlYzMgb2JqZWN0Tm9ybWFsID0gdmVjMyggbm9ybWFsICk7XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvYnNkZnMuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2JzZGZzJ109XCJib29sIHRlc3RMaWdodEluUmFuZ2UoIGNvbnN0IGluIGZsb2F0IGxpZ2h0RGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGN1dG9mZkRpc3RhbmNlICkge1xcblx0cmV0dXJuIGFueSggYnZlYzIoIGN1dG9mZkRpc3RhbmNlID09IDAuMCwgbGlnaHREaXN0YW5jZSA8IGN1dG9mZkRpc3RhbmNlICkgKTtcXG59XFxuZmxvYXQgcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggY29uc3QgaW4gZmxvYXQgbGlnaHREaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgY3V0b2ZmRGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGRlY2F5RXhwb25lbnQgKSB7XFxuXHRcdGlmKCBkZWNheUV4cG9uZW50ID4gMC4wICkge1xcbiNpZiBkZWZpbmVkICggUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUUyApXFxuXHRcdFx0ZmxvYXQgZGlzdGFuY2VGYWxsb2ZmID0gMS4wIC8gbWF4KCBwb3coIGxpZ2h0RGlzdGFuY2UsIGRlY2F5RXhwb25lbnQgKSwgMC4wMSApO1xcblx0XHRcdGZsb2F0IG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yID0gcG93Miggc2F0dXJhdGUoIDEuMCAtIHBvdzQoIGxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSApICkgKTtcXG5cdFx0XHRyZXR1cm4gZGlzdGFuY2VGYWxsb2ZmICogbWF4RGlzdGFuY2VDdXRvZmZGYWN0b3I7XFxuI2Vsc2VcXG5cdFx0XHRyZXR1cm4gcG93KCBzYXR1cmF0ZSggLWxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSArIDEuMCApLCBkZWNheUV4cG9uZW50ICk7XFxuI2VuZGlmXFxuXHRcdH1cXG5cdFx0cmV0dXJuIDEuMDtcXG59XFxudmVjMyBCUkRGX0RpZmZ1c2VfTGFtYmVydCggY29uc3QgaW4gdmVjMyBkaWZmdXNlQ29sb3IgKSB7XFxuXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGRpZmZ1c2VDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2soIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgZG90TEggKSB7XFxuXHRmbG9hdCBmcmVzbmVsID0gZXhwMiggKCAtNS41NTQ3MyAqIGRvdExIIC0gNi45ODMxNiApICogZG90TEggKTtcXG5cdHJldHVybiAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIGZyZXNuZWwgKyBzcGVjdWxhckNvbG9yO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cdGZsb2F0IGdsID0gZG90TkwgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cdGZsb2F0IGd2ID0gZG90TlYgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcXG59XFxuZmxvYXQgR19HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblx0ZmxvYXQgZ3YgPSBkb3ROTCAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblx0cmV0dXJuIDAuNSAvIG1heCggZ3YgKyBnbCwgRVBTSUxPTiApO1xcbn1cXG5mbG9hdCBEX0dHWCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xcblx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblx0ZmxvYXQgZGVub20gPSBwb3cyKCBkb3ROSCApICogKCBhMiAtIDEuMCApICsgMS4wO1xcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBhMiAvIHBvdzIoIGRlbm9tICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9HR1goIGNvbnN0IGluIEluY2lkZW50TGlnaHQgaW5jaWRlbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXHRmbG9hdCBhbHBoYSA9IHBvdzIoIHJvdWdobmVzcyApO1xcblx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXHRmbG9hdCBkb3RMSCA9IHNhdHVyYXRlKCBkb3QoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uLCBoYWxmRGlyICkgKTtcXG5cdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcXG5cdGZsb2F0IEQgPSBEX0dHWCggYWxwaGEsIGRvdE5IICk7XFxuXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXHRjb25zdCB2ZWM0IGMwID0gdmVjNCggLSAxLCAtIDAuMDI3NSwgLSAwLjU3MiwgMC4wMjIgKTtcXG5cdGNvbnN0IHZlYzQgYzEgPSB2ZWM0KCAxLCAwLjA0MjUsIDEuMDQsIC0gMC4wNCApO1xcblx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcXG5cdGZsb2F0IGEwMDQgPSBtaW4oIHIueCAqIHIueCwgZXhwMiggLSA5LjI4ICogZG90TlYgKSApICogci54ICsgci55O1xcblx0dmVjMiBBQiA9IHZlYzIoIC0xLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcXG5cdHJldHVybiBzcGVjdWxhckNvbG9yICogQUIueCArIEFCLnk7XFxufVxcbmZsb2F0IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKSB7XFxuXHRyZXR1cm4gMC4yNTtcXG59XFxuZmxvYXQgRF9CbGlublBob25nKCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xcblx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoYWxmRGlyICkgKTtcXG5cdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblx0ZmxvYXQgRyA9IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKTtcXG5cdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG5mbG9hdCBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIGNvbnN0IGluIGZsb2F0IGdneFJvdWdobmVzcyApIHtcXG5cdHJldHVybiAoIDIuMCAvIHBvdzIoIGdneFJvdWdobmVzcyArIDAuMDAwMSApIC0gMi4wICk7XFxufVxcbmZsb2F0IEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyggY29uc3QgaW4gZmxvYXQgYmxpbm5FeHBvbmVudCApIHtcXG5cdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9idW1wbWFwX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2J1bXBtYXBfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9CVU1QTUFQXFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBidW1wTWFwO1xcblx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXHR2ZWMyIGRIZHh5X2Z3ZCgpIHtcXG5cdFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblx0XHR2ZWMyIGRTVGR5ID0gZEZkeSggdlV2ICk7XFxuXHRcdGZsb2F0IEhsbCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICkueDtcXG5cdFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXHRcdGZsb2F0IGRCeSA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICsgZFNUZHkgKS54IC0gSGxsO1xcblx0XHRyZXR1cm4gdmVjMiggZEJ4LCBkQnkgKTtcXG5cdH1cXG5cdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXHRcdHZlYzMgdlNpZ21hWCA9IGRGZHgoIHN1cmZfcG9zICk7XFxuXHRcdHZlYzMgdlNpZ21hWSA9IGRGZHkoIHN1cmZfcG9zICk7XFxuXHRcdHZlYzMgdk4gPSBzdXJmX25vcm07XFxuXHRcdHZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG5cdFx0dmVjMyBSMiA9IGNyb3NzKCB2TiwgdlNpZ21hWCApO1xcblx0XHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcblx0XHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5cdFx0cmV0dXJuIG5vcm1hbGl6ZSggYWJzKCBmRGV0ICkgKiBzdXJmX25vcm0gLSB2R3JhZCApO1xcblx0fVxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2NsaXBwaW5nX3BsYW5lc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50J109XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9DTElQUElOR19QTEFORVM7ICsrIGkgKSB7XFxuXHRcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblx0XHRpZiAoIGRvdCggdlZpZXdQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgZGlzY2FyZDtcXG5cdH1cXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9jbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQnXT1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cdFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuXHQjZW5kaWZcXG5cdHVuaWZvcm0gdmVjNCBjbGlwcGluZ1BsYW5lc1sgTlVNX0NMSVBQSU5HX1BMQU5FUyBdO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2NsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4J109XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvY2xpcHBpbmdfcGxhbmVzX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY2xpcHBpbmdfcGxhbmVzX3ZlcnRleCddPVwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwICYmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2NvbG9yX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydjb2xvcl9mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9DT0xPUlxcblx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvY29sb3JfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY29sb3JfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9DT0xPUlxcblx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9jb2xvcl9wYXJzX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY29sb3JfcGFyc192ZXJ0ZXgnXT1cIiNpZmRlZiBVU0VfQ09MT1JcXG5cdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvY29sb3JfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydjb2xvcl92ZXJ0ZXgnXT1cIiNpZmRlZiBVU0VfQ09MT1JcXG5cdHZDb2xvci54eXogPSBjb2xvci54eXo7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvY29tbW9uLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydjb21tb24nXT1cIiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1OVxcbiNkZWZpbmUgUEkyIDYuMjgzMTg1MzA3MThcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxOFxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSTIgMC4xNTkxNTQ5NFxcbiNkZWZpbmUgTE9HMiAxLjQ0MjY5NVxcbiNkZWZpbmUgRVBTSUxPTiAxZS02XFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNkZWZpbmUgd2hpdGVDb21wbGltZW50KGEpICggMS4wIC0gc2F0dXJhdGUoIGEgKSApXFxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxcbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxcbmZsb2F0IHBvdzQoIGNvbnN0IGluIGZsb2F0IHggKSB7IGZsb2F0IHgyID0geCp4OyByZXR1cm4geDIqeDI7IH1cXG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxcbmhpZ2hwIGZsb2F0IHJhbmQoIGNvbnN0IGluIHZlYzIgdXYgKSB7XFxuXHRjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuXHRoaWdocCBmbG9hdCBkdCA9IGRvdCggdXYueHksIHZlYzIoIGEsYiApICksIHNuID0gbW9kKCBkdCwgUEkgKTtcXG5cdHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcXG5cdHZlYzMgY29sb3I7XFxuXHR2ZWMzIGRpcmVjdGlvbjtcXG5cdGJvb2wgdmlzaWJsZTtcXG59O1xcbnN0cnVjdCBSZWZsZWN0ZWRMaWdodCB7XFxuXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XFxuXHR2ZWMzIGRpcmVjdFNwZWN1bGFyO1xcblx0dmVjMyBpbmRpcmVjdERpZmZ1c2U7XFxuXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XFxufTtcXG5zdHJ1Y3QgR2VvbWV0cmljQ29udGV4dCB7XFxuXHR2ZWMzIHBvc2l0aW9uO1xcblx0dmVjMyBub3JtYWw7XFxuXHR2ZWMzIHZpZXdEaXI7XFxufTtcXG52ZWMzIHRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblx0cmV0dXJuIG5vcm1hbGl6ZSggKCBtYXRyaXggKiB2ZWM0KCBkaXIsIDAuMCApICkueHl6ICk7XFxufVxcbnZlYzMgaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXHRmbG9hdCBkaXN0YW5jZSA9IGRvdCggcGxhbmVOb3JtYWwsIHBvaW50IC0gcG9pbnRPblBsYW5lICk7XFxuXHRyZXR1cm4gLSBkaXN0YW5jZSAqIHBsYW5lTm9ybWFsICsgcG9pbnQ7XFxufVxcbmZsb2F0IHNpZGVPZlBsYW5lKCBpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblx0cmV0dXJuIGxpbmVEaXJlY3Rpb24gKiAoIGRvdCggcGxhbmVOb3JtYWwsIHBvaW50T25QbGFuZSAtIHBvaW50T25MaW5lICkgLyBkb3QoIHBsYW5lTm9ybWFsLCBsaW5lRGlyZWN0aW9uICkgKSArIHBvaW50T25MaW5lO1xcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9jdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2N1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudCddPVwiI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG4jZGVmaW5lIGN1YmVVVl90ZXh0dXJlU2l6ZSAoMTAyNC4wKVxcbmludCBnZXRGYWNlRnJvbURpcmVjdGlvbih2ZWMzIGRpcmVjdGlvbikge1xcblx0dmVjMyBhYnNEaXJlY3Rpb24gPSBhYnMoZGlyZWN0aW9uKTtcXG5cdGludCBmYWNlID0gLTE7XFxuXHRpZiggYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueiApIHtcXG5cdFx0aWYoYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueSApXFxuXHRcdFx0ZmFjZSA9IGRpcmVjdGlvbi54ID4gMC4wID8gMCA6IDM7XFxuXHRcdGVsc2VcXG5cdFx0XHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxIDogNDtcXG5cdH1cXG5cdGVsc2Uge1xcblx0XHRpZihhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcXG5cdFx0XHRmYWNlID0gZGlyZWN0aW9uLnogPiAwLjAgPyAyIDogNTtcXG5cdFx0ZWxzZVxcblx0XHRcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEgOiA0O1xcblx0fVxcblx0cmV0dXJuIGZhY2U7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMxICAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAxLjApXFxuI2RlZmluZSBjdWJlVVZfcmFuZ2VDbGFtcCAoZXhwMigoNi4wIC0gMS4wKSAqIDIuMCkpXFxudmVjMiBNaXBMZXZlbEluZm8oIHZlYzMgdmVjLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgcm91Z2huZXNzICkge1xcblx0ZmxvYXQgc2NhbGUgPSBleHAyKGN1YmVVVl9tYXhMb2RzMSAtIHJvdWdobmVzc0xldmVsKTtcXG5cdGZsb2F0IGR4Um91Z2huZXNzID0gZEZkeChyb3VnaG5lc3MpO1xcblx0ZmxvYXQgZHlSb3VnaG5lc3MgPSBkRmR5KHJvdWdobmVzcyk7XFxuXHR2ZWMzIGR4ID0gZEZkeCggdmVjICogc2NhbGUgKiBkeFJvdWdobmVzcyApO1xcblx0dmVjMyBkeSA9IGRGZHkoIHZlYyAqIHNjYWxlICogZHlSb3VnaG5lc3MgKTtcXG5cdGZsb2F0IGQgPSBtYXgoIGRvdCggZHgsIGR4ICksIGRvdCggZHksIGR5ICkgKTtcXG5cdGQgPSBjbGFtcChkLCAxLjAsIGN1YmVVVl9yYW5nZUNsYW1wKTtcXG5cdGZsb2F0IG1pcExldmVsID0gMC41ICogbG9nMihkKTtcXG5cdHJldHVybiB2ZWMyKGZsb29yKG1pcExldmVsKSwgZnJhY3QobWlwTGV2ZWwpKTtcXG59XFxuI2RlZmluZSBjdWJlVVZfbWF4TG9kczIgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMi4wKVxcbiNkZWZpbmUgY3ViZVVWX3JjcFRleHR1cmVTaXplICgxLjAgLyBjdWJlVVZfdGV4dHVyZVNpemUpXFxudmVjMiBnZXRDdWJlVVYodmVjMyBkaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzc0xldmVsLCBmbG9hdCBtaXBMZXZlbCkge1xcblx0bWlwTGV2ZWwgPSByb3VnaG5lc3NMZXZlbCA+IGN1YmVVVl9tYXhMb2RzMiAtIDMuMCA/IDAuMCA6IG1pcExldmVsO1xcblx0ZmxvYXQgYSA9IDE2LjAgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XFxuXHR2ZWMyIGV4cDJfcGFja2VkID0gZXhwMiggdmVjMiggcm91Z2huZXNzTGV2ZWwsIG1pcExldmVsICkgKTtcXG5cdHZlYzIgcmNwX2V4cDJfcGFja2VkID0gdmVjMiggMS4wICkgLyBleHAyX3BhY2tlZDtcXG5cdGZsb2F0IHBvd1NjYWxlID0gZXhwMl9wYWNrZWQueCAqIGV4cDJfcGFja2VkLnk7XFxuXHRmbG9hdCBzY2FsZSA9IHJjcF9leHAyX3BhY2tlZC54ICogcmNwX2V4cDJfcGFja2VkLnkgKiAwLjI1O1xcblx0ZmxvYXQgbWlwT2Zmc2V0ID0gMC43NSooMS4wIC0gcmNwX2V4cDJfcGFja2VkLnkpICogcmNwX2V4cDJfcGFja2VkLng7XFxuXHRib29sIGJSZXMgPSBtaXBMZXZlbCA9PSAwLjA7XFxuXHRzY2FsZSA9ICBiUmVzICYmIChzY2FsZSA8IGEpID8gYSA6IHNjYWxlO1xcblx0dmVjMyByO1xcblx0dmVjMiBvZmZzZXQ7XFxuXHRpbnQgZmFjZSA9IGdldEZhY2VGcm9tRGlyZWN0aW9uKGRpcmVjdGlvbik7XFxuXHRmbG9hdCByY3BQb3dTY2FsZSA9IDEuMCAvIHBvd1NjYWxlO1xcblx0aWYoIGZhY2UgPT0gMCkge1xcblx0XHRyID0gdmVjMyhkaXJlY3Rpb24ueCwgLWRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSk7XFxuXHRcdG9mZnNldCA9IHZlYzIoMC4wK21pcE9mZnNldCwwLjc1ICogcmNwUG93U2NhbGUpO1xcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIGEgOiBvZmZzZXQueTtcXG5cdH1cXG5cdGVsc2UgaWYoIGZhY2UgPT0gMSkge1xcblx0XHRyID0gdmVjMyhkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56KTtcXG5cdFx0b2Zmc2V0ID0gdmVjMihzY2FsZSttaXBPZmZzZXQsIDAuNzUgKiByY3BQb3dTY2FsZSk7XFxuXHRcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgYSA6IG9mZnNldC55O1xcblx0fVxcblx0ZWxzZSBpZiggZmFjZSA9PSAyKSB7XFxuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblx0XHRvZmZzZXQgPSB2ZWMyKDIuMCpzY2FsZSttaXBPZmZzZXQsIDAuNzUgKiByY3BQb3dTY2FsZSk7XFxuXHRcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgYSA6IG9mZnNldC55O1xcblx0fVxcblx0ZWxzZSBpZiggZmFjZSA9PSAzKSB7XFxuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkpO1xcblx0XHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC41ICogcmNwUG93U2NhbGUpO1xcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIDAuMCA6IG9mZnNldC55O1xcblx0fVxcblx0ZWxzZSBpZiggZmFjZSA9PSA0KSB7XFxuXHRcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgLWRpcmVjdGlvbi56KTtcXG5cdFx0b2Zmc2V0ID0gdmVjMihzY2FsZSttaXBPZmZzZXQsIDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cdFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/ICAwLjAgOiBvZmZzZXQueTtcXG5cdH1cXG5cdGVsc2Uge1xcblx0XHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgLWRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XFxuXHRcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblx0XHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIDAuMCA6IG9mZnNldC55O1xcblx0fVxcblx0ciA9IG5vcm1hbGl6ZShyKTtcXG5cdGZsb2F0IHRleGVsT2Zmc2V0ID0gMC41ICogY3ViZVVWX3JjcFRleHR1cmVTaXplO1xcblx0dmVjMiBzID0gKCByLnl6IC8gYWJzKCByLnggKSArIHZlYzIoIDEuMCApICkgKiAwLjU7XFxuXHR2ZWMyIGJhc2UgPSBvZmZzZXQgKyB2ZWMyKCB0ZXhlbE9mZnNldCApO1xcblx0cmV0dXJuIGJhc2UgKyBzICogKCBzY2FsZSAtIDIuMCAqIHRleGVsT2Zmc2V0ICk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMzIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDMuMClcXG52ZWM0IHRleHR1cmVDdWJlVVYodmVjMyByZWZsZWN0ZWREaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cdGZsb2F0IHJvdWdobmVzc1ZhbCA9IHJvdWdobmVzcyogY3ViZVVWX21heExvZHMzO1xcblx0ZmxvYXQgcjEgPSBmbG9vcihyb3VnaG5lc3NWYWwpO1xcblx0ZmxvYXQgcjIgPSByMSArIDEuMDtcXG5cdGZsb2F0IHQgPSBmcmFjdChyb3VnaG5lc3NWYWwpO1xcblx0dmVjMiBtaXBJbmZvID0gTWlwTGV2ZWxJbmZvKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIHJvdWdobmVzcyk7XFxuXHRmbG9hdCBzID0gbWlwSW5mby55O1xcblx0ZmxvYXQgbGV2ZWwwID0gbWlwSW5mby54O1xcblx0ZmxvYXQgbGV2ZWwxID0gbGV2ZWwwICsgMS4wO1xcblx0bGV2ZWwxID0gbGV2ZWwxID4gNS4wID8gNS4wIDogbGV2ZWwxO1xcblx0bGV2ZWwwICs9IG1pbiggZmxvb3IoIHMgKyAwLjUgKSwgNS4wICk7XFxuXHR2ZWMyIHV2XzEwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIGxldmVsMCk7XFxuXHR2ZWM0IGNvbG9yMTAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzEwKSk7XFxuXHR2ZWMyIHV2XzIwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjIsIGxldmVsMCk7XFxuXHR2ZWM0IGNvbG9yMjAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzIwKSk7XFxuXHR2ZWM0IHJlc3VsdCA9IG1peChjb2xvcjEwLCBjb2xvcjIwLCB0KTtcXG5cdHJldHVybiB2ZWM0KHJlc3VsdC5yZ2IsIDEuMCk7XFxufVxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2RlZmF1bHRub3JtYWxfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydkZWZhdWx0bm9ybWFsX3ZlcnRleCddPVwiI2lmZGVmIEZMSVBfU0lERURcXG5cdG9iamVjdE5vcm1hbCA9IC1vYmplY3ROb3JtYWw7XFxuI2VuZGlmXFxudmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG9iamVjdE5vcm1hbDtcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9kaXNwbGFjZW1lbnRtYXBfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydkaXNwbGFjZW1lbnRtYXBfdmVydGV4J109XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblx0dHJhbnNmb3JtZWQgKz0gbm9ybWFsICogKCB0ZXh0dXJlMkQoIGRpc3BsYWNlbWVudE1hcCwgdXYgKS54ICogZGlzcGxhY2VtZW50U2NhbGUgKyBkaXNwbGFjZW1lbnRCaWFzICk7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXgnXT1cIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXNwbGFjZW1lbnRNYXA7XFxuXHR1bmlmb3JtIGZsb2F0IGRpc3BsYWNlbWVudFNjYWxlO1xcblx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2VtaXNzaXZlbWFwX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlbWlzc2l2ZW1hcF9mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxcblx0dmVjNCBlbWlzc2l2ZUNvbG9yID0gdGV4dHVyZTJEKCBlbWlzc2l2ZU1hcCwgdlV2ICk7XFxuXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcXG5cdHRvdGFsRW1pc3NpdmVSYWRpYW5jZSAqPSBlbWlzc2l2ZUNvbG9yLnJnYjtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9lbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9lbmNvZGluZ3NfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQnXT1cIlxcbnZlYzQgTGluZWFyVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuICByZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuICByZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IExpbmVhclRvR2FtbWEoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcbiAgcmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCAxLjAgLyBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBzUkdCVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuICByZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgcmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDAuNDE2NjYgKSApICogMS4wNTUgLSB2ZWMzKCAwLjA1NSApLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjAwMzEzMDggKSApICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IFJHQkVUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiBleHAyKCB2YWx1ZS5hICogMjU1LjAgLSAxMjguMCApLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQkUoIGluIHZlYzQgdmFsdWUgKSB7XFxuICBmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuICBmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyBleHAyKCBmRXhwICksICggZkV4cCArIDEyOC4wICkgLyAyNTUuMCApO1xcbn1cXG52ZWM0IFJHQk1Ub0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuICByZXR1cm4gdmVjNCggdmFsdWUueHl6ICogdmFsdWUudyAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcbiAgZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcbiAgZmxvYXQgTSAgICAgID0gY2xhbXAoIG1heFJHQiAvIG1heFJhbmdlLCAwLjAsIDEuMCApO1xcbiAgTSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyAoIE0gKiBtYXhSYW5nZSApLCBNICk7XFxufVxcbnZlYzQgUkdCRFRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG4gICAgcmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuICAgIGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG4gICAgZmxvYXQgRCAgICAgID0gbWF4KCBtYXhSYW5nZSAvIG1heFJHQiwgMS4wICk7XFxuICAgIEQgICAgICAgICAgICA9IG1pbiggZmxvb3IoIEQgKSAvIDI1NS4wLCAxLjAgKTtcXG4gICAgcmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggRCAqICggMjU1LjAgLyBtYXhSYW5nZSApICksIEQgKTtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2TSA9IG1hdDMoIDAuMjIwOSwgMC4zMzkwLCAwLjQxODQsIDAuMTEzOCwgMC42NzgwLCAwLjczMTksIDAuMDEwMiwgMC4xMTMwLCAwLjI5NjkgKTtcXG52ZWM0IExpbmVhclRvTG9nTHV2KCBpbiB2ZWM0IHZhbHVlICkgIHtcXG4gIHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XFxuICBYcF9ZX1hZWnAgPSBtYXgoWHBfWV9YWVpwLCB2ZWMzKDFlLTYsIDFlLTYsIDFlLTYpKTtcXG4gIHZlYzQgdlJlc3VsdDtcXG4gIHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcXG4gIGZsb2F0IExlID0gMi4wICogbG9nMihYcF9ZX1hZWnAueSkgKyAxMjcuMDtcXG4gIHZSZXN1bHQudyA9IGZyYWN0KExlKTtcXG4gIHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XFxuICByZXR1cm4gdlJlc3VsdDtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2SW52ZXJzZU0gPSBtYXQzKCA2LjAwMTQsIC0yLjcwMDgsIC0xLjc5OTYsIC0xLjMzMjAsIDMuMTAyOSwgLTUuNzcyMSwgMC4zMDA4LCAtMS4wODgyLCA1LjYyNjggKTtcXG52ZWM0IExvZ0x1dlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgZmxvYXQgTGUgPSB2YWx1ZS56ICogMjU1LjAgKyB2YWx1ZS53O1xcbiAgdmVjMyBYcF9ZX1hZWnA7XFxuICBYcF9ZX1hZWnAueSA9IGV4cDIoKExlIC0gMTI3LjApIC8gMi4wKTtcXG4gIFhwX1lfWFlacC56ID0gWHBfWV9YWVpwLnkgLyB2YWx1ZS55O1xcbiAgWHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XFxuICB2ZWMzIHZSR0IgPSBYcF9ZX1hZWnAucmdiICogY0xvZ0x1dkludmVyc2VNO1xcbiAgcmV0dXJuIHZlYzQoIG1heCh2UkdCLCAwLjApLCAxLjAgKTtcXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvZW5jb2RpbmdzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlbmNvZGluZ3NfZnJhZ21lbnQnXT1cIiAgZ2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvZW52bWFwX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlbnZtYXBfZnJhZ21lbnQnXT1cIiNpZmRlZiBVU0VfRU5WTUFQXFxuXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKVxcblx0XHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cdFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cdFx0XHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcXG5cdFx0I2Vsc2VcXG5cdFx0XHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblx0XHQjZW5kaWZcXG5cdCNlbHNlXFxuXHRcdHZlYzMgcmVmbGVjdFZlYyA9IHZSZWZsZWN0O1xcblx0I2VuZGlmXFxuXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXHRcdGZsb2F0IGZsaXBOb3JtYWwgPSAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXHQjZWxzZVxcblx0XHRmbG9hdCBmbGlwTm9ybWFsID0gMS4wO1xcblx0I2VuZGlmXFxuXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblx0XHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcblx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXHRcdHZlYzIgc2FtcGxlVVY7XFxuXHRcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueSAqIDAuNSArIDAuNSApO1xcblx0XHRzYW1wbGVVVi54ID0gYXRhbiggZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueiwgZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXHRcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX1NQSEVSRSApXFxuXHRcdHZlYzMgcmVmbGVjdFZpZXcgPSBmbGlwTm9ybWFsICogbm9ybWFsaXplKCh2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkpLnh5eiArIHZlYzMoMC4wLDAuMCwxLjApKTtcXG5cdFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmUyRCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSApO1xcblx0I2VuZGlmXFxuXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXHQjaWZkZWYgRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXFxuXHRcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9CTEVORElOR19NSVggKVxcblx0XHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9CTEVORElOR19BREQgKVxcblx0XHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9lbnZtYXBfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZW52bWFwX3BhcnNfZnJhZ21lbnQnXT1cIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxuXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc3RpeTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0VOVk1BUFxcblx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAoIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgKVxcblx0XHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXHQjZW5kaWZcXG5cdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXHRcdHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xcblx0I2Vsc2VcXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblx0I2VuZGlmXFxuXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSB8fCBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXHRcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblx0I2Vsc2VcXG5cdFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvZW52bWFwX3BhcnNfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlbnZtYXBfcGFyc192ZXJ0ZXgnXT1cIiNpZmRlZiBVU0VfRU5WTUFQXFxuXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKVxcblx0XHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXHQjZWxzZVxcblx0XHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXHRcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvZW52bWFwX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZW52bWFwX3ZlcnRleCddPVwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXHRcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuXHQjZWxzZVxcblx0XHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB3b3JsZFBvc2l0aW9uLnh5eiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCB0cmFuc2Zvcm1lZE5vcm1hbCwgdmlld01hdHJpeCApO1xcblx0XHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblx0XHRcdHZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0dlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblx0XHQjZW5kaWZcXG5cdCNlbmRpZlxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2ZvZ19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZm9nX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX0ZPR1xcblx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cdFx0ZmxvYXQgZGVwdGggPSBnbF9GcmFnRGVwdGhFWFQgLyBnbF9GcmFnQ29vcmQudztcXG5cdCNlbHNlXFxuXHRcdGZsb2F0IGRlcHRoID0gZ2xfRnJhZ0Nvb3JkLnogLyBnbF9GcmFnQ29vcmQudztcXG5cdCNlbmRpZlxcblx0I2lmZGVmIEZPR19FWFAyXFxuXHRcdGZsb2F0IGZvZ0ZhY3RvciA9IHdoaXRlQ29tcGxpbWVudCggZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICkgKTtcXG5cdCNlbHNlXFxuXHRcdGZsb2F0IGZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZGVwdGggKTtcXG5cdCNlbmRpZlxcblx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2ZvZ19wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydmb2dfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9GT0dcXG5cdHVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG5cdCNpZmRlZiBGT0dfRVhQMlxcblx0XHR1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuXHQjZWxzZVxcblx0XHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxuXHRcdHVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcblx0I2VuZGlmXFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbGlnaHRtYXBfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xpZ2h0bWFwX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gUEkgKiB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbGlnaHRtYXBfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbGlnaHRtYXBfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblx0dW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XFxuXHR1bmlmb3JtIGZsb2F0IGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2xpZ2h0c19sYW1iZXJ0X3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbGlnaHRzX2xhbWJlcnRfdmVydGV4J109XCJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIC1tdlBvc2l0aW9uLnh5eiApO1xcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcbmJhY2tHZW9tZXRyeS5ub3JtYWwgPSAtZ2VvbWV0cnkubm9ybWFsO1xcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cdHZMaWdodEJhY2sgPSB2ZWMzKCAwLjAgKTtcXG4jZW5kaWZcXG5JbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0O1xcbmZsb2F0IGRvdE5MO1xcbnZlYzMgZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cdFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblx0XHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cdFx0ZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlID0gUEkgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cdFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXHRcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cdFx0XHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cdFx0I2VuZGlmXFxuXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cdFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cdFx0ZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICk7XFxuXHRcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXHRcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblx0XHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXHRcdFx0dkxpZ2h0QmFjayArPSBzYXR1cmF0ZSggLWRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXHRcdCNlbmRpZlxcblx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblx0XHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodHNbIGkgXSwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXHRcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblx0XHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblx0XHR2TGlnaHRGcm9udCArPSBzYXR1cmF0ZSggZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblx0XHRcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblx0XHQjZW5kaWZcXG5cdH1cXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblx0XHR2TGlnaHRGcm9udCArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXHRcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cdFx0XHR2TGlnaHRCYWNrICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgYmFja0dlb21ldHJ5ICk7XFxuXHRcdCNlbmRpZlxcblx0fVxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2xpZ2h0c19wYXJzLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydsaWdodHNfcGFycyddPVwidW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbnZlYzMgZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBhbWJpZW50TGlnaHRDb2xvciApIHtcXG5cdHZlYzMgaXJyYWRpYW5jZSA9IGFtYmllbnRMaWdodENvbG9yO1xcblx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXHRcdGlycmFkaWFuY2UgKj0gUEk7XFxuXHQjZW5kaWZcXG5cdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodCB7XFxuXHRcdHZlYzMgZGlyZWN0aW9uO1xcblx0XHR2ZWMzIGNvbG9yO1xcblx0XHRpbnQgc2hhZG93O1xcblx0XHRmbG9hdCBzaGFkb3dCaWFzO1xcblx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cdH07XFxuXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXHR2b2lkIGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblx0XHRkaXJlY3RMaWdodC5jb2xvciA9IGRpcmVjdGlvbmFsTGlnaHQuY29sb3I7XFxuXHRcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHQuZGlyZWN0aW9uO1xcblx0XHRkaXJlY3RMaWdodC52aXNpYmxlID0gdHJ1ZTtcXG5cdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cdHN0cnVjdCBQb2ludExpZ2h0IHtcXG5cdFx0dmVjMyBwb3NpdGlvbjtcXG5cdFx0dmVjMyBjb2xvcjtcXG5cdFx0ZmxvYXQgZGlzdGFuY2U7XFxuXHRcdGZsb2F0IGRlY2F5O1xcblx0XHRpbnQgc2hhZG93O1xcblx0XHRmbG9hdCBzaGFkb3dCaWFzO1xcblx0XHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXHRcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cdH07XFxuXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cdHZvaWQgZ2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIFBvaW50TGlnaHQgcG9pbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXHRcdHZlYzMgbFZlY3RvciA9IHBvaW50TGlnaHQucG9zaXRpb24gLSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5cdFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXHRcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcXG5cdFx0aWYgKCB0ZXN0TGlnaHRJblJhbmdlKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlICkgKSB7XFxuXHRcdFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBwb2ludExpZ2h0LmNvbG9yO1xcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHBvaW50TGlnaHQuZGlzdGFuY2UsIHBvaW50TGlnaHQuZGVjYXkgKTtcXG5cdFx0XHRkaXJlY3RMaWdodC52aXNpYmxlID0gdHJ1ZTtcXG5cdFx0fSBlbHNlIHtcXG5cdFx0XHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblx0XHRcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cdFx0fVxcblx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXHRzdHJ1Y3QgU3BvdExpZ2h0IHtcXG5cdFx0dmVjMyBwb3NpdGlvbjtcXG5cdFx0dmVjMyBkaXJlY3Rpb247XFxuXHRcdHZlYzMgY29sb3I7XFxuXHRcdGZsb2F0IGRpc3RhbmNlO1xcblx0XHRmbG9hdCBkZWNheTtcXG5cdFx0ZmxvYXQgY29uZUNvcztcXG5cdFx0ZmxvYXQgcGVudW1icmFDb3M7XFxuXHRcdGludCBzaGFkb3c7XFxuXHRcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXHRcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cdFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblx0fTtcXG5cdHVuaWZvcm0gU3BvdExpZ2h0IHNwb3RMaWdodHNbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXHRcdHZlYzMgbFZlY3RvciA9IHNwb3RMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xcblx0XHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5cdFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblx0XHRmbG9hdCBhbmdsZUNvcyA9IGRvdCggZGlyZWN0TGlnaHQuZGlyZWN0aW9uLCBzcG90TGlnaHQuZGlyZWN0aW9uICk7XFxuXHRcdGlmICggYWxsKCBidmVjMiggYW5nbGVDb3MgPiBzcG90TGlnaHQuY29uZUNvcywgdGVzdExpZ2h0SW5SYW5nZSggbGlnaHREaXN0YW5jZSwgc3BvdExpZ2h0LmRpc3RhbmNlICkgKSApICkge1xcblx0XHRcdGZsb2F0IHNwb3RFZmZlY3QgPSBzbW9vdGhzdGVwKCBzcG90TGlnaHQuY29uZUNvcywgc3BvdExpZ2h0LnBlbnVtYnJhQ29zLCBhbmdsZUNvcyApO1xcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yID0gc3BvdExpZ2h0LmNvbG9yO1xcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHNwb3RFZmZlY3QgKiBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBzcG90TGlnaHQuZGlzdGFuY2UsIHNwb3RMaWdodC5kZWNheSApO1xcblx0XHRcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblx0XHR9IGVsc2Uge1xcblx0XHRcdGRpcmVjdExpZ2h0LmNvbG9yID0gdmVjMyggMC4wICk7XFxuXHRcdFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IGZhbHNlO1xcblx0XHR9XFxuXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xcblx0XHR2ZWMzIGRpcmVjdGlvbjtcXG5cdFx0dmVjMyBza3lDb2xvcjtcXG5cdFx0dmVjMyBncm91bmRDb2xvcjtcXG5cdH07XFxuXHR1bmlmb3JtIEhlbWlzcGhlcmVMaWdodCBoZW1pc3BoZXJlTGlnaHRzWyBOVU1fSEVNSV9MSUdIVFMgXTtcXG5cdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cdFx0ZmxvYXQgZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGVtaUxpZ2h0LmRpcmVjdGlvbiApO1xcblx0XHRmbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdE5MICsgMC41O1xcblx0XHR2ZWMzIGlycmFkaWFuY2UgPSBtaXgoIGhlbWlMaWdodC5ncm91bmRDb2xvciwgaGVtaUxpZ2h0LnNreUNvbG9yLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcblx0XHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cdFx0XHRpcnJhZGlhbmNlICo9IFBJO1xcblx0XHQjZW5kaWZcXG5cdFx0cmV0dXJuIGlycmFkaWFuY2U7XFxuXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXHR2ZWMzIGdldExpZ2h0UHJvYmVJbmRpcmVjdElycmFkaWFuY2UoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcXG5cdFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblx0XHRcdGZsb2F0IGZsaXBOb3JtYWwgPSAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0ZmxvYXQgZmxpcE5vcm1hbCA9IDEuMDtcXG5cdFx0I2VuZGlmXFxuXHRcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBnZW9tZXRyeS5ub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cdFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cdFx0XHR2ZWMzIHF1ZXJ5VmVjID0gZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblx0XHRcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cdFx0XHRcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVZlYywgZmxvYXQoIG1heE1JUExldmVsICkgKTtcXG5cdFx0XHQjZWxzZVxcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblx0XHRcdCNlbmRpZlxcblx0XHRcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblx0XHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cdFx0XHR2ZWMzIHF1ZXJ5VmVjID0gZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblx0XHRcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBxdWVyeVZlYywgMS4wICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xcblx0XHQjZW5kaWZcXG5cdFx0cmV0dXJuIFBJICogZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblx0fVxcblx0ZmxvYXQgZ2V0U3BlY3VsYXJNSVBMZXZlbCggY29uc3QgaW4gZmxvYXQgYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblx0XHRmbG9hdCBtYXhNSVBMZXZlbFNjYWxhciA9IGZsb2F0KCBtYXhNSVBMZXZlbCApO1xcblx0XHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciAtIDAuNzkyNDggLSAwLjUgKiBsb2cyKCBwb3cyKCBibGlublNoaW5pbmVzc0V4cG9uZW50ICkgKyAxLjAgKTtcXG5cdFx0cmV0dXJuIGNsYW1wKCBkZXNpcmVkTUlQTGV2ZWwsIDAuMCwgbWF4TUlQTGV2ZWxTY2FsYXIgKTtcXG5cdH1cXG5cdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGZsb2F0IGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcXG5cdFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cdFx0XHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXHRcdCNlbmRpZlxcblx0XHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXHRcdFx0ZmxvYXQgZmxpcE5vcm1hbCA9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cdFx0I2Vsc2VcXG5cdFx0XHRmbG9hdCBmbGlwTm9ybWFsID0gMS4wO1xcblx0XHQjZW5kaWZcXG5cdFx0cmVmbGVjdFZlYyA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHJlZmxlY3RWZWMsIHZpZXdNYXRyaXggKTtcXG5cdFx0ZmxvYXQgc3BlY3VsYXJNSVBMZXZlbCA9IGdldFNwZWN1bGFyTUlQTGV2ZWwoIGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIG1heE1JUExldmVsICk7XFxuXHRcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXHRcdFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSBmbGlwTm9ybWFsICogdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblx0XHRcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cdFx0XHRcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cdFx0XHQjZWxzZVxcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5UmVmbGVjdFZlYywgc3BlY3VsYXJNSVBMZXZlbCApO1xcblx0XHRcdCNlbmRpZlxcblx0XHRcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblx0XHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cdFx0XHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYocXVlcnlSZWZsZWN0VmVjLCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoYmxpbm5TaGluaW5lc3NFeHBvbmVudCkpO1xcblx0XHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9FUVVJUkVDIClcXG5cdFx0XHR2ZWMyIHNhbXBsZVVWO1xcblx0XHRcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueSAqIDAuNSArIDAuNSApO1xcblx0XHRcdHNhbXBsZVVWLnggPSBhdGFuKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy56LCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cdFx0XHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XFxuXHRcdFx0I2Vsc2VcXG5cdFx0XHRcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cdFx0XHQjZW5kaWZcXG5cdFx0XHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cdFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcXG5cdFx0XHR2ZWMzIHJlZmxlY3RWaWV3ID0gZmxpcE5vcm1hbCAqIG5vcm1hbGl6ZSgodmlld01hdHJpeCAqIHZlYzQoIHJlZmxlY3RWZWMsIDAuMCApKS54eXogKyB2ZWMzKDAuMCwwLjAsMS4wKSk7XFxuXHRcdFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblx0XHRcdFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRExvZEVYVCggZW52TWFwLCByZWZsZWN0Vmlldy54eSAqIDAuNSArIDAuNSwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblx0XHRcdCNlbHNlXFxuXHRcdFx0XHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXHRcdFx0I2VuZGlmXFxuXHRcdFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXHRcdCNlbmRpZlxcblx0XHRyZXR1cm4gZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblx0fVxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2xpZ2h0c19waG9uZ19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbGlnaHRzX3Bob25nX2ZyYWdtZW50J109XCJCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxubWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgPSBzaGluaW5lc3M7XFxubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50J109XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG5zdHJ1Y3QgQmxpbm5QaG9uZ01hdGVyaWFsIHtcXG5cdHZlYzNcdGRpZmZ1c2VDb2xvcjtcXG5cdHZlYzNcdHNwZWN1bGFyQ29sb3I7XFxuXHRmbG9hdFx0c3BlY3VsYXJTaGluaW5lc3M7XFxuXHRmbG9hdFx0c3BlY3VsYXJTdHJlbmd0aDtcXG59O1xcbnZvaWQgUkVfRGlyZWN0X0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cdFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cdCNlbmRpZlxcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyApICogbWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aDtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfQmxpbm5QaG9uZyggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XHRcdFx0XHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXHRcdFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nXFxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXHQoMClcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9saWdodHNfcGh5c2ljYWxfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xpZ2h0c19waHlzaWNhbF9mcmFnbWVudCddPVwiUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiICogKCAxLjAgLSBtZXRhbG5lc3NGYWN0b3IgKTtcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IGNsYW1wKCByb3VnaG5lc3NGYWN0b3IsIDAuMDQsIDEuMCApO1xcbiNpZmRlZiBTVEFOREFSRFxcblx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggMC4wNCApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG4jZWxzZVxcblx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggMC4xNiAqIHBvdzIoIHJlZmxlY3Rpdml0eSApICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL2xpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudCddPVwic3RydWN0IFBoeXNpY2FsTWF0ZXJpYWwge1xcblx0dmVjM1x0ZGlmZnVzZUNvbG9yO1xcblx0ZmxvYXRcdHNwZWN1bGFyUm91Z2huZXNzO1xcblx0dmVjM1x0c3BlY3VsYXJDb2xvcjtcXG5cdCNpZm5kZWYgU1RBTkRBUkRcXG5cdCNlbmRpZlxcbn07XFxudm9pZCBSRV9EaXJlY3RfUGh5c2ljYWwoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXHRcdGlycmFkaWFuY2UgKj0gUEk7XFxuXHQjZW5kaWZcXG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG5cdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0U3BlY3VsYXJfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgcmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSByYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcdFx0XHRcdFJFX0RpcmVjdF9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXHRcdFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3RTcGVjdWxhclx0XHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXFxuI2RlZmluZSBNYXRlcmlhbF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApICAgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblx0cmV0dXJuIHNhdHVyYXRlKCBwb3coIGRvdE5WICsgYW1iaWVudE9jY2x1c2lvbiwgZXhwMiggLSAxNi4wICogcm91Z2huZXNzIC0gMS4wICkgKSAtIDEuMCArIGFtYmllbnRPY2NsdXNpb24gKTtcXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbGlnaHRzX3RlbXBsYXRlLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydsaWdodHNfdGVtcGxhdGUnXT1cIlxcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSAtIHZWaWV3UG9zaXRpb247XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG5JbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0O1xcbiNpZiAoIE5VTV9QT0lOVF9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblx0XHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXHRcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHBvaW50TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cdFx0I2VuZGlmXFxuXHRcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cdH1cXG4jZW5kaWZcXG4jaWYgKCBOVU1fU1BPVF9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cdFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cdFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cdFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggc3BvdExpZ2h0LnNoYWRvdywgZGlyZWN0TGlnaHQudmlzaWJsZSApICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cdFx0I2VuZGlmXFxuXHRcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cdH1cXG4jZW5kaWZcXG4jaWYgKCBOVU1fRElSX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblx0XHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXHRcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXHRcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXHRcdCNlbmRpZlxcblx0XHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0RGlmZnVzZSApXFxuXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblx0XHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG5cdFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXHRcdFx0bGlnaHRNYXBJcnJhZGlhbmNlICo9IFBJO1xcblx0XHQjZW5kaWZcXG5cdFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXHQjZW5kaWZcXG5cdCNpZiAoIE5VTV9IRU1JX0xJR0hUUyA+IDAgKVxcblx0XHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXHRcdH1cXG5cdCNlbmRpZlxcblx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblx0IFx0aXJyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBnZW9tZXRyeSwgOCApO1xcblx0I2VuZGlmXFxuXHRSRV9JbmRpcmVjdERpZmZ1c2UoIGlycmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblx0dmVjMyByYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblx0UkVfSW5kaXJlY3RTcGVjdWxhciggcmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9sb2dkZXB0aGJ1Zl9mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbG9nZGVwdGhidWZfZnJhZ21lbnQnXT1cIiNpZiBkZWZpbmVkKFVTRV9MT0dERVBUSEJVRikgJiYgZGVmaW5lZChVU0VfTE9HREVQVEhCVUZfRVhUKVxcblx0Z2xfRnJhZ0RlcHRoRVhUID0gbG9nMih2RnJhZ0RlcHRoKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbG9nZGVwdGhidWZfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcblx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cdFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbG9nZGVwdGhidWZfcGFyc192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xvZ2RlcHRoYnVmX3BhcnNfdmVydGV4J109XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblx0XHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXHQjZW5kaWZcXG5cdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9sb2dkZXB0aGJ1Zl92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xvZ2RlcHRoYnVmX3ZlcnRleCddPVwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblx0Z2xfUG9zaXRpb24ueiA9IGxvZzIobWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkpICogbG9nRGVwdGhCdWZGQztcXG5cdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXHRcdHZGcmFnRGVwdGggPSAxLjAgKyBnbF9Qb3NpdGlvbi53O1xcblx0I2Vsc2VcXG5cdFx0Z2xfUG9zaXRpb24ueiA9IChnbF9Qb3NpdGlvbi56IC0gMS4wKSAqIGdsX1Bvc2l0aW9uLnc7XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9tYXBfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21hcF9mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9NQVBcXG5cdHZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VXYgKTtcXG5cdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXHRkaWZmdXNlQ29sb3IgKj0gdGV4ZWxDb2xvcjtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9tYXBfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbWFwX3BhcnNfZnJhZ21lbnQnXT1cIiNpZmRlZiBVU0VfTUFQXFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbWFwX3BhcnRpY2xlX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtYXBfcGFydGljbGVfZnJhZ21lbnQnXT1cIiNpZmRlZiBVU0VfTUFQXFxuXHR2ZWM0IG1hcFRleGVsID0gdGV4dHVyZTJEKCBtYXAsIHZlYzIoIGdsX1BvaW50Q29vcmQueCwgMS4wIC0gZ2xfUG9pbnRDb29yZC55ICkgKiBvZmZzZXRSZXBlYXQuencgKyBvZmZzZXRSZXBlYXQueHkgKTtcXG5cdGRpZmZ1c2VDb2xvciAqPSBtYXBUZXhlbFRvTGluZWFyKCBtYXBUZXhlbCApO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL21hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9NQVBcXG5cdHVuaWZvcm0gdmVjNCBvZmZzZXRSZXBlYXQ7XFxuXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbWV0YWxuZXNzbWFwX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtZXRhbG5lc3NtYXBfZnJhZ21lbnQnXT1cImZsb2F0IG1ldGFsbmVzc0ZhY3RvciA9IG1ldGFsbmVzcztcXG4jaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblx0dmVjNCB0ZXhlbE1ldGFsbmVzcyA9IHRleHR1cmUyRCggbWV0YWxuZXNzTWFwLCB2VXYgKTtcXG5cdG1ldGFsbmVzc0ZhY3RvciAqPSB0ZXhlbE1ldGFsbmVzcy5yO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL21ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cdHVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9tb3JwaG5vcm1hbF92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21vcnBobm9ybWFsX3ZlcnRleCddPVwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMCAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDEgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcblx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwyIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMyAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21vcnBodGFyZ2V0X3BhcnNfdmVydGV4J109XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcblx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcblx0I2Vsc2VcXG5cdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXHQjZW5kaWZcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9tb3JwaHRhcmdldF92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21vcnBodGFyZ2V0X3ZlcnRleCddPVwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQwIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDEgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0MiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQzIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcblx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ1IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNSBdO1xcblx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDYgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxuXHR0cmFuc2Zvcm1lZCArPSAoIG1vcnBoVGFyZ2V0NyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDcgXTtcXG5cdCNlbmRpZlxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL25vcm1hbF9mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbm9ybWFsX2ZyYWdtZW50J109XCIjaWZkZWYgRkxBVF9TSEFERURcXG5cdHZlYzMgZmR4ID0gdmVjMyggZEZkeCggdlZpZXdQb3NpdGlvbi54ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueSApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnogKSApO1xcblx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIGZkeCwgZmR5ICkgKTtcXG4jZWxzZVxcblx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcXG5cdCNpZmRlZiBET1VCTEVfU0lERURcXG5cdFx0bm9ybWFsID0gbm9ybWFsICogKCAtMS4wICsgMi4wICogZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKTtcXG5cdCNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXHRub3JtYWwgPSBwZXJ0dXJiTm9ybWFsMkFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCApO1xcbiNlbGlmIGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG5cdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWxBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIGRIZHh5X2Z3ZCgpICk7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvbm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ25vcm1hbG1hcF9wYXJzX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX05PUk1BTE1BUFxcblx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblx0dW5pZm9ybSB2ZWMyIG5vcm1hbFNjYWxlO1xcblx0dmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSApIHtcXG5cdFx0dmVjMyBxMCA9IGRGZHgoIGV5ZV9wb3MueHl6ICk7XFxuXHRcdHZlYzMgcTEgPSBkRmR5KCBleWVfcG9zLnh5eiApO1xcblx0XHR2ZWMyIHN0MCA9IGRGZHgoIHZVdi5zdCApO1xcblx0XHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcblx0XHR2ZWMzIFMgPSBub3JtYWxpemUoIHEwICogc3QxLnQgLSBxMSAqIHN0MC50ICk7XFxuXHRcdHZlYzMgVCA9IG5vcm1hbGl6ZSggLXEwICogc3QxLnMgKyBxMSAqIHN0MC5zICk7XFxuXHRcdHZlYzMgTiA9IG5vcm1hbGl6ZSggc3VyZl9ub3JtICk7XFxuXHRcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXHRcdG1hcE4ueHkgPSBub3JtYWxTY2FsZSAqIG1hcE4ueHk7XFxuXHRcdG1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xcblx0XHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXHR9XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvcGFja2luZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1sncGFja2luZyddPVwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcbiAgcmV0dXJuIG5vcm1hbGl6ZSggbm9ybWFsICkgKiAwLjUgKyAwLjU7XFxufVxcbnZlYzMgdW5wYWNrUkdCVG9Ob3JtYWwoIGNvbnN0IGluIHZlYzMgcmdiICkge1xcbiAgcmV0dXJuIDEuMCAtIDIuMCAqIHJnYi54eXo7XFxufVxcbmNvbnN0IGZsb2F0IFBhY2tVcHNjYWxlID0gMjU2LiAvIDI1NS47Y29uc3QgZmxvYXQgVW5wYWNrRG93bnNjYWxlID0gMjU1LiAvIDI1Ni47XFxuY29uc3QgdmVjMyBQYWNrRmFjdG9ycyA9IHZlYzMoIDI1Ni4gKiAyNTYuICogMjU2LiwgMjU2LiAqIDI1Ni4sICAyNTYuICk7XFxuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XFxuY29uc3QgZmxvYXQgU2hpZnRSaWdodDggPSAxLiAvIDI1Ni47XFxudmVjNCBwYWNrRGVwdGhUb1JHQkEoIGNvbnN0IGluIGZsb2F0IHYgKSB7XFxuXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcXG5cdHIueXp3IC09IHIueHl6ICogU2hpZnRSaWdodDg7XHRyZXR1cm4gciAqIFBhY2tVcHNjYWxlO1xcbn1cXG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xcblx0cmV0dXJuIGRvdCggdiwgVW5wYWNrRmFjdG9ycyApO1xcbn1cXG5mbG9hdCB2aWV3WlRvT3J0aG9EZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG4gIHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XFxufVxcbmZsb2F0IE9ydGhvRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcbiAgcmV0dXJuIGxpbmVhckNsaXBaICogKCBuZWFyIC0gZmFyICkgLSBuZWFyO1xcbn1cXG5mbG9hdCB2aWV3WlRvUGVyc3BlY3RpdmVEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG4gIHJldHVybiAoKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCggZmFyIC0gbmVhciApICogdmlld1ogKTtcXG59XFxuZmxvYXQgcGVyc3BlY3RpdmVEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGludkNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuICByZXR1cm4gKCBuZWFyICogZmFyICkgLyAoICggZmFyIC0gbmVhciApICogaW52Q2xpcFogLSBmYXIgKTtcXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvcHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1sncHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudCddPVwiI2lmZGVmIFBSRU1VTFRJUExJRURfQUxQSEFcXG5cdGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvcHJvamVjdF92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3Byb2plY3RfdmVydGV4J109XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiBza2lubmVkO1xcbiNlbHNlXFxuXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9yb3VnaG5lc3NtYXBfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3JvdWdobmVzc21hcF9mcmFnbWVudCddPVwiZmxvYXQgcm91Z2huZXNzRmFjdG9yID0gcm91Z2huZXNzO1xcbiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXHR2ZWM0IHRleGVsUm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApO1xcblx0cm91Z2huZXNzRmFjdG9yICo9IHRleGVsUm91Z2huZXNzLnI7XFxuI2VuZGlmXFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvcm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3JvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50J109XCIjaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblx0dW5pZm9ybSBzYW1wbGVyMkQgcm91Z2huZXNzTWFwO1xcbiNlbmRpZlwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3NoYWRvd21hcF9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydzaGFkb3dtYXBfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxTaGFkb3dNYXBbIE5VTV9ESVJfTElHSFRTIF07XFxuXHRcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BvdFNoYWRvd01hcFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXHRcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXHRcdHVuaWZvcm0gc2FtcGxlcjJEIHBvaW50U2hhZG93TWFwWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXHRcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblx0I2VuZGlmXFxuXHRmbG9hdCB0ZXh0dXJlMkRDb21wYXJlKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICkge1xcblx0XHRyZXR1cm4gc3RlcCggY29tcGFyZSwgdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggZGVwdGhzLCB1diApICkgKTtcXG5cdH1cXG5cdGZsb2F0IHRleHR1cmUyRFNoYWRvd0xlcnAoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgc2l6ZSwgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cdFx0Y29uc3QgdmVjMiBvZmZzZXQgPSB2ZWMyKCAwLjAsIDEuMCApO1xcblx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2l6ZTtcXG5cdFx0dmVjMiBjZW50cm9pZFVWID0gZmxvb3IoIHV2ICogc2l6ZSArIDAuNSApIC8gc2l6ZTtcXG5cdFx0ZmxvYXQgbGIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHgsIGNvbXBhcmUgKTtcXG5cdFx0ZmxvYXQgbHQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHksIGNvbXBhcmUgKTtcXG5cdFx0ZmxvYXQgcmIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXgsIGNvbXBhcmUgKTtcXG5cdFx0ZmxvYXQgcnQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXksIGNvbXBhcmUgKTtcXG5cdFx0dmVjMiBmID0gZnJhY3QoIHV2ICogc2l6ZSArIDAuNSApO1xcblx0XHRmbG9hdCBhID0gbWl4KCBsYiwgbHQsIGYueSApO1xcblx0XHRmbG9hdCBiID0gbWl4KCByYiwgcnQsIGYueSApO1xcblx0XHRmbG9hdCBjID0gbWl4KCBhLCBiLCBmLnggKTtcXG5cdFx0cmV0dXJuIGM7XFxuXHR9XFxuXHRmbG9hdCBnZXRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblx0XHRzaGFkb3dDb29yZC54eXogLz0gc2hhZG93Q29vcmQudztcXG5cdFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xcblx0XHRidmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XFxuXHRcdGJvb2wgaW5GcnVzdHVtID0gYWxsKCBpbkZydXN0dW1WZWMgKTtcXG5cdFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcblx0XHRib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xcblx0XHRpZiAoIGZydXN0dW1UZXN0ICkge1xcblx0XHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5cdFx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cdFx0XHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblx0XHRcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXHRcdFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cdFx0XHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblx0XHRcdHJldHVybiAoXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblx0XHRcdFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXHRcdFx0KSAqICggMS4wIC8gOS4wICk7XFxuXHRcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cdFx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cdFx0XHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblx0XHRcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXHRcdFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cdFx0XHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblx0XHRcdHJldHVybiAoXFxuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblx0XHRcdFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cdFx0XHRcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblx0XHRcdFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXHRcdFx0KSAqICggMS4wIC8gOS4wICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKTtcXG5cdFx0I2VuZGlmXFxuXHRcdH1cXG5cdFx0cmV0dXJuIDEuMDtcXG5cdH1cXG5cdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcXG5cdFx0dmVjMyBhYnNWID0gYWJzKCB2ICk7XFxuXHRcdGZsb2F0IHNjYWxlVG9DdWJlID0gMS4wIC8gbWF4KCBhYnNWLngsIG1heCggYWJzVi55LCBhYnNWLnogKSApO1xcblx0XHRhYnNWICo9IHNjYWxlVG9DdWJlO1xcblx0XHR2ICo9IHNjYWxlVG9DdWJlICogKCAxLjAgLSAyLjAgKiB0ZXhlbFNpemVZICk7XFxuXHRcdHZlYzIgcGxhbmFyID0gdi54eTtcXG5cdFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcXG5cdFx0ZmxvYXQgYWxtb3N0T25lID0gMS4wIC0gYWxtb3N0QVRleGVsO1xcblx0XHRpZiAoIGFic1YueiA+PSBhbG1vc3RPbmUgKSB7XFxuXHRcdFx0aWYgKCB2LnogPiAwLjAgKVxcblx0XHRcdFx0cGxhbmFyLnggPSA0LjAgLSB2Lng7XFxuXHRcdH0gZWxzZSBpZiAoIGFic1YueCA+PSBhbG1vc3RPbmUgKSB7XFxuXHRcdFx0ZmxvYXQgc2lnblggPSBzaWduKCB2LnggKTtcXG5cdFx0XHRwbGFuYXIueCA9IHYueiAqIHNpZ25YICsgMi4wICogc2lnblg7XFxuXHRcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XFxuXHRcdFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcXG5cdFx0XHRwbGFuYXIueCA9IHYueCArIDIuMCAqIHNpZ25ZICsgMi4wO1xcblx0XHRcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XFxuXHRcdH1cXG5cdFx0cmV0dXJuIHZlYzIoIDAuMTI1LCAwLjI1ICkgKiBwbGFuYXIgKyB2ZWMyKCAwLjM3NSwgMC43NSApO1xcblx0fVxcblx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblx0XHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gKCBzaGFkb3dNYXBTaXplICogdmVjMiggNC4wLCAyLjAgKSApO1xcblx0XHR2ZWMzIGxpZ2h0VG9Qb3NpdGlvbiA9IHNoYWRvd0Nvb3JkLnh5ejtcXG5cdFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcXG5cdFx0ZmxvYXQgZHAgPSAoIGxlbmd0aCggbGlnaHRUb1Bvc2l0aW9uICkgLSBzaGFkb3dCaWFzICkgLyAxMDAwLjA7XFxuXHRcdCNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKSB8fCBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXFxuXHRcdFx0dmVjMiBvZmZzZXQgPSB2ZWMyKCAtIDEsIDEgKSAqIHNoYWRvd1JhZGl1cyAqIHRleGVsU2l6ZS55O1xcblx0XHRcdHJldHVybiAoXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXHRcdFx0XHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cdFx0XHRcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh4LCB0ZXhlbFNpemUueSApLCBkcCApXFxuXHRcdFx0KSAqICggMS4wIC8gOS4wICk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XFxuXHRcdCNlbmRpZlxcblx0fVxcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3NoYWRvd21hcF9wYXJzX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snc2hhZG93bWFwX3BhcnNfdmVydGV4J109XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblx0XHR1bmlmb3JtIG1hdDQgZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIE5VTV9ESVJfTElHSFRTIF07XFxuXHRcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cdFx0dW5pZm9ybSBtYXQ0IHNwb3RTaGFkb3dNYXRyaXhbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblx0XHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXHQjZW5kaWZcXG5cdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblx0XHR1bmlmb3JtIG1hdDQgcG9pbnRTaGFkb3dNYXRyaXhbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cdFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9zaGFkb3dtYXBfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydzaGFkb3dtYXBfdmVydGV4J109XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gPSBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cdH1cXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cdFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cdH1cXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblx0XHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXHR9XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9zaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NoYWRvd21hc2tfcGFyc19mcmFnbWVudCddPVwiZmxvYXQgZ2V0U2hhZG93TWFzaygpIHtcXG5cdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cdFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXHRcdHNoYWRvdyAqPSBib29sKCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdyApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cdH1cXG5cdCNlbmRpZlxcblx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cdFx0c2hhZG93ICo9IGJvb2woIHNwb3RMaWdodC5zaGFkb3cgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblx0fVxcblx0I2VuZGlmXFxuXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXHRcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblx0XHRzaGFkb3cgKj0gYm9vbCggcG9pbnRMaWdodC5zaGFkb3cgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cdH1cXG5cdCNlbmRpZlxcblx0I2VuZGlmXFxuXHRyZXR1cm4gc2hhZG93O1xcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9za2luYmFzZV92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NraW5iYXNlX3ZlcnRleCddPVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxuXHRtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcXG5cdG1hdDQgYm9uZU1hdFogPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueiApO1xcblx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvc2tpbm5pbmdfcGFyc192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NraW5uaW5nX3BhcnNfdmVydGV4J109XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeDtcXG5cdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4SW52ZXJzZTtcXG5cdCNpZmRlZiBCT05FX1RFWFRVUkVcXG5cdFx0dW5pZm9ybSBzYW1wbGVyMkQgYm9uZVRleHR1cmU7XFxuXHRcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlV2lkdGg7XFxuXHRcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlSGVpZ2h0O1xcblx0XHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuXHRcdFx0ZmxvYXQgaiA9IGkgKiA0LjA7XFxuXHRcdFx0ZmxvYXQgeCA9IG1vZCggaiwgZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKSApO1xcblx0XHRcdGZsb2F0IHkgPSBmbG9vciggaiAvIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICkgKTtcXG5cdFx0XHRmbG9hdCBkeCA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICk7XFxuXHRcdFx0ZmxvYXQgZHkgPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVIZWlnaHQgKTtcXG5cdFx0XHR5ID0gZHkgKiAoIHkgKyAwLjUgKTtcXG5cdFx0XHR2ZWM0IHYxID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAwLjUgKSwgeSApICk7XFxuXHRcdFx0dmVjNCB2MiA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMS41ICksIHkgKSApO1xcblx0XHRcdHZlYzQgdjMgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDIuNSApLCB5ICkgKTtcXG5cdFx0XHR2ZWM0IHY0ID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAzLjUgKSwgeSApICk7XFxuXHRcdFx0bWF0NCBib25lID0gbWF0NCggdjEsIHYyLCB2MywgdjQgKTtcXG5cdFx0XHRyZXR1cm4gYm9uZTtcXG5cdFx0fVxcblx0I2Vsc2VcXG5cdFx0dW5pZm9ybSBtYXQ0IGJvbmVNYXRyaWNlc1sgTUFYX0JPTkVTIF07XFxuXHRcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cdFx0XHRtYXQ0IGJvbmUgPSBib25lTWF0cmljZXNbIGludChpKSBdO1xcblx0XHRcdHJldHVybiBib25lO1xcblx0XHR9XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9za2lubmluZ192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NraW5uaW5nX3ZlcnRleCddPVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblx0dmVjNCBza2luVmVydGV4ID0gYmluZE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xcblx0c2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuXHRza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5cdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xcblx0c2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XFxuXHRza2lubmVkICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZDtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9za2lubm9ybWFsX3ZlcnRleC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snc2tpbm5vcm1hbF92ZXJ0ZXgnXT1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xcblx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5cdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC55ICogYm9uZU1hdFk7XFxuXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xcblx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LncgKiBib25lTWF0VztcXG5cdHNraW5NYXRyaXggID0gYmluZE1hdHJpeEludmVyc2UgKiBza2luTWF0cml4ICogYmluZE1hdHJpeDtcXG5cdG9iamVjdE5vcm1hbCA9IHZlYzQoIHNraW5NYXRyaXggKiB2ZWM0KCBvYmplY3ROb3JtYWwsIDAuMCApICkueHl6O1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3NwZWN1bGFybWFwX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydzcGVjdWxhcm1hcF9mcmFnbWVudCddPVwiZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcXG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXHR2ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTtcXG5cdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5cdHNwZWN1bGFyU3RyZW5ndGggPSAxLjA7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCddPVwiI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvdG9uZW1hcHBpbmdfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3RvbmVtYXBwaW5nX2ZyYWdtZW50J109XCIjaWYgZGVmaW5lZCggVE9ORV9NQVBQSU5HIClcXG4gIGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3RvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3RvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQnXT1cIiNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ1doaXRlUG9pbnQ7XFxudmVjMyBMaW5lYXJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XFxufVxcbnZlYzMgUmVpbmhhcmRUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuICByZXR1cm4gc2F0dXJhdGUoIGNvbG9yIC8gKCB2ZWMzKCAxLjAgKSArIGNvbG9yICkgKTtcXG59XFxuI2RlZmluZSBVbmNoYXJ0ZWQySGVscGVyKCB4ICkgbWF4KCAoICggeCAqICggMC4xNSAqIHggKyAwLjEwICogMC41MCApICsgMC4yMCAqIDAuMDIgKSAvICggeCAqICggMC4xNSAqIHggKyAwLjUwICkgKyAwLjIwICogMC4zMCApICkgLSAwLjAyIC8gMC4zMCwgdmVjMyggMC4wICkgKVxcbnZlYzMgVW5jaGFydGVkMlRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcbiAgY29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG4gIHJldHVybiBzYXR1cmF0ZSggVW5jaGFydGVkMkhlbHBlciggY29sb3IgKSAvIFVuY2hhcnRlZDJIZWxwZXIoIHZlYzMoIHRvbmVNYXBwaW5nV2hpdGVQb2ludCApICkgKTtcXG59XFxudmVjMyBPcHRpbWl6ZWRDaW5lb25Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuICBjb2xvciA9IG1heCggdmVjMyggMC4wICksIGNvbG9yIC0gMC4wMDQgKTtcXG4gIHJldHVybiBwb3coICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMC41ICkgKSAvICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMS43ICkgKyAwLjA2ICksIHZlYzMoIDIuMiApICk7XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3V2Ml9wYXJzX2ZyYWdtZW50Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWyd1djJfcGFyc19mcmFnbWVudCddPVwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay91djJfcGFyc192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3V2Ml9wYXJzX3ZlcnRleCddPVwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXHRhdHRyaWJ1dGUgdmVjMiB1djI7XFxuXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay91djJfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWyd1djJfdmVydGV4J109XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cdHZVdjIgPSB1djI7XFxuI2VuZGlmXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyQ2h1bmsvdXZfcGFyc19mcmFnbWVudC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1sndXZfcGFyc19mcmFnbWVudCddPVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckNodW5rL3V2X3BhcnNfdmVydGV4Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWyd1dl9wYXJzX3ZlcnRleCddPVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXHR2YXJ5aW5nIHZlYzIgdlV2O1xcblx0dW5pZm9ybSB2ZWM0IG9mZnNldFJlcGVhdDtcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay91dl92ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3V2X3ZlcnRleCddPVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXHR2VXYgPSB1diAqIG9mZnNldFJlcGVhdC56dyArIG9mZnNldFJlcGVhdC54eTtcXG4jZW5kaWZcIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay93b3JsZHBvc192ZXJ0ZXguZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3dvcmxkcG9zX3ZlcnRleCddPVwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIHx8IGRlZmluZWQoIFBIWVNJQ0FMICkgfHwgZGVmaW5lZCggTEFNQkVSVCApIHx8IGRlZmluZWQgKCBVU0VfU0hBRE9XTUFQIClcXG5cdCNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cdFx0dmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiBza2lubmVkO1xcblx0I2Vsc2VcXG5cdFx0dmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9Vbmlmb3Jtc1V0aWxzLmpzXG4vKipcclxuICogVW5pZm9ybSBVdGlsaXRpZXNcclxuICovVEhSRUUuVW5pZm9ybXNVdGlscz17bWVyZ2U6ZnVuY3Rpb24odW5pZm9ybXMpe3ZhciBtZXJnZWQ9e307Zm9yKHZhciB1PTA7dTx1bmlmb3Jtcy5sZW5ndGg7dSsrKXt2YXIgdG1wPXRoaXMuY2xvbmUodW5pZm9ybXNbdV0pO2Zvcih2YXIgcCBpbiB0bXApe21lcmdlZFtwXT10bXBbcF07fX1yZXR1cm4gbWVyZ2VkO30sY2xvbmU6ZnVuY3Rpb24odW5pZm9ybXNfc3JjKXt2YXIgdW5pZm9ybXNfZHN0PXt9O2Zvcih2YXIgdSBpbiB1bmlmb3Jtc19zcmMpe3VuaWZvcm1zX2RzdFt1XT17fTtmb3IodmFyIHAgaW4gdW5pZm9ybXNfc3JjW3VdKXt2YXIgcGFyYW1ldGVyX3NyYz11bmlmb3Jtc19zcmNbdV1bcF07aWYocGFyYW1ldGVyX3NyYyBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yfHxwYXJhbWV0ZXJfc3JjIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMnx8cGFyYW1ldGVyX3NyYyBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjN8fHBhcmFtZXRlcl9zcmMgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3I0fHxwYXJhbWV0ZXJfc3JjIGluc3RhbmNlb2YgVEhSRUUuTWF0cml4M3x8cGFyYW1ldGVyX3NyYyBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDR8fHBhcmFtZXRlcl9zcmMgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlKXt1bmlmb3Jtc19kc3RbdV1bcF09cGFyYW1ldGVyX3NyYy5jbG9uZSgpO31lbHNlIGlmKEFycmF5LmlzQXJyYXkocGFyYW1ldGVyX3NyYykpe3VuaWZvcm1zX2RzdFt1XVtwXT1wYXJhbWV0ZXJfc3JjLnNsaWNlKCk7fWVsc2V7dW5pZm9ybXNfZHN0W3VdW3BdPXBhcmFtZXRlcl9zcmM7fX19cmV0dXJuIHVuaWZvcm1zX2RzdDt9fTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9Vbmlmb3Jtc0xpYi5qc1xuLyoqXHJcbiAqIFVuaWZvcm1zIGxpYnJhcnkgZm9yIHNoYXJlZCB3ZWJnbCBzaGFkZXJzXHJcbiAqL1RIUkVFLlVuaWZvcm1zTGliPXtjb21tb246e1wiZGlmZnVzZVwiOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigweGVlZWVlZSl9LFwib3BhY2l0eVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxLjB9LFwibWFwXCI6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sXCJvZmZzZXRSZXBlYXRcIjp7dHlwZTpcInY0XCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjQoMCwwLDEsMSl9LFwic3BlY3VsYXJNYXBcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcImFscGhhTWFwXCI6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sXCJlbnZNYXBcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcImZsaXBFbnZNYXBcIjp7dHlwZTpcIjFmXCIsdmFsdWU6LTF9LFwicmVmbGVjdGl2aXR5XCI6e3R5cGU6XCIxZlwiLHZhbHVlOjEuMH0sXCJyZWZyYWN0aW9uUmF0aW9cIjp7dHlwZTpcIjFmXCIsdmFsdWU6MC45OH19LGFvbWFwOntcImFvTWFwXCI6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sXCJhb01hcEludGVuc2l0eVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxfX0sbGlnaHRtYXA6e1wibGlnaHRNYXBcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcImxpZ2h0TWFwSW50ZW5zaXR5XCI6e3R5cGU6XCIxZlwiLHZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7XCJlbWlzc2l2ZU1hcFwiOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9fSxidW1wbWFwOntcImJ1bXBNYXBcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcImJ1bXBTY2FsZVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxfX0sbm9ybWFsbWFwOntcIm5vcm1hbE1hcFwiOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LFwibm9ybWFsU2NhbGVcIjp7dHlwZTpcInYyXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMSwxKX19LGRpc3BsYWNlbWVudG1hcDp7XCJkaXNwbGFjZW1lbnRNYXBcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcImRpc3BsYWNlbWVudFNjYWxlXCI6e3R5cGU6XCIxZlwiLHZhbHVlOjF9LFwiZGlzcGxhY2VtZW50Qmlhc1wiOnt0eXBlOlwiMWZcIix2YWx1ZTowfX0scm91Z2huZXNzbWFwOntcInJvdWdobmVzc01hcFwiOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9fSxtZXRhbG5lc3NtYXA6e1wibWV0YWxuZXNzTWFwXCI6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH19LGZvZzp7XCJmb2dEZW5zaXR5XCI6e3R5cGU6XCIxZlwiLHZhbHVlOjAuMDAwMjV9LFwiZm9nTmVhclwiOnt0eXBlOlwiMWZcIix2YWx1ZToxfSxcImZvZ0ZhclwiOnt0eXBlOlwiMWZcIix2YWx1ZToyMDAwfSxcImZvZ0NvbG9yXCI6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDB4ZmZmZmZmKX19LGxpZ2h0czp7XCJhbWJpZW50TGlnaHRDb2xvclwiOnt0eXBlOlwiM2Z2XCIsdmFsdWU6W119LFwiZGlyZWN0aW9uYWxMaWdodHNcIjp7dHlwZTpcInNhXCIsdmFsdWU6W10scHJvcGVydGllczp7XCJkaXJlY3Rpb25cIjp7dHlwZTpcInYzXCJ9LFwiY29sb3JcIjp7dHlwZTpcImNcIn0sXCJzaGFkb3dcIjp7dHlwZTpcIjFpXCJ9LFwic2hhZG93Qmlhc1wiOnt0eXBlOlwiMWZcIn0sXCJzaGFkb3dSYWRpdXNcIjp7dHlwZTpcIjFmXCJ9LFwic2hhZG93TWFwU2l6ZVwiOnt0eXBlOlwidjJcIn19fSxcImRpcmVjdGlvbmFsU2hhZG93TWFwXCI6e3R5cGU6XCJ0dlwiLHZhbHVlOltdfSxcImRpcmVjdGlvbmFsU2hhZG93TWF0cml4XCI6e3R5cGU6XCJtNHZcIix2YWx1ZTpbXX0sXCJzcG90TGlnaHRzXCI6e3R5cGU6XCJzYVwiLHZhbHVlOltdLHByb3BlcnRpZXM6e1wiY29sb3JcIjp7dHlwZTpcImNcIn0sXCJwb3NpdGlvblwiOnt0eXBlOlwidjNcIn0sXCJkaXJlY3Rpb25cIjp7dHlwZTpcInYzXCJ9LFwiZGlzdGFuY2VcIjp7dHlwZTpcIjFmXCJ9LFwiY29uZUNvc1wiOnt0eXBlOlwiMWZcIn0sXCJwZW51bWJyYUNvc1wiOnt0eXBlOlwiMWZcIn0sXCJkZWNheVwiOnt0eXBlOlwiMWZcIn0sXCJzaGFkb3dcIjp7dHlwZTpcIjFpXCJ9LFwic2hhZG93Qmlhc1wiOnt0eXBlOlwiMWZcIn0sXCJzaGFkb3dSYWRpdXNcIjp7dHlwZTpcIjFmXCJ9LFwic2hhZG93TWFwU2l6ZVwiOnt0eXBlOlwidjJcIn19fSxcInNwb3RTaGFkb3dNYXBcIjp7dHlwZTpcInR2XCIsdmFsdWU6W119LFwic3BvdFNoYWRvd01hdHJpeFwiOnt0eXBlOlwibTR2XCIsdmFsdWU6W119LFwicG9pbnRMaWdodHNcIjp7dHlwZTpcInNhXCIsdmFsdWU6W10scHJvcGVydGllczp7XCJjb2xvclwiOnt0eXBlOlwiY1wifSxcInBvc2l0aW9uXCI6e3R5cGU6XCJ2M1wifSxcImRlY2F5XCI6e3R5cGU6XCIxZlwifSxcImRpc3RhbmNlXCI6e3R5cGU6XCIxZlwifSxcInNoYWRvd1wiOnt0eXBlOlwiMWlcIn0sXCJzaGFkb3dCaWFzXCI6e3R5cGU6XCIxZlwifSxcInNoYWRvd1JhZGl1c1wiOnt0eXBlOlwiMWZcIn0sXCJzaGFkb3dNYXBTaXplXCI6e3R5cGU6XCJ2MlwifX19LFwicG9pbnRTaGFkb3dNYXBcIjp7dHlwZTpcInR2XCIsdmFsdWU6W119LFwicG9pbnRTaGFkb3dNYXRyaXhcIjp7dHlwZTpcIm00dlwiLHZhbHVlOltdfSxcImhlbWlzcGhlcmVMaWdodHNcIjp7dHlwZTpcInNhXCIsdmFsdWU6W10scHJvcGVydGllczp7XCJkaXJlY3Rpb25cIjp7dHlwZTpcInYzXCJ9LFwic2t5Q29sb3JcIjp7dHlwZTpcImNcIn0sXCJncm91bmRDb2xvclwiOnt0eXBlOlwiY1wifX19fSxwb2ludHM6e1wiZGlmZnVzZVwiOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigweGVlZWVlZSl9LFwib3BhY2l0eVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxLjB9LFwic2l6ZVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxLjB9LFwic2NhbGVcIjp7dHlwZTpcIjFmXCIsdmFsdWU6MS4wfSxcIm1hcFwiOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LFwib2Zmc2V0UmVwZWF0XCI6e3R5cGU6XCJ2NFwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3I0KDAsMCwxLDEpfX19Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9jdWJlX2ZyYWcuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2N1YmVfZnJhZyddPVwidW5pZm9ybSBzYW1wbGVyQ3ViZSB0Q3ViZTtcXG51bmlmb3JtIGZsb2F0IHRGbGlwO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50Plxcblx0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZUN1YmUoIHRDdWJlLCB2ZWMzKCB0RmxpcCAqIHZXb3JsZFBvc2l0aW9uLngsIHZXb3JsZFBvc2l0aW9uLnl6ICkgKTtcXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL2N1YmVfdmVydC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snY3ViZV92ZXJ0J109XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvZGVwdGhfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZGVwdGhfZnJhZyddPVwiI2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblx0dW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50Plxcblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cdFx0ZGlmZnVzZUNvbG9yLmEgPSBvcGFjaXR5O1xcblx0I2VuZGlmXFxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cdFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggZ2xfRnJhZ0Nvb3JkLnogKSwgb3BhY2l0eSApO1xcblx0I2VsaWYgREVQVEhfUEFDS0lORyA9PSAzMjAxXFxuXHRcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZ2xfRnJhZ0Nvb3JkLnogKTtcXG5cdCNlbmRpZlxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvZGVwdGhfdmVydC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZGVwdGhfdmVydCddPVwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4Plxcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4Plxcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9kaXN0YW5jZVJHQkFfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snZGlzdGFuY2VSR0JBX2ZyYWcnXT1cInVuaWZvcm0gdmVjMyBsaWdodFBvcztcXG52YXJ5aW5nIHZlYzQgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluICgpIHtcXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGxlbmd0aCggdldvcmxkUG9zaXRpb24ueHl6IC0gbGlnaHRQb3MueHl6ICkgLyAxMDAwLjAgKTtcXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL2Rpc3RhbmNlUkdCQV92ZXJ0Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydkaXN0YW5jZVJHQkFfdmVydCddPVwidmFyeWluZyB2ZWM0IHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4Plxcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb247XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9lcXVpcmVjdF9mcmFnLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlcXVpcmVjdF9mcmFnJ109XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cdHZlYzMgZGlyZWN0aW9uID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiApO1xcblx0dmVjMiBzYW1wbGVVVjtcXG5cdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggdEZsaXAgKiBkaXJlY3Rpb24ueSAqIC0wLjUgKyAwLjUgKTtcXG5cdHNhbXBsZVVWLnggPSBhdGFuKCBkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblx0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCB0RXF1aXJlY3QsIHNhbXBsZVVWICk7XFxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9lcXVpcmVjdF92ZXJ0Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydlcXVpcmVjdF92ZXJ0J109XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvbGluZWRhc2hlZF9mcmFnLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydsaW5lZGFzaGVkX2ZyYWcnXT1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xcbnVuaWZvcm0gZmxvYXQgdG90YWxTaXplO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cdGlmICggbW9kKCB2TGluZURpc3RhbmNlLCB0b3RhbFNpemUgKSA+IGRhc2hTaXplICkge1xcblx0XHRkaXNjYXJkO1xcblx0fVxcblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9saW5lZGFzaGVkX3ZlcnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ2xpbmVkYXNoZWRfdmVydCddPVwidW5pZm9ybSBmbG9hdCBzY2FsZTtcXG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4Plxcblx0dkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xcblx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcblx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL21lc2hiYXNpY19mcmFnLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtZXNoYmFzaWNfZnJhZyddPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50Plxcblx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0O1xcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2U7XFxuXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50Plxcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9tZXNoYmFzaWNfdmVydC5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbWVzaGJhc2ljX3ZlcnQnXT1cIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8dXZfdmVydGV4Plxcblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cdCNpZmRlZiBVU0VfRU5WTUFQXFxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cdCNlbmRpZlxcblx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4Plxcblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvbWVzaGxhbWJlcnRfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbWVzaGxhbWJlcnRfZnJhZyddPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXHQjaW5jbHVkZSA8bGlnaHRtYXBfZnJhZ21lbnQ+XFxuXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKTtcXG5cdCNpZmRlZiBET1VCTEVfU0lERURcXG5cdFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9ICggZ2xfRnJvbnRGYWNpbmcgKSA/IHZMaWdodEZyb250IDogdkxpZ2h0QmFjaztcXG5cdCNlbHNlXFxuXHRcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSB2TGlnaHRGcm9udDtcXG5cdCNlbmRpZlxcblx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApICogZ2V0U2hhZG93TWFzaygpO1xcblx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50Plxcblx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL21lc2hsYW1iZXJ0X3ZlcnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21lc2hsYW1iZXJ0X3ZlcnQnXT1cIiNkZWZpbmUgTEFNQkVSVFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4Plxcblx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4Plxcblx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8bGlnaHRzX2xhbWJlcnRfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9tZXNocGhvbmdfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbWVzaHBob25nX2ZyYWcnXT1cIiNkZWZpbmUgUEhPTkdcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1xcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGxpZ2h0c19waG9uZ19mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvbWVzaHBob25nX3ZlcnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ21lc2hwaG9uZ192ZXJ0J109XCIjZGVmaW5lIFBIT05HXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8dXZfdmVydGV4Plxcblx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4Plxcblx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4Plxcblx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9tZXNocGh5c2ljYWxfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbWVzaHBoeXNpY2FsX2ZyYWcnXT1cIiNkZWZpbmUgUEhZU0lDQUxcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCByb3VnaG5lc3M7XFxudW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZW52TWFwSW50ZW5zaXR5O1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGxpZ2h0c190ZW1wbGF0ZT5cXG5cdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL21lc2hwaHlzaWNhbF92ZXJ0Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydtZXNocGh5c2ljYWxfdmVydCddPVwiI2RlZmluZSBQSFlTSUNBTFxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4Plxcblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcblx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi9ub3JtYWxfZnJhZy5nbHNsXG5USFJFRS5TaGFkZXJDaHVua1snbm9ybWFsX2ZyYWcnXT1cInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50Plxcblx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcGFja05vcm1hbFRvUkdCKCB2Tm9ybWFsICksIG9wYWNpdHkgKTtcXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL25vcm1hbF92ZXJ0Lmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydub3JtYWxfdmVydCddPVwidmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogbm9ybWFsICk7XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCI7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3NoYWRlcnMvU2hhZGVyTGliL3BvaW50c19mcmFnLmdsc2xcblRIUkVFLlNoYWRlckNodW5rWydwb2ludHNfZnJhZyddPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50Plxcblx0I2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvcG9pbnRzX3ZlcnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3BvaW50c192ZXJ0J109XCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4Plxcblx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcblx0I2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cdFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblx0I2Vsc2VcXG5cdFx0Z2xfUG9pbnRTaXplID0gc2l6ZTtcXG5cdCNlbmRpZlxcblx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcblx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4Plxcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvc2hhZG93X2ZyYWcuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NoYWRvd19mcmFnJ109XCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuMCwgMC4wLCAwLjAsIG9wYWNpdHkgKiAoIDEuMCAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcbn1cXG5cIjsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJMaWIvc2hhZG93X3ZlcnQuZ2xzbFxuVEhSRUUuU2hhZGVyQ2h1bmtbJ3NoYWRvd192ZXJ0J109XCIjaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4Plxcblx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiOy8vIEZpbGU6c3JjL3JlbmRlcmVycy9zaGFkZXJzL1NoYWRlckxpYi5qc1xuLyoqXHJcbiAqIFdlYmdsIFNoYWRlciBMaWJyYXJ5IGZvciB0aHJlZS5qc1xyXG4gKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKi9USFJFRS5TaGFkZXJMaWI9eydiYXNpYyc6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliWydjb21tb24nXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnYW9tYXAnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnZm9nJ11dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ21lc2hiYXNpY192ZXJ0J10sZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ21lc2hiYXNpY19mcmFnJ119LCdsYW1iZXJ0Jzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWJbJ2NvbW1vbiddLFRIUkVFLlVuaWZvcm1zTGliWydhb21hcCddLFRIUkVFLlVuaWZvcm1zTGliWydsaWdodG1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydlbWlzc2l2ZW1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydmb2cnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnbGlnaHRzJ10se1wiZW1pc3NpdmVcIjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ21lc2hsYW1iZXJ0X3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snbWVzaGxhbWJlcnRfZnJhZyddfSwncGhvbmcnOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYlsnY29tbW9uJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ2FvbWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ2xpZ2h0bWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ2VtaXNzaXZlbWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ2J1bXBtYXAnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnbm9ybWFsbWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ2Rpc3BsYWNlbWVudG1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydmb2cnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnbGlnaHRzJ10se1wiZW1pc3NpdmVcIjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApfSxcInNwZWN1bGFyXCI6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDB4MTExMTExKX0sXCJzaGluaW5lc3NcIjp7dHlwZTpcIjFmXCIsdmFsdWU6MzB9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snbWVzaHBob25nX3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snbWVzaHBob25nX2ZyYWcnXX0sJ3N0YW5kYXJkJzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWJbJ2NvbW1vbiddLFRIUkVFLlVuaWZvcm1zTGliWydhb21hcCddLFRIUkVFLlVuaWZvcm1zTGliWydsaWdodG1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydlbWlzc2l2ZW1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydidW1wbWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ25vcm1hbG1hcCddLFRIUkVFLlVuaWZvcm1zTGliWydkaXNwbGFjZW1lbnRtYXAnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsncm91Z2huZXNzbWFwJ10sVEhSRUUuVW5pZm9ybXNMaWJbJ21ldGFsbmVzc21hcCddLFRIUkVFLlVuaWZvcm1zTGliWydmb2cnXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnbGlnaHRzJ10se1wiZW1pc3NpdmVcIjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApfSxcInJvdWdobmVzc1wiOnt0eXBlOlwiMWZcIix2YWx1ZTowLjV9LFwibWV0YWxuZXNzXCI6e3R5cGU6XCIxZlwiLHZhbHVlOjB9LFwiZW52TWFwSW50ZW5zaXR5XCI6e3R5cGU6XCIxZlwiLHZhbHVlOjEvLyB0ZW1wb3Jhcnlcbn19XSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydtZXNocGh5c2ljYWxfdmVydCddLGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydtZXNocGh5c2ljYWxfZnJhZyddfSwncG9pbnRzJzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWJbJ3BvaW50cyddLFRIUkVFLlVuaWZvcm1zTGliWydmb2cnXV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1sncG9pbnRzX3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1sncG9pbnRzX2ZyYWcnXX0sJ2Rhc2hlZCc6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliWydjb21tb24nXSxUSFJFRS5Vbmlmb3Jtc0xpYlsnZm9nJ10se1wic2NhbGVcIjp7dHlwZTpcIjFmXCIsdmFsdWU6MX0sXCJkYXNoU2l6ZVwiOnt0eXBlOlwiMWZcIix2YWx1ZToxfSxcInRvdGFsU2l6ZVwiOnt0eXBlOlwiMWZcIix2YWx1ZToyfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ2xpbmVkYXNoZWRfdmVydCddLGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydsaW5lZGFzaGVkX2ZyYWcnXX0sJ2RlcHRoJzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWJbJ2NvbW1vbiddLFRIUkVFLlVuaWZvcm1zTGliWydkaXNwbGFjZW1lbnRtYXAnXV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snZGVwdGhfdmVydCddLGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydkZXB0aF9mcmFnJ119LCdub3JtYWwnOnt1bmlmb3Jtczp7XCJvcGFjaXR5XCI6e3R5cGU6XCIxZlwiLHZhbHVlOjEuMH19LHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snbm9ybWFsX3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snbm9ybWFsX2ZyYWcnXX0sLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdC8vXHRDdWJlIG1hcCBzaGFkZXJcclxuXHQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLydjdWJlJzp7dW5pZm9ybXM6e1widEN1YmVcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcInRGbGlwXCI6e3R5cGU6XCIxZlwiLHZhbHVlOi0xfX0sdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydjdWJlX3ZlcnQnXSxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVua1snY3ViZV9mcmFnJ119LC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQvL1x0Q3ViZSBtYXAgc2hhZGVyXHJcblx0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8nZXF1aXJlY3QnOnt1bmlmb3Jtczp7XCJ0RXF1aXJlY3RcIjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxcInRGbGlwXCI6e3R5cGU6XCIxZlwiLHZhbHVlOi0xfX0sdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydlcXVpcmVjdF92ZXJ0J10sZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ2VxdWlyZWN0X2ZyYWcnXX0sJ2Rpc3RhbmNlUkdCQSc6e3VuaWZvcm1zOntcImxpZ2h0UG9zXCI6e3R5cGU6XCJ2M1wiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IzKCl9fSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ2Rpc3RhbmNlUkdCQV92ZXJ0J10sZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmtbJ2Rpc3RhbmNlUkdCQV9mcmFnJ119fTtUSFJFRS5TaGFkZXJMaWJbJ3BoeXNpY2FsJ109e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlNoYWRlckxpYlsnc3RhbmRhcmQnXS51bmlmb3Jtcyx7Ly8gZnV0dXJlXG59XSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydtZXNocGh5c2ljYWxfdmVydCddLGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rWydtZXNocGh5c2ljYWxfZnJhZyddfTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvV2ViR0xSZW5kZXJlci5qc1xuLyoqXHJcbiAqIEBhdXRob3Igc3VwZXJlZ2diZXJ0IC8gaHR0cDovL3d3dy5wYXVsYnJ1bnQuY28udWsvXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3Igc3ppbWVrIC8gaHR0cHM6Ly9naXRodWIuY29tL3N6aW1lay9cclxuICogQGF1dGhvciB0c2Nod1xyXG4gKi9USFJFRS5XZWJHTFJlbmRlcmVyPWZ1bmN0aW9uKHBhcmFtZXRlcnMpe2NvbnNvbGUubG9nKCdUSFJFRS5XZWJHTFJlbmRlcmVyJyxUSFJFRS5SRVZJU0lPTik7cGFyYW1ldGVycz1wYXJhbWV0ZXJzfHx7fTt2YXIgX2NhbnZhcz1wYXJhbWV0ZXJzLmNhbnZhcyE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmNhbnZhczpkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSxfY29udGV4dD1wYXJhbWV0ZXJzLmNvbnRleHQhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5jb250ZXh0Om51bGwsX2FscGhhPXBhcmFtZXRlcnMuYWxwaGEhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5hbHBoYTpmYWxzZSxfZGVwdGg9cGFyYW1ldGVycy5kZXB0aCE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmRlcHRoOnRydWUsX3N0ZW5jaWw9cGFyYW1ldGVycy5zdGVuY2lsIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMuc3RlbmNpbDp0cnVlLF9hbnRpYWxpYXM9cGFyYW1ldGVycy5hbnRpYWxpYXMhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5hbnRpYWxpYXM6ZmFsc2UsX3ByZW11bHRpcGxpZWRBbHBoYT1wYXJhbWV0ZXJzLnByZW11bHRpcGxpZWRBbHBoYSE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLnByZW11bHRpcGxpZWRBbHBoYTp0cnVlLF9wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9cGFyYW1ldGVycy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIhPT11bmRlZmluZWQ/cGFyYW1ldGVycy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI6ZmFsc2U7dmFyIGxpZ2h0cz1bXTt2YXIgb3BhcXVlT2JqZWN0cz1bXTt2YXIgb3BhcXVlT2JqZWN0c0xhc3RJbmRleD0tMTt2YXIgdHJhbnNwYXJlbnRPYmplY3RzPVtdO3ZhciB0cmFuc3BhcmVudE9iamVjdHNMYXN0SW5kZXg9LTE7dmFyIG1vcnBoSW5mbHVlbmNlcz1uZXcgRmxvYXQzMkFycmF5KDgpO3ZhciBzcHJpdGVzPVtdO3ZhciBsZW5zRmxhcmVzPVtdOy8vIHB1YmxpYyBwcm9wZXJ0aWVzXG50aGlzLmRvbUVsZW1lbnQ9X2NhbnZhczt0aGlzLmNvbnRleHQ9bnVsbDsvLyBjbGVhcmluZ1xudGhpcy5hdXRvQ2xlYXI9dHJ1ZTt0aGlzLmF1dG9DbGVhckNvbG9yPXRydWU7dGhpcy5hdXRvQ2xlYXJEZXB0aD10cnVlO3RoaXMuYXV0b0NsZWFyU3RlbmNpbD10cnVlOy8vIHNjZW5lIGdyYXBoXG50aGlzLnNvcnRPYmplY3RzPXRydWU7Ly8gdXNlci1kZWZpbmVkIGNsaXBwaW5nXG50aGlzLmNsaXBwaW5nUGxhbmVzPVtdO3RoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ9ZmFsc2U7Ly8gcGh5c2ljYWxseSBiYXNlZCBzaGFkaW5nXG50aGlzLmdhbW1hRmFjdG9yPTIuMDsvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbnRoaXMuZ2FtbWFJbnB1dD1mYWxzZTt0aGlzLmdhbW1hT3V0cHV0PWZhbHNlOy8vIHBoeXNpY2FsIGxpZ2h0c1xudGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz1mYWxzZTsvLyB0b25lIG1hcHBpbmdcbnRoaXMudG9uZU1hcHBpbmc9VEhSRUUuTGluZWFyVG9uZU1hcHBpbmc7dGhpcy50b25lTWFwcGluZ0V4cG9zdXJlPTEuMDt0aGlzLnRvbmVNYXBwaW5nV2hpdGVQb2ludD0xLjA7Ly8gbW9ycGhzXG50aGlzLm1heE1vcnBoVGFyZ2V0cz04O3RoaXMubWF4TW9ycGhOb3JtYWxzPTQ7Ly8gZmxhZ3NcbnRoaXMuYXV0b1NjYWxlQ3ViZW1hcHM9dHJ1ZTsvLyBpbnRlcm5hbCBwcm9wZXJ0aWVzXG52YXIgX3RoaXM9dGhpcywvLyBpbnRlcm5hbCBzdGF0ZSBjYWNoZVxuX2N1cnJlbnRQcm9ncmFtPW51bGwsX2N1cnJlbnRSZW5kZXJUYXJnZXQ9bnVsbCxfY3VycmVudEZyYW1lYnVmZmVyPW51bGwsX2N1cnJlbnRNYXRlcmlhbElkPS0xLF9jdXJyZW50R2VvbWV0cnlQcm9ncmFtPScnLF9jdXJyZW50Q2FtZXJhPW51bGwsX2N1cnJlbnRTY2lzc29yPW5ldyBUSFJFRS5WZWN0b3I0KCksX2N1cnJlbnRTY2lzc29yVGVzdD1udWxsLF9jdXJyZW50Vmlld3BvcnQ9bmV3IFRIUkVFLlZlY3RvcjQoKSwvL1xuX3VzZWRUZXh0dXJlVW5pdHM9MCwvL1xuX2NsZWFyQ29sb3I9bmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKSxfY2xlYXJBbHBoYT0wLF93aWR0aD1fY2FudmFzLndpZHRoLF9oZWlnaHQ9X2NhbnZhcy5oZWlnaHQsX3BpeGVsUmF0aW89MSxfc2Npc3Nvcj1uZXcgVEhSRUUuVmVjdG9yNCgwLDAsX3dpZHRoLF9oZWlnaHQpLF9zY2lzc29yVGVzdD1mYWxzZSxfdmlld3BvcnQ9bmV3IFRIUkVFLlZlY3RvcjQoMCwwLF93aWR0aCxfaGVpZ2h0KSwvLyBmcnVzdHVtXG5fZnJ1c3R1bT1uZXcgVEhSRUUuRnJ1c3R1bSgpLC8vIGNsaXBwaW5nXG5fY2xpcHBpbmc9bmV3IFRIUkVFLldlYkdMQ2xpcHBpbmcoKSxfY2xpcHBpbmdFbmFibGVkPWZhbHNlLF9sb2NhbENsaXBwaW5nRW5hYmxlZD1mYWxzZSxfc3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUoKSwvLyBjYW1lcmEgbWF0cmljZXMgY2FjaGVcbl9wcm9qU2NyZWVuTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCksX3ZlY3RvcjM9bmV3IFRIUkVFLlZlY3RvcjMoKSwvLyBsaWdodCBhcnJheXMgY2FjaGVcbl9saWdodHM9e2hhc2g6JycsYW1iaWVudDpbMCwwLDBdLGRpcmVjdGlvbmFsOltdLGRpcmVjdGlvbmFsU2hhZG93TWFwOltdLGRpcmVjdGlvbmFsU2hhZG93TWF0cml4OltdLHNwb3Q6W10sc3BvdFNoYWRvd01hcDpbXSxzcG90U2hhZG93TWF0cml4OltdLHBvaW50OltdLHBvaW50U2hhZG93TWFwOltdLHBvaW50U2hhZG93TWF0cml4OltdLGhlbWk6W10sc2hhZG93czpbXX0sLy8gaW5mb1xuX2luZm9NZW1vcnk9e2dlb21ldHJpZXM6MCx0ZXh0dXJlczowfSxfaW5mb1JlbmRlcj17Y2FsbHM6MCx2ZXJ0aWNlczowLGZhY2VzOjAscG9pbnRzOjB9O3RoaXMuaW5mbz17cmVuZGVyOl9pbmZvUmVuZGVyLG1lbW9yeTpfaW5mb01lbW9yeSxwcm9ncmFtczpudWxsfTsvLyBpbml0aWFsaXplXG52YXIgX2dsO3RyeXt2YXIgYXR0cmlidXRlcz17YWxwaGE6X2FscGhhLGRlcHRoOl9kZXB0aCxzdGVuY2lsOl9zdGVuY2lsLGFudGlhbGlhczpfYW50aWFsaWFzLHByZW11bHRpcGxpZWRBbHBoYTpfcHJlbXVsdGlwbGllZEFscGhhLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjpfcHJlc2VydmVEcmF3aW5nQnVmZmVyfTtfZ2w9X2NvbnRleHR8fF9jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLGF0dHJpYnV0ZXMpfHxfY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsYXR0cmlidXRlcyk7aWYoX2dsPT09bnVsbCl7aWYoX2NhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIT09bnVsbCl7dGhyb3cnRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dCB3aXRoIHlvdXIgc2VsZWN0ZWQgYXR0cmlidXRlcy4nO31lbHNle3Rocm93J0Vycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuJzt9fS8vIFNvbWUgZXhwZXJpbWVudGFsLXdlYmdsIGltcGxlbWVudGF0aW9ucyBkbyBub3QgaGF2ZSBnZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXRcbmlmKF9nbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9PT11bmRlZmluZWQpe19nbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm57J3JhbmdlTWluJzoxLCdyYW5nZU1heCc6MSwncHJlY2lzaW9uJzoxfTt9O31fY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dGxvc3QnLG9uQ29udGV4dExvc3QsZmFsc2UpO31jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlcjogJytlcnJvcik7fXZhciBfaXNXZWJHTDI9dHlwZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQhPT0ndW5kZWZpbmVkJyYmX2dsIGluc3RhbmNlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDt2YXIgZXh0ZW5zaW9ucz1uZXcgVEhSRUUuV2ViR0xFeHRlbnNpb25zKF9nbCk7ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfZmxvYXQnKTtleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyJyk7ZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTtleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInKTtleHRlbnNpb25zLmdldCgnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyk7ZXh0ZW5zaW9ucy5nZXQoJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTtpZihleHRlbnNpb25zLmdldCgnT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5NYXhJbmRleD00Mjk0OTY3Mjk2O312YXIgY2FwYWJpbGl0aWVzPW5ldyBUSFJFRS5XZWJHTENhcGFiaWxpdGllcyhfZ2wsZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzKTt2YXIgc3RhdGU9bmV3IFRIUkVFLldlYkdMU3RhdGUoX2dsLGV4dGVuc2lvbnMscGFyYW1UaHJlZVRvR0wpO3ZhciBwcm9wZXJ0aWVzPW5ldyBUSFJFRS5XZWJHTFByb3BlcnRpZXMoKTt2YXIgb2JqZWN0cz1uZXcgVEhSRUUuV2ViR0xPYmplY3RzKF9nbCxwcm9wZXJ0aWVzLHRoaXMuaW5mbyk7dmFyIHByb2dyYW1DYWNoZT1uZXcgVEhSRUUuV2ViR0xQcm9ncmFtcyh0aGlzLGNhcGFiaWxpdGllcyk7dmFyIGxpZ2h0Q2FjaGU9bmV3IFRIUkVFLldlYkdMTGlnaHRzKCk7dGhpcy5pbmZvLnByb2dyYW1zPXByb2dyYW1DYWNoZS5wcm9ncmFtczt2YXIgYnVmZmVyUmVuZGVyZXI9bmV3IFRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXIoX2dsLGV4dGVuc2lvbnMsX2luZm9SZW5kZXIpO3ZhciBpbmRleGVkQnVmZmVyUmVuZGVyZXI9bmV3IFRIUkVFLldlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyKF9nbCxleHRlbnNpb25zLF9pbmZvUmVuZGVyKTsvL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpe3JldHVybiBfY3VycmVudFJlbmRlclRhcmdldD09PW51bGw/X3BpeGVsUmF0aW86MTt9ZnVuY3Rpb24gZ2xDbGVhckNvbG9yKHIsZyxiLGEpe2lmKF9wcmVtdWx0aXBsaWVkQWxwaGE9PT10cnVlKXtyKj1hO2cqPWE7Yio9YTt9c3RhdGUuY2xlYXJDb2xvcihyLGcsYixhKTt9ZnVuY3Rpb24gc2V0RGVmYXVsdEdMU3RhdGUoKXtzdGF0ZS5pbml0KCk7c3RhdGUuc2Npc3NvcihfY3VycmVudFNjaXNzb3IuY29weShfc2Npc3NvcikubXVsdGlwbHlTY2FsYXIoX3BpeGVsUmF0aW8pKTtzdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0LmNvcHkoX3ZpZXdwb3J0KS5tdWx0aXBseVNjYWxhcihfcGl4ZWxSYXRpbykpO2dsQ2xlYXJDb2xvcihfY2xlYXJDb2xvci5yLF9jbGVhckNvbG9yLmcsX2NsZWFyQ29sb3IuYixfY2xlYXJBbHBoYSk7fWZ1bmN0aW9uIHJlc2V0R0xTdGF0ZSgpe19jdXJyZW50UHJvZ3JhbT1udWxsO19jdXJyZW50Q2FtZXJhPW51bGw7X2N1cnJlbnRHZW9tZXRyeVByb2dyYW09Jyc7X2N1cnJlbnRNYXRlcmlhbElkPS0xO3N0YXRlLnJlc2V0KCk7fXNldERlZmF1bHRHTFN0YXRlKCk7dGhpcy5jb250ZXh0PV9nbDt0aGlzLmNhcGFiaWxpdGllcz1jYXBhYmlsaXRpZXM7dGhpcy5leHRlbnNpb25zPWV4dGVuc2lvbnM7dGhpcy5wcm9wZXJ0aWVzPXByb3BlcnRpZXM7dGhpcy5zdGF0ZT1zdGF0ZTsvLyBzaGFkb3cgbWFwXG52YXIgc2hhZG93TWFwPW5ldyBUSFJFRS5XZWJHTFNoYWRvd01hcCh0aGlzLF9saWdodHMsb2JqZWN0cyk7dGhpcy5zaGFkb3dNYXA9c2hhZG93TWFwOy8vIFBsdWdpbnNcbnZhciBzcHJpdGVQbHVnaW49bmV3IFRIUkVFLlNwcml0ZVBsdWdpbih0aGlzLHNwcml0ZXMpO3ZhciBsZW5zRmxhcmVQbHVnaW49bmV3IFRIUkVFLkxlbnNGbGFyZVBsdWdpbih0aGlzLGxlbnNGbGFyZXMpOy8vIEFQSVxudGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIF9nbDt9O3RoaXMuZ2V0Q29udGV4dEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gX2dsLmdldENvbnRleHRBdHRyaWJ1dGVzKCk7fTt0aGlzLmZvcmNlQ29udGV4dExvc3M9ZnVuY3Rpb24oKXtleHRlbnNpb25zLmdldCgnV0VCR0xfbG9zZV9jb250ZXh0JykubG9zZUNvbnRleHQoKTt9O3RoaXMuZ2V0TWF4QW5pc290cm9weT1mdW5jdGlvbigpe3ZhciB2YWx1ZTtyZXR1cm4gZnVuY3Rpb24gZ2V0TWF4QW5pc290cm9weSgpe2lmKHZhbHVlIT09dW5kZWZpbmVkKXJldHVybiB2YWx1ZTt2YXIgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtpZihleHRlbnNpb24hPT1udWxsKXt2YWx1ZT1fZ2wuZ2V0UGFyYW1ldGVyKGV4dGVuc2lvbi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpO31lbHNle3ZhbHVlPTA7fXJldHVybiB2YWx1ZTt9O30oKTt0aGlzLmdldFByZWNpc2lvbj1mdW5jdGlvbigpe3JldHVybiBjYXBhYmlsaXRpZXMucHJlY2lzaW9uO307dGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIF9waXhlbFJhdGlvO307dGhpcy5zZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZT09PXVuZGVmaW5lZClyZXR1cm47X3BpeGVsUmF0aW89dmFsdWU7dGhpcy5zZXRTaXplKF92aWV3cG9ydC56LF92aWV3cG9ydC53LGZhbHNlKTt9O3RoaXMuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybnt3aWR0aDpfd2lkdGgsaGVpZ2h0Ol9oZWlnaHR9O307dGhpcy5zZXRTaXplPWZ1bmN0aW9uKHdpZHRoLGhlaWdodCx1cGRhdGVTdHlsZSl7X3dpZHRoPXdpZHRoO19oZWlnaHQ9aGVpZ2h0O19jYW52YXMud2lkdGg9d2lkdGgqX3BpeGVsUmF0aW87X2NhbnZhcy5oZWlnaHQ9aGVpZ2h0Kl9waXhlbFJhdGlvO2lmKHVwZGF0ZVN0eWxlIT09ZmFsc2Upe19jYW52YXMuc3R5bGUud2lkdGg9d2lkdGgrJ3B4JztfY2FudmFzLnN0eWxlLmhlaWdodD1oZWlnaHQrJ3B4Jzt9dGhpcy5zZXRWaWV3cG9ydCgwLDAsd2lkdGgsaGVpZ2h0KTt9O3RoaXMuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24oeCx5LHdpZHRoLGhlaWdodCl7c3RhdGUudmlld3BvcnQoX3ZpZXdwb3J0LnNldCh4LHksd2lkdGgsaGVpZ2h0KSk7fTt0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24oeCx5LHdpZHRoLGhlaWdodCl7c3RhdGUuc2Npc3Nvcihfc2Npc3Nvci5zZXQoeCx5LHdpZHRoLGhlaWdodCkpO307dGhpcy5zZXRTY2lzc29yVGVzdD1mdW5jdGlvbihib29sZWFuKXtzdGF0ZS5zZXRTY2lzc29yVGVzdChfc2Npc3NvclRlc3Q9Ym9vbGVhbik7fTsvLyBDbGVhcmluZ1xudGhpcy5nZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIF9jbGVhckNvbG9yO307dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKGNvbG9yLGFscGhhKXtfY2xlYXJDb2xvci5zZXQoY29sb3IpO19jbGVhckFscGhhPWFscGhhIT09dW5kZWZpbmVkP2FscGhhOjE7Z2xDbGVhckNvbG9yKF9jbGVhckNvbG9yLnIsX2NsZWFyQ29sb3IuZyxfY2xlYXJDb2xvci5iLF9jbGVhckFscGhhKTt9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBfY2xlYXJBbHBoYTt9O3RoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbihhbHBoYSl7X2NsZWFyQWxwaGE9YWxwaGE7Z2xDbGVhckNvbG9yKF9jbGVhckNvbG9yLnIsX2NsZWFyQ29sb3IuZyxfY2xlYXJDb2xvci5iLF9jbGVhckFscGhhKTt9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oY29sb3IsZGVwdGgsc3RlbmNpbCl7dmFyIGJpdHM9MDtpZihjb2xvcj09PXVuZGVmaW5lZHx8Y29sb3IpYml0c3w9X2dsLkNPTE9SX0JVRkZFUl9CSVQ7aWYoZGVwdGg9PT11bmRlZmluZWR8fGRlcHRoKWJpdHN8PV9nbC5ERVBUSF9CVUZGRVJfQklUO2lmKHN0ZW5jaWw9PT11bmRlZmluZWR8fHN0ZW5jaWwpYml0c3w9X2dsLlNURU5DSUxfQlVGRkVSX0JJVDtfZ2wuY2xlYXIoYml0cyk7fTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKHRydWUsZmFsc2UsZmFsc2UpO307dGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcihmYWxzZSx0cnVlLGZhbHNlKTt9O3RoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcihmYWxzZSxmYWxzZSx0cnVlKTt9O3RoaXMuY2xlYXJUYXJnZXQ9ZnVuY3Rpb24ocmVuZGVyVGFyZ2V0LGNvbG9yLGRlcHRoLHN0ZW5jaWwpe3RoaXMuc2V0UmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCk7dGhpcy5jbGVhcihjb2xvcixkZXB0aCxzdGVuY2lsKTt9Oy8vIFJlc2V0XG50aGlzLnJlc2V0R0xTdGF0ZT1yZXNldEdMU3RhdGU7dGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7X2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JyxvbkNvbnRleHRMb3N0LGZhbHNlKTt9Oy8vIEV2ZW50c1xuZnVuY3Rpb24gb25Db250ZXh0TG9zdChldmVudCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtyZXNldEdMU3RhdGUoKTtzZXREZWZhdWx0R0xTdGF0ZSgpO3Byb3BlcnRpZXMuY2xlYXIoKTt9ZnVuY3Rpb24gb25UZXh0dXJlRGlzcG9zZShldmVudCl7dmFyIHRleHR1cmU9ZXZlbnQudGFyZ2V0O3RleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25UZXh0dXJlRGlzcG9zZSk7ZGVhbGxvY2F0ZVRleHR1cmUodGV4dHVyZSk7X2luZm9NZW1vcnkudGV4dHVyZXMtLTt9ZnVuY3Rpb24gb25SZW5kZXJUYXJnZXREaXNwb3NlKGV2ZW50KXt2YXIgcmVuZGVyVGFyZ2V0PWV2ZW50LnRhcmdldDtyZW5kZXJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25SZW5kZXJUYXJnZXREaXNwb3NlKTtkZWFsbG9jYXRlUmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCk7X2luZm9NZW1vcnkudGV4dHVyZXMtLTt9ZnVuY3Rpb24gb25NYXRlcmlhbERpc3Bvc2UoZXZlbnQpe3ZhciBtYXRlcmlhbD1ldmVudC50YXJnZXQ7bWF0ZXJpYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25NYXRlcmlhbERpc3Bvc2UpO2RlYWxsb2NhdGVNYXRlcmlhbChtYXRlcmlhbCk7fS8vIEJ1ZmZlciBkZWFsbG9jYXRpb25cbmZ1bmN0aW9uIGRlYWxsb2NhdGVUZXh0dXJlKHRleHR1cmUpe3ZhciB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKTtpZih0ZXh0dXJlLmltYWdlJiZ0ZXh0dXJlUHJvcGVydGllcy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKXsvLyBjdWJlIHRleHR1cmVcbl9nbC5kZWxldGVUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO31lbHNley8vIDJEIHRleHR1cmVcbmlmKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xJbml0PT09dW5kZWZpbmVkKXJldHVybjtfZ2wuZGVsZXRlVGV4dHVyZSh0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7fS8vIHJlbW92ZSBhbGwgd2ViZ2wgcHJvcGVydGllc1xucHJvcGVydGllcy5kZWxldGUodGV4dHVyZSk7fWZ1bmN0aW9uIGRlYWxsb2NhdGVSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KXt2YXIgcmVuZGVyVGFyZ2V0UHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpO3ZhciB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQudGV4dHVyZSk7aWYoIXJlbmRlclRhcmdldClyZXR1cm47aWYodGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUhPT11bmRlZmluZWQpe19nbC5kZWxldGVUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlKTt9aWYocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSl7cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5kaXNwb3NlKCk7fWlmKHJlbmRlclRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSl7Zm9yKHZhciBpPTA7aTw2O2krKyl7X2dsLmRlbGV0ZUZyYW1lYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyW2ldKTtpZihyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcilfZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyW2ldKTt9fWVsc2V7X2dsLmRlbGV0ZUZyYW1lYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyKTtpZihyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcilfZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbERlcHRoYnVmZmVyKTt9cHJvcGVydGllcy5kZWxldGUocmVuZGVyVGFyZ2V0LnRleHR1cmUpO3Byb3BlcnRpZXMuZGVsZXRlKHJlbmRlclRhcmdldCk7fWZ1bmN0aW9uIGRlYWxsb2NhdGVNYXRlcmlhbChtYXRlcmlhbCl7cmVsZWFzZU1hdGVyaWFsUHJvZ3JhbVJlZmVyZW5jZShtYXRlcmlhbCk7cHJvcGVydGllcy5kZWxldGUobWF0ZXJpYWwpO31mdW5jdGlvbiByZWxlYXNlTWF0ZXJpYWxQcm9ncmFtUmVmZXJlbmNlKG1hdGVyaWFsKXt2YXIgcHJvZ3JhbUluZm89cHJvcGVydGllcy5nZXQobWF0ZXJpYWwpLnByb2dyYW07bWF0ZXJpYWwucHJvZ3JhbT11bmRlZmluZWQ7aWYocHJvZ3JhbUluZm8hPT11bmRlZmluZWQpe3Byb2dyYW1DYWNoZS5yZWxlYXNlUHJvZ3JhbShwcm9ncmFtSW5mbyk7fX0vLyBCdWZmZXIgcmVuZGVyaW5nXG50aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihvYmplY3QscHJvZ3JhbSxtYXRlcmlhbCl7c3RhdGUuaW5pdEF0dHJpYnV0ZXMoKTt2YXIgYnVmZmVycz1wcm9wZXJ0aWVzLmdldChvYmplY3QpO2lmKG9iamVjdC5oYXNQb3NpdGlvbnMmJiFidWZmZXJzLnBvc2l0aW9uKWJ1ZmZlcnMucG9zaXRpb249X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNOb3JtYWxzJiYhYnVmZmVycy5ub3JtYWwpYnVmZmVycy5ub3JtYWw9X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNVdnMmJiFidWZmZXJzLnV2KWJ1ZmZlcnMudXY9X2dsLmNyZWF0ZUJ1ZmZlcigpO2lmKG9iamVjdC5oYXNDb2xvcnMmJiFidWZmZXJzLmNvbG9yKWJ1ZmZlcnMuY29sb3I9X2dsLmNyZWF0ZUJ1ZmZlcigpO3ZhciBhdHRyaWJ1dGVzPXByb2dyYW0uZ2V0QXR0cmlidXRlcygpO2lmKG9iamVjdC5oYXNQb3NpdGlvbnMpe19nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsYnVmZmVycy5wb3NpdGlvbik7X2dsLmJ1ZmZlckRhdGEoX2dsLkFSUkFZX0JVRkZFUixvYmplY3QucG9zaXRpb25BcnJheSxfZ2wuRFlOQU1JQ19EUkFXKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlcy5wb3NpdGlvbik7X2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlcy5wb3NpdGlvbiwzLF9nbC5GTE9BVCxmYWxzZSwwLDApO31pZihvYmplY3QuaGFzTm9ybWFscyl7X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXJzLm5vcm1hbCk7aWYobWF0ZXJpYWwudHlwZSE9PSdNZXNoUGhvbmdNYXRlcmlhbCcmJm1hdGVyaWFsLnR5cGUhPT0nTWVzaFN0YW5kYXJkTWF0ZXJpYWwnJiZtYXRlcmlhbC50eXBlIT09J01lc2hQaHlzaWNhbE1hdGVyaWFsJyYmbWF0ZXJpYWwuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nKXtmb3IodmFyIGk9MCxsPW9iamVjdC5jb3VudCozO2k8bDtpKz05KXt2YXIgYXJyYXk9b2JqZWN0Lm5vcm1hbEFycmF5O3ZhciBueD0oYXJyYXlbaSswXSthcnJheVtpKzNdK2FycmF5W2krNl0pLzM7dmFyIG55PShhcnJheVtpKzFdK2FycmF5W2krNF0rYXJyYXlbaSs3XSkvMzt2YXIgbno9KGFycmF5W2krMl0rYXJyYXlbaSs1XSthcnJheVtpKzhdKS8zO2FycmF5W2krMF09bng7YXJyYXlbaSsxXT1ueTthcnJheVtpKzJdPW56O2FycmF5W2krM109bng7YXJyYXlbaSs0XT1ueTthcnJheVtpKzVdPW56O2FycmF5W2krNl09bng7YXJyYXlbaSs3XT1ueTthcnJheVtpKzhdPW56O319X2dsLmJ1ZmZlckRhdGEoX2dsLkFSUkFZX0JVRkZFUixvYmplY3Qubm9ybWFsQXJyYXksX2dsLkRZTkFNSUNfRFJBVyk7c3RhdGUuZW5hYmxlQXR0cmlidXRlKGF0dHJpYnV0ZXMubm9ybWFsKTtfZ2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGVzLm5vcm1hbCwzLF9nbC5GTE9BVCxmYWxzZSwwLDApO31pZihvYmplY3QuaGFzVXZzJiZtYXRlcmlhbC5tYXApe19nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsYnVmZmVycy51dik7X2dsLmJ1ZmZlckRhdGEoX2dsLkFSUkFZX0JVRkZFUixvYmplY3QudXZBcnJheSxfZ2wuRFlOQU1JQ19EUkFXKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlcy51dik7X2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlcy51diwyLF9nbC5GTE9BVCxmYWxzZSwwLDApO31pZihvYmplY3QuaGFzQ29sb3JzJiZtYXRlcmlhbC52ZXJ0ZXhDb2xvcnMhPT1USFJFRS5Ob0NvbG9ycyl7X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXJzLmNvbG9yKTtfZ2wuYnVmZmVyRGF0YShfZ2wuQVJSQVlfQlVGRkVSLG9iamVjdC5jb2xvckFycmF5LF9nbC5EWU5BTUlDX0RSQVcpO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLmNvbG9yKTtfZ2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGVzLmNvbG9yLDMsX2dsLkZMT0FULGZhbHNlLDAsMCk7fXN0YXRlLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7X2dsLmRyYXdBcnJheXMoX2dsLlRSSUFOR0xFUywwLG9iamVjdC5jb3VudCk7b2JqZWN0LmNvdW50PTA7fTt0aGlzLnJlbmRlckJ1ZmZlckRpcmVjdD1mdW5jdGlvbihjYW1lcmEsZm9nLGdlb21ldHJ5LG1hdGVyaWFsLG9iamVjdCxncm91cCl7c2V0TWF0ZXJpYWwobWF0ZXJpYWwpO3ZhciBwcm9ncmFtPXNldFByb2dyYW0oY2FtZXJhLGZvZyxtYXRlcmlhbCxvYmplY3QpO3ZhciB1cGRhdGVCdWZmZXJzPWZhbHNlO3ZhciBnZW9tZXRyeVByb2dyYW09Z2VvbWV0cnkuaWQrJ18nK3Byb2dyYW0uaWQrJ18nK21hdGVyaWFsLndpcmVmcmFtZTtpZihnZW9tZXRyeVByb2dyYW0hPT1fY3VycmVudEdlb21ldHJ5UHJvZ3JhbSl7X2N1cnJlbnRHZW9tZXRyeVByb2dyYW09Z2VvbWV0cnlQcm9ncmFtO3VwZGF0ZUJ1ZmZlcnM9dHJ1ZTt9Ly8gbW9ycGggdGFyZ2V0c1xudmFyIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1vYmplY3QubW9ycGhUYXJnZXRJbmZsdWVuY2VzO2lmKG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyE9PXVuZGVmaW5lZCl7dmFyIGFjdGl2ZUluZmx1ZW5jZXM9W107Zm9yKHZhciBpPTAsbD1tb3JwaFRhcmdldEluZmx1ZW5jZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBpbmZsdWVuY2U9bW9ycGhUYXJnZXRJbmZsdWVuY2VzW2ldO2FjdGl2ZUluZmx1ZW5jZXMucHVzaChbaW5mbHVlbmNlLGldKTt9YWN0aXZlSW5mbHVlbmNlcy5zb3J0KGFic051bWVyaWNhbFNvcnQpO2lmKGFjdGl2ZUluZmx1ZW5jZXMubGVuZ3RoPjgpe2FjdGl2ZUluZmx1ZW5jZXMubGVuZ3RoPTg7fXZhciBtb3JwaEF0dHJpYnV0ZXM9Z2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzO2Zvcih2YXIgaT0wLGw9YWN0aXZlSW5mbHVlbmNlcy5sZW5ndGg7aTxsO2krKyl7dmFyIGluZmx1ZW5jZT1hY3RpdmVJbmZsdWVuY2VzW2ldO21vcnBoSW5mbHVlbmNlc1tpXT1pbmZsdWVuY2VbMF07aWYoaW5mbHVlbmNlWzBdIT09MCl7dmFyIGluZGV4PWluZmx1ZW5jZVsxXTtpZihtYXRlcmlhbC5tb3JwaFRhcmdldHM9PT10cnVlJiZtb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24pZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCdtb3JwaFRhcmdldCcraSxtb3JwaEF0dHJpYnV0ZXMucG9zaXRpb25baW5kZXhdKTtpZihtYXRlcmlhbC5tb3JwaE5vcm1hbHM9PT10cnVlJiZtb3JwaEF0dHJpYnV0ZXMubm9ybWFsKWdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnbW9ycGhOb3JtYWwnK2ksbW9ycGhBdHRyaWJ1dGVzLm5vcm1hbFtpbmRleF0pO31lbHNle2lmKG1hdGVyaWFsLm1vcnBoVGFyZ2V0cz09PXRydWUpZ2VvbWV0cnkucmVtb3ZlQXR0cmlidXRlKCdtb3JwaFRhcmdldCcraSk7aWYobWF0ZXJpYWwubW9ycGhOb3JtYWxzPT09dHJ1ZSlnZW9tZXRyeS5yZW1vdmVBdHRyaWJ1dGUoJ21vcnBoTm9ybWFsJytpKTt9fXByb2dyYW0uZ2V0VW5pZm9ybXMoKS5zZXRWYWx1ZShfZ2wsJ21vcnBoVGFyZ2V0SW5mbHVlbmNlcycsbW9ycGhJbmZsdWVuY2VzKTt1cGRhdGVCdWZmZXJzPXRydWU7fS8vXG52YXIgaW5kZXg9Z2VvbWV0cnkuaW5kZXg7dmFyIHBvc2l0aW9uPWdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247aWYobWF0ZXJpYWwud2lyZWZyYW1lPT09dHJ1ZSl7aW5kZXg9b2JqZWN0cy5nZXRXaXJlZnJhbWVBdHRyaWJ1dGUoZ2VvbWV0cnkpO312YXIgcmVuZGVyZXI7aWYoaW5kZXghPT1udWxsKXtyZW5kZXJlcj1pbmRleGVkQnVmZmVyUmVuZGVyZXI7cmVuZGVyZXIuc2V0SW5kZXgoaW5kZXgpO31lbHNle3JlbmRlcmVyPWJ1ZmZlclJlbmRlcmVyO31pZih1cGRhdGVCdWZmZXJzKXtzZXR1cFZlcnRleEF0dHJpYnV0ZXMobWF0ZXJpYWwscHJvZ3JhbSxnZW9tZXRyeSk7aWYoaW5kZXghPT1udWxsKXtfZ2wuYmluZEJ1ZmZlcihfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsb2JqZWN0cy5nZXRBdHRyaWJ1dGVCdWZmZXIoaW5kZXgpKTt9fS8vXG52YXIgZGF0YVN0YXJ0PTA7dmFyIGRhdGFDb3VudD1JbmZpbml0eTtpZihpbmRleCE9PW51bGwpe2RhdGFDb3VudD1pbmRleC5jb3VudDt9ZWxzZSBpZihwb3NpdGlvbiE9PXVuZGVmaW5lZCl7ZGF0YUNvdW50PXBvc2l0aW9uLmNvdW50O312YXIgcmFuZ2VTdGFydD1nZW9tZXRyeS5kcmF3UmFuZ2Uuc3RhcnQ7dmFyIHJhbmdlQ291bnQ9Z2VvbWV0cnkuZHJhd1JhbmdlLmNvdW50O3ZhciBncm91cFN0YXJ0PWdyb3VwIT09bnVsbD9ncm91cC5zdGFydDowO3ZhciBncm91cENvdW50PWdyb3VwIT09bnVsbD9ncm91cC5jb3VudDpJbmZpbml0eTt2YXIgZHJhd1N0YXJ0PU1hdGgubWF4KGRhdGFTdGFydCxyYW5nZVN0YXJ0LGdyb3VwU3RhcnQpO3ZhciBkcmF3RW5kPU1hdGgubWluKGRhdGFTdGFydCtkYXRhQ291bnQscmFuZ2VTdGFydCtyYW5nZUNvdW50LGdyb3VwU3RhcnQrZ3JvdXBDb3VudCktMTt2YXIgZHJhd0NvdW50PU1hdGgubWF4KDAsZHJhd0VuZC1kcmF3U3RhcnQrMSk7Ly9cbmlmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2lmKG1hdGVyaWFsLndpcmVmcmFtZT09PXRydWUpe3N0YXRlLnNldExpbmVXaWR0aChtYXRlcmlhbC53aXJlZnJhbWVMaW5ld2lkdGgqZ2V0VGFyZ2V0UGl4ZWxSYXRpbygpKTtyZW5kZXJlci5zZXRNb2RlKF9nbC5MSU5FUyk7fWVsc2V7c3dpdGNoKG9iamVjdC5kcmF3TW9kZSl7Y2FzZSBUSFJFRS5UcmlhbmdsZXNEcmF3TW9kZTpyZW5kZXJlci5zZXRNb2RlKF9nbC5UUklBTkdMRVMpO2JyZWFrO2Nhc2UgVEhSRUUuVHJpYW5nbGVTdHJpcERyYXdNb2RlOnJlbmRlcmVyLnNldE1vZGUoX2dsLlRSSUFOR0xFX1NUUklQKTticmVhaztjYXNlIFRIUkVFLlRyaWFuZ2xlRmFuRHJhd01vZGU6cmVuZGVyZXIuc2V0TW9kZShfZ2wuVFJJQU5HTEVfRkFOKTticmVhazt9fX1lbHNlIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUpe3ZhciBsaW5lV2lkdGg9bWF0ZXJpYWwubGluZXdpZHRoO2lmKGxpbmVXaWR0aD09PXVuZGVmaW5lZClsaW5lV2lkdGg9MTsvLyBOb3QgdXNpbmcgTGluZSpNYXRlcmlhbFxuc3RhdGUuc2V0TGluZVdpZHRoKGxpbmVXaWR0aCpnZXRUYXJnZXRQaXhlbFJhdGlvKCkpO2lmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVTZWdtZW50cyl7cmVuZGVyZXIuc2V0TW9kZShfZ2wuTElORVMpO31lbHNle3JlbmRlcmVyLnNldE1vZGUoX2dsLkxJTkVfU1RSSVApO319ZWxzZSBpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHMpe3JlbmRlcmVyLnNldE1vZGUoX2dsLlBPSU5UUyk7fWlmKGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkpe2lmKGdlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50PjApe3JlbmRlcmVyLnJlbmRlckluc3RhbmNlcyhnZW9tZXRyeSxkcmF3U3RhcnQsZHJhd0NvdW50KTt9fWVsc2V7cmVuZGVyZXIucmVuZGVyKGRyYXdTdGFydCxkcmF3Q291bnQpO319O2Z1bmN0aW9uIHNldHVwVmVydGV4QXR0cmlidXRlcyhtYXRlcmlhbCxwcm9ncmFtLGdlb21ldHJ5LHN0YXJ0SW5kZXgpe3ZhciBleHRlbnNpb247aWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSl7ZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7aWYoZXh0ZW5zaW9uPT09bnVsbCl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xSZW5kZXJlci5zZXR1cFZlcnRleEF0dHJpYnV0ZXM6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLicpO3JldHVybjt9fWlmKHN0YXJ0SW5kZXg9PT11bmRlZmluZWQpc3RhcnRJbmRleD0wO3N0YXRlLmluaXRBdHRyaWJ1dGVzKCk7dmFyIGdlb21ldHJ5QXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO3ZhciBwcm9ncmFtQXR0cmlidXRlcz1wcm9ncmFtLmdldEF0dHJpYnV0ZXMoKTt2YXIgbWF0ZXJpYWxEZWZhdWx0QXR0cmlidXRlVmFsdWVzPW1hdGVyaWFsLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM7Zm9yKHZhciBuYW1lIGluIHByb2dyYW1BdHRyaWJ1dGVzKXt2YXIgcHJvZ3JhbUF0dHJpYnV0ZT1wcm9ncmFtQXR0cmlidXRlc1tuYW1lXTtpZihwcm9ncmFtQXR0cmlidXRlPj0wKXt2YXIgZ2VvbWV0cnlBdHRyaWJ1dGU9Z2VvbWV0cnlBdHRyaWJ1dGVzW25hbWVdO2lmKGdlb21ldHJ5QXR0cmlidXRlIT09dW5kZWZpbmVkKXt2YXIgdHlwZT1fZ2wuRkxPQVQ7dmFyIGFycmF5PWdlb21ldHJ5QXR0cmlidXRlLmFycmF5O3ZhciBub3JtYWxpemVkPWdlb21ldHJ5QXR0cmlidXRlLm5vcm1hbGl6ZWQ7aWYoYXJyYXkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpe3R5cGU9X2dsLkZMT0FUO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KXtjb25zb2xlLndhcm4oXCJVbnN1cHBvcnRlZCBkYXRhIGJ1ZmZlciBmb3JtYXQ6IEZsb2F0NjRBcnJheVwiKTt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5KXt0eXBlPV9nbC5VTlNJR05FRF9TSE9SVDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDE2QXJyYXkpe3R5cGU9X2dsLlNIT1JUO31lbHNlIGlmKGFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkpe3R5cGU9X2dsLlVOU0lHTkVEX0lOVDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDMyQXJyYXkpe3R5cGU9X2dsLklOVDt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIEludDhBcnJheSl7dHlwZT1fZ2wuQllURTt9ZWxzZSBpZihhcnJheSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe3R5cGU9X2dsLlVOU0lHTkVEX0JZVEU7fXZhciBzaXplPWdlb21ldHJ5QXR0cmlidXRlLml0ZW1TaXplO3ZhciBidWZmZXI9b2JqZWN0cy5nZXRBdHRyaWJ1dGVCdWZmZXIoZ2VvbWV0cnlBdHRyaWJ1dGUpO2lmKGdlb21ldHJ5QXR0cmlidXRlIGluc3RhbmNlb2YgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe3ZhciBkYXRhPWdlb21ldHJ5QXR0cmlidXRlLmRhdGE7dmFyIHN0cmlkZT1kYXRhLnN0cmlkZTt2YXIgb2Zmc2V0PWdlb21ldHJ5QXR0cmlidXRlLm9mZnNldDtpZihkYXRhIGluc3RhbmNlb2YgVEhSRUUuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXIpe3N0YXRlLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3IocHJvZ3JhbUF0dHJpYnV0ZSxkYXRhLm1lc2hQZXJBdHRyaWJ1dGUsZXh0ZW5zaW9uKTtpZihnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudD09PXVuZGVmaW5lZCl7Z2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQ9ZGF0YS5tZXNoUGVyQXR0cmlidXRlKmRhdGEuY291bnQ7fX1lbHNle3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlKTt9X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXIpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUsc2l6ZSx0eXBlLG5vcm1hbGl6ZWQsc3RyaWRlKmRhdGEuYXJyYXkuQllURVNfUEVSX0VMRU1FTlQsKHN0YXJ0SW5kZXgqc3RyaWRlK29mZnNldCkqZGF0YS5hcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7fWVsc2V7aWYoZ2VvbWV0cnlBdHRyaWJ1dGUgaW5zdGFuY2VvZiBUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUpe3N0YXRlLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3IocHJvZ3JhbUF0dHJpYnV0ZSxnZW9tZXRyeUF0dHJpYnV0ZS5tZXNoUGVyQXR0cmlidXRlLGV4dGVuc2lvbik7aWYoZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQ9PT11bmRlZmluZWQpe2dlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50PWdlb21ldHJ5QXR0cmlidXRlLm1lc2hQZXJBdHRyaWJ1dGUqZ2VvbWV0cnlBdHRyaWJ1dGUuY291bnQ7fX1lbHNle3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShwcm9ncmFtQXR0cmlidXRlKTt9X2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUixidWZmZXIpO19nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW1BdHRyaWJ1dGUsc2l6ZSx0eXBlLG5vcm1hbGl6ZWQsMCxzdGFydEluZGV4KnNpemUqZ2VvbWV0cnlBdHRyaWJ1dGUuYXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO319ZWxzZSBpZihtYXRlcmlhbERlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMhPT11bmRlZmluZWQpe3ZhciB2YWx1ZT1tYXRlcmlhbERlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbbmFtZV07aWYodmFsdWUhPT11bmRlZmluZWQpe3N3aXRjaCh2YWx1ZS5sZW5ndGgpe2Nhc2UgMjpfZ2wudmVydGV4QXR0cmliMmZ2KHByb2dyYW1BdHRyaWJ1dGUsdmFsdWUpO2JyZWFrO2Nhc2UgMzpfZ2wudmVydGV4QXR0cmliM2Z2KHByb2dyYW1BdHRyaWJ1dGUsdmFsdWUpO2JyZWFrO2Nhc2UgNDpfZ2wudmVydGV4QXR0cmliNGZ2KHByb2dyYW1BdHRyaWJ1dGUsdmFsdWUpO2JyZWFrO2RlZmF1bHQ6X2dsLnZlcnRleEF0dHJpYjFmdihwcm9ncmFtQXR0cmlidXRlLHZhbHVlKTt9fX19fXN0YXRlLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7fS8vIFNvcnRpbmdcbmZ1bmN0aW9uIGFic051bWVyaWNhbFNvcnQoYSxiKXtyZXR1cm4gTWF0aC5hYnMoYlswXSktTWF0aC5hYnMoYVswXSk7fWZ1bmN0aW9uIHBhaW50ZXJTb3J0U3RhYmxlKGEsYil7aWYoYS5vYmplY3QucmVuZGVyT3JkZXIhPT1iLm9iamVjdC5yZW5kZXJPcmRlcil7cmV0dXJuIGEub2JqZWN0LnJlbmRlck9yZGVyLWIub2JqZWN0LnJlbmRlck9yZGVyO31lbHNlIGlmKGEubWF0ZXJpYWwuaWQhPT1iLm1hdGVyaWFsLmlkKXtyZXR1cm4gYS5tYXRlcmlhbC5pZC1iLm1hdGVyaWFsLmlkO31lbHNlIGlmKGEueiE9PWIueil7cmV0dXJuIGEuei1iLno7fWVsc2V7cmV0dXJuIGEuaWQtYi5pZDt9fWZ1bmN0aW9uIHJldmVyc2VQYWludGVyU29ydFN0YWJsZShhLGIpe2lmKGEub2JqZWN0LnJlbmRlck9yZGVyIT09Yi5vYmplY3QucmVuZGVyT3JkZXIpe3JldHVybiBhLm9iamVjdC5yZW5kZXJPcmRlci1iLm9iamVjdC5yZW5kZXJPcmRlcjt9aWYoYS56IT09Yi56KXtyZXR1cm4gYi56LWEuejt9ZWxzZXtyZXR1cm4gYS5pZC1iLmlkO319Ly8gUmVuZGVyaW5nXG50aGlzLnJlbmRlcj1mdW5jdGlvbihzY2VuZSxjYW1lcmEscmVuZGVyVGFyZ2V0LGZvcmNlQ2xlYXIpe2lmKGNhbWVyYSBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYT09PWZhbHNlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuJyk7cmV0dXJuO312YXIgZm9nPXNjZW5lLmZvZzsvLyByZXNldCBjYWNoaW5nIGZvciB0aGlzIGZyYW1lXG5fY3VycmVudEdlb21ldHJ5UHJvZ3JhbT0nJztfY3VycmVudE1hdGVyaWFsSWQ9LTE7X2N1cnJlbnRDYW1lcmE9bnVsbDsvLyB1cGRhdGUgc2NlbmUgZ3JhcGhcbmlmKHNjZW5lLmF1dG9VcGRhdGU9PT10cnVlKXNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Ly8gdXBkYXRlIGNhbWVyYSBtYXRyaWNlcyBhbmQgZnJ1c3R1bVxuaWYoY2FtZXJhLnBhcmVudD09PW51bGwpY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Y2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGNhbWVyYS5tYXRyaXhXb3JsZCk7X3Byb2pTY3JlZW5NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEucHJvamVjdGlvbk1hdHJpeCxjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTtfZnJ1c3R1bS5zZXRGcm9tTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4KTtsaWdodHMubGVuZ3RoPTA7b3BhcXVlT2JqZWN0c0xhc3RJbmRleD0tMTt0cmFuc3BhcmVudE9iamVjdHNMYXN0SW5kZXg9LTE7c3ByaXRlcy5sZW5ndGg9MDtsZW5zRmxhcmVzLmxlbmd0aD0wO19sb2NhbENsaXBwaW5nRW5hYmxlZD10aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkO19jbGlwcGluZ0VuYWJsZWQ9X2NsaXBwaW5nLmluaXQodGhpcy5jbGlwcGluZ1BsYW5lcyxfbG9jYWxDbGlwcGluZ0VuYWJsZWQsY2FtZXJhKTtwcm9qZWN0T2JqZWN0KHNjZW5lLGNhbWVyYSk7b3BhcXVlT2JqZWN0cy5sZW5ndGg9b3BhcXVlT2JqZWN0c0xhc3RJbmRleCsxO3RyYW5zcGFyZW50T2JqZWN0cy5sZW5ndGg9dHJhbnNwYXJlbnRPYmplY3RzTGFzdEluZGV4KzE7aWYoX3RoaXMuc29ydE9iamVjdHM9PT10cnVlKXtvcGFxdWVPYmplY3RzLnNvcnQocGFpbnRlclNvcnRTdGFibGUpO3RyYW5zcGFyZW50T2JqZWN0cy5zb3J0KHJldmVyc2VQYWludGVyU29ydFN0YWJsZSk7fS8vXG5pZihfY2xpcHBpbmdFbmFibGVkKV9jbGlwcGluZy5iZWdpblNoYWRvd3MoKTtzZXR1cFNoYWRvd3MobGlnaHRzKTtzaGFkb3dNYXAucmVuZGVyKHNjZW5lLGNhbWVyYSk7c2V0dXBMaWdodHMobGlnaHRzLGNhbWVyYSk7aWYoX2NsaXBwaW5nRW5hYmxlZClfY2xpcHBpbmcuZW5kU2hhZG93cygpOy8vXG5faW5mb1JlbmRlci5jYWxscz0wO19pbmZvUmVuZGVyLnZlcnRpY2VzPTA7X2luZm9SZW5kZXIuZmFjZXM9MDtfaW5mb1JlbmRlci5wb2ludHM9MDtpZihyZW5kZXJUYXJnZXQ9PT11bmRlZmluZWQpe3JlbmRlclRhcmdldD1udWxsO310aGlzLnNldFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO2lmKHRoaXMuYXV0b0NsZWFyfHxmb3JjZUNsZWFyKXt0aGlzLmNsZWFyKHRoaXMuYXV0b0NsZWFyQ29sb3IsdGhpcy5hdXRvQ2xlYXJEZXB0aCx0aGlzLmF1dG9DbGVhclN0ZW5jaWwpO30vL1xuaWYoc2NlbmUub3ZlcnJpZGVNYXRlcmlhbCl7dmFyIG92ZXJyaWRlTWF0ZXJpYWw9c2NlbmUub3ZlcnJpZGVNYXRlcmlhbDtyZW5kZXJPYmplY3RzKG9wYXF1ZU9iamVjdHMsY2FtZXJhLGZvZyxvdmVycmlkZU1hdGVyaWFsKTtyZW5kZXJPYmplY3RzKHRyYW5zcGFyZW50T2JqZWN0cyxjYW1lcmEsZm9nLG92ZXJyaWRlTWF0ZXJpYWwpO31lbHNley8vIG9wYXF1ZSBwYXNzIChmcm9udC10by1iYWNrIG9yZGVyKVxuc3RhdGUuc2V0QmxlbmRpbmcoVEhSRUUuTm9CbGVuZGluZyk7cmVuZGVyT2JqZWN0cyhvcGFxdWVPYmplY3RzLGNhbWVyYSxmb2cpOy8vIHRyYW5zcGFyZW50IHBhc3MgKGJhY2stdG8tZnJvbnQgb3JkZXIpXG5yZW5kZXJPYmplY3RzKHRyYW5zcGFyZW50T2JqZWN0cyxjYW1lcmEsZm9nKTt9Ly8gY3VzdG9tIHJlbmRlciBwbHVnaW5zIChwb3N0IHBhc3MpXG5zcHJpdGVQbHVnaW4ucmVuZGVyKHNjZW5lLGNhbWVyYSk7bGVuc0ZsYXJlUGx1Z2luLnJlbmRlcihzY2VuZSxjYW1lcmEsX2N1cnJlbnRWaWV3cG9ydCk7Ly8gR2VuZXJhdGUgbWlwbWFwIGlmIHdlJ3JlIHVzaW5nIGFueSBraW5kIG9mIG1pcG1hcCBmaWx0ZXJpbmdcbmlmKHJlbmRlclRhcmdldCl7dmFyIHRleHR1cmU9cmVuZGVyVGFyZ2V0LnRleHR1cmU7aWYodGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMmJmlzUG93ZXJPZlR3byhyZW5kZXJUYXJnZXQpJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PVRIUkVFLk5lYXJlc3RGaWx0ZXImJnRleHR1cmUubWluRmlsdGVyIT09VEhSRUUuTGluZWFyRmlsdGVyKXt1cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAocmVuZGVyVGFyZ2V0KTt9fS8vIEVuc3VyZSBkZXB0aCBidWZmZXIgd3JpdGluZyBpcyBlbmFibGVkIHNvIGl0IGNhbiBiZSBjbGVhcmVkIG9uIG5leHQgcmVuZGVyXG5zdGF0ZS5zZXREZXB0aFRlc3QodHJ1ZSk7c3RhdGUuc2V0RGVwdGhXcml0ZSh0cnVlKTtzdGF0ZS5zZXRDb2xvcldyaXRlKHRydWUpOy8vIF9nbC5maW5pc2goKTtcbn07ZnVuY3Rpb24gcHVzaFJlbmRlckl0ZW0ob2JqZWN0LGdlb21ldHJ5LG1hdGVyaWFsLHosZ3JvdXApe3ZhciBhcnJheSxpbmRleDsvLyBhbGxvY2F0ZSB0aGUgbmV4dCBwb3NpdGlvbiBpbiB0aGUgYXBwcm9wcmlhdGUgYXJyYXlcbmlmKG1hdGVyaWFsLnRyYW5zcGFyZW50KXthcnJheT10cmFuc3BhcmVudE9iamVjdHM7aW5kZXg9Kyt0cmFuc3BhcmVudE9iamVjdHNMYXN0SW5kZXg7fWVsc2V7YXJyYXk9b3BhcXVlT2JqZWN0cztpbmRleD0rK29wYXF1ZU9iamVjdHNMYXN0SW5kZXg7fS8vIHJlY3ljbGUgZXhpc3RpbmcgcmVuZGVyIGl0ZW0gb3IgZ3JvdyB0aGUgYXJyYXlcbnZhciByZW5kZXJJdGVtPWFycmF5W2luZGV4XTtpZihyZW5kZXJJdGVtIT09dW5kZWZpbmVkKXtyZW5kZXJJdGVtLmlkPW9iamVjdC5pZDtyZW5kZXJJdGVtLm9iamVjdD1vYmplY3Q7cmVuZGVySXRlbS5nZW9tZXRyeT1nZW9tZXRyeTtyZW5kZXJJdGVtLm1hdGVyaWFsPW1hdGVyaWFsO3JlbmRlckl0ZW0uej1fdmVjdG9yMy56O3JlbmRlckl0ZW0uZ3JvdXA9Z3JvdXA7fWVsc2V7cmVuZGVySXRlbT17aWQ6b2JqZWN0LmlkLG9iamVjdDpvYmplY3QsZ2VvbWV0cnk6Z2VvbWV0cnksbWF0ZXJpYWw6bWF0ZXJpYWwsejpfdmVjdG9yMy56LGdyb3VwOmdyb3VwfTsvLyBhc3NlcnQoIGluZGV4ID09PSBhcnJheS5sZW5ndGggKTtcbmFycmF5LnB1c2gocmVuZGVySXRlbSk7fX0vLyBUT0RPIER1cGxpY2F0ZWQgY29kZSAoRnJ1c3R1bSlcbmZ1bmN0aW9uIGlzT2JqZWN0Vmlld2FibGUob2JqZWN0KXt2YXIgZ2VvbWV0cnk9b2JqZWN0Lmdlb21ldHJ5O2lmKGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlPT09bnVsbClnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtfc3BoZXJlLmNvcHkoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUpLmFwcGx5TWF0cml4NChvYmplY3QubWF0cml4V29ybGQpO3JldHVybiBpc1NwaGVyZVZpZXdhYmxlKF9zcGhlcmUpO31mdW5jdGlvbiBpc1Nwcml0ZVZpZXdhYmxlKHNwcml0ZSl7X3NwaGVyZS5jZW50ZXIuc2V0KDAsMCwwKTtfc3BoZXJlLnJhZGl1cz0wLjcwNzEwNjc4MTE4NjU0NzY7X3NwaGVyZS5hcHBseU1hdHJpeDQoc3ByaXRlLm1hdHJpeFdvcmxkKTtyZXR1cm4gaXNTcGhlcmVWaWV3YWJsZShfc3BoZXJlKTt9ZnVuY3Rpb24gaXNTcGhlcmVWaWV3YWJsZShzcGhlcmUpe2lmKCFfZnJ1c3R1bS5pbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSkpcmV0dXJuIGZhbHNlO3ZhciBudW1QbGFuZXM9X2NsaXBwaW5nLm51bVBsYW5lcztpZihudW1QbGFuZXM9PT0wKXJldHVybiB0cnVlO3ZhciBwbGFuZXM9X3RoaXMuY2xpcHBpbmdQbGFuZXMsY2VudGVyPXNwaGVyZS5jZW50ZXIsbmVnUmFkPS1zcGhlcmUucmFkaXVzLGk9MDtkb3svLyBvdXQgd2hlbiBkZWVwZXIgdGhhbiByYWRpdXMgaW4gdGhlIG5lZ2F0aXZlIGhhbGZzcGFjZVxuaWYocGxhbmVzW2ldLmRpc3RhbmNlVG9Qb2ludChjZW50ZXIpPG5lZ1JhZClyZXR1cm4gZmFsc2U7fXdoaWxlKCsraSE9PW51bVBsYW5lcyk7cmV0dXJuIHRydWU7fWZ1bmN0aW9uIHByb2plY3RPYmplY3Qob2JqZWN0LGNhbWVyYSl7aWYob2JqZWN0LnZpc2libGU9PT1mYWxzZSlyZXR1cm47aWYob2JqZWN0LmxheWVycy50ZXN0KGNhbWVyYS5sYXllcnMpKXtpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaWdodCl7bGlnaHRzLnB1c2gob2JqZWN0KTt9ZWxzZSBpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGUpe2lmKG9iamVjdC5mcnVzdHVtQ3VsbGVkPT09ZmFsc2V8fGlzU3ByaXRlVmlld2FibGUob2JqZWN0KT09PXRydWUpe3Nwcml0ZXMucHVzaChvYmplY3QpO319ZWxzZSBpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MZW5zRmxhcmUpe2xlbnNGbGFyZXMucHVzaChvYmplY3QpO31lbHNlIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdCl7aWYoX3RoaXMuc29ydE9iamVjdHM9PT10cnVlKXtfdmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24ob2JqZWN0Lm1hdHJpeFdvcmxkKTtfdmVjdG9yMy5hcHBseVByb2plY3Rpb24oX3Byb2pTY3JlZW5NYXRyaXgpO31wdXNoUmVuZGVySXRlbShvYmplY3QsbnVsbCxvYmplY3QubWF0ZXJpYWwsX3ZlY3RvcjMueixudWxsKTt9ZWxzZSBpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaW5lfHxvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHMpe2lmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoKXtvYmplY3Quc2tlbGV0b24udXBkYXRlKCk7fWlmKG9iamVjdC5mcnVzdHVtQ3VsbGVkPT09ZmFsc2V8fGlzT2JqZWN0Vmlld2FibGUob2JqZWN0KT09PXRydWUpe3ZhciBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYobWF0ZXJpYWwudmlzaWJsZT09PXRydWUpe2lmKF90aGlzLnNvcnRPYmplY3RzPT09dHJ1ZSl7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG9iamVjdC5tYXRyaXhXb3JsZCk7X3ZlY3RvcjMuYXBwbHlQcm9qZWN0aW9uKF9wcm9qU2NyZWVuTWF0cml4KTt9dmFyIGdlb21ldHJ5PW9iamVjdHMudXBkYXRlKG9iamVjdCk7aWYobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NdWx0aU1hdGVyaWFsKXt2YXIgZ3JvdXBzPWdlb21ldHJ5Lmdyb3Vwczt2YXIgbWF0ZXJpYWxzPW1hdGVyaWFsLm1hdGVyaWFscztmb3IodmFyIGk9MCxsPWdyb3Vwcy5sZW5ndGg7aTxsO2krKyl7dmFyIGdyb3VwPWdyb3Vwc1tpXTt2YXIgZ3JvdXBNYXRlcmlhbD1tYXRlcmlhbHNbZ3JvdXAubWF0ZXJpYWxJbmRleF07aWYoZ3JvdXBNYXRlcmlhbC52aXNpYmxlPT09dHJ1ZSl7cHVzaFJlbmRlckl0ZW0ob2JqZWN0LGdlb21ldHJ5LGdyb3VwTWF0ZXJpYWwsX3ZlY3RvcjMueixncm91cCk7fX19ZWxzZXtwdXNoUmVuZGVySXRlbShvYmplY3QsZ2VvbWV0cnksbWF0ZXJpYWwsX3ZlY3RvcjMueixudWxsKTt9fX19fXZhciBjaGlsZHJlbj1vYmplY3QuY2hpbGRyZW47Zm9yKHZhciBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7cHJvamVjdE9iamVjdChjaGlsZHJlbltpXSxjYW1lcmEpO319ZnVuY3Rpb24gcmVuZGVyT2JqZWN0cyhyZW5kZXJMaXN0LGNhbWVyYSxmb2csb3ZlcnJpZGVNYXRlcmlhbCl7Zm9yKHZhciBpPTAsbD1yZW5kZXJMaXN0Lmxlbmd0aDtpPGw7aSsrKXt2YXIgcmVuZGVySXRlbT1yZW5kZXJMaXN0W2ldO3ZhciBvYmplY3Q9cmVuZGVySXRlbS5vYmplY3Q7dmFyIGdlb21ldHJ5PXJlbmRlckl0ZW0uZ2VvbWV0cnk7dmFyIG1hdGVyaWFsPW92ZXJyaWRlTWF0ZXJpYWw9PT11bmRlZmluZWQ/cmVuZGVySXRlbS5tYXRlcmlhbDpvdmVycmlkZU1hdGVyaWFsO3ZhciBncm91cD1yZW5kZXJJdGVtLmdyb3VwO29iamVjdC5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLG9iamVjdC5tYXRyaXhXb3JsZCk7b2JqZWN0Lm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgob2JqZWN0Lm1vZGVsVmlld01hdHJpeCk7aWYob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0KXtzZXRNYXRlcmlhbChtYXRlcmlhbCk7dmFyIHByb2dyYW09c2V0UHJvZ3JhbShjYW1lcmEsZm9nLG1hdGVyaWFsLG9iamVjdCk7X2N1cnJlbnRHZW9tZXRyeVByb2dyYW09Jyc7b2JqZWN0LnJlbmRlcihmdW5jdGlvbihvYmplY3Qpe190aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZShvYmplY3QscHJvZ3JhbSxtYXRlcmlhbCk7fSk7fWVsc2V7X3RoaXMucmVuZGVyQnVmZmVyRGlyZWN0KGNhbWVyYSxmb2csZ2VvbWV0cnksbWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9fX1mdW5jdGlvbiBpbml0TWF0ZXJpYWwobWF0ZXJpYWwsZm9nLG9iamVjdCl7dmFyIG1hdGVyaWFsUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChtYXRlcmlhbCk7dmFyIHBhcmFtZXRlcnM9cHJvZ3JhbUNhY2hlLmdldFBhcmFtZXRlcnMobWF0ZXJpYWwsX2xpZ2h0cyxmb2csX2NsaXBwaW5nLm51bVBsYW5lcyxvYmplY3QpO3ZhciBjb2RlPXByb2dyYW1DYWNoZS5nZXRQcm9ncmFtQ29kZShtYXRlcmlhbCxwYXJhbWV0ZXJzKTt2YXIgcHJvZ3JhbT1tYXRlcmlhbFByb3BlcnRpZXMucHJvZ3JhbTt2YXIgcHJvZ3JhbUNoYW5nZT10cnVlO2lmKHByb2dyYW09PT11bmRlZmluZWQpey8vIG5ldyBtYXRlcmlhbFxubWF0ZXJpYWwuYWRkRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25NYXRlcmlhbERpc3Bvc2UpO31lbHNlIGlmKHByb2dyYW0uY29kZSE9PWNvZGUpey8vIGNoYW5nZWQgZ2xzbCBvciBwYXJhbWV0ZXJzXG5yZWxlYXNlTWF0ZXJpYWxQcm9ncmFtUmVmZXJlbmNlKG1hdGVyaWFsKTt9ZWxzZSBpZihwYXJhbWV0ZXJzLnNoYWRlcklEIT09dW5kZWZpbmVkKXsvLyBzYW1lIGdsc2wgYW5kIHVuaWZvcm0gbGlzdFxucmV0dXJuO31lbHNley8vIG9ubHkgcmVidWlsZCB1bmlmb3JtIGxpc3RcbnByb2dyYW1DaGFuZ2U9ZmFsc2U7fWlmKHByb2dyYW1DaGFuZ2Upe2lmKHBhcmFtZXRlcnMuc2hhZGVySUQpe3ZhciBzaGFkZXI9VEhSRUUuU2hhZGVyTGliW3BhcmFtZXRlcnMuc2hhZGVySURdO21hdGVyaWFsUHJvcGVydGllcy5fX3dlYmdsU2hhZGVyPXtuYW1lOm1hdGVyaWFsLnR5cGUsdW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShzaGFkZXIudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpzaGFkZXIudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOnNoYWRlci5mcmFnbWVudFNoYWRlcn07fWVsc2V7bWF0ZXJpYWxQcm9wZXJ0aWVzLl9fd2ViZ2xTaGFkZXI9e25hbWU6bWF0ZXJpYWwudHlwZSx1bmlmb3JtczptYXRlcmlhbC51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6bWF0ZXJpYWwudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOm1hdGVyaWFsLmZyYWdtZW50U2hhZGVyfTt9bWF0ZXJpYWwuX193ZWJnbFNoYWRlcj1tYXRlcmlhbFByb3BlcnRpZXMuX193ZWJnbFNoYWRlcjtwcm9ncmFtPXByb2dyYW1DYWNoZS5hY3F1aXJlUHJvZ3JhbShtYXRlcmlhbCxwYXJhbWV0ZXJzLGNvZGUpO21hdGVyaWFsUHJvcGVydGllcy5wcm9ncmFtPXByb2dyYW07bWF0ZXJpYWwucHJvZ3JhbT1wcm9ncmFtO312YXIgYXR0cmlidXRlcz1wcm9ncmFtLmdldEF0dHJpYnV0ZXMoKTtpZihtYXRlcmlhbC5tb3JwaFRhcmdldHMpe21hdGVyaWFsLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cz0wO2Zvcih2YXIgaT0wO2k8X3RoaXMubWF4TW9ycGhUYXJnZXRzO2krKyl7aWYoYXR0cmlidXRlc1snbW9ycGhUYXJnZXQnK2ldPj0wKXttYXRlcmlhbC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrKzt9fX1pZihtYXRlcmlhbC5tb3JwaE5vcm1hbHMpe21hdGVyaWFsLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz0wO2Zvcih2YXIgaT0wO2k8X3RoaXMubWF4TW9ycGhOb3JtYWxzO2krKyl7aWYoYXR0cmlidXRlc1snbW9ycGhOb3JtYWwnK2ldPj0wKXttYXRlcmlhbC5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHMrKzt9fX12YXIgdW5pZm9ybXM9bWF0ZXJpYWxQcm9wZXJ0aWVzLl9fd2ViZ2xTaGFkZXIudW5pZm9ybXM7aWYoIShtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsKSYmIShtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLlJhd1NoYWRlck1hdGVyaWFsKXx8bWF0ZXJpYWwuY2xpcHBpbmc9PT10cnVlKXttYXRlcmlhbFByb3BlcnRpZXMubnVtQ2xpcHBpbmdQbGFuZXM9X2NsaXBwaW5nLm51bVBsYW5lczt1bmlmb3Jtcy5jbGlwcGluZ1BsYW5lcz1fY2xpcHBpbmcudW5pZm9ybTt9aWYobWF0ZXJpYWwubGlnaHRzKXsvLyBzdG9yZSB0aGUgbGlnaHQgc2V0dXAgaXQgd2FzIGNyZWF0ZWQgZm9yXG5tYXRlcmlhbFByb3BlcnRpZXMubGlnaHRzSGFzaD1fbGlnaHRzLmhhc2g7Ly8gd2lyZSB1cCB0aGUgbWF0ZXJpYWwgdG8gdGhpcyByZW5kZXJlcidzIGxpZ2h0aW5nIHN0YXRlXG51bmlmb3Jtcy5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT1fbGlnaHRzLmFtYmllbnQ7dW5pZm9ybXMuZGlyZWN0aW9uYWxMaWdodHMudmFsdWU9X2xpZ2h0cy5kaXJlY3Rpb25hbDt1bmlmb3Jtcy5zcG90TGlnaHRzLnZhbHVlPV9saWdodHMuc3BvdDt1bmlmb3Jtcy5wb2ludExpZ2h0cy52YWx1ZT1fbGlnaHRzLnBvaW50O3VuaWZvcm1zLmhlbWlzcGhlcmVMaWdodHMudmFsdWU9X2xpZ2h0cy5oZW1pO3VuaWZvcm1zLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPV9saWdodHMuZGlyZWN0aW9uYWxTaGFkb3dNYXA7dW5pZm9ybXMuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgudmFsdWU9X2xpZ2h0cy5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeDt1bmlmb3Jtcy5zcG90U2hhZG93TWFwLnZhbHVlPV9saWdodHMuc3BvdFNoYWRvd01hcDt1bmlmb3Jtcy5zcG90U2hhZG93TWF0cml4LnZhbHVlPV9saWdodHMuc3BvdFNoYWRvd01hdHJpeDt1bmlmb3Jtcy5wb2ludFNoYWRvd01hcC52YWx1ZT1fbGlnaHRzLnBvaW50U2hhZG93TWFwO3VuaWZvcm1zLnBvaW50U2hhZG93TWF0cml4LnZhbHVlPV9saWdodHMucG9pbnRTaGFkb3dNYXRyaXg7fXZhciBwcm9nVW5pZm9ybXM9bWF0ZXJpYWxQcm9wZXJ0aWVzLnByb2dyYW0uZ2V0VW5pZm9ybXMoKSx1bmlmb3Jtc0xpc3Q9VEhSRUUuV2ViR0xVbmlmb3Jtcy5zZXFXaXRoVmFsdWUocHJvZ1VuaWZvcm1zLnNlcSx1bmlmb3Jtcyk7bWF0ZXJpYWxQcm9wZXJ0aWVzLnVuaWZvcm1zTGlzdD11bmlmb3Jtc0xpc3Q7bWF0ZXJpYWxQcm9wZXJ0aWVzLmR5bmFtaWNVbmlmb3Jtcz1USFJFRS5XZWJHTFVuaWZvcm1zLnNwbGl0RHluYW1pYyh1bmlmb3Jtc0xpc3QsdW5pZm9ybXMpO31mdW5jdGlvbiBzZXRNYXRlcmlhbChtYXRlcmlhbCl7aWYobWF0ZXJpYWwuc2lkZSE9PVRIUkVFLkRvdWJsZVNpZGUpc3RhdGUuZW5hYmxlKF9nbC5DVUxMX0ZBQ0UpO2Vsc2Ugc3RhdGUuZGlzYWJsZShfZ2wuQ1VMTF9GQUNFKTtzdGF0ZS5zZXRGbGlwU2lkZWQobWF0ZXJpYWwuc2lkZT09PVRIUkVFLkJhY2tTaWRlKTtpZihtYXRlcmlhbC50cmFuc3BhcmVudD09PXRydWUpe3N0YXRlLnNldEJsZW5kaW5nKG1hdGVyaWFsLmJsZW5kaW5nLG1hdGVyaWFsLmJsZW5kRXF1YXRpb24sbWF0ZXJpYWwuYmxlbmRTcmMsbWF0ZXJpYWwuYmxlbmREc3QsbWF0ZXJpYWwuYmxlbmRFcXVhdGlvbkFscGhhLG1hdGVyaWFsLmJsZW5kU3JjQWxwaGEsbWF0ZXJpYWwuYmxlbmREc3RBbHBoYSxtYXRlcmlhbC5wcmVtdWx0aXBsaWVkQWxwaGEpO31lbHNle3N0YXRlLnNldEJsZW5kaW5nKFRIUkVFLk5vQmxlbmRpbmcpO31zdGF0ZS5zZXREZXB0aEZ1bmMobWF0ZXJpYWwuZGVwdGhGdW5jKTtzdGF0ZS5zZXREZXB0aFRlc3QobWF0ZXJpYWwuZGVwdGhUZXN0KTtzdGF0ZS5zZXREZXB0aFdyaXRlKG1hdGVyaWFsLmRlcHRoV3JpdGUpO3N0YXRlLnNldENvbG9yV3JpdGUobWF0ZXJpYWwuY29sb3JXcml0ZSk7c3RhdGUuc2V0UG9seWdvbk9mZnNldChtYXRlcmlhbC5wb2x5Z29uT2Zmc2V0LG1hdGVyaWFsLnBvbHlnb25PZmZzZXRGYWN0b3IsbWF0ZXJpYWwucG9seWdvbk9mZnNldFVuaXRzKTt9ZnVuY3Rpb24gc2V0UHJvZ3JhbShjYW1lcmEsZm9nLG1hdGVyaWFsLG9iamVjdCl7X3VzZWRUZXh0dXJlVW5pdHM9MDt2YXIgbWF0ZXJpYWxQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KG1hdGVyaWFsKTtpZihfY2xpcHBpbmdFbmFibGVkKXtpZihfbG9jYWxDbGlwcGluZ0VuYWJsZWR8fGNhbWVyYSE9PV9jdXJyZW50Q2FtZXJhKXt2YXIgdXNlQ2FjaGU9Y2FtZXJhPT09X2N1cnJlbnRDYW1lcmEmJm1hdGVyaWFsLmlkPT09X2N1cnJlbnRNYXRlcmlhbElkOy8vIHdlIG1pZ2h0IHdhbnQgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIHdpdGggc29tZSBDbGlwcGluZ0dyb3VwXG4vLyBvYmplY3QgaW5zdGVhZCBvZiB0aGUgbWF0ZXJpYWwsIG9uY2UgaXQgYmVjb21lcyBmZWFzaWJsZVxuLy8gKCM4NDY1LCAjODM3OSlcbl9jbGlwcGluZy5zZXRTdGF0ZShtYXRlcmlhbC5jbGlwcGluZ1BsYW5lcyxtYXRlcmlhbC5jbGlwU2hhZG93cyxjYW1lcmEsbWF0ZXJpYWxQcm9wZXJ0aWVzLHVzZUNhY2hlKTt9aWYobWF0ZXJpYWxQcm9wZXJ0aWVzLm51bUNsaXBwaW5nUGxhbmVzIT09dW5kZWZpbmVkJiZtYXRlcmlhbFByb3BlcnRpZXMubnVtQ2xpcHBpbmdQbGFuZXMhPT1fY2xpcHBpbmcubnVtUGxhbmVzKXttYXRlcmlhbC5uZWVkc1VwZGF0ZT10cnVlO319aWYobWF0ZXJpYWxQcm9wZXJ0aWVzLnByb2dyYW09PT11bmRlZmluZWQpe21hdGVyaWFsLm5lZWRzVXBkYXRlPXRydWU7fWlmKG1hdGVyaWFsUHJvcGVydGllcy5saWdodHNIYXNoIT09dW5kZWZpbmVkJiZtYXRlcmlhbFByb3BlcnRpZXMubGlnaHRzSGFzaCE9PV9saWdodHMuaGFzaCl7bWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTt9aWYobWF0ZXJpYWwubmVlZHNVcGRhdGUpe2luaXRNYXRlcmlhbChtYXRlcmlhbCxmb2csb2JqZWN0KTttYXRlcmlhbC5uZWVkc1VwZGF0ZT1mYWxzZTt9dmFyIHJlZnJlc2hQcm9ncmFtPWZhbHNlO3ZhciByZWZyZXNoTWF0ZXJpYWw9ZmFsc2U7dmFyIHJlZnJlc2hMaWdodHM9ZmFsc2U7dmFyIHByb2dyYW09bWF0ZXJpYWxQcm9wZXJ0aWVzLnByb2dyYW0scF91bmlmb3Jtcz1wcm9ncmFtLmdldFVuaWZvcm1zKCksbV91bmlmb3Jtcz1tYXRlcmlhbFByb3BlcnRpZXMuX193ZWJnbFNoYWRlci51bmlmb3JtcztpZihwcm9ncmFtLmlkIT09X2N1cnJlbnRQcm9ncmFtKXtfZ2wudXNlUHJvZ3JhbShwcm9ncmFtLnByb2dyYW0pO19jdXJyZW50UHJvZ3JhbT1wcm9ncmFtLmlkO3JlZnJlc2hQcm9ncmFtPXRydWU7cmVmcmVzaE1hdGVyaWFsPXRydWU7cmVmcmVzaExpZ2h0cz10cnVlO31pZihtYXRlcmlhbC5pZCE9PV9jdXJyZW50TWF0ZXJpYWxJZCl7X2N1cnJlbnRNYXRlcmlhbElkPW1hdGVyaWFsLmlkO3JlZnJlc2hNYXRlcmlhbD10cnVlO31pZihyZWZyZXNoUHJvZ3JhbXx8Y2FtZXJhIT09X2N1cnJlbnRDYW1lcmEpe3BfdW5pZm9ybXMuc2V0KF9nbCxjYW1lcmEsJ3Byb2plY3Rpb25NYXRyaXgnKTtpZihjYXBhYmlsaXRpZXMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcil7cF91bmlmb3Jtcy5zZXRWYWx1ZShfZ2wsJ2xvZ0RlcHRoQnVmRkMnLDIuMC8oTWF0aC5sb2coY2FtZXJhLmZhcisxLjApL01hdGguTE4yKSk7fWlmKGNhbWVyYSE9PV9jdXJyZW50Q2FtZXJhKXtfY3VycmVudENhbWVyYT1jYW1lcmE7Ly8gbGlnaHRpbmcgdW5pZm9ybXMgZGVwZW5kIG9uIHRoZSBjYW1lcmEgc28gZW5mb3JjZSBhbiB1cGRhdGVcbi8vIG5vdywgaW4gY2FzZSB0aGlzIG1hdGVyaWFsIHN1cHBvcnRzIGxpZ2h0cyAtIG9yIGxhdGVyLCB3aGVuXG4vLyB0aGUgbmV4dCBtYXRlcmlhbCB0aGF0IGRvZXMgZ2V0cyBhY3RpdmF0ZWQ6XG5yZWZyZXNoTWF0ZXJpYWw9dHJ1ZTsvLyBzZXQgdG8gdHJ1ZSBvbiBtYXRlcmlhbCBjaGFuZ2VcbnJlZnJlc2hMaWdodHM9dHJ1ZTsvLyByZW1haW5zIHNldCB1bnRpbCB1cGRhdGUgZG9uZVxufS8vIGxvYWQgbWF0ZXJpYWwgc3BlY2lmaWMgdW5pZm9ybXNcbi8vIChzaGFkZXIgbWF0ZXJpYWwgYWxzbyBnZXRzIHRoZW0gZm9yIHRoZSBzYWtlIG9mIGdlbmVyaWNpdHkpXG5pZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsfHxtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsfHxtYXRlcmlhbC5lbnZNYXApe3ZhciB1Q2FtUG9zPXBfdW5pZm9ybXMubWFwLmNhbWVyYVBvc2l0aW9uO2lmKHVDYW1Qb3MhPT11bmRlZmluZWQpe3VDYW1Qb3Muc2V0VmFsdWUoX2dsLF92ZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpKTt9fWlmKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8bWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbHx8bWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbHx8bWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbHx8bWF0ZXJpYWwuc2tpbm5pbmcpe3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCd2aWV3TWF0cml4JyxjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTt9cF91bmlmb3Jtcy5zZXQoX2dsLF90aGlzLCd0b25lTWFwcGluZ0V4cG9zdXJlJyk7cF91bmlmb3Jtcy5zZXQoX2dsLF90aGlzLCd0b25lTWFwcGluZ1doaXRlUG9pbnQnKTt9Ly8gc2tpbm5pbmcgdW5pZm9ybXMgbXVzdCBiZSBzZXQgZXZlbiBpZiBtYXRlcmlhbCBkaWRuJ3QgY2hhbmdlXG4vLyBhdXRvLXNldHRpbmcgb2YgdGV4dHVyZSB1bml0IGZvciBib25lIHRleHR1cmUgbXVzdCBnbyBiZWZvcmUgb3RoZXIgdGV4dHVyZXNcbi8vIG5vdCBzdXJlIHdoeSwgYnV0IG90aGVyd2lzZSB3ZWlyZCB0aGluZ3MgaGFwcGVuXG5pZihtYXRlcmlhbC5za2lubmluZyl7cF91bmlmb3Jtcy5zZXRPcHRpb25hbChfZ2wsb2JqZWN0LCdiaW5kTWF0cml4Jyk7cF91bmlmb3Jtcy5zZXRPcHRpb25hbChfZ2wsb2JqZWN0LCdiaW5kTWF0cml4SW52ZXJzZScpO3ZhciBza2VsZXRvbj1vYmplY3Quc2tlbGV0b247aWYoc2tlbGV0b24pe2lmKGNhcGFiaWxpdGllcy5mbG9hdFZlcnRleFRleHR1cmVzJiZza2VsZXRvbi51c2VWZXJ0ZXhUZXh0dXJlKXtwX3VuaWZvcm1zLnNldChfZ2wsc2tlbGV0b24sJ2JvbmVUZXh0dXJlJyk7cF91bmlmb3Jtcy5zZXQoX2dsLHNrZWxldG9uLCdib25lVGV4dHVyZVdpZHRoJyk7cF91bmlmb3Jtcy5zZXQoX2dsLHNrZWxldG9uLCdib25lVGV4dHVyZUhlaWdodCcpO31lbHNle3BfdW5pZm9ybXMuc2V0T3B0aW9uYWwoX2dsLHNrZWxldG9uLCdib25lTWF0cmljZXMnKTt9fX1pZihyZWZyZXNoTWF0ZXJpYWwpe2lmKG1hdGVyaWFsLmxpZ2h0cyl7Ly8gdGhlIGN1cnJlbnQgbWF0ZXJpYWwgcmVxdWlyZXMgbGlnaHRpbmcgaW5mb1xuLy8gbm90ZTogYWxsIGxpZ2h0aW5nIHVuaWZvcm1zIGFyZSBhbHdheXMgc2V0IGNvcnJlY3RseVxuLy8gdGhleSBzaW1wbHkgcmVmZXJlbmNlIHRoZSByZW5kZXJlcidzIHN0YXRlIGZvciB0aGVpclxuLy8gdmFsdWVzXG4vL1xuLy8gdXNlIHRoZSBjdXJyZW50IG1hdGVyaWFsJ3MgLm5lZWRzVXBkYXRlIGZsYWdzIHRvIHNldFxuLy8gdGhlIEdMIHN0YXRlIHdoZW4gcmVxdWlyZWRcbm1hcmtVbmlmb3Jtc0xpZ2h0c05lZWRzVXBkYXRlKG1fdW5pZm9ybXMscmVmcmVzaExpZ2h0cyk7fS8vIHJlZnJlc2ggdW5pZm9ybXMgY29tbW9uIHRvIHNldmVyYWwgbWF0ZXJpYWxzXG5pZihmb2cmJm1hdGVyaWFsLmZvZyl7cmVmcmVzaFVuaWZvcm1zRm9nKG1fdW5pZm9ybXMsZm9nKTt9aWYobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbHx8bWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsfHxtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNDb21tb24obV91bmlmb3JtcyxtYXRlcmlhbCk7fS8vIHJlZnJlc2ggc2luZ2xlIG1hdGVyaWFsIHNwZWNpZmljIHVuaWZvcm1zXG5pZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNMaW5lKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNMaW5lKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO3JlZnJlc2hVbmlmb3Jtc0Rhc2gobV91bmlmb3JtcyxtYXRlcmlhbCk7fWVsc2UgaWYobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHNNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zUG9pbnRzKG1fdW5pZm9ybXMsbWF0ZXJpYWwpO31lbHNlIGlmKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCl7cmVmcmVzaFVuaWZvcm1zTGFtYmVydChtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNQaG9uZyhtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNQaHlzaWNhbChtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKXtyZWZyZXNoVW5pZm9ybXNTdGFuZGFyZChtX3VuaWZvcm1zLG1hdGVyaWFsKTt9ZWxzZSBpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsKXtpZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe21fdW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDttX3VuaWZvcm1zLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlO21fdW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO319ZWxzZSBpZihtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbCl7bV91bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPW1hdGVyaWFsLm9wYWNpdHk7fVRIUkVFLldlYkdMVW5pZm9ybXMudXBsb2FkKF9nbCxtYXRlcmlhbFByb3BlcnRpZXMudW5pZm9ybXNMaXN0LG1fdW5pZm9ybXMsX3RoaXMpO30vLyBjb21tb24gbWF0cmljZXNcbnBfdW5pZm9ybXMuc2V0KF9nbCxvYmplY3QsJ21vZGVsVmlld01hdHJpeCcpO3BfdW5pZm9ybXMuc2V0KF9nbCxvYmplY3QsJ25vcm1hbE1hdHJpeCcpO3BfdW5pZm9ybXMuc2V0VmFsdWUoX2dsLCdtb2RlbE1hdHJpeCcsb2JqZWN0Lm1hdHJpeFdvcmxkKTsvLyBkeW5hbWljIHVuaWZvcm1zXG52YXIgZHluVW5pZm9ybXM9bWF0ZXJpYWxQcm9wZXJ0aWVzLmR5bmFtaWNVbmlmb3JtcztpZihkeW5Vbmlmb3JtcyE9PW51bGwpe1RIUkVFLldlYkdMVW5pZm9ybXMuZXZhbER5bmFtaWMoZHluVW5pZm9ybXMsbV91bmlmb3JtcyxvYmplY3QsY2FtZXJhKTtUSFJFRS5XZWJHTFVuaWZvcm1zLnVwbG9hZChfZ2wsZHluVW5pZm9ybXMsbV91bmlmb3JtcyxfdGhpcyk7fXJldHVybiBwcm9ncmFtO30vLyBVbmlmb3JtcyAocmVmcmVzaCB1bmlmb3JtcyBvYmplY3RzKVxuZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zQ29tbW9uKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPW1hdGVyaWFsLm9wYWNpdHk7dW5pZm9ybXMuZGlmZnVzZS52YWx1ZT1tYXRlcmlhbC5jb2xvcjtpZihtYXRlcmlhbC5lbWlzc2l2ZSl7dW5pZm9ybXMuZW1pc3NpdmUudmFsdWUuY29weShtYXRlcmlhbC5lbWlzc2l2ZSkubXVsdGlwbHlTY2FsYXIobWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkpO311bmlmb3Jtcy5tYXAudmFsdWU9bWF0ZXJpYWwubWFwO3VuaWZvcm1zLnNwZWN1bGFyTWFwLnZhbHVlPW1hdGVyaWFsLnNwZWN1bGFyTWFwO3VuaWZvcm1zLmFscGhhTWFwLnZhbHVlPW1hdGVyaWFsLmFscGhhTWFwO2lmKG1hdGVyaWFsLmFvTWFwKXt1bmlmb3Jtcy5hb01hcC52YWx1ZT1tYXRlcmlhbC5hb01hcDt1bmlmb3Jtcy5hb01hcEludGVuc2l0eS52YWx1ZT1tYXRlcmlhbC5hb01hcEludGVuc2l0eTt9Ly8gdXYgcmVwZWF0IGFuZCBvZmZzZXQgc2V0dGluZyBwcmlvcml0aWVzXG4vLyAxLiBjb2xvciBtYXBcbi8vIDIuIHNwZWN1bGFyIG1hcFxuLy8gMy4gbm9ybWFsIG1hcFxuLy8gNC4gYnVtcCBtYXBcbi8vIDUuIGFscGhhIG1hcFxuLy8gNi4gZW1pc3NpdmUgbWFwXG52YXIgdXZTY2FsZU1hcDtpZihtYXRlcmlhbC5tYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwubWFwO31lbHNlIGlmKG1hdGVyaWFsLnNwZWN1bGFyTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnNwZWN1bGFyTWFwO31lbHNlIGlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dXZTY2FsZU1hcD1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7fWVsc2UgaWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLm5vcm1hbE1hcDt9ZWxzZSBpZihtYXRlcmlhbC5idW1wTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmJ1bXBNYXA7fWVsc2UgaWYobWF0ZXJpYWwucm91Z2huZXNzTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLnJvdWdobmVzc01hcDt9ZWxzZSBpZihtYXRlcmlhbC5tZXRhbG5lc3NNYXApe3V2U2NhbGVNYXA9bWF0ZXJpYWwubWV0YWxuZXNzTWFwO31lbHNlIGlmKG1hdGVyaWFsLmFscGhhTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmFscGhhTWFwO31lbHNlIGlmKG1hdGVyaWFsLmVtaXNzaXZlTWFwKXt1dlNjYWxlTWFwPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31pZih1dlNjYWxlTWFwIT09dW5kZWZpbmVkKXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuaWYodXZTY2FsZU1hcCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KXt1dlNjYWxlTWFwPXV2U2NhbGVNYXAudGV4dHVyZTt9dmFyIG9mZnNldD11dlNjYWxlTWFwLm9mZnNldDt2YXIgcmVwZWF0PXV2U2NhbGVNYXAucmVwZWF0O3VuaWZvcm1zLm9mZnNldFJlcGVhdC52YWx1ZS5zZXQob2Zmc2V0Lngsb2Zmc2V0LnkscmVwZWF0LngscmVwZWF0LnkpO311bmlmb3Jtcy5lbnZNYXAudmFsdWU9bWF0ZXJpYWwuZW52TWFwOy8vIGRvbid0IGZsaXAgQ3ViZVRleHR1cmUgZW52TWFwcywgZmxpcCBldmVyeXRoaW5nIGVsc2U6XG4vLyAgV2ViR0xSZW5kZXJUYXJnZXRDdWJlIHdpbGwgYmUgZmxpcHBlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbi8vICBXZWJHTFJlbmRlclRhcmdldEN1YmUudGV4dHVyZSB3aWxsIGJlIGZsaXBwZWQgYmVjYXVzZSBpdCdzIGEgVGV4dHVyZSBhbmQgTk9UIGEgQ3ViZVRleHR1cmVcbi8vIHRoaXMgY2hlY2sgbXVzdCBiZSBoYW5kbGVkIGRpZmZlcmVudGx5LCBvciByZW1vdmVkIGVudGlyZWx5LCBpZiBXZWJHTFJlbmRlclRhcmdldEN1YmUgdXNlcyBhIEN1YmVUZXh0dXJlIGluIHRoZSBmdXR1cmVcbnVuaWZvcm1zLmZsaXBFbnZNYXAudmFsdWU9IShtYXRlcmlhbC5lbnZNYXAgaW5zdGFuY2VvZiBUSFJFRS5DdWJlVGV4dHVyZSk/MTotMTt1bmlmb3Jtcy5yZWZsZWN0aXZpdHkudmFsdWU9bWF0ZXJpYWwucmVmbGVjdGl2aXR5O3VuaWZvcm1zLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1tYXRlcmlhbC5yZWZyYWN0aW9uUmF0aW87fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0xpbmUodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLmRpZmZ1c2UudmFsdWU9bWF0ZXJpYWwuY29sb3I7dW5pZm9ybXMub3BhY2l0eS52YWx1ZT1tYXRlcmlhbC5vcGFjaXR5O31mdW5jdGlvbiByZWZyZXNoVW5pZm9ybXNEYXNoKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5kYXNoU2l6ZS52YWx1ZT1tYXRlcmlhbC5kYXNoU2l6ZTt1bmlmb3Jtcy50b3RhbFNpemUudmFsdWU9bWF0ZXJpYWwuZGFzaFNpemUrbWF0ZXJpYWwuZ2FwU2l6ZTt1bmlmb3Jtcy5zY2FsZS52YWx1ZT1tYXRlcmlhbC5zY2FsZTt9ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUG9pbnRzKHVuaWZvcm1zLG1hdGVyaWFsKXt1bmlmb3Jtcy5kaWZmdXNlLnZhbHVlPW1hdGVyaWFsLmNvbG9yO3VuaWZvcm1zLm9wYWNpdHkudmFsdWU9bWF0ZXJpYWwub3BhY2l0eTt1bmlmb3Jtcy5zaXplLnZhbHVlPW1hdGVyaWFsLnNpemUqX3BpeGVsUmF0aW87dW5pZm9ybXMuc2NhbGUudmFsdWU9X2NhbnZhcy5jbGllbnRIZWlnaHQqMC41O3VuaWZvcm1zLm1hcC52YWx1ZT1tYXRlcmlhbC5tYXA7aWYobWF0ZXJpYWwubWFwIT09bnVsbCl7dmFyIG9mZnNldD1tYXRlcmlhbC5tYXAub2Zmc2V0O3ZhciByZXBlYXQ9bWF0ZXJpYWwubWFwLnJlcGVhdDt1bmlmb3Jtcy5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KG9mZnNldC54LG9mZnNldC55LHJlcGVhdC54LHJlcGVhdC55KTt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0ZvZyh1bmlmb3Jtcyxmb2cpe3VuaWZvcm1zLmZvZ0NvbG9yLnZhbHVlPWZvZy5jb2xvcjtpZihmb2cgaW5zdGFuY2VvZiBUSFJFRS5Gb2cpe3VuaWZvcm1zLmZvZ05lYXIudmFsdWU9Zm9nLm5lYXI7dW5pZm9ybXMuZm9nRmFyLnZhbHVlPWZvZy5mYXI7fWVsc2UgaWYoZm9nIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMil7dW5pZm9ybXMuZm9nRGVuc2l0eS52YWx1ZT1mb2cuZGVuc2l0eTt9fWZ1bmN0aW9uIHJlZnJlc2hVbmlmb3Jtc0xhbWJlcnQodW5pZm9ybXMsbWF0ZXJpYWwpe2lmKG1hdGVyaWFsLmxpZ2h0TWFwKXt1bmlmb3Jtcy5saWdodE1hcC52YWx1ZT1tYXRlcmlhbC5saWdodE1hcDt1bmlmb3Jtcy5saWdodE1hcEludGVuc2l0eS52YWx1ZT1tYXRlcmlhbC5saWdodE1hcEludGVuc2l0eTt9aWYobWF0ZXJpYWwuZW1pc3NpdmVNYXApe3VuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlPW1hdGVyaWFsLmVtaXNzaXZlTWFwO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUGhvbmcodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLnNwZWN1bGFyLnZhbHVlPW1hdGVyaWFsLnNwZWN1bGFyO3VuaWZvcm1zLnNoaW5pbmVzcy52YWx1ZT1NYXRoLm1heChtYXRlcmlhbC5zaGluaW5lc3MsMWUtNCk7Ly8gdG8gcHJldmVudCBwb3coIDAuMCwgMC4wIClcbmlmKG1hdGVyaWFsLmxpZ2h0TWFwKXt1bmlmb3Jtcy5saWdodE1hcC52YWx1ZT1tYXRlcmlhbC5saWdodE1hcDt1bmlmb3Jtcy5saWdodE1hcEludGVuc2l0eS52YWx1ZT1tYXRlcmlhbC5saWdodE1hcEludGVuc2l0eTt9aWYobWF0ZXJpYWwuZW1pc3NpdmVNYXApe3VuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlPW1hdGVyaWFsLmVtaXNzaXZlTWFwO31pZihtYXRlcmlhbC5idW1wTWFwKXt1bmlmb3Jtcy5idW1wTWFwLnZhbHVlPW1hdGVyaWFsLmJ1bXBNYXA7dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlPW1hdGVyaWFsLmJ1bXBTY2FsZTt9aWYobWF0ZXJpYWwubm9ybWFsTWFwKXt1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWU9bWF0ZXJpYWwubm9ybWFsTWFwO3VuaWZvcm1zLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkobWF0ZXJpYWwubm9ybWFsU2NhbGUpO31pZihtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXApe3VuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXA7dW5pZm9ybXMuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9bWF0ZXJpYWwuZGlzcGxhY2VtZW50U2NhbGU7dW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzO319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zU3RhbmRhcmQodW5pZm9ybXMsbWF0ZXJpYWwpe3VuaWZvcm1zLnJvdWdobmVzcy52YWx1ZT1tYXRlcmlhbC5yb3VnaG5lc3M7dW5pZm9ybXMubWV0YWxuZXNzLnZhbHVlPW1hdGVyaWFsLm1ldGFsbmVzcztpZihtYXRlcmlhbC5yb3VnaG5lc3NNYXApe3VuaWZvcm1zLnJvdWdobmVzc01hcC52YWx1ZT1tYXRlcmlhbC5yb3VnaG5lc3NNYXA7fWlmKG1hdGVyaWFsLm1ldGFsbmVzc01hcCl7dW5pZm9ybXMubWV0YWxuZXNzTWFwLnZhbHVlPW1hdGVyaWFsLm1ldGFsbmVzc01hcDt9aWYobWF0ZXJpYWwubGlnaHRNYXApe3VuaWZvcm1zLmxpZ2h0TWFwLnZhbHVlPW1hdGVyaWFsLmxpZ2h0TWFwO3VuaWZvcm1zLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlPW1hdGVyaWFsLmxpZ2h0TWFwSW50ZW5zaXR5O31pZihtYXRlcmlhbC5lbWlzc2l2ZU1hcCl7dW5pZm9ybXMuZW1pc3NpdmVNYXAudmFsdWU9bWF0ZXJpYWwuZW1pc3NpdmVNYXA7fWlmKG1hdGVyaWFsLmJ1bXBNYXApe3VuaWZvcm1zLmJ1bXBNYXAudmFsdWU9bWF0ZXJpYWwuYnVtcE1hcDt1bmlmb3Jtcy5idW1wU2NhbGUudmFsdWU9bWF0ZXJpYWwuYnVtcFNjYWxlO31pZihtYXRlcmlhbC5ub3JtYWxNYXApe3VuaWZvcm1zLm5vcm1hbE1hcC52YWx1ZT1tYXRlcmlhbC5ub3JtYWxNYXA7dW5pZm9ybXMubm9ybWFsU2NhbGUudmFsdWUuY29weShtYXRlcmlhbC5ub3JtYWxTY2FsZSk7fWlmKG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCl7dW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1tYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTt1bmlmb3Jtcy5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPW1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7fWlmKG1hdGVyaWFsLmVudk1hcCl7Ly91bmlmb3Jtcy5lbnZNYXAudmFsdWUgPSBtYXRlcmlhbC5lbnZNYXA7IC8vIHBhcnQgb2YgdW5pZm9ybXMgY29tbW9uXG51bmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWU9bWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5O319ZnVuY3Rpb24gcmVmcmVzaFVuaWZvcm1zUGh5c2ljYWwodW5pZm9ybXMsbWF0ZXJpYWwpe3JlZnJlc2hVbmlmb3Jtc1N0YW5kYXJkKHVuaWZvcm1zLG1hdGVyaWFsKTt9Ly8gSWYgdW5pZm9ybXMgYXJlIG1hcmtlZCBhcyBjbGVhbiwgdGhleSBkb24ndCBuZWVkIHRvIGJlIGxvYWRlZCB0byB0aGUgR1BVLlxuZnVuY3Rpb24gbWFya1VuaWZvcm1zTGlnaHRzTmVlZHNVcGRhdGUodW5pZm9ybXMsdmFsdWUpe3VuaWZvcm1zLmFtYmllbnRMaWdodENvbG9yLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPXZhbHVlO3VuaWZvcm1zLnNwb3RMaWdodHMubmVlZHNVcGRhdGU9dmFsdWU7dW5pZm9ybXMuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT12YWx1ZTt9Ly8gTGlnaHRpbmdcbmZ1bmN0aW9uIHNldHVwU2hhZG93cyhsaWdodHMpe3ZhciBsaWdodFNoYWRvd3NMZW5ndGg9MDtmb3IodmFyIGk9MCxsPWxpZ2h0cy5sZW5ndGg7aTxsO2krKyl7dmFyIGxpZ2h0PWxpZ2h0c1tpXTtpZihsaWdodC5jYXN0U2hhZG93KXtfbGlnaHRzLnNoYWRvd3NbbGlnaHRTaGFkb3dzTGVuZ3RoKytdPWxpZ2h0O319X2xpZ2h0cy5zaGFkb3dzLmxlbmd0aD1saWdodFNoYWRvd3NMZW5ndGg7fWZ1bmN0aW9uIHNldHVwTGlnaHRzKGxpZ2h0cyxjYW1lcmEpe3ZhciBsLGxsLGxpZ2h0LHI9MCxnPTAsYj0wLGNvbG9yLGludGVuc2l0eSxkaXN0YW5jZSxzaGFkb3dNYXAsdmlld01hdHJpeD1jYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLGRpcmVjdGlvbmFsTGVuZ3RoPTAscG9pbnRMZW5ndGg9MCxzcG90TGVuZ3RoPTAsaGVtaUxlbmd0aD0wO2ZvcihsPTAsbGw9bGlnaHRzLmxlbmd0aDtsPGxsO2wrKyl7bGlnaHQ9bGlnaHRzW2xdO2NvbG9yPWxpZ2h0LmNvbG9yO2ludGVuc2l0eT1saWdodC5pbnRlbnNpdHk7ZGlzdGFuY2U9bGlnaHQuZGlzdGFuY2U7c2hhZG93TWFwPWxpZ2h0LnNoYWRvdyYmbGlnaHQuc2hhZG93Lm1hcD9saWdodC5zaGFkb3cubWFwLnRleHR1cmU6bnVsbDtpZihsaWdodCBpbnN0YW5jZW9mIFRIUkVFLkFtYmllbnRMaWdodCl7cis9Y29sb3IucippbnRlbnNpdHk7Zys9Y29sb3IuZyppbnRlbnNpdHk7Yis9Y29sb3IuYippbnRlbnNpdHk7fWVsc2UgaWYobGlnaHQgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KXt2YXIgdW5pZm9ybXM9bGlnaHRDYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLmNvbG9yLmNvcHkobGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKGxpZ2h0LmludGVuc2l0eSk7dW5pZm9ybXMuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7X3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMuZGlyZWN0aW9uLnN1YihfdmVjdG9yMyk7dW5pZm9ybXMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2aWV3TWF0cml4KTt1bmlmb3Jtcy5zaGFkb3c9bGlnaHQuY2FzdFNoYWRvdztpZihsaWdodC5jYXN0U2hhZG93KXt1bmlmb3Jtcy5zaGFkb3dCaWFzPWxpZ2h0LnNoYWRvdy5iaWFzO3VuaWZvcm1zLnNoYWRvd1JhZGl1cz1saWdodC5zaGFkb3cucmFkaXVzO3VuaWZvcm1zLnNoYWRvd01hcFNpemU9bGlnaHQuc2hhZG93Lm1hcFNpemU7fV9saWdodHMuZGlyZWN0aW9uYWxTaGFkb3dNYXBbZGlyZWN0aW9uYWxMZW5ndGhdPXNoYWRvd01hcDtfbGlnaHRzLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W2RpcmVjdGlvbmFsTGVuZ3RoXT1saWdodC5zaGFkb3cubWF0cml4O19saWdodHMuZGlyZWN0aW9uYWxbZGlyZWN0aW9uYWxMZW5ndGgrK109dW5pZm9ybXM7fWVsc2UgaWYobGlnaHQgaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQpe3ZhciB1bmlmb3Jtcz1saWdodENhY2hlLmdldChsaWdodCk7dW5pZm9ybXMucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTt1bmlmb3Jtcy5wb3NpdGlvbi5hcHBseU1hdHJpeDQodmlld01hdHJpeCk7dW5pZm9ybXMuY29sb3IuY29weShjb2xvcikubXVsdGlwbHlTY2FsYXIoaW50ZW5zaXR5KTt1bmlmb3Jtcy5kaXN0YW5jZT1kaXN0YW5jZTt1bmlmb3Jtcy5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKTtfdmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt1bmlmb3Jtcy5kaXJlY3Rpb24uc3ViKF92ZWN0b3IzKTt1bmlmb3Jtcy5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHZpZXdNYXRyaXgpO3VuaWZvcm1zLmNvbmVDb3M9TWF0aC5jb3MobGlnaHQuYW5nbGUpO3VuaWZvcm1zLnBlbnVtYnJhQ29zPU1hdGguY29zKGxpZ2h0LmFuZ2xlKigxLWxpZ2h0LnBlbnVtYnJhKSk7dW5pZm9ybXMuZGVjYXk9bGlnaHQuZGlzdGFuY2U9PT0wPzAuMDpsaWdodC5kZWNheTt1bmlmb3Jtcy5zaGFkb3c9bGlnaHQuY2FzdFNoYWRvdztpZihsaWdodC5jYXN0U2hhZG93KXt1bmlmb3Jtcy5zaGFkb3dCaWFzPWxpZ2h0LnNoYWRvdy5iaWFzO3VuaWZvcm1zLnNoYWRvd1JhZGl1cz1saWdodC5zaGFkb3cucmFkaXVzO3VuaWZvcm1zLnNoYWRvd01hcFNpemU9bGlnaHQuc2hhZG93Lm1hcFNpemU7fV9saWdodHMuc3BvdFNoYWRvd01hcFtzcG90TGVuZ3RoXT1zaGFkb3dNYXA7X2xpZ2h0cy5zcG90U2hhZG93TWF0cml4W3Nwb3RMZW5ndGhdPWxpZ2h0LnNoYWRvdy5tYXRyaXg7X2xpZ2h0cy5zcG90W3Nwb3RMZW5ndGgrK109dW5pZm9ybXM7fWVsc2UgaWYobGlnaHQgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0KXt2YXIgdW5pZm9ybXM9bGlnaHRDYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihsaWdodC5tYXRyaXhXb3JsZCk7dW5pZm9ybXMucG9zaXRpb24uYXBwbHlNYXRyaXg0KHZpZXdNYXRyaXgpO3VuaWZvcm1zLmNvbG9yLmNvcHkobGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKGxpZ2h0LmludGVuc2l0eSk7dW5pZm9ybXMuZGlzdGFuY2U9bGlnaHQuZGlzdGFuY2U7dW5pZm9ybXMuZGVjYXk9bGlnaHQuZGlzdGFuY2U9PT0wPzAuMDpsaWdodC5kZWNheTt1bmlmb3Jtcy5zaGFkb3c9bGlnaHQuY2FzdFNoYWRvdztpZihsaWdodC5jYXN0U2hhZG93KXt1bmlmb3Jtcy5zaGFkb3dCaWFzPWxpZ2h0LnNoYWRvdy5iaWFzO3VuaWZvcm1zLnNoYWRvd1JhZGl1cz1saWdodC5zaGFkb3cucmFkaXVzO3VuaWZvcm1zLnNoYWRvd01hcFNpemU9bGlnaHQuc2hhZG93Lm1hcFNpemU7fV9saWdodHMucG9pbnRTaGFkb3dNYXBbcG9pbnRMZW5ndGhdPXNoYWRvd01hcDtpZihfbGlnaHRzLnBvaW50U2hhZG93TWF0cml4W3BvaW50TGVuZ3RoXT09PXVuZGVmaW5lZCl7X2xpZ2h0cy5wb2ludFNoYWRvd01hdHJpeFtwb2ludExlbmd0aF09bmV3IFRIUkVFLk1hdHJpeDQoKTt9Ly8gZm9yIHBvaW50IGxpZ2h0cyB3ZSBzZXQgdGhlIHNoYWRvdyBtYXRyaXggdG8gYmUgYSB0cmFuc2xhdGlvbi1vbmx5IG1hdHJpeFxuLy8gZXF1YWwgdG8gaW52ZXJzZSBvZiB0aGUgbGlnaHQncyBwb3NpdGlvblxuX3ZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGxpZ2h0Lm1hdHJpeFdvcmxkKS5uZWdhdGUoKTtfbGlnaHRzLnBvaW50U2hhZG93TWF0cml4W3BvaW50TGVuZ3RoXS5pZGVudGl0eSgpLnNldFBvc2l0aW9uKF92ZWN0b3IzKTtfbGlnaHRzLnBvaW50W3BvaW50TGVuZ3RoKytdPXVuaWZvcm1zO31lbHNlIGlmKGxpZ2h0IGluc3RhbmNlb2YgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KXt2YXIgdW5pZm9ybXM9bGlnaHRDYWNoZS5nZXQobGlnaHQpO3VuaWZvcm1zLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3VuaWZvcm1zLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odmlld01hdHJpeCk7dW5pZm9ybXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpO3VuaWZvcm1zLnNreUNvbG9yLmNvcHkobGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKGludGVuc2l0eSk7dW5pZm9ybXMuZ3JvdW5kQ29sb3IuY29weShsaWdodC5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIoaW50ZW5zaXR5KTtfbGlnaHRzLmhlbWlbaGVtaUxlbmd0aCsrXT11bmlmb3Jtczt9fV9saWdodHMuYW1iaWVudFswXT1yO19saWdodHMuYW1iaWVudFsxXT1nO19saWdodHMuYW1iaWVudFsyXT1iO19saWdodHMuZGlyZWN0aW9uYWwubGVuZ3RoPWRpcmVjdGlvbmFsTGVuZ3RoO19saWdodHMuc3BvdC5sZW5ndGg9c3BvdExlbmd0aDtfbGlnaHRzLnBvaW50Lmxlbmd0aD1wb2ludExlbmd0aDtfbGlnaHRzLmhlbWkubGVuZ3RoPWhlbWlMZW5ndGg7X2xpZ2h0cy5oYXNoPWRpcmVjdGlvbmFsTGVuZ3RoKycsJytwb2ludExlbmd0aCsnLCcrc3BvdExlbmd0aCsnLCcraGVtaUxlbmd0aCsnLCcrX2xpZ2h0cy5zaGFkb3dzLmxlbmd0aDt9Ly8gR0wgc3RhdGUgc2V0dGluZ1xudGhpcy5zZXRGYWNlQ3VsbGluZz1mdW5jdGlvbihjdWxsRmFjZSxmcm9udEZhY2VEaXJlY3Rpb24pe3N0YXRlLnNldEN1bGxGYWNlKGN1bGxGYWNlKTtzdGF0ZS5zZXRGbGlwU2lkZWQoZnJvbnRGYWNlRGlyZWN0aW9uPT09VEhSRUUuRnJvbnRGYWNlRGlyZWN0aW9uQ1cpO307Ly8gVGV4dHVyZXNcbmZ1bmN0aW9uIGFsbG9jVGV4dHVyZVVuaXQoKXt2YXIgdGV4dHVyZVVuaXQ9X3VzZWRUZXh0dXJlVW5pdHM7aWYodGV4dHVyZVVuaXQ+PWNhcGFiaWxpdGllcy5tYXhUZXh0dXJlcyl7Y29uc29sZS53YXJuKCdXZWJHTFJlbmRlcmVyOiB0cnlpbmcgdG8gdXNlICcrdGV4dHVyZVVuaXQrJyB0ZXh0dXJlIHVuaXRzIHdoaWxlIHRoaXMgR1BVIHN1cHBvcnRzIG9ubHkgJytjYXBhYmlsaXRpZXMubWF4VGV4dHVyZXMpO31fdXNlZFRleHR1cmVVbml0cys9MTtyZXR1cm4gdGV4dHVyZVVuaXQ7fWZ1bmN0aW9uIHNldFRleHR1cmVQYXJhbWV0ZXJzKHRleHR1cmVUeXBlLHRleHR1cmUsaXNQb3dlck9mVHdvSW1hZ2Upe3ZhciBleHRlbnNpb247aWYoaXNQb3dlck9mVHdvSW1hZ2Upe19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLF9nbC5URVhUVVJFX1dSQVBfUyxwYXJhbVRocmVlVG9HTCh0ZXh0dXJlLndyYXBTKSk7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfV1JBUF9ULHBhcmFtVGhyZWVUb0dMKHRleHR1cmUud3JhcFQpKTtfZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSxfZ2wuVEVYVFVSRV9NQUdfRklMVEVSLHBhcmFtVGhyZWVUb0dMKHRleHR1cmUubWFnRmlsdGVyKSk7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfTUlOX0ZJTFRFUixwYXJhbVRocmVlVG9HTCh0ZXh0dXJlLm1pbkZpbHRlcikpO31lbHNle19nbC50ZXhQYXJhbWV0ZXJpKHRleHR1cmVUeXBlLF9nbC5URVhUVVJFX1dSQVBfUyxfZ2wuQ0xBTVBfVE9fRURHRSk7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfV1JBUF9ULF9nbC5DTEFNUF9UT19FREdFKTtpZih0ZXh0dXJlLndyYXBTIT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZ3x8dGV4dHVyZS53cmFwVCE9PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBpcyBub3QgcG93ZXIgb2YgdHdvLiBUZXh0dXJlLndyYXBTIGFuZCBUZXh0dXJlLndyYXBUIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZy4nLHRleHR1cmUpO31fZ2wudGV4UGFyYW1ldGVyaSh0ZXh0dXJlVHlwZSxfZ2wuVEVYVFVSRV9NQUdfRklMVEVSLGZpbHRlckZhbGxiYWNrKHRleHR1cmUubWFnRmlsdGVyKSk7X2dsLnRleFBhcmFtZXRlcmkodGV4dHVyZVR5cGUsX2dsLlRFWFRVUkVfTUlOX0ZJTFRFUixmaWx0ZXJGYWxsYmFjayh0ZXh0dXJlLm1pbkZpbHRlcikpO2lmKHRleHR1cmUubWluRmlsdGVyIT09VEhSRUUuTmVhcmVzdEZpbHRlciYmdGV4dHVyZS5taW5GaWx0ZXIhPT1USFJFRS5MaW5lYXJGaWx0ZXIpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBpcyBub3QgcG93ZXIgb2YgdHdvLiBUZXh0dXJlLm1pbkZpbHRlciBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLk5lYXJlc3RGaWx0ZXIgb3IgVEhSRUUuTGluZWFyRmlsdGVyLicsdGV4dHVyZSk7fX1leHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO2lmKGV4dGVuc2lvbil7aWYodGV4dHVyZS50eXBlPT09VEhSRUUuRmxvYXRUeXBlJiZleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyJyk9PT1udWxsKXJldHVybjtpZih0ZXh0dXJlLnR5cGU9PT1USFJFRS5IYWxmRmxvYXRUeXBlJiZleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInKT09PW51bGwpcmV0dXJuO2lmKHRleHR1cmUuYW5pc290cm9weT4xfHxwcm9wZXJ0aWVzLmdldCh0ZXh0dXJlKS5fX2N1cnJlbnRBbmlzb3Ryb3B5KXtfZ2wudGV4UGFyYW1ldGVyZih0ZXh0dXJlVHlwZSxleHRlbnNpb24uVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsTWF0aC5taW4odGV4dHVyZS5hbmlzb3Ryb3B5LF90aGlzLmdldE1heEFuaXNvdHJvcHkoKSkpO3Byb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fY3VycmVudEFuaXNvdHJvcHk9dGV4dHVyZS5hbmlzb3Ryb3B5O319fWZ1bmN0aW9uIHVwbG9hZFRleHR1cmUodGV4dHVyZVByb3BlcnRpZXMsdGV4dHVyZSxzbG90KXtpZih0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsSW5pdD09PXVuZGVmaW5lZCl7dGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbEluaXQ9dHJ1ZTt0ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc3Bvc2UnLG9uVGV4dHVyZURpc3Bvc2UpO3RleHR1cmVQcm9wZXJ0aWVzLl9fd2ViZ2xUZXh0dXJlPV9nbC5jcmVhdGVUZXh0dXJlKCk7X2luZm9NZW1vcnkudGV4dHVyZXMrKzt9c3RhdGUuYWN0aXZlVGV4dHVyZShfZ2wuVEVYVFVSRTArc2xvdCk7c3RhdGUuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO19nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCx0ZXh0dXJlLmZsaXBZKTtfZ2wucGl4ZWxTdG9yZWkoX2dsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCx0ZXh0dXJlLnByZW11bHRpcGx5QWxwaGEpO19nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX0FMSUdOTUVOVCx0ZXh0dXJlLnVucGFja0FsaWdubWVudCk7dmFyIGltYWdlPWNsYW1wVG9NYXhTaXplKHRleHR1cmUuaW1hZ2UsY2FwYWJpbGl0aWVzLm1heFRleHR1cmVTaXplKTtpZih0ZXh0dXJlTmVlZHNQb3dlck9mVHdvKHRleHR1cmUpJiZpc1Bvd2VyT2ZUd28oaW1hZ2UpPT09ZmFsc2Upe2ltYWdlPW1ha2VQb3dlck9mVHdvKGltYWdlKTt9dmFyIGlzUG93ZXJPZlR3b0ltYWdlPWlzUG93ZXJPZlR3byhpbWFnZSksZ2xGb3JtYXQ9cGFyYW1UaHJlZVRvR0wodGV4dHVyZS5mb3JtYXQpLGdsVHlwZT1wYXJhbVRocmVlVG9HTCh0ZXh0dXJlLnR5cGUpO3NldFRleHR1cmVQYXJhbWV0ZXJzKF9nbC5URVhUVVJFXzJELHRleHR1cmUsaXNQb3dlck9mVHdvSW1hZ2UpO3ZhciBtaXBtYXAsbWlwbWFwcz10ZXh0dXJlLm1pcG1hcHM7aWYodGV4dHVyZSBpbnN0YW5jZW9mIFRIUkVFLkRlcHRoVGV4dHVyZSl7Ly8gcG9wdWxhdGUgZGVwdGggdGV4dHVyZSB3aXRoIGR1bW15IGRhdGFcbnZhciBpbnRlcm5hbEZvcm1hdD1fZ2wuREVQVEhfQ09NUE9ORU5UO2lmKHRleHR1cmUudHlwZT09PVRIUkVFLkZsb2F0VHlwZSl7aWYoIV9pc1dlYkdMMil0aHJvdyBuZXcgRXJyb3IoJ0Zsb2F0IERlcHRoIFRleHR1cmUgb25seSBzdXBwb3J0ZWQgaW4gV2ViR0wyLjAnKTtpbnRlcm5hbEZvcm1hdD1fZ2wuREVQVEhfQ09NUE9ORU5UMzJGO31lbHNlIGlmKF9pc1dlYkdMMil7Ly8gV2ViR0wgMi4wIHJlcXVpcmVzIHNpZ25lZCBpbnRlcm5hbGZvcm1hdCBmb3IgZ2xUZXhJbWFnZTJEXG5pbnRlcm5hbEZvcm1hdD1fZ2wuREVQVEhfQ09NUE9ORU5UMTY7fXN0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsMCxpbnRlcm5hbEZvcm1hdCxpbWFnZS53aWR0aCxpbWFnZS5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsbnVsbCk7fWVsc2UgaWYodGV4dHVyZSBpbnN0YW5jZW9mIFRIUkVFLkRhdGFUZXh0dXJlKXsvLyB1c2UgbWFudWFsbHkgY3JlYXRlZCBtaXBtYXBzIGlmIGF2YWlsYWJsZVxuLy8gaWYgdGhlcmUgYXJlIG5vIG1hbnVhbCBtaXBtYXBzXG4vLyBzZXQgMCBsZXZlbCBtaXBtYXAgYW5kIHRoZW4gdXNlIEdMIHRvIGdlbmVyYXRlIG90aGVyIG1pcG1hcCBsZXZlbHNcbmlmKG1pcG1hcHMubGVuZ3RoPjAmJmlzUG93ZXJPZlR3b0ltYWdlKXtmb3IodmFyIGk9MCxpbD1taXBtYXBzLmxlbmd0aDtpPGlsO2krKyl7bWlwbWFwPW1pcG1hcHNbaV07c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCxpLGdsRm9ybWF0LG1pcG1hcC53aWR0aCxtaXBtYXAuaGVpZ2h0LDAsZ2xGb3JtYXQsZ2xUeXBlLG1pcG1hcC5kYXRhKTt9dGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ZmFsc2U7fWVsc2V7c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCwwLGdsRm9ybWF0LGltYWdlLndpZHRoLGltYWdlLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxpbWFnZS5kYXRhKTt9fWVsc2UgaWYodGV4dHVyZSBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlKXtmb3IodmFyIGk9MCxpbD1taXBtYXBzLmxlbmd0aDtpPGlsO2krKyl7bWlwbWFwPW1pcG1hcHNbaV07aWYodGV4dHVyZS5mb3JtYXQhPT1USFJFRS5SR0JBRm9ybWF0JiZ0ZXh0dXJlLmZvcm1hdCE9PVRIUkVFLlJHQkZvcm1hdCl7aWYoc3RhdGUuZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzKCkuaW5kZXhPZihnbEZvcm1hdCk+LTEpe3N0YXRlLmNvbXByZXNzZWRUZXhJbWFnZTJEKF9nbC5URVhUVVJFXzJELGksZ2xGb3JtYXQsbWlwbWFwLndpZHRoLG1pcG1hcC5oZWlnaHQsMCxtaXBtYXAuZGF0YSk7fWVsc2V7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnVwbG9hZFRleHR1cmUoKVwiKTt9fWVsc2V7c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCxpLGdsRm9ybWF0LG1pcG1hcC53aWR0aCxtaXBtYXAuaGVpZ2h0LDAsZ2xGb3JtYXQsZ2xUeXBlLG1pcG1hcC5kYXRhKTt9fX1lbHNley8vIHJlZ3VsYXIgVGV4dHVyZSAoaW1hZ2UsIHZpZGVvLCBjYW52YXMpXG4vLyB1c2UgbWFudWFsbHkgY3JlYXRlZCBtaXBtYXBzIGlmIGF2YWlsYWJsZVxuLy8gaWYgdGhlcmUgYXJlIG5vIG1hbnVhbCBtaXBtYXBzXG4vLyBzZXQgMCBsZXZlbCBtaXBtYXAgYW5kIHRoZW4gdXNlIEdMIHRvIGdlbmVyYXRlIG90aGVyIG1pcG1hcCBsZXZlbHNcbmlmKG1pcG1hcHMubGVuZ3RoPjAmJmlzUG93ZXJPZlR3b0ltYWdlKXtmb3IodmFyIGk9MCxpbD1taXBtYXBzLmxlbmd0aDtpPGlsO2krKyl7bWlwbWFwPW1pcG1hcHNbaV07c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCxpLGdsRm9ybWF0LGdsRm9ybWF0LGdsVHlwZSxtaXBtYXApO310ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1mYWxzZTt9ZWxzZXtzdGF0ZS50ZXhJbWFnZTJEKF9nbC5URVhUVVJFXzJELDAsZ2xGb3JtYXQsZ2xGb3JtYXQsZ2xUeXBlLGltYWdlKTt9fWlmKHRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzJiZpc1Bvd2VyT2ZUd29JbWFnZSlfZ2wuZ2VuZXJhdGVNaXBtYXAoX2dsLlRFWFRVUkVfMkQpO3RleHR1cmVQcm9wZXJ0aWVzLl9fdmVyc2lvbj10ZXh0dXJlLnZlcnNpb247aWYodGV4dHVyZS5vblVwZGF0ZSl0ZXh0dXJlLm9uVXBkYXRlKHRleHR1cmUpO31mdW5jdGlvbiBzZXRUZXh0dXJlMkQodGV4dHVyZSxzbG90KXt2YXIgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQodGV4dHVyZSk7aWYodGV4dHVyZS52ZXJzaW9uPjAmJnRleHR1cmVQcm9wZXJ0aWVzLl9fdmVyc2lvbiE9PXRleHR1cmUudmVyc2lvbil7dmFyIGltYWdlPXRleHR1cmUuaW1hZ2U7aWYoaW1hZ2U9PT11bmRlZmluZWQpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgdW5kZWZpbmVkJyx0ZXh0dXJlKTtyZXR1cm47fWlmKGltYWdlLmNvbXBsZXRlPT09ZmFsc2Upe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgaW5jb21wbGV0ZScsdGV4dHVyZSk7cmV0dXJuO311cGxvYWRUZXh0dXJlKHRleHR1cmVQcm9wZXJ0aWVzLHRleHR1cmUsc2xvdCk7cmV0dXJuO31zdGF0ZS5hY3RpdmVUZXh0dXJlKF9nbC5URVhUVVJFMCtzbG90KTtzdGF0ZS5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV8yRCx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7fWZ1bmN0aW9uIGNsYW1wVG9NYXhTaXplKGltYWdlLG1heFNpemUpe2lmKGltYWdlLndpZHRoPm1heFNpemV8fGltYWdlLmhlaWdodD5tYXhTaXplKXsvLyBXYXJuaW5nOiBTY2FsaW5nIHRocm91Z2ggdGhlIGNhbnZhcyB3aWxsIG9ubHkgd29yayB3aXRoIGltYWdlcyB0aGF0IHVzZVxuLy8gcHJlbXVsdGlwbGllZCBhbHBoYS5cbnZhciBzY2FsZT1tYXhTaXplL01hdGgubWF4KGltYWdlLndpZHRoLGltYWdlLmhlaWdodCk7dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtjYW52YXMud2lkdGg9TWF0aC5mbG9vcihpbWFnZS53aWR0aCpzY2FsZSk7Y2FudmFzLmhlaWdodD1NYXRoLmZsb29yKGltYWdlLmhlaWdodCpzY2FsZSk7dmFyIGNvbnRleHQ9Y2FudmFzLmdldENvbnRleHQoJzJkJyk7Y29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsMCwwLGltYWdlLndpZHRoLGltYWdlLmhlaWdodCwwLDAsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgdG9vIGJpZyAoJytpbWFnZS53aWR0aCsneCcraW1hZ2UuaGVpZ2h0KycpLiBSZXNpemVkIHRvICcrY2FudmFzLndpZHRoKyd4JytjYW52YXMuaGVpZ2h0LGltYWdlKTtyZXR1cm4gY2FudmFzO31yZXR1cm4gaW1hZ2U7fWZ1bmN0aW9uIGlzUG93ZXJPZlR3byhpbWFnZSl7cmV0dXJuIFRIUkVFLk1hdGguaXNQb3dlck9mVHdvKGltYWdlLndpZHRoKSYmVEhSRUUuTWF0aC5pc1Bvd2VyT2ZUd28oaW1hZ2UuaGVpZ2h0KTt9ZnVuY3Rpb24gdGV4dHVyZU5lZWRzUG93ZXJPZlR3byh0ZXh0dXJlKXtpZih0ZXh0dXJlLndyYXBTIT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZ3x8dGV4dHVyZS53cmFwVCE9PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcpcmV0dXJuIHRydWU7aWYodGV4dHVyZS5taW5GaWx0ZXIhPT1USFJFRS5OZWFyZXN0RmlsdGVyJiZ0ZXh0dXJlLm1pbkZpbHRlciE9PVRIUkVFLkxpbmVhckZpbHRlcilyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIG1ha2VQb3dlck9mVHdvKGltYWdlKXtpZihpbWFnZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnR8fGltYWdlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpe3ZhciBjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7Y2FudmFzLndpZHRoPVRIUkVFLk1hdGgubmVhcmVzdFBvd2VyT2ZUd28oaW1hZ2Uud2lkdGgpO2NhbnZhcy5oZWlnaHQ9VEhSRUUuTWF0aC5uZWFyZXN0UG93ZXJPZlR3byhpbWFnZS5oZWlnaHQpO3ZhciBjb250ZXh0PWNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO2NvbnRleHQuZHJhd0ltYWdlKGltYWdlLDAsMCxjYW52YXMud2lkdGgsY2FudmFzLmhlaWdodCk7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyBub3QgcG93ZXIgb2YgdHdvICgnK2ltYWdlLndpZHRoKyd4JytpbWFnZS5oZWlnaHQrJykuIFJlc2l6ZWQgdG8gJytjYW52YXMud2lkdGgrJ3gnK2NhbnZhcy5oZWlnaHQsaW1hZ2UpO3JldHVybiBjYW52YXM7fXJldHVybiBpbWFnZTt9ZnVuY3Rpb24gc2V0VGV4dHVyZUN1YmUodGV4dHVyZSxzbG90KXt2YXIgdGV4dHVyZVByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQodGV4dHVyZSk7aWYodGV4dHVyZS5pbWFnZS5sZW5ndGg9PT02KXtpZih0ZXh0dXJlLnZlcnNpb24+MCYmdGV4dHVyZVByb3BlcnRpZXMuX192ZXJzaW9uIT09dGV4dHVyZS52ZXJzaW9uKXtpZighdGV4dHVyZVByb3BlcnRpZXMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSl7dGV4dHVyZS5hZGRFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvblRleHR1cmVEaXNwb3NlKTt0ZXh0dXJlUHJvcGVydGllcy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlPV9nbC5jcmVhdGVUZXh0dXJlKCk7X2luZm9NZW1vcnkudGV4dHVyZXMrKzt9c3RhdGUuYWN0aXZlVGV4dHVyZShfZ2wuVEVYVFVSRTArc2xvdCk7c3RhdGUuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsdGV4dHVyZVByb3BlcnRpZXMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSk7X2dsLnBpeGVsU3RvcmVpKF9nbC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLHRleHR1cmUuZmxpcFkpO3ZhciBpc0NvbXByZXNzZWQ9dGV4dHVyZSBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO3ZhciBpc0RhdGFUZXh0dXJlPXRleHR1cmUuaW1hZ2VbMF1pbnN0YW5jZW9mIFRIUkVFLkRhdGFUZXh0dXJlO3ZhciBjdWJlSW1hZ2U9W107Zm9yKHZhciBpPTA7aTw2O2krKyl7aWYoX3RoaXMuYXV0b1NjYWxlQ3ViZW1hcHMmJiFpc0NvbXByZXNzZWQmJiFpc0RhdGFUZXh0dXJlKXtjdWJlSW1hZ2VbaV09Y2xhbXBUb01heFNpemUodGV4dHVyZS5pbWFnZVtpXSxjYXBhYmlsaXRpZXMubWF4Q3ViZW1hcFNpemUpO31lbHNle2N1YmVJbWFnZVtpXT1pc0RhdGFUZXh0dXJlP3RleHR1cmUuaW1hZ2VbaV0uaW1hZ2U6dGV4dHVyZS5pbWFnZVtpXTt9fXZhciBpbWFnZT1jdWJlSW1hZ2VbMF0saXNQb3dlck9mVHdvSW1hZ2U9aXNQb3dlck9mVHdvKGltYWdlKSxnbEZvcm1hdD1wYXJhbVRocmVlVG9HTCh0ZXh0dXJlLmZvcm1hdCksZ2xUeXBlPXBhcmFtVGhyZWVUb0dMKHRleHR1cmUudHlwZSk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsdGV4dHVyZSxpc1Bvd2VyT2ZUd29JbWFnZSk7Zm9yKHZhciBpPTA7aTw2O2krKyl7aWYoIWlzQ29tcHJlc3NlZCl7aWYoaXNEYXRhVGV4dHVyZSl7c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2ksMCxnbEZvcm1hdCxjdWJlSW1hZ2VbaV0ud2lkdGgsY3ViZUltYWdlW2ldLmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxjdWJlSW1hZ2VbaV0uZGF0YSk7fWVsc2V7c3RhdGUudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2ksMCxnbEZvcm1hdCxnbEZvcm1hdCxnbFR5cGUsY3ViZUltYWdlW2ldKTt9fWVsc2V7dmFyIG1pcG1hcCxtaXBtYXBzPWN1YmVJbWFnZVtpXS5taXBtYXBzO2Zvcih2YXIgaj0wLGpsPW1pcG1hcHMubGVuZ3RoO2o8amw7aisrKXttaXBtYXA9bWlwbWFwc1tqXTtpZih0ZXh0dXJlLmZvcm1hdCE9PVRIUkVFLlJHQkFGb3JtYXQmJnRleHR1cmUuZm9ybWF0IT09VEhSRUUuUkdCRm9ybWF0KXtpZihzdGF0ZS5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKGdsRm9ybWF0KT4tMSl7c3RhdGUuY29tcHJlc3NlZFRleEltYWdlMkQoX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtpLGosZ2xGb3JtYXQsbWlwbWFwLndpZHRoLG1pcG1hcC5oZWlnaHQsMCxtaXBtYXAuZGF0YSk7fWVsc2V7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnNldFRleHR1cmVDdWJlKClcIik7fX1lbHNle3N0YXRlLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtpLGosZ2xGb3JtYXQsbWlwbWFwLndpZHRoLG1pcG1hcC5oZWlnaHQsMCxnbEZvcm1hdCxnbFR5cGUsbWlwbWFwLmRhdGEpO319fX1pZih0ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyYmaXNQb3dlck9mVHdvSW1hZ2Upe19nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV9DVUJFX01BUCk7fXRleHR1cmVQcm9wZXJ0aWVzLl9fdmVyc2lvbj10ZXh0dXJlLnZlcnNpb247aWYodGV4dHVyZS5vblVwZGF0ZSl0ZXh0dXJlLm9uVXBkYXRlKHRleHR1cmUpO31lbHNle3N0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHRleHR1cmVQcm9wZXJ0aWVzLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO319fWZ1bmN0aW9uIHNldFRleHR1cmVDdWJlRHluYW1pYyh0ZXh0dXJlLHNsb3Qpe3N0YXRlLmFjdGl2ZVRleHR1cmUoX2dsLlRFWFRVUkUwK3Nsb3QpO3N0YXRlLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLHByb3BlcnRpZXMuZ2V0KHRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlKTt9dGhpcy5hbGxvY1RleHR1cmVVbml0PWFsbG9jVGV4dHVyZVVuaXQ7Ly90aGlzLnNldFRleHR1cmUyRCA9IHNldFRleHR1cmUyRDtcbnRoaXMuc2V0VGV4dHVyZTJEPWZ1bmN0aW9uKCl7dmFyIHdhcm5lZD1mYWxzZTsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogcGVlbCB0ZXh0dXJlLnRleHR1cmVcbnJldHVybiBmdW5jdGlvbih0ZXh0dXJlLHNsb3Qpe2lmKHRleHR1cmUgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCl7aWYoIXdhcm5lZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlMkQ6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpO3dhcm5lZD10cnVlO310ZXh0dXJlPXRleHR1cmUudGV4dHVyZTt9c2V0VGV4dHVyZTJEKHRleHR1cmUsc2xvdCk7fTt9KCk7dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIHdhcm5lZD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24odGV4dHVyZSxzbG90KXtpZighd2FybmVkKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZSBpcyBkZXByZWNhdGVkLCB1c2Ugc2V0VGV4dHVyZTJEIGluc3RlYWQuXCIpO3dhcm5lZD10cnVlO31fdGhpcy5zZXRUZXh0dXJlMkQodGV4dHVyZSxzbG90KTt9O30oKTt0aGlzLnNldFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7dmFyIHdhcm5lZD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24odGV4dHVyZSxzbG90KXsvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogcGVlbCB0ZXh0dXJlLnRleHR1cmVcbmlmKHRleHR1cmUgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUpe2lmKCF3YXJuZWQpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZUN1YmU6IGRvbid0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIik7d2FybmVkPXRydWU7fXRleHR1cmU9dGV4dHVyZS50ZXh0dXJlO30vLyBjdXJyZW50bHkgcmVseWluZyBvbiB0aGUgZmFjdCB0aGF0IFdlYkdMUmVuZGVyVGFyZ2V0Q3ViZS50ZXh0dXJlIGlzIGEgVGV4dHVyZSBhbmQgTk9UIGEgQ3ViZVRleHR1cmVcbi8vIFRPRE86IHVuaWZ5IHRoZXNlIGNvZGUgcGF0aHNcbmlmKHRleHR1cmUgaW5zdGFuY2VvZiBUSFJFRS5DdWJlVGV4dHVyZXx8QXJyYXkuaXNBcnJheSh0ZXh0dXJlLmltYWdlKSYmdGV4dHVyZS5pbWFnZS5sZW5ndGg9PT02KXsvLyBDb21wcmVzc2VkVGV4dHVyZSBjYW4gaGF2ZSBBcnJheSBpbiBpbWFnZSA6L1xuLy8gdGhpcyBmdW5jdGlvbiBhbG9uZSBzaG91bGQgdGFrZSBjYXJlIG9mIGN1YmUgdGV4dHVyZXNcbnNldFRleHR1cmVDdWJlKHRleHR1cmUsc2xvdCk7fWVsc2V7Ly8gYXNzdW1lZDogdGV4dHVyZSBwcm9wZXJ0eSBvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmVcbnNldFRleHR1cmVDdWJlRHluYW1pYyh0ZXh0dXJlLHNsb3QpO319O30oKTsvLyBSZW5kZXIgdGFyZ2V0c1xuLy8gU2V0dXAgc3RvcmFnZSBmb3IgdGFyZ2V0IHRleHR1cmUgYW5kIGJpbmQgaXQgdG8gY29ycmVjdCBmcmFtZWJ1ZmZlclxuZnVuY3Rpb24gc2V0dXBGcmFtZUJ1ZmZlclRleHR1cmUoZnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0LGF0dGFjaG1lbnQsdGV4dHVyZVRhcmdldCl7dmFyIGdsRm9ybWF0PXBhcmFtVGhyZWVUb0dMKHJlbmRlclRhcmdldC50ZXh0dXJlLmZvcm1hdCk7dmFyIGdsVHlwZT1wYXJhbVRocmVlVG9HTChyZW5kZXJUYXJnZXQudGV4dHVyZS50eXBlKTtzdGF0ZS50ZXhJbWFnZTJEKHRleHR1cmVUYXJnZXQsMCxnbEZvcm1hdCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCwwLGdsRm9ybWF0LGdsVHlwZSxudWxsKTtfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixmcmFtZWJ1ZmZlcik7X2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKF9nbC5GUkFNRUJVRkZFUixhdHRhY2htZW50LHRleHR1cmVUYXJnZXQscHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LnRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlLDApO19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLG51bGwpO30vLyBTZXR1cCBzdG9yYWdlIGZvciBpbnRlcm5hbCBkZXB0aC9zdGVuY2lsIGJ1ZmZlcnMgYW5kIGJpbmQgdG8gY29ycmVjdCBmcmFtZWJ1ZmZlclxuZnVuY3Rpb24gc2V0dXBSZW5kZXJCdWZmZXJTdG9yYWdlKHJlbmRlcmJ1ZmZlcixyZW5kZXJUYXJnZXQpe19nbC5iaW5kUmVuZGVyYnVmZmVyKF9nbC5SRU5ERVJCVUZGRVIscmVuZGVyYnVmZmVyKTtpZihyZW5kZXJUYXJnZXQuZGVwdGhCdWZmZXImJiFyZW5kZXJUYXJnZXQuc3RlbmNpbEJ1ZmZlcil7X2dsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoX2dsLlJFTkRFUkJVRkZFUixfZ2wuREVQVEhfQ09NUE9ORU5UMTYscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO19nbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsX2dsLkRFUFRIX0FUVEFDSE1FTlQsX2dsLlJFTkRFUkJVRkZFUixyZW5kZXJidWZmZXIpO31lbHNlIGlmKHJlbmRlclRhcmdldC5kZXB0aEJ1ZmZlciYmcmVuZGVyVGFyZ2V0LnN0ZW5jaWxCdWZmZXIpe19nbC5yZW5kZXJidWZmZXJTdG9yYWdlKF9nbC5SRU5ERVJCVUZGRVIsX2dsLkRFUFRIX1NURU5DSUwscmVuZGVyVGFyZ2V0LndpZHRoLHJlbmRlclRhcmdldC5oZWlnaHQpO19nbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsX2dsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxfZ2wuUkVOREVSQlVGRkVSLHJlbmRlcmJ1ZmZlcik7fWVsc2V7Ly8gRklYTUU6IFdlIGRvbid0IHN1cHBvcnQgIWRlcHRoICFzdGVuY2lsXG5fZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShfZ2wuUkVOREVSQlVGRkVSLF9nbC5SR0JBNCxyZW5kZXJUYXJnZXQud2lkdGgscmVuZGVyVGFyZ2V0LmhlaWdodCk7fV9nbC5iaW5kUmVuZGVyYnVmZmVyKF9nbC5SRU5ERVJCVUZGRVIsbnVsbCk7fS8vIFNldHVwIHJlc291cmNlcyBmb3IgYSBEZXB0aCBUZXh0dXJlIGZvciBhIEZCTyAobmVlZHMgYW4gZXh0ZW5zaW9uKVxuZnVuY3Rpb24gc2V0dXBEZXB0aFRleHR1cmUoZnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0KXt2YXIgaXNDdWJlPXJlbmRlclRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZihpc0N1YmUpdGhyb3cgbmV3IEVycm9yKCdEZXB0aCBUZXh0dXJlIHdpdGggY3ViZSByZW5kZXIgdGFyZ2V0cyBpcyBub3Qgc3VwcG9ydGVkIScpO19nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLGZyYW1lYnVmZmVyKTtpZighKHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgaW5zdGFuY2VvZiBUSFJFRS5EZXB0aFRleHR1cmUpKXt0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmUnKTt9Ly8gdXBsb2FkIGFuIGVtcHR5IGRlcHRoIHRleHR1cmUgd2l0aCBmcmFtZWJ1ZmZlciBzaXplXG5pZighcHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmV8fHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGghPT1yZW5kZXJUYXJnZXQud2lkdGh8fHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0IT09cmVuZGVyVGFyZ2V0LmhlaWdodCl7cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD1yZW5kZXJUYXJnZXQud2lkdGg7cmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9cmVuZGVyVGFyZ2V0LmhlaWdodDtyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7fV90aGlzLnNldFRleHR1cmUyRChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLDApO3ZhciB3ZWJnbERlcHRoVGV4dHVyZT1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZTtfZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoX2dsLkZSQU1FQlVGRkVSLF9nbC5ERVBUSF9BVFRBQ0hNRU5ULF9nbC5URVhUVVJFXzJELHdlYmdsRGVwdGhUZXh0dXJlLDApO30vLyBTZXR1cCBHTCByZXNvdXJjZXMgZm9yIGEgbm9uLXRleHR1cmUgZGVwdGggYnVmZmVyXG5mdW5jdGlvbiBzZXR1cERlcHRoUmVuZGVyYnVmZmVyKHJlbmRlclRhcmdldCl7dmFyIHJlbmRlclRhcmdldFByb3BlcnRpZXM9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KTt2YXIgaXNDdWJlPXJlbmRlclRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZihyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlKXtpZihpc0N1YmUpdGhyb3cgbmV3IEVycm9yKCd0YXJnZXQuZGVwdGhUZXh0dXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ3ViZSByZW5kZXIgdGFyZ2V0cycpO3NldHVwRGVwdGhUZXh0dXJlKHJlbmRlclRhcmdldFByb3BlcnRpZXMuX193ZWJnbEZyYW1lYnVmZmVyLHJlbmRlclRhcmdldCk7fWVsc2V7aWYoaXNDdWJlKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1bXTtmb3IodmFyIGk9MDtpPDY7aSsrKXtfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcltpXSk7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXJbaV09X2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO3NldHVwUmVuZGVyQnVmZmVyU3RvcmFnZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcltpXSxyZW5kZXJUYXJnZXQpO319ZWxzZXtfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUixyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcik7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRGVwdGhidWZmZXI9X2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO3NldHVwUmVuZGVyQnVmZmVyU3RvcmFnZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xEZXB0aGJ1ZmZlcixyZW5kZXJUYXJnZXQpO319X2dsLmJpbmRGcmFtZWJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsbnVsbCk7fS8vIFNldCB1cCBHTCByZXNvdXJjZXMgZm9yIHRoZSByZW5kZXIgdGFyZ2V0XG5mdW5jdGlvbiBzZXR1cFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpe3ZhciByZW5kZXJUYXJnZXRQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCk7dmFyIHRleHR1cmVQcm9wZXJ0aWVzPXByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldC50ZXh0dXJlKTtyZW5kZXJUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25SZW5kZXJUYXJnZXREaXNwb3NlKTt0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZT1fZ2wuY3JlYXRlVGV4dHVyZSgpO19pbmZvTWVtb3J5LnRleHR1cmVzKys7dmFyIGlzQ3ViZT1yZW5kZXJUYXJnZXQgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU7dmFyIGlzVGFyZ2V0UG93ZXJPZlR3bz1USFJFRS5NYXRoLmlzUG93ZXJPZlR3byhyZW5kZXJUYXJnZXQud2lkdGgpJiZUSFJFRS5NYXRoLmlzUG93ZXJPZlR3byhyZW5kZXJUYXJnZXQuaGVpZ2h0KTsvLyBTZXR1cCBmcmFtZWJ1ZmZlclxuaWYoaXNDdWJlKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTtmb3IodmFyIGk9MDtpPDY7aSsrKXtyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcltpXT1fZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTt9fWVsc2V7cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXI9X2dsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7fS8vIFNldHVwIGNvbG9yIGJ1ZmZlclxuaWYoaXNDdWJlKXtzdGF0ZS5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV9DVUJFX01BUCx0ZXh0dXJlUHJvcGVydGllcy5fX3dlYmdsVGV4dHVyZSk7c2V0VGV4dHVyZVBhcmFtZXRlcnMoX2dsLlRFWFRVUkVfQ1VCRV9NQVAscmVuZGVyVGFyZ2V0LnRleHR1cmUsaXNUYXJnZXRQb3dlck9mVHdvKTtmb3IodmFyIGk9MDtpPDY7aSsrKXtzZXR1cEZyYW1lQnVmZmVyVGV4dHVyZShyZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcltpXSxyZW5kZXJUYXJnZXQsX2dsLkNPTE9SX0FUVEFDSE1FTlQwLF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1graSk7fWlmKHJlbmRlclRhcmdldC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyYmaXNUYXJnZXRQb3dlck9mVHdvKV9nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV9DVUJFX01BUCk7c3RhdGUuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsbnVsbCk7fWVsc2V7c3RhdGUuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUpO3NldFRleHR1cmVQYXJhbWV0ZXJzKF9nbC5URVhUVVJFXzJELHJlbmRlclRhcmdldC50ZXh0dXJlLGlzVGFyZ2V0UG93ZXJPZlR3byk7c2V0dXBGcmFtZUJ1ZmZlclRleHR1cmUocmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXIscmVuZGVyVGFyZ2V0LF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCxfZ2wuVEVYVFVSRV8yRCk7aWYocmVuZGVyVGFyZ2V0LnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzJiZpc1RhcmdldFBvd2VyT2ZUd28pX2dsLmdlbmVyYXRlTWlwbWFwKF9nbC5URVhUVVJFXzJEKTtzdGF0ZS5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV8yRCxudWxsKTt9Ly8gU2V0dXAgZGVwdGggYW5kIHN0ZW5jaWwgYnVmZmVyc1xuaWYocmVuZGVyVGFyZ2V0LmRlcHRoQnVmZmVyKXtzZXR1cERlcHRoUmVuZGVyYnVmZmVyKHJlbmRlclRhcmdldCk7fX10aGlzLmdldEN1cnJlbnRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gX2N1cnJlbnRSZW5kZXJUYXJnZXQ7fTt0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihyZW5kZXJUYXJnZXQpe19jdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlclRhcmdldDtpZihyZW5kZXJUYXJnZXQmJnByb3BlcnRpZXMuZ2V0KHJlbmRlclRhcmdldCkuX193ZWJnbEZyYW1lYnVmZmVyPT09dW5kZWZpbmVkKXtzZXR1cFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO312YXIgaXNDdWJlPXJlbmRlclRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTt2YXIgZnJhbWVidWZmZXI7aWYocmVuZGVyVGFyZ2V0KXt2YXIgcmVuZGVyVGFyZ2V0UHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQpO2lmKGlzQ3ViZSl7ZnJhbWVidWZmZXI9cmVuZGVyVGFyZ2V0UHJvcGVydGllcy5fX3dlYmdsRnJhbWVidWZmZXJbcmVuZGVyVGFyZ2V0LmFjdGl2ZUN1YmVGYWNlXTt9ZWxzZXtmcmFtZWJ1ZmZlcj1yZW5kZXJUYXJnZXRQcm9wZXJ0aWVzLl9fd2ViZ2xGcmFtZWJ1ZmZlcjt9X2N1cnJlbnRTY2lzc29yLmNvcHkocmVuZGVyVGFyZ2V0LnNjaXNzb3IpO19jdXJyZW50U2Npc3NvclRlc3Q9cmVuZGVyVGFyZ2V0LnNjaXNzb3JUZXN0O19jdXJyZW50Vmlld3BvcnQuY29weShyZW5kZXJUYXJnZXQudmlld3BvcnQpO31lbHNle2ZyYW1lYnVmZmVyPW51bGw7X2N1cnJlbnRTY2lzc29yLmNvcHkoX3NjaXNzb3IpLm11bHRpcGx5U2NhbGFyKF9waXhlbFJhdGlvKTtfY3VycmVudFNjaXNzb3JUZXN0PV9zY2lzc29yVGVzdDtfY3VycmVudFZpZXdwb3J0LmNvcHkoX3ZpZXdwb3J0KS5tdWx0aXBseVNjYWxhcihfcGl4ZWxSYXRpbyk7fWlmKF9jdXJyZW50RnJhbWVidWZmZXIhPT1mcmFtZWJ1ZmZlcil7X2dsLmJpbmRGcmFtZWJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsZnJhbWVidWZmZXIpO19jdXJyZW50RnJhbWVidWZmZXI9ZnJhbWVidWZmZXI7fXN0YXRlLnNjaXNzb3IoX2N1cnJlbnRTY2lzc29yKTtzdGF0ZS5zZXRTY2lzc29yVGVzdChfY3VycmVudFNjaXNzb3JUZXN0KTtzdGF0ZS52aWV3cG9ydChfY3VycmVudFZpZXdwb3J0KTtpZihpc0N1YmUpe3ZhciB0ZXh0dXJlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQudGV4dHVyZSk7X2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKF9nbC5GUkFNRUJVRkZFUixfZ2wuQ09MT1JfQVRUQUNITUVOVDAsX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtyZW5kZXJUYXJnZXQuYWN0aXZlQ3ViZUZhY2UsdGV4dHVyZVByb3BlcnRpZXMuX193ZWJnbFRleHR1cmUscmVuZGVyVGFyZ2V0LmFjdGl2ZU1pcE1hcExldmVsKTt9fTt0aGlzLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM9ZnVuY3Rpb24ocmVuZGVyVGFyZ2V0LHgseSx3aWR0aCxoZWlnaHQsYnVmZmVyKXtpZihyZW5kZXJUYXJnZXQgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldD09PWZhbHNlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuJyk7cmV0dXJuO312YXIgZnJhbWVidWZmZXI9cHJvcGVydGllcy5nZXQocmVuZGVyVGFyZ2V0KS5fX3dlYmdsRnJhbWVidWZmZXI7aWYoZnJhbWVidWZmZXIpe3ZhciByZXN0b3JlPWZhbHNlO2lmKGZyYW1lYnVmZmVyIT09X2N1cnJlbnRGcmFtZWJ1ZmZlcil7X2dsLmJpbmRGcmFtZWJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsZnJhbWVidWZmZXIpO3Jlc3RvcmU9dHJ1ZTt9dHJ5e3ZhciB0ZXh0dXJlPXJlbmRlclRhcmdldC50ZXh0dXJlO2lmKHRleHR1cmUuZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdCYmcGFyYW1UaHJlZVRvR0wodGV4dHVyZS5mb3JtYXQpIT09X2dsLmdldFBhcmFtZXRlcihfZ2wuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC4nKTtyZXR1cm47fWlmKHRleHR1cmUudHlwZSE9PVRIUkVFLlVuc2lnbmVkQnl0ZVR5cGUmJnBhcmFtVGhyZWVUb0dMKHRleHR1cmUudHlwZSkhPT1fZ2wuZ2V0UGFyYW1ldGVyKF9nbC5JTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEUpJiYhKHRleHR1cmUudHlwZT09PVRIUkVFLkZsb2F0VHlwZSYmZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdCcpKSYmISh0ZXh0dXJlLnR5cGU9PT1USFJFRS5IYWxmRmxvYXRUeXBlJiZleHRlbnNpb25zLmdldCgnRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0JykpKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gVW5zaWduZWRCeXRlVHlwZSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIHR5cGUuJyk7cmV0dXJuO31pZihfZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhfZ2wuRlJBTUVCVUZGRVIpPT09X2dsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKXsvLyB0aGUgZm9sbG93aW5nIGlmIHN0YXRlbWVudCBlbnN1cmVzIHZhbGlkIHJlYWQgcmVxdWVzdHMgKG5vIG91dC1vZi1ib3VuZHMgcGl4ZWxzLCBzZWUgIzg2MDQpXG5pZih4Pj0wJiZ4PD1yZW5kZXJUYXJnZXQud2lkdGgtd2lkdGgmJnk+PTAmJnk8PXJlbmRlclRhcmdldC5oZWlnaHQtaGVpZ2h0KXtfZ2wucmVhZFBpeGVscyh4LHksd2lkdGgsaGVpZ2h0LHBhcmFtVGhyZWVUb0dMKHRleHR1cmUuZm9ybWF0KSxwYXJhbVRocmVlVG9HTCh0ZXh0dXJlLnR5cGUpLGJ1ZmZlcik7fX1lbHNle2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVhZFBpeGVscyBmcm9tIHJlbmRlclRhcmdldCBmYWlsZWQuIEZyYW1lYnVmZmVyIG5vdCBjb21wbGV0ZS4nKTt9fWZpbmFsbHl7aWYocmVzdG9yZSl7X2dsLmJpbmRGcmFtZWJ1ZmZlcihfZ2wuRlJBTUVCVUZGRVIsX2N1cnJlbnRGcmFtZWJ1ZmZlcik7fX19fTtmdW5jdGlvbiB1cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAocmVuZGVyVGFyZ2V0KXt2YXIgdGFyZ2V0PXJlbmRlclRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9fZ2wuVEVYVFVSRV9DVUJFX01BUDpfZ2wuVEVYVFVSRV8yRDt2YXIgdGV4dHVyZT1wcm9wZXJ0aWVzLmdldChyZW5kZXJUYXJnZXQudGV4dHVyZSkuX193ZWJnbFRleHR1cmU7c3RhdGUuYmluZFRleHR1cmUodGFyZ2V0LHRleHR1cmUpO19nbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpO3N0YXRlLmJpbmRUZXh0dXJlKHRhcmdldCxudWxsKTt9Ly8gRmFsbGJhY2sgZmlsdGVycyBmb3Igbm9uLXBvd2VyLW9mLTIgdGV4dHVyZXNcbmZ1bmN0aW9uIGZpbHRlckZhbGxiYWNrKGYpe2lmKGY9PT1USFJFRS5OZWFyZXN0RmlsdGVyfHxmPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXJ8fGY9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyKXtyZXR1cm4gX2dsLk5FQVJFU1Q7fXJldHVybiBfZ2wuTElORUFSO30vLyBNYXAgdGhyZWUuanMgY29uc3RhbnRzIHRvIFdlYkdMIGNvbnN0YW50c1xuZnVuY3Rpb24gcGFyYW1UaHJlZVRvR0wocCl7dmFyIGV4dGVuc2lvbjtpZihwPT09VEhSRUUuUmVwZWF0V3JhcHBpbmcpcmV0dXJuIF9nbC5SRVBFQVQ7aWYocD09PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcpcmV0dXJuIF9nbC5DTEFNUF9UT19FREdFO2lmKHA9PT1USFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nKXJldHVybiBfZ2wuTUlSUk9SRURfUkVQRUFUO2lmKHA9PT1USFJFRS5OZWFyZXN0RmlsdGVyKXJldHVybiBfZ2wuTkVBUkVTVDtpZihwPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIF9nbC5ORUFSRVNUX01JUE1BUF9ORUFSRVNUO2lmKHA9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyKXJldHVybiBfZ2wuTkVBUkVTVF9NSVBNQVBfTElORUFSO2lmKHA9PT1USFJFRS5MaW5lYXJGaWx0ZXIpcmV0dXJuIF9nbC5MSU5FQVI7aWYocD09PVRIUkVFLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIF9nbC5MSU5FQVJfTUlQTUFQX05FQVJFU1Q7aWYocD09PVRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcilyZXR1cm4gX2dsLkxJTkVBUl9NSVBNQVBfTElORUFSO2lmKHA9PT1USFJFRS5VbnNpZ25lZEJ5dGVUeXBlKXJldHVybiBfZ2wuVU5TSUdORURfQllURTtpZihwPT09VEhSRUUuVW5zaWduZWRTaG9ydDQ0NDRUeXBlKXJldHVybiBfZ2wuVU5TSUdORURfU0hPUlRfNF80XzRfNDtpZihwPT09VEhSRUUuVW5zaWduZWRTaG9ydDU1NTFUeXBlKXJldHVybiBfZ2wuVU5TSUdORURfU0hPUlRfNV81XzVfMTtpZihwPT09VEhSRUUuVW5zaWduZWRTaG9ydDU2NVR5cGUpcmV0dXJuIF9nbC5VTlNJR05FRF9TSE9SVF81XzZfNTtpZihwPT09VEhSRUUuQnl0ZVR5cGUpcmV0dXJuIF9nbC5CWVRFO2lmKHA9PT1USFJFRS5TaG9ydFR5cGUpcmV0dXJuIF9nbC5TSE9SVDtpZihwPT09VEhSRUUuVW5zaWduZWRTaG9ydFR5cGUpcmV0dXJuIF9nbC5VTlNJR05FRF9TSE9SVDtpZihwPT09VEhSRUUuSW50VHlwZSlyZXR1cm4gX2dsLklOVDtpZihwPT09VEhSRUUuVW5zaWduZWRJbnRUeXBlKXJldHVybiBfZ2wuVU5TSUdORURfSU5UO2lmKHA9PT1USFJFRS5GbG9hdFR5cGUpcmV0dXJuIF9nbC5GTE9BVDtleHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTtpZihleHRlbnNpb24hPT1udWxsKXtpZihwPT09VEhSRUUuSGFsZkZsb2F0VHlwZSlyZXR1cm4gZXh0ZW5zaW9uLkhBTEZfRkxPQVRfT0VTO31pZihwPT09VEhSRUUuQWxwaGFGb3JtYXQpcmV0dXJuIF9nbC5BTFBIQTtpZihwPT09VEhSRUUuUkdCRm9ybWF0KXJldHVybiBfZ2wuUkdCO2lmKHA9PT1USFJFRS5SR0JBRm9ybWF0KXJldHVybiBfZ2wuUkdCQTtpZihwPT09VEhSRUUuTHVtaW5hbmNlRm9ybWF0KXJldHVybiBfZ2wuTFVNSU5BTkNFO2lmKHA9PT1USFJFRS5MdW1pbmFuY2VBbHBoYUZvcm1hdClyZXR1cm4gX2dsLkxVTUlOQU5DRV9BTFBIQTtpZihwPT09VEhSRUUuRGVwdGhGb3JtYXQpcmV0dXJuIF9nbC5ERVBUSF9DT01QT05FTlQ7aWYocD09PVRIUkVFLkFkZEVxdWF0aW9uKXJldHVybiBfZ2wuRlVOQ19BREQ7aWYocD09PVRIUkVFLlN1YnRyYWN0RXF1YXRpb24pcmV0dXJuIF9nbC5GVU5DX1NVQlRSQUNUO2lmKHA9PT1USFJFRS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbilyZXR1cm4gX2dsLkZVTkNfUkVWRVJTRV9TVUJUUkFDVDtpZihwPT09VEhSRUUuWmVyb0ZhY3RvcilyZXR1cm4gX2dsLlpFUk87aWYocD09PVRIUkVFLk9uZUZhY3RvcilyZXR1cm4gX2dsLk9ORTtpZihwPT09VEhSRUUuU3JjQ29sb3JGYWN0b3IpcmV0dXJuIF9nbC5TUkNfQ09MT1I7aWYocD09PVRIUkVFLk9uZU1pbnVzU3JjQ29sb3JGYWN0b3IpcmV0dXJuIF9nbC5PTkVfTUlOVVNfU1JDX0NPTE9SO2lmKHA9PT1USFJFRS5TcmNBbHBoYUZhY3RvcilyZXR1cm4gX2dsLlNSQ19BTFBIQTtpZihwPT09VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3RvcilyZXR1cm4gX2dsLk9ORV9NSU5VU19TUkNfQUxQSEE7aWYocD09PVRIUkVFLkRzdEFscGhhRmFjdG9yKXJldHVybiBfZ2wuRFNUX0FMUEhBO2lmKHA9PT1USFJFRS5PbmVNaW51c0RzdEFscGhhRmFjdG9yKXJldHVybiBfZ2wuT05FX01JTlVTX0RTVF9BTFBIQTtpZihwPT09VEhSRUUuRHN0Q29sb3JGYWN0b3IpcmV0dXJuIF9nbC5EU1RfQ09MT1I7aWYocD09PVRIUkVFLk9uZU1pbnVzRHN0Q29sb3JGYWN0b3IpcmV0dXJuIF9nbC5PTkVfTUlOVVNfRFNUX0NPTE9SO2lmKHA9PT1USFJFRS5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yKXJldHVybiBfZ2wuU1JDX0FMUEhBX1NBVFVSQVRFO2V4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTtpZihleHRlbnNpb24hPT1udWxsKXtpZihwPT09VEhSRUUuUkdCX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKHA9PT1USFJFRS5SR0JBX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQxX0VYVDtpZihwPT09VEhSRUUuUkdCQV9TM1RDX0RYVDNfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7aWYocD09PVRIUkVFLlJHQkFfUzNUQ19EWFQ1X0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUO31leHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1USFJFRS5SR0JfUFZSVENfNEJQUFYxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7aWYocD09PVRIUkVFLlJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztpZihwPT09VEhSRUUuUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0KXJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzRCUFBWMV9JTUc7aWYocD09PVRIUkVFLlJHQkFfUFZSVENfMkJQUFYxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HO31leHRlbnNpb249ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxJyk7aWYoZXh0ZW5zaW9uIT09bnVsbCl7aWYocD09PVRIUkVFLlJHQl9FVEMxX0Zvcm1hdClyZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX0VUQzFfV0VCR0w7fWV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnRVhUX2JsZW5kX21pbm1heCcpO2lmKGV4dGVuc2lvbiE9PW51bGwpe2lmKHA9PT1USFJFRS5NaW5FcXVhdGlvbilyZXR1cm4gZXh0ZW5zaW9uLk1JTl9FWFQ7aWYocD09PVRIUkVFLk1heEVxdWF0aW9uKXJldHVybiBleHRlbnNpb24uTUFYX0VYVDt9cmV0dXJuIDA7fX07Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL1dlYkdMUmVuZGVyVGFyZ2V0LmpzXG4vKipcclxuICogQGF1dGhvciBzemltZWsgLyBodHRwczovL2dpdGh1Yi5jb20vc3ppbWVrL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIE1hcml1cyBLaW50ZWwgLyBodHRwczovL2dpdGh1Yi5jb20va2ludGVsXHJcbiAqLy8qXHJcbiBJbiBvcHRpb25zLCB3ZSBjYW4gc3BlY2lmeTpcclxuICogVGV4dHVyZSBwYXJhbWV0ZXJzIGZvciBhbiBhdXRvLWdlbmVyYXRlZCB0YXJnZXQgdGV4dHVyZVxyXG4gKiBkZXB0aEJ1ZmZlci9zdGVuY2lsQnVmZmVyOiBCb29sZWFucyB0byBpbmRpY2F0ZSBpZiB3ZSBzaG91bGQgZ2VuZXJhdGUgdGhlc2UgYnVmZmVyc1xyXG4qL1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKHdpZHRoLGhlaWdodCxvcHRpb25zKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLndpZHRoPXdpZHRoO3RoaXMuaGVpZ2h0PWhlaWdodDt0aGlzLnNjaXNzb3I9bmV3IFRIUkVFLlZlY3RvcjQoMCwwLHdpZHRoLGhlaWdodCk7dGhpcy5zY2lzc29yVGVzdD1mYWxzZTt0aGlzLnZpZXdwb3J0PW5ldyBUSFJFRS5WZWN0b3I0KDAsMCx3aWR0aCxoZWlnaHQpO29wdGlvbnM9b3B0aW9uc3x8e307aWYob3B0aW9ucy5taW5GaWx0ZXI9PT11bmRlZmluZWQpb3B0aW9ucy5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyO3RoaXMudGV4dHVyZT1uZXcgVEhSRUUuVGV4dHVyZSh1bmRlZmluZWQsdW5kZWZpbmVkLG9wdGlvbnMud3JhcFMsb3B0aW9ucy53cmFwVCxvcHRpb25zLm1hZ0ZpbHRlcixvcHRpb25zLm1pbkZpbHRlcixvcHRpb25zLmZvcm1hdCxvcHRpb25zLnR5cGUsb3B0aW9ucy5hbmlzb3Ryb3B5LG9wdGlvbnMuZW5jb2RpbmcpO3RoaXMuZGVwdGhCdWZmZXI9b3B0aW9ucy5kZXB0aEJ1ZmZlciE9PXVuZGVmaW5lZD9vcHRpb25zLmRlcHRoQnVmZmVyOnRydWU7dGhpcy5zdGVuY2lsQnVmZmVyPW9wdGlvbnMuc3RlbmNpbEJ1ZmZlciE9PXVuZGVmaW5lZD9vcHRpb25zLnN0ZW5jaWxCdWZmZXI6dHJ1ZTt0aGlzLmRlcHRoVGV4dHVyZT1udWxsO307T2JqZWN0LmFzc2lnbihUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7c2V0U2l6ZTpmdW5jdGlvbih3aWR0aCxoZWlnaHQpe2lmKHRoaXMud2lkdGghPT13aWR0aHx8dGhpcy5oZWlnaHQhPT1oZWlnaHQpe3RoaXMud2lkdGg9d2lkdGg7dGhpcy5oZWlnaHQ9aGVpZ2h0O3RoaXMuZGlzcG9zZSgpO310aGlzLnZpZXdwb3J0LnNldCgwLDAsd2lkdGgsaGVpZ2h0KTt0aGlzLnNjaXNzb3Iuc2V0KDAsMCx3aWR0aCxoZWlnaHQpO30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoKS5jb3B5KHRoaXMpO30sY29weTpmdW5jdGlvbihzb3VyY2Upe3RoaXMud2lkdGg9c291cmNlLndpZHRoO3RoaXMuaGVpZ2h0PXNvdXJjZS5oZWlnaHQ7dGhpcy52aWV3cG9ydC5jb3B5KHNvdXJjZS52aWV3cG9ydCk7dGhpcy50ZXh0dXJlPXNvdXJjZS50ZXh0dXJlLmNsb25lKCk7dGhpcy5kZXB0aEJ1ZmZlcj1zb3VyY2UuZGVwdGhCdWZmZXI7dGhpcy5zdGVuY2lsQnVmZmVyPXNvdXJjZS5zdGVuY2lsQnVmZmVyO3RoaXMuZGVwdGhUZXh0dXJlPXNvdXJjZS5kZXB0aFRleHR1cmU7cmV0dXJuIHRoaXM7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOidkaXNwb3NlJ30pO319KTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvV2ViR0xSZW5kZXJUYXJnZXRDdWJlLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbVxyXG4gKi9USFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU9ZnVuY3Rpb24od2lkdGgsaGVpZ2h0LG9wdGlvbnMpe1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LmNhbGwodGhpcyx3aWR0aCxoZWlnaHQsb3B0aW9ucyk7dGhpcy5hY3RpdmVDdWJlRmFjZT0wOy8vIFBYIDAsIE5YIDEsIFBZIDIsIE5ZIDMsIFBaIDQsIE5aIDVcbnRoaXMuYWN0aXZlTWlwTWFwTGV2ZWw9MDt9O1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUpO1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlOy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTEJ1ZmZlclJlbmRlcmVyLmpzXG4vKipcclxuKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4qL1RIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI9ZnVuY3Rpb24oX2dsLGV4dGVuc2lvbnMsX2luZm9SZW5kZXIpe3ZhciBtb2RlO2Z1bmN0aW9uIHNldE1vZGUodmFsdWUpe21vZGU9dmFsdWU7fWZ1bmN0aW9uIHJlbmRlcihzdGFydCxjb3VudCl7X2dsLmRyYXdBcnJheXMobW9kZSxzdGFydCxjb3VudCk7X2luZm9SZW5kZXIuY2FsbHMrKztfaW5mb1JlbmRlci52ZXJ0aWNlcys9Y291bnQ7aWYobW9kZT09PV9nbC5UUklBTkdMRVMpX2luZm9SZW5kZXIuZmFjZXMrPWNvdW50LzM7fWZ1bmN0aW9uIHJlbmRlckluc3RhbmNlcyhnZW9tZXRyeSl7dmFyIGV4dGVuc2lvbj1leHRlbnNpb25zLmdldCgnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO2lmKGV4dGVuc2lvbj09PW51bGwpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLicpO3JldHVybjt9dmFyIHBvc2l0aW9uPWdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247dmFyIGNvdW50PTA7aWYocG9zaXRpb24gaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSl7Y291bnQ9cG9zaXRpb24uZGF0YS5jb3VudDtleHRlbnNpb24uZHJhd0FycmF5c0luc3RhbmNlZEFOR0xFKG1vZGUsMCxjb3VudCxnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudCk7fWVsc2V7Y291bnQ9cG9zaXRpb24uY291bnQ7ZXh0ZW5zaW9uLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShtb2RlLDAsY291bnQsZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQpO31faW5mb1JlbmRlci5jYWxscysrO19pbmZvUmVuZGVyLnZlcnRpY2VzKz1jb3VudCpnZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudDtpZihtb2RlPT09X2dsLlRSSUFOR0xFUylfaW5mb1JlbmRlci5mYWNlcys9Z2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQqY291bnQvMzt9dGhpcy5zZXRNb2RlPXNldE1vZGU7dGhpcy5yZW5kZXI9cmVuZGVyO3RoaXMucmVuZGVySW5zdGFuY2VzPXJlbmRlckluc3RhbmNlczt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTENsaXBwaW5nLmpzXG5USFJFRS5XZWJHTENsaXBwaW5nPWZ1bmN0aW9uKCl7dmFyIHNjb3BlPXRoaXMsZ2xvYmFsU3RhdGU9bnVsbCxudW1HbG9iYWxQbGFuZXM9MCxsb2NhbENsaXBwaW5nRW5hYmxlZD1mYWxzZSxyZW5kZXJpbmdTaGFkb3dzPWZhbHNlLHBsYW5lPW5ldyBUSFJFRS5QbGFuZSgpLHZpZXdOb3JtYWxNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDMoKSx1bmlmb3JtPXt2YWx1ZTpudWxsLG5lZWRzVXBkYXRlOmZhbHNlfTt0aGlzLnVuaWZvcm09dW5pZm9ybTt0aGlzLm51bVBsYW5lcz0wO3RoaXMuaW5pdD1mdW5jdGlvbihwbGFuZXMsZW5hYmxlTG9jYWxDbGlwcGluZyxjYW1lcmEpe3ZhciBlbmFibGVkPXBsYW5lcy5sZW5ndGghPT0wfHxlbmFibGVMb2NhbENsaXBwaW5nfHwvLyBlbmFibGUgc3RhdGUgb2YgcHJldmlvdXMgZnJhbWUgLSB0aGUgY2xpcHBpbmcgY29kZSBoYXMgdG9cbi8vIHJ1biBhbm90aGVyIGZyYW1lIGluIG9yZGVyIHRvIHJlc2V0IHRoZSBzdGF0ZTpcbm51bUdsb2JhbFBsYW5lcyE9PTB8fGxvY2FsQ2xpcHBpbmdFbmFibGVkO2xvY2FsQ2xpcHBpbmdFbmFibGVkPWVuYWJsZUxvY2FsQ2xpcHBpbmc7Z2xvYmFsU3RhdGU9cHJvamVjdFBsYW5lcyhwbGFuZXMsY2FtZXJhLDApO251bUdsb2JhbFBsYW5lcz1wbGFuZXMubGVuZ3RoO3JldHVybiBlbmFibGVkO307dGhpcy5iZWdpblNoYWRvd3M9ZnVuY3Rpb24oKXtyZW5kZXJpbmdTaGFkb3dzPXRydWU7cHJvamVjdFBsYW5lcyhudWxsKTt9O3RoaXMuZW5kU2hhZG93cz1mdW5jdGlvbigpe3JlbmRlcmluZ1NoYWRvd3M9ZmFsc2U7cmVzZXRHbG9iYWxTdGF0ZSgpO307dGhpcy5zZXRTdGF0ZT1mdW5jdGlvbihwbGFuZXMsY2xpcFNoYWRvd3MsY2FtZXJhLGNhY2hlLGZyb21DYWNoZSl7aWYoIWxvY2FsQ2xpcHBpbmdFbmFibGVkfHxwbGFuZXM9PT1udWxsfHxwbGFuZXMubGVuZ3RoPT09MHx8cmVuZGVyaW5nU2hhZG93cyYmIWNsaXBTaGFkb3dzKXsvLyB0aGVyZSdzIG5vIGxvY2FsIGNsaXBwaW5nXG5pZihyZW5kZXJpbmdTaGFkb3dzKXsvLyB0aGVyZSdzIG5vIGdsb2JhbCBjbGlwcGluZ1xucHJvamVjdFBsYW5lcyhudWxsKTt9ZWxzZXtyZXNldEdsb2JhbFN0YXRlKCk7fX1lbHNle3ZhciBuR2xvYmFsPXJlbmRlcmluZ1NoYWRvd3M/MDpudW1HbG9iYWxQbGFuZXMsbEdsb2JhbD1uR2xvYmFsKjQsZHN0QXJyYXk9Y2FjaGUuY2xpcHBpbmdTdGF0ZXx8bnVsbDt1bmlmb3JtLnZhbHVlPWRzdEFycmF5Oy8vIGVuc3VyZSB1bmlxdWUgc3RhdGVcbmRzdEFycmF5PXByb2plY3RQbGFuZXMocGxhbmVzLGNhbWVyYSxsR2xvYmFsLGZyb21DYWNoZSk7Zm9yKHZhciBpPTA7aSE9PWxHbG9iYWw7KytpKXtkc3RBcnJheVtpXT1nbG9iYWxTdGF0ZVtpXTt9Y2FjaGUuY2xpcHBpbmdTdGF0ZT1kc3RBcnJheTt0aGlzLm51bVBsYW5lcys9bkdsb2JhbDt9fTtmdW5jdGlvbiByZXNldEdsb2JhbFN0YXRlKCl7aWYodW5pZm9ybS52YWx1ZSE9PWdsb2JhbFN0YXRlKXt1bmlmb3JtLnZhbHVlPWdsb2JhbFN0YXRlO3VuaWZvcm0ubmVlZHNVcGRhdGU9bnVtR2xvYmFsUGxhbmVzPjA7fXNjb3BlLm51bVBsYW5lcz1udW1HbG9iYWxQbGFuZXM7fWZ1bmN0aW9uIHByb2plY3RQbGFuZXMocGxhbmVzLGNhbWVyYSxkc3RPZmZzZXQsc2tpcFRyYW5zZm9ybSl7dmFyIG5QbGFuZXM9cGxhbmVzIT09bnVsbD9wbGFuZXMubGVuZ3RoOjAsZHN0QXJyYXk9bnVsbDtpZihuUGxhbmVzIT09MCl7ZHN0QXJyYXk9dW5pZm9ybS52YWx1ZTtpZihza2lwVHJhbnNmb3JtIT09dHJ1ZXx8ZHN0QXJyYXk9PT1udWxsKXt2YXIgZmxhdFNpemU9ZHN0T2Zmc2V0K25QbGFuZXMqNCx2aWV3TWF0cml4PWNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2U7dmlld05vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgodmlld01hdHJpeCk7aWYoZHN0QXJyYXk9PT1udWxsfHxkc3RBcnJheS5sZW5ndGg8ZmxhdFNpemUpe2RzdEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoZmxhdFNpemUpO31mb3IodmFyIGk9MCxpND1kc3RPZmZzZXQ7aSE9PW5QbGFuZXM7KytpLGk0Kz00KXtwbGFuZS5jb3B5KHBsYW5lc1tpXSkuYXBwbHlNYXRyaXg0KHZpZXdNYXRyaXgsdmlld05vcm1hbE1hdHJpeCk7cGxhbmUubm9ybWFsLnRvQXJyYXkoZHN0QXJyYXksaTQpO2RzdEFycmF5W2k0KzNdPXBsYW5lLmNvbnN0YW50O319dW5pZm9ybS52YWx1ZT1kc3RBcnJheTt1bmlmb3JtLm5lZWRzVXBkYXRlPXRydWU7fXNjb3BlLm51bVBsYW5lcz1uUGxhbmVzO3JldHVybiBkc3RBcnJheTt9fTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXIuanNcbi8qKlxyXG4qIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiovVEhSRUUuV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXI9ZnVuY3Rpb24oX2dsLGV4dGVuc2lvbnMsX2luZm9SZW5kZXIpe3ZhciBtb2RlO2Z1bmN0aW9uIHNldE1vZGUodmFsdWUpe21vZGU9dmFsdWU7fXZhciB0eXBlLHNpemU7ZnVuY3Rpb24gc2V0SW5kZXgoaW5kZXgpe2lmKGluZGV4LmFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkmJmV4dGVuc2lvbnMuZ2V0KCdPRVNfZWxlbWVudF9pbmRleF91aW50Jykpe3R5cGU9X2dsLlVOU0lHTkVEX0lOVDtzaXplPTQ7fWVsc2V7dHlwZT1fZ2wuVU5TSUdORURfU0hPUlQ7c2l6ZT0yO319ZnVuY3Rpb24gcmVuZGVyKHN0YXJ0LGNvdW50KXtfZ2wuZHJhd0VsZW1lbnRzKG1vZGUsY291bnQsdHlwZSxzdGFydCpzaXplKTtfaW5mb1JlbmRlci5jYWxscysrO19pbmZvUmVuZGVyLnZlcnRpY2VzKz1jb3VudDtpZihtb2RlPT09X2dsLlRSSUFOR0xFUylfaW5mb1JlbmRlci5mYWNlcys9Y291bnQvMzt9ZnVuY3Rpb24gcmVuZGVySW5zdGFuY2VzKGdlb21ldHJ5LHN0YXJ0LGNvdW50KXt2YXIgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7aWYoZXh0ZW5zaW9uPT09bnVsbCl7Y29uc29sZS5lcnJvcignVEhSRUUuV2ViR0xCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuJyk7cmV0dXJuO31leHRlbnNpb24uZHJhd0VsZW1lbnRzSW5zdGFuY2VkQU5HTEUobW9kZSxjb3VudCx0eXBlLHN0YXJ0KnNpemUsZ2VvbWV0cnkubWF4SW5zdGFuY2VkQ291bnQpO19pbmZvUmVuZGVyLmNhbGxzKys7X2luZm9SZW5kZXIudmVydGljZXMrPWNvdW50Kmdlb21ldHJ5Lm1heEluc3RhbmNlZENvdW50O2lmKG1vZGU9PT1fZ2wuVFJJQU5HTEVTKV9pbmZvUmVuZGVyLmZhY2VzKz1nZW9tZXRyeS5tYXhJbnN0YW5jZWRDb3VudCpjb3VudC8zO310aGlzLnNldE1vZGU9c2V0TW9kZTt0aGlzLnNldEluZGV4PXNldEluZGV4O3RoaXMucmVuZGVyPXJlbmRlcjt0aGlzLnJlbmRlckluc3RhbmNlcz1yZW5kZXJJbnN0YW5jZXM7fTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xFeHRlbnNpb25zLmpzXG4vKipcclxuKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4qL1RIUkVFLldlYkdMRXh0ZW5zaW9ucz1mdW5jdGlvbihnbCl7dmFyIGV4dGVuc2lvbnM9e307dGhpcy5nZXQ9ZnVuY3Rpb24obmFtZSl7aWYoZXh0ZW5zaW9uc1tuYW1lXSE9PXVuZGVmaW5lZCl7cmV0dXJuIGV4dGVuc2lvbnNbbmFtZV07fXZhciBleHRlbnNpb247c3dpdGNoKG5hbWUpe2Nhc2UnV0VCR0xfZGVwdGhfdGV4dHVyZSc6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVwdGhfdGV4dHVyZScpfHxnbC5nZXRFeHRlbnNpb24oJ01PWl9XRUJHTF9kZXB0aF90ZXh0dXJlJyl8fGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2RlcHRoX3RleHR1cmUnKTticmVhaztjYXNlJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyc6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyl8fGdsLmdldEV4dGVuc2lvbignTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpfHxnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTticmVhaztjYXNlJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpfHxnbC5nZXRFeHRlbnNpb24oJ01PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpfHxnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO2JyZWFrO2Nhc2UnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJzpleHRlbnNpb249Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKXx8Z2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyk7YnJlYWs7Y2FzZSdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMSc6ZXh0ZW5zaW9uPWdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEnKTticmVhaztkZWZhdWx0OmV4dGVuc2lvbj1nbC5nZXRFeHRlbnNpb24obmFtZSk7fWlmKGV4dGVuc2lvbj09PW51bGwpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogJytuYW1lKycgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuJyk7fWV4dGVuc2lvbnNbbmFtZV09ZXh0ZW5zaW9uO3JldHVybiBleHRlbnNpb247fTt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTENhcGFiaWxpdGllcy5qc1xuVEhSRUUuV2ViR0xDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oZ2wsZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzKXtmdW5jdGlvbiBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKXtpZihwcmVjaXNpb249PT0naGlnaHAnKXtpZihnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuVkVSVEVYX1NIQURFUixnbC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24+MCYmZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGdsLkZSQUdNRU5UX1NIQURFUixnbC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24+MCl7cmV0dXJuJ2hpZ2hwJzt9cHJlY2lzaW9uPSdtZWRpdW1wJzt9aWYocHJlY2lzaW9uPT09J21lZGl1bXAnKXtpZihnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuVkVSVEVYX1NIQURFUixnbC5NRURJVU1fRkxPQVQpLnByZWNpc2lvbj4wJiZnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLGdsLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uPjApe3JldHVybidtZWRpdW1wJzt9fXJldHVybidsb3dwJzt9dGhpcy5nZXRNYXhQcmVjaXNpb249Z2V0TWF4UHJlY2lzaW9uO3RoaXMucHJlY2lzaW9uPXBhcmFtZXRlcnMucHJlY2lzaW9uIT09dW5kZWZpbmVkP3BhcmFtZXRlcnMucHJlY2lzaW9uOidoaWdocCc7dGhpcy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyPXBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI6ZmFsc2U7dGhpcy5tYXhUZXh0dXJlcz1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO3RoaXMubWF4VmVydGV4VGV4dHVyZXM9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7dGhpcy5tYXhUZXh0dXJlU2l6ZT1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfU0laRSk7dGhpcy5tYXhDdWJlbWFwU2l6ZT1nbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSk7dGhpcy5tYXhBdHRyaWJ1dGVzPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX0FUVFJJQlMpO3RoaXMubWF4VmVydGV4VW5pZm9ybXM9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKTt0aGlzLm1heFZhcnlpbmdzPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkFSWUlOR19WRUNUT1JTKTt0aGlzLm1heEZyYWdtZW50VW5pZm9ybXM9Z2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMpO3RoaXMudmVydGV4VGV4dHVyZXM9dGhpcy5tYXhWZXJ0ZXhUZXh0dXJlcz4wO3RoaXMuZmxvYXRGcmFnbWVudFRleHR1cmVzPSEhZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2Zsb2F0Jyk7dGhpcy5mbG9hdFZlcnRleFRleHR1cmVzPXRoaXMudmVydGV4VGV4dHVyZXMmJnRoaXMuZmxvYXRGcmFnbWVudFRleHR1cmVzO3ZhciBfbWF4UHJlY2lzaW9uPWdldE1heFByZWNpc2lvbih0aGlzLnByZWNpc2lvbik7aWYoX21heFByZWNpc2lvbiE9PXRoaXMucHJlY2lzaW9uKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6Jyx0aGlzLnByZWNpc2lvbiwnbm90IHN1cHBvcnRlZCwgdXNpbmcnLF9tYXhQcmVjaXNpb24sJ2luc3RlYWQuJyk7dGhpcy5wcmVjaXNpb249X21heFByZWNpc2lvbjt9aWYodGhpcy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKXt0aGlzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI9ISFleHRlbnNpb25zLmdldCgnRVhUX2ZyYWdfZGVwdGgnKTt9fTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xHZW9tZXRyaWVzLmpzXG4vKipcclxuKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4qL1RIUkVFLldlYkdMR2VvbWV0cmllcz1mdW5jdGlvbihnbCxwcm9wZXJ0aWVzLGluZm8pe3ZhciBnZW9tZXRyaWVzPXt9O2Z1bmN0aW9uIGdldChvYmplY3Qpe3ZhciBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7aWYoZ2VvbWV0cmllc1tnZW9tZXRyeS5pZF0hPT11bmRlZmluZWQpe3JldHVybiBnZW9tZXRyaWVzW2dlb21ldHJ5LmlkXTt9Z2VvbWV0cnkuYWRkRXZlbnRMaXN0ZW5lcignZGlzcG9zZScsb25HZW9tZXRyeURpc3Bvc2UpO3ZhciBidWZmZXJnZW9tZXRyeTtpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXtidWZmZXJnZW9tZXRyeT1nZW9tZXRyeTt9ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXtpZihnZW9tZXRyeS5fYnVmZmVyR2VvbWV0cnk9PT11bmRlZmluZWQpe2dlb21ldHJ5Ll9idWZmZXJHZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKS5zZXRGcm9tT2JqZWN0KG9iamVjdCk7fWJ1ZmZlcmdlb21ldHJ5PWdlb21ldHJ5Ll9idWZmZXJHZW9tZXRyeTt9Z2VvbWV0cmllc1tnZW9tZXRyeS5pZF09YnVmZmVyZ2VvbWV0cnk7aW5mby5tZW1vcnkuZ2VvbWV0cmllcysrO3JldHVybiBidWZmZXJnZW9tZXRyeTt9ZnVuY3Rpb24gb25HZW9tZXRyeURpc3Bvc2UoZXZlbnQpe3ZhciBnZW9tZXRyeT1ldmVudC50YXJnZXQ7dmFyIGJ1ZmZlcmdlb21ldHJ5PWdlb21ldHJpZXNbZ2VvbWV0cnkuaWRdO2lmKGJ1ZmZlcmdlb21ldHJ5LmluZGV4IT09bnVsbCl7ZGVsZXRlQXR0cmlidXRlKGJ1ZmZlcmdlb21ldHJ5LmluZGV4KTt9ZGVsZXRlQXR0cmlidXRlcyhidWZmZXJnZW9tZXRyeS5hdHRyaWJ1dGVzKTtnZW9tZXRyeS5yZW1vdmVFdmVudExpc3RlbmVyKCdkaXNwb3NlJyxvbkdlb21ldHJ5RGlzcG9zZSk7ZGVsZXRlIGdlb21ldHJpZXNbZ2VvbWV0cnkuaWRdOy8vIFRPRE9cbnZhciBwcm9wZXJ0eT1wcm9wZXJ0aWVzLmdldChnZW9tZXRyeSk7aWYocHJvcGVydHkud2lyZWZyYW1lKXtkZWxldGVBdHRyaWJ1dGUocHJvcGVydHkud2lyZWZyYW1lKTt9cHJvcGVydGllcy5kZWxldGUoZ2VvbWV0cnkpO3ZhciBidWZmZXJwcm9wZXJ0eT1wcm9wZXJ0aWVzLmdldChidWZmZXJnZW9tZXRyeSk7aWYoYnVmZmVycHJvcGVydHkud2lyZWZyYW1lKXtkZWxldGVBdHRyaWJ1dGUoYnVmZmVycHJvcGVydHkud2lyZWZyYW1lKTt9cHJvcGVydGllcy5kZWxldGUoYnVmZmVyZ2VvbWV0cnkpOy8vXG5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzLS07fWZ1bmN0aW9uIGdldEF0dHJpYnV0ZUJ1ZmZlcihhdHRyaWJ1dGUpe2lmKGF0dHJpYnV0ZSBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXtyZXR1cm4gcHJvcGVydGllcy5nZXQoYXR0cmlidXRlLmRhdGEpLl9fd2ViZ2xCdWZmZXI7fXJldHVybiBwcm9wZXJ0aWVzLmdldChhdHRyaWJ1dGUpLl9fd2ViZ2xCdWZmZXI7fWZ1bmN0aW9uIGRlbGV0ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpe3ZhciBidWZmZXI9Z2V0QXR0cmlidXRlQnVmZmVyKGF0dHJpYnV0ZSk7aWYoYnVmZmVyIT09dW5kZWZpbmVkKXtnbC5kZWxldGVCdWZmZXIoYnVmZmVyKTtyZW1vdmVBdHRyaWJ1dGVCdWZmZXIoYXR0cmlidXRlKTt9fWZ1bmN0aW9uIGRlbGV0ZUF0dHJpYnV0ZXMoYXR0cmlidXRlcyl7Zm9yKHZhciBuYW1lIGluIGF0dHJpYnV0ZXMpe2RlbGV0ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzW25hbWVdKTt9fWZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZUJ1ZmZlcihhdHRyaWJ1dGUpe2lmKGF0dHJpYnV0ZSBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXtwcm9wZXJ0aWVzLmRlbGV0ZShhdHRyaWJ1dGUuZGF0YSk7fWVsc2V7cHJvcGVydGllcy5kZWxldGUoYXR0cmlidXRlKTt9fXRoaXMuZ2V0PWdldDt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTExpZ2h0cy5qc1xuLyoqXHJcbiogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuKi9USFJFRS5XZWJHTExpZ2h0cz1mdW5jdGlvbigpe3ZhciBsaWdodHM9e307dGhpcy5nZXQ9ZnVuY3Rpb24obGlnaHQpe2lmKGxpZ2h0c1tsaWdodC5pZF0hPT11bmRlZmluZWQpe3JldHVybiBsaWdodHNbbGlnaHQuaWRdO312YXIgdW5pZm9ybXM7c3dpdGNoKGxpZ2h0LnR5cGUpe2Nhc2UnRGlyZWN0aW9uYWxMaWdodCc6dW5pZm9ybXM9e2RpcmVjdGlvbjpuZXcgVEhSRUUuVmVjdG9yMygpLGNvbG9yOm5ldyBUSFJFRS5Db2xvcigpLHNoYWRvdzpmYWxzZSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgVEhSRUUuVmVjdG9yMigpfTticmVhaztjYXNlJ1Nwb3RMaWdodCc6dW5pZm9ybXM9e3Bvc2l0aW9uOm5ldyBUSFJFRS5WZWN0b3IzKCksZGlyZWN0aW9uOm5ldyBUSFJFRS5WZWN0b3IzKCksY29sb3I6bmV3IFRIUkVFLkNvbG9yKCksZGlzdGFuY2U6MCxjb25lQ29zOjAscGVudW1icmFDb3M6MCxkZWNheTowLHNoYWRvdzpmYWxzZSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgVEhSRUUuVmVjdG9yMigpfTticmVhaztjYXNlJ1BvaW50TGlnaHQnOnVuaWZvcm1zPXtwb3NpdGlvbjpuZXcgVEhSRUUuVmVjdG9yMygpLGNvbG9yOm5ldyBUSFJFRS5Db2xvcigpLGRpc3RhbmNlOjAsZGVjYXk6MCxzaGFkb3c6ZmFsc2Usc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IFRIUkVFLlZlY3RvcjIoKX07YnJlYWs7Y2FzZSdIZW1pc3BoZXJlTGlnaHQnOnVuaWZvcm1zPXtkaXJlY3Rpb246bmV3IFRIUkVFLlZlY3RvcjMoKSxza3lDb2xvcjpuZXcgVEhSRUUuQ29sb3IoKSxncm91bmRDb2xvcjpuZXcgVEhSRUUuQ29sb3IoKX07YnJlYWs7fWxpZ2h0c1tsaWdodC5pZF09dW5pZm9ybXM7cmV0dXJuIHVuaWZvcm1zO307fTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xPYmplY3RzLmpzXG4vKipcclxuKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4qL1RIUkVFLldlYkdMT2JqZWN0cz1mdW5jdGlvbihnbCxwcm9wZXJ0aWVzLGluZm8pe3ZhciBnZW9tZXRyaWVzPW5ldyBUSFJFRS5XZWJHTEdlb21ldHJpZXMoZ2wscHJvcGVydGllcyxpbmZvKTsvL1xuZnVuY3Rpb24gdXBkYXRlKG9iamVjdCl7Ly8gVE9ETzogQXZvaWQgdXBkYXRpbmcgdHdpY2UgKHdoZW4gdXNpbmcgc2hhZG93TWFwKS4gTWF5YmUgYWRkIGZyYW1lIGNvdW50ZXIuXG52YXIgZ2VvbWV0cnk9Z2VvbWV0cmllcy5nZXQob2JqZWN0KTtpZihvYmplY3QuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSl7Z2VvbWV0cnkudXBkYXRlRnJvbU9iamVjdChvYmplY3QpO312YXIgaW5kZXg9Z2VvbWV0cnkuaW5kZXg7dmFyIGF0dHJpYnV0ZXM9Z2VvbWV0cnkuYXR0cmlidXRlcztpZihpbmRleCE9PW51bGwpe3VwZGF0ZUF0dHJpYnV0ZShpbmRleCxnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUik7fWZvcih2YXIgbmFtZSBpbiBhdHRyaWJ1dGVzKXt1cGRhdGVBdHRyaWJ1dGUoYXR0cmlidXRlc1tuYW1lXSxnbC5BUlJBWV9CVUZGRVIpO30vLyBtb3JwaCB0YXJnZXRzXG52YXIgbW9ycGhBdHRyaWJ1dGVzPWdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcztmb3IodmFyIG5hbWUgaW4gbW9ycGhBdHRyaWJ1dGVzKXt2YXIgYXJyYXk9bW9ycGhBdHRyaWJ1dGVzW25hbWVdO2Zvcih2YXIgaT0wLGw9YXJyYXkubGVuZ3RoO2k8bDtpKyspe3VwZGF0ZUF0dHJpYnV0ZShhcnJheVtpXSxnbC5BUlJBWV9CVUZGRVIpO319cmV0dXJuIGdlb21ldHJ5O31mdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGUoYXR0cmlidXRlLGJ1ZmZlclR5cGUpe3ZhciBkYXRhPWF0dHJpYnV0ZSBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP2F0dHJpYnV0ZS5kYXRhOmF0dHJpYnV0ZTt2YXIgYXR0cmlidXRlUHJvcGVydGllcz1wcm9wZXJ0aWVzLmdldChkYXRhKTtpZihhdHRyaWJ1dGVQcm9wZXJ0aWVzLl9fd2ViZ2xCdWZmZXI9PT11bmRlZmluZWQpe2NyZWF0ZUJ1ZmZlcihhdHRyaWJ1dGVQcm9wZXJ0aWVzLGRhdGEsYnVmZmVyVHlwZSk7fWVsc2UgaWYoYXR0cmlidXRlUHJvcGVydGllcy52ZXJzaW9uIT09ZGF0YS52ZXJzaW9uKXt1cGRhdGVCdWZmZXIoYXR0cmlidXRlUHJvcGVydGllcyxkYXRhLGJ1ZmZlclR5cGUpO319ZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGF0dHJpYnV0ZVByb3BlcnRpZXMsZGF0YSxidWZmZXJUeXBlKXthdHRyaWJ1dGVQcm9wZXJ0aWVzLl9fd2ViZ2xCdWZmZXI9Z2wuY3JlYXRlQnVmZmVyKCk7Z2wuYmluZEJ1ZmZlcihidWZmZXJUeXBlLGF0dHJpYnV0ZVByb3BlcnRpZXMuX193ZWJnbEJ1ZmZlcik7dmFyIHVzYWdlPWRhdGEuZHluYW1pYz9nbC5EWU5BTUlDX0RSQVc6Z2wuU1RBVElDX0RSQVc7Z2wuYnVmZmVyRGF0YShidWZmZXJUeXBlLGRhdGEuYXJyYXksdXNhZ2UpO2F0dHJpYnV0ZVByb3BlcnRpZXMudmVyc2lvbj1kYXRhLnZlcnNpb247fWZ1bmN0aW9uIHVwZGF0ZUJ1ZmZlcihhdHRyaWJ1dGVQcm9wZXJ0aWVzLGRhdGEsYnVmZmVyVHlwZSl7Z2wuYmluZEJ1ZmZlcihidWZmZXJUeXBlLGF0dHJpYnV0ZVByb3BlcnRpZXMuX193ZWJnbEJ1ZmZlcik7aWYoZGF0YS5keW5hbWljPT09ZmFsc2V8fGRhdGEudXBkYXRlUmFuZ2UuY291bnQ9PT0tMSl7Ly8gTm90IHVzaW5nIHVwZGF0ZSByYW5nZXNcbmdsLmJ1ZmZlclN1YkRhdGEoYnVmZmVyVHlwZSwwLGRhdGEuYXJyYXkpO31lbHNlIGlmKGRhdGEudXBkYXRlUmFuZ2UuY291bnQ9PT0wKXtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTE9iamVjdHMudXBkYXRlQnVmZmVyOiBkeW5hbWljIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSBtYXJrZWQgYXMgbmVlZHNVcGRhdGUgYnV0IHVwZGF0ZVJhbmdlLmNvdW50IGlzIDAsIGVuc3VyZSB5b3UgYXJlIHVzaW5nIHNldCBtZXRob2RzIG9yIHVwZGF0aW5nIG1hbnVhbGx5LicpO31lbHNle2dsLmJ1ZmZlclN1YkRhdGEoYnVmZmVyVHlwZSxkYXRhLnVwZGF0ZVJhbmdlLm9mZnNldCpkYXRhLmFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULGRhdGEuYXJyYXkuc3ViYXJyYXkoZGF0YS51cGRhdGVSYW5nZS5vZmZzZXQsZGF0YS51cGRhdGVSYW5nZS5vZmZzZXQrZGF0YS51cGRhdGVSYW5nZS5jb3VudCkpO2RhdGEudXBkYXRlUmFuZ2UuY291bnQ9MDsvLyByZXNldCByYW5nZVxufWF0dHJpYnV0ZVByb3BlcnRpZXMudmVyc2lvbj1kYXRhLnZlcnNpb247fWZ1bmN0aW9uIGdldEF0dHJpYnV0ZUJ1ZmZlcihhdHRyaWJ1dGUpe2lmKGF0dHJpYnV0ZSBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXtyZXR1cm4gcHJvcGVydGllcy5nZXQoYXR0cmlidXRlLmRhdGEpLl9fd2ViZ2xCdWZmZXI7fXJldHVybiBwcm9wZXJ0aWVzLmdldChhdHRyaWJ1dGUpLl9fd2ViZ2xCdWZmZXI7fWZ1bmN0aW9uIGdldFdpcmVmcmFtZUF0dHJpYnV0ZShnZW9tZXRyeSl7dmFyIHByb3BlcnR5PXByb3BlcnRpZXMuZ2V0KGdlb21ldHJ5KTtpZihwcm9wZXJ0eS53aXJlZnJhbWUhPT11bmRlZmluZWQpe3JldHVybiBwcm9wZXJ0eS53aXJlZnJhbWU7fXZhciBpbmRpY2VzPVtdO3ZhciBpbmRleD1nZW9tZXRyeS5pbmRleDt2YXIgYXR0cmlidXRlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzO3ZhciBwb3NpdGlvbj1hdHRyaWJ1dGVzLnBvc2l0aW9uOy8vIGNvbnNvbGUudGltZSggJ3dpcmVmcmFtZScgKTtcbmlmKGluZGV4IT09bnVsbCl7dmFyIGVkZ2VzPXt9O3ZhciBhcnJheT1pbmRleC5hcnJheTtmb3IodmFyIGk9MCxsPWFycmF5Lmxlbmd0aDtpPGw7aSs9Myl7dmFyIGE9YXJyYXlbaSswXTt2YXIgYj1hcnJheVtpKzFdO3ZhciBjPWFycmF5W2krMl07aWYoY2hlY2tFZGdlKGVkZ2VzLGEsYikpaW5kaWNlcy5wdXNoKGEsYik7aWYoY2hlY2tFZGdlKGVkZ2VzLGIsYykpaW5kaWNlcy5wdXNoKGIsYyk7aWYoY2hlY2tFZGdlKGVkZ2VzLGMsYSkpaW5kaWNlcy5wdXNoKGMsYSk7fX1lbHNle3ZhciBhcnJheT1hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2Zvcih2YXIgaT0wLGw9YXJyYXkubGVuZ3RoLzMtMTtpPGw7aSs9Myl7dmFyIGE9aSswO3ZhciBiPWkrMTt2YXIgYz1pKzI7aW5kaWNlcy5wdXNoKGEsYixiLGMsYyxhKTt9fS8vIGNvbnNvbGUudGltZUVuZCggJ3dpcmVmcmFtZScgKTtcbnZhciBUeXBlQXJyYXk9cG9zaXRpb24uY291bnQ+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXk7dmFyIGF0dHJpYnV0ZT1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBUeXBlQXJyYXkoaW5kaWNlcyksMSk7dXBkYXRlQXR0cmlidXRlKGF0dHJpYnV0ZSxnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUik7cHJvcGVydHkud2lyZWZyYW1lPWF0dHJpYnV0ZTtyZXR1cm4gYXR0cmlidXRlO31mdW5jdGlvbiBjaGVja0VkZ2UoZWRnZXMsYSxiKXtpZihhPmIpe3ZhciB0bXA9YTthPWI7Yj10bXA7fXZhciBsaXN0PWVkZ2VzW2FdO2lmKGxpc3Q9PT11bmRlZmluZWQpe2VkZ2VzW2FdPVtiXTtyZXR1cm4gdHJ1ZTt9ZWxzZSBpZihsaXN0LmluZGV4T2YoYik9PT0tMSl7bGlzdC5wdXNoKGIpO3JldHVybiB0cnVlO31yZXR1cm4gZmFsc2U7fXRoaXMuZ2V0QXR0cmlidXRlQnVmZmVyPWdldEF0dHJpYnV0ZUJ1ZmZlcjt0aGlzLmdldFdpcmVmcmFtZUF0dHJpYnV0ZT1nZXRXaXJlZnJhbWVBdHRyaWJ1dGU7dGhpcy51cGRhdGU9dXBkYXRlO307Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3dlYmdsL1dlYkdMUHJvZ3JhbS5qc1xuVEhSRUUuV2ViR0xQcm9ncmFtPWZ1bmN0aW9uKCl7dmFyIHByb2dyYW1JZENvdW50PTA7ZnVuY3Rpb24gZ2V0RW5jb2RpbmdDb21wb25lbnRzKGVuY29kaW5nKXtzd2l0Y2goZW5jb2Rpbmcpe2Nhc2UgVEhSRUUuTGluZWFyRW5jb2Rpbmc6cmV0dXJuWydMaW5lYXInLCcoIHZhbHVlICknXTtjYXNlIFRIUkVFLnNSR0JFbmNvZGluZzpyZXR1cm5bJ3NSR0InLCcoIHZhbHVlICknXTtjYXNlIFRIUkVFLlJHQkVFbmNvZGluZzpyZXR1cm5bJ1JHQkUnLCcoIHZhbHVlICknXTtjYXNlIFRIUkVFLlJHQk03RW5jb2Rpbmc6cmV0dXJuWydSR0JNJywnKCB2YWx1ZSwgNy4wICknXTtjYXNlIFRIUkVFLlJHQk0xNkVuY29kaW5nOnJldHVyblsnUkdCTScsJyggdmFsdWUsIDE2LjAgKSddO2Nhc2UgVEhSRUUuUkdCREVuY29kaW5nOnJldHVyblsnUkdCRCcsJyggdmFsdWUsIDI1Ni4wICknXTtjYXNlIFRIUkVFLkdhbW1hRW5jb2Rpbmc6cmV0dXJuWydHYW1tYScsJyggdmFsdWUsIGZsb2F0KCBHQU1NQV9GQUNUT1IgKSApJ107ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGVuY29kaW5nOiAnK2VuY29kaW5nKTt9fWZ1bmN0aW9uIGdldFRleGVsRGVjb2RpbmdGdW5jdGlvbihmdW5jdGlvbk5hbWUsZW5jb2Rpbmcpe3ZhciBjb21wb25lbnRzPWdldEVuY29kaW5nQ29tcG9uZW50cyhlbmNvZGluZyk7cmV0dXJuXCJ2ZWM0IFwiK2Z1bmN0aW9uTmFtZStcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIFwiK2NvbXBvbmVudHNbMF0rXCJUb0xpbmVhclwiK2NvbXBvbmVudHNbMV0rXCI7IH1cIjt9ZnVuY3Rpb24gZ2V0VGV4ZWxFbmNvZGluZ0Z1bmN0aW9uKGZ1bmN0aW9uTmFtZSxlbmNvZGluZyl7dmFyIGNvbXBvbmVudHM9Z2V0RW5jb2RpbmdDb21wb25lbnRzKGVuY29kaW5nKTtyZXR1cm5cInZlYzQgXCIrZnVuY3Rpb25OYW1lK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG9cIitjb21wb25lbnRzWzBdK2NvbXBvbmVudHNbMV0rXCI7IH1cIjt9ZnVuY3Rpb24gZ2V0VG9uZU1hcHBpbmdGdW5jdGlvbihmdW5jdGlvbk5hbWUsdG9uZU1hcHBpbmcpe3ZhciB0b25lTWFwcGluZ05hbWU7c3dpdGNoKHRvbmVNYXBwaW5nKXtjYXNlIFRIUkVFLkxpbmVhclRvbmVNYXBwaW5nOnRvbmVNYXBwaW5nTmFtZT1cIkxpbmVhclwiO2JyZWFrO2Nhc2UgVEhSRUUuUmVpbmhhcmRUb25lTWFwcGluZzp0b25lTWFwcGluZ05hbWU9XCJSZWluaGFyZFwiO2JyZWFrO2Nhc2UgVEhSRUUuVW5jaGFydGVkMlRvbmVNYXBwaW5nOnRvbmVNYXBwaW5nTmFtZT1cIlVuY2hhcnRlZDJcIjticmVhaztjYXNlIFRIUkVFLkNpbmVvblRvbmVNYXBwaW5nOnRvbmVNYXBwaW5nTmFtZT1cIk9wdGltaXplZENpbmVvblwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCB0b25lTWFwcGluZzogJyt0b25lTWFwcGluZyk7fXJldHVyblwidmVjMyBcIitmdW5jdGlvbk5hbWUrXCIoIHZlYzMgY29sb3IgKSB7IHJldHVybiBcIit0b25lTWFwcGluZ05hbWUrXCJUb25lTWFwcGluZyggY29sb3IgKTsgfVwiO31mdW5jdGlvbiBnZW5lcmF0ZUV4dGVuc2lvbnMoZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzLHJlbmRlcmVyRXh0ZW5zaW9ucyl7ZXh0ZW5zaW9ucz1leHRlbnNpb25zfHx7fTt2YXIgY2h1bmtzPVtleHRlbnNpb25zLmRlcml2YXRpdmVzfHxwYXJhbWV0ZXJzLmVudk1hcEN1YmVVVnx8cGFyYW1ldGVycy5idW1wTWFwfHxwYXJhbWV0ZXJzLm5vcm1hbE1hcHx8cGFyYW1ldGVycy5mbGF0U2hhZGluZz8nI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGUnOicnLChleHRlbnNpb25zLmZyYWdEZXB0aHx8cGFyYW1ldGVycy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyKSYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnRVhUX2ZyYWdfZGVwdGgnKT8nI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZSc6JycsZXh0ZW5zaW9ucy5kcmF3QnVmZmVycyYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnV0VCR0xfZHJhd19idWZmZXJzJyk/JyNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmUnOicnLChleHRlbnNpb25zLnNoYWRlclRleHR1cmVMT0R8fHBhcmFtZXRlcnMuZW52TWFwKSYmcmVuZGVyZXJFeHRlbnNpb25zLmdldCgnRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCcpPycjZXh0ZW5zaW9uIEdMX0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QgOiBlbmFibGUnOicnXTtyZXR1cm4gY2h1bmtzLmZpbHRlcihmaWx0ZXJFbXB0eUxpbmUpLmpvaW4oJ1xcbicpO31mdW5jdGlvbiBnZW5lcmF0ZURlZmluZXMoZGVmaW5lcyl7dmFyIGNodW5rcz1bXTtmb3IodmFyIG5hbWUgaW4gZGVmaW5lcyl7dmFyIHZhbHVlPWRlZmluZXNbbmFtZV07aWYodmFsdWU9PT1mYWxzZSljb250aW51ZTtjaHVua3MucHVzaCgnI2RlZmluZSAnK25hbWUrJyAnK3ZhbHVlKTt9cmV0dXJuIGNodW5rcy5qb2luKCdcXG4nKTt9ZnVuY3Rpb24gZmV0Y2hBdHRyaWJ1dGVMb2NhdGlvbnMoZ2wscHJvZ3JhbSxpZGVudGlmaWVycyl7dmFyIGF0dHJpYnV0ZXM9e307dmFyIG49Z2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLGdsLkFDVElWRV9BVFRSSUJVVEVTKTtmb3IodmFyIGk9MDtpPG47aSsrKXt2YXIgaW5mbz1nbC5nZXRBY3RpdmVBdHRyaWIocHJvZ3JhbSxpKTt2YXIgbmFtZT1pbmZvLm5hbWU7Ly8gY29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFByb2dyYW06IEFDVElWRSBWRVJURVggQVRUUklCVVRFOlwiLCBuYW1lLCBpICk7XG5hdHRyaWJ1dGVzW25hbWVdPWdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sbmFtZSk7fXJldHVybiBhdHRyaWJ1dGVzO31mdW5jdGlvbiBmaWx0ZXJFbXB0eUxpbmUoc3RyaW5nKXtyZXR1cm4gc3RyaW5nIT09Jyc7fWZ1bmN0aW9uIHJlcGxhY2VMaWdodE51bXMoc3RyaW5nLHBhcmFtZXRlcnMpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvTlVNX0RJUl9MSUdIVFMvZyxwYXJhbWV0ZXJzLm51bURpckxpZ2h0cykucmVwbGFjZSgvTlVNX1NQT1RfTElHSFRTL2cscGFyYW1ldGVycy5udW1TcG90TGlnaHRzKS5yZXBsYWNlKC9OVU1fUE9JTlRfTElHSFRTL2cscGFyYW1ldGVycy5udW1Qb2ludExpZ2h0cykucmVwbGFjZSgvTlVNX0hFTUlfTElHSFRTL2cscGFyYW1ldGVycy5udW1IZW1pTGlnaHRzKTt9ZnVuY3Rpb24gcGFyc2VJbmNsdWRlcyhzdHJpbmcpe3ZhciBwYXR0ZXJuPS8jaW5jbHVkZSArPChbXFx3XFxkLl0rKT4vZztmdW5jdGlvbiByZXBsYWNlKG1hdGNoLGluY2x1ZGUpe3ZhciByZXBsYWNlPVRIUkVFLlNoYWRlckNodW5rW2luY2x1ZGVdO2lmKHJlcGxhY2U9PT11bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcignQ2FuIG5vdCByZXNvbHZlICNpbmNsdWRlIDwnK2luY2x1ZGUrJz4nKTt9cmV0dXJuIHBhcnNlSW5jbHVkZXMocmVwbGFjZSk7fXJldHVybiBzdHJpbmcucmVwbGFjZShwYXR0ZXJuLHJlcGxhY2UpO31mdW5jdGlvbiB1bnJvbGxMb29wcyhzdHJpbmcpe3ZhciBwYXR0ZXJuPS9mb3IgXFwoIGludCBpIFxcPSAoXFxkKylcXDsgaSA8IChcXGQrKVxcOyBpIFxcK1xcKyBcXCkgXFx7KFtcXHNcXFNdKz8pKD89XFx9KVxcfS9nO2Z1bmN0aW9uIHJlcGxhY2UobWF0Y2gsc3RhcnQsZW5kLHNuaXBwZXQpe3ZhciB1bnJvbGw9Jyc7Zm9yKHZhciBpPXBhcnNlSW50KHN0YXJ0KTtpPHBhcnNlSW50KGVuZCk7aSsrKXt1bnJvbGwrPXNuaXBwZXQucmVwbGFjZSgvXFxbIGkgXFxdL2csJ1sgJytpKycgXScpO31yZXR1cm4gdW5yb2xsO31yZXR1cm4gc3RyaW5nLnJlcGxhY2UocGF0dGVybixyZXBsYWNlKTt9cmV0dXJuIGZ1bmN0aW9uIFdlYkdMUHJvZ3JhbShyZW5kZXJlcixjb2RlLG1hdGVyaWFsLHBhcmFtZXRlcnMpe3ZhciBnbD1yZW5kZXJlci5jb250ZXh0O3ZhciBleHRlbnNpb25zPW1hdGVyaWFsLmV4dGVuc2lvbnM7dmFyIGRlZmluZXM9bWF0ZXJpYWwuZGVmaW5lczt2YXIgdmVydGV4U2hhZGVyPW1hdGVyaWFsLl9fd2ViZ2xTaGFkZXIudmVydGV4U2hhZGVyO3ZhciBmcmFnbWVudFNoYWRlcj1tYXRlcmlhbC5fX3dlYmdsU2hhZGVyLmZyYWdtZW50U2hhZGVyO3ZhciBzaGFkb3dNYXBUeXBlRGVmaW5lPSdTSEFET1dNQVBfVFlQRV9CQVNJQyc7aWYocGFyYW1ldGVycy5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU2hhZG93TWFwKXtzaGFkb3dNYXBUeXBlRGVmaW5lPSdTSEFET1dNQVBfVFlQRV9QQ0YnO31lbHNlIGlmKHBhcmFtZXRlcnMuc2hhZG93TWFwVHlwZT09PVRIUkVFLlBDRlNvZnRTaGFkb3dNYXApe3NoYWRvd01hcFR5cGVEZWZpbmU9J1NIQURPV01BUF9UWVBFX1BDRl9TT0ZUJzt9dmFyIGVudk1hcFR5cGVEZWZpbmU9J0VOVk1BUF9UWVBFX0NVQkUnO3ZhciBlbnZNYXBNb2RlRGVmaW5lPSdFTlZNQVBfTU9ERV9SRUZMRUNUSU9OJzt2YXIgZW52TWFwQmxlbmRpbmdEZWZpbmU9J0VOVk1BUF9CTEVORElOR19NVUxUSVBMWSc7aWYocGFyYW1ldGVycy5lbnZNYXApe3N3aXRjaChtYXRlcmlhbC5lbnZNYXAubWFwcGluZyl7Y2FzZSBUSFJFRS5DdWJlUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc6ZW52TWFwVHlwZURlZmluZT0nRU5WTUFQX1RZUEVfQ1VCRSc7YnJlYWs7Y2FzZSBUSFJFRS5DdWJlVVZSZWZsZWN0aW9uTWFwcGluZzpjYXNlIFRIUkVFLkN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nOmVudk1hcFR5cGVEZWZpbmU9J0VOVk1BUF9UWVBFX0NVQkVfVVYnO2JyZWFrO2Nhc2UgVEhSRUUuRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZzplbnZNYXBUeXBlRGVmaW5lPSdFTlZNQVBfVFlQRV9FUVVJUkVDJzticmVhaztjYXNlIFRIUkVFLlNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOmVudk1hcFR5cGVEZWZpbmU9J0VOVk1BUF9UWVBFX1NQSEVSRSc7YnJlYWs7fXN3aXRjaChtYXRlcmlhbC5lbnZNYXAubWFwcGluZyl7Y2FzZSBUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZzplbnZNYXBNb2RlRGVmaW5lPSdFTlZNQVBfTU9ERV9SRUZSQUNUSU9OJzticmVhazt9c3dpdGNoKG1hdGVyaWFsLmNvbWJpbmUpe2Nhc2UgVEhSRUUuTXVsdGlwbHlPcGVyYXRpb246ZW52TWFwQmxlbmRpbmdEZWZpbmU9J0VOVk1BUF9CTEVORElOR19NVUxUSVBMWSc7YnJlYWs7Y2FzZSBUSFJFRS5NaXhPcGVyYXRpb246ZW52TWFwQmxlbmRpbmdEZWZpbmU9J0VOVk1BUF9CTEVORElOR19NSVgnO2JyZWFrO2Nhc2UgVEhSRUUuQWRkT3BlcmF0aW9uOmVudk1hcEJsZW5kaW5nRGVmaW5lPSdFTlZNQVBfQkxFTkRJTkdfQUREJzticmVhazt9fXZhciBnYW1tYUZhY3RvckRlZmluZT1yZW5kZXJlci5nYW1tYUZhY3Rvcj4wP3JlbmRlcmVyLmdhbW1hRmFjdG9yOjEuMDsvLyBjb25zb2xlLmxvZyggJ2J1aWxkaW5nIG5ldyBwcm9ncmFtICcgKTtcbi8vXG52YXIgY3VzdG9tRXh0ZW5zaW9ucz1nZW5lcmF0ZUV4dGVuc2lvbnMoZXh0ZW5zaW9ucyxwYXJhbWV0ZXJzLHJlbmRlcmVyLmV4dGVuc2lvbnMpO3ZhciBjdXN0b21EZWZpbmVzPWdlbmVyYXRlRGVmaW5lcyhkZWZpbmVzKTsvL1xudmFyIHByb2dyYW09Z2wuY3JlYXRlUHJvZ3JhbSgpO3ZhciBwcmVmaXhWZXJ0ZXgscHJlZml4RnJhZ21lbnQ7aWYobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbCl7cHJlZml4VmVydGV4PScnO3ByZWZpeEZyYWdtZW50PScnO31lbHNle3ByZWZpeFZlcnRleD1bJ3ByZWNpc2lvbiAnK3BhcmFtZXRlcnMucHJlY2lzaW9uKycgZmxvYXQ7JywncHJlY2lzaW9uICcrcGFyYW1ldGVycy5wcmVjaXNpb24rJyBpbnQ7JywnI2RlZmluZSBTSEFERVJfTkFNRSAnK21hdGVyaWFsLl9fd2ViZ2xTaGFkZXIubmFtZSxjdXN0b21EZWZpbmVzLHBhcmFtZXRlcnMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz8nI2RlZmluZSBWRVJURVhfVEVYVFVSRVMnOicnLCcjZGVmaW5lIEdBTU1BX0ZBQ1RPUiAnK2dhbW1hRmFjdG9yRGVmaW5lLCcjZGVmaW5lIE1BWF9CT05FUyAnK3BhcmFtZXRlcnMubWF4Qm9uZXMscGFyYW1ldGVycy5tYXA/JyNkZWZpbmUgVVNFX01BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgVVNFX0VOVk1BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgJytlbnZNYXBNb2RlRGVmaW5lOicnLHBhcmFtZXRlcnMubGlnaHRNYXA/JyNkZWZpbmUgVVNFX0xJR0hUTUFQJzonJyxwYXJhbWV0ZXJzLmFvTWFwPycjZGVmaW5lIFVTRV9BT01BUCc6JycscGFyYW1ldGVycy5lbWlzc2l2ZU1hcD8nI2RlZmluZSBVU0VfRU1JU1NJVkVNQVAnOicnLHBhcmFtZXRlcnMuYnVtcE1hcD8nI2RlZmluZSBVU0VfQlVNUE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXA/JyNkZWZpbmUgVVNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5kaXNwbGFjZW1lbnRNYXAmJnBhcmFtZXRlcnMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz8nI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQJzonJyxwYXJhbWV0ZXJzLnNwZWN1bGFyTWFwPycjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUCc6JycscGFyYW1ldGVycy5yb3VnaG5lc3NNYXA/JyNkZWZpbmUgVVNFX1JPVUdITkVTU01BUCc6JycscGFyYW1ldGVycy5tZXRhbG5lc3NNYXA/JyNkZWZpbmUgVVNFX01FVEFMTkVTU01BUCc6JycscGFyYW1ldGVycy5hbHBoYU1hcD8nI2RlZmluZSBVU0VfQUxQSEFNQVAnOicnLHBhcmFtZXRlcnMudmVydGV4Q29sb3JzPycjZGVmaW5lIFVTRV9DT0xPUic6JycscGFyYW1ldGVycy5mbGF0U2hhZGluZz8nI2RlZmluZSBGTEFUX1NIQURFRCc6JycscGFyYW1ldGVycy5za2lubmluZz8nI2RlZmluZSBVU0VfU0tJTk5JTkcnOicnLHBhcmFtZXRlcnMudXNlVmVydGV4VGV4dHVyZT8nI2RlZmluZSBCT05FX1RFWFRVUkUnOicnLHBhcmFtZXRlcnMubW9ycGhUYXJnZXRzPycjZGVmaW5lIFVTRV9NT1JQSFRBUkdFVFMnOicnLHBhcmFtZXRlcnMubW9ycGhOb3JtYWxzJiZwYXJhbWV0ZXJzLmZsYXRTaGFkaW5nPT09ZmFsc2U/JyNkZWZpbmUgVVNFX01PUlBITk9STUFMUyc6JycscGFyYW1ldGVycy5kb3VibGVTaWRlZD8nI2RlZmluZSBET1VCTEVfU0lERUQnOicnLHBhcmFtZXRlcnMuZmxpcFNpZGVkPycjZGVmaW5lIEZMSVBfU0lERUQnOicnLCcjZGVmaW5lIE5VTV9DTElQUElOR19QTEFORVMgJytwYXJhbWV0ZXJzLm51bUNsaXBwaW5nUGxhbmVzLHBhcmFtZXRlcnMuc2hhZG93TWFwRW5hYmxlZD8nI2RlZmluZSBVU0VfU0hBRE9XTUFQJzonJyxwYXJhbWV0ZXJzLnNoYWRvd01hcEVuYWJsZWQ/JyNkZWZpbmUgJytzaGFkb3dNYXBUeXBlRGVmaW5lOicnLHBhcmFtZXRlcnMuc2l6ZUF0dGVudWF0aW9uPycjZGVmaW5lIFVTRV9TSVpFQVRURU5VQVRJT04nOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj8nI2RlZmluZSBVU0VfTE9HREVQVEhCVUYnOicnLHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmcmVuZGVyZXIuZXh0ZW5zaW9ucy5nZXQoJ0VYVF9mcmFnX2RlcHRoJyk/JyNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVCc6JycsJ3VuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDsnLCd1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4OycsJ3VuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4OycsJ3VuaWZvcm0gbWF0NCB2aWV3TWF0cml4OycsJ3VuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7JywndW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uOycsJ2F0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uOycsJ2F0dHJpYnV0ZSB2ZWMzIG5vcm1hbDsnLCdhdHRyaWJ1dGUgdmVjMiB1djsnLCcjaWZkZWYgVVNFX0NPTE9SJywnXHRhdHRyaWJ1dGUgdmVjMyBjb2xvcjsnLCcjZW5kaWYnLCcjaWZkZWYgVVNFX01PUlBIVEFSR0VUUycsJ1x0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwOycsJ1x0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxOycsJ1x0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyOycsJ1x0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzOycsJ1x0I2lmZGVmIFVTRV9NT1JQSE5PUk1BTFMnLCdcdFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwOycsJ1x0XHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDE7JywnXHRcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMjsnLCdcdFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzOycsJ1x0I2Vsc2UnLCdcdFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0OycsJ1x0XHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDU7JywnXHRcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjsnLCdcdFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3OycsJ1x0I2VuZGlmJywnI2VuZGlmJywnI2lmZGVmIFVTRV9TS0lOTklORycsJ1x0YXR0cmlidXRlIHZlYzQgc2tpbkluZGV4OycsJ1x0YXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDsnLCcjZW5kaWYnLCdcXG4nXS5maWx0ZXIoZmlsdGVyRW1wdHlMaW5lKS5qb2luKCdcXG4nKTtwcmVmaXhGcmFnbWVudD1bY3VzdG9tRXh0ZW5zaW9ucywncHJlY2lzaW9uICcrcGFyYW1ldGVycy5wcmVjaXNpb24rJyBmbG9hdDsnLCdwcmVjaXNpb24gJytwYXJhbWV0ZXJzLnByZWNpc2lvbisnIGludDsnLCcjZGVmaW5lIFNIQURFUl9OQU1FICcrbWF0ZXJpYWwuX193ZWJnbFNoYWRlci5uYW1lLGN1c3RvbURlZmluZXMscGFyYW1ldGVycy5hbHBoYVRlc3Q/JyNkZWZpbmUgQUxQSEFURVNUICcrcGFyYW1ldGVycy5hbHBoYVRlc3Q6JycsJyNkZWZpbmUgR0FNTUFfRkFDVE9SICcrZ2FtbWFGYWN0b3JEZWZpbmUscGFyYW1ldGVycy51c2VGb2cmJnBhcmFtZXRlcnMuZm9nPycjZGVmaW5lIFVTRV9GT0cnOicnLHBhcmFtZXRlcnMudXNlRm9nJiZwYXJhbWV0ZXJzLmZvZ0V4cD8nI2RlZmluZSBGT0dfRVhQMic6JycscGFyYW1ldGVycy5tYXA/JyNkZWZpbmUgVVNFX01BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgVVNFX0VOVk1BUCc6JycscGFyYW1ldGVycy5lbnZNYXA/JyNkZWZpbmUgJytlbnZNYXBUeXBlRGVmaW5lOicnLHBhcmFtZXRlcnMuZW52TWFwPycjZGVmaW5lICcrZW52TWFwTW9kZURlZmluZTonJyxwYXJhbWV0ZXJzLmVudk1hcD8nI2RlZmluZSAnK2Vudk1hcEJsZW5kaW5nRGVmaW5lOicnLHBhcmFtZXRlcnMubGlnaHRNYXA/JyNkZWZpbmUgVVNFX0xJR0hUTUFQJzonJyxwYXJhbWV0ZXJzLmFvTWFwPycjZGVmaW5lIFVTRV9BT01BUCc6JycscGFyYW1ldGVycy5lbWlzc2l2ZU1hcD8nI2RlZmluZSBVU0VfRU1JU1NJVkVNQVAnOicnLHBhcmFtZXRlcnMuYnVtcE1hcD8nI2RlZmluZSBVU0VfQlVNUE1BUCc6JycscGFyYW1ldGVycy5ub3JtYWxNYXA/JyNkZWZpbmUgVVNFX05PUk1BTE1BUCc6JycscGFyYW1ldGVycy5zcGVjdWxhck1hcD8nI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVAnOicnLHBhcmFtZXRlcnMucm91Z2huZXNzTWFwPycjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVAnOicnLHBhcmFtZXRlcnMubWV0YWxuZXNzTWFwPycjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVAnOicnLHBhcmFtZXRlcnMuYWxwaGFNYXA/JyNkZWZpbmUgVVNFX0FMUEhBTUFQJzonJyxwYXJhbWV0ZXJzLnZlcnRleENvbG9ycz8nI2RlZmluZSBVU0VfQ09MT1InOicnLHBhcmFtZXRlcnMuZmxhdFNoYWRpbmc/JyNkZWZpbmUgRkxBVF9TSEFERUQnOicnLHBhcmFtZXRlcnMuZG91YmxlU2lkZWQ/JyNkZWZpbmUgRE9VQkxFX1NJREVEJzonJyxwYXJhbWV0ZXJzLmZsaXBTaWRlZD8nI2RlZmluZSBGTElQX1NJREVEJzonJywnI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTICcrcGFyYW1ldGVycy5udW1DbGlwcGluZ1BsYW5lcyxwYXJhbWV0ZXJzLnNoYWRvd01hcEVuYWJsZWQ/JyNkZWZpbmUgVVNFX1NIQURPV01BUCc6JycscGFyYW1ldGVycy5zaGFkb3dNYXBFbmFibGVkPycjZGVmaW5lICcrc2hhZG93TWFwVHlwZURlZmluZTonJyxwYXJhbWV0ZXJzLnByZW11bHRpcGxpZWRBbHBoYT9cIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOicnLHBhcmFtZXRlcnMucGh5c2ljYWxseUNvcnJlY3RMaWdodHM/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcIjonJyxwYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/JyNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGJzonJyxwYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJnJlbmRlcmVyLmV4dGVuc2lvbnMuZ2V0KCdFWFRfZnJhZ19kZXB0aCcpPycjZGVmaW5lIFVTRV9MT0dERVBUSEJVRl9FWFQnOicnLHBhcmFtZXRlcnMuZW52TWFwJiZyZW5kZXJlci5leHRlbnNpb25zLmdldCgnRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCcpPycjZGVmaW5lIFRFWFRVUkVfTE9EX0VYVCc6JycsJ3VuaWZvcm0gbWF0NCB2aWV3TWF0cml4OycsJ3VuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjsnLHBhcmFtZXRlcnMudG9uZU1hcHBpbmchPT1USFJFRS5Ob1RvbmVNYXBwaW5nP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjonJyxwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nIT09VEhSRUUuTm9Ub25lTWFwcGluZz9USFJFRS5TaGFkZXJDaHVua1sndG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudCddOicnLC8vIHRoaXMgY29kZSBpcyByZXF1aXJlZCBoZXJlIGJlY2F1c2UgaXQgaXMgdXNlZCBieSB0aGUgdG9uZU1hcHBpbmcoKSBmdW5jdGlvbiBkZWZpbmVkIGJlbG93XG5wYXJhbWV0ZXJzLnRvbmVNYXBwaW5nIT09VEhSRUUuTm9Ub25lTWFwcGluZz9nZXRUb25lTWFwcGluZ0Z1bmN0aW9uKFwidG9uZU1hcHBpbmdcIixwYXJhbWV0ZXJzLnRvbmVNYXBwaW5nKTonJyxwYXJhbWV0ZXJzLm91dHB1dEVuY29kaW5nfHxwYXJhbWV0ZXJzLm1hcEVuY29kaW5nfHxwYXJhbWV0ZXJzLmVudk1hcEVuY29kaW5nfHxwYXJhbWV0ZXJzLmVtaXNzaXZlTWFwRW5jb2Rpbmc/VEhSRUUuU2hhZGVyQ2h1bmtbJ2VuY29kaW5nc19wYXJzX2ZyYWdtZW50J106JycsLy8gdGhpcyBjb2RlIGlzIHJlcXVpcmVkIGhlcmUgYmVjYXVzZSBpdCBpcyB1c2VkIGJ5IHRoZSB2YXJpb3VzIGVuY29kaW5nL2RlY29kaW5nIGZ1bmN0aW9uIGRlZmluZWQgYmVsb3dcbnBhcmFtZXRlcnMubWFwRW5jb2Rpbmc/Z2V0VGV4ZWxEZWNvZGluZ0Z1bmN0aW9uKCdtYXBUZXhlbFRvTGluZWFyJyxwYXJhbWV0ZXJzLm1hcEVuY29kaW5nKTonJyxwYXJhbWV0ZXJzLmVudk1hcEVuY29kaW5nP2dldFRleGVsRGVjb2RpbmdGdW5jdGlvbignZW52TWFwVGV4ZWxUb0xpbmVhcicscGFyYW1ldGVycy5lbnZNYXBFbmNvZGluZyk6JycscGFyYW1ldGVycy5lbWlzc2l2ZU1hcEVuY29kaW5nP2dldFRleGVsRGVjb2RpbmdGdW5jdGlvbignZW1pc3NpdmVNYXBUZXhlbFRvTGluZWFyJyxwYXJhbWV0ZXJzLmVtaXNzaXZlTWFwRW5jb2RpbmcpOicnLHBhcmFtZXRlcnMub3V0cHV0RW5jb2Rpbmc/Z2V0VGV4ZWxFbmNvZGluZ0Z1bmN0aW9uKFwibGluZWFyVG9PdXRwdXRUZXhlbFwiLHBhcmFtZXRlcnMub3V0cHV0RW5jb2RpbmcpOicnLHBhcmFtZXRlcnMuZGVwdGhQYWNraW5nP1wiI2RlZmluZSBERVBUSF9QQUNLSU5HIFwiK21hdGVyaWFsLmRlcHRoUGFja2luZzonJywnXFxuJ10uZmlsdGVyKGZpbHRlckVtcHR5TGluZSkuam9pbignXFxuJyk7fXZlcnRleFNoYWRlcj1wYXJzZUluY2x1ZGVzKHZlcnRleFNoYWRlcixwYXJhbWV0ZXJzKTt2ZXJ0ZXhTaGFkZXI9cmVwbGFjZUxpZ2h0TnVtcyh2ZXJ0ZXhTaGFkZXIscGFyYW1ldGVycyk7ZnJhZ21lbnRTaGFkZXI9cGFyc2VJbmNsdWRlcyhmcmFnbWVudFNoYWRlcixwYXJhbWV0ZXJzKTtmcmFnbWVudFNoYWRlcj1yZXBsYWNlTGlnaHROdW1zKGZyYWdtZW50U2hhZGVyLHBhcmFtZXRlcnMpO2lmKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWw9PT1mYWxzZSl7dmVydGV4U2hhZGVyPXVucm9sbExvb3BzKHZlcnRleFNoYWRlcik7ZnJhZ21lbnRTaGFkZXI9dW5yb2xsTG9vcHMoZnJhZ21lbnRTaGFkZXIpO312YXIgdmVydGV4R2xzbD1wcmVmaXhWZXJ0ZXgrdmVydGV4U2hhZGVyO3ZhciBmcmFnbWVudEdsc2w9cHJlZml4RnJhZ21lbnQrZnJhZ21lbnRTaGFkZXI7Ly8gY29uc29sZS5sb2coICcqVkVSVEVYKicsIHZlcnRleEdsc2wgKTtcbi8vIGNvbnNvbGUubG9nKCAnKkZSQUdNRU5UKicsIGZyYWdtZW50R2xzbCApO1xudmFyIGdsVmVydGV4U2hhZGVyPVRIUkVFLldlYkdMU2hhZGVyKGdsLGdsLlZFUlRFWF9TSEFERVIsdmVydGV4R2xzbCk7dmFyIGdsRnJhZ21lbnRTaGFkZXI9VEhSRUUuV2ViR0xTaGFkZXIoZ2wsZ2wuRlJBR01FTlRfU0hBREVSLGZyYWdtZW50R2xzbCk7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sZ2xWZXJ0ZXhTaGFkZXIpO2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLGdsRnJhZ21lbnRTaGFkZXIpOy8vIEZvcmNlIGEgcGFydGljdWxhciBhdHRyaWJ1dGUgdG8gaW5kZXggMC5cbmlmKG1hdGVyaWFsLmluZGV4MEF0dHJpYnV0ZU5hbWUhPT11bmRlZmluZWQpe2dsLmJpbmRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLDAsbWF0ZXJpYWwuaW5kZXgwQXR0cmlidXRlTmFtZSk7fWVsc2UgaWYocGFyYW1ldGVycy5tb3JwaFRhcmdldHM9PT10cnVlKXsvLyBwcm9ncmFtcyB3aXRoIG1vcnBoVGFyZ2V0cyBkaXNwbGFjZSBwb3NpdGlvbiBvdXQgb2YgYXR0cmlidXRlIDBcbmdsLmJpbmRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLDAsJ3Bvc2l0aW9uJyk7fWdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO3ZhciBwcm9ncmFtTG9nPWdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO3ZhciB2ZXJ0ZXhMb2c9Z2wuZ2V0U2hhZGVySW5mb0xvZyhnbFZlcnRleFNoYWRlcik7dmFyIGZyYWdtZW50TG9nPWdsLmdldFNoYWRlckluZm9Mb2coZ2xGcmFnbWVudFNoYWRlcik7dmFyIHJ1bm5hYmxlPXRydWU7dmFyIGhhdmVEaWFnbm9zdGljcz10cnVlOy8vIGNvbnNvbGUubG9nKCAnKipWRVJURVgqKicsIGdsLmdldEV4dGVuc2lvbiggJ1dFQkdMX2RlYnVnX3NoYWRlcnMnICkuZ2V0VHJhbnNsYXRlZFNoYWRlclNvdXJjZSggZ2xWZXJ0ZXhTaGFkZXIgKSApO1xuLy8gY29uc29sZS5sb2coICcqKkZSQUdNRU5UKionLCBnbC5nZXRFeHRlbnNpb24oICdXRUJHTF9kZWJ1Z19zaGFkZXJzJyApLmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UoIGdsRnJhZ21lbnRTaGFkZXIgKSApO1xuaWYoZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLGdsLkxJTktfU1RBVFVTKT09PWZhbHNlKXtydW5uYWJsZT1mYWxzZTtjb25zb2xlLmVycm9yKCdUSFJFRS5XZWJHTFByb2dyYW06IHNoYWRlciBlcnJvcjogJyxnbC5nZXRFcnJvcigpLCdnbC5WQUxJREFURV9TVEFUVVMnLGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSxnbC5WQUxJREFURV9TVEFUVVMpLCdnbC5nZXRQcm9ncmFtSW5mb0xvZycscHJvZ3JhbUxvZyx2ZXJ0ZXhMb2csZnJhZ21lbnRMb2cpO31lbHNlIGlmKHByb2dyYW1Mb2chPT0nJyl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFByb2dyYW06IGdsLmdldFByb2dyYW1JbmZvTG9nKCknLHByb2dyYW1Mb2cpO31lbHNlIGlmKHZlcnRleExvZz09PScnfHxmcmFnbWVudExvZz09PScnKXtoYXZlRGlhZ25vc3RpY3M9ZmFsc2U7fWlmKGhhdmVEaWFnbm9zdGljcyl7dGhpcy5kaWFnbm9zdGljcz17cnVubmFibGU6cnVubmFibGUsbWF0ZXJpYWw6bWF0ZXJpYWwscHJvZ3JhbUxvZzpwcm9ncmFtTG9nLHZlcnRleFNoYWRlcjp7bG9nOnZlcnRleExvZyxwcmVmaXg6cHJlZml4VmVydGV4fSxmcmFnbWVudFNoYWRlcjp7bG9nOmZyYWdtZW50TG9nLHByZWZpeDpwcmVmaXhGcmFnbWVudH19O30vLyBjbGVhbiB1cFxuZ2wuZGVsZXRlU2hhZGVyKGdsVmVydGV4U2hhZGVyKTtnbC5kZWxldGVTaGFkZXIoZ2xGcmFnbWVudFNoYWRlcik7Ly8gc2V0IHVwIGNhY2hpbmcgZm9yIHVuaWZvcm0gbG9jYXRpb25zXG52YXIgY2FjaGVkVW5pZm9ybXM7dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2lmKGNhY2hlZFVuaWZvcm1zPT09dW5kZWZpbmVkKXtjYWNoZWRVbmlmb3Jtcz1uZXcgVEhSRUUuV2ViR0xVbmlmb3JtcyhnbCxwcm9ncmFtLHJlbmRlcmVyKTt9cmV0dXJuIGNhY2hlZFVuaWZvcm1zO307Ly8gc2V0IHVwIGNhY2hpbmcgZm9yIGF0dHJpYnV0ZSBsb2NhdGlvbnNcbnZhciBjYWNoZWRBdHRyaWJ1dGVzO3RoaXMuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe2lmKGNhY2hlZEF0dHJpYnV0ZXM9PT11bmRlZmluZWQpe2NhY2hlZEF0dHJpYnV0ZXM9ZmV0Y2hBdHRyaWJ1dGVMb2NhdGlvbnMoZ2wscHJvZ3JhbSk7fXJldHVybiBjYWNoZWRBdHRyaWJ1dGVzO307Ly8gZnJlZSByZXNvdXJjZVxudGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7Z2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTt0aGlzLnByb2dyYW09dW5kZWZpbmVkO307Ly8gREVQUkVDQVRFRFxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dW5pZm9ybXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xQcm9ncmFtOiAudW5pZm9ybXMgaXMgbm93IC5nZXRVbmlmb3JtcygpLicpO3JldHVybiB0aGlzLmdldFVuaWZvcm1zKCk7fX0sYXR0cmlidXRlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFByb2dyYW06IC5hdHRyaWJ1dGVzIGlzIG5vdyAuZ2V0QXR0cmlidXRlcygpLicpO3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZXMoKTt9fX0pOy8vXG50aGlzLmlkPXByb2dyYW1JZENvdW50Kys7dGhpcy5jb2RlPWNvZGU7dGhpcy51c2VkVGltZXM9MTt0aGlzLnByb2dyYW09cHJvZ3JhbTt0aGlzLnZlcnRleFNoYWRlcj1nbFZlcnRleFNoYWRlcjt0aGlzLmZyYWdtZW50U2hhZGVyPWdsRnJhZ21lbnRTaGFkZXI7cmV0dXJuIHRoaXM7fTt9KCk7Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3dlYmdsL1dlYkdMUHJvZ3JhbXMuanNcblRIUkVFLldlYkdMUHJvZ3JhbXM9ZnVuY3Rpb24ocmVuZGVyZXIsY2FwYWJpbGl0aWVzKXt2YXIgcHJvZ3JhbXM9W107dmFyIHNoYWRlcklEcz17TWVzaERlcHRoTWF0ZXJpYWw6J2RlcHRoJyxNZXNoTm9ybWFsTWF0ZXJpYWw6J25vcm1hbCcsTWVzaEJhc2ljTWF0ZXJpYWw6J2Jhc2ljJyxNZXNoTGFtYmVydE1hdGVyaWFsOidsYW1iZXJ0JyxNZXNoUGhvbmdNYXRlcmlhbDoncGhvbmcnLE1lc2hTdGFuZGFyZE1hdGVyaWFsOidwaHlzaWNhbCcsTWVzaFBoeXNpY2FsTWF0ZXJpYWw6J3BoeXNpY2FsJyxMaW5lQmFzaWNNYXRlcmlhbDonYmFzaWMnLExpbmVEYXNoZWRNYXRlcmlhbDonZGFzaGVkJyxQb2ludHNNYXRlcmlhbDoncG9pbnRzJ307dmFyIHBhcmFtZXRlck5hbWVzPVtcInByZWNpc2lvblwiLFwic3VwcG9ydHNWZXJ0ZXhUZXh0dXJlc1wiLFwibWFwXCIsXCJtYXBFbmNvZGluZ1wiLFwiZW52TWFwXCIsXCJlbnZNYXBNb2RlXCIsXCJlbnZNYXBFbmNvZGluZ1wiLFwibGlnaHRNYXBcIixcImFvTWFwXCIsXCJlbWlzc2l2ZU1hcFwiLFwiZW1pc3NpdmVNYXBFbmNvZGluZ1wiLFwiYnVtcE1hcFwiLFwibm9ybWFsTWFwXCIsXCJkaXNwbGFjZW1lbnRNYXBcIixcInNwZWN1bGFyTWFwXCIsXCJyb3VnaG5lc3NNYXBcIixcIm1ldGFsbmVzc01hcFwiLFwiYWxwaGFNYXBcIixcImNvbWJpbmVcIixcInZlcnRleENvbG9yc1wiLFwiZm9nXCIsXCJ1c2VGb2dcIixcImZvZ0V4cFwiLFwiZmxhdFNoYWRpbmdcIixcInNpemVBdHRlbnVhdGlvblwiLFwibG9nYXJpdGhtaWNEZXB0aEJ1ZmZlclwiLFwic2tpbm5pbmdcIixcIm1heEJvbmVzXCIsXCJ1c2VWZXJ0ZXhUZXh0dXJlXCIsXCJtb3JwaFRhcmdldHNcIixcIm1vcnBoTm9ybWFsc1wiLFwibWF4TW9ycGhUYXJnZXRzXCIsXCJtYXhNb3JwaE5vcm1hbHNcIixcInByZW11bHRpcGxpZWRBbHBoYVwiLFwibnVtRGlyTGlnaHRzXCIsXCJudW1Qb2ludExpZ2h0c1wiLFwibnVtU3BvdExpZ2h0c1wiLFwibnVtSGVtaUxpZ2h0c1wiLFwic2hhZG93TWFwRW5hYmxlZFwiLFwic2hhZG93TWFwVHlwZVwiLFwidG9uZU1hcHBpbmdcIiwncGh5c2ljYWxseUNvcnJlY3RMaWdodHMnLFwiYWxwaGFUZXN0XCIsXCJkb3VibGVTaWRlZFwiLFwiZmxpcFNpZGVkXCIsXCJudW1DbGlwcGluZ1BsYW5lc1wiLFwiZGVwdGhQYWNraW5nXCJdO2Z1bmN0aW9uIGFsbG9jYXRlQm9uZXMob2JqZWN0KXtpZihjYXBhYmlsaXRpZXMuZmxvYXRWZXJ0ZXhUZXh0dXJlcyYmb2JqZWN0JiZvYmplY3Quc2tlbGV0b24mJm9iamVjdC5za2VsZXRvbi51c2VWZXJ0ZXhUZXh0dXJlKXtyZXR1cm4gMTAyNDt9ZWxzZXsvLyBkZWZhdWx0IGZvciB3aGVuIG9iamVjdCBpcyBub3Qgc3BlY2lmaWVkXG4vLyAoIGZvciBleGFtcGxlIHdoZW4gcHJlYnVpbGRpbmcgc2hhZGVyIHRvIGJlIHVzZWQgd2l0aCBtdWx0aXBsZSBvYmplY3RzIClcbi8vXG4vLyAgLSBsZWF2ZSBzb21lIGV4dHJhIHNwYWNlIGZvciBvdGhlciB1bmlmb3Jtc1xuLy8gIC0gbGltaXQgaGVyZSBpcyBBTkdMRSdzIDI1NCBtYXggdW5pZm9ybSB2ZWN0b3JzXG4vLyAgICAodXAgdG8gNTQgc2hvdWxkIGJlIHNhZmUpXG52YXIgblZlcnRleFVuaWZvcm1zPWNhcGFiaWxpdGllcy5tYXhWZXJ0ZXhVbmlmb3Jtczt2YXIgblZlcnRleE1hdHJpY2VzPU1hdGguZmxvb3IoKG5WZXJ0ZXhVbmlmb3Jtcy0yMCkvNCk7dmFyIG1heEJvbmVzPW5WZXJ0ZXhNYXRyaWNlcztpZihvYmplY3QhPT11bmRlZmluZWQmJm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoKXttYXhCb25lcz1NYXRoLm1pbihvYmplY3Quc2tlbGV0b24uYm9uZXMubGVuZ3RoLG1heEJvbmVzKTtpZihtYXhCb25lczxvYmplY3Quc2tlbGV0b24uYm9uZXMubGVuZ3RoKXtjb25zb2xlLndhcm4oJ1dlYkdMUmVuZGVyZXI6IHRvbyBtYW55IGJvbmVzIC0gJytvYmplY3Quc2tlbGV0b24uYm9uZXMubGVuZ3RoKycsIHRoaXMgR1BVIHN1cHBvcnRzIGp1c3QgJyttYXhCb25lcysnICh0cnkgT3BlbkdMIGluc3RlYWQgb2YgQU5HTEUpJyk7fX1yZXR1cm4gbWF4Qm9uZXM7fX1mdW5jdGlvbiBnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKG1hcCxnYW1tYU92ZXJyaWRlTGluZWFyKXt2YXIgZW5jb2Rpbmc7aWYoIW1hcCl7ZW5jb2Rpbmc9VEhSRUUuTGluZWFyRW5jb2Rpbmc7fWVsc2UgaWYobWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSl7ZW5jb2Rpbmc9bWFwLmVuY29kaW5nO31lbHNlIGlmKG1hcCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW1zLmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXA6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpO2VuY29kaW5nPW1hcC50ZXh0dXJlLmVuY29kaW5nO30vLyBhZGQgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIFdlYkdMUmVuZGVyZXIuZ2FtbWFJbnB1dC9nYW1tYU91dHB1dCBwYXJhbWV0ZXIsIHNob3VsZCBwcm9iYWJseSBiZSByZW1vdmVkIGF0IHNvbWUgcG9pbnQuXG5pZihlbmNvZGluZz09PVRIUkVFLkxpbmVhckVuY29kaW5nJiZnYW1tYU92ZXJyaWRlTGluZWFyKXtlbmNvZGluZz1USFJFRS5HYW1tYUVuY29kaW5nO31yZXR1cm4gZW5jb2Rpbmc7fXRoaXMuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbihtYXRlcmlhbCxsaWdodHMsZm9nLG5DbGlwUGxhbmVzLG9iamVjdCl7dmFyIHNoYWRlcklEPXNoYWRlcklEc1ttYXRlcmlhbC50eXBlXTsvLyBoZXVyaXN0aWNzIHRvIGNyZWF0ZSBzaGFkZXIgcGFyYW1ldGVycyBhY2NvcmRpbmcgdG8gbGlnaHRzIGluIHRoZSBzY2VuZVxuLy8gKG5vdCB0byBibG93IG92ZXIgbWF4TGlnaHRzIGJ1ZGdldClcbnZhciBtYXhCb25lcz1hbGxvY2F0ZUJvbmVzKG9iamVjdCk7dmFyIHByZWNpc2lvbj1yZW5kZXJlci5nZXRQcmVjaXNpb24oKTtpZihtYXRlcmlhbC5wcmVjaXNpb24hPT1udWxsKXtwcmVjaXNpb249Y2FwYWJpbGl0aWVzLmdldE1heFByZWNpc2lvbihtYXRlcmlhbC5wcmVjaXNpb24pO2lmKHByZWNpc2lvbiE9PW1hdGVyaWFsLnByZWNpc2lvbil7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFByb2dyYW0uZ2V0UGFyYW1ldGVyczonLG1hdGVyaWFsLnByZWNpc2lvbiwnbm90IHN1cHBvcnRlZCwgdXNpbmcnLHByZWNpc2lvbiwnaW5zdGVhZC4nKTt9fXZhciBjdXJyZW50UmVuZGVyVGFyZ2V0PXJlbmRlcmVyLmdldEN1cnJlbnRSZW5kZXJUYXJnZXQoKTt2YXIgcGFyYW1ldGVycz17c2hhZGVySUQ6c2hhZGVySUQscHJlY2lzaW9uOnByZWNpc2lvbixzdXBwb3J0c1ZlcnRleFRleHR1cmVzOmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKCFjdXJyZW50UmVuZGVyVGFyZ2V0P251bGw6Y3VycmVudFJlbmRlclRhcmdldC50ZXh0dXJlLHJlbmRlcmVyLmdhbW1hT3V0cHV0KSxtYXA6ISFtYXRlcmlhbC5tYXAsbWFwRW5jb2Rpbmc6Z2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcChtYXRlcmlhbC5tYXAscmVuZGVyZXIuZ2FtbWFJbnB1dCksZW52TWFwOiEhbWF0ZXJpYWwuZW52TWFwLGVudk1hcE1vZGU6bWF0ZXJpYWwuZW52TWFwJiZtYXRlcmlhbC5lbnZNYXAubWFwcGluZyxlbnZNYXBFbmNvZGluZzpnZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwKG1hdGVyaWFsLmVudk1hcCxyZW5kZXJlci5nYW1tYUlucHV0KSxlbnZNYXBDdWJlVVY6ISFtYXRlcmlhbC5lbnZNYXAmJihtYXRlcmlhbC5lbnZNYXAubWFwcGluZz09PVRIUkVFLkN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nfHxtYXRlcmlhbC5lbnZNYXAubWFwcGluZz09PVRIUkVFLkN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nKSxsaWdodE1hcDohIW1hdGVyaWFsLmxpZ2h0TWFwLGFvTWFwOiEhbWF0ZXJpYWwuYW9NYXAsZW1pc3NpdmVNYXA6ISFtYXRlcmlhbC5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXAobWF0ZXJpYWwuZW1pc3NpdmVNYXAscmVuZGVyZXIuZ2FtbWFJbnB1dCksYnVtcE1hcDohIW1hdGVyaWFsLmJ1bXBNYXAsbm9ybWFsTWFwOiEhbWF0ZXJpYWwubm9ybWFsTWFwLGRpc3BsYWNlbWVudE1hcDohIW1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCxyb3VnaG5lc3NNYXA6ISFtYXRlcmlhbC5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhbWF0ZXJpYWwubWV0YWxuZXNzTWFwLHNwZWN1bGFyTWFwOiEhbWF0ZXJpYWwuc3BlY3VsYXJNYXAsYWxwaGFNYXA6ISFtYXRlcmlhbC5hbHBoYU1hcCxjb21iaW5lOm1hdGVyaWFsLmNvbWJpbmUsdmVydGV4Q29sb3JzOm1hdGVyaWFsLnZlcnRleENvbG9ycyxmb2c6Zm9nLHVzZUZvZzptYXRlcmlhbC5mb2csZm9nRXhwOmZvZyBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDIsZmxhdFNoYWRpbmc6bWF0ZXJpYWwuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjptYXRlcmlhbC5zaXplQXR0ZW51YXRpb24sbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjpjYXBhYmlsaXRpZXMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixza2lubmluZzptYXRlcmlhbC5za2lubmluZyxtYXhCb25lczptYXhCb25lcyx1c2VWZXJ0ZXhUZXh0dXJlOmNhcGFiaWxpdGllcy5mbG9hdFZlcnRleFRleHR1cmVzJiZvYmplY3QmJm9iamVjdC5za2VsZXRvbiYmb2JqZWN0LnNrZWxldG9uLnVzZVZlcnRleFRleHR1cmUsbW9ycGhUYXJnZXRzOm1hdGVyaWFsLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6bWF0ZXJpYWwubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czpyZW5kZXJlci5tYXhNb3JwaFRhcmdldHMsbWF4TW9ycGhOb3JtYWxzOnJlbmRlcmVyLm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6bGlnaHRzLmRpcmVjdGlvbmFsLmxlbmd0aCxudW1Qb2ludExpZ2h0czpsaWdodHMucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6bGlnaHRzLnNwb3QubGVuZ3RoLG51bUhlbWlMaWdodHM6bGlnaHRzLmhlbWkubGVuZ3RoLG51bUNsaXBwaW5nUGxhbmVzOm5DbGlwUGxhbmVzLHNoYWRvd01hcEVuYWJsZWQ6cmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQmJm9iamVjdC5yZWNlaXZlU2hhZG93JiZsaWdodHMuc2hhZG93cy5sZW5ndGg+MCxzaGFkb3dNYXBUeXBlOnJlbmRlcmVyLnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOnJlbmRlcmVyLnRvbmVNYXBwaW5nLHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzOnJlbmRlcmVyLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzLHByZW11bHRpcGxpZWRBbHBoYTptYXRlcmlhbC5wcmVtdWx0aXBsaWVkQWxwaGEsYWxwaGFUZXN0Om1hdGVyaWFsLmFscGhhVGVzdCxkb3VibGVTaWRlZDptYXRlcmlhbC5zaWRlPT09VEhSRUUuRG91YmxlU2lkZSxmbGlwU2lkZWQ6bWF0ZXJpYWwuc2lkZT09PVRIUkVFLkJhY2tTaWRlLGRlcHRoUGFja2luZzptYXRlcmlhbC5kZXB0aFBhY2tpbmchPT11bmRlZmluZWQ/bWF0ZXJpYWwuZGVwdGhQYWNraW5nOmZhbHNlfTtyZXR1cm4gcGFyYW1ldGVyczt9O3RoaXMuZ2V0UHJvZ3JhbUNvZGU9ZnVuY3Rpb24obWF0ZXJpYWwscGFyYW1ldGVycyl7dmFyIGFycmF5PVtdO2lmKHBhcmFtZXRlcnMuc2hhZGVySUQpe2FycmF5LnB1c2gocGFyYW1ldGVycy5zaGFkZXJJRCk7fWVsc2V7YXJyYXkucHVzaChtYXRlcmlhbC5mcmFnbWVudFNoYWRlcik7YXJyYXkucHVzaChtYXRlcmlhbC52ZXJ0ZXhTaGFkZXIpO31pZihtYXRlcmlhbC5kZWZpbmVzIT09dW5kZWZpbmVkKXtmb3IodmFyIG5hbWUgaW4gbWF0ZXJpYWwuZGVmaW5lcyl7YXJyYXkucHVzaChuYW1lKTthcnJheS5wdXNoKG1hdGVyaWFsLmRlZmluZXNbbmFtZV0pO319Zm9yKHZhciBpPTA7aTxwYXJhbWV0ZXJOYW1lcy5sZW5ndGg7aSsrKXthcnJheS5wdXNoKHBhcmFtZXRlcnNbcGFyYW1ldGVyTmFtZXNbaV1dKTt9cmV0dXJuIGFycmF5LmpvaW4oKTt9O3RoaXMuYWNxdWlyZVByb2dyYW09ZnVuY3Rpb24obWF0ZXJpYWwscGFyYW1ldGVycyxjb2RlKXt2YXIgcHJvZ3JhbTsvLyBDaGVjayBpZiBjb2RlIGhhcyBiZWVuIGFscmVhZHkgY29tcGlsZWRcbmZvcih2YXIgcD0wLHBsPXByb2dyYW1zLmxlbmd0aDtwPHBsO3ArKyl7dmFyIHByb2dyYW1JbmZvPXByb2dyYW1zW3BdO2lmKHByb2dyYW1JbmZvLmNvZGU9PT1jb2RlKXtwcm9ncmFtPXByb2dyYW1JbmZvOysrcHJvZ3JhbS51c2VkVGltZXM7YnJlYWs7fX1pZihwcm9ncmFtPT09dW5kZWZpbmVkKXtwcm9ncmFtPW5ldyBUSFJFRS5XZWJHTFByb2dyYW0ocmVuZGVyZXIsY29kZSxtYXRlcmlhbCxwYXJhbWV0ZXJzKTtwcm9ncmFtcy5wdXNoKHByb2dyYW0pO31yZXR1cm4gcHJvZ3JhbTt9O3RoaXMucmVsZWFzZVByb2dyYW09ZnVuY3Rpb24ocHJvZ3JhbSl7aWYoLS1wcm9ncmFtLnVzZWRUaW1lcz09PTApey8vIFJlbW92ZSBmcm9tIHVub3JkZXJlZCBzZXRcbnZhciBpPXByb2dyYW1zLmluZGV4T2YocHJvZ3JhbSk7cHJvZ3JhbXNbaV09cHJvZ3JhbXNbcHJvZ3JhbXMubGVuZ3RoLTFdO3Byb2dyYW1zLnBvcCgpOy8vIEZyZWUgV2ViR0wgcmVzb3VyY2VzXG5wcm9ncmFtLmRlc3Ryb3koKTt9fTsvLyBFeHBvc2VkIGZvciByZXNvdXJjZSBtb25pdG9yaW5nICYgZXJyb3IgZmVlZGJhY2sgdmlhIHJlbmRlcmVyLmluZm86XG50aGlzLnByb2dyYW1zPXByb2dyYW1zO307Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3dlYmdsL1dlYkdMUHJvcGVydGllcy5qc1xuLyoqXHJcbiogQGF1dGhvciBmb3JkYWNpb3VzIC8gZm9yZGFjaW91cy5naXRodWIuaW9cclxuKi9USFJFRS5XZWJHTFByb3BlcnRpZXM9ZnVuY3Rpb24oKXt2YXIgcHJvcGVydGllcz17fTt0aGlzLmdldD1mdW5jdGlvbihvYmplY3Qpe3ZhciB1dWlkPW9iamVjdC51dWlkO3ZhciBtYXA9cHJvcGVydGllc1t1dWlkXTtpZihtYXA9PT11bmRlZmluZWQpe21hcD17fTtwcm9wZXJ0aWVzW3V1aWRdPW1hcDt9cmV0dXJuIG1hcDt9O3RoaXMuZGVsZXRlPWZ1bmN0aW9uKG9iamVjdCl7ZGVsZXRlIHByb3BlcnRpZXNbb2JqZWN0LnV1aWRdO307dGhpcy5jbGVhcj1mdW5jdGlvbigpe3Byb3BlcnRpZXM9e307fTt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTFNoYWRlci5qc1xuVEhSRUUuV2ViR0xTaGFkZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhZGRMaW5lTnVtYmVycyhzdHJpbmcpe3ZhciBsaW5lcz1zdHJpbmcuc3BsaXQoJ1xcbicpO2Zvcih2YXIgaT0wO2k8bGluZXMubGVuZ3RoO2krKyl7bGluZXNbaV09aSsxKyc6ICcrbGluZXNbaV07fXJldHVybiBsaW5lcy5qb2luKCdcXG4nKTt9cmV0dXJuIGZ1bmN0aW9uIFdlYkdMU2hhZGVyKGdsLHR5cGUsc3RyaW5nKXt2YXIgc2hhZGVyPWdsLmNyZWF0ZVNoYWRlcih0eXBlKTtnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLHN0cmluZyk7Z2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO2lmKGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsZ2wuQ09NUElMRV9TVEFUVVMpPT09ZmFsc2Upe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLldlYkdMU2hhZGVyOiBTaGFkZXIgY291bGRuXFwndCBjb21waWxlLicpO31pZihnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikhPT0nJyl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFNoYWRlcjogZ2wuZ2V0U2hhZGVySW5mb0xvZygpJyx0eXBlPT09Z2wuVkVSVEVYX1NIQURFUj8ndmVydGV4JzonZnJhZ21lbnQnLGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSxhZGRMaW5lTnVtYmVycyhzdHJpbmcpKTt9Ly8gLS1lbmFibGUtcHJpdmlsZWdlZC13ZWJnbC1leHRlbnNpb25cbi8vIGNvbnNvbGUubG9nKCB0eXBlLCBnbC5nZXRFeHRlbnNpb24oICdXRUJHTF9kZWJ1Z19zaGFkZXJzJyApLmdldFRyYW5zbGF0ZWRTaGFkZXJTb3VyY2UoIHNoYWRlciApICk7XG5yZXR1cm4gc2hhZGVyO307fSgpOy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTFNoYWRvd01hcC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLldlYkdMU2hhZG93TWFwPWZ1bmN0aW9uKF9yZW5kZXJlcixfbGlnaHRzLF9vYmplY3RzKXt2YXIgX2dsPV9yZW5kZXJlci5jb250ZXh0LF9zdGF0ZT1fcmVuZGVyZXIuc3RhdGUsX2ZydXN0dW09bmV3IFRIUkVFLkZydXN0dW0oKSxfcHJvalNjcmVlbk1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCgpLF9saWdodFNoYWRvd3M9X2xpZ2h0cy5zaGFkb3dzLF9zaGFkb3dNYXBTaXplPW5ldyBUSFJFRS5WZWN0b3IyKCksX2xvb2tUYXJnZXQ9bmV3IFRIUkVFLlZlY3RvcjMoKSxfbGlnaHRQb3NpdGlvbldvcmxkPW5ldyBUSFJFRS5WZWN0b3IzKCksX3JlbmRlckxpc3Q9W10sX01vcnBoaW5nRmxhZz0xLF9Ta2lubmluZ0ZsYWc9MixfTnVtYmVyT2ZNYXRlcmlhbFZhcmlhbnRzPShfTW9ycGhpbmdGbGFnfF9Ta2lubmluZ0ZsYWcpKzEsX2RlcHRoTWF0ZXJpYWxzPW5ldyBBcnJheShfTnVtYmVyT2ZNYXRlcmlhbFZhcmlhbnRzKSxfZGlzdGFuY2VNYXRlcmlhbHM9bmV3IEFycmF5KF9OdW1iZXJPZk1hdGVyaWFsVmFyaWFudHMpLF9tYXRlcmlhbENhY2hlPXt9O3ZhciBjdWJlRGlyZWN0aW9ucz1bbmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApLG5ldyBUSFJFRS5WZWN0b3IzKC0xLDAsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSksbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCldO3ZhciBjdWJlVXBzPVtuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSldO3ZhciBjdWJlMkRWaWV3UG9ydHM9W25ldyBUSFJFRS5WZWN0b3I0KCksbmV3IFRIUkVFLlZlY3RvcjQoKSxuZXcgVEhSRUUuVmVjdG9yNCgpLG5ldyBUSFJFRS5WZWN0b3I0KCksbmV3IFRIUkVFLlZlY3RvcjQoKSxuZXcgVEhSRUUuVmVjdG9yNCgpXTsvLyBpbml0XG52YXIgZGVwdGhNYXRlcmlhbFRlbXBsYXRlPW5ldyBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbCgpO2RlcHRoTWF0ZXJpYWxUZW1wbGF0ZS5kZXB0aFBhY2tpbmc9VEhSRUUuUkdCQURlcHRoUGFja2luZztkZXB0aE1hdGVyaWFsVGVtcGxhdGUuY2xpcHBpbmc9dHJ1ZTt2YXIgZGlzdGFuY2VTaGFkZXI9VEhSRUUuU2hhZGVyTGliW1wiZGlzdGFuY2VSR0JBXCJdO3ZhciBkaXN0YW5jZVVuaWZvcm1zPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoZGlzdGFuY2VTaGFkZXIudW5pZm9ybXMpO2Zvcih2YXIgaT0wO2khPT1fTnVtYmVyT2ZNYXRlcmlhbFZhcmlhbnRzOysraSl7dmFyIHVzZU1vcnBoaW5nPShpJl9Nb3JwaGluZ0ZsYWcpIT09MDt2YXIgdXNlU2tpbm5pbmc9KGkmX1NraW5uaW5nRmxhZykhPT0wO3ZhciBkZXB0aE1hdGVyaWFsPWRlcHRoTWF0ZXJpYWxUZW1wbGF0ZS5jbG9uZSgpO2RlcHRoTWF0ZXJpYWwubW9ycGhUYXJnZXRzPXVzZU1vcnBoaW5nO2RlcHRoTWF0ZXJpYWwuc2tpbm5pbmc9dXNlU2tpbm5pbmc7X2RlcHRoTWF0ZXJpYWxzW2ldPWRlcHRoTWF0ZXJpYWw7dmFyIGRpc3RhbmNlTWF0ZXJpYWw9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtkZWZpbmVzOnsnVVNFX1NIQURPV01BUCc6Jyd9LHVuaWZvcm1zOmRpc3RhbmNlVW5pZm9ybXMsdmVydGV4U2hhZGVyOmRpc3RhbmNlU2hhZGVyLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpkaXN0YW5jZVNoYWRlci5mcmFnbWVudFNoYWRlcixtb3JwaFRhcmdldHM6dXNlTW9ycGhpbmcsc2tpbm5pbmc6dXNlU2tpbm5pbmcsY2xpcHBpbmc6dHJ1ZX0pO19kaXN0YW5jZU1hdGVyaWFsc1tpXT1kaXN0YW5jZU1hdGVyaWFsO30vL1xudmFyIHNjb3BlPXRoaXM7dGhpcy5lbmFibGVkPWZhbHNlO3RoaXMuYXV0b1VwZGF0ZT10cnVlO3RoaXMubmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy50eXBlPVRIUkVFLlBDRlNoYWRvd01hcDt0aGlzLnJlbmRlclJldmVyc2VTaWRlZD10cnVlO3RoaXMucmVuZGVyU2luZ2xlU2lkZWQ9dHJ1ZTt0aGlzLnJlbmRlcj1mdW5jdGlvbihzY2VuZSxjYW1lcmEpe2lmKHNjb3BlLmVuYWJsZWQ9PT1mYWxzZSlyZXR1cm47aWYoc2NvcGUuYXV0b1VwZGF0ZT09PWZhbHNlJiZzY29wZS5uZWVkc1VwZGF0ZT09PWZhbHNlKXJldHVybjtpZihfbGlnaHRTaGFkb3dzLmxlbmd0aD09PTApcmV0dXJuOy8vIFNldCBHTCBzdGF0ZSBmb3IgZGVwdGggbWFwLlxuX3N0YXRlLmNsZWFyQ29sb3IoMSwxLDEsMSk7X3N0YXRlLmRpc2FibGUoX2dsLkJMRU5EKTtfc3RhdGUuc2V0RGVwdGhUZXN0KHRydWUpO19zdGF0ZS5zZXRTY2lzc29yVGVzdChmYWxzZSk7Ly8gcmVuZGVyIGRlcHRoIG1hcFxudmFyIGZhY2VDb3VudCxpc1BvaW50TGlnaHQ7Zm9yKHZhciBpPTAsaWw9X2xpZ2h0U2hhZG93cy5sZW5ndGg7aTxpbDtpKyspe3ZhciBsaWdodD1fbGlnaHRTaGFkb3dzW2ldO3ZhciBzaGFkb3c9bGlnaHQuc2hhZG93O2lmKHNoYWRvdz09PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFNoYWRvd01hcDonLGxpZ2h0LCdoYXMgbm8gc2hhZG93LicpO2NvbnRpbnVlO312YXIgc2hhZG93Q2FtZXJhPXNoYWRvdy5jYW1lcmE7X3NoYWRvd01hcFNpemUuY29weShzaGFkb3cubWFwU2l6ZSk7aWYobGlnaHQgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0KXtmYWNlQ291bnQ9Njtpc1BvaW50TGlnaHQ9dHJ1ZTt2YXIgdnBXaWR0aD1fc2hhZG93TWFwU2l6ZS54O3ZhciB2cEhlaWdodD1fc2hhZG93TWFwU2l6ZS55Oy8vIFRoZXNlIHZpZXdwb3J0cyBtYXAgYSBjdWJlLW1hcCBvbnRvIGEgMkQgdGV4dHVyZSB3aXRoIHRoZVxuLy8gZm9sbG93aW5nIG9yaWVudGF0aW9uOlxuLy9cbi8vICB4elhaXG4vLyAgIHkgWVxuLy9cbi8vIFggLSBQb3NpdGl2ZSB4IGRpcmVjdGlvblxuLy8geCAtIE5lZ2F0aXZlIHggZGlyZWN0aW9uXG4vLyBZIC0gUG9zaXRpdmUgeSBkaXJlY3Rpb25cbi8vIHkgLSBOZWdhdGl2ZSB5IGRpcmVjdGlvblxuLy8gWiAtIFBvc2l0aXZlIHogZGlyZWN0aW9uXG4vLyB6IC0gTmVnYXRpdmUgeiBkaXJlY3Rpb25cbi8vIHBvc2l0aXZlIFhcbmN1YmUyRFZpZXdQb3J0c1swXS5zZXQodnBXaWR0aCoyLHZwSGVpZ2h0LHZwV2lkdGgsdnBIZWlnaHQpOy8vIG5lZ2F0aXZlIFhcbmN1YmUyRFZpZXdQb3J0c1sxXS5zZXQoMCx2cEhlaWdodCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBwb3NpdGl2ZSBaXG5jdWJlMkRWaWV3UG9ydHNbMl0uc2V0KHZwV2lkdGgqMyx2cEhlaWdodCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBuZWdhdGl2ZSBaXG5jdWJlMkRWaWV3UG9ydHNbM10uc2V0KHZwV2lkdGgsdnBIZWlnaHQsdnBXaWR0aCx2cEhlaWdodCk7Ly8gcG9zaXRpdmUgWVxuY3ViZTJEVmlld1BvcnRzWzRdLnNldCh2cFdpZHRoKjMsMCx2cFdpZHRoLHZwSGVpZ2h0KTsvLyBuZWdhdGl2ZSBZXG5jdWJlMkRWaWV3UG9ydHNbNV0uc2V0KHZwV2lkdGgsMCx2cFdpZHRoLHZwSGVpZ2h0KTtfc2hhZG93TWFwU2l6ZS54Kj00LjA7X3NoYWRvd01hcFNpemUueSo9Mi4wO31lbHNle2ZhY2VDb3VudD0xO2lzUG9pbnRMaWdodD1mYWxzZTt9aWYoc2hhZG93Lm1hcD09PW51bGwpe3ZhciBwYXJzPXttaW5GaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcixtYWdGaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcixmb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdH07c2hhZG93Lm1hcD1uZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoX3NoYWRvd01hcFNpemUueCxfc2hhZG93TWFwU2l6ZS55LHBhcnMpO3NoYWRvd0NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7fWlmKHNoYWRvdyBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodFNoYWRvdyl7c2hhZG93LnVwZGF0ZShsaWdodCk7fXZhciBzaGFkb3dNYXA9c2hhZG93Lm1hcDt2YXIgc2hhZG93TWF0cml4PXNoYWRvdy5tYXRyaXg7X2xpZ2h0UG9zaXRpb25Xb3JsZC5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQubWF0cml4V29ybGQpO3NoYWRvd0NhbWVyYS5wb3NpdGlvbi5jb3B5KF9saWdodFBvc2l0aW9uV29ybGQpO19yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoc2hhZG93TWFwKTtfcmVuZGVyZXIuY2xlYXIoKTsvLyByZW5kZXIgc2hhZG93IG1hcCBmb3IgZWFjaCBjdWJlIGZhY2UgKGlmIG9tbmktZGlyZWN0aW9uYWwpIG9yXG4vLyBydW4gYSBzaW5nbGUgcGFzcyBpZiBub3RcbmZvcih2YXIgZmFjZT0wO2ZhY2U8ZmFjZUNvdW50O2ZhY2UrKyl7aWYoaXNQb2ludExpZ2h0KXtfbG9va1RhcmdldC5jb3B5KHNoYWRvd0NhbWVyYS5wb3NpdGlvbik7X2xvb2tUYXJnZXQuYWRkKGN1YmVEaXJlY3Rpb25zW2ZhY2VdKTtzaGFkb3dDYW1lcmEudXAuY29weShjdWJlVXBzW2ZhY2VdKTtzaGFkb3dDYW1lcmEubG9va0F0KF9sb29rVGFyZ2V0KTt2YXIgdnBEaW1lbnNpb25zPWN1YmUyRFZpZXdQb3J0c1tmYWNlXTtfc3RhdGUudmlld3BvcnQodnBEaW1lbnNpb25zKTt9ZWxzZXtfbG9va1RhcmdldC5zZXRGcm9tTWF0cml4UG9zaXRpb24obGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtzaGFkb3dDYW1lcmEubG9va0F0KF9sb29rVGFyZ2V0KTt9c2hhZG93Q2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7c2hhZG93Q2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHNoYWRvd0NhbWVyYS5tYXRyaXhXb3JsZCk7Ly8gY29tcHV0ZSBzaGFkb3cgbWF0cml4XG5zaGFkb3dNYXRyaXguc2V0KDAuNSwwLjAsMC4wLDAuNSwwLjAsMC41LDAuMCwwLjUsMC4wLDAuMCwwLjUsMC41LDAuMCwwLjAsMC4wLDEuMCk7c2hhZG93TWF0cml4Lm11bHRpcGx5KHNoYWRvd0NhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTtzaGFkb3dNYXRyaXgubXVsdGlwbHkoc2hhZG93Q2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSk7Ly8gdXBkYXRlIGNhbWVyYSBtYXRyaWNlcyBhbmQgZnJ1c3R1bVxuX3Byb2pTY3JlZW5NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhzaGFkb3dDYW1lcmEucHJvamVjdGlvbk1hdHJpeCxzaGFkb3dDYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTtfZnJ1c3R1bS5zZXRGcm9tTWF0cml4KF9wcm9qU2NyZWVuTWF0cml4KTsvLyBzZXQgb2JqZWN0IG1hdHJpY2VzICYgZnJ1c3R1bSBjdWxsaW5nXG5fcmVuZGVyTGlzdC5sZW5ndGg9MDtwcm9qZWN0T2JqZWN0KHNjZW5lLGNhbWVyYSxzaGFkb3dDYW1lcmEpOy8vIHJlbmRlciBzaGFkb3cgbWFwXG4vLyByZW5kZXIgcmVndWxhciBvYmplY3RzXG5mb3IodmFyIGo9MCxqbD1fcmVuZGVyTGlzdC5sZW5ndGg7ajxqbDtqKyspe3ZhciBvYmplY3Q9X3JlbmRlckxpc3Rbal07dmFyIGdlb21ldHJ5PV9vYmplY3RzLnVwZGF0ZShvYmplY3QpO3ZhciBtYXRlcmlhbD1vYmplY3QubWF0ZXJpYWw7aWYobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NdWx0aU1hdGVyaWFsKXt2YXIgZ3JvdXBzPWdlb21ldHJ5Lmdyb3Vwczt2YXIgbWF0ZXJpYWxzPW1hdGVyaWFsLm1hdGVyaWFscztmb3IodmFyIGs9MCxrbD1ncm91cHMubGVuZ3RoO2s8a2w7aysrKXt2YXIgZ3JvdXA9Z3JvdXBzW2tdO3ZhciBncm91cE1hdGVyaWFsPW1hdGVyaWFsc1tncm91cC5tYXRlcmlhbEluZGV4XTtpZihncm91cE1hdGVyaWFsLnZpc2libGU9PT10cnVlKXt2YXIgZGVwdGhNYXRlcmlhbD1nZXREZXB0aE1hdGVyaWFsKG9iamVjdCxncm91cE1hdGVyaWFsLGlzUG9pbnRMaWdodCxfbGlnaHRQb3NpdGlvbldvcmxkKTtfcmVuZGVyZXIucmVuZGVyQnVmZmVyRGlyZWN0KHNoYWRvd0NhbWVyYSxudWxsLGdlb21ldHJ5LGRlcHRoTWF0ZXJpYWwsb2JqZWN0LGdyb3VwKTt9fX1lbHNle3ZhciBkZXB0aE1hdGVyaWFsPWdldERlcHRoTWF0ZXJpYWwob2JqZWN0LG1hdGVyaWFsLGlzUG9pbnRMaWdodCxfbGlnaHRQb3NpdGlvbldvcmxkKTtfcmVuZGVyZXIucmVuZGVyQnVmZmVyRGlyZWN0KHNoYWRvd0NhbWVyYSxudWxsLGdlb21ldHJ5LGRlcHRoTWF0ZXJpYWwsb2JqZWN0LG51bGwpO319fX0vLyBSZXN0b3JlIEdMIHN0YXRlLlxudmFyIGNsZWFyQ29sb3I9X3JlbmRlcmVyLmdldENsZWFyQ29sb3IoKSxjbGVhckFscGhhPV9yZW5kZXJlci5nZXRDbGVhckFscGhhKCk7X3JlbmRlcmVyLnNldENsZWFyQ29sb3IoY2xlYXJDb2xvcixjbGVhckFscGhhKTtzY29wZS5uZWVkc1VwZGF0ZT1mYWxzZTt9O2Z1bmN0aW9uIGdldERlcHRoTWF0ZXJpYWwob2JqZWN0LG1hdGVyaWFsLGlzUG9pbnRMaWdodCxsaWdodFBvc2l0aW9uV29ybGQpe3ZhciBnZW9tZXRyeT1vYmplY3QuZ2VvbWV0cnk7dmFyIHJlc3VsdD1udWxsO3ZhciBtYXRlcmlhbFZhcmlhbnRzPV9kZXB0aE1hdGVyaWFsczt2YXIgY3VzdG9tTWF0ZXJpYWw9b2JqZWN0LmN1c3RvbURlcHRoTWF0ZXJpYWw7aWYoaXNQb2ludExpZ2h0KXttYXRlcmlhbFZhcmlhbnRzPV9kaXN0YW5jZU1hdGVyaWFscztjdXN0b21NYXRlcmlhbD1vYmplY3QuY3VzdG9tRGlzdGFuY2VNYXRlcmlhbDt9aWYoIWN1c3RvbU1hdGVyaWFsKXt2YXIgdXNlTW9ycGhpbmc9Z2VvbWV0cnkubW9ycGhUYXJnZXRzIT09dW5kZWZpbmVkJiZnZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoPjAmJm1hdGVyaWFsLm1vcnBoVGFyZ2V0czt2YXIgdXNlU2tpbm5pbmc9b2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJm1hdGVyaWFsLnNraW5uaW5nO3ZhciB2YXJpYW50SW5kZXg9MDtpZih1c2VNb3JwaGluZyl2YXJpYW50SW5kZXh8PV9Nb3JwaGluZ0ZsYWc7aWYodXNlU2tpbm5pbmcpdmFyaWFudEluZGV4fD1fU2tpbm5pbmdGbGFnO3Jlc3VsdD1tYXRlcmlhbFZhcmlhbnRzW3ZhcmlhbnRJbmRleF07fWVsc2V7cmVzdWx0PWN1c3RvbU1hdGVyaWFsO31pZihfcmVuZGVyZXIubG9jYWxDbGlwcGluZ0VuYWJsZWQmJm1hdGVyaWFsLmNsaXBTaGFkb3dzPT09dHJ1ZSYmbWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXMubGVuZ3RoIT09MCl7Ly8gaW4gdGhpcyBjYXNlIHdlIG5lZWQgYSB1bmlxdWUgbWF0ZXJpYWwgaW5zdGFuY2UgcmVmbGVjdGluZyB0aGVcbi8vIGFwcHJvcHJpYXRlIHN0YXRlXG52YXIga2V5QT1yZXN1bHQudXVpZCxrZXlCPW1hdGVyaWFsLnV1aWQ7dmFyIG1hdGVyaWFsc0ZvclZhcmlhbnQ9X21hdGVyaWFsQ2FjaGVba2V5QV07aWYobWF0ZXJpYWxzRm9yVmFyaWFudD09PXVuZGVmaW5lZCl7bWF0ZXJpYWxzRm9yVmFyaWFudD17fTtfbWF0ZXJpYWxDYWNoZVtrZXlBXT1tYXRlcmlhbHNGb3JWYXJpYW50O312YXIgY2FjaGVkTWF0ZXJpYWw9bWF0ZXJpYWxzRm9yVmFyaWFudFtrZXlCXTtpZihjYWNoZWRNYXRlcmlhbD09PXVuZGVmaW5lZCl7Y2FjaGVkTWF0ZXJpYWw9cmVzdWx0LmNsb25lKCk7bWF0ZXJpYWxzRm9yVmFyaWFudFtrZXlCXT1jYWNoZWRNYXRlcmlhbDt9cmVzdWx0PWNhY2hlZE1hdGVyaWFsO31yZXN1bHQudmlzaWJsZT1tYXRlcmlhbC52aXNpYmxlO3Jlc3VsdC53aXJlZnJhbWU9bWF0ZXJpYWwud2lyZWZyYW1lO3ZhciBzaWRlPW1hdGVyaWFsLnNpZGU7aWYoc2NvcGUucmVuZGVyU2luZ2xlU2lkZWQmJnNpZGU9PVRIUkVFLkRvdWJsZVNpZGUpe3NpZGU9VEhSRUUuRnJvbnRTaWRlO31pZihzY29wZS5yZW5kZXJSZXZlcnNlU2lkZWQpe2lmKHNpZGU9PT1USFJFRS5Gcm9udFNpZGUpc2lkZT1USFJFRS5CYWNrU2lkZTtlbHNlIGlmKHNpZGU9PT1USFJFRS5CYWNrU2lkZSlzaWRlPVRIUkVFLkZyb250U2lkZTt9cmVzdWx0LnNpZGU9c2lkZTtyZXN1bHQuY2xpcFNoYWRvd3M9bWF0ZXJpYWwuY2xpcFNoYWRvd3M7cmVzdWx0LmNsaXBwaW5nUGxhbmVzPW1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzO3Jlc3VsdC53aXJlZnJhbWVMaW5ld2lkdGg9bWF0ZXJpYWwud2lyZWZyYW1lTGluZXdpZHRoO3Jlc3VsdC5saW5ld2lkdGg9bWF0ZXJpYWwubGluZXdpZHRoO2lmKGlzUG9pbnRMaWdodCYmcmVzdWx0LnVuaWZvcm1zLmxpZ2h0UG9zIT09dW5kZWZpbmVkKXtyZXN1bHQudW5pZm9ybXMubGlnaHRQb3MudmFsdWUuY29weShsaWdodFBvc2l0aW9uV29ybGQpO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBwcm9qZWN0T2JqZWN0KG9iamVjdCxjYW1lcmEsc2hhZG93Q2FtZXJhKXtpZihvYmplY3QudmlzaWJsZT09PWZhbHNlKXJldHVybjtpZihvYmplY3QubGF5ZXJzLnRlc3QoY2FtZXJhLmxheWVycykmJihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaW5lfHxvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHMpKXtpZihvYmplY3QuY2FzdFNoYWRvdyYmKG9iamVjdC5mcnVzdHVtQ3VsbGVkPT09ZmFsc2V8fF9mcnVzdHVtLmludGVyc2VjdHNPYmplY3Qob2JqZWN0KT09PXRydWUpKXt2YXIgbWF0ZXJpYWw9b2JqZWN0Lm1hdGVyaWFsO2lmKG1hdGVyaWFsLnZpc2libGU9PT10cnVlKXtvYmplY3QubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoc2hhZG93Q2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSxvYmplY3QubWF0cml4V29ybGQpO19yZW5kZXJMaXN0LnB1c2gob2JqZWN0KTt9fX12YXIgY2hpbGRyZW49b2JqZWN0LmNoaWxkcmVuO2Zvcih2YXIgaT0wLGw9Y2hpbGRyZW4ubGVuZ3RoO2k8bDtpKyspe3Byb2plY3RPYmplY3QoY2hpbGRyZW5baV0sY2FtZXJhLHNoYWRvd0NhbWVyYSk7fX19Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTFN0YXRlLmpzXG4vKipcclxuKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4qL1RIUkVFLldlYkdMU3RhdGU9ZnVuY3Rpb24oZ2wsZXh0ZW5zaW9ucyxwYXJhbVRocmVlVG9HTCl7dmFyIF90aGlzPXRoaXM7dGhpcy5idWZmZXJzPXtjb2xvcjpuZXcgVEhSRUUuV2ViR0xDb2xvckJ1ZmZlcihnbCx0aGlzKSxkZXB0aDpuZXcgVEhSRUUuV2ViR0xEZXB0aEJ1ZmZlcihnbCx0aGlzKSxzdGVuY2lsOm5ldyBUSFJFRS5XZWJHTFN0ZW5jaWxCdWZmZXIoZ2wsdGhpcyl9O3ZhciBtYXhWZXJ0ZXhBdHRyaWJ1dGVzPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX0FUVFJJQlMpO3ZhciBuZXdBdHRyaWJ1dGVzPW5ldyBVaW50OEFycmF5KG1heFZlcnRleEF0dHJpYnV0ZXMpO3ZhciBlbmFibGVkQXR0cmlidXRlcz1uZXcgVWludDhBcnJheShtYXhWZXJ0ZXhBdHRyaWJ1dGVzKTt2YXIgYXR0cmlidXRlRGl2aXNvcnM9bmV3IFVpbnQ4QXJyYXkobWF4VmVydGV4QXR0cmlidXRlcyk7dmFyIGNhcGFiaWxpdGllcz17fTt2YXIgY29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPW51bGw7dmFyIGN1cnJlbnRCbGVuZGluZz1udWxsO3ZhciBjdXJyZW50QmxlbmRFcXVhdGlvbj1udWxsO3ZhciBjdXJyZW50QmxlbmRTcmM9bnVsbDt2YXIgY3VycmVudEJsZW5kRHN0PW51bGw7dmFyIGN1cnJlbnRCbGVuZEVxdWF0aW9uQWxwaGE9bnVsbDt2YXIgY3VycmVudEJsZW5kU3JjQWxwaGE9bnVsbDt2YXIgY3VycmVudEJsZW5kRHN0QWxwaGE9bnVsbDt2YXIgY3VycmVudFByZW11bHRpcGxlZEFscGhhPWZhbHNlO3ZhciBjdXJyZW50RmxpcFNpZGVkPW51bGw7dmFyIGN1cnJlbnRDdWxsRmFjZT1udWxsO3ZhciBjdXJyZW50TGluZVdpZHRoPW51bGw7dmFyIGN1cnJlbnRQb2x5Z29uT2Zmc2V0RmFjdG9yPW51bGw7dmFyIGN1cnJlbnRQb2x5Z29uT2Zmc2V0VW5pdHM9bnVsbDt2YXIgY3VycmVudFNjaXNzb3JUZXN0PW51bGw7dmFyIG1heFRleHR1cmVzPWdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7dmFyIGN1cnJlbnRUZXh0dXJlU2xvdD1udWxsO3ZhciBjdXJyZW50Qm91bmRUZXh0dXJlcz17fTt2YXIgY3VycmVudFNjaXNzb3I9bmV3IFRIUkVFLlZlY3RvcjQoKTt2YXIgY3VycmVudFZpZXdwb3J0PW5ldyBUSFJFRS5WZWN0b3I0KCk7ZnVuY3Rpb24gY3JlYXRlVGV4dHVyZSh0eXBlLHRhcmdldCxjb3VudCl7dmFyIGRhdGE9bmV3IFVpbnQ4QXJyYXkoMyk7dmFyIHRleHR1cmU9Z2wuY3JlYXRlVGV4dHVyZSgpO2dsLmJpbmRUZXh0dXJlKHR5cGUsdGV4dHVyZSk7Z2wudGV4UGFyYW1ldGVyaSh0eXBlLGdsLlRFWFRVUkVfTUlOX0ZJTFRFUixnbC5ORUFSRVNUKTtnbC50ZXhQYXJhbWV0ZXJpKHR5cGUsZ2wuVEVYVFVSRV9NQUdfRklMVEVSLGdsLk5FQVJFU1QpO2Zvcih2YXIgaT0wO2k8Y291bnQ7aSsrKXtnbC50ZXhJbWFnZTJEKHRhcmdldCtpLDAsZ2wuUkdCLDEsMSwwLGdsLlJHQixnbC5VTlNJR05FRF9CWVRFLGRhdGEpO31yZXR1cm4gdGV4dHVyZTt9dmFyIGVtcHR5VGV4dHVyZXM9e307ZW1wdHlUZXh0dXJlc1tnbC5URVhUVVJFXzJEXT1jcmVhdGVUZXh0dXJlKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV8yRCwxKTtlbXB0eVRleHR1cmVzW2dsLlRFWFRVUkVfQ1VCRV9NQVBdPWNyZWF0ZVRleHR1cmUoZ2wuVEVYVFVSRV9DVUJFX01BUCxnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1gsNik7Ly9cbnRoaXMuaW5pdD1mdW5jdGlvbigpe3RoaXMuY2xlYXJDb2xvcigwLDAsMCwxKTt0aGlzLmNsZWFyRGVwdGgoMSk7dGhpcy5jbGVhclN0ZW5jaWwoMCk7dGhpcy5lbmFibGUoZ2wuREVQVEhfVEVTVCk7dGhpcy5zZXREZXB0aEZ1bmMoVEhSRUUuTGVzc0VxdWFsRGVwdGgpO3RoaXMuc2V0RmxpcFNpZGVkKGZhbHNlKTt0aGlzLnNldEN1bGxGYWNlKFRIUkVFLkN1bGxGYWNlQmFjayk7dGhpcy5lbmFibGUoZ2wuQ1VMTF9GQUNFKTt0aGlzLmVuYWJsZShnbC5CTEVORCk7dGhpcy5zZXRCbGVuZGluZyhUSFJFRS5Ob3JtYWxCbGVuZGluZyk7fTt0aGlzLmluaXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD1uZXdBdHRyaWJ1dGVzLmxlbmd0aDtpPGw7aSsrKXtuZXdBdHRyaWJ1dGVzW2ldPTA7fX07dGhpcy5lbmFibGVBdHRyaWJ1dGU9ZnVuY3Rpb24oYXR0cmlidXRlKXtuZXdBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09MTtpZihlbmFibGVkQXR0cmlidXRlc1thdHRyaWJ1dGVdPT09MCl7Z2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmlidXRlKTtlbmFibGVkQXR0cmlidXRlc1thdHRyaWJ1dGVdPTE7fWlmKGF0dHJpYnV0ZURpdmlzb3JzW2F0dHJpYnV0ZV0hPT0wKXt2YXIgZXh0ZW5zaW9uPWV4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7ZXh0ZW5zaW9uLnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShhdHRyaWJ1dGUsMCk7YXR0cmlidXRlRGl2aXNvcnNbYXR0cmlidXRlXT0wO319O3RoaXMuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcj1mdW5jdGlvbihhdHRyaWJ1dGUsbWVzaFBlckF0dHJpYnV0ZSxleHRlbnNpb24pe25ld0F0dHJpYnV0ZXNbYXR0cmlidXRlXT0xO2lmKGVuYWJsZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09PT0wKXtnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWJ1dGUpO2VuYWJsZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZV09MTt9aWYoYXR0cmlidXRlRGl2aXNvcnNbYXR0cmlidXRlXSE9PW1lc2hQZXJBdHRyaWJ1dGUpe2V4dGVuc2lvbi52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYXR0cmlidXRlLG1lc2hQZXJBdHRyaWJ1dGUpO2F0dHJpYnV0ZURpdmlzb3JzW2F0dHJpYnV0ZV09bWVzaFBlckF0dHJpYnV0ZTt9fTt0aGlzLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD1lbmFibGVkQXR0cmlidXRlcy5sZW5ndGg7aSE9PWw7KytpKXtpZihlbmFibGVkQXR0cmlidXRlc1tpXSE9PW5ld0F0dHJpYnV0ZXNbaV0pe2dsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShpKTtlbmFibGVkQXR0cmlidXRlc1tpXT0wO319fTt0aGlzLmVuYWJsZT1mdW5jdGlvbihpZCl7aWYoY2FwYWJpbGl0aWVzW2lkXSE9PXRydWUpe2dsLmVuYWJsZShpZCk7Y2FwYWJpbGl0aWVzW2lkXT10cnVlO319O3RoaXMuZGlzYWJsZT1mdW5jdGlvbihpZCl7aWYoY2FwYWJpbGl0aWVzW2lkXSE9PWZhbHNlKXtnbC5kaXNhYmxlKGlkKTtjYXBhYmlsaXRpZXNbaWRdPWZhbHNlO319O3RoaXMuZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPWZ1bmN0aW9uKCl7aWYoY29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPT09bnVsbCl7Y29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPVtdO2lmKGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKXx8ZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyl8fGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScpKXt2YXIgZm9ybWF0cz1nbC5nZXRQYXJhbWV0ZXIoZ2wuQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMpO2Zvcih2YXIgaT0wO2k8Zm9ybWF0cy5sZW5ndGg7aSsrKXtjb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMucHVzaChmb3JtYXRzW2ldKTt9fX1yZXR1cm4gY29tcHJlc3NlZFRleHR1cmVGb3JtYXRzO307dGhpcy5zZXRCbGVuZGluZz1mdW5jdGlvbihibGVuZGluZyxibGVuZEVxdWF0aW9uLGJsZW5kU3JjLGJsZW5kRHN0LGJsZW5kRXF1YXRpb25BbHBoYSxibGVuZFNyY0FscGhhLGJsZW5kRHN0QWxwaGEscHJlbXVsdGlwbGllZEFscGhhKXtpZihibGVuZGluZyE9PVRIUkVFLk5vQmxlbmRpbmcpe3RoaXMuZW5hYmxlKGdsLkJMRU5EKTt9ZWxzZXt0aGlzLmRpc2FibGUoZ2wuQkxFTkQpO2N1cnJlbnRCbGVuZGluZz1ibGVuZGluZzsvLyBubyBibGVuZGluZywgdGhhdCBpc1xucmV0dXJuO31pZihibGVuZGluZyE9PWN1cnJlbnRCbGVuZGluZ3x8cHJlbXVsdGlwbGllZEFscGhhIT09Y3VycmVudFByZW11bHRpcGxlZEFscGhhKXtpZihibGVuZGluZz09PVRIUkVFLkFkZGl0aXZlQmxlbmRpbmcpe2lmKHByZW11bHRpcGxpZWRBbHBoYSl7Z2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGdsLkZVTkNfQURELGdsLkZVTkNfQUREKTtnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5PTkUsZ2wuT05FLGdsLk9ORSxnbC5PTkUpO31lbHNle2dsLmJsZW5kRXF1YXRpb24oZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuYyhnbC5TUkNfQUxQSEEsZ2wuT05FKTt9fWVsc2UgaWYoYmxlbmRpbmc9PT1USFJFRS5TdWJ0cmFjdGl2ZUJsZW5kaW5nKXtpZihwcmVtdWx0aXBsaWVkQWxwaGEpe2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShnbC5GVU5DX0FERCxnbC5GVU5DX0FERCk7Z2wuYmxlbmRGdW5jU2VwYXJhdGUoZ2wuWkVSTyxnbC5aRVJPLGdsLk9ORV9NSU5VU19TUkNfQ09MT1IsZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7fWVsc2V7Z2wuYmxlbmRFcXVhdGlvbihnbC5GVU5DX0FERCk7Z2wuYmxlbmRGdW5jKGdsLlpFUk8sZ2wuT05FX01JTlVTX1NSQ19DT0xPUik7fX1lbHNlIGlmKGJsZW5kaW5nPT09VEhSRUUuTXVsdGlwbHlCbGVuZGluZyl7aWYocHJlbXVsdGlwbGllZEFscGhhKXtnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZ2wuRlVOQ19BREQsZ2wuRlVOQ19BREQpO2dsLmJsZW5kRnVuY1NlcGFyYXRlKGdsLlpFUk8sZ2wuU1JDX0NPTE9SLGdsLlpFUk8sZ2wuU1JDX0FMUEhBKTt9ZWxzZXtnbC5ibGVuZEVxdWF0aW9uKGdsLkZVTkNfQUREKTtnbC5ibGVuZEZ1bmMoZ2wuWkVSTyxnbC5TUkNfQ09MT1IpO319ZWxzZXtpZihwcmVtdWx0aXBsaWVkQWxwaGEpe2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShnbC5GVU5DX0FERCxnbC5GVU5DX0FERCk7Z2wuYmxlbmRGdW5jU2VwYXJhdGUoZ2wuT05FLGdsLk9ORV9NSU5VU19TUkNfQUxQSEEsZ2wuT05FLGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO31lbHNle2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShnbC5GVU5DX0FERCxnbC5GVU5DX0FERCk7Z2wuYmxlbmRGdW5jU2VwYXJhdGUoZ2wuU1JDX0FMUEhBLGdsLk9ORV9NSU5VU19TUkNfQUxQSEEsZ2wuT05FLGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO319Y3VycmVudEJsZW5kaW5nPWJsZW5kaW5nO2N1cnJlbnRQcmVtdWx0aXBsZWRBbHBoYT1wcmVtdWx0aXBsaWVkQWxwaGE7fWlmKGJsZW5kaW5nPT09VEhSRUUuQ3VzdG9tQmxlbmRpbmcpe2JsZW5kRXF1YXRpb25BbHBoYT1ibGVuZEVxdWF0aW9uQWxwaGF8fGJsZW5kRXF1YXRpb247YmxlbmRTcmNBbHBoYT1ibGVuZFNyY0FscGhhfHxibGVuZFNyYztibGVuZERzdEFscGhhPWJsZW5kRHN0QWxwaGF8fGJsZW5kRHN0O2lmKGJsZW5kRXF1YXRpb24hPT1jdXJyZW50QmxlbmRFcXVhdGlvbnx8YmxlbmRFcXVhdGlvbkFscGhhIT09Y3VycmVudEJsZW5kRXF1YXRpb25BbHBoYSl7Z2wuYmxlbmRFcXVhdGlvblNlcGFyYXRlKHBhcmFtVGhyZWVUb0dMKGJsZW5kRXF1YXRpb24pLHBhcmFtVGhyZWVUb0dMKGJsZW5kRXF1YXRpb25BbHBoYSkpO2N1cnJlbnRCbGVuZEVxdWF0aW9uPWJsZW5kRXF1YXRpb247Y3VycmVudEJsZW5kRXF1YXRpb25BbHBoYT1ibGVuZEVxdWF0aW9uQWxwaGE7fWlmKGJsZW5kU3JjIT09Y3VycmVudEJsZW5kU3JjfHxibGVuZERzdCE9PWN1cnJlbnRCbGVuZERzdHx8YmxlbmRTcmNBbHBoYSE9PWN1cnJlbnRCbGVuZFNyY0FscGhhfHxibGVuZERzdEFscGhhIT09Y3VycmVudEJsZW5kRHN0QWxwaGEpe2dsLmJsZW5kRnVuY1NlcGFyYXRlKHBhcmFtVGhyZWVUb0dMKGJsZW5kU3JjKSxwYXJhbVRocmVlVG9HTChibGVuZERzdCkscGFyYW1UaHJlZVRvR0woYmxlbmRTcmNBbHBoYSkscGFyYW1UaHJlZVRvR0woYmxlbmREc3RBbHBoYSkpO2N1cnJlbnRCbGVuZFNyYz1ibGVuZFNyYztjdXJyZW50QmxlbmREc3Q9YmxlbmREc3Q7Y3VycmVudEJsZW5kU3JjQWxwaGE9YmxlbmRTcmNBbHBoYTtjdXJyZW50QmxlbmREc3RBbHBoYT1ibGVuZERzdEFscGhhO319ZWxzZXtjdXJyZW50QmxlbmRFcXVhdGlvbj1udWxsO2N1cnJlbnRCbGVuZFNyYz1udWxsO2N1cnJlbnRCbGVuZERzdD1udWxsO2N1cnJlbnRCbGVuZEVxdWF0aW9uQWxwaGE9bnVsbDtjdXJyZW50QmxlbmRTcmNBbHBoYT1udWxsO2N1cnJlbnRCbGVuZERzdEFscGhhPW51bGw7fX07Ly8gVE9ETyBEZXByZWNhdGVcbnRoaXMuc2V0Q29sb3JXcml0ZT1mdW5jdGlvbihjb2xvcldyaXRlKXt0aGlzLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayhjb2xvcldyaXRlKTt9O3RoaXMuc2V0RGVwdGhUZXN0PWZ1bmN0aW9uKGRlcHRoVGVzdCl7dGhpcy5idWZmZXJzLmRlcHRoLnNldFRlc3QoZGVwdGhUZXN0KTt9O3RoaXMuc2V0RGVwdGhXcml0ZT1mdW5jdGlvbihkZXB0aFdyaXRlKXt0aGlzLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayhkZXB0aFdyaXRlKTt9O3RoaXMuc2V0RGVwdGhGdW5jPWZ1bmN0aW9uKGRlcHRoRnVuYyl7dGhpcy5idWZmZXJzLmRlcHRoLnNldEZ1bmMoZGVwdGhGdW5jKTt9O3RoaXMuc2V0U3RlbmNpbFRlc3Q9ZnVuY3Rpb24oc3RlbmNpbFRlc3Qpe3RoaXMuYnVmZmVycy5zdGVuY2lsLnNldFRlc3Qoc3RlbmNpbFRlc3QpO307dGhpcy5zZXRTdGVuY2lsV3JpdGU9ZnVuY3Rpb24oc3RlbmNpbFdyaXRlKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRNYXNrKHN0ZW5jaWxXcml0ZSk7fTt0aGlzLnNldFN0ZW5jaWxGdW5jPWZ1bmN0aW9uKHN0ZW5jaWxGdW5jLHN0ZW5jaWxSZWYsc3RlbmNpbE1hc2spe3RoaXMuYnVmZmVycy5zdGVuY2lsLnNldEZ1bmMoc3RlbmNpbEZ1bmMsc3RlbmNpbFJlZixzdGVuY2lsTWFzayk7fTt0aGlzLnNldFN0ZW5jaWxPcD1mdW5jdGlvbihzdGVuY2lsRmFpbCxzdGVuY2lsWkZhaWwsc3RlbmNpbFpQYXNzKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRPcChzdGVuY2lsRmFpbCxzdGVuY2lsWkZhaWwsc3RlbmNpbFpQYXNzKTt9Oy8vXG50aGlzLnNldEZsaXBTaWRlZD1mdW5jdGlvbihmbGlwU2lkZWQpe2lmKGN1cnJlbnRGbGlwU2lkZWQhPT1mbGlwU2lkZWQpe2lmKGZsaXBTaWRlZCl7Z2wuZnJvbnRGYWNlKGdsLkNXKTt9ZWxzZXtnbC5mcm9udEZhY2UoZ2wuQ0NXKTt9Y3VycmVudEZsaXBTaWRlZD1mbGlwU2lkZWQ7fX07dGhpcy5zZXRDdWxsRmFjZT1mdW5jdGlvbihjdWxsRmFjZSl7aWYoY3VsbEZhY2UhPT1USFJFRS5DdWxsRmFjZU5vbmUpe3RoaXMuZW5hYmxlKGdsLkNVTExfRkFDRSk7aWYoY3VsbEZhY2UhPT1jdXJyZW50Q3VsbEZhY2Upe2lmKGN1bGxGYWNlPT09VEhSRUUuQ3VsbEZhY2VCYWNrKXtnbC5jdWxsRmFjZShnbC5CQUNLKTt9ZWxzZSBpZihjdWxsRmFjZT09PVRIUkVFLkN1bGxGYWNlRnJvbnQpe2dsLmN1bGxGYWNlKGdsLkZST05UKTt9ZWxzZXtnbC5jdWxsRmFjZShnbC5GUk9OVF9BTkRfQkFDSyk7fX19ZWxzZXt0aGlzLmRpc2FibGUoZ2wuQ1VMTF9GQUNFKTt9Y3VycmVudEN1bGxGYWNlPWN1bGxGYWNlO307dGhpcy5zZXRMaW5lV2lkdGg9ZnVuY3Rpb24od2lkdGgpe2lmKHdpZHRoIT09Y3VycmVudExpbmVXaWR0aCl7Z2wubGluZVdpZHRoKHdpZHRoKTtjdXJyZW50TGluZVdpZHRoPXdpZHRoO319O3RoaXMuc2V0UG9seWdvbk9mZnNldD1mdW5jdGlvbihwb2x5Z29uT2Zmc2V0LGZhY3Rvcix1bml0cyl7aWYocG9seWdvbk9mZnNldCl7dGhpcy5lbmFibGUoZ2wuUE9MWUdPTl9PRkZTRVRfRklMTCk7aWYoY3VycmVudFBvbHlnb25PZmZzZXRGYWN0b3IhPT1mYWN0b3J8fGN1cnJlbnRQb2x5Z29uT2Zmc2V0VW5pdHMhPT11bml0cyl7Z2wucG9seWdvbk9mZnNldChmYWN0b3IsdW5pdHMpO2N1cnJlbnRQb2x5Z29uT2Zmc2V0RmFjdG9yPWZhY3RvcjtjdXJyZW50UG9seWdvbk9mZnNldFVuaXRzPXVuaXRzO319ZWxzZXt0aGlzLmRpc2FibGUoZ2wuUE9MWUdPTl9PRkZTRVRfRklMTCk7fX07dGhpcy5nZXRTY2lzc29yVGVzdD1mdW5jdGlvbigpe3JldHVybiBjdXJyZW50U2Npc3NvclRlc3Q7fTt0aGlzLnNldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKHNjaXNzb3JUZXN0KXtjdXJyZW50U2Npc3NvclRlc3Q9c2Npc3NvclRlc3Q7aWYoc2Npc3NvclRlc3Qpe3RoaXMuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7fWVsc2V7dGhpcy5kaXNhYmxlKGdsLlNDSVNTT1JfVEVTVCk7fX07Ly8gdGV4dHVyZVxudGhpcy5hY3RpdmVUZXh0dXJlPWZ1bmN0aW9uKHdlYmdsU2xvdCl7aWYod2ViZ2xTbG90PT09dW5kZWZpbmVkKXdlYmdsU2xvdD1nbC5URVhUVVJFMCttYXhUZXh0dXJlcy0xO2lmKGN1cnJlbnRUZXh0dXJlU2xvdCE9PXdlYmdsU2xvdCl7Z2wuYWN0aXZlVGV4dHVyZSh3ZWJnbFNsb3QpO2N1cnJlbnRUZXh0dXJlU2xvdD13ZWJnbFNsb3Q7fX07dGhpcy5iaW5kVGV4dHVyZT1mdW5jdGlvbih3ZWJnbFR5cGUsd2ViZ2xUZXh0dXJlKXtpZihjdXJyZW50VGV4dHVyZVNsb3Q9PT1udWxsKXtfdGhpcy5hY3RpdmVUZXh0dXJlKCk7fXZhciBib3VuZFRleHR1cmU9Y3VycmVudEJvdW5kVGV4dHVyZXNbY3VycmVudFRleHR1cmVTbG90XTtpZihib3VuZFRleHR1cmU9PT11bmRlZmluZWQpe2JvdW5kVGV4dHVyZT17dHlwZTp1bmRlZmluZWQsdGV4dHVyZTp1bmRlZmluZWR9O2N1cnJlbnRCb3VuZFRleHR1cmVzW2N1cnJlbnRUZXh0dXJlU2xvdF09Ym91bmRUZXh0dXJlO31pZihib3VuZFRleHR1cmUudHlwZSE9PXdlYmdsVHlwZXx8Ym91bmRUZXh0dXJlLnRleHR1cmUhPT13ZWJnbFRleHR1cmUpe2dsLmJpbmRUZXh0dXJlKHdlYmdsVHlwZSx3ZWJnbFRleHR1cmV8fGVtcHR5VGV4dHVyZXNbd2ViZ2xUeXBlXSk7Ym91bmRUZXh0dXJlLnR5cGU9d2ViZ2xUeXBlO2JvdW5kVGV4dHVyZS50ZXh0dXJlPXdlYmdsVGV4dHVyZTt9fTt0aGlzLmNvbXByZXNzZWRUZXhJbWFnZTJEPWZ1bmN0aW9uKCl7dHJ5e2dsLmNvbXByZXNzZWRUZXhJbWFnZTJELmFwcGx5KGdsLGFyZ3VtZW50cyk7fWNhdGNoKGVycm9yKXtjb25zb2xlLmVycm9yKGVycm9yKTt9fTt0aGlzLnRleEltYWdlMkQ9ZnVuY3Rpb24oKXt0cnl7Z2wudGV4SW1hZ2UyRC5hcHBseShnbCxhcmd1bWVudHMpO31jYXRjaChlcnJvcil7Y29uc29sZS5lcnJvcihlcnJvcik7fX07Ly8gVE9ETyBEZXByZWNhdGVcbnRoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbihyLGcsYixhKXt0aGlzLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIocixnLGIsYSk7fTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oZGVwdGgpe3RoaXMuYnVmZmVycy5kZXB0aC5zZXRDbGVhcihkZXB0aCk7fTt0aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbihzdGVuY2lsKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRDbGVhcihzdGVuY2lsKTt9Oy8vXG50aGlzLnNjaXNzb3I9ZnVuY3Rpb24oc2Npc3Nvcil7aWYoY3VycmVudFNjaXNzb3IuZXF1YWxzKHNjaXNzb3IpPT09ZmFsc2Upe2dsLnNjaXNzb3Ioc2Npc3Nvci54LHNjaXNzb3IueSxzY2lzc29yLnosc2Npc3Nvci53KTtjdXJyZW50U2Npc3Nvci5jb3B5KHNjaXNzb3IpO319O3RoaXMudmlld3BvcnQ9ZnVuY3Rpb24odmlld3BvcnQpe2lmKGN1cnJlbnRWaWV3cG9ydC5lcXVhbHModmlld3BvcnQpPT09ZmFsc2Upe2dsLnZpZXdwb3J0KHZpZXdwb3J0Lngsdmlld3BvcnQueSx2aWV3cG9ydC56LHZpZXdwb3J0LncpO2N1cnJlbnRWaWV3cG9ydC5jb3B5KHZpZXdwb3J0KTt9fTsvL1xudGhpcy5yZXNldD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8ZW5hYmxlZEF0dHJpYnV0ZXMubGVuZ3RoO2krKyl7aWYoZW5hYmxlZEF0dHJpYnV0ZXNbaV09PT0xKXtnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaSk7ZW5hYmxlZEF0dHJpYnV0ZXNbaV09MDt9fWNhcGFiaWxpdGllcz17fTtjb21wcmVzc2VkVGV4dHVyZUZvcm1hdHM9bnVsbDtjdXJyZW50VGV4dHVyZVNsb3Q9bnVsbDtjdXJyZW50Qm91bmRUZXh0dXJlcz17fTtjdXJyZW50QmxlbmRpbmc9bnVsbDtjdXJyZW50RmxpcFNpZGVkPW51bGw7Y3VycmVudEN1bGxGYWNlPW51bGw7dGhpcy5idWZmZXJzLmNvbG9yLnJlc2V0KCk7dGhpcy5idWZmZXJzLmRlcHRoLnJlc2V0KCk7dGhpcy5idWZmZXJzLnN0ZW5jaWwucmVzZXQoKTt9O307VEhSRUUuV2ViR0xDb2xvckJ1ZmZlcj1mdW5jdGlvbihnbCxzdGF0ZSl7dmFyIGxvY2tlZD1mYWxzZTt2YXIgY29sb3I9bmV3IFRIUkVFLlZlY3RvcjQoKTt2YXIgY3VycmVudENvbG9yTWFzaz1udWxsO3ZhciBjdXJyZW50Q29sb3JDbGVhcj1uZXcgVEhSRUUuVmVjdG9yNCgpO3RoaXMuc2V0TWFzaz1mdW5jdGlvbihjb2xvck1hc2spe2lmKGN1cnJlbnRDb2xvck1hc2shPT1jb2xvck1hc2smJiFsb2NrZWQpe2dsLmNvbG9yTWFzayhjb2xvck1hc2ssY29sb3JNYXNrLGNvbG9yTWFzayxjb2xvck1hc2spO2N1cnJlbnRDb2xvck1hc2s9Y29sb3JNYXNrO319O3RoaXMuc2V0TG9ja2VkPWZ1bmN0aW9uKGxvY2spe2xvY2tlZD1sb2NrO307dGhpcy5zZXRDbGVhcj1mdW5jdGlvbihyLGcsYixhKXtjb2xvci5zZXQocixnLGIsYSk7aWYoY3VycmVudENvbG9yQ2xlYXIuZXF1YWxzKGNvbG9yKT09PWZhbHNlKXtnbC5jbGVhckNvbG9yKHIsZyxiLGEpO2N1cnJlbnRDb2xvckNsZWFyLmNvcHkoY29sb3IpO319O3RoaXMucmVzZXQ9ZnVuY3Rpb24oKXtsb2NrZWQ9ZmFsc2U7Y3VycmVudENvbG9yTWFzaz1udWxsO2N1cnJlbnRDb2xvckNsZWFyPW5ldyBUSFJFRS5WZWN0b3I0KCk7fTt9O1RIUkVFLldlYkdMRGVwdGhCdWZmZXI9ZnVuY3Rpb24oZ2wsc3RhdGUpe3ZhciBsb2NrZWQ9ZmFsc2U7dmFyIGN1cnJlbnREZXB0aE1hc2s9bnVsbDt2YXIgY3VycmVudERlcHRoRnVuYz1udWxsO3ZhciBjdXJyZW50RGVwdGhDbGVhcj1udWxsO3RoaXMuc2V0VGVzdD1mdW5jdGlvbihkZXB0aFRlc3Qpe2lmKGRlcHRoVGVzdCl7c3RhdGUuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO31lbHNle3N0YXRlLmRpc2FibGUoZ2wuREVQVEhfVEVTVCk7fX07dGhpcy5zZXRNYXNrPWZ1bmN0aW9uKGRlcHRoTWFzayl7aWYoY3VycmVudERlcHRoTWFzayE9PWRlcHRoTWFzayYmIWxvY2tlZCl7Z2wuZGVwdGhNYXNrKGRlcHRoTWFzayk7Y3VycmVudERlcHRoTWFzaz1kZXB0aE1hc2s7fX07dGhpcy5zZXRGdW5jPWZ1bmN0aW9uKGRlcHRoRnVuYyl7aWYoY3VycmVudERlcHRoRnVuYyE9PWRlcHRoRnVuYyl7aWYoZGVwdGhGdW5jKXtzd2l0Y2goZGVwdGhGdW5jKXtjYXNlIFRIUkVFLk5ldmVyRGVwdGg6Z2wuZGVwdGhGdW5jKGdsLk5FVkVSKTticmVhaztjYXNlIFRIUkVFLkFsd2F5c0RlcHRoOmdsLmRlcHRoRnVuYyhnbC5BTFdBWVMpO2JyZWFrO2Nhc2UgVEhSRUUuTGVzc0RlcHRoOmdsLmRlcHRoRnVuYyhnbC5MRVNTKTticmVhaztjYXNlIFRIUkVFLkxlc3NFcXVhbERlcHRoOmdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO2JyZWFrO2Nhc2UgVEhSRUUuRXF1YWxEZXB0aDpnbC5kZXB0aEZ1bmMoZ2wuRVFVQUwpO2JyZWFrO2Nhc2UgVEhSRUUuR3JlYXRlckVxdWFsRGVwdGg6Z2wuZGVwdGhGdW5jKGdsLkdFUVVBTCk7YnJlYWs7Y2FzZSBUSFJFRS5HcmVhdGVyRGVwdGg6Z2wuZGVwdGhGdW5jKGdsLkdSRUFURVIpO2JyZWFrO2Nhc2UgVEhSRUUuTm90RXF1YWxEZXB0aDpnbC5kZXB0aEZ1bmMoZ2wuTk9URVFVQUwpO2JyZWFrO2RlZmF1bHQ6Z2wuZGVwdGhGdW5jKGdsLkxFUVVBTCk7fX1lbHNle2dsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO31jdXJyZW50RGVwdGhGdW5jPWRlcHRoRnVuYzt9fTt0aGlzLnNldExvY2tlZD1mdW5jdGlvbihsb2NrKXtsb2NrZWQ9bG9jazt9O3RoaXMuc2V0Q2xlYXI9ZnVuY3Rpb24oZGVwdGgpe2lmKGN1cnJlbnREZXB0aENsZWFyIT09ZGVwdGgpe2dsLmNsZWFyRGVwdGgoZGVwdGgpO2N1cnJlbnREZXB0aENsZWFyPWRlcHRoO319O3RoaXMucmVzZXQ9ZnVuY3Rpb24oKXtsb2NrZWQ9ZmFsc2U7Y3VycmVudERlcHRoTWFzaz1udWxsO2N1cnJlbnREZXB0aEZ1bmM9bnVsbDtjdXJyZW50RGVwdGhDbGVhcj1udWxsO307fTtUSFJFRS5XZWJHTFN0ZW5jaWxCdWZmZXI9ZnVuY3Rpb24oZ2wsc3RhdGUpe3ZhciBsb2NrZWQ9ZmFsc2U7dmFyIGN1cnJlbnRTdGVuY2lsTWFzaz1udWxsO3ZhciBjdXJyZW50U3RlbmNpbEZ1bmM9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxSZWY9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxGdW5jTWFzaz1udWxsO3ZhciBjdXJyZW50U3RlbmNpbEZhaWw9bnVsbDt2YXIgY3VycmVudFN0ZW5jaWxaRmFpbD1udWxsO3ZhciBjdXJyZW50U3RlbmNpbFpQYXNzPW51bGw7dmFyIGN1cnJlbnRTdGVuY2lsQ2xlYXI9bnVsbDt0aGlzLnNldFRlc3Q9ZnVuY3Rpb24oc3RlbmNpbFRlc3Qpe2lmKHN0ZW5jaWxUZXN0KXtzdGF0ZS5lbmFibGUoZ2wuU1RFTkNJTF9URVNUKTt9ZWxzZXtzdGF0ZS5kaXNhYmxlKGdsLlNURU5DSUxfVEVTVCk7fX07dGhpcy5zZXRNYXNrPWZ1bmN0aW9uKHN0ZW5jaWxNYXNrKXtpZihjdXJyZW50U3RlbmNpbE1hc2shPT1zdGVuY2lsTWFzayYmIWxvY2tlZCl7Z2wuc3RlbmNpbE1hc2soc3RlbmNpbE1hc2spO2N1cnJlbnRTdGVuY2lsTWFzaz1zdGVuY2lsTWFzazt9fTt0aGlzLnNldEZ1bmM9ZnVuY3Rpb24oc3RlbmNpbEZ1bmMsc3RlbmNpbFJlZixzdGVuY2lsTWFzayl7aWYoY3VycmVudFN0ZW5jaWxGdW5jIT09c3RlbmNpbEZ1bmN8fGN1cnJlbnRTdGVuY2lsUmVmIT09c3RlbmNpbFJlZnx8Y3VycmVudFN0ZW5jaWxGdW5jTWFzayE9PXN0ZW5jaWxNYXNrKXtnbC5zdGVuY2lsRnVuYyhzdGVuY2lsRnVuYyxzdGVuY2lsUmVmLHN0ZW5jaWxNYXNrKTtjdXJyZW50U3RlbmNpbEZ1bmM9c3RlbmNpbEZ1bmM7Y3VycmVudFN0ZW5jaWxSZWY9c3RlbmNpbFJlZjtjdXJyZW50U3RlbmNpbEZ1bmNNYXNrPXN0ZW5jaWxNYXNrO319O3RoaXMuc2V0T3A9ZnVuY3Rpb24oc3RlbmNpbEZhaWwsc3RlbmNpbFpGYWlsLHN0ZW5jaWxaUGFzcyl7aWYoY3VycmVudFN0ZW5jaWxGYWlsIT09c3RlbmNpbEZhaWx8fGN1cnJlbnRTdGVuY2lsWkZhaWwhPT1zdGVuY2lsWkZhaWx8fGN1cnJlbnRTdGVuY2lsWlBhc3MhPT1zdGVuY2lsWlBhc3Mpe2dsLnN0ZW5jaWxPcChzdGVuY2lsRmFpbCxzdGVuY2lsWkZhaWwsc3RlbmNpbFpQYXNzKTtjdXJyZW50U3RlbmNpbEZhaWw9c3RlbmNpbEZhaWw7Y3VycmVudFN0ZW5jaWxaRmFpbD1zdGVuY2lsWkZhaWw7Y3VycmVudFN0ZW5jaWxaUGFzcz1zdGVuY2lsWlBhc3M7fX07dGhpcy5zZXRMb2NrZWQ9ZnVuY3Rpb24obG9jayl7bG9ja2VkPWxvY2s7fTt0aGlzLnNldENsZWFyPWZ1bmN0aW9uKHN0ZW5jaWwpe2lmKGN1cnJlbnRTdGVuY2lsQ2xlYXIhPT1zdGVuY2lsKXtnbC5jbGVhclN0ZW5jaWwoc3RlbmNpbCk7Y3VycmVudFN0ZW5jaWxDbGVhcj1zdGVuY2lsO319O3RoaXMucmVzZXQ9ZnVuY3Rpb24oKXtsb2NrZWQ9ZmFsc2U7Y3VycmVudFN0ZW5jaWxNYXNrPW51bGw7Y3VycmVudFN0ZW5jaWxGdW5jPW51bGw7Y3VycmVudFN0ZW5jaWxSZWY9bnVsbDtjdXJyZW50U3RlbmNpbEZ1bmNNYXNrPW51bGw7Y3VycmVudFN0ZW5jaWxGYWlsPW51bGw7Y3VycmVudFN0ZW5jaWxaRmFpbD1udWxsO2N1cnJlbnRTdGVuY2lsWlBhc3M9bnVsbDtjdXJyZW50U3RlbmNpbENsZWFyPW51bGw7fTt9Oy8vIEZpbGU6c3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTFVuaWZvcm1zLmpzXG4vKipcclxuICpcclxuICogVW5pZm9ybXMgb2YgYSBwcm9ncmFtLlxyXG4gKiBUaG9zZSBmb3JtIGEgdHJlZSBzdHJ1Y3R1cmUgd2l0aCBhIHNwZWNpYWwgdG9wLWxldmVsIGNvbnRhaW5lciBmb3IgdGhlIHJvb3QsXHJcbiAqIHdoaWNoIHlvdSBnZXQgYnkgY2FsbGluZyAnbmV3IFdlYkdMVW5pZm9ybXMoIGdsLCBwcm9ncmFtLCByZW5kZXJlciApJy5cclxuICpcclxuICpcclxuICogUHJvcGVydGllcyBvZiBpbm5lciBub2RlcyBpbmNsdWRpbmcgdGhlIHRvcC1sZXZlbCBjb250YWluZXI6XHJcbiAqXHJcbiAqIC5zZXEgLSBhcnJheSBvZiBuZXN0ZWQgdW5pZm9ybXNcclxuICogLm1hcCAtIG5lc3RlZCB1bmlmb3JtcyBieSBuYW1lXHJcbiAqXHJcbiAqXHJcbiAqIE1ldGhvZHMgb2YgYWxsIG5vZGVzIGV4Y2VwdCB0aGUgdG9wLWxldmVsIGNvbnRhaW5lcjpcclxuICpcclxuICogLnNldFZhbHVlKCBnbCwgdmFsdWUsIFtyZW5kZXJlcl0gKVxyXG4gKlxyXG4gKiBcdFx0dXBsb2FkcyBhIHVuaWZvcm0gdmFsdWUocylcclxuICogIFx0dGhlICdyZW5kZXJlcicgcGFyYW1ldGVyIGlzIG5lZWRlZCBmb3Igc2FtcGxlciB1bmlmb3Jtc1xyXG4gKlxyXG4gKlxyXG4gKiBTdGF0aWMgbWV0aG9kcyBvZiB0aGUgdG9wLWxldmVsIGNvbnRhaW5lciAocmVuZGVyZXIgZmFjdG9yaXphdGlvbnMpOlxyXG4gKlxyXG4gKiAudXBsb2FkKCBnbCwgc2VxLCB2YWx1ZXMsIHJlbmRlcmVyIClcclxuICpcclxuICogXHRcdHNldHMgdW5pZm9ybXMgaW4gJ3NlcScgdG8gJ3ZhbHVlc1tpZF0udmFsdWUnXHJcbiAqXHJcbiAqIC5zZXFXaXRoVmFsdWUoIHNlcSwgdmFsdWVzICkgOiBmaWx0ZXJlZFNlcVxyXG4gKlxyXG4gKiBcdFx0ZmlsdGVycyAnc2VxJyBlbnRyaWVzIHdpdGggY29ycmVzcG9uZGluZyBlbnRyeSBpbiB2YWx1ZXNcclxuICpcclxuICogLnNwbGl0RHluYW1pYyggc2VxLCB2YWx1ZXMgKSA6IGZpbHRlcmVkU2VxXHJcbiAqXHJcbiAqIFx0XHRmaWx0ZXJzICdzZXEnIGVudHJpZXMgd2l0aCBkeW5hbWljIGVudHJ5IGFuZCByZW1vdmVzIHRoZW0gZnJvbSAnc2VxJ1xyXG4gKlxyXG4gKlxyXG4gKiBNZXRob2RzIG9mIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyIChyZW5kZXJlciBmYWN0b3JpemF0aW9ucyk6XHJcbiAqXHJcbiAqIC5zZXRWYWx1ZSggZ2wsIG5hbWUsIHZhbHVlIClcclxuICpcclxuICogXHRcdHNldHMgdW5pZm9ybSB3aXRoICBuYW1lICduYW1lJyB0byAndmFsdWUnXHJcbiAqXHJcbiAqIC5zZXQoIGdsLCBvYmosIHByb3AgKVxyXG4gKlxyXG4gKiBcdFx0c2V0cyB1bmlmb3JtIGZyb20gb2JqZWN0IGFuZCBwcm9wZXJ0eSB3aXRoIHNhbWUgbmFtZSB0aGFuIHVuaWZvcm1cclxuICpcclxuICogLnNldE9wdGlvbmFsKCBnbCwgb2JqLCBwcm9wIClcclxuICpcclxuICogXHRcdGxpa2UgLnNldCBmb3IgYW4gb3B0aW9uYWwgcHJvcGVydHkgb2YgdGhlIG9iamVjdFxyXG4gKlxyXG4gKlxyXG4gKiBAYXV0aG9yIHRzY2h3XHJcbiAqXHJcbiAqL1RIUkVFLldlYkdMVW5pZm9ybXM9ZnVuY3Rpb24oKXsvLyBzY29wZVxuLy8gLS0tIEJhc2UgZm9yIGlubmVyIG5vZGVzIChpbmNsdWRpbmcgdGhlIHJvb3QpIC0tLVxudmFyIFVuaWZvcm1Db250YWluZXI9ZnVuY3Rpb24oKXt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fTt9LC8vIC0tLSBVdGlsaXRpZXMgLS0tXG4vLyBBcnJheSBDYWNoZXMgKHByb3ZpZGUgdHlwZWQgYXJyYXlzIGZvciB0ZW1wb3JhcnkgYnkgc2l6ZSlcbmFycmF5Q2FjaGVGMzI9W10sYXJyYXlDYWNoZUkzMj1bXSx1bmNhY2hlVGVtcG9yYXJ5QXJyYXlzPWZ1bmN0aW9uKCl7YXJyYXlDYWNoZUYzMi5sZW5ndGg9MDthcnJheUNhY2hlSTMyLmxlbmd0aD0wO30sLy8gRmxhdHRlbmluZyBmb3IgYXJyYXlzIG9mIHZlY3RvcnMgYW5kIG1hdHJpY2VzXG5mbGF0dGVuPWZ1bmN0aW9uKGFycmF5LG5CbG9ja3MsYmxvY2tTaXplKXt2YXIgZmlyc3RFbGVtPWFycmF5WzBdO2lmKGZpcnN0RWxlbTw9MHx8Zmlyc3RFbGVtPjApcmV0dXJuIGFycmF5Oy8vIHVub3B0aW1pemVkOiAhIGlzTmFOKCBmaXJzdEVsZW0gKVxuLy8gc2VlIGh0dHA6Ly9qYWNrc29uZHVuc3Rhbi5jb20vYXJ0aWNsZXMvOTgzXG52YXIgbj1uQmxvY2tzKmJsb2NrU2l6ZSxyPWFycmF5Q2FjaGVGMzJbbl07aWYocj09PXVuZGVmaW5lZCl7cj1uZXcgRmxvYXQzMkFycmF5KG4pO2FycmF5Q2FjaGVGMzJbbl09cjt9aWYobkJsb2NrcyE9PTApe2ZpcnN0RWxlbS50b0FycmF5KHIsMCk7Zm9yKHZhciBpPTEsb2Zmc2V0PTA7aSE9PW5CbG9ja3M7KytpKXtvZmZzZXQrPWJsb2NrU2l6ZTthcnJheVtpXS50b0FycmF5KHIsb2Zmc2V0KTt9fXJldHVybiByO30sLy8gVGV4dHVyZSB1bml0IGFsbG9jYXRpb25cbmFsbG9jVGV4VW5pdHM9ZnVuY3Rpb24ocmVuZGVyZXIsbil7dmFyIHI9YXJyYXlDYWNoZUkzMltuXTtpZihyPT09dW5kZWZpbmVkKXtyPW5ldyBJbnQzMkFycmF5KG4pO2FycmF5Q2FjaGVJMzJbbl09cjt9Zm9yKHZhciBpPTA7aSE9PW47KytpKXJbaV09cmVuZGVyZXIuYWxsb2NUZXh0dXJlVW5pdCgpO3JldHVybiByO30sLy8gLS0tIFNldHRlcnMgLS0tXG4vLyBOb3RlOiBEZWZpbmluZyB0aGVzZSBtZXRob2RzIGV4dGVybmFsbHksIGJlY2F1c2UgdGhleSBjb21lIGluIGEgYnVuY2hcbi8vIGFuZCB0aGlzIHdheSB0aGVpciBuYW1lcyBtaW5pZnkuXG4vLyBTaW5nbGUgc2NhbGFyXG5zZXRWYWx1ZTFmPWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm0xZih0aGlzLmFkZHIsdik7fSxzZXRWYWx1ZTFpPWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdik7fSwvLyBTaW5nbGUgZmxvYXQgdmVjdG9yIChmcm9tIGZsYXQgYXJyYXkgb3IgVEhSRUUuVmVjdG9yTilcbnNldFZhbHVlMmZ2PWZ1bmN0aW9uKGdsLHYpe2lmKHYueD09PXVuZGVmaW5lZClnbC51bmlmb3JtMmZ2KHRoaXMuYWRkcix2KTtlbHNlIGdsLnVuaWZvcm0yZih0aGlzLmFkZHIsdi54LHYueSk7fSxzZXRWYWx1ZTNmdj1mdW5jdGlvbihnbCx2KXtpZih2LnghPT11bmRlZmluZWQpZ2wudW5pZm9ybTNmKHRoaXMuYWRkcix2Lngsdi55LHYueik7ZWxzZSBpZih2LnIhPT11bmRlZmluZWQpZ2wudW5pZm9ybTNmKHRoaXMuYWRkcix2LnIsdi5nLHYuYik7ZWxzZSBnbC51bmlmb3JtM2Z2KHRoaXMuYWRkcix2KTt9LHNldFZhbHVlNGZ2PWZ1bmN0aW9uKGdsLHYpe2lmKHYueD09PXVuZGVmaW5lZClnbC51bmlmb3JtNGZ2KHRoaXMuYWRkcix2KTtlbHNlIGdsLnVuaWZvcm00Zih0aGlzLmFkZHIsdi54LHYueSx2Lnosdi53KTt9LC8vIFNpbmdsZSBtYXRyaXggKGZyb20gZmxhdCBhcnJheSBvciBNYXRyaXhOKVxuc2V0VmFsdWUyZm09ZnVuY3Rpb24oZ2wsdil7Z2wudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsZmFsc2Usdi5lbGVtZW50c3x8dik7fSxzZXRWYWx1ZTNmbT1mdW5jdGlvbihnbCx2KXtnbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkcixmYWxzZSx2LmVsZW1lbnRzfHx2KTt9LHNldFZhbHVlNGZtPWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLGZhbHNlLHYuZWxlbWVudHN8fHYpO30sLy8gU2luZ2xlIHRleHR1cmUgKDJEIC8gQ3ViZSlcbnNldFZhbHVlVDE9ZnVuY3Rpb24oZ2wsdixyZW5kZXJlcil7dmFyIHVuaXQ9cmVuZGVyZXIuYWxsb2NUZXh0dXJlVW5pdCgpO2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdW5pdCk7aWYodilyZW5kZXJlci5zZXRUZXh0dXJlMkQodix1bml0KTt9LHNldFZhbHVlVDY9ZnVuY3Rpb24oZ2wsdixyZW5kZXJlcil7dmFyIHVuaXQ9cmVuZGVyZXIuYWxsb2NUZXh0dXJlVW5pdCgpO2dsLnVuaWZvcm0xaSh0aGlzLmFkZHIsdW5pdCk7aWYodilyZW5kZXJlci5zZXRUZXh0dXJlQ3ViZSh2LHVuaXQpO30sLy8gSW50ZWdlciAvIEJvb2xlYW4gdmVjdG9ycyBvciBhcnJheXMgdGhlcmVvZiAoYWx3YXlzIGZsYXQgYXJyYXlzKVxuc2V0VmFsdWUyaXY9ZnVuY3Rpb24oZ2wsdil7Z2wudW5pZm9ybTJpdih0aGlzLmFkZHIsdik7fSxzZXRWYWx1ZTNpdj1mdW5jdGlvbihnbCx2KXtnbC51bmlmb3JtM2l2KHRoaXMuYWRkcix2KTt9LHNldFZhbHVlNGl2PWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm00aXYodGhpcy5hZGRyLHYpO30sLy8gSGVscGVyIHRvIHBpY2sgdGhlIHJpZ2h0IHNldHRlciBmb3IgdGhlIHNpbmd1bGFyIGNhc2VcbmdldFNpbmd1bGFyU2V0dGVyPWZ1bmN0aW9uKHR5cGUpe3N3aXRjaCh0eXBlKXtjYXNlIDB4MTQwNjpyZXR1cm4gc2V0VmFsdWUxZjsvLyBGTE9BVFxuY2FzZSAweDhiNTA6cmV0dXJuIHNldFZhbHVlMmZ2Oy8vIF9WRUMyXG5jYXNlIDB4OGI1MTpyZXR1cm4gc2V0VmFsdWUzZnY7Ly8gX1ZFQzNcbmNhc2UgMHg4YjUyOnJldHVybiBzZXRWYWx1ZTRmdjsvLyBfVkVDNFxuY2FzZSAweDhiNWE6cmV0dXJuIHNldFZhbHVlMmZtOy8vIF9NQVQyXG5jYXNlIDB4OGI1YjpyZXR1cm4gc2V0VmFsdWUzZm07Ly8gX01BVDNcbmNhc2UgMHg4YjVjOnJldHVybiBzZXRWYWx1ZTRmbTsvLyBfTUFUNFxuY2FzZSAweDhiNWU6cmV0dXJuIHNldFZhbHVlVDE7Ly8gU0FNUExFUl8yRFxuY2FzZSAweDhiNjA6cmV0dXJuIHNldFZhbHVlVDY7Ly8gU0FNUExFUl9DVUJFXG5jYXNlIDB4MTQwNDpjYXNlIDB4OGI1NjpyZXR1cm4gc2V0VmFsdWUxaTsvLyBJTlQsIEJPT0xcbmNhc2UgMHg4YjUzOmNhc2UgMHg4YjU3OnJldHVybiBzZXRWYWx1ZTJpdjsvLyBfVkVDMlxuY2FzZSAweDhiNTQ6Y2FzZSAweDhiNTg6cmV0dXJuIHNldFZhbHVlM2l2Oy8vIF9WRUMzXG5jYXNlIDB4OGI1NTpjYXNlIDB4OGI1OTpyZXR1cm4gc2V0VmFsdWU0aXY7Ly8gX1ZFQzRcbn19LC8vIEFycmF5IG9mIHNjYWxhcnNcbnNldFZhbHVlMWZ2PWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm0xZnYodGhpcy5hZGRyLHYpO30sc2V0VmFsdWUxaXY9ZnVuY3Rpb24oZ2wsdil7Z2wudW5pZm9ybTFpdih0aGlzLmFkZHIsdik7fSwvLyBBcnJheSBvZiB2ZWN0b3JzIChmbGF0IG9yIGZyb20gVEhSRUUgY2xhc3NlcylcbnNldFZhbHVlVjJhPWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm0yZnYodGhpcy5hZGRyLGZsYXR0ZW4odix0aGlzLnNpemUsMikpO30sc2V0VmFsdWVWM2E9ZnVuY3Rpb24oZ2wsdil7Z2wudW5pZm9ybTNmdih0aGlzLmFkZHIsZmxhdHRlbih2LHRoaXMuc2l6ZSwzKSk7fSxzZXRWYWx1ZVY0YT1mdW5jdGlvbihnbCx2KXtnbC51bmlmb3JtNGZ2KHRoaXMuYWRkcixmbGF0dGVuKHYsdGhpcy5zaXplLDQpKTt9LC8vIEFycmF5IG9mIG1hdHJpY2VzIChmbGF0IG9yIGZyb20gVEhSRUUgY2xhc2VzKVxuc2V0VmFsdWVNMmE9ZnVuY3Rpb24oZ2wsdil7Z2wudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsZmFsc2UsZmxhdHRlbih2LHRoaXMuc2l6ZSw0KSk7fSxzZXRWYWx1ZU0zYT1mdW5jdGlvbihnbCx2KXtnbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkcixmYWxzZSxmbGF0dGVuKHYsdGhpcy5zaXplLDkpKTt9LHNldFZhbHVlTTRhPWZ1bmN0aW9uKGdsLHYpe2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLGZhbHNlLGZsYXR0ZW4odix0aGlzLnNpemUsMTYpKTt9LC8vIEFycmF5IG9mIHRleHR1cmVzICgyRCAvIEN1YmUpXG5zZXRWYWx1ZVQxYT1mdW5jdGlvbihnbCx2LHJlbmRlcmVyKXt2YXIgbj12Lmxlbmd0aCx1bml0cz1hbGxvY1RleFVuaXRzKHJlbmRlcmVyLG4pO2dsLnVuaWZvcm0xaXYodGhpcy5hZGRyLHVuaXRzKTtmb3IodmFyIGk9MDtpIT09bjsrK2kpe3ZhciB0ZXg9dltpXTtpZih0ZXgpcmVuZGVyZXIuc2V0VGV4dHVyZTJEKHRleCx1bml0c1tpXSk7fX0sc2V0VmFsdWVUNmE9ZnVuY3Rpb24oZ2wsdixyZW5kZXJlcil7dmFyIG49di5sZW5ndGgsdW5pdHM9YWxsb2NUZXhVbml0cyhyZW5kZXJlcixuKTtnbC51bmlmb3JtMWl2KHRoaXMuYWRkcix1bml0cyk7Zm9yKHZhciBpPTA7aSE9PW47KytpKXt2YXIgdGV4PXZbaV07aWYodGV4KXJlbmRlcmVyLnNldFRleHR1cmVDdWJlKHRleCx1bml0c1tpXSk7fX0sLy8gSGVscGVyIHRvIHBpY2sgdGhlIHJpZ2h0IHNldHRlciBmb3IgYSBwdXJlIChib3R0b20tbGV2ZWwpIGFycmF5XG5nZXRQdXJlQXJyYXlTZXR0ZXI9ZnVuY3Rpb24odHlwZSl7c3dpdGNoKHR5cGUpe2Nhc2UgMHgxNDA2OnJldHVybiBzZXRWYWx1ZTFmdjsvLyBGTE9BVFxuY2FzZSAweDhiNTA6cmV0dXJuIHNldFZhbHVlVjJhOy8vIF9WRUMyXG5jYXNlIDB4OGI1MTpyZXR1cm4gc2V0VmFsdWVWM2E7Ly8gX1ZFQzNcbmNhc2UgMHg4YjUyOnJldHVybiBzZXRWYWx1ZVY0YTsvLyBfVkVDNFxuY2FzZSAweDhiNWE6cmV0dXJuIHNldFZhbHVlTTJhOy8vIF9NQVQyXG5jYXNlIDB4OGI1YjpyZXR1cm4gc2V0VmFsdWVNM2E7Ly8gX01BVDNcbmNhc2UgMHg4YjVjOnJldHVybiBzZXRWYWx1ZU00YTsvLyBfTUFUNFxuY2FzZSAweDhiNWU6cmV0dXJuIHNldFZhbHVlVDFhOy8vIFNBTVBMRVJfMkRcbmNhc2UgMHg4YjYwOnJldHVybiBzZXRWYWx1ZVQ2YTsvLyBTQU1QTEVSX0NVQkVcbmNhc2UgMHgxNDA0OmNhc2UgMHg4YjU2OnJldHVybiBzZXRWYWx1ZTFpdjsvLyBJTlQsIEJPT0xcbmNhc2UgMHg4YjUzOmNhc2UgMHg4YjU3OnJldHVybiBzZXRWYWx1ZTJpdjsvLyBfVkVDMlxuY2FzZSAweDhiNTQ6Y2FzZSAweDhiNTg6cmV0dXJuIHNldFZhbHVlM2l2Oy8vIF9WRUMzXG5jYXNlIDB4OGI1NTpjYXNlIDB4OGI1OTpyZXR1cm4gc2V0VmFsdWU0aXY7Ly8gX1ZFQzRcbn19LC8vIC0tLSBVbmlmb3JtIENsYXNzZXMgLS0tXG5TaW5nbGVVbmlmb3JtPWZ1bmN0aW9uIFNpbmdsZVVuaWZvcm0oaWQsYWN0aXZlSW5mbyxhZGRyKXt0aGlzLmlkPWlkO3RoaXMuYWRkcj1hZGRyO3RoaXMuc2V0VmFsdWU9Z2V0U2luZ3VsYXJTZXR0ZXIoYWN0aXZlSW5mby50eXBlKTsvLyB0aGlzLnBhdGggPSBhY3RpdmVJbmZvLm5hbWU7IC8vIERFQlVHXG59LFB1cmVBcnJheVVuaWZvcm09ZnVuY3Rpb24oaWQsYWN0aXZlSW5mbyxhZGRyKXt0aGlzLmlkPWlkO3RoaXMuYWRkcj1hZGRyO3RoaXMuc2l6ZT1hY3RpdmVJbmZvLnNpemU7dGhpcy5zZXRWYWx1ZT1nZXRQdXJlQXJyYXlTZXR0ZXIoYWN0aXZlSW5mby50eXBlKTsvLyB0aGlzLnBhdGggPSBhY3RpdmVJbmZvLm5hbWU7IC8vIERFQlVHXG59LFN0cnVjdHVyZWRVbmlmb3JtPWZ1bmN0aW9uKGlkKXt0aGlzLmlkPWlkO1VuaWZvcm1Db250YWluZXIuY2FsbCh0aGlzKTsvLyBtaXgtaW5cbn07U3RydWN0dXJlZFVuaWZvcm0ucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGdsLHZhbHVlKXsvLyBOb3RlOiBEb24ndCBuZWVkIGFuIGV4dHJhICdyZW5kZXJlcicgcGFyYW1ldGVyLCBzaW5jZSBzYW1wbGVyc1xuLy8gYXJlIG5vdCBhbGxvd2VkIGluIHN0cnVjdHVyZWQgdW5pZm9ybXMuXG52YXIgc2VxPXRoaXMuc2VxO2Zvcih2YXIgaT0wLG49c2VxLmxlbmd0aDtpIT09bjsrK2kpe3ZhciB1PXNlcVtpXTt1LnNldFZhbHVlKGdsLHZhbHVlW3UuaWRdKTt9fTsvLyAtLS0gVG9wLWxldmVsIC0tLVxuLy8gUGFyc2VyIC0gYnVpbGRzIHVwIHRoZSBwcm9wZXJ0eSB0cmVlIGZyb20gdGhlIHBhdGggc3RyaW5nc1xudmFyIFJlUGF0aFBhcnQ9LyhbXFx3XFxkX10rKShcXF0pPyhcXFt8XFwuKT8vZywvLyBleHRyYWN0c1xuLy8gXHQtIHRoZSBpZGVudGlmaWVyIChtZW1iZXIgbmFtZSBvciBhcnJheSBpbmRleClcbi8vICAtIGZvbGxvd2VkIGJ5IGFuIG9wdGlvbmFsIHJpZ2h0IGJyYWNrZXQgKGZvdW5kIHdoZW4gYXJyYXkgaW5kZXgpXG4vLyAgLSBmb2xsb3dlZCBieSBhbiBvcHRpb25hbCBsZWZ0IGJyYWNrZXQgb3IgZG90ICh0eXBlIG9mIHN1YnNjcmlwdClcbi8vXG4vLyBOb3RlOiBUaGVzZSBwb3J0aW9ucyBjYW4gYmUgcmVhZCBpbiBhIG5vbi1vdmVybGFwcGluZyBmYXNoaW9uIGFuZFxuLy8gYWxsb3cgc3RyYWlnaHRmb3J3YXJkIHBhcnNpbmcgb2YgdGhlIGhpZXJhcmNoeSB0aGF0IFdlYkdMIGVuY29kZXNcbi8vIGluIHRoZSB1bmlmb3JtIG5hbWVzLlxuYWRkVW5pZm9ybT1mdW5jdGlvbihjb250YWluZXIsdW5pZm9ybU9iamVjdCl7Y29udGFpbmVyLnNlcS5wdXNoKHVuaWZvcm1PYmplY3QpO2NvbnRhaW5lci5tYXBbdW5pZm9ybU9iamVjdC5pZF09dW5pZm9ybU9iamVjdDt9LHBhcnNlVW5pZm9ybT1mdW5jdGlvbihhY3RpdmVJbmZvLGFkZHIsY29udGFpbmVyKXt2YXIgcGF0aD1hY3RpdmVJbmZvLm5hbWUscGF0aExlbmd0aD1wYXRoLmxlbmd0aDsvLyByZXNldCBSZWdFeHAgb2JqZWN0LCBiZWNhdXNlIG9mIHRoZSBlYXJseSBleGl0IG9mIGEgcHJldmlvdXMgcnVuXG5SZVBhdGhQYXJ0Lmxhc3RJbmRleD0wO2Zvcig7Oyl7dmFyIG1hdGNoPVJlUGF0aFBhcnQuZXhlYyhwYXRoKSxtYXRjaEVuZD1SZVBhdGhQYXJ0Lmxhc3RJbmRleCxpZD1tYXRjaFsxXSxpZElzSW5kZXg9bWF0Y2hbMl09PT0nXScsc3Vic2NyaXB0PW1hdGNoWzNdO2lmKGlkSXNJbmRleClpZD1pZHwwOy8vIGNvbnZlcnQgdG8gaW50ZWdlclxuaWYoc3Vic2NyaXB0PT09dW5kZWZpbmVkfHxzdWJzY3JpcHQ9PT0nWycmJm1hdGNoRW5kKzI9PT1wYXRoTGVuZ3RoKXsvLyBiYXJlIG5hbWUgb3IgXCJwdXJlXCIgYm90dG9tLWxldmVsIGFycmF5IFwiWzBdXCIgc3VmZml4XG5hZGRVbmlmb3JtKGNvbnRhaW5lcixzdWJzY3JpcHQ9PT11bmRlZmluZWQ/bmV3IFNpbmdsZVVuaWZvcm0oaWQsYWN0aXZlSW5mbyxhZGRyKTpuZXcgUHVyZUFycmF5VW5pZm9ybShpZCxhY3RpdmVJbmZvLGFkZHIpKTticmVhazt9ZWxzZXsvLyBzdGVwIGludG8gaW5uZXIgbm9kZSAvIGNyZWF0ZSBpdCBpbiBjYXNlIGl0IGRvZXNuJ3QgZXhpc3RcbnZhciBtYXA9Y29udGFpbmVyLm1hcCxuZXh0PW1hcFtpZF07aWYobmV4dD09PXVuZGVmaW5lZCl7bmV4dD1uZXcgU3RydWN0dXJlZFVuaWZvcm0oaWQpO2FkZFVuaWZvcm0oY29udGFpbmVyLG5leHQpO31jb250YWluZXI9bmV4dDt9fX0sLy8gUm9vdCBDb250YWluZXJcbldlYkdMVW5pZm9ybXM9ZnVuY3Rpb24gV2ViR0xVbmlmb3JtcyhnbCxwcm9ncmFtLHJlbmRlcmVyKXtVbmlmb3JtQ29udGFpbmVyLmNhbGwodGhpcyk7dGhpcy5yZW5kZXJlcj1yZW5kZXJlcjt2YXIgbj1nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sZ2wuQUNUSVZFX1VOSUZPUk1TKTtmb3IodmFyIGk9MDtpIT09bjsrK2kpe3ZhciBpbmZvPWdsLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSxpKSxwYXRoPWluZm8ubmFtZSxhZGRyPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLHBhdGgpO3BhcnNlVW5pZm9ybShpbmZvLGFkZHIsdGhpcyk7fX07V2ViR0xVbmlmb3Jtcy5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oZ2wsbmFtZSx2YWx1ZSl7dmFyIHU9dGhpcy5tYXBbbmFtZV07aWYodSE9PXVuZGVmaW5lZCl1LnNldFZhbHVlKGdsLHZhbHVlLHRoaXMucmVuZGVyZXIpO307V2ViR0xVbmlmb3Jtcy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGdsLG9iamVjdCxuYW1lKXt2YXIgdT10aGlzLm1hcFtuYW1lXTtpZih1IT09dW5kZWZpbmVkKXUuc2V0VmFsdWUoZ2wsb2JqZWN0W25hbWVdLHRoaXMucmVuZGVyZXIpO307V2ViR0xVbmlmb3Jtcy5wcm90b3R5cGUuc2V0T3B0aW9uYWw9ZnVuY3Rpb24oZ2wsb2JqZWN0LG5hbWUpe3ZhciB2PW9iamVjdFtuYW1lXTtpZih2IT09dW5kZWZpbmVkKXRoaXMuc2V0VmFsdWUoZ2wsbmFtZSx2KTt9Oy8vIFN0YXRpYyBpbnRlcmZhY2VcbldlYkdMVW5pZm9ybXMudXBsb2FkPWZ1bmN0aW9uKGdsLHNlcSx2YWx1ZXMscmVuZGVyZXIpe2Zvcih2YXIgaT0wLG49c2VxLmxlbmd0aDtpIT09bjsrK2kpe3ZhciB1PXNlcVtpXSx2PXZhbHVlc1t1LmlkXTtpZih2Lm5lZWRzVXBkYXRlIT09ZmFsc2Upey8vIG5vdGU6IGFsd2F5cyB1cGRhdGluZyB3aGVuIC5uZWVkc1VwZGF0ZSBpcyB1bmRlZmluZWRcbnUuc2V0VmFsdWUoZ2wsdi52YWx1ZSxyZW5kZXJlcik7fX19O1dlYkdMVW5pZm9ybXMuc2VxV2l0aFZhbHVlPWZ1bmN0aW9uKHNlcSx2YWx1ZXMpe3ZhciByPVtdO2Zvcih2YXIgaT0wLG49c2VxLmxlbmd0aDtpIT09bjsrK2kpe3ZhciB1PXNlcVtpXTtpZih1LmlkIGluIHZhbHVlcylyLnB1c2godSk7fXJldHVybiByO307V2ViR0xVbmlmb3Jtcy5zcGxpdER5bmFtaWM9ZnVuY3Rpb24oc2VxLHZhbHVlcyl7dmFyIHI9bnVsbCxuPXNlcS5sZW5ndGgsdz0wO2Zvcih2YXIgaT0wO2khPT1uOysraSl7dmFyIHU9c2VxW2ldLHY9dmFsdWVzW3UuaWRdO2lmKHYmJnYuZHluYW1pYz09PXRydWUpe2lmKHI9PT1udWxsKXI9W107ci5wdXNoKHUpO31lbHNley8vIGluLXBsYWNlIGNvbXBhY3QgJ3NlcScsIHJlbW92aW5nIHRoZSBtYXRjaGVzXG5pZih3PGkpc2VxW3ddPXU7Kyt3O319aWYodzxuKXNlcS5sZW5ndGg9dztyZXR1cm4gcjt9O1dlYkdMVW5pZm9ybXMuZXZhbER5bmFtaWM9ZnVuY3Rpb24oc2VxLHZhbHVlcyxvYmplY3QsY2FtZXJhKXtmb3IodmFyIGk9MCxuPXNlcS5sZW5ndGg7aSE9PW47KytpKXt2YXIgdj12YWx1ZXNbc2VxW2ldLmlkXSxmPXYub25VcGRhdGVDYWxsYmFjaztpZihmIT09dW5kZWZpbmVkKWYuY2FsbCh2LG9iamVjdCxjYW1lcmEpO319O3JldHVybiBXZWJHTFVuaWZvcm1zO30oKTsvLyBGaWxlOnNyYy9yZW5kZXJlcnMvd2ViZ2wvcGx1Z2lucy9MZW5zRmxhcmVQbHVnaW4uanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1pa2FlbCBlbXRpbmdlciAvIGh0dHA6Ly9nb21vLnNlL1xyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKi9USFJFRS5MZW5zRmxhcmVQbHVnaW49ZnVuY3Rpb24ocmVuZGVyZXIsZmxhcmVzKXt2YXIgZ2w9cmVuZGVyZXIuY29udGV4dDt2YXIgc3RhdGU9cmVuZGVyZXIuc3RhdGU7dmFyIHZlcnRleEJ1ZmZlcixlbGVtZW50QnVmZmVyO3ZhciBzaGFkZXIscHJvZ3JhbSxhdHRyaWJ1dGVzLHVuaWZvcm1zO3ZhciB0ZW1wVGV4dHVyZSxvY2NsdXNpb25UZXh0dXJlO2Z1bmN0aW9uIGluaXQoKXt2YXIgdmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShbLTEsLTEsMCwwLDEsLTEsMSwwLDEsMSwxLDEsLTEsMSwwLDFdKTt2YXIgZmFjZXM9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pOy8vIGJ1ZmZlcnNcbnZlcnRleEJ1ZmZlcj1nbC5jcmVhdGVCdWZmZXIoKTtlbGVtZW50QnVmZmVyPWdsLmNyZWF0ZUJ1ZmZlcigpO2dsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZlcnRleEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsdmVydGljZXMsZ2wuU1RBVElDX0RSQVcpO2dsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZWxlbWVudEJ1ZmZlcik7Z2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixmYWNlcyxnbC5TVEFUSUNfRFJBVyk7Ly8gdGV4dHVyZXNcbnRlbXBUZXh0dXJlPWdsLmNyZWF0ZVRleHR1cmUoKTtvY2NsdXNpb25UZXh0dXJlPWdsLmNyZWF0ZVRleHR1cmUoKTtzdGF0ZS5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELHRlbXBUZXh0dXJlKTtnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsMCxnbC5SR0IsMTYsMTYsMCxnbC5SR0IsZ2wuVU5TSUdORURfQllURSxudWxsKTtnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9XUkFQX1MsZ2wuQ0xBTVBfVE9fRURHRSk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfV1JBUF9ULGdsLkNMQU1QX1RPX0VER0UpO2dsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX01BR19GSUxURVIsZ2wuTkVBUkVTVCk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfTUlOX0ZJTFRFUixnbC5ORUFSRVNUKTtzdGF0ZS5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELG9jY2x1c2lvblRleHR1cmUpO2dsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwwLGdsLlJHQkEsMTYsMTYsMCxnbC5SR0JBLGdsLlVOU0lHTkVEX0JZVEUsbnVsbCk7Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfV1JBUF9TLGdsLkNMQU1QX1RPX0VER0UpO2dsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX1dSQVBfVCxnbC5DTEFNUF9UT19FREdFKTtnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9NQUdfRklMVEVSLGdsLk5FQVJFU1QpO2dsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX01JTl9GSUxURVIsZ2wuTkVBUkVTVCk7c2hhZGVyPXt2ZXJ0ZXhTaGFkZXI6W1widW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1wiLFwidW5pZm9ybSB2ZWMzIHNjcmVlblBvc2l0aW9uO1wiLFwidW5pZm9ybSB2ZWMyIHNjYWxlO1wiLFwidW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcIixcInVuaWZvcm0gc2FtcGxlcjJEIG9jY2x1c2lvbk1hcDtcIixcImF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzIgdXY7XCIsXCJ2YXJ5aW5nIHZlYzIgdlVWO1wiLFwidmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcIixcInZvaWQgbWFpbigpIHtcIixcInZVViA9IHV2O1wiLFwidmVjMiBwb3MgPSBwb3NpdGlvbjtcIixcImlmICggcmVuZGVyVHlwZSA9PSAyICkge1wiLFwidmVjNCB2aXNpYmlsaXR5ID0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC4xICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC4xICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC4xICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC41ICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC45ICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC45ICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC45ICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC41ICkgKTtcIixcInZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC41ICkgKTtcIixcInZWaXNpYmlsaXR5ID0gICAgICAgIHZpc2liaWxpdHkuciAvIDkuMDtcIixcInZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuZyAvIDkuMDtcIixcInZWaXNpYmlsaXR5ICo9ICAgICAgIHZpc2liaWxpdHkuYiAvIDkuMDtcIixcInZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuYSAvIDkuMDtcIixcInBvcy54ID0gY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XCIsXCJwb3MueSA9IHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1wiLFwifVwiLFwiZ2xfUG9zaXRpb24gPSB2ZWM0KCAoIHBvcyAqIHNjYWxlICsgc2NyZWVuUG9zaXRpb24ueHkgKS54eSwgc2NyZWVuUG9zaXRpb24ueiwgMS4wICk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgbWFwO1wiLFwidW5pZm9ybSBmbG9hdCBvcGFjaXR5O1wiLFwidW5pZm9ybSB2ZWMzIGNvbG9yO1wiLFwidmFyeWluZyB2ZWMyIHZVVjtcIixcInZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XCIsXCJ2b2lkIG1haW4oKSB7XCIsLy8gcGluayBzcXVhcmVcblwiaWYgKCByZW5kZXJUeXBlID09IDAgKSB7XCIsXCJnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMS4wLCAwLjAgKTtcIiwvLyByZXN0b3JlXG5cIn0gZWxzZSBpZiAoIHJlbmRlclR5cGUgPT0gMSApIHtcIixcImdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcIiwvLyBmbGFyZVxuXCJ9IGVsc2Uge1wiLFwidmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1wiLFwidGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2VmlzaWJpbGl0eTtcIixcImdsX0ZyYWdDb2xvciA9IHRleHR1cmU7XCIsXCJnbF9GcmFnQ29sb3IucmdiICo9IGNvbG9yO1wiLFwifVwiLFwifVwiXS5qb2luKFwiXFxuXCIpfTtwcm9ncmFtPWNyZWF0ZVByb2dyYW0oc2hhZGVyKTthdHRyaWJ1dGVzPXt2ZXJ0ZXg6Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSxcInBvc2l0aW9uXCIpLHV2OmdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sXCJ1dlwiKX07dW5pZm9ybXM9e3JlbmRlclR5cGU6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sXCJyZW5kZXJUeXBlXCIpLG1hcDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSxcIm1hcFwiKSxvY2NsdXNpb25NYXA6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sXCJvY2NsdXNpb25NYXBcIiksb3BhY2l0eTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSxcIm9wYWNpdHlcIiksY29sb3I6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sXCJjb2xvclwiKSxzY2FsZTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSxcInNjYWxlXCIpLHJvdGF0aW9uOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLFwicm90YXRpb25cIiksc2NyZWVuUG9zaXRpb246Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sXCJzY3JlZW5Qb3NpdGlvblwiKX07fS8qXHJcblx0ICogUmVuZGVyIGxlbnMgZmxhcmVzXHJcblx0ICogTWV0aG9kOiByZW5kZXJzIDE2eDE2IDB4ZmYwMGZmLWNvbG9yZWQgcG9pbnRzIHNjYXR0ZXJlZCBvdmVyIHRoZSBsaWdodCBzb3VyY2UgYXJlYSxcclxuXHQgKiAgICAgICAgIHJlYWRzIHRoZXNlIGJhY2sgYW5kIGNhbGN1bGF0ZXMgb2NjbHVzaW9uLlxyXG5cdCAqL3RoaXMucmVuZGVyPWZ1bmN0aW9uKHNjZW5lLGNhbWVyYSx2aWV3cG9ydCl7aWYoZmxhcmVzLmxlbmd0aD09PTApcmV0dXJuO3ZhciB0ZW1wUG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgaW52QXNwZWN0PXZpZXdwb3J0Lncvdmlld3BvcnQueixoYWxmVmlld3BvcnRXaWR0aD12aWV3cG9ydC56KjAuNSxoYWxmVmlld3BvcnRIZWlnaHQ9dmlld3BvcnQudyowLjU7dmFyIHNpemU9MTYvdmlld3BvcnQudyxzY2FsZT1uZXcgVEhSRUUuVmVjdG9yMihzaXplKmludkFzcGVjdCxzaXplKTt2YXIgc2NyZWVuUG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDApLHNjcmVlblBvc2l0aW9uUGl4ZWxzPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dmFyIHZhbGlkQXJlYT1uZXcgVEhSRUUuQm94MigpO3ZhbGlkQXJlYS5taW4uc2V0KDAsMCk7dmFsaWRBcmVhLm1heC5zZXQodmlld3BvcnQuei0xNix2aWV3cG9ydC53LTE2KTtpZihwcm9ncmFtPT09dW5kZWZpbmVkKXtpbml0KCk7fWdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7c3RhdGUuaW5pdEF0dHJpYnV0ZXMoKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlcy52ZXJ0ZXgpO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLnV2KTtzdGF0ZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpOy8vIGxvb3AgdGhyb3VnaCBhbGwgbGVucyBmbGFyZXMgdG8gdXBkYXRlIHRoZWlyIG9jY2x1c2lvbiBhbmQgcG9zaXRpb25zXG4vLyBzZXR1cCBnbCBhbmQgY29tbW9uIHVzZWQgYXR0cmlicy91bmlmb3Jtc1xuZ2wudW5pZm9ybTFpKHVuaWZvcm1zLm9jY2x1c2lvbk1hcCwwKTtnbC51bmlmb3JtMWkodW5pZm9ybXMubWFwLDEpO2dsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZlcnRleEJ1ZmZlcik7Z2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWJ1dGVzLnZlcnRleCwyLGdsLkZMT0FULGZhbHNlLDIqOCwwKTtnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYnV0ZXMudXYsMixnbC5GTE9BVCxmYWxzZSwyKjgsOCk7Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixlbGVtZW50QnVmZmVyKTtzdGF0ZS5kaXNhYmxlKGdsLkNVTExfRkFDRSk7c3RhdGUuc2V0RGVwdGhXcml0ZShmYWxzZSk7Zm9yKHZhciBpPTAsbD1mbGFyZXMubGVuZ3RoO2k8bDtpKyspe3NpemU9MTYvdmlld3BvcnQudztzY2FsZS5zZXQoc2l6ZSppbnZBc3BlY3Qsc2l6ZSk7Ly8gY2FsYyBvYmplY3Qgc2NyZWVuIHBvc2l0aW9uXG52YXIgZmxhcmU9ZmxhcmVzW2ldO3RlbXBQb3NpdGlvbi5zZXQoZmxhcmUubWF0cml4V29ybGQuZWxlbWVudHNbMTJdLGZsYXJlLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEzXSxmbGFyZS5tYXRyaXhXb3JsZC5lbGVtZW50c1sxNF0pO3RlbXBQb3NpdGlvbi5hcHBseU1hdHJpeDQoY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSk7dGVtcFBvc2l0aW9uLmFwcGx5UHJvamVjdGlvbihjYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7Ly8gc2V0dXAgYXJyYXlzIGZvciBnbCBwcm9ncmFtc1xuc2NyZWVuUG9zaXRpb24uY29weSh0ZW1wUG9zaXRpb24pOy8vIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGNvb3JkaW5hdGUgb2YgdGhlIGxvd2VyIGxlZnQgY29ybmVyIG9mIHRoZSBwaXhlbHMgdG8gY29weVxuc2NyZWVuUG9zaXRpb25QaXhlbHMueD12aWV3cG9ydC54K3NjcmVlblBvc2l0aW9uLngqaGFsZlZpZXdwb3J0V2lkdGgraGFsZlZpZXdwb3J0V2lkdGgtODtzY3JlZW5Qb3NpdGlvblBpeGVscy55PXZpZXdwb3J0Lnkrc2NyZWVuUG9zaXRpb24ueSpoYWxmVmlld3BvcnRIZWlnaHQraGFsZlZpZXdwb3J0SGVpZ2h0LTg7Ly8gc2NyZWVuIGN1bGxcbmlmKHZhbGlkQXJlYS5jb250YWluc1BvaW50KHNjcmVlblBvc2l0aW9uUGl4ZWxzKT09PXRydWUpey8vIHNhdmUgY3VycmVudCBSR0IgdG8gdGVtcCB0ZXh0dXJlXG5zdGF0ZS5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtzdGF0ZS5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELG51bGwpO3N0YXRlLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO3N0YXRlLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsdGVtcFRleHR1cmUpO2dsLmNvcHlUZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsMCxnbC5SR0Isc2NyZWVuUG9zaXRpb25QaXhlbHMueCxzY3JlZW5Qb3NpdGlvblBpeGVscy55LDE2LDE2LDApOy8vIHJlbmRlciBwaW5rIHF1YWRcbmdsLnVuaWZvcm0xaSh1bmlmb3Jtcy5yZW5kZXJUeXBlLDApO2dsLnVuaWZvcm0yZih1bmlmb3Jtcy5zY2FsZSxzY2FsZS54LHNjYWxlLnkpO2dsLnVuaWZvcm0zZih1bmlmb3Jtcy5zY3JlZW5Qb3NpdGlvbixzY3JlZW5Qb3NpdGlvbi54LHNjcmVlblBvc2l0aW9uLnksc2NyZWVuUG9zaXRpb24ueik7c3RhdGUuZGlzYWJsZShnbC5CTEVORCk7c3RhdGUuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO2dsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsNixnbC5VTlNJR05FRF9TSE9SVCwwKTsvLyBjb3B5IHJlc3VsdCB0byBvY2NsdXNpb25NYXBcbnN0YXRlLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO3N0YXRlLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsb2NjbHVzaW9uVGV4dHVyZSk7Z2wuY29weVRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwwLGdsLlJHQkEsc2NyZWVuUG9zaXRpb25QaXhlbHMueCxzY3JlZW5Qb3NpdGlvblBpeGVscy55LDE2LDE2LDApOy8vIHJlc3RvcmUgZ3JhcGhpY3NcbmdsLnVuaWZvcm0xaSh1bmlmb3Jtcy5yZW5kZXJUeXBlLDEpO3N0YXRlLmRpc2FibGUoZ2wuREVQVEhfVEVTVCk7c3RhdGUuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMSk7c3RhdGUuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCx0ZW1wVGV4dHVyZSk7Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUyw2LGdsLlVOU0lHTkVEX1NIT1JULDApOy8vIHVwZGF0ZSBvYmplY3QgcG9zaXRpb25zXG5mbGFyZS5wb3NpdGlvblNjcmVlbi5jb3B5KHNjcmVlblBvc2l0aW9uKTtpZihmbGFyZS5jdXN0b21VcGRhdGVDYWxsYmFjayl7ZmxhcmUuY3VzdG9tVXBkYXRlQ2FsbGJhY2soZmxhcmUpO31lbHNle2ZsYXJlLnVwZGF0ZUxlbnNGbGFyZXMoKTt9Ly8gcmVuZGVyIGZsYXJlc1xuZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnJlbmRlclR5cGUsMik7c3RhdGUuZW5hYmxlKGdsLkJMRU5EKTtmb3IodmFyIGo9MCxqbD1mbGFyZS5sZW5zRmxhcmVzLmxlbmd0aDtqPGpsO2orKyl7dmFyIHNwcml0ZT1mbGFyZS5sZW5zRmxhcmVzW2pdO2lmKHNwcml0ZS5vcGFjaXR5PjAuMDAxJiZzcHJpdGUuc2NhbGU+MC4wMDEpe3NjcmVlblBvc2l0aW9uLng9c3ByaXRlLng7c2NyZWVuUG9zaXRpb24ueT1zcHJpdGUueTtzY3JlZW5Qb3NpdGlvbi56PXNwcml0ZS56O3NpemU9c3ByaXRlLnNpemUqc3ByaXRlLnNjYWxlL3ZpZXdwb3J0Lnc7c2NhbGUueD1zaXplKmludkFzcGVjdDtzY2FsZS55PXNpemU7Z2wudW5pZm9ybTNmKHVuaWZvcm1zLnNjcmVlblBvc2l0aW9uLHNjcmVlblBvc2l0aW9uLngsc2NyZWVuUG9zaXRpb24ueSxzY3JlZW5Qb3NpdGlvbi56KTtnbC51bmlmb3JtMmYodW5pZm9ybXMuc2NhbGUsc2NhbGUueCxzY2FsZS55KTtnbC51bmlmb3JtMWYodW5pZm9ybXMucm90YXRpb24sc3ByaXRlLnJvdGF0aW9uKTtnbC51bmlmb3JtMWYodW5pZm9ybXMub3BhY2l0eSxzcHJpdGUub3BhY2l0eSk7Z2wudW5pZm9ybTNmKHVuaWZvcm1zLmNvbG9yLHNwcml0ZS5jb2xvci5yLHNwcml0ZS5jb2xvci5nLHNwcml0ZS5jb2xvci5iKTtzdGF0ZS5zZXRCbGVuZGluZyhzcHJpdGUuYmxlbmRpbmcsc3ByaXRlLmJsZW5kRXF1YXRpb24sc3ByaXRlLmJsZW5kU3JjLHNwcml0ZS5ibGVuZERzdCk7cmVuZGVyZXIuc2V0VGV4dHVyZTJEKHNwcml0ZS50ZXh0dXJlLDEpO2dsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsNixnbC5VTlNJR05FRF9TSE9SVCwwKTt9fX19Ly8gcmVzdG9yZSBnbFxuc3RhdGUuZW5hYmxlKGdsLkNVTExfRkFDRSk7c3RhdGUuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO3N0YXRlLnNldERlcHRoV3JpdGUodHJ1ZSk7cmVuZGVyZXIucmVzZXRHTFN0YXRlKCk7fTtmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKHNoYWRlcil7dmFyIHByb2dyYW09Z2wuY3JlYXRlUHJvZ3JhbSgpO3ZhciBmcmFnbWVudFNoYWRlcj1nbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTt2YXIgdmVydGV4U2hhZGVyPWdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTt2YXIgcHJlZml4PVwicHJlY2lzaW9uIFwiK3JlbmRlcmVyLmdldFByZWNpc2lvbigpK1wiIGZsb2F0O1xcblwiO2dsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlcixwcmVmaXgrc2hhZGVyLmZyYWdtZW50U2hhZGVyKTtnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLHByZWZpeCtzaGFkZXIudmVydGV4U2hhZGVyKTtnbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcik7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sZnJhZ21lbnRTaGFkZXIpO2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLHZlcnRleFNoYWRlcik7Z2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7cmV0dXJuIHByb2dyYW07fX07Ly8gRmlsZTpzcmMvcmVuZGVyZXJzL3dlYmdsL3BsdWdpbnMvU3ByaXRlUGx1Z2luLmpzXG4vKipcclxuICogQGF1dGhvciBtaWthZWwgZW10aW5nZXIgLyBodHRwOi8vZ29tby5zZS9cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuU3ByaXRlUGx1Z2luPWZ1bmN0aW9uKHJlbmRlcmVyLHNwcml0ZXMpe3ZhciBnbD1yZW5kZXJlci5jb250ZXh0O3ZhciBzdGF0ZT1yZW5kZXJlci5zdGF0ZTt2YXIgdmVydGV4QnVmZmVyLGVsZW1lbnRCdWZmZXI7dmFyIHByb2dyYW0sYXR0cmlidXRlcyx1bmlmb3Jtczt2YXIgdGV4dHVyZTsvLyBkZWNvbXBvc2UgbWF0cml4V29ybGRcbnZhciBzcHJpdGVQb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBzcHJpdGVSb3RhdGlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbigpO3ZhciBzcHJpdGVTY2FsZT1uZXcgVEhSRUUuVmVjdG9yMygpO2Z1bmN0aW9uIGluaXQoKXt2YXIgdmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShbLTAuNSwtMC41LDAsMCwwLjUsLTAuNSwxLDAsMC41LDAuNSwxLDEsLTAuNSwwLjUsMCwxXSk7dmFyIGZhY2VzPW5ldyBVaW50MTZBcnJheShbMCwxLDIsMCwyLDNdKTt2ZXJ0ZXhCdWZmZXI9Z2wuY3JlYXRlQnVmZmVyKCk7ZWxlbWVudEJ1ZmZlcj1nbC5jcmVhdGVCdWZmZXIoKTtnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUix2ZXJ0ZXhCdWZmZXIpO2dsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLHZlcnRpY2VzLGdsLlNUQVRJQ19EUkFXKTtnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGVsZW1lbnRCdWZmZXIpO2dsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZmFjZXMsZ2wuU1RBVElDX0RSQVcpO3Byb2dyYW09Y3JlYXRlUHJvZ3JhbSgpO2F0dHJpYnV0ZXM9e3Bvc2l0aW9uOmdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sJ3Bvc2l0aW9uJyksdXY6Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwndXYnKX07dW5pZm9ybXM9e3V2T2Zmc2V0OmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCd1dk9mZnNldCcpLHV2U2NhbGU6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3V2U2NhbGUnKSxyb3RhdGlvbjpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwncm90YXRpb24nKSxzY2FsZTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnc2NhbGUnKSxjb2xvcjpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnY29sb3InKSxtYXA6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ21hcCcpLG9wYWNpdHk6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ29wYWNpdHknKSxtb2RlbFZpZXdNYXRyaXg6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ21vZGVsVmlld01hdHJpeCcpLHByb2plY3Rpb25NYXRyaXg6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ3Byb2plY3Rpb25NYXRyaXgnKSxmb2dUeXBlOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdmb2dUeXBlJyksZm9nRGVuc2l0eTpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnZm9nRGVuc2l0eScpLGZvZ05lYXI6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2ZvZ05lYXInKSxmb2dGYXI6Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sJ2ZvZ0ZhcicpLGZvZ0NvbG9yOmdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCdmb2dDb2xvcicpLGFscGhhVGVzdDpnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwnYWxwaGFUZXN0Jyl9O3ZhciBjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7Y2FudmFzLndpZHRoPTg7Y2FudmFzLmhlaWdodD04O3ZhciBjb250ZXh0PWNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO2NvbnRleHQuZmlsbFN0eWxlPSd3aGl0ZSc7Y29udGV4dC5maWxsUmVjdCgwLDAsOCw4KTt0ZXh0dXJlPW5ldyBUSFJFRS5UZXh0dXJlKGNhbnZhcyk7dGV4dHVyZS5uZWVkc1VwZGF0ZT10cnVlO310aGlzLnJlbmRlcj1mdW5jdGlvbihzY2VuZSxjYW1lcmEpe2lmKHNwcml0ZXMubGVuZ3RoPT09MClyZXR1cm47Ly8gc2V0dXAgZ2xcbmlmKHByb2dyYW09PT11bmRlZmluZWQpe2luaXQoKTt9Z2wudXNlUHJvZ3JhbShwcm9ncmFtKTtzdGF0ZS5pbml0QXR0cmlidXRlcygpO3N0YXRlLmVuYWJsZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLnBvc2l0aW9uKTtzdGF0ZS5lbmFibGVBdHRyaWJ1dGUoYXR0cmlidXRlcy51dik7c3RhdGUuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtzdGF0ZS5kaXNhYmxlKGdsLkNVTExfRkFDRSk7c3RhdGUuZW5hYmxlKGdsLkJMRU5EKTtnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUix2ZXJ0ZXhCdWZmZXIpO2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlcy5wb3NpdGlvbiwyLGdsLkZMT0FULGZhbHNlLDIqOCwwKTtnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYnV0ZXMudXYsMixnbC5GTE9BVCxmYWxzZSwyKjgsOCk7Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixlbGVtZW50QnVmZmVyKTtnbC51bmlmb3JtTWF0cml4NGZ2KHVuaWZvcm1zLnByb2plY3Rpb25NYXRyaXgsZmFsc2UsY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMpO3N0YXRlLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO2dsLnVuaWZvcm0xaSh1bmlmb3Jtcy5tYXAsMCk7dmFyIG9sZEZvZ1R5cGU9MDt2YXIgc2NlbmVGb2dUeXBlPTA7dmFyIGZvZz1zY2VuZS5mb2c7aWYoZm9nKXtnbC51bmlmb3JtM2YodW5pZm9ybXMuZm9nQ29sb3IsZm9nLmNvbG9yLnIsZm9nLmNvbG9yLmcsZm9nLmNvbG9yLmIpO2lmKGZvZyBpbnN0YW5jZW9mIFRIUkVFLkZvZyl7Z2wudW5pZm9ybTFmKHVuaWZvcm1zLmZvZ05lYXIsZm9nLm5lYXIpO2dsLnVuaWZvcm0xZih1bmlmb3Jtcy5mb2dGYXIsZm9nLmZhcik7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLmZvZ1R5cGUsMSk7b2xkRm9nVHlwZT0xO3NjZW5lRm9nVHlwZT0xO31lbHNlIGlmKGZvZyBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDIpe2dsLnVuaWZvcm0xZih1bmlmb3Jtcy5mb2dEZW5zaXR5LGZvZy5kZW5zaXR5KTtnbC51bmlmb3JtMWkodW5pZm9ybXMuZm9nVHlwZSwyKTtvbGRGb2dUeXBlPTI7c2NlbmVGb2dUeXBlPTI7fX1lbHNle2dsLnVuaWZvcm0xaSh1bmlmb3Jtcy5mb2dUeXBlLDApO29sZEZvZ1R5cGU9MDtzY2VuZUZvZ1R5cGU9MDt9Ly8gdXBkYXRlIHBvc2l0aW9ucyBhbmQgc29ydFxuZm9yKHZhciBpPTAsbD1zcHJpdGVzLmxlbmd0aDtpPGw7aSsrKXt2YXIgc3ByaXRlPXNwcml0ZXNbaV07c3ByaXRlLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2Usc3ByaXRlLm1hdHJpeFdvcmxkKTtzcHJpdGUuej0tc3ByaXRlLm1vZGVsVmlld01hdHJpeC5lbGVtZW50c1sxNF07fXNwcml0ZXMuc29ydChwYWludGVyU29ydFN0YWJsZSk7Ly8gcmVuZGVyIGFsbCBzcHJpdGVzXG52YXIgc2NhbGU9W107Zm9yKHZhciBpPTAsbD1zcHJpdGVzLmxlbmd0aDtpPGw7aSsrKXt2YXIgc3ByaXRlPXNwcml0ZXNbaV07dmFyIG1hdGVyaWFsPXNwcml0ZS5tYXRlcmlhbDtnbC51bmlmb3JtMWYodW5pZm9ybXMuYWxwaGFUZXN0LG1hdGVyaWFsLmFscGhhVGVzdCk7Z2wudW5pZm9ybU1hdHJpeDRmdih1bmlmb3Jtcy5tb2RlbFZpZXdNYXRyaXgsZmFsc2Usc3ByaXRlLm1vZGVsVmlld01hdHJpeC5lbGVtZW50cyk7c3ByaXRlLm1hdHJpeFdvcmxkLmRlY29tcG9zZShzcHJpdGVQb3NpdGlvbixzcHJpdGVSb3RhdGlvbixzcHJpdGVTY2FsZSk7c2NhbGVbMF09c3ByaXRlU2NhbGUueDtzY2FsZVsxXT1zcHJpdGVTY2FsZS55O3ZhciBmb2dUeXBlPTA7aWYoc2NlbmUuZm9nJiZtYXRlcmlhbC5mb2cpe2ZvZ1R5cGU9c2NlbmVGb2dUeXBlO31pZihvbGRGb2dUeXBlIT09Zm9nVHlwZSl7Z2wudW5pZm9ybTFpKHVuaWZvcm1zLmZvZ1R5cGUsZm9nVHlwZSk7b2xkRm9nVHlwZT1mb2dUeXBlO31pZihtYXRlcmlhbC5tYXAhPT1udWxsKXtnbC51bmlmb3JtMmYodW5pZm9ybXMudXZPZmZzZXQsbWF0ZXJpYWwubWFwLm9mZnNldC54LG1hdGVyaWFsLm1hcC5vZmZzZXQueSk7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2U2NhbGUsbWF0ZXJpYWwubWFwLnJlcGVhdC54LG1hdGVyaWFsLm1hcC5yZXBlYXQueSk7fWVsc2V7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2T2Zmc2V0LDAsMCk7Z2wudW5pZm9ybTJmKHVuaWZvcm1zLnV2U2NhbGUsMSwxKTt9Z2wudW5pZm9ybTFmKHVuaWZvcm1zLm9wYWNpdHksbWF0ZXJpYWwub3BhY2l0eSk7Z2wudW5pZm9ybTNmKHVuaWZvcm1zLmNvbG9yLG1hdGVyaWFsLmNvbG9yLnIsbWF0ZXJpYWwuY29sb3IuZyxtYXRlcmlhbC5jb2xvci5iKTtnbC51bmlmb3JtMWYodW5pZm9ybXMucm90YXRpb24sbWF0ZXJpYWwucm90YXRpb24pO2dsLnVuaWZvcm0yZnYodW5pZm9ybXMuc2NhbGUsc2NhbGUpO3N0YXRlLnNldEJsZW5kaW5nKG1hdGVyaWFsLmJsZW5kaW5nLG1hdGVyaWFsLmJsZW5kRXF1YXRpb24sbWF0ZXJpYWwuYmxlbmRTcmMsbWF0ZXJpYWwuYmxlbmREc3QpO3N0YXRlLnNldERlcHRoVGVzdChtYXRlcmlhbC5kZXB0aFRlc3QpO3N0YXRlLnNldERlcHRoV3JpdGUobWF0ZXJpYWwuZGVwdGhXcml0ZSk7aWYobWF0ZXJpYWwubWFwKXtyZW5kZXJlci5zZXRUZXh0dXJlMkQobWF0ZXJpYWwubWFwLDApO31lbHNle3JlbmRlcmVyLnNldFRleHR1cmUyRCh0ZXh0dXJlLDApO31nbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLDYsZ2wuVU5TSUdORURfU0hPUlQsMCk7fS8vIHJlc3RvcmUgZ2xcbnN0YXRlLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO3JlbmRlcmVyLnJlc2V0R0xTdGF0ZSgpO307ZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbSgpe3ZhciBwcm9ncmFtPWdsLmNyZWF0ZVByb2dyYW0oKTt2YXIgdmVydGV4U2hhZGVyPWdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTt2YXIgZnJhZ21lbnRTaGFkZXI9Z2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUik7Z2wuc2hhZGVyU291cmNlKHZlcnRleFNoYWRlcixbJ3ByZWNpc2lvbiAnK3JlbmRlcmVyLmdldFByZWNpc2lvbigpKycgZmxvYXQ7JywndW5pZm9ybSBtYXQ0IG1vZGVsVmlld01hdHJpeDsnLCd1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsnLCd1bmlmb3JtIGZsb2F0IHJvdGF0aW9uOycsJ3VuaWZvcm0gdmVjMiBzY2FsZTsnLCd1bmlmb3JtIHZlYzIgdXZPZmZzZXQ7JywndW5pZm9ybSB2ZWMyIHV2U2NhbGU7JywnYXR0cmlidXRlIHZlYzIgcG9zaXRpb247JywnYXR0cmlidXRlIHZlYzIgdXY7JywndmFyeWluZyB2ZWMyIHZVVjsnLCd2b2lkIG1haW4oKSB7JywndlVWID0gdXZPZmZzZXQgKyB1diAqIHV2U2NhbGU7JywndmVjMiBhbGlnbmVkUG9zaXRpb24gPSBwb3NpdGlvbiAqIHNjYWxlOycsJ3ZlYzIgcm90YXRlZFBvc2l0aW9uOycsJ3JvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTsnLCdyb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7JywndmVjNCBmaW5hbFBvc2l0aW9uOycsJ2ZpbmFsUG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTsnLCdmaW5hbFBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjsnLCdmaW5hbFBvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIGZpbmFsUG9zaXRpb247JywnZ2xfUG9zaXRpb24gPSBmaW5hbFBvc2l0aW9uOycsJ30nXS5qb2luKCdcXG4nKSk7Z2wuc2hhZGVyU291cmNlKGZyYWdtZW50U2hhZGVyLFsncHJlY2lzaW9uICcrcmVuZGVyZXIuZ2V0UHJlY2lzaW9uKCkrJyBmbG9hdDsnLCd1bmlmb3JtIHZlYzMgY29sb3I7JywndW5pZm9ybSBzYW1wbGVyMkQgbWFwOycsJ3VuaWZvcm0gZmxvYXQgb3BhY2l0eTsnLCd1bmlmb3JtIGludCBmb2dUeXBlOycsJ3VuaWZvcm0gdmVjMyBmb2dDb2xvcjsnLCd1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7JywndW5pZm9ybSBmbG9hdCBmb2dOZWFyOycsJ3VuaWZvcm0gZmxvYXQgZm9nRmFyOycsJ3VuaWZvcm0gZmxvYXQgYWxwaGFUZXN0OycsJ3ZhcnlpbmcgdmVjMiB2VVY7Jywndm9pZCBtYWluKCkgeycsJ3ZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTsnLCdpZiAoIHRleHR1cmUuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7JywnZ2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IgKiB0ZXh0dXJlLnh5eiwgdGV4dHVyZS5hICogb3BhY2l0eSApOycsJ2lmICggZm9nVHlwZSA+IDAgKSB7JywnZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53OycsJ2Zsb2F0IGZvZ0ZhY3RvciA9IDAuMDsnLCdpZiAoIGZvZ1R5cGUgPT0gMSApIHsnLCdmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7JywnfSBlbHNlIHsnLCdjb25zdCBmbG9hdCBMT0cyID0gMS40NDI2OTU7JywnZm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICk7JywnZm9nRmFjdG9yID0gMS4wIC0gY2xhbXAoIGZvZ0ZhY3RvciwgMC4wLCAxLjAgKTsnLCd9JywnZ2xfRnJhZ0NvbG9yID0gbWl4KCBnbF9GcmFnQ29sb3IsIHZlYzQoIGZvZ0NvbG9yLCBnbF9GcmFnQ29sb3IudyApLCBmb2dGYWN0b3IgKTsnLCd9JywnfSddLmpvaW4oJ1xcbicpKTtnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcik7Z2wuY29tcGlsZVNoYWRlcihmcmFnbWVudFNoYWRlcik7Z2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sdmVydGV4U2hhZGVyKTtnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSxmcmFnbWVudFNoYWRlcik7Z2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7cmV0dXJuIHByb2dyYW07fWZ1bmN0aW9uIHBhaW50ZXJTb3J0U3RhYmxlKGEsYil7aWYoYS5yZW5kZXJPcmRlciE9PWIucmVuZGVyT3JkZXIpe3JldHVybiBhLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI7fWVsc2UgaWYoYS56IT09Yi56KXtyZXR1cm4gYi56LWEuejt9ZWxzZXtyZXR1cm4gYi5pZC1hLmlkO319fTsvLyBGaWxlOnNyYy9UaHJlZS5MZWdhY3kuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9PYmplY3QuYXNzaWduKFRIUkVFLHtGYWNlNDpmdW5jdGlvbihhLGIsYyxkLG5vcm1hbCxjb2xvcixtYXRlcmlhbEluZGV4KXtjb25zb2xlLndhcm4oJ1RIUkVFLkZhY2U0IGhhcyBiZWVuIHJlbW92ZWQuIEEgVEhSRUUuRmFjZTMgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQuJyk7cmV0dXJuIG5ldyBUSFJFRS5GYWNlMyhhLGIsYyxub3JtYWwsY29sb3IsbWF0ZXJpYWxJbmRleCk7fSxMaW5lU3RyaXA6MCxMaW5lUGllY2VzOjEsTWVzaEZhY2VNYXRlcmlhbDpUSFJFRS5NdWx0aU1hdGVyaWFsLFBvaW50Q2xvdWQ6ZnVuY3Rpb24oZ2VvbWV0cnksbWF0ZXJpYWwpe2NvbnNvbGUud2FybignVEhSRUUuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy4nKTtyZXR1cm4gbmV3IFRIUkVFLlBvaW50cyhnZW9tZXRyeSxtYXRlcmlhbCk7fSxQYXJ0aWNsZTpUSFJFRS5TcHJpdGUsUGFydGljbGVTeXN0ZW06ZnVuY3Rpb24oZ2VvbWV0cnksbWF0ZXJpYWwpe2NvbnNvbGUud2FybignVEhSRUUuUGFydGljbGVTeXN0ZW0gaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuJyk7cmV0dXJuIG5ldyBUSFJFRS5Qb2ludHMoZ2VvbWV0cnksbWF0ZXJpYWwpO30sUG9pbnRDbG91ZE1hdGVyaWFsOmZ1bmN0aW9uKHBhcmFtZXRlcnMpe2NvbnNvbGUud2FybignVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuJyk7cmV0dXJuIG5ldyBUSFJFRS5Qb2ludHNNYXRlcmlhbChwYXJhbWV0ZXJzKTt9LFBhcnRpY2xlQmFzaWNNYXRlcmlhbDpmdW5jdGlvbihwYXJhbWV0ZXJzKXtjb25zb2xlLndhcm4oJ1RIUkVFLlBhcnRpY2xlQmFzaWNNYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLicpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwocGFyYW1ldGVycyk7fSxQYXJ0aWNsZVN5c3RlbU1hdGVyaWFsOmZ1bmN0aW9uKHBhcmFtZXRlcnMpe2NvbnNvbGUud2FybignVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLicpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwocGFyYW1ldGVycyk7fSxWZXJ0ZXg6ZnVuY3Rpb24oeCx5LHope2NvbnNvbGUud2FybignVEhSRUUuVmVydGV4IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5WZWN0b3IzIGluc3RlYWQuJyk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKHgseSx6KTt9fSk7Ly9cbk9iamVjdC5hc3NpZ24oVEhSRUUuQm94Mi5wcm90b3R5cGUse2VtcHR5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5Cb3gyOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuJyk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpO30saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYm94KXtjb25zb2xlLndhcm4oJ1RIUkVFLkJveDI6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGJveCk7fX0pO09iamVjdC5hc3NpZ24oVEhSRUUuQm94My5wcm90b3R5cGUse2VtcHR5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5Cb3gzOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuJyk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpO30saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYm94KXtjb25zb2xlLndhcm4oJ1RIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGJveCk7fSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihzcGhlcmUpe2NvbnNvbGUud2FybignVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLicpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoc3BoZXJlKTt9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5NYXRyaXgzLnByb3RvdHlwZSx7bXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXgzOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuJyk7cmV0dXJuIHZlY3Rvci5hcHBseU1hdHJpeDModGhpcyk7fSxtdWx0aXBseVZlY3RvcjNBcnJheTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSBtYXRyaXguYXBwbHlUb1ZlY3RvcjNBcnJheSggYXJyYXkgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLmFwcGx5VG9WZWN0b3IzQXJyYXkoYSk7fX0pO09iamVjdC5hc3NpZ24oVEhSRUUuTWF0cml4NC5wcm90b3R5cGUse2V4dHJhY3RQb3NpdGlvbjpmdW5jdGlvbihtKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS4nKTtyZXR1cm4gdGhpcy5jb3B5UG9zaXRpb24obSk7fSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKHEpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbigpLicpO3JldHVybiB0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpO30sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIG9yIHZlY3Rvci5hcHBseVByb2plY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuJyk7cmV0dXJuIHZlY3Rvci5hcHBseVByb2plY3Rpb24odGhpcyk7fSxtdWx0aXBseVZlY3RvcjQ6ZnVuY3Rpb24odmVjdG9yKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjQoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gdmVjdG9yLmFwcGx5TWF0cml4NCh0aGlzKTt9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybignVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIG1hdHJpeC5hcHBseVRvVmVjdG9yM0FycmF5KCBhcnJheSApIGluc3RlYWQuJyk7cmV0dXJuIHRoaXMuYXBwbHlUb1ZlY3RvcjNBcnJheShhKTt9LHJvdGF0ZUF4aXM6ZnVuY3Rpb24odil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAucm90YXRlQXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnRyYW5zZm9ybURpcmVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC4nKTt2LnRyYW5zZm9ybURpcmVjdGlvbih0aGlzKTt9LGNyb3NzVmVjdG9yOmZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5NYXRyaXg0OiAuY3Jvc3NWZWN0b3IoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC4nKTtyZXR1cm4gdmVjdG9yLmFwcGx5TWF0cml4NCh0aGlzKTt9LHRyYW5zbGF0ZTpmdW5jdGlvbih2KXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LHJvdGF0ZVg6ZnVuY3Rpb24oYW5nbGUpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5yb3RhdGVYKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LHJvdGF0ZVk6ZnVuY3Rpb24oYW5nbGUpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5yb3RhdGVZKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LHJvdGF0ZVo6ZnVuY3Rpb24oYW5nbGUpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLk1hdHJpeDQ6IC5yb3RhdGVaKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LHJvdGF0ZUJ5QXhpczpmdW5jdGlvbihheGlzLGFuZ2xlKXtjb25zb2xlLmVycm9yKCdUSFJFRS5NYXRyaXg0OiAucm90YXRlQnlBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5QbGFuZS5wcm90b3R5cGUse2lzSW50ZXJzZWN0aW9uTGluZTpmdW5jdGlvbihsaW5lKXtjb25zb2xlLndhcm4oJ1RIUkVFLlBsYW5lOiAuaXNJbnRlcnNlY3Rpb25MaW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0xpbmUoKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzTGluZShsaW5lKTt9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5RdWF0ZXJuaW9uLnByb3RvdHlwZSx7bXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKHZlY3Rvcil7Y29uc29sZS53YXJuKCdUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC4nKTtyZXR1cm4gdmVjdG9yLmFwcGx5UXVhdGVybmlvbih0aGlzKTt9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5SYXkucHJvdG90eXBlLHtpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihib3gpe2NvbnNvbGUud2FybignVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuJyk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0JveChib3gpO30saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbihwbGFuZSl7Y29uc29sZS53YXJuKCdUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuJyk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1BsYW5lKHBsYW5lKTt9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKHNwaGVyZSl7Y29uc29sZS53YXJuKCdUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblNwaGVyZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNTcGhlcmUoKS4nKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKHNwaGVyZSk7fX0pO09iamVjdC5hc3NpZ24oVEhSRUUuVmVjdG9yMy5wcm90b3R5cGUse3NldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGluc3RlYWQuJyk7fSxzZXRFdWxlckZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBpbnN0ZWFkLicpO30sZ2V0UG9zaXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKG0pe2NvbnNvbGUud2FybignVEhSRUUuVmVjdG9yMzogLmdldFBvc2l0aW9uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhQb3NpdGlvbigpLicpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhQb3NpdGlvbihtKTt9LGdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbihtKXtjb25zb2xlLndhcm4oJ1RIUkVFLlZlY3RvcjM6IC5nZXRTY2FsZUZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4U2NhbGUoKS4nKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUobSk7fSxnZXRDb2x1bW5Gcm9tTWF0cml4OmZ1bmN0aW9uKGluZGV4LG1hdHJpeCl7Y29uc29sZS53YXJuKCdUSFJFRS5WZWN0b3IzOiAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS4nKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKG1hdHJpeCxpbmRleCk7fX0pOy8vXG5PYmplY3QuYXNzaWduKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSx7Z2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24obmFtZSl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLmdldENoaWxkQnlOYW1lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0T2JqZWN0QnlOYW1lKCkuJyk7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlOYW1lKG5hbWUpO30scmVuZGVyRGVwdGg6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0M0Q6IC5yZW5kZXJEZXB0aCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnJlbmRlck9yZGVyLCBpbnN0ZWFkLicpO30sdHJhbnNsYXRlOmZ1bmN0aW9uKGRpc3RhbmNlLGF4aXMpe2NvbnNvbGUud2FybignVEhSRUUuT2JqZWN0M0Q6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnRyYW5zbGF0ZU9uQXhpcyggYXhpcywgZGlzdGFuY2UgKSBpbnN0ZWFkLicpO3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhheGlzLGRpc3RhbmNlKTt9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLHtldWxlck9yZGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLicpO3JldHVybiB0aGlzLnJvdGF0aW9uLm9yZGVyO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLicpO3RoaXMucm90YXRpb24ub3JkZXI9dmFsdWU7fX0sdXNlUXVhdGVybmlvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC4nKTt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC4nKTt9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLkxPRC5wcm90b3R5cGUse29iamVjdHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuTE9EOiAub2JqZWN0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5sZXZlbHMuJyk7cmV0dXJuIHRoaXMubGV2ZWxzO319fSk7Ly9cblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKGZvY2FsTGVuZ3RoLGZpbG1HYXVnZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEuc2V0TGVucyBpcyBkZXByZWNhdGVkLiBcIitcIlVzZSAuc2V0Rm9jYWxMZW5ndGggYW5kIC5maWxtR2F1Z2UgZm9yIGEgcGhvdG9ncmFwaGljIHNldHVwLlwiKTtpZihmaWxtR2F1Z2UhPT11bmRlZmluZWQpdGhpcy5maWxtR2F1Z2U9ZmlsbUdhdWdlO3RoaXMuc2V0Rm9jYWxMZW5ndGgoZm9jYWxMZW5ndGgpO307Ly9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSx7b25seVNoYWRvdzp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAub25seVNoYWRvdyBoYXMgYmVlbiByZW1vdmVkLicpO319LHNoYWRvd0NhbWVyYUZvdjp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhRm92IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5mb3YuJyk7dGhpcy5zaGFkb3cuY2FtZXJhLmZvdj12YWx1ZTt9fSxzaGFkb3dDYW1lcmFMZWZ0OntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFMZWZ0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5sZWZ0LicpO3RoaXMuc2hhZG93LmNhbWVyYS5sZWZ0PXZhbHVlO319LHNoYWRvd0NhbWVyYVJpZ2h0OntzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFSaWdodCBpcyBub3cgLnNoYWRvdy5jYW1lcmEucmlnaHQuJyk7dGhpcy5zaGFkb3cuY2FtZXJhLnJpZ2h0PXZhbHVlO319LHNoYWRvd0NhbWVyYVRvcDp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVG9wIGlzIG5vdyAuc2hhZG93LmNhbWVyYS50b3AuJyk7dGhpcy5zaGFkb3cuY2FtZXJhLnRvcD12YWx1ZTt9fSxzaGFkb3dDYW1lcmFCb3R0b206e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUJvdHRvbSBpcyBub3cgLnNoYWRvdy5jYW1lcmEuYm90dG9tLicpO3RoaXMuc2hhZG93LmNhbWVyYS5ib3R0b209dmFsdWU7fX0sc2hhZG93Q2FtZXJhTmVhcjp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhTmVhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEubmVhci4nKTt0aGlzLnNoYWRvdy5jYW1lcmEubmVhcj12YWx1ZTt9fSxzaGFkb3dDYW1lcmFGYXI6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZmFyLicpO3RoaXMuc2hhZG93LmNhbWVyYS5mYXI9dmFsdWU7fX0sc2hhZG93Q2FtZXJhVmlzaWJsZTp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVmlzaWJsZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkNhbWVyYUhlbHBlciggbGlnaHQuc2hhZG93LmNhbWVyYSApIGluc3RlYWQuJyk7fX0sc2hhZG93Qmlhczp7c2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkxpZ2h0OiAuc2hhZG93QmlhcyBpcyBub3cgLnNoYWRvdy5iaWFzLicpO3RoaXMuc2hhZG93LmJpYXM9dmFsdWU7fX0sc2hhZG93RGFya25lc3M6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd0RhcmtuZXNzIGhhcyBiZWVuIHJlbW92ZWQuJyk7fX0sc2hhZG93TWFwV2lkdGg6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd01hcFdpZHRoIGlzIG5vdyAuc2hhZG93Lm1hcFNpemUud2lkdGguJyk7dGhpcy5zaGFkb3cubWFwU2l6ZS53aWR0aD12YWx1ZTt9fSxzaGFkb3dNYXBIZWlnaHQ6e3NldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5MaWdodDogLnNoYWRvd01hcEhlaWdodCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLmhlaWdodC4nKTt0aGlzLnNoYWRvdy5tYXBTaXplLmhlaWdodD12YWx1ZTt9fX0pOy8vXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAubGVuZ3RoIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgLmNvdW50LicpO3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aDt9fX0pO09iamVjdC5hc3NpZ24oVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLHthZGRJbmRleDpmdW5jdGlvbihpbmRleCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEluZGV4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0SW5kZXgoKS4nKTt0aGlzLnNldEluZGV4KGluZGV4KTt9LGFkZERyYXdDYWxsOmZ1bmN0aW9uKHN0YXJ0LGNvdW50LGluZGV4T2Zmc2V0KXtpZihpbmRleE9mZnNldCE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZERyYXdDYWxsKCkgbm8gbG9uZ2VyIHN1cHBvcnRzIGluZGV4T2Zmc2V0LicpO31jb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBpcyBub3cgLmFkZEdyb3VwKCkuJyk7dGhpcy5hZGRHcm91cChzdGFydCxjb3VudCk7fSxjbGVhckRyYXdDYWxsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jbGVhckRyYXdDYWxscygpIGlzIG5vdyAuY2xlYXJHcm91cHMoKS4nKTt0aGlzLmNsZWFyR3JvdXBzKCk7fSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LGNvbXB1dGVPZmZzZXRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVPZmZzZXRzKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLHtkcmF3Y2FsbHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuZHJhd2NhbGxzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy4nKTtyZXR1cm4gdGhpcy5ncm91cHM7fX0sb2Zmc2V0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5CdWZmZXJHZW9tZXRyeTogLm9mZnNldHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLicpO3JldHVybiB0aGlzLmdyb3Vwczt9fX0pOy8vXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUse3dyYXBBcm91bmQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS4nK3RoaXMudHlwZSsnOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLicpO319LHdyYXBSR0I6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuJyt0aGlzLnR5cGUrJzogLndyYXBSR0IgaGFzIGJlZW4gcmVtb3ZlZC4nKTtyZXR1cm4gbmV3IFRIUkVFLkNvbG9yKCk7fX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGUse21ldGFsOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWQuJyk7cmV0dXJuIGZhbHNlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWQnKTt9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZSx7ZGVyaXZhdGl2ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy4nKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLiBTaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLicpO3RoaXMuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcz12YWx1ZTt9fX0pOy8vXG5USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh7Ly8gTm90ZTogRXh0cmEgYmFzZSBlbnN1cmVzIHRoZXNlIHByb3BlcnRpZXMgYXJlIG5vdCAnYXNzaWduJ2VkLlxuY29uc3RydWN0b3I6VEhSRUUuRXZlbnREaXNwYXRjaGVyLGFwcGx5OmZ1bmN0aW9uKHRhcmdldCl7Y29uc29sZS53YXJuKFwiVEhSRUUuRXZlbnREaXNwYXRjaGVyOiAuYXBwbHkgaXMgZGVwcmVjYXRlZCwgXCIrXCJqdXN0IGluaGVyaXQgb3IgT2JqZWN0LmFzc2lnbiB0aGUgcHJvdG90eXBlIHRvIG1peC1pbi5cIik7T2JqZWN0LmFzc2lnbih0YXJnZXQsdGhpcyk7fX0pLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpOy8vXG5PYmplY3QuYXNzaWduKFRIUkVFLldlYkdMUmVuZGVyZXIucHJvdG90eXBlLHtzdXBwb3J0c0Zsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0Zsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcXCdPRVNfdGV4dHVyZV9mbG9hdFxcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9mbG9hdCcpO30sc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcXCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XFwnICkuJyk7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTt9LHN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoIFxcJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1xcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnKTt9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcXCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1xcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO30sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggXFwnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXFwnICkuJyk7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO30sc3VwcG9ydHNCbGVuZE1pbk1heDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQmxlbmRNaW5NYXgoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCBcXCdFWFRfYmxlbmRfbWlubWF4XFwnICkuJyk7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoJ0VYVF9ibGVuZF9taW5tYXgnKTt9LHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXM7fSxzdXBwb3J0c0luc3RhbmNlZEFycmF5czpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggXFwnQU5HTEVfaW5zdGFuY2VkX2FycmF5c1xcJyApLicpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7fSxlbmFibGVTY2lzc29yVGVzdDpmdW5jdGlvbihib29sZWFuKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5lbmFibGVTY2lzc29yVGVzdCgpIGlzIG5vdyAuc2V0U2Npc3NvclRlc3QoKS4nKTt0aGlzLnNldFNjaXNzb3JUZXN0KGJvb2xlYW4pO30saW5pdE1hdGVyaWFsOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuaW5pdE1hdGVyaWFsKCkgaGFzIGJlZW4gcmVtb3ZlZC4nKTt9LGFkZFByZVBsdWdpbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFByZVBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fSxhZGRQb3N0UGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWRkUG9zdFBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuJyk7fSx1cGRhdGVTaGFkb3dNYXA6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC51cGRhdGVTaGFkb3dNYXAoKSBoYXMgYmVlbiByZW1vdmVkLicpO319KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZSx7c2hhZG93TWFwRW5hYmxlZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmVuYWJsZWQ7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEVuYWJsZWQgaXMgbm93IC5zaGFkb3dNYXAuZW5hYmxlZC4nKTt0aGlzLnNoYWRvd01hcC5lbmFibGVkPXZhbHVlO319LHNoYWRvd01hcFR5cGU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC50eXBlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBUeXBlIGlzIG5vdyAuc2hhZG93TWFwLnR5cGUuJyk7dGhpcy5zaGFkb3dNYXAudHlwZT12YWx1ZTt9fSxzaGFkb3dNYXBDdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmN1bGxGYWNlO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBDdWxsRmFjZSBpcyBub3cgLnNoYWRvd01hcC5jdWxsRmFjZS4nKTt0aGlzLnNoYWRvd01hcC5jdWxsRmFjZT12YWx1ZTt9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLldlYkdMU2hhZG93TWFwLnByb3RvdHlwZSx7Y3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlclJldmVyc2VTaWRlZD9USFJFRS5DdWxsRmFjZUZyb250OlRIUkVFLkN1bGxGYWNlQmFjazt9LHNldDpmdW5jdGlvbihjdWxsRmFjZSl7dmFyIHZhbHVlPWN1bGxGYWNlIT09VEhSRUUuQ3VsbEZhY2VCYWNrO2NvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAuY3VsbEZhY2UgaXMgZGVwcmVjYXRlZC4gU2V0IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIHRvIFwiK3ZhbHVlK1wiLlwiKTt0aGlzLnJlbmRlclJldmVyc2VTaWRlZD12YWx1ZTt9fX0pOy8vXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUse3dyYXBTOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLicpO3JldHVybiB0aGlzLnRleHR1cmUud3JhcFM7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuJyk7dGhpcy50ZXh0dXJlLndyYXBTPXZhbHVlO319LHdyYXBUOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULicpO3JldHVybiB0aGlzLnRleHR1cmUud3JhcFQ7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuJyk7dGhpcy50ZXh0dXJlLndyYXBUPXZhbHVlO319LG1hZ0ZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLicpO3JldHVybiB0aGlzLnRleHR1cmUubWFnRmlsdGVyO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuJyk7dGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcj12YWx1ZTt9fSxtaW5GaWx0ZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci4nKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm1pbkZpbHRlcjt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLicpO3RoaXMudGV4dHVyZS5taW5GaWx0ZXI9dmFsdWU7fX0sYW5pc290cm9weTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS5hbmlzb3Ryb3B5O30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS4nKTt0aGlzLnRleHR1cmUuYW5pc290cm9weT12YWx1ZTt9fSxvZmZzZXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC4nKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm9mZnNldDt9LHNldDpmdW5jdGlvbih2YWx1ZSl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LicpO3RoaXMudGV4dHVyZS5vZmZzZXQ9dmFsdWU7fX0scmVwZWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuJyk7cmV0dXJuIHRoaXMudGV4dHVyZS5yZXBlYXQ7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC4nKTt0aGlzLnRleHR1cmUucmVwZWF0PXZhbHVlO319LGZvcm1hdDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LicpO3JldHVybiB0aGlzLnRleHR1cmUuZm9ybWF0O30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuJyk7dGhpcy50ZXh0dXJlLmZvcm1hdD12YWx1ZTt9fSx0eXBlOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS4nKTtyZXR1cm4gdGhpcy50ZXh0dXJlLnR5cGU7fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe2NvbnNvbGUud2FybignVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLicpO3RoaXMudGV4dHVyZS50eXBlPXZhbHVlO319LGdlbmVyYXRlTWlwbWFwczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCdUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLicpO3JldHVybiB0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzO30sc2V0OmZ1bmN0aW9uKHZhbHVlKXtjb25zb2xlLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuJyk7dGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz12YWx1ZTt9fX0pOy8vXG5PYmplY3QuYXNzaWduKFRIUkVFLkF1ZGlvLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihmaWxlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvOiAubG9hZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFRIUkVFLkF1ZGlvTG9hZGVyLicpO3ZhciBzY29wZT10aGlzO3ZhciBhdWRpb0xvYWRlcj1uZXcgVEhSRUUuQXVkaW9Mb2FkZXIoKTthdWRpb0xvYWRlci5sb2FkKGZpbGUsZnVuY3Rpb24oYnVmZmVyKXtzY29wZS5zZXRCdWZmZXIoYnVmZmVyKTt9KTtyZXR1cm4gdGhpczt9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5BdWRpb0FuYWx5c2VyLnByb3RvdHlwZSx7Z2V0RGF0YTpmdW5jdGlvbihmaWxlKXtjb25zb2xlLndhcm4oJ1RIUkVFLkF1ZGlvQW5hbHlzZXI6IC5nZXREYXRhKCkgaXMgbm93IC5nZXRGcmVxdWVuY3lEYXRhKCkuJyk7cmV0dXJuIHRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpO319KTsvL1xuVEhSRUUuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oZ2VvbWV0cnkxLGdlb21ldHJ5MixtYXRlcmlhbEluZGV4T2Zmc2V0KXtjb25zb2xlLndhcm4oJ1RIUkVFLkdlb21ldHJ5VXRpbHM6IC5tZXJnZSgpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkubWVyZ2UoIGdlb21ldHJ5MiwgbWF0cml4LCBtYXRlcmlhbEluZGV4T2Zmc2V0ICkgaW5zdGVhZC4nKTt2YXIgbWF0cml4O2lmKGdlb21ldHJ5MiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2dlb21ldHJ5Mi5tYXRyaXhBdXRvVXBkYXRlJiZnZW9tZXRyeTIudXBkYXRlTWF0cml4KCk7bWF0cml4PWdlb21ldHJ5Mi5tYXRyaXg7Z2VvbWV0cnkyPWdlb21ldHJ5Mi5nZW9tZXRyeTt9Z2VvbWV0cnkxLm1lcmdlKGdlb21ldHJ5MixtYXRyaXgsbWF0ZXJpYWxJbmRleE9mZnNldCk7fSxjZW50ZXI6ZnVuY3Rpb24oZ2VvbWV0cnkpe2NvbnNvbGUud2FybignVEhSRUUuR2VvbWV0cnlVdGlsczogLmNlbnRlcigpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkuY2VudGVyKCkgaW5zdGVhZC4nKTtyZXR1cm4gZ2VvbWV0cnkuY2VudGVyKCk7fX07VEhSRUUuSW1hZ2VVdGlscz17Y3Jvc3NPcmlnaW46dW5kZWZpbmVkLGxvYWRUZXh0dXJlOmZ1bmN0aW9uKHVybCxtYXBwaW5nLG9uTG9hZCxvbkVycm9yKXtjb25zb2xlLndhcm4oJ1RIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLlRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLicpO3ZhciBsb2FkZXI9bmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtsb2FkZXIuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7dmFyIHRleHR1cmU9bG9hZGVyLmxvYWQodXJsLG9uTG9hZCx1bmRlZmluZWQsb25FcnJvcik7aWYobWFwcGluZyl0ZXh0dXJlLm1hcHBpbmc9bWFwcGluZztyZXR1cm4gdGV4dHVyZTt9LGxvYWRUZXh0dXJlQ3ViZTpmdW5jdGlvbih1cmxzLG1hcHBpbmcsb25Mb2FkLG9uRXJyb3Ipe2NvbnNvbGUud2FybignVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyKCkgaW5zdGVhZC4nKTt2YXIgbG9hZGVyPW5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpO2xvYWRlci5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTt2YXIgdGV4dHVyZT1sb2FkZXIubG9hZCh1cmxzLG9uTG9hZCx1bmRlZmluZWQsb25FcnJvcik7aWYobWFwcGluZyl0ZXh0dXJlLm1hcHBpbmc9bWFwcGluZztyZXR1cm4gdGV4dHVyZTt9LGxvYWRDb21wcmVzc2VkVGV4dHVyZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC4nKTt9LGxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLicpO319Oy8vXG5USFJFRS5Qcm9qZWN0b3I9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5Qcm9qZWN0b3IgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9Qcm9qZWN0b3IuanMuJyk7dGhpcy5wcm9qZWN0VmVjdG9yPWZ1bmN0aW9uKHZlY3RvcixjYW1lcmEpe2NvbnNvbGUud2FybignVEhSRUUuUHJvamVjdG9yOiAucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IucHJvamVjdCgpLicpO3ZlY3Rvci5wcm9qZWN0KGNhbWVyYSk7fTt0aGlzLnVucHJvamVjdFZlY3Rvcj1mdW5jdGlvbih2ZWN0b3IsY2FtZXJhKXtjb25zb2xlLndhcm4oJ1RIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuJyk7dmVjdG9yLnVucHJvamVjdChjYW1lcmEpO307dGhpcy5waWNraW5nUmF5PWZ1bmN0aW9uKHZlY3RvcixjYW1lcmEpe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlByb2plY3RvcjogLnBpY2tpbmdSYXkoKSBpcyBub3cgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoKS4nKTt9O307Ly9cblRIUkVFLkNhbnZhc1JlbmRlcmVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignVEhSRUUuQ2FudmFzUmVuZGVyZXIgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9DYW52YXNSZW5kZXJlci5qcycpO3RoaXMuZG9tRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7fTt0aGlzLnJlbmRlcj1mdW5jdGlvbigpe307dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7fTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oKXt9O307Ly8gRmlsZTpzcmMvZXh0cmFzL0N1cnZlVXRpbHMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nXHJcbiAqL1RIUkVFLkN1cnZlVXRpbHM9e3RhbmdlbnRRdWFkcmF0aWNCZXppZXI6ZnVuY3Rpb24odCxwMCxwMSxwMil7cmV0dXJuIDIqKDEtdCkqKHAxLXAwKSsyKnQqKHAyLXAxKTt9LC8vIFB1YXkgQmluZywgdGhhbmtzIGZvciBoZWxwaW5nIHdpdGggdGhpcyBkZXJpdmF0aXZlIVxudGFuZ2VudEN1YmljQmV6aWVyOmZ1bmN0aW9uKHQscDAscDEscDIscDMpe3JldHVybi0zKnAwKigxLXQpKigxLXQpKzMqcDEqKDEtdCkqKDEtdCktNip0KnAxKigxLXQpKzYqdCpwMiooMS10KS0zKnQqdCpwMiszKnQqdCpwMzt9LHRhbmdlbnRTcGxpbmU6ZnVuY3Rpb24odCxwMCxwMSxwMixwMyl7Ly8gVG8gY2hlY2sgaWYgbXkgZm9ybXVsYXMgYXJlIGNvcnJlY3RcbnZhciBoMDA9Nip0KnQtNip0Oy8vIGRlcml2ZWQgZnJvbSAydF4zIOKIkiAzdF4yICsgMVxudmFyIGgxMD0zKnQqdC00KnQrMTsvLyB0XjMg4oiSIDJ0XjIgKyB0XG52YXIgaDAxPS02KnQqdCs2KnQ7Ly8g4oiSIDJ0MyArIDN0MlxudmFyIGgxMT0zKnQqdC0yKnQ7Ly8gdDMg4oiSIHQyXG5yZXR1cm4gaDAwK2gxMCtoMDEraDExO30sLy8gQ2F0bXVsbC1Sb21cbmludGVycG9sYXRlOmZ1bmN0aW9uKHAwLHAxLHAyLHAzLHQpe3ZhciB2MD0ocDItcDApKjAuNTt2YXIgdjE9KHAzLXAxKSowLjU7dmFyIHQyPXQqdDt2YXIgdDM9dCp0MjtyZXR1cm4oMipwMS0yKnAyK3YwK3YxKSp0MysoLTMqcDErMypwMi0yKnYwLXYxKSp0Mit2MCp0K3AxO319Oy8vIEZpbGU6c3JjL2V4dHJhcy9TY2VuZVV0aWxzLmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuU2NlbmVVdGlscz17Y3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdDpmdW5jdGlvbihnZW9tZXRyeSxtYXRlcmlhbHMpe3ZhciBncm91cD1uZXcgVEhSRUUuR3JvdXAoKTtmb3IodmFyIGk9MCxsPW1hdGVyaWFscy5sZW5ndGg7aTxsO2krKyl7Z3JvdXAuYWRkKG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LG1hdGVyaWFsc1tpXSkpO31yZXR1cm4gZ3JvdXA7fSxkZXRhY2g6ZnVuY3Rpb24oY2hpbGQscGFyZW50LHNjZW5lKXtjaGlsZC5hcHBseU1hdHJpeChwYXJlbnQubWF0cml4V29ybGQpO3BhcmVudC5yZW1vdmUoY2hpbGQpO3NjZW5lLmFkZChjaGlsZCk7fSxhdHRhY2g6ZnVuY3Rpb24oY2hpbGQsc2NlbmUscGFyZW50KXt2YXIgbWF0cml4V29ybGRJbnZlcnNlPW5ldyBUSFJFRS5NYXRyaXg0KCk7bWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UocGFyZW50Lm1hdHJpeFdvcmxkKTtjaGlsZC5hcHBseU1hdHJpeChtYXRyaXhXb3JsZEludmVyc2UpO3NjZW5lLnJlbW92ZShjaGlsZCk7cGFyZW50LmFkZChjaGlsZCk7fX07Ly8gRmlsZTpzcmMvZXh0cmFzL1NoYXBlVXRpbHMuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nXHJcbiAqL1RIUkVFLlNoYXBlVXRpbHM9ey8vIGNhbGN1bGF0ZSBhcmVhIG9mIHRoZSBjb250b3VyIHBvbHlnb25cbmFyZWE6ZnVuY3Rpb24oY29udG91cil7dmFyIG49Y29udG91ci5sZW5ndGg7dmFyIGE9MC4wO2Zvcih2YXIgcD1uLTEscT0wO3E8bjtwPXErKyl7YSs9Y29udG91cltwXS54KmNvbnRvdXJbcV0ueS1jb250b3VyW3FdLngqY29udG91cltwXS55O31yZXR1cm4gYSowLjU7fSx0cmlhbmd1bGF0ZTpmdW5jdGlvbigpey8qKlxyXG5cdFx0ICogVGhpcyBjb2RlIGlzIGEgcXVpY2sgcG9ydCBvZiBjb2RlIHdyaXR0ZW4gaW4gQysrIHdoaWNoIHdhcyBzdWJtaXR0ZWQgdG9cclxuXHRcdCAqIGZsaXBjb2RlLmNvbSBieSBKb2huIFcuIFJhdGNsaWZmICAvLyBKdWx5IDIyLCAyMDAwXHJcblx0XHQgKiBTZWUgb3JpZ2luYWwgY29kZSBhbmQgbW9yZSBpbmZvcm1hdGlvbiBoZXJlOlxyXG5cdFx0ICogaHR0cDovL3d3dy5mbGlwY29kZS5jb20vYXJjaGl2ZXMvRWZmaWNpZW50X1BvbHlnb25fVHJpYW5ndWxhdGlvbi5zaHRtbFxyXG5cdFx0ICpcclxuXHRcdCAqIHBvcnRlZCB0byBhY3Rpb25zY3JpcHQgYnkgWmV2YW4gUm9zc2VyXHJcblx0XHQgKiB3d3cuYWN0aW9uc25pcHBldC5jb21cclxuXHRcdCAqXHJcblx0XHQgKiBwb3J0ZWQgdG8gamF2YXNjcmlwdCBieSBKb3NodWEgS29vXHJcblx0XHQgKiBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nXHJcblx0XHQgKlxyXG5cdFx0ICovZnVuY3Rpb24gc25pcChjb250b3VyLHUsdix3LG4sdmVydHMpe3ZhciBwO3ZhciBheCxheSxieCxieTt2YXIgY3gsY3kscHgscHk7YXg9Y29udG91clt2ZXJ0c1t1XV0ueDtheT1jb250b3VyW3ZlcnRzW3VdXS55O2J4PWNvbnRvdXJbdmVydHNbdl1dLng7Ynk9Y29udG91clt2ZXJ0c1t2XV0ueTtjeD1jb250b3VyW3ZlcnRzW3ddXS54O2N5PWNvbnRvdXJbdmVydHNbd11dLnk7aWYoTnVtYmVyLkVQU0lMT04+KGJ4LWF4KSooY3ktYXkpLShieS1heSkqKGN4LWF4KSlyZXR1cm4gZmFsc2U7dmFyIGFYLGFZLGJYLGJZLGNYLGNZO3ZhciBhcHgsYXB5LGJweCxicHksY3B4LGNweTt2YXIgY0NST1NTYXAsYkNST1NTY3AsYUNST1NTYnA7YVg9Y3gtYng7YVk9Y3ktYnk7Ylg9YXgtY3g7Ylk9YXktY3k7Y1g9YngtYXg7Y1k9YnktYXk7Zm9yKHA9MDtwPG47cCsrKXtweD1jb250b3VyW3ZlcnRzW3BdXS54O3B5PWNvbnRvdXJbdmVydHNbcF1dLnk7aWYocHg9PT1heCYmcHk9PT1heXx8cHg9PT1ieCYmcHk9PT1ieXx8cHg9PT1jeCYmcHk9PT1jeSljb250aW51ZTthcHg9cHgtYXg7YXB5PXB5LWF5O2JweD1weC1ieDticHk9cHktYnk7Y3B4PXB4LWN4O2NweT1weS1jeTsvLyBzZWUgaWYgcCBpcyBpbnNpZGUgdHJpYW5nbGUgYWJjXG5hQ1JPU1NicD1hWCpicHktYVkqYnB4O2NDUk9TU2FwPWNYKmFweS1jWSphcHg7YkNST1NTY3A9YlgqY3B5LWJZKmNweDtpZihhQ1JPU1NicD49LU51bWJlci5FUFNJTE9OJiZiQ1JPU1NjcD49LU51bWJlci5FUFNJTE9OJiZjQ1JPU1NhcD49LU51bWJlci5FUFNJTE9OKXJldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fS8vIHRha2VzIGluIGFuIGNvbnRvdXIgYXJyYXkgYW5kIHJldHVybnNcbnJldHVybiBmdW5jdGlvbihjb250b3VyLGluZGljZXMpe3ZhciBuPWNvbnRvdXIubGVuZ3RoO2lmKG48MylyZXR1cm4gbnVsbDt2YXIgcmVzdWx0PVtdLHZlcnRzPVtdLHZlcnRJbmRpY2VzPVtdOy8qIHdlIHdhbnQgYSBjb3VudGVyLWNsb2Nrd2lzZSBwb2x5Z29uIGluIHZlcnRzICovdmFyIHUsdix3O2lmKFRIUkVFLlNoYXBlVXRpbHMuYXJlYShjb250b3VyKT4wLjApe2Zvcih2PTA7djxuO3YrKyl2ZXJ0c1t2XT12O31lbHNle2Zvcih2PTA7djxuO3YrKyl2ZXJ0c1t2XT1uLTEtdjt9dmFyIG52PW47LyogIHJlbW92ZSBudiAtIDIgdmVydGljZXMsIGNyZWF0aW5nIDEgdHJpYW5nbGUgZXZlcnkgdGltZSAqL3ZhciBjb3VudD0yKm52Oy8qIGVycm9yIGRldGVjdGlvbiAqL2Zvcih2PW52LTE7bnY+Mjspey8qIGlmIHdlIGxvb3AsIGl0IGlzIHByb2JhYmx5IGEgbm9uLXNpbXBsZSBwb2x5Z29uICovaWYoY291bnQtLTw9MCl7Ly8qKiBUcmlhbmd1bGF0ZTogRVJST1IgLSBwcm9iYWJsZSBiYWQgcG9seWdvbiFcbi8vdGhyb3cgKCBcIldhcm5pbmcsIHVuYWJsZSB0byB0cmlhbmd1bGF0ZSBwb2x5Z29uIVwiICk7XG4vL3JldHVybiBudWxsO1xuLy8gU29tZXRpbWVzIHdhcm5pbmcgaXMgZmluZSwgZXNwZWNpYWxseSBwb2x5Z29ucyBhcmUgdHJpYW5ndWxhdGVkIGluIHJldmVyc2UuXG5jb25zb2xlLndhcm4oJ1RIUkVFLlNoYXBlVXRpbHM6IFVuYWJsZSB0byB0cmlhbmd1bGF0ZSBwb2x5Z29uISBpbiB0cmlhbmd1bGF0ZSgpJyk7aWYoaW5kaWNlcylyZXR1cm4gdmVydEluZGljZXM7cmV0dXJuIHJlc3VsdDt9LyogdGhyZWUgY29uc2VjdXRpdmUgdmVydGljZXMgaW4gY3VycmVudCBwb2x5Z29uLCA8dSx2LHc+ICovdT12O2lmKG52PD11KXU9MDsvKiBwcmV2aW91cyAqL3Y9dSsxO2lmKG52PD12KXY9MDsvKiBuZXcgdiAgICAqL3c9disxO2lmKG52PD13KXc9MDsvKiBuZXh0ICAgICAqL2lmKHNuaXAoY29udG91cix1LHYsdyxudix2ZXJ0cykpe3ZhciBhLGIsYyxzLHQ7LyogdHJ1ZSBuYW1lcyBvZiB0aGUgdmVydGljZXMgKi9hPXZlcnRzW3VdO2I9dmVydHNbdl07Yz12ZXJ0c1t3XTsvKiBvdXRwdXQgVHJpYW5nbGUgKi9yZXN1bHQucHVzaChbY29udG91clthXSxjb250b3VyW2JdLGNvbnRvdXJbY11dKTt2ZXJ0SW5kaWNlcy5wdXNoKFt2ZXJ0c1t1XSx2ZXJ0c1t2XSx2ZXJ0c1t3XV0pOy8qIHJlbW92ZSB2IGZyb20gdGhlIHJlbWFpbmluZyBwb2x5Z29uICovZm9yKHM9dix0PXYrMTt0PG52O3MrKyx0Kyspe3ZlcnRzW3NdPXZlcnRzW3RdO31udi0tOy8qIHJlc2V0IGVycm9yIGRldGVjdGlvbiBjb3VudGVyICovY291bnQ9Mipudjt9fWlmKGluZGljZXMpcmV0dXJuIHZlcnRJbmRpY2VzO3JldHVybiByZXN1bHQ7fTt9KCksdHJpYW5ndWxhdGVTaGFwZTpmdW5jdGlvbihjb250b3VyLGhvbGVzKXtmdW5jdGlvbiBwb2ludF9pbl9zZWdtZW50XzJEX2NvbGluKGluU2VnUHQxLGluU2VnUHQyLGluT3RoZXJQdCl7Ly8gaW5PdGhlclB0IG5lZWRzIHRvIGJlIGNvbGxpbmVhciB0byB0aGUgaW5TZWdtZW50XG5pZihpblNlZ1B0MS54IT09aW5TZWdQdDIueCl7aWYoaW5TZWdQdDEueDxpblNlZ1B0Mi54KXtyZXR1cm4gaW5TZWdQdDEueDw9aW5PdGhlclB0LngmJmluT3RoZXJQdC54PD1pblNlZ1B0Mi54O31lbHNle3JldHVybiBpblNlZ1B0Mi54PD1pbk90aGVyUHQueCYmaW5PdGhlclB0Lng8PWluU2VnUHQxLng7fX1lbHNle2lmKGluU2VnUHQxLnk8aW5TZWdQdDIueSl7cmV0dXJuIGluU2VnUHQxLnk8PWluT3RoZXJQdC55JiZpbk90aGVyUHQueTw9aW5TZWdQdDIueTt9ZWxzZXtyZXR1cm4gaW5TZWdQdDIueTw9aW5PdGhlclB0LnkmJmluT3RoZXJQdC55PD1pblNlZ1B0MS55O319fWZ1bmN0aW9uIGludGVyc2VjdF9zZWdtZW50c18yRChpblNlZzFQdDEsaW5TZWcxUHQyLGluU2VnMlB0MSxpblNlZzJQdDIsaW5FeGNsdWRlQWRqYWNlbnRTZWdzKXt2YXIgc2VnMWR4PWluU2VnMVB0Mi54LWluU2VnMVB0MS54LHNlZzFkeT1pblNlZzFQdDIueS1pblNlZzFQdDEueTt2YXIgc2VnMmR4PWluU2VnMlB0Mi54LWluU2VnMlB0MS54LHNlZzJkeT1pblNlZzJQdDIueS1pblNlZzJQdDEueTt2YXIgc2VnMXNlZzJkeD1pblNlZzFQdDEueC1pblNlZzJQdDEueDt2YXIgc2VnMXNlZzJkeT1pblNlZzFQdDEueS1pblNlZzJQdDEueTt2YXIgbGltaXQ9c2VnMWR5KnNlZzJkeC1zZWcxZHgqc2VnMmR5O3ZhciBwZXJwU2VnMT1zZWcxZHkqc2VnMXNlZzJkeC1zZWcxZHgqc2VnMXNlZzJkeTtpZihNYXRoLmFicyhsaW1pdCk+TnVtYmVyLkVQU0lMT04pey8vIG5vdCBwYXJhbGxlbFxudmFyIHBlcnBTZWcyO2lmKGxpbWl0PjApe2lmKHBlcnBTZWcxPDB8fHBlcnBTZWcxPmxpbWl0KXJldHVybltdO3BlcnBTZWcyPXNlZzJkeSpzZWcxc2VnMmR4LXNlZzJkeCpzZWcxc2VnMmR5O2lmKHBlcnBTZWcyPDB8fHBlcnBTZWcyPmxpbWl0KXJldHVybltdO31lbHNle2lmKHBlcnBTZWcxPjB8fHBlcnBTZWcxPGxpbWl0KXJldHVybltdO3BlcnBTZWcyPXNlZzJkeSpzZWcxc2VnMmR4LXNlZzJkeCpzZWcxc2VnMmR5O2lmKHBlcnBTZWcyPjB8fHBlcnBTZWcyPGxpbWl0KXJldHVybltdO30vLyBpLmUuIHRvIHJlZHVjZSByb3VuZGluZyBlcnJvcnNcbi8vIGludGVyc2VjdGlvbiBhdCBlbmRwb2ludCBvZiBzZWdtZW50IzE/XG5pZihwZXJwU2VnMj09PTApe2lmKGluRXhjbHVkZUFkamFjZW50U2VncyYmKHBlcnBTZWcxPT09MHx8cGVycFNlZzE9PT1saW1pdCkpcmV0dXJuW107cmV0dXJuW2luU2VnMVB0MV07fWlmKHBlcnBTZWcyPT09bGltaXQpe2lmKGluRXhjbHVkZUFkamFjZW50U2VncyYmKHBlcnBTZWcxPT09MHx8cGVycFNlZzE9PT1saW1pdCkpcmV0dXJuW107cmV0dXJuW2luU2VnMVB0Ml07fS8vIGludGVyc2VjdGlvbiBhdCBlbmRwb2ludCBvZiBzZWdtZW50IzI/XG5pZihwZXJwU2VnMT09PTApcmV0dXJuW2luU2VnMlB0MV07aWYocGVycFNlZzE9PT1saW1pdClyZXR1cm5baW5TZWcyUHQyXTsvLyByZXR1cm4gcmVhbCBpbnRlcnNlY3Rpb24gcG9pbnRcbnZhciBmYWN0b3JTZWcxPXBlcnBTZWcyL2xpbWl0O3JldHVyblt7eDppblNlZzFQdDEueCtmYWN0b3JTZWcxKnNlZzFkeCx5OmluU2VnMVB0MS55K2ZhY3RvclNlZzEqc2VnMWR5fV07fWVsc2V7Ly8gcGFyYWxsZWwgb3IgY29sbGluZWFyXG5pZihwZXJwU2VnMSE9PTB8fHNlZzJkeSpzZWcxc2VnMmR4IT09c2VnMmR4KnNlZzFzZWcyZHkpcmV0dXJuW107Ly8gdGhleSBhcmUgY29sbGluZWFyIG9yIGRlZ2VuZXJhdGVcbnZhciBzZWcxUHQ9c2VnMWR4PT09MCYmc2VnMWR5PT09MDsvLyBzZWdtZW50MSBpcyBqdXN0IGEgcG9pbnQ/XG52YXIgc2VnMlB0PXNlZzJkeD09PTAmJnNlZzJkeT09PTA7Ly8gc2VnbWVudDIgaXMganVzdCBhIHBvaW50P1xuLy8gYm90aCBzZWdtZW50cyBhcmUgcG9pbnRzXG5pZihzZWcxUHQmJnNlZzJQdCl7aWYoaW5TZWcxUHQxLnghPT1pblNlZzJQdDEueHx8aW5TZWcxUHQxLnkhPT1pblNlZzJQdDEueSlyZXR1cm5bXTsvLyB0aGV5IGFyZSBkaXN0aW5jdCAgcG9pbnRzXG5yZXR1cm5baW5TZWcxUHQxXTsvLyB0aGV5IGFyZSB0aGUgc2FtZSBwb2ludFxufS8vIHNlZ21lbnQjMSAgaXMgYSBzaW5nbGUgcG9pbnRcbmlmKHNlZzFQdCl7aWYoIXBvaW50X2luX3NlZ21lbnRfMkRfY29saW4oaW5TZWcyUHQxLGluU2VnMlB0MixpblNlZzFQdDEpKXJldHVybltdOy8vIGJ1dCBub3QgaW4gc2VnbWVudCMyXG5yZXR1cm5baW5TZWcxUHQxXTt9Ly8gc2VnbWVudCMyICBpcyBhIHNpbmdsZSBwb2ludFxuaWYoc2VnMlB0KXtpZighcG9pbnRfaW5fc2VnbWVudF8yRF9jb2xpbihpblNlZzFQdDEsaW5TZWcxUHQyLGluU2VnMlB0MSkpcmV0dXJuW107Ly8gYnV0IG5vdCBpbiBzZWdtZW50IzFcbnJldHVybltpblNlZzJQdDFdO30vLyB0aGV5IGFyZSBjb2xsaW5lYXIgc2VnbWVudHMsIHdoaWNoIG1pZ2h0IG92ZXJsYXBcbnZhciBzZWcxbWluLHNlZzFtYXgsc2VnMW1pblZhbCxzZWcxbWF4VmFsO3ZhciBzZWcybWluLHNlZzJtYXgsc2VnMm1pblZhbCxzZWcybWF4VmFsO2lmKHNlZzFkeCE9PTApey8vIHRoZSBzZWdtZW50cyBhcmUgTk9UIG9uIGEgdmVydGljYWwgbGluZVxuaWYoaW5TZWcxUHQxLng8aW5TZWcxUHQyLngpe3NlZzFtaW49aW5TZWcxUHQxO3NlZzFtaW5WYWw9aW5TZWcxUHQxLng7c2VnMW1heD1pblNlZzFQdDI7c2VnMW1heFZhbD1pblNlZzFQdDIueDt9ZWxzZXtzZWcxbWluPWluU2VnMVB0MjtzZWcxbWluVmFsPWluU2VnMVB0Mi54O3NlZzFtYXg9aW5TZWcxUHQxO3NlZzFtYXhWYWw9aW5TZWcxUHQxLng7fWlmKGluU2VnMlB0MS54PGluU2VnMlB0Mi54KXtzZWcybWluPWluU2VnMlB0MTtzZWcybWluVmFsPWluU2VnMlB0MS54O3NlZzJtYXg9aW5TZWcyUHQyO3NlZzJtYXhWYWw9aW5TZWcyUHQyLng7fWVsc2V7c2VnMm1pbj1pblNlZzJQdDI7c2VnMm1pblZhbD1pblNlZzJQdDIueDtzZWcybWF4PWluU2VnMlB0MTtzZWcybWF4VmFsPWluU2VnMlB0MS54O319ZWxzZXsvLyB0aGUgc2VnbWVudHMgYXJlIG9uIGEgdmVydGljYWwgbGluZVxuaWYoaW5TZWcxUHQxLnk8aW5TZWcxUHQyLnkpe3NlZzFtaW49aW5TZWcxUHQxO3NlZzFtaW5WYWw9aW5TZWcxUHQxLnk7c2VnMW1heD1pblNlZzFQdDI7c2VnMW1heFZhbD1pblNlZzFQdDIueTt9ZWxzZXtzZWcxbWluPWluU2VnMVB0MjtzZWcxbWluVmFsPWluU2VnMVB0Mi55O3NlZzFtYXg9aW5TZWcxUHQxO3NlZzFtYXhWYWw9aW5TZWcxUHQxLnk7fWlmKGluU2VnMlB0MS55PGluU2VnMlB0Mi55KXtzZWcybWluPWluU2VnMlB0MTtzZWcybWluVmFsPWluU2VnMlB0MS55O3NlZzJtYXg9aW5TZWcyUHQyO3NlZzJtYXhWYWw9aW5TZWcyUHQyLnk7fWVsc2V7c2VnMm1pbj1pblNlZzJQdDI7c2VnMm1pblZhbD1pblNlZzJQdDIueTtzZWcybWF4PWluU2VnMlB0MTtzZWcybWF4VmFsPWluU2VnMlB0MS55O319aWYoc2VnMW1pblZhbDw9c2VnMm1pblZhbCl7aWYoc2VnMW1heFZhbDxzZWcybWluVmFsKXJldHVybltdO2lmKHNlZzFtYXhWYWw9PT1zZWcybWluVmFsKXtpZihpbkV4Y2x1ZGVBZGphY2VudFNlZ3MpcmV0dXJuW107cmV0dXJuW3NlZzJtaW5dO31pZihzZWcxbWF4VmFsPD1zZWcybWF4VmFsKXJldHVybltzZWcybWluLHNlZzFtYXhdO3JldHVybltzZWcybWluLHNlZzJtYXhdO31lbHNle2lmKHNlZzFtaW5WYWw+c2VnMm1heFZhbClyZXR1cm5bXTtpZihzZWcxbWluVmFsPT09c2VnMm1heFZhbCl7aWYoaW5FeGNsdWRlQWRqYWNlbnRTZWdzKXJldHVybltdO3JldHVybltzZWcxbWluXTt9aWYoc2VnMW1heFZhbDw9c2VnMm1heFZhbClyZXR1cm5bc2VnMW1pbixzZWcxbWF4XTtyZXR1cm5bc2VnMW1pbixzZWcybWF4XTt9fX1mdW5jdGlvbiBpc1BvaW50SW5zaWRlQW5nbGUoaW5WZXJ0ZXgsaW5MZWdGcm9tUHQsaW5MZWdUb1B0LGluT3RoZXJQdCl7Ly8gVGhlIG9yZGVyIG9mIGxlZ3MgaXMgaW1wb3J0YW50XG4vLyB0cmFuc2xhdGlvbiBvZiBhbGwgcG9pbnRzLCBzbyB0aGF0IFZlcnRleCBpcyBhdCAoMCwwKVxudmFyIGxlZ0Zyb21QdFg9aW5MZWdGcm9tUHQueC1pblZlcnRleC54LGxlZ0Zyb21QdFk9aW5MZWdGcm9tUHQueS1pblZlcnRleC55O3ZhciBsZWdUb1B0WD1pbkxlZ1RvUHQueC1pblZlcnRleC54LGxlZ1RvUHRZPWluTGVnVG9QdC55LWluVmVydGV4Lnk7dmFyIG90aGVyUHRYPWluT3RoZXJQdC54LWluVmVydGV4Lngsb3RoZXJQdFk9aW5PdGhlclB0LnktaW5WZXJ0ZXgueTsvLyBtYWluIGFuZ2xlID4wOiA8IDE4MCBkZWcuOyAwOiAxODAgZGVnLjsgPDA6ID4gMTgwIGRlZy5cbnZhciBmcm9tMnRvQW5nbGU9bGVnRnJvbVB0WCpsZWdUb1B0WS1sZWdGcm9tUHRZKmxlZ1RvUHRYO3ZhciBmcm9tMm90aGVyQW5nbGU9bGVnRnJvbVB0WCpvdGhlclB0WS1sZWdGcm9tUHRZKm90aGVyUHRYO2lmKE1hdGguYWJzKGZyb20ydG9BbmdsZSk+TnVtYmVyLkVQU0lMT04pey8vIGFuZ2xlICE9IDE4MCBkZWcuXG52YXIgb3RoZXIydG9BbmdsZT1vdGhlclB0WCpsZWdUb1B0WS1vdGhlclB0WSpsZWdUb1B0WDsvLyBjb25zb2xlLmxvZyggXCJmcm9tMnRvOiBcIiArIGZyb20ydG9BbmdsZSArIFwiLCBmcm9tMm90aGVyOiBcIiArIGZyb20yb3RoZXJBbmdsZSArIFwiLCBvdGhlcjJ0bzogXCIgKyBvdGhlcjJ0b0FuZ2xlICk7XG5pZihmcm9tMnRvQW5nbGU+MCl7Ly8gbWFpbiBhbmdsZSA8IDE4MCBkZWcuXG5yZXR1cm4gZnJvbTJvdGhlckFuZ2xlPj0wJiZvdGhlcjJ0b0FuZ2xlPj0wO31lbHNley8vIG1haW4gYW5nbGUgPiAxODAgZGVnLlxucmV0dXJuIGZyb20yb3RoZXJBbmdsZT49MHx8b3RoZXIydG9BbmdsZT49MDt9fWVsc2V7Ly8gYW5nbGUgPT0gMTgwIGRlZy5cbi8vIGNvbnNvbGUubG9nKCBcImZyb20ydG86IDE4MCBkZWcuLCBmcm9tMm90aGVyOiBcIiArIGZyb20yb3RoZXJBbmdsZSAgKTtcbnJldHVybiBmcm9tMm90aGVyQW5nbGU+MDt9fWZ1bmN0aW9uIHJlbW92ZUhvbGVzKGNvbnRvdXIsaG9sZXMpe3ZhciBzaGFwZT1jb250b3VyLmNvbmNhdCgpOy8vIHdvcmsgb24gdGhpcyBzaGFwZVxudmFyIGhvbGU7ZnVuY3Rpb24gaXNDdXRMaW5lSW5zaWRlQW5nbGVzKGluU2hhcGVJZHgsaW5Ib2xlSWR4KXsvLyBDaGVjayBpZiBob2xlIHBvaW50IGxpZXMgd2l0aGluIGFuZ2xlIGFyb3VuZCBzaGFwZSBwb2ludFxudmFyIGxhc3RTaGFwZUlkeD1zaGFwZS5sZW5ndGgtMTt2YXIgcHJldlNoYXBlSWR4PWluU2hhcGVJZHgtMTtpZihwcmV2U2hhcGVJZHg8MClwcmV2U2hhcGVJZHg9bGFzdFNoYXBlSWR4O3ZhciBuZXh0U2hhcGVJZHg9aW5TaGFwZUlkeCsxO2lmKG5leHRTaGFwZUlkeD5sYXN0U2hhcGVJZHgpbmV4dFNoYXBlSWR4PTA7dmFyIGluc2lkZUFuZ2xlPWlzUG9pbnRJbnNpZGVBbmdsZShzaGFwZVtpblNoYXBlSWR4XSxzaGFwZVtwcmV2U2hhcGVJZHhdLHNoYXBlW25leHRTaGFwZUlkeF0saG9sZVtpbkhvbGVJZHhdKTtpZighaW5zaWRlQW5nbGUpey8vIGNvbnNvbGUubG9nKCBcIlZlcnRleCAoU2hhcGUpOiBcIiArIGluU2hhcGVJZHggKyBcIiwgUG9pbnQ6IFwiICsgaG9sZVtpbkhvbGVJZHhdLnggKyBcIi9cIiArIGhvbGVbaW5Ib2xlSWR4XS55ICk7XG5yZXR1cm4gZmFsc2U7fS8vIENoZWNrIGlmIHNoYXBlIHBvaW50IGxpZXMgd2l0aGluIGFuZ2xlIGFyb3VuZCBob2xlIHBvaW50XG52YXIgbGFzdEhvbGVJZHg9aG9sZS5sZW5ndGgtMTt2YXIgcHJldkhvbGVJZHg9aW5Ib2xlSWR4LTE7aWYocHJldkhvbGVJZHg8MClwcmV2SG9sZUlkeD1sYXN0SG9sZUlkeDt2YXIgbmV4dEhvbGVJZHg9aW5Ib2xlSWR4KzE7aWYobmV4dEhvbGVJZHg+bGFzdEhvbGVJZHgpbmV4dEhvbGVJZHg9MDtpbnNpZGVBbmdsZT1pc1BvaW50SW5zaWRlQW5nbGUoaG9sZVtpbkhvbGVJZHhdLGhvbGVbcHJldkhvbGVJZHhdLGhvbGVbbmV4dEhvbGVJZHhdLHNoYXBlW2luU2hhcGVJZHhdKTtpZighaW5zaWRlQW5nbGUpey8vIGNvbnNvbGUubG9nKCBcIlZlcnRleCAoSG9sZSk6IFwiICsgaW5Ib2xlSWR4ICsgXCIsIFBvaW50OiBcIiArIHNoYXBlW2luU2hhcGVJZHhdLnggKyBcIi9cIiArIHNoYXBlW2luU2hhcGVJZHhdLnkgKTtcbnJldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fWZ1bmN0aW9uIGludGVyc2VjdHNTaGFwZUVkZ2UoaW5TaGFwZVB0LGluSG9sZVB0KXsvLyBjaGVja3MgZm9yIGludGVyc2VjdGlvbnMgd2l0aCBzaGFwZSBlZGdlc1xudmFyIHNJZHgsbmV4dElkeCxpbnRlcnNlY3Rpb247Zm9yKHNJZHg9MDtzSWR4PHNoYXBlLmxlbmd0aDtzSWR4Kyspe25leHRJZHg9c0lkeCsxO25leHRJZHglPXNoYXBlLmxlbmd0aDtpbnRlcnNlY3Rpb249aW50ZXJzZWN0X3NlZ21lbnRzXzJEKGluU2hhcGVQdCxpbkhvbGVQdCxzaGFwZVtzSWR4XSxzaGFwZVtuZXh0SWR4XSx0cnVlKTtpZihpbnRlcnNlY3Rpb24ubGVuZ3RoPjApcmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9dmFyIGluZGVwSG9sZXM9W107ZnVuY3Rpb24gaW50ZXJzZWN0c0hvbGVFZGdlKGluU2hhcGVQdCxpbkhvbGVQdCl7Ly8gY2hlY2tzIGZvciBpbnRlcnNlY3Rpb25zIHdpdGggaG9sZSBlZGdlc1xudmFyIGloSWR4LGNoa0hvbGUsaElkeCxuZXh0SWR4LGludGVyc2VjdGlvbjtmb3IoaWhJZHg9MDtpaElkeDxpbmRlcEhvbGVzLmxlbmd0aDtpaElkeCsrKXtjaGtIb2xlPWhvbGVzW2luZGVwSG9sZXNbaWhJZHhdXTtmb3IoaElkeD0wO2hJZHg8Y2hrSG9sZS5sZW5ndGg7aElkeCsrKXtuZXh0SWR4PWhJZHgrMTtuZXh0SWR4JT1jaGtIb2xlLmxlbmd0aDtpbnRlcnNlY3Rpb249aW50ZXJzZWN0X3NlZ21lbnRzXzJEKGluU2hhcGVQdCxpbkhvbGVQdCxjaGtIb2xlW2hJZHhdLGNoa0hvbGVbbmV4dElkeF0sdHJ1ZSk7aWYoaW50ZXJzZWN0aW9uLmxlbmd0aD4wKXJldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO312YXIgaG9sZUluZGV4LHNoYXBlSW5kZXgsc2hhcGVQdCxob2xlUHQsaG9sZUlkeCxjdXRLZXksZmFpbGVkQ3V0cz1bXSx0bXBTaGFwZTEsdG1wU2hhcGUyLHRtcEhvbGUxLHRtcEhvbGUyO2Zvcih2YXIgaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7aW5kZXBIb2xlcy5wdXNoKGgpO312YXIgbWluU2hhcGVJbmRleD0wO3ZhciBjb3VudGVyPWluZGVwSG9sZXMubGVuZ3RoKjI7d2hpbGUoaW5kZXBIb2xlcy5sZW5ndGg+MCl7Y291bnRlci0tO2lmKGNvdW50ZXI8MCl7Y29uc29sZS5sb2coXCJJbmZpbml0ZSBMb29wISBIb2xlcyBsZWZ0OlwiK2luZGVwSG9sZXMubGVuZ3RoK1wiLCBQcm9iYWJseSBIb2xlIG91dHNpZGUgU2hhcGUhXCIpO2JyZWFrO30vLyBzZWFyY2ggZm9yIHNoYXBlLXZlcnRleCBhbmQgaG9sZS12ZXJ0ZXgsXG4vLyB3aGljaCBjYW4gYmUgY29ubmVjdGVkIHdpdGhvdXQgaW50ZXJzZWN0aW9uc1xuZm9yKHNoYXBlSW5kZXg9bWluU2hhcGVJbmRleDtzaGFwZUluZGV4PHNoYXBlLmxlbmd0aDtzaGFwZUluZGV4Kyspe3NoYXBlUHQ9c2hhcGVbc2hhcGVJbmRleF07aG9sZUluZGV4PS0xOy8vIHNlYXJjaCBmb3IgaG9sZSB3aGljaCBjYW4gYmUgcmVhY2hlZCB3aXRob3V0IGludGVyc2VjdGlvbnNcbmZvcih2YXIgaD0wO2g8aW5kZXBIb2xlcy5sZW5ndGg7aCsrKXtob2xlSWR4PWluZGVwSG9sZXNbaF07Ly8gcHJldmVudCBtdWx0aXBsZSBjaGVja3NcbmN1dEtleT1zaGFwZVB0LngrXCI6XCIrc2hhcGVQdC55K1wiOlwiK2hvbGVJZHg7aWYoZmFpbGVkQ3V0c1tjdXRLZXldIT09dW5kZWZpbmVkKWNvbnRpbnVlO2hvbGU9aG9sZXNbaG9sZUlkeF07Zm9yKHZhciBoMj0wO2gyPGhvbGUubGVuZ3RoO2gyKyspe2hvbGVQdD1ob2xlW2gyXTtpZighaXNDdXRMaW5lSW5zaWRlQW5nbGVzKHNoYXBlSW5kZXgsaDIpKWNvbnRpbnVlO2lmKGludGVyc2VjdHNTaGFwZUVkZ2Uoc2hhcGVQdCxob2xlUHQpKWNvbnRpbnVlO2lmKGludGVyc2VjdHNIb2xlRWRnZShzaGFwZVB0LGhvbGVQdCkpY29udGludWU7aG9sZUluZGV4PWgyO2luZGVwSG9sZXMuc3BsaWNlKGgsMSk7dG1wU2hhcGUxPXNoYXBlLnNsaWNlKDAsc2hhcGVJbmRleCsxKTt0bXBTaGFwZTI9c2hhcGUuc2xpY2Uoc2hhcGVJbmRleCk7dG1wSG9sZTE9aG9sZS5zbGljZShob2xlSW5kZXgpO3RtcEhvbGUyPWhvbGUuc2xpY2UoMCxob2xlSW5kZXgrMSk7c2hhcGU9dG1wU2hhcGUxLmNvbmNhdCh0bXBIb2xlMSkuY29uY2F0KHRtcEhvbGUyKS5jb25jYXQodG1wU2hhcGUyKTttaW5TaGFwZUluZGV4PXNoYXBlSW5kZXg7Ly8gRGVidWcgb25seSwgdG8gc2hvdyB0aGUgc2VsZWN0ZWQgY3V0c1xuLy8gZ2xvYl9DdXRMaW5lcy5wdXNoKCBbIHNoYXBlUHQsIGhvbGVQdCBdICk7XG5icmVhazt9aWYoaG9sZUluZGV4Pj0wKWJyZWFrOy8vIGhvbGUtdmVydGV4IGZvdW5kXG5mYWlsZWRDdXRzW2N1dEtleV09dHJ1ZTsvLyByZW1lbWJlciBmYWlsdXJlXG59aWYoaG9sZUluZGV4Pj0wKWJyZWFrOy8vIGhvbGUtdmVydGV4IGZvdW5kXG59fXJldHVybiBzaGFwZTsvKiBzaGFwZSB3aXRoIG5vIGhvbGVzICovfXZhciBpLGlsLGYsZmFjZSxrZXksaW5kZXgsYWxsUG9pbnRzTWFwPXt9Oy8vIFRvIG1haW50YWluIHJlZmVyZW5jZSB0byBvbGQgc2hhcGUsIG9uZSBtdXN0IG1hdGNoIGNvb3JkaW5hdGVzLCBvciBvZmZzZXQgdGhlIGluZGljZXMgZnJvbSBvcmlnaW5hbCBhcnJheXMuIEl0J3MgcHJvYmFibHkgZWFzaWVyIHRvIGRvIHRoZSBmaXJzdC5cbnZhciBhbGxwb2ludHM9Y29udG91ci5jb25jYXQoKTtmb3IodmFyIGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFsbHBvaW50cyxob2xlc1toXSk7fS8vY29uc29sZS5sb2coIFwiYWxscG9pbnRzXCIsYWxscG9pbnRzLCBhbGxwb2ludHMubGVuZ3RoICk7XG4vLyBwcmVwYXJlIGFsbCBwb2ludHMgbWFwXG5mb3IoaT0wLGlsPWFsbHBvaW50cy5sZW5ndGg7aTxpbDtpKyspe2tleT1hbGxwb2ludHNbaV0ueCtcIjpcIithbGxwb2ludHNbaV0ueTtpZihhbGxQb2ludHNNYXBba2V5XSE9PXVuZGVmaW5lZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IER1cGxpY2F0ZSBwb2ludFwiLGtleSk7fWFsbFBvaW50c01hcFtrZXldPWk7fS8vIHJlbW92ZSBob2xlcyBieSBjdXR0aW5nIHBhdGhzIHRvIGhvbGVzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgc2hhcGVcbnZhciBzaGFwZVdpdGhvdXRIb2xlcz1yZW1vdmVIb2xlcyhjb250b3VyLGhvbGVzKTt2YXIgdHJpYW5nbGVzPVRIUkVFLlNoYXBlVXRpbHMudHJpYW5ndWxhdGUoc2hhcGVXaXRob3V0SG9sZXMsZmFsc2UpOy8vIFRydWUgcmV0dXJucyBpbmRpY2VzIGZvciBwb2ludHMgb2Ygc3Bvb2xlZCBzaGFwZVxuLy9jb25zb2xlLmxvZyggXCJ0cmlhbmdsZXNcIix0cmlhbmdsZXMsIHRyaWFuZ2xlcy5sZW5ndGggKTtcbi8vIGNoZWNrIGFsbCBmYWNlIHZlcnRpY2VzIGFnYWluc3QgYWxsIHBvaW50cyBtYXBcbmZvcihpPTAsaWw9dHJpYW5nbGVzLmxlbmd0aDtpPGlsO2krKyl7ZmFjZT10cmlhbmdsZXNbaV07Zm9yKGY9MDtmPDM7ZisrKXtrZXk9ZmFjZVtmXS54K1wiOlwiK2ZhY2VbZl0ueTtpbmRleD1hbGxQb2ludHNNYXBba2V5XTtpZihpbmRleCE9PXVuZGVmaW5lZCl7ZmFjZVtmXT1pbmRleDt9fX1yZXR1cm4gdHJpYW5nbGVzLmNvbmNhdCgpO30saXNDbG9ja1dpc2U6ZnVuY3Rpb24ocHRzKXtyZXR1cm4gVEhSRUUuU2hhcGVVdGlscy5hcmVhKHB0cyk8MDt9LC8vIEJlemllciBDdXJ2ZXMgZm9ybXVsYXMgb2J0YWluZWQgZnJvbVxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CJUMzJUE5emllcl9jdXJ2ZVxuLy8gUXVhZCBCZXppZXIgRnVuY3Rpb25zXG5iMjpmdW5jdGlvbigpe2Z1bmN0aW9uIGIycDAodCxwKXt2YXIgaz0xLXQ7cmV0dXJuIGsqaypwO31mdW5jdGlvbiBiMnAxKHQscCl7cmV0dXJuIDIqKDEtdCkqdCpwO31mdW5jdGlvbiBiMnAyKHQscCl7cmV0dXJuIHQqdCpwO31yZXR1cm4gZnVuY3Rpb24odCxwMCxwMSxwMil7cmV0dXJuIGIycDAodCxwMCkrYjJwMSh0LHAxKStiMnAyKHQscDIpO307fSgpLC8vIEN1YmljIEJlemllciBGdW5jdGlvbnNcbmIzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYjNwMCh0LHApe3ZhciBrPTEtdDtyZXR1cm4gayprKmsqcDt9ZnVuY3Rpb24gYjNwMSh0LHApe3ZhciBrPTEtdDtyZXR1cm4gMyprKmsqdCpwO31mdW5jdGlvbiBiM3AyKHQscCl7dmFyIGs9MS10O3JldHVybiAzKmsqdCp0KnA7fWZ1bmN0aW9uIGIzcDModCxwKXtyZXR1cm4gdCp0KnQqcDt9cmV0dXJuIGZ1bmN0aW9uKHQscDAscDEscDIscDMpe3JldHVybiBiM3AwKHQscDApK2IzcDEodCxwMSkrYjNwMih0LHAyKStiM3AzKHQscDMpO307fSgpfTsvLyBGaWxlOnNyYy9leHRyYXMvY29yZS9DdXJ2ZS5qc1xuLyoqXHJcbiAqIEBhdXRob3Igeno4NSAvIGh0dHA6Ly93d3cubGFiNGdhbWVzLm5ldC96ejg1L2Jsb2dcclxuICogRXh0ZW5zaWJsZSBjdXJ2ZSBvYmplY3RcclxuICpcclxuICogU29tZSBjb21tb24gb2YgQ3VydmUgbWV0aG9kc1xyXG4gKiAuZ2V0UG9pbnQodCksIGdldFRhbmdlbnQodClcclxuICogLmdldFBvaW50QXQodSksIGdldFRhZ2VudEF0KHUpXHJcbiAqIC5nZXRQb2ludHMoKSwgLmdldFNwYWNlZFBvaW50cygpXHJcbiAqIC5nZXRMZW5ndGgoKVxyXG4gKiAudXBkYXRlQXJjTGVuZ3RocygpXHJcbiAqXHJcbiAqIFRoaXMgZm9sbG93aW5nIGNsYXNzZXMgc3ViY2xhc3NlcyBUSFJFRS5DdXJ2ZTpcclxuICpcclxuICogLS0gMmQgY2xhc3NlcyAtLVxyXG4gKiBUSFJFRS5MaW5lQ3VydmVcclxuICogVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmVcclxuICogVEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZVxyXG4gKiBUSFJFRS5TcGxpbmVDdXJ2ZVxyXG4gKiBUSFJFRS5BcmNDdXJ2ZVxyXG4gKiBUSFJFRS5FbGxpcHNlQ3VydmVcclxuICpcclxuICogLS0gM2QgY2xhc3NlcyAtLVxyXG4gKiBUSFJFRS5MaW5lQ3VydmUzXHJcbiAqIFRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlM1xyXG4gKiBUSFJFRS5DdWJpY0JlemllckN1cnZlM1xyXG4gKiBUSFJFRS5TcGxpbmVDdXJ2ZTNcclxuICpcclxuICogQSBzZXJpZXMgb2YgY3VydmVzIGNhbiBiZSByZXByZXNlbnRlZCBhcyBhIFRIUkVFLkN1cnZlUGF0aFxyXG4gKlxyXG4gKiovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRBYnN0cmFjdCBDdXJ2ZSBiYXNlIGNsYXNzXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5DdXJ2ZT1mdW5jdGlvbigpe307VEhSRUUuQ3VydmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5DdXJ2ZSwvLyBWaXJ0dWFsIGJhc2UgY2xhc3MgbWV0aG9kIHRvIG92ZXJ3cml0ZSBhbmQgaW1wbGVtZW50IGluIHN1YmNsYXNzZXNcbi8vXHQtIHQgWzAgLi4gMV1cbmdldFBvaW50OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiBXYXJuaW5nLCBnZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZCFcIik7cmV0dXJuIG51bGw7fSwvLyBHZXQgcG9pbnQgYXQgcmVsYXRpdmUgcG9zaXRpb24gaW4gY3VydmUgYWNjb3JkaW5nIHRvIGFyYyBsZW5ndGhcbi8vIC0gdSBbMCAuLiAxXVxuZ2V0UG9pbnRBdDpmdW5jdGlvbih1KXt2YXIgdD10aGlzLmdldFV0b1RtYXBwaW5nKHUpO3JldHVybiB0aGlzLmdldFBvaW50KHQpO30sLy8gR2V0IHNlcXVlbmNlIG9mIHBvaW50cyB1c2luZyBnZXRQb2ludCggdCApXG5nZXRQb2ludHM6ZnVuY3Rpb24oZGl2aXNpb25zKXtpZighZGl2aXNpb25zKWRpdmlzaW9ucz01O3ZhciBkLHB0cz1bXTtmb3IoZD0wO2Q8PWRpdmlzaW9ucztkKyspe3B0cy5wdXNoKHRoaXMuZ2V0UG9pbnQoZC9kaXZpc2lvbnMpKTt9cmV0dXJuIHB0czt9LC8vIEdldCBzZXF1ZW5jZSBvZiBwb2ludHMgdXNpbmcgZ2V0UG9pbnRBdCggdSApXG5nZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oZGl2aXNpb25zKXtpZighZGl2aXNpb25zKWRpdmlzaW9ucz01O3ZhciBkLHB0cz1bXTtmb3IoZD0wO2Q8PWRpdmlzaW9ucztkKyspe3B0cy5wdXNoKHRoaXMuZ2V0UG9pbnRBdChkL2RpdmlzaW9ucykpO31yZXR1cm4gcHRzO30sLy8gR2V0IHRvdGFsIGN1cnZlIGFyYyBsZW5ndGhcbmdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBsZW5ndGhzPXRoaXMuZ2V0TGVuZ3RocygpO3JldHVybiBsZW5ndGhzW2xlbmd0aHMubGVuZ3RoLTFdO30sLy8gR2V0IGxpc3Qgb2YgY3VtdWxhdGl2ZSBzZWdtZW50IGxlbmd0aHNcbmdldExlbmd0aHM6ZnVuY3Rpb24oZGl2aXNpb25zKXtpZighZGl2aXNpb25zKWRpdmlzaW9ucz10aGlzLl9fYXJjTGVuZ3RoRGl2aXNpb25zP3RoaXMuX19hcmNMZW5ndGhEaXZpc2lvbnM6MjAwO2lmKHRoaXMuY2FjaGVBcmNMZW5ndGhzJiZ0aGlzLmNhY2hlQXJjTGVuZ3Rocy5sZW5ndGg9PT1kaXZpc2lvbnMrMSYmIXRoaXMubmVlZHNVcGRhdGUpey8vY29uc29sZS5sb2coIFwiY2FjaGVkXCIsIHRoaXMuY2FjaGVBcmNMZW5ndGhzICk7XG5yZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7fXRoaXMubmVlZHNVcGRhdGU9ZmFsc2U7dmFyIGNhY2hlPVtdO3ZhciBjdXJyZW50LGxhc3Q9dGhpcy5nZXRQb2ludCgwKTt2YXIgcCxzdW09MDtjYWNoZS5wdXNoKDApO2ZvcihwPTE7cDw9ZGl2aXNpb25zO3ArKyl7Y3VycmVudD10aGlzLmdldFBvaW50KHAvZGl2aXNpb25zKTtzdW0rPWN1cnJlbnQuZGlzdGFuY2VUbyhsYXN0KTtjYWNoZS5wdXNoKHN1bSk7bGFzdD1jdXJyZW50O310aGlzLmNhY2hlQXJjTGVuZ3Rocz1jYWNoZTtyZXR1cm4gY2FjaGU7Ly8geyBzdW1zOiBjYWNoZSwgc3VtOnN1bSB9OyBTdW0gaXMgaW4gdGhlIGxhc3QgZWxlbWVudC5cbn0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9dHJ1ZTt0aGlzLmdldExlbmd0aHMoKTt9LC8vIEdpdmVuIHUgKCAwIC4uIDEgKSwgZ2V0IGEgdCB0byBmaW5kIHAuIFRoaXMgZ2l2ZXMgeW91IHBvaW50cyB3aGljaCBhcmUgZXF1aWRpc3RhbnRcbmdldFV0b1RtYXBwaW5nOmZ1bmN0aW9uKHUsZGlzdGFuY2Upe3ZhciBhcmNMZW5ndGhzPXRoaXMuZ2V0TGVuZ3RocygpO3ZhciBpPTAsaWw9YXJjTGVuZ3Rocy5sZW5ndGg7dmFyIHRhcmdldEFyY0xlbmd0aDsvLyBUaGUgdGFyZ2V0ZWQgdSBkaXN0YW5jZSB2YWx1ZSB0byBnZXRcbmlmKGRpc3RhbmNlKXt0YXJnZXRBcmNMZW5ndGg9ZGlzdGFuY2U7fWVsc2V7dGFyZ2V0QXJjTGVuZ3RoPXUqYXJjTGVuZ3Roc1tpbC0xXTt9Ly92YXIgdGltZSA9IERhdGUubm93KCk7XG4vLyBiaW5hcnkgc2VhcmNoIGZvciB0aGUgaW5kZXggd2l0aCBsYXJnZXN0IHZhbHVlIHNtYWxsZXIgdGhhbiB0YXJnZXQgdSBkaXN0YW5jZVxudmFyIGxvdz0wLGhpZ2g9aWwtMSxjb21wYXJpc29uO3doaWxlKGxvdzw9aGlnaCl7aT1NYXRoLmZsb29yKGxvdysoaGlnaC1sb3cpLzIpOy8vIGxlc3MgbGlrZWx5IHRvIG92ZXJmbG93LCB0aG91Z2ggcHJvYmFibHkgbm90IGlzc3VlIGhlcmUsIEpTIGRvZXNuJ3QgcmVhbGx5IGhhdmUgaW50ZWdlcnMsIGFsbCBudW1iZXJzIGFyZSBmbG9hdHNcbmNvbXBhcmlzb249YXJjTGVuZ3Roc1tpXS10YXJnZXRBcmNMZW5ndGg7aWYoY29tcGFyaXNvbjwwKXtsb3c9aSsxO31lbHNlIGlmKGNvbXBhcmlzb24+MCl7aGlnaD1pLTE7fWVsc2V7aGlnaD1pO2JyZWFrOy8vIERPTkVcbn19aT1oaWdoOy8vY29uc29sZS5sb2coJ2InICwgaSwgbG93LCBoaWdoLCBEYXRlLm5vdygpLSB0aW1lKTtcbmlmKGFyY0xlbmd0aHNbaV09PT10YXJnZXRBcmNMZW5ndGgpe3ZhciB0PWkvKGlsLTEpO3JldHVybiB0O30vLyB3ZSBjb3VsZCBnZXQgZmluZXIgZ3JhaW4gYXQgbGVuZ3Rocywgb3IgdXNlIHNpbXBsZSBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xudmFyIGxlbmd0aEJlZm9yZT1hcmNMZW5ndGhzW2ldO3ZhciBsZW5ndGhBZnRlcj1hcmNMZW5ndGhzW2krMV07dmFyIHNlZ21lbnRMZW5ndGg9bGVuZ3RoQWZ0ZXItbGVuZ3RoQmVmb3JlOy8vIGRldGVybWluZSB3aGVyZSB3ZSBhcmUgYmV0d2VlbiB0aGUgJ2JlZm9yZScgYW5kICdhZnRlcicgcG9pbnRzXG52YXIgc2VnbWVudEZyYWN0aW9uPSh0YXJnZXRBcmNMZW5ndGgtbGVuZ3RoQmVmb3JlKS9zZWdtZW50TGVuZ3RoOy8vIGFkZCB0aGF0IGZyYWN0aW9uYWwgYW1vdW50IHRvIHRcbnZhciB0PShpK3NlZ21lbnRGcmFjdGlvbikvKGlsLTEpO3JldHVybiB0O30sLy8gUmV0dXJucyBhIHVuaXQgdmVjdG9yIHRhbmdlbnQgYXQgdFxuLy8gSW4gY2FzZSBhbnkgc3ViIGN1cnZlIGRvZXMgbm90IGltcGxlbWVudCBpdHMgdGFuZ2VudCBkZXJpdmF0aW9uLFxuLy8gMiBwb2ludHMgYSBzbWFsbCBkZWx0YSBhcGFydCB3aWxsIGJlIHVzZWQgdG8gZmluZCBpdHMgZ3JhZGllbnRcbi8vIHdoaWNoIHNlZW1zIHRvIGdpdmUgYSByZWFzb25hYmxlIGFwcHJveGltYXRpb25cbmdldFRhbmdlbnQ6ZnVuY3Rpb24odCl7dmFyIGRlbHRhPTAuMDAwMTt2YXIgdDE9dC1kZWx0YTt2YXIgdDI9dCtkZWx0YTsvLyBDYXBwaW5nIGluIGNhc2Ugb2YgZGFuZ2VyXG5pZih0MTwwKXQxPTA7aWYodDI+MSl0Mj0xO3ZhciBwdDE9dGhpcy5nZXRQb2ludCh0MSk7dmFyIHB0Mj10aGlzLmdldFBvaW50KHQyKTt2YXIgdmVjPXB0Mi5jbG9uZSgpLnN1YihwdDEpO3JldHVybiB2ZWMubm9ybWFsaXplKCk7fSxnZXRUYW5nZW50QXQ6ZnVuY3Rpb24odSl7dmFyIHQ9dGhpcy5nZXRVdG9UbWFwcGluZyh1KTtyZXR1cm4gdGhpcy5nZXRUYW5nZW50KHQpO319Oy8vIFRPRE86IFRyYW5zZm9ybWF0aW9uIGZvciBDdXJ2ZXM/XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICpcdDNEIEN1cnZlc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovLy8gQSBGYWN0b3J5IG1ldGhvZCBmb3IgY3JlYXRpbmcgbmV3IGN1cnZlIHN1YmNsYXNzZXNcblRIUkVFLkN1cnZlLmNyZWF0ZT1mdW5jdGlvbihjb25zdHJ1Y3RvcixnZXRQb2ludEZ1bmMpe2NvbnN0cnVjdG9yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7Y29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPWNvbnN0cnVjdG9yO2NvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRQb2ludD1nZXRQb2ludEZ1bmM7cmV0dXJuIGNvbnN0cnVjdG9yO307Ly8gRmlsZTpzcmMvZXh0cmFzL2NvcmUvQ3VydmVQYXRoLmpzXG4vKipcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKlxyXG4gKiovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRDdXJ2ZWQgUGF0aCAtIGEgY3VydmUgcGF0aCBpcyBzaW1wbHkgYSBhcnJheSBvZiBjb25uZWN0ZWRcclxuICogIGN1cnZlcywgYnV0IHJldGFpbnMgdGhlIGFwaSBvZiBhIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5DdXJ2ZVBhdGg9ZnVuY3Rpb24oKXt0aGlzLmN1cnZlcz1bXTt0aGlzLmF1dG9DbG9zZT1mYWxzZTsvLyBBdXRvbWF0aWNhbGx5IGNsb3NlcyB0aGUgcGF0aFxufTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5DdXJ2ZVBhdGgsYWRkOmZ1bmN0aW9uKGN1cnZlKXt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt9LGNsb3NlUGF0aDpmdW5jdGlvbigpey8vIFRPRE8gVGVzdFxuLy8gYW5kIHZlcmlmeSBmb3IgdmVjdG9yMyAobmVlZHMgdG8gaW1wbGVtZW50IGVxdWFscylcbi8vIEFkZCBhIGxpbmUgY3VydmUgaWYgc3RhcnQgYW5kIGVuZCBvZiBsaW5lcyBhcmUgbm90IGNvbm5lY3RlZFxudmFyIHN0YXJ0UG9pbnQ9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCk7dmFyIGVuZFBvaW50PXRoaXMuY3VydmVzW3RoaXMuY3VydmVzLmxlbmd0aC0xXS5nZXRQb2ludCgxKTtpZighc3RhcnRQb2ludC5lcXVhbHMoZW5kUG9pbnQpKXt0aGlzLmN1cnZlcy5wdXNoKG5ldyBUSFJFRS5MaW5lQ3VydmUoZW5kUG9pbnQsc3RhcnRQb2ludCkpO319LC8vIFRvIGdldCBhY2N1cmF0ZSBwb2ludCB3aXRoIHJlZmVyZW5jZSB0b1xuLy8gZW50aXJlIHBhdGggZGlzdGFuY2UgYXQgdGltZSB0LFxuLy8gZm9sbG93aW5nIGhhcyB0byBiZSBkb25lOlxuLy8gMS4gTGVuZ3RoIG9mIGVhY2ggc3ViIHBhdGggaGF2ZSB0byBiZSBrbm93blxuLy8gMi4gTG9jYXRlIGFuZCBpZGVudGlmeSB0eXBlIG9mIGN1cnZlXG4vLyAzLiBHZXQgdCBmb3IgdGhlIGN1cnZlXG4vLyA0LiBSZXR1cm4gY3VydmUuZ2V0UG9pbnRBdCh0JylcbmdldFBvaW50OmZ1bmN0aW9uKHQpe3ZhciBkPXQqdGhpcy5nZXRMZW5ndGgoKTt2YXIgY3VydmVMZW5ndGhzPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7dmFyIGk9MDsvLyBUbyB0aGluayBhYm91dCBib3VuZGFyaWVzIHBvaW50cy5cbndoaWxlKGk8Y3VydmVMZW5ndGhzLmxlbmd0aCl7aWYoY3VydmVMZW5ndGhzW2ldPj1kKXt2YXIgZGlmZj1jdXJ2ZUxlbmd0aHNbaV0tZDt2YXIgY3VydmU9dGhpcy5jdXJ2ZXNbaV07dmFyIHU9MS1kaWZmL2N1cnZlLmdldExlbmd0aCgpO3JldHVybiBjdXJ2ZS5nZXRQb2ludEF0KHUpO31pKys7fXJldHVybiBudWxsOy8vIGxvb3Agd2hlcmUgc3VtICE9IDAsIHN1bSA+IGQgLCBzdW0rMSA8ZFxufSwvLyBXZSBjYW5ub3QgdXNlIHRoZSBkZWZhdWx0IFRIUkVFLkN1cnZlIGdldFBvaW50KCkgd2l0aCBnZXRMZW5ndGgoKSBiZWNhdXNlIGluXG4vLyBUSFJFRS5DdXJ2ZSwgZ2V0TGVuZ3RoKCkgZGVwZW5kcyBvbiBnZXRQb2ludCgpIGJ1dCBpbiBUSFJFRS5DdXJ2ZVBhdGhcbi8vIGdldFBvaW50KCkgZGVwZW5kcyBvbiBnZXRMZW5ndGhcbmdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBsZW5zPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGxlbnNbbGVucy5sZW5ndGgtMV07fSwvLyBDb21wdXRlIGxlbmd0aHMgYW5kIGNhY2hlIHRoZW1cbi8vIFdlIGNhbm5vdCBvdmVyd3JpdGUgZ2V0TGVuZ3RocygpIGJlY2F1c2UgVXRvVCBtYXBwaW5nIHVzZXMgaXQuXG5nZXRDdXJ2ZUxlbmd0aHM6ZnVuY3Rpb24oKXsvLyBXZSB1c2UgY2FjaGUgdmFsdWVzIGlmIGN1cnZlcyBhbmQgY2FjaGUgYXJyYXkgYXJlIHNhbWUgbGVuZ3RoXG5pZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT09dGhpcy5jdXJ2ZXMubGVuZ3RoKXtyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7fS8vIEdldCBsZW5ndGggb2Ygc3ViLWN1cnZlXG4vLyBQdXNoIHN1bXMgaW50byBjYWNoZWQgYXJyYXlcbnZhciBsZW5ndGhzPVtdLHN1bXM9MDtmb3IodmFyIGk9MCxsPXRoaXMuY3VydmVzLmxlbmd0aDtpPGw7aSsrKXtzdW1zKz10aGlzLmN1cnZlc1tpXS5nZXRMZW5ndGgoKTtsZW5ndGhzLnB1c2goc3Vtcyk7fXRoaXMuY2FjaGVMZW5ndGhzPWxlbmd0aHM7cmV0dXJuIGxlbmd0aHM7fSwvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHQgKlx0Q3JlYXRlIEdlb21ldHJpZXMgSGVscGVyc1xyXG5cdCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8vLy8gR2VuZXJhdGUgZ2VvbWV0cnkgZnJvbSBwYXRoIHBvaW50cyAoZm9yIExpbmUgb3IgUG9pbnRzIG9iamVjdHMpXG5jcmVhdGVQb2ludHNHZW9tZXRyeTpmdW5jdGlvbihkaXZpc2lvbnMpe3ZhciBwdHM9dGhpcy5nZXRQb2ludHMoZGl2aXNpb25zKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShwdHMpO30sLy8gR2VuZXJhdGUgZ2VvbWV0cnkgZnJvbSBlcXVpZGlzdGFudCBzYW1wbGluZyBhbG9uZyB0aGUgcGF0aFxuY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oZGl2aXNpb25zKXt2YXIgcHRzPXRoaXMuZ2V0U3BhY2VkUG9pbnRzKGRpdmlzaW9ucyk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkocHRzKTt9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKHBvaW50cyl7dmFyIGdlb21ldHJ5PW5ldyBUSFJFRS5HZW9tZXRyeSgpO2Zvcih2YXIgaT0wLGw9cG9pbnRzLmxlbmd0aDtpPGw7aSsrKXt2YXIgcG9pbnQ9cG9pbnRzW2ldO2dlb21ldHJ5LnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMocG9pbnQueCxwb2ludC55LHBvaW50Lnp8fDApKTt9cmV0dXJuIGdlb21ldHJ5O319KTsvLyBGaWxlOnNyYy9leHRyYXMvY29yZS9Gb250LmpzXG4vKipcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Gb250PWZ1bmN0aW9uKGRhdGEpe3RoaXMuZGF0YT1kYXRhO307T2JqZWN0LmFzc2lnbihUSFJFRS5Gb250LnByb3RvdHlwZSx7Z2VuZXJhdGVTaGFwZXM6ZnVuY3Rpb24odGV4dCxzaXplLGRpdmlzaW9ucyl7ZnVuY3Rpb24gY3JlYXRlUGF0aHModGV4dCl7dmFyIGNoYXJzPVN0cmluZyh0ZXh0KS5zcGxpdCgnJyk7dmFyIHNjYWxlPXNpemUvZGF0YS5yZXNvbHV0aW9uO3ZhciBvZmZzZXQ9MDt2YXIgcGF0aHM9W107Zm9yKHZhciBpPTA7aTxjaGFycy5sZW5ndGg7aSsrKXt2YXIgcmV0PWNyZWF0ZVBhdGgoY2hhcnNbaV0sc2NhbGUsb2Zmc2V0KTtvZmZzZXQrPXJldC5vZmZzZXQ7cGF0aHMucHVzaChyZXQucGF0aCk7fXJldHVybiBwYXRoczt9ZnVuY3Rpb24gY3JlYXRlUGF0aChjLHNjYWxlLG9mZnNldCl7dmFyIGdseXBoPWRhdGEuZ2x5cGhzW2NdfHxkYXRhLmdseXBoc1snPyddO2lmKCFnbHlwaClyZXR1cm47dmFyIHBhdGg9bmV3IFRIUkVFLlBhdGgoKTt2YXIgcHRzPVtdLGIyPVRIUkVFLlNoYXBlVXRpbHMuYjIsYjM9VEhSRUUuU2hhcGVVdGlscy5iMzt2YXIgeCx5LGNweCxjcHksY3B4MCxjcHkwLGNweDEsY3B5MSxjcHgyLGNweTIsbGFzdGU7aWYoZ2x5cGgubyl7dmFyIG91dGxpbmU9Z2x5cGguX2NhY2hlZE91dGxpbmV8fChnbHlwaC5fY2FjaGVkT3V0bGluZT1nbHlwaC5vLnNwbGl0KCcgJykpO2Zvcih2YXIgaT0wLGw9b3V0bGluZS5sZW5ndGg7aTxsOyl7dmFyIGFjdGlvbj1vdXRsaW5lW2krK107c3dpdGNoKGFjdGlvbil7Y2FzZSdtJzovLyBtb3ZlVG9cbng9b3V0bGluZVtpKytdKnNjYWxlK29mZnNldDt5PW91dGxpbmVbaSsrXSpzY2FsZTtwYXRoLm1vdmVUbyh4LHkpO2JyZWFrO2Nhc2UnbCc6Ly8gbGluZVRvXG54PW91dGxpbmVbaSsrXSpzY2FsZStvZmZzZXQ7eT1vdXRsaW5lW2krK10qc2NhbGU7cGF0aC5saW5lVG8oeCx5KTticmVhaztjYXNlJ3EnOi8vIHF1YWRyYXRpY0N1cnZlVG9cbmNweD1vdXRsaW5lW2krK10qc2NhbGUrb2Zmc2V0O2NweT1vdXRsaW5lW2krK10qc2NhbGU7Y3B4MT1vdXRsaW5lW2krK10qc2NhbGUrb2Zmc2V0O2NweTE9b3V0bGluZVtpKytdKnNjYWxlO3BhdGgucXVhZHJhdGljQ3VydmVUbyhjcHgxLGNweTEsY3B4LGNweSk7bGFzdGU9cHRzW3B0cy5sZW5ndGgtMV07aWYobGFzdGUpe2NweDA9bGFzdGUueDtjcHkwPWxhc3RlLnk7Zm9yKHZhciBpMj0xO2kyPD1kaXZpc2lvbnM7aTIrKyl7dmFyIHQ9aTIvZGl2aXNpb25zO2IyKHQsY3B4MCxjcHgxLGNweCk7YjIodCxjcHkwLGNweTEsY3B5KTt9fWJyZWFrO2Nhc2UnYic6Ly8gYmV6aWVyQ3VydmVUb1xuY3B4PW91dGxpbmVbaSsrXSpzY2FsZStvZmZzZXQ7Y3B5PW91dGxpbmVbaSsrXSpzY2FsZTtjcHgxPW91dGxpbmVbaSsrXSpzY2FsZStvZmZzZXQ7Y3B5MT1vdXRsaW5lW2krK10qc2NhbGU7Y3B4Mj1vdXRsaW5lW2krK10qc2NhbGUrb2Zmc2V0O2NweTI9b3V0bGluZVtpKytdKnNjYWxlO3BhdGguYmV6aWVyQ3VydmVUbyhjcHgxLGNweTEsY3B4MixjcHkyLGNweCxjcHkpO2xhc3RlPXB0c1twdHMubGVuZ3RoLTFdO2lmKGxhc3RlKXtjcHgwPWxhc3RlLng7Y3B5MD1sYXN0ZS55O2Zvcih2YXIgaTI9MTtpMjw9ZGl2aXNpb25zO2kyKyspe3ZhciB0PWkyL2RpdmlzaW9ucztiMyh0LGNweDAsY3B4MSxjcHgyLGNweCk7YjModCxjcHkwLGNweTEsY3B5MixjcHkpO319YnJlYWs7fX19cmV0dXJue29mZnNldDpnbHlwaC5oYSpzY2FsZSxwYXRoOnBhdGh9O30vL1xuaWYoc2l6ZT09PXVuZGVmaW5lZClzaXplPTEwMDtpZihkaXZpc2lvbnM9PT11bmRlZmluZWQpZGl2aXNpb25zPTQ7dmFyIGRhdGE9dGhpcy5kYXRhO3ZhciBwYXRocz1jcmVhdGVQYXRocyh0ZXh0KTt2YXIgc2hhcGVzPVtdO2Zvcih2YXIgcD0wLHBsPXBhdGhzLmxlbmd0aDtwPHBsO3ArKyl7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc2hhcGVzLHBhdGhzW3BdLnRvU2hhcGVzKCkpO31yZXR1cm4gc2hhcGVzO319KTsvLyBGaWxlOnNyYy9leHRyYXMvY29yZS9QYXRoLmpzXG4vKipcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKiBDcmVhdGVzIGZyZWUgZm9ybSAyZCBwYXRoIHVzaW5nIHNlcmllcyBvZiBwb2ludHMsIGxpbmVzIG9yIGN1cnZlcy5cclxuICpcclxuICoqL1RIUkVFLlBhdGg9ZnVuY3Rpb24ocG9pbnRzKXtUSFJFRS5DdXJ2ZVBhdGguY2FsbCh0aGlzKTt0aGlzLmFjdGlvbnM9W107aWYocG9pbnRzKXt0aGlzLmZyb21Qb2ludHMocG9pbnRzKTt9fTtUSFJFRS5QYXRoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBhdGgsLy8gVE9ETyBDbGVhbiB1cCBQQVRIIEFQSVxuLy8gQ3JlYXRlIHBhdGggdXNpbmcgc3RyYWlnaHQgbGluZXMgdG8gY29ubmVjdCBhbGwgcG9pbnRzXG4vLyAtIHZlY3RvcnM6IGFycmF5IG9mIFZlY3RvcjJcbmZyb21Qb2ludHM6ZnVuY3Rpb24odmVjdG9ycyl7dGhpcy5tb3ZlVG8odmVjdG9yc1swXS54LHZlY3RvcnNbMF0ueSk7Zm9yKHZhciBpPTEsbD12ZWN0b3JzLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmxpbmVUbyh2ZWN0b3JzW2ldLngsdmVjdG9yc1tpXS55KTt9fSxtb3ZlVG86ZnVuY3Rpb24oeCx5KXt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOidtb3ZlVG8nLGFyZ3M6W3gseV19KTt9LGxpbmVUbzpmdW5jdGlvbih4LHkpe3ZhciBsYXN0YXJncz10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzO3ZhciB4MD1sYXN0YXJnc1tsYXN0YXJncy5sZW5ndGgtMl07dmFyIHkwPWxhc3RhcmdzW2xhc3RhcmdzLmxlbmd0aC0xXTt2YXIgY3VydmU9bmV3IFRIUkVFLkxpbmVDdXJ2ZShuZXcgVEhSRUUuVmVjdG9yMih4MCx5MCksbmV3IFRIUkVFLlZlY3RvcjIoeCx5KSk7dGhpcy5jdXJ2ZXMucHVzaChjdXJ2ZSk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjonbGluZVRvJyxhcmdzOlt4LHldfSk7fSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGFDUHgsYUNQeSxhWCxhWSl7dmFyIGxhc3RhcmdzPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3M7dmFyIHgwPWxhc3RhcmdzW2xhc3RhcmdzLmxlbmd0aC0yXTt2YXIgeTA9bGFzdGFyZ3NbbGFzdGFyZ3MubGVuZ3RoLTFdO3ZhciBjdXJ2ZT1uZXcgVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUobmV3IFRIUkVFLlZlY3RvcjIoeDAseTApLG5ldyBUSFJFRS5WZWN0b3IyKGFDUHgsYUNQeSksbmV3IFRIUkVFLlZlY3RvcjIoYVgsYVkpKTt0aGlzLmN1cnZlcy5wdXNoKGN1cnZlKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOidxdWFkcmF0aWNDdXJ2ZVRvJyxhcmdzOlthQ1B4LGFDUHksYVgsYVldfSk7fSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGFDUDF4LGFDUDF5LGFDUDJ4LGFDUDJ5LGFYLGFZKXt2YXIgbGFzdGFyZ3M9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJnczt2YXIgeDA9bGFzdGFyZ3NbbGFzdGFyZ3MubGVuZ3RoLTJdO3ZhciB5MD1sYXN0YXJnc1tsYXN0YXJncy5sZW5ndGgtMV07dmFyIGN1cnZlPW5ldyBUSFJFRS5DdWJpY0JlemllckN1cnZlKG5ldyBUSFJFRS5WZWN0b3IyKHgwLHkwKSxuZXcgVEhSRUUuVmVjdG9yMihhQ1AxeCxhQ1AxeSksbmV3IFRIUkVFLlZlY3RvcjIoYUNQMngsYUNQMnkpLG5ldyBUSFJFRS5WZWN0b3IyKGFYLGFZKSk7dGhpcy5jdXJ2ZXMucHVzaChjdXJ2ZSk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjonYmV6aWVyQ3VydmVUbycsYXJnczpbYUNQMXgsYUNQMXksYUNQMngsYUNQMnksYVgsYVldfSk7fSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKHB0cy8qQXJyYXkgb2YgVmVjdG9yKi8pe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dmFyIGxhc3RhcmdzPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3M7dmFyIHgwPWxhc3RhcmdzW2xhc3RhcmdzLmxlbmd0aC0yXTt2YXIgeTA9bGFzdGFyZ3NbbGFzdGFyZ3MubGVuZ3RoLTFdO3ZhciBucHRzPVtuZXcgVEhSRUUuVmVjdG9yMih4MCx5MCldO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG5wdHMscHRzKTt2YXIgY3VydmU9bmV3IFRIUkVFLlNwbGluZUN1cnZlKG5wdHMpO3RoaXMuY3VydmVzLnB1c2goY3VydmUpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246J3NwbGluZVRocnUnLGFyZ3M6YXJnc30pO30sYXJjOmZ1bmN0aW9uKGFYLGFZLGFSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2Upe3ZhciBsYXN0YXJncz10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzO3ZhciB4MD1sYXN0YXJnc1tsYXN0YXJncy5sZW5ndGgtMl07dmFyIHkwPWxhc3RhcmdzW2xhc3RhcmdzLmxlbmd0aC0xXTt0aGlzLmFic2FyYyhhWCt4MCxhWSt5MCxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKTt9LGFic2FyYzpmdW5jdGlvbihhWCxhWSxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKXt0aGlzLmFic2VsbGlwc2UoYVgsYVksYVJhZGl1cyxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKTt9LGVsbGlwc2U6ZnVuY3Rpb24oYVgsYVkseFJhZGl1cyx5UmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlLGFSb3RhdGlvbil7dmFyIGxhc3RhcmdzPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3M7dmFyIHgwPWxhc3RhcmdzW2xhc3RhcmdzLmxlbmd0aC0yXTt2YXIgeTA9bGFzdGFyZ3NbbGFzdGFyZ3MubGVuZ3RoLTFdO3RoaXMuYWJzZWxsaXBzZShhWCt4MCxhWSt5MCx4UmFkaXVzLHlSYWRpdXMsYVN0YXJ0QW5nbGUsYUVuZEFuZ2xlLGFDbG9ja3dpc2UsYVJvdGF0aW9uKTt9LGFic2VsbGlwc2U6ZnVuY3Rpb24oYVgsYVkseFJhZGl1cyx5UmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlLGFSb3RhdGlvbil7dmFyIGFyZ3M9W2FYLGFZLHhSYWRpdXMseVJhZGl1cyxhU3RhcnRBbmdsZSxhRW5kQW5nbGUsYUNsb2Nrd2lzZSxhUm90YXRpb258fDAvLyBhUm90YXRpb24gaXMgb3B0aW9uYWwuXG5dO3ZhciBjdXJ2ZT1uZXcgVEhSRUUuRWxsaXBzZUN1cnZlKGFYLGFZLHhSYWRpdXMseVJhZGl1cyxhU3RhcnRBbmdsZSxhRW5kQW5nbGUsYUNsb2Nrd2lzZSxhUm90YXRpb24pO3RoaXMuY3VydmVzLnB1c2goY3VydmUpO3ZhciBsYXN0UG9pbnQ9Y3VydmUuZ2V0UG9pbnQoMSk7YXJncy5wdXNoKGxhc3RQb2ludC54KTthcmdzLnB1c2gobGFzdFBvaW50LnkpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246J2VsbGlwc2UnLGFyZ3M6YXJnc30pO30sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKGRpdmlzaW9ucyl7aWYoIWRpdmlzaW9ucylkaXZpc2lvbnM9NDA7dmFyIHBvaW50cz1bXTtmb3IodmFyIGk9MDtpPGRpdmlzaW9ucztpKyspe3BvaW50cy5wdXNoKHRoaXMuZ2V0UG9pbnQoaS9kaXZpc2lvbnMpKTsvL2lmICggIXRoaXMuZ2V0UG9pbnQoIGkgLyBkaXZpc2lvbnMgKSApIHRocm93IFwiRElFXCI7XG59aWYodGhpcy5hdXRvQ2xvc2Upe3BvaW50cy5wdXNoKHBvaW50c1swXSk7fXJldHVybiBwb2ludHM7fSxnZXRQb2ludHM6ZnVuY3Rpb24oZGl2aXNpb25zKXtkaXZpc2lvbnM9ZGl2aXNpb25zfHwxMjt2YXIgYjI9VEhSRUUuU2hhcGVVdGlscy5iMjt2YXIgYjM9VEhSRUUuU2hhcGVVdGlscy5iMzt2YXIgcG9pbnRzPVtdO3ZhciBjcHgsY3B5LGNweDIsY3B5MixjcHgxLGNweTEsY3B4MCxjcHkwLGxhc3RlLHR4LHR5O2Zvcih2YXIgaT0wLGw9dGhpcy5hY3Rpb25zLmxlbmd0aDtpPGw7aSsrKXt2YXIgaXRlbT10aGlzLmFjdGlvbnNbaV07dmFyIGFjdGlvbj1pdGVtLmFjdGlvbjt2YXIgYXJncz1pdGVtLmFyZ3M7c3dpdGNoKGFjdGlvbil7Y2FzZSdtb3ZlVG8nOnBvaW50cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGFyZ3NbMF0sYXJnc1sxXSkpO2JyZWFrO2Nhc2UnbGluZVRvJzpwb2ludHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihhcmdzWzBdLGFyZ3NbMV0pKTticmVhaztjYXNlJ3F1YWRyYXRpY0N1cnZlVG8nOmNweD1hcmdzWzJdO2NweT1hcmdzWzNdO2NweDE9YXJnc1swXTtjcHkxPWFyZ3NbMV07aWYocG9pbnRzLmxlbmd0aD4wKXtsYXN0ZT1wb2ludHNbcG9pbnRzLmxlbmd0aC0xXTtjcHgwPWxhc3RlLng7Y3B5MD1sYXN0ZS55O31lbHNle2xhc3RlPXRoaXMuYWN0aW9uc1tpLTFdLmFyZ3M7Y3B4MD1sYXN0ZVtsYXN0ZS5sZW5ndGgtMl07Y3B5MD1sYXN0ZVtsYXN0ZS5sZW5ndGgtMV07fWZvcih2YXIgaj0xO2o8PWRpdmlzaW9ucztqKyspe3ZhciB0PWovZGl2aXNpb25zO3R4PWIyKHQsY3B4MCxjcHgxLGNweCk7dHk9YjIodCxjcHkwLGNweTEsY3B5KTtwb2ludHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMih0eCx0eSkpO31icmVhaztjYXNlJ2JlemllckN1cnZlVG8nOmNweD1hcmdzWzRdO2NweT1hcmdzWzVdO2NweDE9YXJnc1swXTtjcHkxPWFyZ3NbMV07Y3B4Mj1hcmdzWzJdO2NweTI9YXJnc1szXTtpZihwb2ludHMubGVuZ3RoPjApe2xhc3RlPXBvaW50c1twb2ludHMubGVuZ3RoLTFdO2NweDA9bGFzdGUueDtjcHkwPWxhc3RlLnk7fWVsc2V7bGFzdGU9dGhpcy5hY3Rpb25zW2ktMV0uYXJncztjcHgwPWxhc3RlW2xhc3RlLmxlbmd0aC0yXTtjcHkwPWxhc3RlW2xhc3RlLmxlbmd0aC0xXTt9Zm9yKHZhciBqPTE7ajw9ZGl2aXNpb25zO2orKyl7dmFyIHQ9ai9kaXZpc2lvbnM7dHg9YjModCxjcHgwLGNweDEsY3B4MixjcHgpO3R5PWIzKHQsY3B5MCxjcHkxLGNweTIsY3B5KTtwb2ludHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMih0eCx0eSkpO31icmVhaztjYXNlJ3NwbGluZVRocnUnOmxhc3RlPXRoaXMuYWN0aW9uc1tpLTFdLmFyZ3M7dmFyIGxhc3Q9bmV3IFRIUkVFLlZlY3RvcjIobGFzdGVbbGFzdGUubGVuZ3RoLTJdLGxhc3RlW2xhc3RlLmxlbmd0aC0xXSk7dmFyIHNwdHM9W2xhc3RdO3ZhciBuPWRpdmlzaW9ucyphcmdzWzBdLmxlbmd0aDtzcHRzPXNwdHMuY29uY2F0KGFyZ3NbMF0pO3ZhciBzcGxpbmU9bmV3IFRIUkVFLlNwbGluZUN1cnZlKHNwdHMpO2Zvcih2YXIgaj0xO2o8PW47aisrKXtwb2ludHMucHVzaChzcGxpbmUuZ2V0UG9pbnRBdChqL24pKTt9YnJlYWs7Y2FzZSdhcmMnOnZhciBhWD1hcmdzWzBdLGFZPWFyZ3NbMV0sYVJhZGl1cz1hcmdzWzJdLGFTdGFydEFuZ2xlPWFyZ3NbM10sYUVuZEFuZ2xlPWFyZ3NbNF0sYUNsb2Nrd2lzZT0hIWFyZ3NbNV07dmFyIGRlbHRhQW5nbGU9YUVuZEFuZ2xlLWFTdGFydEFuZ2xlO3ZhciBhbmdsZTt2YXIgdGRpdmlzaW9ucz1kaXZpc2lvbnMqMjtmb3IodmFyIGo9MTtqPD10ZGl2aXNpb25zO2orKyl7dmFyIHQ9ai90ZGl2aXNpb25zO2lmKCFhQ2xvY2t3aXNlKXt0PTEtdDt9YW5nbGU9YVN0YXJ0QW5nbGUrdCpkZWx0YUFuZ2xlO3R4PWFYK2FSYWRpdXMqTWF0aC5jb3MoYW5nbGUpO3R5PWFZK2FSYWRpdXMqTWF0aC5zaW4oYW5nbGUpOy8vY29uc29sZS5sb2coJ3QnLCB0LCAnYW5nbGUnLCBhbmdsZSwgJ3R4JywgdHgsICd0eScsIHR5KTtcbnBvaW50cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHR4LHR5KSk7fS8vY29uc29sZS5sb2cocG9pbnRzKTtcbmJyZWFrO2Nhc2UnZWxsaXBzZSc6dmFyIGFYPWFyZ3NbMF0sYVk9YXJnc1sxXSx4UmFkaXVzPWFyZ3NbMl0seVJhZGl1cz1hcmdzWzNdLGFTdGFydEFuZ2xlPWFyZ3NbNF0sYUVuZEFuZ2xlPWFyZ3NbNV0sYUNsb2Nrd2lzZT0hIWFyZ3NbNl0sYVJvdGF0aW9uPWFyZ3NbN107dmFyIGRlbHRhQW5nbGU9YUVuZEFuZ2xlLWFTdGFydEFuZ2xlO3ZhciBhbmdsZTt2YXIgdGRpdmlzaW9ucz1kaXZpc2lvbnMqMjt2YXIgY29zLHNpbjtpZihhUm90YXRpb24hPT0wKXtjb3M9TWF0aC5jb3MoYVJvdGF0aW9uKTtzaW49TWF0aC5zaW4oYVJvdGF0aW9uKTt9Zm9yKHZhciBqPTE7ajw9dGRpdmlzaW9ucztqKyspe3ZhciB0PWovdGRpdmlzaW9ucztpZighYUNsb2Nrd2lzZSl7dD0xLXQ7fWFuZ2xlPWFTdGFydEFuZ2xlK3QqZGVsdGFBbmdsZTt0eD1hWCt4UmFkaXVzKk1hdGguY29zKGFuZ2xlKTt0eT1hWSt5UmFkaXVzKk1hdGguc2luKGFuZ2xlKTtpZihhUm90YXRpb24hPT0wKXt2YXIgeD10eCx5PXR5Oy8vIFJvdGF0ZSB0aGUgcG9pbnQgYWJvdXQgdGhlIGNlbnRlciBvZiB0aGUgZWxsaXBzZS5cbnR4PSh4LWFYKSpjb3MtKHktYVkpKnNpbithWDt0eT0oeC1hWCkqc2luKyh5LWFZKSpjb3MrYVk7fS8vY29uc29sZS5sb2coJ3QnLCB0LCAnYW5nbGUnLCBhbmdsZSwgJ3R4JywgdHgsICd0eScsIHR5KTtcbnBvaW50cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHR4LHR5KSk7fS8vY29uc29sZS5sb2cocG9pbnRzKTtcbmJyZWFrO30vLyBlbmQgc3dpdGNoXG59Ly8gTm9ybWFsaXplIHRvIHJlbW92ZSB0aGUgY2xvc2luZyBwb2ludCBieSBkZWZhdWx0LlxudmFyIGxhc3RQb2ludD1wb2ludHNbcG9pbnRzLmxlbmd0aC0xXTtpZihNYXRoLmFicyhsYXN0UG9pbnQueC1wb2ludHNbMF0ueCk8TnVtYmVyLkVQU0lMT04mJk1hdGguYWJzKGxhc3RQb2ludC55LXBvaW50c1swXS55KTxOdW1iZXIuRVBTSUxPTilwb2ludHMuc3BsaWNlKHBvaW50cy5sZW5ndGgtMSwxKTtpZih0aGlzLmF1dG9DbG9zZSl7cG9pbnRzLnB1c2gocG9pbnRzWzBdKTt9cmV0dXJuIHBvaW50czt9LHRvU2hhcGVzOmZ1bmN0aW9uKGlzQ0NXLG5vSG9sZXMpe2Z1bmN0aW9uIGV4dHJhY3RTdWJwYXRocyhpbkFjdGlvbnMpe3ZhciBzdWJQYXRocz1bXSxsYXN0UGF0aD1uZXcgVEhSRUUuUGF0aCgpO2Zvcih2YXIgaT0wLGw9aW5BY3Rpb25zLmxlbmd0aDtpPGw7aSsrKXt2YXIgaXRlbT1pbkFjdGlvbnNbaV07dmFyIGFyZ3M9aXRlbS5hcmdzO3ZhciBhY3Rpb249aXRlbS5hY3Rpb247aWYoYWN0aW9uPT09J21vdmVUbycpe2lmKGxhc3RQYXRoLmFjdGlvbnMubGVuZ3RoIT09MCl7c3ViUGF0aHMucHVzaChsYXN0UGF0aCk7bGFzdFBhdGg9bmV3IFRIUkVFLlBhdGgoKTt9fWxhc3RQYXRoW2FjdGlvbl0uYXBwbHkobGFzdFBhdGgsYXJncyk7fWlmKGxhc3RQYXRoLmFjdGlvbnMubGVuZ3RoIT09MCl7c3ViUGF0aHMucHVzaChsYXN0UGF0aCk7fS8vIGNvbnNvbGUubG9nKHN1YlBhdGhzKTtcbnJldHVybiBzdWJQYXRoczt9ZnVuY3Rpb24gdG9TaGFwZXNOb0hvbGVzKGluU3VicGF0aHMpe3ZhciBzaGFwZXM9W107Zm9yKHZhciBpPTAsbD1pblN1YnBhdGhzLmxlbmd0aDtpPGw7aSsrKXt2YXIgdG1wUGF0aD1pblN1YnBhdGhzW2ldO3ZhciB0bXBTaGFwZT1uZXcgVEhSRUUuU2hhcGUoKTt0bXBTaGFwZS5hY3Rpb25zPXRtcFBhdGguYWN0aW9uczt0bXBTaGFwZS5jdXJ2ZXM9dG1wUGF0aC5jdXJ2ZXM7c2hhcGVzLnB1c2godG1wU2hhcGUpO30vL2NvbnNvbGUubG9nKFwic2hhcGVcIiwgc2hhcGVzKTtcbnJldHVybiBzaGFwZXM7fWZ1bmN0aW9uIGlzUG9pbnRJbnNpZGVQb2x5Z29uKGluUHQsaW5Qb2x5Z29uKXt2YXIgcG9seUxlbj1pblBvbHlnb24ubGVuZ3RoOy8vIGluUHQgb24gcG9seWdvbiBjb250b3VyID0+IGltbWVkaWF0ZSBzdWNjZXNzICAgIG9yXG4vLyB0b2dnbGluZyBvZiBpbnNpZGUvb3V0c2lkZSBhdCBldmVyeSBzaW5nbGUhIGludGVyc2VjdGlvbiBwb2ludCBvZiBhbiBlZGdlXG4vLyAgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lIHRocm91Z2ggaW5QdCwgbGVmdCBvZiBpblB0XG4vLyAgbm90IGNvdW50aW5nIGxvd2VyWSBlbmRwb2ludHMgb2YgZWRnZXMgYW5kIHdob2xlIGVkZ2VzIG9uIHRoYXQgbGluZVxudmFyIGluc2lkZT1mYWxzZTtmb3IodmFyIHA9cG9seUxlbi0xLHE9MDtxPHBvbHlMZW47cD1xKyspe3ZhciBlZGdlTG93UHQ9aW5Qb2x5Z29uW3BdO3ZhciBlZGdlSGlnaFB0PWluUG9seWdvbltxXTt2YXIgZWRnZUR4PWVkZ2VIaWdoUHQueC1lZGdlTG93UHQueDt2YXIgZWRnZUR5PWVkZ2VIaWdoUHQueS1lZGdlTG93UHQueTtpZihNYXRoLmFicyhlZGdlRHkpPk51bWJlci5FUFNJTE9OKXsvLyBub3QgcGFyYWxsZWxcbmlmKGVkZ2VEeTwwKXtlZGdlTG93UHQ9aW5Qb2x5Z29uW3FdO2VkZ2VEeD0tZWRnZUR4O2VkZ2VIaWdoUHQ9aW5Qb2x5Z29uW3BdO2VkZ2VEeT0tZWRnZUR5O31pZihpblB0Lnk8ZWRnZUxvd1B0Lnl8fGluUHQueT5lZGdlSGlnaFB0LnkpY29udGludWU7aWYoaW5QdC55PT09ZWRnZUxvd1B0Lnkpe2lmKGluUHQueD09PWVkZ2VMb3dQdC54KXJldHVybiB0cnVlOy8vIGluUHQgaXMgb24gY29udG91ciA/XG4vLyBjb250aW51ZTtcdFx0XHRcdC8vIG5vIGludGVyc2VjdGlvbiBvciBlZGdlTG93UHQgPT4gZG9lc24ndCBjb3VudCAhISFcbn1lbHNle3ZhciBwZXJwRWRnZT1lZGdlRHkqKGluUHQueC1lZGdlTG93UHQueCktZWRnZUR4KihpblB0LnktZWRnZUxvd1B0LnkpO2lmKHBlcnBFZGdlPT09MClyZXR1cm4gdHJ1ZTsvLyBpblB0IGlzIG9uIGNvbnRvdXIgP1xuaWYocGVycEVkZ2U8MCljb250aW51ZTtpbnNpZGU9IWluc2lkZTsvLyB0cnVlIGludGVyc2VjdGlvbiBsZWZ0IG9mIGluUHRcbn19ZWxzZXsvLyBwYXJhbGxlbCBvciBjb2xsaW5lYXJcbmlmKGluUHQueSE9PWVkZ2VMb3dQdC55KWNvbnRpbnVlOy8vIHBhcmFsbGVsXG4vLyBlZGdlIGxpZXMgb24gdGhlIHNhbWUgaG9yaXpvbnRhbCBsaW5lIGFzIGluUHRcbmlmKGVkZ2VIaWdoUHQueDw9aW5QdC54JiZpblB0Lng8PWVkZ2VMb3dQdC54fHxlZGdlTG93UHQueDw9aW5QdC54JiZpblB0Lng8PWVkZ2VIaWdoUHQueClyZXR1cm4gdHJ1ZTsvLyBpblB0OiBQb2ludCBvbiBjb250b3VyICFcbi8vIGNvbnRpbnVlO1xufX1yZXR1cm4gaW5zaWRlO312YXIgaXNDbG9ja1dpc2U9VEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZTt2YXIgc3ViUGF0aHM9ZXh0cmFjdFN1YnBhdGhzKHRoaXMuYWN0aW9ucyk7aWYoc3ViUGF0aHMubGVuZ3RoPT09MClyZXR1cm5bXTtpZihub0hvbGVzPT09dHJ1ZSlyZXR1cm4gdG9TaGFwZXNOb0hvbGVzKHN1YlBhdGhzKTt2YXIgc29saWQsdG1wUGF0aCx0bXBTaGFwZSxzaGFwZXM9W107aWYoc3ViUGF0aHMubGVuZ3RoPT09MSl7dG1wUGF0aD1zdWJQYXRoc1swXTt0bXBTaGFwZT1uZXcgVEhSRUUuU2hhcGUoKTt0bXBTaGFwZS5hY3Rpb25zPXRtcFBhdGguYWN0aW9uczt0bXBTaGFwZS5jdXJ2ZXM9dG1wUGF0aC5jdXJ2ZXM7c2hhcGVzLnB1c2godG1wU2hhcGUpO3JldHVybiBzaGFwZXM7fXZhciBob2xlc0ZpcnN0PSFpc0Nsb2NrV2lzZShzdWJQYXRoc1swXS5nZXRQb2ludHMoKSk7aG9sZXNGaXJzdD1pc0NDVz8haG9sZXNGaXJzdDpob2xlc0ZpcnN0Oy8vIGNvbnNvbGUubG9nKFwiSG9sZXMgZmlyc3RcIiwgaG9sZXNGaXJzdCk7XG52YXIgYmV0dGVyU2hhcGVIb2xlcz1bXTt2YXIgbmV3U2hhcGVzPVtdO3ZhciBuZXdTaGFwZUhvbGVzPVtdO3ZhciBtYWluSWR4PTA7dmFyIHRtcFBvaW50cztuZXdTaGFwZXNbbWFpbklkeF09dW5kZWZpbmVkO25ld1NoYXBlSG9sZXNbbWFpbklkeF09W107Zm9yKHZhciBpPTAsbD1zdWJQYXRocy5sZW5ndGg7aTxsO2krKyl7dG1wUGF0aD1zdWJQYXRoc1tpXTt0bXBQb2ludHM9dG1wUGF0aC5nZXRQb2ludHMoKTtzb2xpZD1pc0Nsb2NrV2lzZSh0bXBQb2ludHMpO3NvbGlkPWlzQ0NXPyFzb2xpZDpzb2xpZDtpZihzb2xpZCl7aWYoIWhvbGVzRmlyc3QmJm5ld1NoYXBlc1ttYWluSWR4XSltYWluSWR4Kys7bmV3U2hhcGVzW21haW5JZHhdPXtzOm5ldyBUSFJFRS5TaGFwZSgpLHA6dG1wUG9pbnRzfTtuZXdTaGFwZXNbbWFpbklkeF0ucy5hY3Rpb25zPXRtcFBhdGguYWN0aW9ucztuZXdTaGFwZXNbbWFpbklkeF0ucy5jdXJ2ZXM9dG1wUGF0aC5jdXJ2ZXM7aWYoaG9sZXNGaXJzdCltYWluSWR4Kys7bmV3U2hhcGVIb2xlc1ttYWluSWR4XT1bXTsvL2NvbnNvbGUubG9nKCdjdycsIGkpO1xufWVsc2V7bmV3U2hhcGVIb2xlc1ttYWluSWR4XS5wdXNoKHtoOnRtcFBhdGgscDp0bXBQb2ludHNbMF19KTsvL2NvbnNvbGUubG9nKCdjY3cnLCBpKTtcbn19Ly8gb25seSBIb2xlcz8gLT4gcHJvYmFibHkgYWxsIFNoYXBlcyB3aXRoIHdyb25nIG9yaWVudGF0aW9uXG5pZighbmV3U2hhcGVzWzBdKXJldHVybiB0b1NoYXBlc05vSG9sZXMoc3ViUGF0aHMpO2lmKG5ld1NoYXBlcy5sZW5ndGg+MSl7dmFyIGFtYmlndW91cz1mYWxzZTt2YXIgdG9DaGFuZ2U9W107Zm9yKHZhciBzSWR4PTAsc0xlbj1uZXdTaGFwZXMubGVuZ3RoO3NJZHg8c0xlbjtzSWR4Kyspe2JldHRlclNoYXBlSG9sZXNbc0lkeF09W107fWZvcih2YXIgc0lkeD0wLHNMZW49bmV3U2hhcGVzLmxlbmd0aDtzSWR4PHNMZW47c0lkeCsrKXt2YXIgc2hvPW5ld1NoYXBlSG9sZXNbc0lkeF07Zm9yKHZhciBoSWR4PTA7aElkeDxzaG8ubGVuZ3RoO2hJZHgrKyl7dmFyIGhvPXNob1toSWR4XTt2YXIgaG9sZV91bmFzc2lnbmVkPXRydWU7Zm9yKHZhciBzMklkeD0wO3MySWR4PG5ld1NoYXBlcy5sZW5ndGg7czJJZHgrKyl7aWYoaXNQb2ludEluc2lkZVBvbHlnb24oaG8ucCxuZXdTaGFwZXNbczJJZHhdLnApKXtpZihzSWR4IT09czJJZHgpdG9DaGFuZ2UucHVzaCh7ZnJvbXM6c0lkeCx0b3M6czJJZHgsaG9sZTpoSWR4fSk7aWYoaG9sZV91bmFzc2lnbmVkKXtob2xlX3VuYXNzaWduZWQ9ZmFsc2U7YmV0dGVyU2hhcGVIb2xlc1tzMklkeF0ucHVzaChobyk7fWVsc2V7YW1iaWd1b3VzPXRydWU7fX19aWYoaG9sZV91bmFzc2lnbmVkKXtiZXR0ZXJTaGFwZUhvbGVzW3NJZHhdLnB1c2goaG8pO319fS8vIGNvbnNvbGUubG9nKFwiYW1iaWd1b3VzOiBcIiwgYW1iaWd1b3VzKTtcbmlmKHRvQ2hhbmdlLmxlbmd0aD4wKXsvLyBjb25zb2xlLmxvZyhcInRvIGNoYW5nZTogXCIsIHRvQ2hhbmdlKTtcbmlmKCFhbWJpZ3VvdXMpbmV3U2hhcGVIb2xlcz1iZXR0ZXJTaGFwZUhvbGVzO319dmFyIHRtcEhvbGVzO2Zvcih2YXIgaT0wLGlsPW5ld1NoYXBlcy5sZW5ndGg7aTxpbDtpKyspe3RtcFNoYXBlPW5ld1NoYXBlc1tpXS5zO3NoYXBlcy5wdXNoKHRtcFNoYXBlKTt0bXBIb2xlcz1uZXdTaGFwZUhvbGVzW2ldO2Zvcih2YXIgaj0wLGpsPXRtcEhvbGVzLmxlbmd0aDtqPGpsO2orKyl7dG1wU2hhcGUuaG9sZXMucHVzaCh0bXBIb2xlc1tqXS5oKTt9fS8vY29uc29sZS5sb2coXCJzaGFwZVwiLCBzaGFwZXMpO1xucmV0dXJuIHNoYXBlczt9fSk7Ly8gRmlsZTpzcmMvZXh0cmFzL2NvcmUvU2hhcGUuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nXHJcbiAqIERlZmluZXMgYSAyZCBzaGFwZSBwbGFuZSB1c2luZyBwYXRocy5cclxuICoqLy8vIFNURVAgMSBDcmVhdGUgYSBwYXRoLlxuLy8gU1RFUCAyIFR1cm4gcGF0aCBpbnRvIHNoYXBlLlxuLy8gU1RFUCAzIEV4dHJ1ZGVHZW9tZXRyeSB0YWtlcyBpbiBTaGFwZS9TaGFwZXNcbi8vIFNURVAgM2EgLSBFeHRyYWN0IHBvaW50cyBmcm9tIGVhY2ggc2hhcGUsIHR1cm4gdG8gdmVydGljZXNcbi8vIFNURVAgM2IgLSBUcmlhbmd1bGF0ZSBlYWNoIHNoYXBlLCBhZGQgZmFjZXMuXG5USFJFRS5TaGFwZT1mdW5jdGlvbigpe1RIUkVFLlBhdGguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaG9sZXM9W107fTtUSFJFRS5TaGFwZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLlBhdGgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU2hhcGUsLy8gQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJldHVybiBFeHRydWRlR2VvbWV0cnlcbmV4dHJ1ZGU6ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIG5ldyBUSFJFRS5FeHRydWRlR2VvbWV0cnkodGhpcyxvcHRpb25zKTt9LC8vIENvbnZlbmllbmNlIG1ldGhvZCB0byByZXR1cm4gU2hhcGVHZW9tZXRyeVxubWFrZUdlb21ldHJ5OmZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBuZXcgVEhSRUUuU2hhcGVHZW9tZXRyeSh0aGlzLG9wdGlvbnMpO30sZ2V0UG9pbnRzSG9sZXM6ZnVuY3Rpb24oZGl2aXNpb25zKXt2YXIgaG9sZXNQdHM9W107Zm9yKHZhciBpPTAsbD10aGlzLmhvbGVzLmxlbmd0aDtpPGw7aSsrKXtob2xlc1B0c1tpXT10aGlzLmhvbGVzW2ldLmdldFBvaW50cyhkaXZpc2lvbnMpO31yZXR1cm4gaG9sZXNQdHM7fSwvLyBHZXQgcG9pbnRzIG9mIHNoYXBlIGFuZCBob2xlcyAoa2V5cG9pbnRzIGJhc2VkIG9uIHNlZ21lbnRzIHBhcmFtZXRlcilcbmV4dHJhY3RBbGxQb2ludHM6ZnVuY3Rpb24oZGl2aXNpb25zKXtyZXR1cm57c2hhcGU6dGhpcy5nZXRQb2ludHMoZGl2aXNpb25zKSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKGRpdmlzaW9ucyl9O30sZXh0cmFjdFBvaW50czpmdW5jdGlvbihkaXZpc2lvbnMpe3JldHVybiB0aGlzLmV4dHJhY3RBbGxQb2ludHMoZGl2aXNpb25zKTt9fSk7Ly8gRmlsZTpzcmMvZXh0cmFzL2N1cnZlcy9MaW5lQ3VydmUuanNcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKlx0TGluZVxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovVEhSRUUuTGluZUN1cnZlPWZ1bmN0aW9uKHYxLHYyKXt0aGlzLnYxPXYxO3RoaXMudjI9djI7fTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxpbmVDdXJ2ZTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQpe3ZhciBwb2ludD10aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpO3BvaW50Lm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnYxKTtyZXR1cm4gcG9pbnQ7fTsvLyBMaW5lIGN1cnZlIGlzIGxpbmVhciwgc28gd2UgY2FuIG92ZXJ3cml0ZSBkZWZhdWx0IGdldFBvaW50QXRcblRIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbih1KXtyZXR1cm4gdGhpcy5nZXRQb2ludCh1KTt9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbih0KXt2YXIgdGFuZ2VudD10aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpO3JldHVybiB0YW5nZW50Lm5vcm1hbGl6ZSgpO307Ly8gRmlsZTpzcmMvZXh0cmFzL2N1cnZlcy9RdWFkcmF0aWNCZXppZXJDdXJ2ZS5qc1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRRdWFkcmF0aWMgQmV6aWVyIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZT1mdW5jdGlvbih2MCx2MSx2Mil7dGhpcy52MD12MDt0aGlzLnYxPXYxO3RoaXMudjI9djI7fTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGIyPVRIUkVFLlNoYXBlVXRpbHMuYjI7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGIyKHQsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpLGIyKHQsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpKTt9O1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKHQpe3ZhciB0YW5nZW50UXVhZHJhdGljQmV6aWVyPVRIUkVFLkN1cnZlVXRpbHMudGFuZ2VudFF1YWRyYXRpY0JlemllcjtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIodGFuZ2VudFF1YWRyYXRpY0Jlemllcih0LHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KSx0YW5nZW50UXVhZHJhdGljQmV6aWVyKHQsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpKS5ub3JtYWxpemUoKTt9Oy8vIEZpbGU6c3JjL2V4dHJhcy9jdXJ2ZXMvQ3ViaWNCZXppZXJDdXJ2ZS5qc1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRDdWJpYyBCZXppZXIgY3VydmVcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1RIUkVFLkN1YmljQmV6aWVyQ3VydmU9ZnVuY3Rpb24odjAsdjEsdjIsdjMpe3RoaXMudjA9djA7dGhpcy52MT12MTt0aGlzLnYyPXYyO3RoaXMudjM9djM7fTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0KXt2YXIgYjM9VEhSRUUuU2hhcGVVdGlscy5iMztyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYjModCx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpLGIzKHQsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KSk7fTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKHQpe3ZhciB0YW5nZW50Q3ViaWNCZXppZXI9VEhSRUUuQ3VydmVVdGlscy50YW5nZW50Q3ViaWNCZXppZXI7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKHRhbmdlbnRDdWJpY0Jlemllcih0LHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54LHRoaXMudjMueCksdGFuZ2VudEN1YmljQmV6aWVyKHQsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KSkubm9ybWFsaXplKCk7fTsvLyBGaWxlOnNyYy9leHRyYXMvY3VydmVzL1NwbGluZUN1cnZlLmpzXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICpcdFNwbGluZSBjdXJ2ZVxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovVEhSRUUuU3BsaW5lQ3VydmU9ZnVuY3Rpb24ocG9pbnRzLyogYXJyYXkgb2YgVmVjdG9yMiAqLyl7dGhpcy5wb2ludHM9cG9pbnRzPT11bmRlZmluZWQ/W106cG9pbnRzO307VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5TcGxpbmVDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3BsaW5lQ3VydmU7VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQpe3ZhciBwb2ludHM9dGhpcy5wb2ludHM7dmFyIHBvaW50PShwb2ludHMubGVuZ3RoLTEpKnQ7dmFyIGludFBvaW50PU1hdGguZmxvb3IocG9pbnQpO3ZhciB3ZWlnaHQ9cG9pbnQtaW50UG9pbnQ7dmFyIHBvaW50MD1wb2ludHNbaW50UG9pbnQ9PT0wP2ludFBvaW50OmludFBvaW50LTFdO3ZhciBwb2ludDE9cG9pbnRzW2ludFBvaW50XTt2YXIgcG9pbnQyPXBvaW50c1tpbnRQb2ludD5wb2ludHMubGVuZ3RoLTI/cG9pbnRzLmxlbmd0aC0xOmludFBvaW50KzFdO3ZhciBwb2ludDM9cG9pbnRzW2ludFBvaW50PnBvaW50cy5sZW5ndGgtMz9wb2ludHMubGVuZ3RoLTE6aW50UG9pbnQrMl07dmFyIGludGVycG9sYXRlPVRIUkVFLkN1cnZlVXRpbHMuaW50ZXJwb2xhdGU7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGludGVycG9sYXRlKHBvaW50MC54LHBvaW50MS54LHBvaW50Mi54LHBvaW50My54LHdlaWdodCksaW50ZXJwb2xhdGUocG9pbnQwLnkscG9pbnQxLnkscG9pbnQyLnkscG9pbnQzLnksd2VpZ2h0KSk7fTsvLyBGaWxlOnNyYy9leHRyYXMvY3VydmVzL0VsbGlwc2VDdXJ2ZS5qc1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRFbGxpcHNlIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5FbGxpcHNlQ3VydmU9ZnVuY3Rpb24oYVgsYVkseFJhZGl1cyx5UmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlLGFSb3RhdGlvbil7dGhpcy5hWD1hWDt0aGlzLmFZPWFZO3RoaXMueFJhZGl1cz14UmFkaXVzO3RoaXMueVJhZGl1cz15UmFkaXVzO3RoaXMuYVN0YXJ0QW5nbGU9YVN0YXJ0QW5nbGU7dGhpcy5hRW5kQW5nbGU9YUVuZEFuZ2xlO3RoaXMuYUNsb2Nrd2lzZT1hQ2xvY2t3aXNlO3RoaXMuYVJvdGF0aW9uPWFSb3RhdGlvbnx8MDt9O1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRWxsaXBzZUN1cnZlO1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGRlbHRhQW5nbGU9dGhpcy5hRW5kQW5nbGUtdGhpcy5hU3RhcnRBbmdsZTtpZihkZWx0YUFuZ2xlPDApZGVsdGFBbmdsZSs9TWF0aC5QSSoyO2lmKGRlbHRhQW5nbGU+TWF0aC5QSSoyKWRlbHRhQW5nbGUtPU1hdGguUEkqMjt2YXIgYW5nbGU7aWYodGhpcy5hQ2xvY2t3aXNlPT09dHJ1ZSl7YW5nbGU9dGhpcy5hRW5kQW5nbGUrKDEtdCkqKE1hdGguUEkqMi1kZWx0YUFuZ2xlKTt9ZWxzZXthbmdsZT10aGlzLmFTdGFydEFuZ2xlK3QqZGVsdGFBbmdsZTt9dmFyIHg9dGhpcy5hWCt0aGlzLnhSYWRpdXMqTWF0aC5jb3MoYW5nbGUpO3ZhciB5PXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGFuZ2xlKTtpZih0aGlzLmFSb3RhdGlvbiE9PTApe3ZhciBjb3M9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pO3ZhciBzaW49TWF0aC5zaW4odGhpcy5hUm90YXRpb24pO3ZhciB0eD14LHR5PXk7Ly8gUm90YXRlIHRoZSBwb2ludCBhYm91dCB0aGUgY2VudGVyIG9mIHRoZSBlbGxpcHNlLlxueD0odHgtdGhpcy5hWCkqY29zLSh0eS10aGlzLmFZKSpzaW4rdGhpcy5hWDt5PSh0eC10aGlzLmFYKSpzaW4rKHR5LXRoaXMuYVkpKmNvcyt0aGlzLmFZO31yZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoeCx5KTt9Oy8vIEZpbGU6c3JjL2V4dHJhcy9jdXJ2ZXMvQXJjQ3VydmUuanNcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKlx0QXJjIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5BcmNDdXJ2ZT1mdW5jdGlvbihhWCxhWSxhUmFkaXVzLGFTdGFydEFuZ2xlLGFFbmRBbmdsZSxhQ2xvY2t3aXNlKXtUSFJFRS5FbGxpcHNlQ3VydmUuY2FsbCh0aGlzLGFYLGFZLGFSYWRpdXMsYVJhZGl1cyxhU3RhcnRBbmdsZSxhRW5kQW5nbGUsYUNsb2Nrd2lzZSk7fTtUSFJFRS5BcmNDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlKTtUSFJFRS5BcmNDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQXJjQ3VydmU7Ly8gRmlsZTpzcmMvZXh0cmFzL2N1cnZlcy9MaW5lQ3VydmUzLmpzXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICpcdExpbmUzRFxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovVEhSRUUuTGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24odjEsdjIpe3RoaXMudjE9djE7dGhpcy52Mj12Mjt9LGZ1bmN0aW9uKHQpe3ZhciB2ZWN0b3I9bmV3IFRIUkVFLlZlY3RvcjMoKTt2ZWN0b3Iuc3ViVmVjdG9ycyh0aGlzLnYyLHRoaXMudjEpOy8vIGRpZmZcbnZlY3Rvci5tdWx0aXBseVNjYWxhcih0KTt2ZWN0b3IuYWRkKHRoaXMudjEpO3JldHVybiB2ZWN0b3I7fSk7Ly8gRmlsZTpzcmMvZXh0cmFzL2N1cnZlcy9RdWFkcmF0aWNCZXppZXJDdXJ2ZTMuanNcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKlx0UXVhZHJhdGljIEJlemllciAzRCBjdXJ2ZVxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbih2MCx2MSx2Mil7dGhpcy52MD12MDt0aGlzLnYxPXYxO3RoaXMudjI9djI7fSxmdW5jdGlvbih0KXt2YXIgYjI9VEhSRUUuU2hhcGVVdGlscy5iMjtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYjIodCx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCksYjIodCx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSksYjIodCx0aGlzLnYwLnosdGhpcy52MS56LHRoaXMudjIueikpO30pOy8vIEZpbGU6c3JjL2V4dHJhcy9jdXJ2ZXMvQ3ViaWNCZXppZXJDdXJ2ZTMuanNcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKlx0Q3ViaWMgQmV6aWVyIDNEIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5DdWJpY0JlemllckN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24odjAsdjEsdjIsdjMpe3RoaXMudjA9djA7dGhpcy52MT12MTt0aGlzLnYyPXYyO3RoaXMudjM9djM7fSxmdW5jdGlvbih0KXt2YXIgYjM9VEhSRUUuU2hhcGVVdGlscy5iMztyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYjModCx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpLGIzKHQsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KSxiMyh0LHRoaXMudjAueix0aGlzLnYxLnosdGhpcy52Mi56LHRoaXMudjMueikpO30pOy8vIEZpbGU6c3JjL2V4dHJhcy9jdXJ2ZXMvU3BsaW5lQ3VydmUzLmpzXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICpcdFNwbGluZSAzRCBjdXJ2ZVxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovVEhSRUUuU3BsaW5lQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihwb2ludHMvKiBhcnJheSBvZiBWZWN0b3IzICovKXtjb25zb2xlLndhcm4oJ1RIUkVFLlNwbGluZUN1cnZlMyB3aWxsIGJlIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMycpO3RoaXMucG9pbnRzPXBvaW50cz09dW5kZWZpbmVkP1tdOnBvaW50czt9LGZ1bmN0aW9uKHQpe3ZhciBwb2ludHM9dGhpcy5wb2ludHM7dmFyIHBvaW50PShwb2ludHMubGVuZ3RoLTEpKnQ7dmFyIGludFBvaW50PU1hdGguZmxvb3IocG9pbnQpO3ZhciB3ZWlnaHQ9cG9pbnQtaW50UG9pbnQ7dmFyIHBvaW50MD1wb2ludHNbaW50UG9pbnQ9PTA/aW50UG9pbnQ6aW50UG9pbnQtMV07dmFyIHBvaW50MT1wb2ludHNbaW50UG9pbnRdO3ZhciBwb2ludDI9cG9pbnRzW2ludFBvaW50PnBvaW50cy5sZW5ndGgtMj9wb2ludHMubGVuZ3RoLTE6aW50UG9pbnQrMV07dmFyIHBvaW50Mz1wb2ludHNbaW50UG9pbnQ+cG9pbnRzLmxlbmd0aC0zP3BvaW50cy5sZW5ndGgtMTppbnRQb2ludCsyXTt2YXIgaW50ZXJwb2xhdGU9VEhSRUUuQ3VydmVVdGlscy5pbnRlcnBvbGF0ZTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoaW50ZXJwb2xhdGUocG9pbnQwLngscG9pbnQxLngscG9pbnQyLngscG9pbnQzLngsd2VpZ2h0KSxpbnRlcnBvbGF0ZShwb2ludDAueSxwb2ludDEueSxwb2ludDIueSxwb2ludDMueSx3ZWlnaHQpLGludGVycG9sYXRlKHBvaW50MC56LHBvaW50MS56LHBvaW50Mi56LHBvaW50My56LHdlaWdodCkpO30pOy8vIEZpbGU6c3JjL2V4dHJhcy9jdXJ2ZXMvQ2F0bXVsbFJvbUN1cnZlMy5qc1xuLyoqXHJcbiAqIEBhdXRob3Igeno4NSBodHRwczovL2dpdGh1Yi5jb20veno4NVxyXG4gKlxyXG4gKiBDZW50cmlwZXRhbCBDYXRtdWxsUm9tIEN1cnZlIC0gd2hpY2ggaXMgdXNlZnVsIGZvciBhdm9pZGluZ1xyXG4gKiBjdXNwcyBhbmQgc2VsZi1pbnRlcnNlY3Rpb25zIGluIG5vbi11bmlmb3JtIGNhdG11bGwgcm9tIGN1cnZlcy5cclxuICogaHR0cDovL3d3dy5jZW15dWtzZWwuY29tL3Jlc2VhcmNoL2NhdG11bGxyb21fcGFyYW0vY2F0bXVsbHJvbS5wZGZcclxuICpcclxuICogY3VydmUudHlwZSBhY2NlcHRzIGNlbnRyaXBldGFsKGRlZmF1bHQpLCBjaG9yZGFsIGFuZCBjYXRtdWxscm9tXHJcbiAqIGN1cnZlLnRlbnNpb24gaXMgdXNlZCBmb3IgY2F0bXVsbHJvbSB3aGljaCBkZWZhdWx0cyB0byAwLjVcclxuICovVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMz1mdW5jdGlvbigpe3ZhciB0bXA9bmV3IFRIUkVFLlZlY3RvcjMoKSxweD1uZXcgQ3ViaWNQb2x5KCkscHk9bmV3IEN1YmljUG9seSgpLHB6PW5ldyBDdWJpY1BvbHkoKTsvKlxyXG5cdEJhc2VkIG9uIGFuIG9wdGltaXplZCBjKysgc29sdXRpb24gaW5cclxuXHQgLSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzk0ODk3MzYvY2F0bXVsbC1yb20tY3VydmUtd2l0aC1uby1jdXNwcy1hbmQtbm8tc2VsZi1pbnRlcnNlY3Rpb25zL1xyXG5cdCAtIGh0dHA6Ly9pZGVvbmUuY29tL05vRWJWTVxyXG5cclxuXHRUaGlzIEN1YmljUG9seSBjbGFzcyBjb3VsZCBiZSB1c2VkIGZvciByZXVzaW5nIHNvbWUgdmFyaWFibGVzIGFuZCBjYWxjdWxhdGlvbnMsXHJcblx0YnV0IGZvciB0aHJlZS5qcyBjdXJ2ZSB1c2UsIGl0IGNvdWxkIGJlIHBvc3NpYmxlIGlubGluZWQgYW5kIGZsYXR0ZW4gaW50byBhIHNpbmdsZSBmdW5jdGlvbiBjYWxsXHJcblx0d2hpY2ggY2FuIGJlIHBsYWNlZCBpbiBDdXJ2ZVV0aWxzLlxyXG5cdCovZnVuY3Rpb24gQ3ViaWNQb2x5KCl7fS8qXHJcblx0ICogQ29tcHV0ZSBjb2VmZmljaWVudHMgZm9yIGEgY3ViaWMgcG9seW5vbWlhbFxyXG5cdCAqICAgcChzKSA9IGMwICsgYzEqcyArIGMyKnNeMiArIGMzKnNeM1xyXG5cdCAqIHN1Y2ggdGhhdFxyXG5cdCAqICAgcCgwKSA9IHgwLCBwKDEpID0geDFcclxuXHQgKiAgYW5kXHJcblx0ICogICBwJygwKSA9IHQwLCBwJygxKSA9IHQxLlxyXG5cdCAqL0N1YmljUG9seS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbih4MCx4MSx0MCx0MSl7dGhpcy5jMD14MDt0aGlzLmMxPXQwO3RoaXMuYzI9LTMqeDArMyp4MS0yKnQwLXQxO3RoaXMuYzM9Mip4MC0yKngxK3QwK3QxO307Q3ViaWNQb2x5LnByb3RvdHlwZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb209ZnVuY3Rpb24oeDAseDEseDIseDMsZHQwLGR0MSxkdDIpey8vIGNvbXB1dGUgdGFuZ2VudHMgd2hlbiBwYXJhbWV0ZXJpemVkIGluIFt0MSx0Ml1cbnZhciB0MT0oeDEteDApL2R0MC0oeDIteDApLyhkdDArZHQxKSsoeDIteDEpL2R0MTt2YXIgdDI9KHgyLXgxKS9kdDEtKHgzLXgxKS8oZHQxK2R0MikrKHgzLXgyKS9kdDI7Ly8gcmVzY2FsZSB0YW5nZW50cyBmb3IgcGFyYW1ldHJpemF0aW9uIGluIFswLDFdXG50MSo9ZHQxO3QyKj1kdDE7Ly8gaW5pdEN1YmljUG9seVxudGhpcy5pbml0KHgxLHgyLHQxLHQyKTt9Oy8vIHN0YW5kYXJkIENhdG11bGwtUm9tIHNwbGluZTogaW50ZXJwb2xhdGUgYmV0d2VlbiB4MSBhbmQgeDIgd2l0aCBwcmV2aW91cy9mb2xsb3dpbmcgcG9pbnRzIHgxL3g0XG5DdWJpY1BvbHkucHJvdG90eXBlLmluaXRDYXRtdWxsUm9tPWZ1bmN0aW9uKHgwLHgxLHgyLHgzLHRlbnNpb24pe3RoaXMuaW5pdCh4MSx4Mix0ZW5zaW9uKih4Mi14MCksdGVuc2lvbiooeDMteDEpKTt9O0N1YmljUG9seS5wcm90b3R5cGUuY2FsYz1mdW5jdGlvbih0KXt2YXIgdDI9dCp0O3ZhciB0Mz10Mip0O3JldHVybiB0aGlzLmMwK3RoaXMuYzEqdCt0aGlzLmMyKnQyK3RoaXMuYzMqdDM7fTsvLyBTdWJjbGFzcyBUaHJlZS5qcyBjdXJ2ZVxucmV0dXJuIFRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihwLyogYXJyYXkgb2YgVmVjdG9yMyAqLyl7dGhpcy5wb2ludHM9cHx8W107dGhpcy5jbG9zZWQ9ZmFsc2U7fSxmdW5jdGlvbih0KXt2YXIgcG9pbnRzPXRoaXMucG9pbnRzLHBvaW50LGludFBvaW50LHdlaWdodCxsO2w9cG9pbnRzLmxlbmd0aDtpZihsPDIpY29uc29sZS5sb2coJ2R1aCwgeW91IG5lZWQgYXQgbGVhc3QgMiBwb2ludHMnKTtwb2ludD0obC0odGhpcy5jbG9zZWQ/MDoxKSkqdDtpbnRQb2ludD1NYXRoLmZsb29yKHBvaW50KTt3ZWlnaHQ9cG9pbnQtaW50UG9pbnQ7aWYodGhpcy5jbG9zZWQpe2ludFBvaW50Kz1pbnRQb2ludD4wPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoaW50UG9pbnQpL3BvaW50cy5sZW5ndGgpKzEpKnBvaW50cy5sZW5ndGg7fWVsc2UgaWYod2VpZ2h0PT09MCYmaW50UG9pbnQ9PT1sLTEpe2ludFBvaW50PWwtMjt3ZWlnaHQ9MTt9dmFyIHAwLHAxLHAyLHAzOy8vIDQgcG9pbnRzXG5pZih0aGlzLmNsb3NlZHx8aW50UG9pbnQ+MCl7cDA9cG9pbnRzWyhpbnRQb2ludC0xKSVsXTt9ZWxzZXsvLyBleHRyYXBvbGF0ZSBmaXJzdCBwb2ludFxudG1wLnN1YlZlY3RvcnMocG9pbnRzWzBdLHBvaW50c1sxXSkuYWRkKHBvaW50c1swXSk7cDA9dG1wO31wMT1wb2ludHNbaW50UG9pbnQlbF07cDI9cG9pbnRzWyhpbnRQb2ludCsxKSVsXTtpZih0aGlzLmNsb3NlZHx8aW50UG9pbnQrMjxsKXtwMz1wb2ludHNbKGludFBvaW50KzIpJWxdO31lbHNley8vIGV4dHJhcG9sYXRlIGxhc3QgcG9pbnRcbnRtcC5zdWJWZWN0b3JzKHBvaW50c1tsLTFdLHBvaW50c1tsLTJdKS5hZGQocG9pbnRzW2wtMV0pO3AzPXRtcDt9aWYodGhpcy50eXBlPT09dW5kZWZpbmVkfHx0aGlzLnR5cGU9PT0nY2VudHJpcGV0YWwnfHx0aGlzLnR5cGU9PT0nY2hvcmRhbCcpey8vIGluaXQgQ2VudHJpcGV0YWwgLyBDaG9yZGFsIENhdG11bGwtUm9tXG52YXIgcG93PXRoaXMudHlwZT09PSdjaG9yZGFsJz8wLjU6MC4yNTt2YXIgZHQwPU1hdGgucG93KHAwLmRpc3RhbmNlVG9TcXVhcmVkKHAxKSxwb3cpO3ZhciBkdDE9TWF0aC5wb3cocDEuZGlzdGFuY2VUb1NxdWFyZWQocDIpLHBvdyk7dmFyIGR0Mj1NYXRoLnBvdyhwMi5kaXN0YW5jZVRvU3F1YXJlZChwMykscG93KTsvLyBzYWZldHkgY2hlY2sgZm9yIHJlcGVhdGVkIHBvaW50c1xuaWYoZHQxPDFlLTQpZHQxPTEuMDtpZihkdDA8MWUtNClkdDA9ZHQxO2lmKGR0MjwxZS00KWR0Mj1kdDE7cHguaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKHAwLngscDEueCxwMi54LHAzLngsZHQwLGR0MSxkdDIpO3B5LmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShwMC55LHAxLnkscDIueSxwMy55LGR0MCxkdDEsZHQyKTtwei5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20ocDAueixwMS56LHAyLnoscDMueixkdDAsZHQxLGR0Mik7fWVsc2UgaWYodGhpcy50eXBlPT09J2NhdG11bGxyb20nKXt2YXIgdGVuc2lvbj10aGlzLnRlbnNpb24hPT11bmRlZmluZWQ/dGhpcy50ZW5zaW9uOjAuNTtweC5pbml0Q2F0bXVsbFJvbShwMC54LHAxLngscDIueCxwMy54LHRlbnNpb24pO3B5LmluaXRDYXRtdWxsUm9tKHAwLnkscDEueSxwMi55LHAzLnksdGVuc2lvbik7cHouaW5pdENhdG11bGxSb20ocDAueixwMS56LHAyLnoscDMueix0ZW5zaW9uKTt9dmFyIHY9bmV3IFRIUkVFLlZlY3RvcjMocHguY2FsYyh3ZWlnaHQpLHB5LmNhbGMod2VpZ2h0KSxwei5jYWxjKHdlaWdodCkpO3JldHVybiB2O30pO30oKTsvLyBGaWxlOnNyYy9leHRyYXMvY3VydmVzL0Nsb3NlZFNwbGluZUN1cnZlMy5qc1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqXHRDbG9zZWQgU3BsaW5lIDNEIGN1cnZlXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9USFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTM9ZnVuY3Rpb24ocG9pbnRzKXtjb25zb2xlLndhcm4oJ1RIUkVFLkNsb3NlZFNwbGluZUN1cnZlMyBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMuJyk7VEhSRUUuQ2F0bXVsbFJvbUN1cnZlMy5jYWxsKHRoaXMscG9pbnRzKTt0aGlzLnR5cGU9J2NhdG11bGxyb20nO3RoaXMuY2xvc2VkPXRydWU7fTtUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMy5wcm90b3R5cGUpOy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0JveEdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogYmFzZWQgb24gaHR0cDovL3BhcGVydmlzaW9uM2QuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL2FzMy90cnVuay9zcmMvb3JnL3BhcGVydmlzaW9uM2Qvb2JqZWN0cy9wcmltaXRpdmVzL0N1YmUuYXNcclxuICovVEhSRUUuQm94R2VvbWV0cnk9ZnVuY3Rpb24od2lkdGgsaGVpZ2h0LGRlcHRoLHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsZGVwdGhTZWdtZW50cyl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0JveEdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsZGVwdGg6ZGVwdGgsd2lkdGhTZWdtZW50czp3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzLGRlcHRoU2VnbWVudHM6ZGVwdGhTZWdtZW50c307dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5KHdpZHRoLGhlaWdodCxkZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLGRlcHRoU2VnbWVudHMpKTt0aGlzLm1lcmdlVmVydGljZXMoKTt9O1RIUkVFLkJveEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQm94R2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkJveEdlb21ldHJ5O1RIUkVFLkN1YmVHZW9tZXRyeT1USFJFRS5Cb3hHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9Cb3hCdWZmZXJHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgTXVnZW44NyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9NdWdlbjg3XHJcbiAqL1RIUkVFLkJveEJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKHdpZHRoLGhlaWdodCxkZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLGRlcHRoU2VnbWVudHMpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdCb3hCdWZmZXJHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LGRlcHRoOmRlcHRoLHdpZHRoU2VnbWVudHM6d2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50cyxkZXB0aFNlZ21lbnRzOmRlcHRoU2VnbWVudHN9O3ZhciBzY29wZT10aGlzOy8vIHNlZ21lbnRzXG53aWR0aFNlZ21lbnRzPU1hdGguZmxvb3Iod2lkdGhTZWdtZW50cyl8fDE7aGVpZ2h0U2VnbWVudHM9TWF0aC5mbG9vcihoZWlnaHRTZWdtZW50cyl8fDE7ZGVwdGhTZWdtZW50cz1NYXRoLmZsb29yKGRlcHRoU2VnbWVudHMpfHwxOy8vIHRoZXNlIGFyZSB1c2VkIHRvIGNhbGN1bGF0ZSBidWZmZXIgbGVuZ3RoXG52YXIgdmVydGV4Q291bnQ9Y2FsY3VsYXRlVmVydGV4Q291bnQod2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxkZXB0aFNlZ21lbnRzKTt2YXIgaW5kZXhDb3VudD1jYWxjdWxhdGVJbmRleENvdW50KHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsZGVwdGhTZWdtZW50cyk7Ly8gYnVmZmVyc1xudmFyIGluZGljZXM9bmV3KGluZGV4Q291bnQ+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGluZGV4Q291bnQpO3ZhciB2ZXJ0aWNlcz1uZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpO3ZhciBub3JtYWxzPW5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMyk7dmFyIHV2cz1uZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjIpOy8vIG9mZnNldCB2YXJpYWJsZXNcbnZhciB2ZXJ0ZXhCdWZmZXJPZmZzZXQ9MDt2YXIgdXZCdWZmZXJPZmZzZXQ9MDt2YXIgaW5kZXhCdWZmZXJPZmZzZXQ9MDt2YXIgbnVtYmVyT2ZWZXJ0aWNlcz0wOy8vIGdyb3VwIHZhcmlhYmxlc1xudmFyIGdyb3VwU3RhcnQ9MDsvLyBidWlsZCBlYWNoIHNpZGUgb2YgdGhlIGJveCBnZW9tZXRyeVxuYnVpbGRQbGFuZSgneicsJ3knLCd4JywtMSwtMSxkZXB0aCxoZWlnaHQsd2lkdGgsZGVwdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cywwKTsvLyBweFxuYnVpbGRQbGFuZSgneicsJ3knLCd4JywxLC0xLGRlcHRoLGhlaWdodCwtd2lkdGgsZGVwdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cywxKTsvLyBueFxuYnVpbGRQbGFuZSgneCcsJ3onLCd5JywxLDEsd2lkdGgsZGVwdGgsaGVpZ2h0LHdpZHRoU2VnbWVudHMsZGVwdGhTZWdtZW50cywyKTsvLyBweVxuYnVpbGRQbGFuZSgneCcsJ3onLCd5JywxLC0xLHdpZHRoLGRlcHRoLC1oZWlnaHQsd2lkdGhTZWdtZW50cyxkZXB0aFNlZ21lbnRzLDMpOy8vIG55XG5idWlsZFBsYW5lKCd4JywneScsJ3onLDEsLTEsd2lkdGgsaGVpZ2h0LGRlcHRoLHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsNCk7Ly8gcHpcbmJ1aWxkUGxhbmUoJ3gnLCd5JywneicsLTEsLTEsd2lkdGgsaGVpZ2h0LC1kZXB0aCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLDUpOy8vIG56XG4vLyBidWlsZCBnZW9tZXRyeVxudGhpcy5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGluZGljZXMsMSkpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShub3JtYWxzLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZSgndXYnLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodXZzLDIpKTsvLyBoZWxwZXIgZnVuY3Rpb25zXG5mdW5jdGlvbiBjYWxjdWxhdGVWZXJ0ZXhDb3VudCh3LGgsZCl7dmFyIHZlcnRpY2VzPTA7Ly8gY2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgdmVydGljZXMgZm9yIGVhY2ggc2lkZSAocGxhbmUpXG52ZXJ0aWNlcys9KHcrMSkqKGgrMSkqMjsvLyB4eVxudmVydGljZXMrPSh3KzEpKihkKzEpKjI7Ly8geHpcbnZlcnRpY2VzKz0oZCsxKSooaCsxKSoyOy8vIHp5XG5yZXR1cm4gdmVydGljZXM7fWZ1bmN0aW9uIGNhbGN1bGF0ZUluZGV4Q291bnQodyxoLGQpe3ZhciBpbmRleD0wOy8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHNxdWFyZXMgZm9yIGVhY2ggc2lkZVxuaW5kZXgrPXcqaCoyOy8vIHh5XG5pbmRleCs9dypkKjI7Ly8geHpcbmluZGV4Kz1kKmgqMjsvLyB6eVxucmV0dXJuIGluZGV4KjY7Ly8gdHdvIHRyaWFuZ2xlcyBwZXIgc3F1YXJlID0+IHNpeCB2ZXJ0aWNlcyBwZXIgc3F1YXJlXG59ZnVuY3Rpb24gYnVpbGRQbGFuZSh1LHYsdyx1ZGlyLHZkaXIsd2lkdGgsaGVpZ2h0LGRlcHRoLGdyaWRYLGdyaWRZLG1hdGVyaWFsSW5kZXgpe3ZhciBzZWdtZW50V2lkdGg9d2lkdGgvZ3JpZFg7dmFyIHNlZ21lbnRIZWlnaHQ9aGVpZ2h0L2dyaWRZO3ZhciB3aWR0aEhhbGY9d2lkdGgvMjt2YXIgaGVpZ2h0SGFsZj1oZWlnaHQvMjt2YXIgZGVwdGhIYWxmPWRlcHRoLzI7dmFyIGdyaWRYMT1ncmlkWCsxO3ZhciBncmlkWTE9Z3JpZFkrMTt2YXIgdmVydGV4Q291bnRlcj0wO3ZhciBncm91cENvdW50PTA7dmFyIHZlY3Rvcj1uZXcgVEhSRUUuVmVjdG9yMygpOy8vIGdlbmVyYXRlIHZlcnRpY2VzLCBub3JtYWxzIGFuZCB1dnNcbmZvcih2YXIgaXk9MDtpeTxncmlkWTE7aXkrKyl7dmFyIHk9aXkqc2VnbWVudEhlaWdodC1oZWlnaHRIYWxmO2Zvcih2YXIgaXg9MDtpeDxncmlkWDE7aXgrKyl7dmFyIHg9aXgqc2VnbWVudFdpZHRoLXdpZHRoSGFsZjsvLyBzZXQgdmFsdWVzIHRvIGNvcnJlY3QgdmVjdG9yIGNvbXBvbmVudFxudmVjdG9yW3VdPXgqdWRpcjt2ZWN0b3Jbdl09eSp2ZGlyO3ZlY3Rvclt3XT1kZXB0aEhhbGY7Ly8gbm93IGFwcGx5IHZlY3RvciB0byB2ZXJ0ZXggYnVmZmVyXG52ZXJ0aWNlc1t2ZXJ0ZXhCdWZmZXJPZmZzZXRdPXZlY3Rvci54O3ZlcnRpY2VzW3ZlcnRleEJ1ZmZlck9mZnNldCsxXT12ZWN0b3IueTt2ZXJ0aWNlc1t2ZXJ0ZXhCdWZmZXJPZmZzZXQrMl09dmVjdG9yLno7Ly8gc2V0IHZhbHVlcyB0byBjb3JyZWN0IHZlY3RvciBjb21wb25lbnRcbnZlY3Rvclt1XT0wO3ZlY3Rvclt2XT0wO3ZlY3Rvclt3XT1kZXB0aD4wPzE6LTE7Ly8gbm93IGFwcGx5IHZlY3RvciB0byBub3JtYWwgYnVmZmVyXG5ub3JtYWxzW3ZlcnRleEJ1ZmZlck9mZnNldF09dmVjdG9yLng7bm9ybWFsc1t2ZXJ0ZXhCdWZmZXJPZmZzZXQrMV09dmVjdG9yLnk7bm9ybWFsc1t2ZXJ0ZXhCdWZmZXJPZmZzZXQrMl09dmVjdG9yLno7Ly8gdXZzXG51dnNbdXZCdWZmZXJPZmZzZXRdPWl4L2dyaWRYO3V2c1t1dkJ1ZmZlck9mZnNldCsxXT0xLWl5L2dyaWRZOy8vIHVwZGF0ZSBvZmZzZXRzIGFuZCBjb3VudGVyc1xudmVydGV4QnVmZmVyT2Zmc2V0Kz0zO3V2QnVmZmVyT2Zmc2V0Kz0yO3ZlcnRleENvdW50ZXIrPTE7fX0vLyAxLiB5b3UgbmVlZCB0aHJlZSBpbmRpY2VzIHRvIGRyYXcgYSBzaW5nbGUgZmFjZVxuLy8gMi4gYSBzaW5nbGUgc2VnbWVudCBjb25zaXN0cyBvZiB0d28gZmFjZXNcbi8vIDMuIHNvIHdlIG5lZWQgdG8gZ2VuZXJhdGUgc2l4ICgyKjMpIGluZGljZXMgcGVyIHNlZ21lbnRcbmZvcihpeT0wO2l5PGdyaWRZO2l5Kyspe2ZvcihpeD0wO2l4PGdyaWRYO2l4Kyspey8vIGluZGljZXNcbnZhciBhPW51bWJlck9mVmVydGljZXMraXgrZ3JpZFgxKml5O3ZhciBiPW51bWJlck9mVmVydGljZXMraXgrZ3JpZFgxKihpeSsxKTt2YXIgYz1udW1iZXJPZlZlcnRpY2VzKyhpeCsxKStncmlkWDEqKGl5KzEpO3ZhciBkPW51bWJlck9mVmVydGljZXMrKGl4KzEpK2dyaWRYMSppeTsvLyBmYWNlIG9uZVxuaW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldF09YTtpbmRpY2VzW2luZGV4QnVmZmVyT2Zmc2V0KzFdPWI7aW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldCsyXT1kOy8vIGZhY2UgdHdvXG5pbmRpY2VzW2luZGV4QnVmZmVyT2Zmc2V0KzNdPWI7aW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldCs0XT1jO2luZGljZXNbaW5kZXhCdWZmZXJPZmZzZXQrNV09ZDsvLyB1cGRhdGUgb2Zmc2V0cyBhbmQgY291bnRlcnNcbmluZGV4QnVmZmVyT2Zmc2V0Kz02O2dyb3VwQ291bnQrPTY7fX0vLyBhZGQgYSBncm91cCB0byB0aGUgZ2VvbWV0cnkuIHRoaXMgd2lsbCBlbnN1cmUgbXVsdGkgbWF0ZXJpYWwgc3VwcG9ydFxuc2NvcGUuYWRkR3JvdXAoZ3JvdXBTdGFydCxncm91cENvdW50LG1hdGVyaWFsSW5kZXgpOy8vIGNhbGN1bGF0ZSBuZXcgc3RhcnQgdmFsdWUgZm9yIGdyb3Vwc1xuZ3JvdXBTdGFydCs9Z3JvdXBDb3VudDsvLyB1cGRhdGUgdG90YWwgbnVtYmVyIG9mIHZlcnRpY2VzXG5udW1iZXJPZlZlcnRpY2VzKz12ZXJ0ZXhDb3VudGVyO319O1RIUkVFLkJveEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQm94QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0NpcmNsZUdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBodWdoZXNcclxuICovVEhSRUUuQ2lyY2xlR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLHNlZ21lbnRzLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdDaXJjbGVHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6cmFkaXVzLHNlZ21lbnRzOnNlZ21lbnRzLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5KHJhZGl1cyxzZWdtZW50cyx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKSk7fTtUSFJFRS5DaXJjbGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNpcmNsZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DaXJjbGVHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9DaXJjbGVCdWZmZXJHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmVuYWFkYW1zIC8gaHR0cHM6Ly90d2l0dGVyLmNvbS9iZW5fYV9hZGFtc1xyXG4gKi9USFJFRS5DaXJjbGVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihyYWRpdXMsc2VnbWVudHMsdGhldGFTdGFydCx0aGV0YUxlbmd0aCl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0NpcmNsZUJ1ZmZlckdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsc2VnbWVudHM6c2VnbWVudHMsdGhldGFTdGFydDp0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoOnRoZXRhTGVuZ3RofTtyYWRpdXM9cmFkaXVzfHw1MDtzZWdtZW50cz1zZWdtZW50cyE9PXVuZGVmaW5lZD9NYXRoLm1heCgzLHNlZ21lbnRzKTo4O3RoZXRhU3RhcnQ9dGhldGFTdGFydCE9PXVuZGVmaW5lZD90aGV0YVN0YXJ0OjA7dGhldGFMZW5ndGg9dGhldGFMZW5ndGghPT11bmRlZmluZWQ/dGhldGFMZW5ndGg6TWF0aC5QSSoyO3ZhciB2ZXJ0aWNlcz1zZWdtZW50cysyO3ZhciBwb3NpdGlvbnM9bmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyozKTt2YXIgbm9ybWFscz1uZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKjMpO3ZhciB1dnM9bmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyoyKTsvLyBjZW50ZXIgZGF0YSBpcyBhbHJlYWR5IHplcm8sIGJ1dCBuZWVkIHRvIHNldCBhIGZldyBleHRyYXNcbm5vcm1hbHNbMl09MS4wO3V2c1swXT0wLjU7dXZzWzFdPTAuNTtmb3IodmFyIHM9MCxpPTMsaWk9MjtzPD1zZWdtZW50cztzKyssaSs9MyxpaSs9Mil7dmFyIHNlZ21lbnQ9dGhldGFTdGFydCtzL3NlZ21lbnRzKnRoZXRhTGVuZ3RoO3Bvc2l0aW9uc1tpXT1yYWRpdXMqTWF0aC5jb3Moc2VnbWVudCk7cG9zaXRpb25zW2krMV09cmFkaXVzKk1hdGguc2luKHNlZ21lbnQpO25vcm1hbHNbaSsyXT0xOy8vIG5vcm1hbCB6XG51dnNbaWldPShwb3NpdGlvbnNbaV0vcmFkaXVzKzEpLzI7dXZzW2lpKzFdPShwb3NpdGlvbnNbaSsxXS9yYWRpdXMrMSkvMjt9dmFyIGluZGljZXM9W107Zm9yKHZhciBpPTE7aTw9c2VnbWVudHM7aSsrKXtpbmRpY2VzLnB1c2goaSxpKzEsMCk7fXRoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDE2QXJyYXkoaW5kaWNlcyksMSkpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsMykpO3RoaXMuYWRkQXR0cmlidXRlKCdub3JtYWwnLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2JyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHV2cywyKSk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzKCkscmFkaXVzKTt9O1RIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ2lyY2xlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0N5bGluZGVyQnVmZmVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIE11Z2VuODcgLyBodHRwczovL2dpdGh1Yi5jb20vTXVnZW44N1xyXG4gKi9USFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKHJhZGl1c1RvcCxyYWRpdXNCb3R0b20saGVpZ2h0LHJhZGlhbFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLG9wZW5FbmRlZCx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6cmFkaXVzVG9wLHJhZGl1c0JvdHRvbTpyYWRpdXNCb3R0b20saGVpZ2h0OmhlaWdodCxyYWRpYWxTZWdtZW50czpyYWRpYWxTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50cyxvcGVuRW5kZWQ6b3BlbkVuZGVkLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07dmFyIHNjb3BlPXRoaXM7cmFkaXVzVG9wPXJhZGl1c1RvcCE9PXVuZGVmaW5lZD9yYWRpdXNUb3A6MjA7cmFkaXVzQm90dG9tPXJhZGl1c0JvdHRvbSE9PXVuZGVmaW5lZD9yYWRpdXNCb3R0b206MjA7aGVpZ2h0PWhlaWdodCE9PXVuZGVmaW5lZD9oZWlnaHQ6MTAwO3JhZGlhbFNlZ21lbnRzPU1hdGguZmxvb3IocmFkaWFsU2VnbWVudHMpfHw4O2hlaWdodFNlZ21lbnRzPU1hdGguZmxvb3IoaGVpZ2h0U2VnbWVudHMpfHwxO29wZW5FbmRlZD1vcGVuRW5kZWQhPT11bmRlZmluZWQ/b3BlbkVuZGVkOmZhbHNlO3RoZXRhU3RhcnQ9dGhldGFTdGFydCE9PXVuZGVmaW5lZD90aGV0YVN0YXJ0OjAuMDt0aGV0YUxlbmd0aD10aGV0YUxlbmd0aCE9PXVuZGVmaW5lZD90aGV0YUxlbmd0aDoyLjAqTWF0aC5QSTsvLyB1c2VkIHRvIGNhbGN1bGF0ZSBidWZmZXIgbGVuZ3RoXG52YXIgbmJDYXA9MDtpZihvcGVuRW5kZWQ9PT1mYWxzZSl7aWYocmFkaXVzVG9wPjApbmJDYXArKztpZihyYWRpdXNCb3R0b20+MCluYkNhcCsrO312YXIgdmVydGV4Q291bnQ9Y2FsY3VsYXRlVmVydGV4Q291bnQoKTt2YXIgaW5kZXhDb3VudD1jYWxjdWxhdGVJbmRleENvdW50KCk7Ly8gYnVmZmVyc1xudmFyIGluZGljZXM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcoaW5kZXhDb3VudD42NTUzNT9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoaW5kZXhDb3VudCksMSk7dmFyIHZlcnRpY2VzPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCozKSwzKTt2YXIgbm9ybWFscz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMyksMyk7dmFyIHV2cz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMiksMik7Ly8gaGVscGVyIHZhcmlhYmxlc1xudmFyIGluZGV4PTAsaW5kZXhPZmZzZXQ9MCxpbmRleEFycmF5PVtdLGhhbGZIZWlnaHQ9aGVpZ2h0LzI7Ly8gZ3JvdXAgdmFyaWFibGVzXG52YXIgZ3JvdXBTdGFydD0wOy8vIGdlbmVyYXRlIGdlb21ldHJ5XG5nZW5lcmF0ZVRvcnNvKCk7aWYob3BlbkVuZGVkPT09ZmFsc2Upe2lmKHJhZGl1c1RvcD4wKWdlbmVyYXRlQ2FwKHRydWUpO2lmKHJhZGl1c0JvdHRvbT4wKWdlbmVyYXRlQ2FwKGZhbHNlKTt9Ly8gYnVpbGQgZ2VvbWV0cnlcbnRoaXMuc2V0SW5kZXgoaW5kaWNlcyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyx2ZXJ0aWNlcyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsbm9ybWFscyk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2Jyx1dnMpOy8vIGhlbHBlciBmdW5jdGlvbnNcbmZ1bmN0aW9uIGNhbGN1bGF0ZVZlcnRleENvdW50KCl7dmFyIGNvdW50PShyYWRpYWxTZWdtZW50cysxKSooaGVpZ2h0U2VnbWVudHMrMSk7aWYob3BlbkVuZGVkPT09ZmFsc2Upe2NvdW50Kz0ocmFkaWFsU2VnbWVudHMrMSkqbmJDYXArcmFkaWFsU2VnbWVudHMqbmJDYXA7fXJldHVybiBjb3VudDt9ZnVuY3Rpb24gY2FsY3VsYXRlSW5kZXhDb3VudCgpe3ZhciBjb3VudD1yYWRpYWxTZWdtZW50cypoZWlnaHRTZWdtZW50cyoyKjM7aWYob3BlbkVuZGVkPT09ZmFsc2Upe2NvdW50Kz1yYWRpYWxTZWdtZW50cypuYkNhcCozO31yZXR1cm4gY291bnQ7fWZ1bmN0aW9uIGdlbmVyYXRlVG9yc28oKXt2YXIgeCx5O3ZhciBub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdmVydGV4PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIGdyb3VwQ291bnQ9MDsvLyB0aGlzIHdpbGwgYmUgdXNlZCB0byBjYWxjdWxhdGUgdGhlIG5vcm1hbFxudmFyIHRhblRoZXRhPShyYWRpdXNCb3R0b20tcmFkaXVzVG9wKS9oZWlnaHQ7Ly8gZ2VuZXJhdGUgdmVydGljZXMsIG5vcm1hbHMgYW5kIHV2c1xuZm9yKHk9MDt5PD1oZWlnaHRTZWdtZW50czt5Kyspe3ZhciBpbmRleFJvdz1bXTt2YXIgdj15L2hlaWdodFNlZ21lbnRzOy8vIGNhbGN1bGF0ZSB0aGUgcmFkaXVzIG9mIHRoZSBjdXJyZW50IHJvd1xudmFyIHJhZGl1cz12KihyYWRpdXNCb3R0b20tcmFkaXVzVG9wKStyYWRpdXNUb3A7Zm9yKHg9MDt4PD1yYWRpYWxTZWdtZW50czt4Kyspe3ZhciB1PXgvcmFkaWFsU2VnbWVudHM7Ly8gdmVydGV4XG52ZXJ0ZXgueD1yYWRpdXMqTWF0aC5zaW4odSp0aGV0YUxlbmd0aCt0aGV0YVN0YXJ0KTt2ZXJ0ZXgueT0tdipoZWlnaHQraGFsZkhlaWdodDt2ZXJ0ZXguej1yYWRpdXMqTWF0aC5jb3ModSp0aGV0YUxlbmd0aCt0aGV0YVN0YXJ0KTt2ZXJ0aWNlcy5zZXRYWVooaW5kZXgsdmVydGV4LngsdmVydGV4LnksdmVydGV4LnopOy8vIG5vcm1hbFxubm9ybWFsLmNvcHkodmVydGV4KTsvLyBoYW5kbGUgc3BlY2lhbCBjYXNlIGlmIHJhZGl1c1RvcC9yYWRpdXNCb3R0b20gaXMgemVyb1xuaWYocmFkaXVzVG9wPT09MCYmeT09PTB8fHJhZGl1c0JvdHRvbT09PTAmJnk9PT1oZWlnaHRTZWdtZW50cyl7bm9ybWFsLng9TWF0aC5zaW4odSp0aGV0YUxlbmd0aCt0aGV0YVN0YXJ0KTtub3JtYWwuej1NYXRoLmNvcyh1KnRoZXRhTGVuZ3RoK3RoZXRhU3RhcnQpO31ub3JtYWwuc2V0WShNYXRoLnNxcnQobm9ybWFsLngqbm9ybWFsLngrbm9ybWFsLnoqbm9ybWFsLnopKnRhblRoZXRhKS5ub3JtYWxpemUoKTtub3JtYWxzLnNldFhZWihpbmRleCxub3JtYWwueCxub3JtYWwueSxub3JtYWwueik7Ly8gdXZcbnV2cy5zZXRYWShpbmRleCx1LDEtdik7Ly8gc2F2ZSBpbmRleCBvZiB2ZXJ0ZXggaW4gcmVzcGVjdGl2ZSByb3dcbmluZGV4Um93LnB1c2goaW5kZXgpOy8vIGluY3JlYXNlIGluZGV4XG5pbmRleCsrO30vLyBub3cgc2F2ZSB2ZXJ0aWNlcyBvZiB0aGUgcm93IGluIG91ciBpbmRleCBhcnJheVxuaW5kZXhBcnJheS5wdXNoKGluZGV4Um93KTt9Ly8gZ2VuZXJhdGUgaW5kaWNlc1xuZm9yKHg9MDt4PHJhZGlhbFNlZ21lbnRzO3grKyl7Zm9yKHk9MDt5PGhlaWdodFNlZ21lbnRzO3krKyl7Ly8gd2UgdXNlIHRoZSBpbmRleCBhcnJheSB0byBhY2Nlc3MgdGhlIGNvcnJlY3QgaW5kaWNlc1xudmFyIGkxPWluZGV4QXJyYXlbeV1beF07dmFyIGkyPWluZGV4QXJyYXlbeSsxXVt4XTt2YXIgaTM9aW5kZXhBcnJheVt5KzFdW3grMV07dmFyIGk0PWluZGV4QXJyYXlbeV1beCsxXTsvLyBmYWNlIG9uZVxuaW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGkxKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxpMik7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsaTQpO2luZGV4T2Zmc2V0Kys7Ly8gZmFjZSB0d29cbmluZGljZXMuc2V0WChpbmRleE9mZnNldCxpMik7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsaTMpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGk0KTtpbmRleE9mZnNldCsrOy8vIHVwZGF0ZSBjb3VudGVyc1xuZ3JvdXBDb3VudCs9Njt9fS8vIGFkZCBhIGdyb3VwIHRvIHRoZSBnZW9tZXRyeS4gdGhpcyB3aWxsIGVuc3VyZSBtdWx0aSBtYXRlcmlhbCBzdXBwb3J0XG5zY29wZS5hZGRHcm91cChncm91cFN0YXJ0LGdyb3VwQ291bnQsMCk7Ly8gY2FsY3VsYXRlIG5ldyBzdGFydCB2YWx1ZSBmb3IgZ3JvdXBzXG5ncm91cFN0YXJ0Kz1ncm91cENvdW50O31mdW5jdGlvbiBnZW5lcmF0ZUNhcCh0b3Ape3ZhciB4LGNlbnRlckluZGV4U3RhcnQsY2VudGVySW5kZXhFbmQ7dmFyIHV2PW5ldyBUSFJFRS5WZWN0b3IyKCk7dmFyIHZlcnRleD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBncm91cENvdW50PTA7dmFyIHJhZGl1cz10b3A9PT10cnVlP3JhZGl1c1RvcDpyYWRpdXNCb3R0b207dmFyIHNpZ249dG9wPT09dHJ1ZT8xOi0xOy8vIHNhdmUgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjZW50ZXIgdmVydGV4XG5jZW50ZXJJbmRleFN0YXJ0PWluZGV4Oy8vIGZpcnN0IHdlIGdlbmVyYXRlIHRoZSBjZW50ZXIgdmVydGV4IGRhdGEgb2YgdGhlIGNhcC5cbi8vIGJlY2F1c2UgdGhlIGdlb21ldHJ5IG5lZWRzIG9uZSBzZXQgb2YgdXZzIHBlciBmYWNlLFxuLy8gd2UgbXVzdCBnZW5lcmF0ZSBhIGNlbnRlciB2ZXJ0ZXggcGVyIGZhY2Uvc2VnbWVudFxuZm9yKHg9MTt4PD1yYWRpYWxTZWdtZW50czt4Kyspey8vIHZlcnRleFxudmVydGljZXMuc2V0WFlaKGluZGV4LDAsaGFsZkhlaWdodCpzaWduLDApOy8vIG5vcm1hbFxubm9ybWFscy5zZXRYWVooaW5kZXgsMCxzaWduLDApOy8vIHV2XG51di54PTAuNTt1di55PTAuNTt1dnMuc2V0WFkoaW5kZXgsdXYueCx1di55KTsvLyBpbmNyZWFzZSBpbmRleFxuaW5kZXgrKzt9Ly8gc2F2ZSB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2VudGVyIHZlcnRleFxuY2VudGVySW5kZXhFbmQ9aW5kZXg7Ly8gbm93IHdlIGdlbmVyYXRlIHRoZSBzdXJyb3VuZGluZyB2ZXJ0aWNlcywgbm9ybWFscyBhbmQgdXZzXG5mb3IoeD0wO3g8PXJhZGlhbFNlZ21lbnRzO3grKyl7dmFyIHU9eC9yYWRpYWxTZWdtZW50czt2YXIgdGhldGE9dSp0aGV0YUxlbmd0aCt0aGV0YVN0YXJ0O3ZhciBjb3NUaGV0YT1NYXRoLmNvcyh0aGV0YSk7dmFyIHNpblRoZXRhPU1hdGguc2luKHRoZXRhKTsvLyB2ZXJ0ZXhcbnZlcnRleC54PXJhZGl1cypzaW5UaGV0YTt2ZXJ0ZXgueT1oYWxmSGVpZ2h0KnNpZ247dmVydGV4Lno9cmFkaXVzKmNvc1RoZXRhO3ZlcnRpY2VzLnNldFhZWihpbmRleCx2ZXJ0ZXgueCx2ZXJ0ZXgueSx2ZXJ0ZXgueik7Ly8gbm9ybWFsXG5ub3JtYWxzLnNldFhZWihpbmRleCwwLHNpZ24sMCk7Ly8gdXZcbnV2Lng9Y29zVGhldGEqMC41KzAuNTt1di55PXNpblRoZXRhKjAuNSpzaWduKzAuNTt1dnMuc2V0WFkoaW5kZXgsdXYueCx1di55KTsvLyBpbmNyZWFzZSBpbmRleFxuaW5kZXgrKzt9Ly8gZ2VuZXJhdGUgaW5kaWNlc1xuZm9yKHg9MDt4PHJhZGlhbFNlZ21lbnRzO3grKyl7dmFyIGM9Y2VudGVySW5kZXhTdGFydCt4O3ZhciBpPWNlbnRlckluZGV4RW5kK3g7aWYodG9wPT09dHJ1ZSl7Ly8gZmFjZSB0b3BcbmluZGljZXMuc2V0WChpbmRleE9mZnNldCxpKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxpKzEpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGMpO2luZGV4T2Zmc2V0Kys7fWVsc2V7Ly8gZmFjZSBib3R0b21cbmluZGljZXMuc2V0WChpbmRleE9mZnNldCxpKzEpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGkpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGMpO2luZGV4T2Zmc2V0Kys7fS8vIHVwZGF0ZSBjb3VudGVyc1xuZ3JvdXBDb3VudCs9Mzt9Ly8gYWRkIGEgZ3JvdXAgdG8gdGhlIGdlb21ldHJ5LiB0aGlzIHdpbGwgZW5zdXJlIG11bHRpIG1hdGVyaWFsIHN1cHBvcnRcbnNjb3BlLmFkZEdyb3VwKGdyb3VwU3RhcnQsZ3JvdXBDb3VudCx0b3A9PT10cnVlPzE6Mik7Ly8gY2FsY3VsYXRlIG5ldyBzdGFydCB2YWx1ZSBmb3IgZ3JvdXBzXG5ncm91cFN0YXJ0Kz1ncm91cENvdW50O319O1RIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0N5bGluZGVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5DeWxpbmRlckdlb21ldHJ5PWZ1bmN0aW9uKHJhZGl1c1RvcCxyYWRpdXNCb3R0b20saGVpZ2h0LHJhZGlhbFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLG9wZW5FbmRlZCx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nQ3lsaW5kZXJHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6cmFkaXVzVG9wLHJhZGl1c0JvdHRvbTpyYWRpdXNCb3R0b20saGVpZ2h0OmhlaWdodCxyYWRpYWxTZWdtZW50czpyYWRpYWxTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50cyxvcGVuRW5kZWQ6b3BlbkVuZGVkLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkocmFkaXVzVG9wLHJhZGl1c0JvdHRvbSxoZWlnaHQscmFkaWFsU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsb3BlbkVuZGVkLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpKTt0aGlzLm1lcmdlVmVydGljZXMoKTt9O1RIUkVFLkN5bGluZGVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DeWxpbmRlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DeWxpbmRlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0NvbmVCdWZmZXJHZW9tZXRyeS5qc1xuLypcclxuICogQGF1dGhvcjogYWJlbG5hdGlvbiAvIGh0dHA6Ly9naXRodWIuY29tL2FiZWxuYXRpb25cclxuICovVEhSRUUuQ29uZUJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKHJhZGl1cyxoZWlnaHQscmFkaWFsU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsb3BlbkVuZGVkLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpe1RIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzLDAscmFkaXVzLGhlaWdodCxyYWRpYWxTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxvcGVuRW5kZWQsdGhldGFTdGFydCx0aGV0YUxlbmd0aCk7dGhpcy50eXBlPSdDb25lQnVmZmVyR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOnJhZGl1cyxoZWlnaHQ6aGVpZ2h0LHJhZGlhbFNlZ21lbnRzOnJhZGlhbFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07fTtUSFJFRS5Db25lQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Db25lQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNvbmVCdWZmZXJHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9Db25lR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFiZWxuYXRpb24gLyBodHRwOi8vZ2l0aHViLmNvbS9hYmVsbmF0aW9uXHJcbiAqL1RIUkVFLkNvbmVHZW9tZXRyeT1mdW5jdGlvbihyYWRpdXMsaGVpZ2h0LHJhZGlhbFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLG9wZW5FbmRlZCx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKXtUSFJFRS5DeWxpbmRlckdlb21ldHJ5LmNhbGwodGhpcywwLHJhZGl1cyxoZWlnaHQscmFkaWFsU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMsb3BlbkVuZGVkLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpO3RoaXMudHlwZT0nQ29uZUdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsaGVpZ2h0OmhlaWdodCxyYWRpYWxTZWdtZW50czpyYWRpYWxTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50cyxvcGVuRW5kZWQ6b3BlbkVuZGVkLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07fTtUSFJFRS5Db25lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNvbmVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ29uZUdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0VkZ2VzR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovVEhSRUUuRWRnZXNHZW9tZXRyeT1mdW5jdGlvbihnZW9tZXRyeSx0aHJlc2hvbGRBbmdsZSl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aHJlc2hvbGRBbmdsZT10aHJlc2hvbGRBbmdsZSE9PXVuZGVmaW5lZD90aHJlc2hvbGRBbmdsZToxO3ZhciB0aHJlc2hvbGREb3Q9TWF0aC5jb3MoVEhSRUUuTWF0aC5ERUcyUkFEKnRocmVzaG9sZEFuZ2xlKTt2YXIgZWRnZT1bMCwwXSxoYXNoPXt9O2Z1bmN0aW9uIHNvcnRGdW5jdGlvbihhLGIpe3JldHVybiBhLWI7fXZhciBrZXlzPVsnYScsJ2InLCdjJ107dmFyIGdlb21ldHJ5MjtpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXtnZW9tZXRyeTI9bmV3IFRIUkVFLkdlb21ldHJ5KCk7Z2VvbWV0cnkyLmZyb21CdWZmZXJHZW9tZXRyeShnZW9tZXRyeSk7fWVsc2V7Z2VvbWV0cnkyPWdlb21ldHJ5LmNsb25lKCk7fWdlb21ldHJ5Mi5tZXJnZVZlcnRpY2VzKCk7Z2VvbWV0cnkyLmNvbXB1dGVGYWNlTm9ybWFscygpO3ZhciB2ZXJ0aWNlcz1nZW9tZXRyeTIudmVydGljZXM7dmFyIGZhY2VzPWdlb21ldHJ5Mi5mYWNlcztmb3IodmFyIGk9MCxsPWZhY2VzLmxlbmd0aDtpPGw7aSsrKXt2YXIgZmFjZT1mYWNlc1tpXTtmb3IodmFyIGo9MDtqPDM7aisrKXtlZGdlWzBdPWZhY2Vba2V5c1tqXV07ZWRnZVsxXT1mYWNlW2tleXNbKGorMSklM11dO2VkZ2Uuc29ydChzb3J0RnVuY3Rpb24pO3ZhciBrZXk9ZWRnZS50b1N0cmluZygpO2lmKGhhc2hba2V5XT09PXVuZGVmaW5lZCl7aGFzaFtrZXldPXt2ZXJ0MTplZGdlWzBdLHZlcnQyOmVkZ2VbMV0sZmFjZTE6aSxmYWNlMjp1bmRlZmluZWR9O31lbHNle2hhc2hba2V5XS5mYWNlMj1pO319fXZhciBjb29yZHM9W107Zm9yKHZhciBrZXkgaW4gaGFzaCl7dmFyIGg9aGFzaFtrZXldO2lmKGguZmFjZTI9PT11bmRlZmluZWR8fGZhY2VzW2guZmFjZTFdLm5vcm1hbC5kb3QoZmFjZXNbaC5mYWNlMl0ubm9ybWFsKTw9dGhyZXNob2xkRG90KXt2YXIgdmVydGV4PXZlcnRpY2VzW2gudmVydDFdO2Nvb3Jkcy5wdXNoKHZlcnRleC54KTtjb29yZHMucHVzaCh2ZXJ0ZXgueSk7Y29vcmRzLnB1c2godmVydGV4LnopO3ZlcnRleD12ZXJ0aWNlc1toLnZlcnQyXTtjb29yZHMucHVzaCh2ZXJ0ZXgueCk7Y29vcmRzLnB1c2godmVydGV4LnkpO2Nvb3Jkcy5wdXNoKHZlcnRleC56KTt9fXRoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGNvb3JkcyksMykpO307VEhSRUUuRWRnZXNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkVkZ2VzR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkVkZ2VzR2VvbWV0cnk7Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvRXh0cnVkZUdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xyXG4gKlxyXG4gKiBDcmVhdGVzIGV4dHJ1ZGVkIGdlb21ldHJ5IGZyb20gYSBwYXRoIHNoYXBlLlxyXG4gKlxyXG4gKiBwYXJhbWV0ZXJzID0ge1xyXG4gKlxyXG4gKiAgY3VydmVTZWdtZW50czogPGludD4sIC8vIG51bWJlciBvZiBwb2ludHMgb24gdGhlIGN1cnZlc1xyXG4gKiAgc3RlcHM6IDxpbnQ+LCAvLyBudW1iZXIgb2YgcG9pbnRzIGZvciB6LXNpZGUgZXh0cnVzaW9ucyAvIHVzZWQgZm9yIHN1YmRpdmlkaW5nIHNlZ21lbnRzIG9mIGV4dHJ1ZGUgc3BsaW5lIHRvb1xyXG4gKiAgYW1vdW50OiA8aW50PiwgLy8gRGVwdGggdG8gZXh0cnVkZSB0aGUgc2hhcGVcclxuICpcclxuICogIGJldmVsRW5hYmxlZDogPGJvb2w+LCAvLyB0dXJuIG9uIGJldmVsXHJcbiAqICBiZXZlbFRoaWNrbmVzczogPGZsb2F0PiwgLy8gaG93IGRlZXAgaW50byB0aGUgb3JpZ2luYWwgc2hhcGUgYmV2ZWwgZ29lc1xyXG4gKiAgYmV2ZWxTaXplOiA8ZmxvYXQ+LCAvLyBob3cgZmFyIGZyb20gc2hhcGUgb3V0bGluZSBpcyBiZXZlbFxyXG4gKiAgYmV2ZWxTZWdtZW50czogPGludD4sIC8vIG51bWJlciBvZiBiZXZlbCBsYXllcnNcclxuICpcclxuICogIGV4dHJ1ZGVQYXRoOiA8VEhSRUUuQ3VydmVQYXRoPiAvLyAzZCBzcGxpbmUgcGF0aCB0byBleHRydWRlIHNoYXBlIGFsb25nLiAoY3JlYXRlcyBGcmFtZXMgaWYgLmZyYW1lcyBhcmVuJ3QgZGVmaW5lZClcclxuICogIGZyYW1lczogPFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXM+IC8vIGNvbnRhaW5pbmcgYXJyYXlzIG9mIHRhbmdlbnRzLCBub3JtYWxzLCBiaW5vcm1hbHNcclxuICpcclxuICogIHV2R2VuZXJhdG9yOiA8T2JqZWN0PiAvLyBvYmplY3QgdGhhdCBwcm92aWRlcyBVViBnZW5lcmF0b3IgZnVuY3Rpb25zXHJcbiAqXHJcbiAqIH1cclxuICoqL1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeT1mdW5jdGlvbihzaGFwZXMsb3B0aW9ucyl7aWYodHlwZW9mIHNoYXBlcz09PVwidW5kZWZpbmVkXCIpe3NoYXBlcz1bXTtyZXR1cm47fVRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdFeHRydWRlR2VvbWV0cnknO3NoYXBlcz1BcnJheS5pc0FycmF5KHNoYXBlcyk/c2hhcGVzOltzaGFwZXNdO3RoaXMuYWRkU2hhcGVMaXN0KHNoYXBlcyxvcHRpb25zKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpOy8vIGNhbid0IHJlYWxseSB1c2UgYXV0b21hdGljIHZlcnRleCBub3JtYWxzXG4vLyBhcyB0aGVuIGZyb250IGFuZCBiYWNrIHNpZGVzIGdldCBzbW9vdGhlZCB0b29cbi8vIHNob3VsZCBkbyBzZXBhcmF0ZSBzbW9vdGhpbmcganVzdCBmb3Igc2lkZXNcbi8vdGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuLy9jb25zb2xlLmxvZyggXCJ0b29rXCIsICggRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSApICk7XG59O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRXh0cnVkZUdlb21ldHJ5O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKHNoYXBlcyxvcHRpb25zKXt2YXIgc2w9c2hhcGVzLmxlbmd0aDtmb3IodmFyIHM9MDtzPHNsO3MrKyl7dmFyIHNoYXBlPXNoYXBlc1tzXTt0aGlzLmFkZFNoYXBlKHNoYXBlLG9wdGlvbnMpO319O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGU9ZnVuY3Rpb24oc2hhcGUsb3B0aW9ucyl7dmFyIGFtb3VudD1vcHRpb25zLmFtb3VudCE9PXVuZGVmaW5lZD9vcHRpb25zLmFtb3VudDoxMDA7dmFyIGJldmVsVGhpY2tuZXNzPW9wdGlvbnMuYmV2ZWxUaGlja25lc3MhPT11bmRlZmluZWQ/b3B0aW9ucy5iZXZlbFRoaWNrbmVzczo2Oy8vIDEwXG52YXIgYmV2ZWxTaXplPW9wdGlvbnMuYmV2ZWxTaXplIT09dW5kZWZpbmVkP29wdGlvbnMuYmV2ZWxTaXplOmJldmVsVGhpY2tuZXNzLTI7Ly8gOFxudmFyIGJldmVsU2VnbWVudHM9b3B0aW9ucy5iZXZlbFNlZ21lbnRzIT09dW5kZWZpbmVkP29wdGlvbnMuYmV2ZWxTZWdtZW50czozO3ZhciBiZXZlbEVuYWJsZWQ9b3B0aW9ucy5iZXZlbEVuYWJsZWQhPT11bmRlZmluZWQ/b3B0aW9ucy5iZXZlbEVuYWJsZWQ6dHJ1ZTsvLyBmYWxzZVxudmFyIGN1cnZlU2VnbWVudHM9b3B0aW9ucy5jdXJ2ZVNlZ21lbnRzIT09dW5kZWZpbmVkP29wdGlvbnMuY3VydmVTZWdtZW50czoxMjt2YXIgc3RlcHM9b3B0aW9ucy5zdGVwcyE9PXVuZGVmaW5lZD9vcHRpb25zLnN0ZXBzOjE7dmFyIGV4dHJ1ZGVQYXRoPW9wdGlvbnMuZXh0cnVkZVBhdGg7dmFyIGV4dHJ1ZGVQdHMsZXh0cnVkZUJ5UGF0aD1mYWxzZTsvLyBVc2UgZGVmYXVsdCBXb3JsZFVWR2VuZXJhdG9yIGlmIG5vIFVWIGdlbmVyYXRvcnMgYXJlIHNwZWNpZmllZC5cbnZhciB1dmdlbj1vcHRpb25zLlVWR2VuZXJhdG9yIT09dW5kZWZpbmVkP29wdGlvbnMuVVZHZW5lcmF0b3I6VEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3I7dmFyIHNwbGluZVR1YmUsYmlub3JtYWwsbm9ybWFsLHBvc2l0aW9uMjtpZihleHRydWRlUGF0aCl7ZXh0cnVkZVB0cz1leHRydWRlUGF0aC5nZXRTcGFjZWRQb2ludHMoc3RlcHMpO2V4dHJ1ZGVCeVBhdGg9dHJ1ZTtiZXZlbEVuYWJsZWQ9ZmFsc2U7Ly8gYmV2ZWxzIG5vdCBzdXBwb3J0ZWQgZm9yIHBhdGggZXh0cnVzaW9uXG4vLyBTRVRVUCBUTkIgdmFyaWFibGVzXG4vLyBSZXVzZSBUTkIgZnJvbSBUdWJlR2VvbXRyeSBmb3Igbm93LlxuLy8gVE9ETzEgLSBoYXZlIGEgLmlzQ2xvc2VkIGluIHNwbGluZT9cbnNwbGluZVR1YmU9b3B0aW9ucy5mcmFtZXMhPT11bmRlZmluZWQ/b3B0aW9ucy5mcmFtZXM6bmV3IFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXMoZXh0cnVkZVBhdGgsc3RlcHMsZmFsc2UpOy8vIGNvbnNvbGUubG9nKHNwbGluZVR1YmUsICdzcGxpbmVUdWJlJywgc3BsaW5lVHViZS5ub3JtYWxzLmxlbmd0aCwgJ3N0ZXBzJywgc3RlcHMsICdleHRydWRlUHRzJywgZXh0cnVkZVB0cy5sZW5ndGgpO1xuYmlub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoKTtub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoKTtwb3NpdGlvbjI9bmV3IFRIUkVFLlZlY3RvcjMoKTt9Ly8gU2FmZWd1YXJkcyBpZiBiZXZlbHMgYXJlIG5vdCBlbmFibGVkXG5pZighYmV2ZWxFbmFibGVkKXtiZXZlbFNlZ21lbnRzPTA7YmV2ZWxUaGlja25lc3M9MDtiZXZlbFNpemU9MDt9Ly8gVmFyaWFibGVzIGluaXRpYWxpemF0aW9uXG52YXIgYWhvbGUsaCxobDsvLyBsb29waW5nIG9mIGhvbGVzXG52YXIgc2NvcGU9dGhpczt2YXIgc2hhcGVzT2Zmc2V0PXRoaXMudmVydGljZXMubGVuZ3RoO3ZhciBzaGFwZVBvaW50cz1zaGFwZS5leHRyYWN0UG9pbnRzKGN1cnZlU2VnbWVudHMpO3ZhciB2ZXJ0aWNlcz1zaGFwZVBvaW50cy5zaGFwZTt2YXIgaG9sZXM9c2hhcGVQb2ludHMuaG9sZXM7dmFyIHJldmVyc2U9IVRIUkVFLlNoYXBlVXRpbHMuaXNDbG9ja1dpc2UodmVydGljZXMpO2lmKHJldmVyc2Upe3ZlcnRpY2VzPXZlcnRpY2VzLnJldmVyc2UoKTsvLyBNYXliZSB3ZSBzaG91bGQgYWxzbyBjaGVjayBpZiBob2xlcyBhcmUgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiwganVzdCB0byBiZSBzYWZlIC4uLlxuZm9yKGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe2Fob2xlPWhvbGVzW2hdO2lmKFRIUkVFLlNoYXBlVXRpbHMuaXNDbG9ja1dpc2UoYWhvbGUpKXtob2xlc1toXT1haG9sZS5yZXZlcnNlKCk7fX1yZXZlcnNlPWZhbHNlOy8vIElmIHZlcnRpY2VzIGFyZSBpbiBvcmRlciBub3csIHdlIHNob3VsZG4ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZW0gYWdhaW4gKGhvcGVmdWxseSkhXG59dmFyIGZhY2VzPVRIUkVFLlNoYXBlVXRpbHMudHJpYW5ndWxhdGVTaGFwZSh2ZXJ0aWNlcyxob2xlcyk7LyogVmVydGljZXMgKi92YXIgY29udG91cj12ZXJ0aWNlczsvLyB2ZXJ0aWNlcyBoYXMgYWxsIHBvaW50cyBidXQgY29udG91ciBoYXMgb25seSBwb2ludHMgb2YgY2lyY3VtZmVyZW5jZVxuZm9yKGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe2Fob2xlPWhvbGVzW2hdO3ZlcnRpY2VzPXZlcnRpY2VzLmNvbmNhdChhaG9sZSk7fWZ1bmN0aW9uIHNjYWxlUHQyKHB0LHZlYyxzaXplKXtpZighdmVjKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlR2VvbWV0cnk6IHZlYyBkb2VzIG5vdCBleGlzdFwiKTtyZXR1cm4gdmVjLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSkuYWRkKHB0KTt9dmFyIGIsYnMsdCx6LHZlcnQsdmxlbj12ZXJ0aWNlcy5sZW5ndGgsZmFjZSxmbGVuPWZhY2VzLmxlbmd0aDsvLyBGaW5kIGRpcmVjdGlvbnMgZm9yIHBvaW50IG1vdmVtZW50XG5mdW5jdGlvbiBnZXRCZXZlbFZlYyhpblB0LGluUHJldixpbk5leHQpey8vIGNvbXB1dGVzIGZvciBpblB0IHRoZSBjb3JyZXNwb25kaW5nIHBvaW50IGluUHQnIG9uIGEgbmV3IGNvbnRvdXJcbi8vICAgc2hpZnRlZCBieSAxIHVuaXQgKGxlbmd0aCBvZiBub3JtYWxpemVkIHZlY3RvcikgdG8gdGhlIGxlZnRcbi8vIGlmIHdlIHdhbGsgYWxvbmcgY29udG91ciBjbG9ja3dpc2UsIHRoaXMgbmV3IGNvbnRvdXIgaXMgb3V0c2lkZSB0aGUgb2xkIG9uZVxuLy9cbi8vIGluUHQnIGlzIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIHR3byBsaW5lcyBwYXJhbGxlbCB0byB0aGUgdHdvXG4vLyAgYWRqYWNlbnQgZWRnZXMgb2YgaW5QdCBhdCBhIGRpc3RhbmNlIG9mIDEgdW5pdCBvbiB0aGUgbGVmdCBzaWRlLlxudmFyIHZfdHJhbnNfeCx2X3RyYW5zX3ksc2hyaW5rX2J5PTE7Ly8gcmVzdWx0aW5nIHRyYW5zbGF0aW9uIHZlY3RvciBmb3IgaW5QdFxuLy8gZ29vZCByZWFkaW5nIGZvciBnZW9tZXRyeSBhbGdvcml0aG1zIChoZXJlOiBsaW5lLWxpbmUgaW50ZXJzZWN0aW9uKVxuLy8gaHR0cDovL2dlb21hbGdvcml0aG1zLmNvbS9hMDUtX2ludGVyc2VjdC0xLmh0bWxcbnZhciB2X3ByZXZfeD1pblB0LngtaW5QcmV2Lngsdl9wcmV2X3k9aW5QdC55LWluUHJldi55O3ZhciB2X25leHRfeD1pbk5leHQueC1pblB0Lngsdl9uZXh0X3k9aW5OZXh0LnktaW5QdC55O3ZhciB2X3ByZXZfbGVuc3E9dl9wcmV2X3gqdl9wcmV2X3grdl9wcmV2X3kqdl9wcmV2X3k7Ly8gY2hlY2sgZm9yIGNvbGxpbmVhciBlZGdlc1xudmFyIGNvbGxpbmVhcjA9dl9wcmV2X3gqdl9uZXh0X3ktdl9wcmV2X3kqdl9uZXh0X3g7aWYoTWF0aC5hYnMoY29sbGluZWFyMCk+TnVtYmVyLkVQU0lMT04pey8vIG5vdCBjb2xsaW5lYXJcbi8vIGxlbmd0aCBvZiB2ZWN0b3JzIGZvciBub3JtYWxpemluZ1xudmFyIHZfcHJldl9sZW49TWF0aC5zcXJ0KHZfcHJldl9sZW5zcSk7dmFyIHZfbmV4dF9sZW49TWF0aC5zcXJ0KHZfbmV4dF94KnZfbmV4dF94K3ZfbmV4dF95KnZfbmV4dF95KTsvLyBzaGlmdCBhZGphY2VudCBwb2ludHMgYnkgdW5pdCB2ZWN0b3JzIHRvIHRoZSBsZWZ0XG52YXIgcHRQcmV2U2hpZnRfeD1pblByZXYueC12X3ByZXZfeS92X3ByZXZfbGVuO3ZhciBwdFByZXZTaGlmdF95PWluUHJldi55K3ZfcHJldl94L3ZfcHJldl9sZW47dmFyIHB0TmV4dFNoaWZ0X3g9aW5OZXh0Lngtdl9uZXh0X3kvdl9uZXh0X2xlbjt2YXIgcHROZXh0U2hpZnRfeT1pbk5leHQueSt2X25leHRfeC92X25leHRfbGVuOy8vIHNjYWxpbmcgZmFjdG9yIGZvciB2X3ByZXYgdG8gaW50ZXJzZWN0aW9uIHBvaW50XG52YXIgc2Y9KChwdE5leHRTaGlmdF94LXB0UHJldlNoaWZ0X3gpKnZfbmV4dF95LShwdE5leHRTaGlmdF95LXB0UHJldlNoaWZ0X3kpKnZfbmV4dF94KS8odl9wcmV2X3gqdl9uZXh0X3ktdl9wcmV2X3kqdl9uZXh0X3gpOy8vIHZlY3RvciBmcm9tIGluUHQgdG8gaW50ZXJzZWN0aW9uIHBvaW50XG52X3RyYW5zX3g9cHRQcmV2U2hpZnRfeCt2X3ByZXZfeCpzZi1pblB0Lng7dl90cmFuc195PXB0UHJldlNoaWZ0X3krdl9wcmV2X3kqc2YtaW5QdC55Oy8vIERvbid0IG5vcm1hbGl6ZSEsIG90aGVyd2lzZSBzaGFycCBjb3JuZXJzIGJlY29tZSB1Z2x5XG4vLyAgYnV0IHByZXZlbnQgY3Jhenkgc3Bpa2VzXG52YXIgdl90cmFuc19sZW5zcT12X3RyYW5zX3gqdl90cmFuc194K3ZfdHJhbnNfeSp2X3RyYW5zX3k7aWYodl90cmFuc19sZW5zcTw9Mil7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKHZfdHJhbnNfeCx2X3RyYW5zX3kpO31lbHNle3Nocmlua19ieT1NYXRoLnNxcnQodl90cmFuc19sZW5zcS8yKTt9fWVsc2V7Ly8gaGFuZGxlIHNwZWNpYWwgY2FzZSBvZiBjb2xsaW5lYXIgZWRnZXNcbnZhciBkaXJlY3Rpb25fZXE9ZmFsc2U7Ly8gYXNzdW1lczogb3Bwb3NpdGVcbmlmKHZfcHJldl94Pk51bWJlci5FUFNJTE9OKXtpZih2X25leHRfeD5OdW1iZXIuRVBTSUxPTil7ZGlyZWN0aW9uX2VxPXRydWU7fX1lbHNle2lmKHZfcHJldl94PC1OdW1iZXIuRVBTSUxPTil7aWYodl9uZXh0X3g8LU51bWJlci5FUFNJTE9OKXtkaXJlY3Rpb25fZXE9dHJ1ZTt9fWVsc2V7aWYoTWF0aC5zaWduKHZfcHJldl95KT09PU1hdGguc2lnbih2X25leHRfeSkpe2RpcmVjdGlvbl9lcT10cnVlO319fWlmKGRpcmVjdGlvbl9lcSl7Ly8gY29uc29sZS5sb2coXCJXYXJuaW5nOiBsaW5lcyBhcmUgYSBzdHJhaWdodCBzZXF1ZW5jZVwiKTtcbnZfdHJhbnNfeD0tdl9wcmV2X3k7dl90cmFuc195PXZfcHJldl94O3Nocmlua19ieT1NYXRoLnNxcnQodl9wcmV2X2xlbnNxKTt9ZWxzZXsvLyBjb25zb2xlLmxvZyhcIldhcm5pbmc6IGxpbmVzIGFyZSBhIHN0cmFpZ2h0IHNwaWtlXCIpO1xudl90cmFuc194PXZfcHJldl94O3ZfdHJhbnNfeT12X3ByZXZfeTtzaHJpbmtfYnk9TWF0aC5zcXJ0KHZfcHJldl9sZW5zcS8yKTt9fXJldHVybiBuZXcgVEhSRUUuVmVjdG9yMih2X3RyYW5zX3gvc2hyaW5rX2J5LHZfdHJhbnNfeS9zaHJpbmtfYnkpO312YXIgY29udG91ck1vdmVtZW50cz1bXTtmb3IodmFyIGk9MCxpbD1jb250b3VyLmxlbmd0aCxqPWlsLTEsaz1pKzE7aTxpbDtpKyssaisrLGsrKyl7aWYoaj09PWlsKWo9MDtpZihrPT09aWwpaz0wOy8vICAoaiktLS0oaSktLS0oaylcbi8vIGNvbnNvbGUubG9nKCdpLGosaycsIGksIGogLCBrKVxuY29udG91ck1vdmVtZW50c1tpXT1nZXRCZXZlbFZlYyhjb250b3VyW2ldLGNvbnRvdXJbal0sY29udG91cltrXSk7fXZhciBob2xlc01vdmVtZW50cz1bXSxvbmVIb2xlTW92ZW1lbnRzLHZlcnRpY2VzTW92ZW1lbnRzPWNvbnRvdXJNb3ZlbWVudHMuY29uY2F0KCk7Zm9yKGg9MCxobD1ob2xlcy5sZW5ndGg7aDxobDtoKyspe2Fob2xlPWhvbGVzW2hdO29uZUhvbGVNb3ZlbWVudHM9W107Zm9yKGk9MCxpbD1haG9sZS5sZW5ndGgsaj1pbC0xLGs9aSsxO2k8aWw7aSsrLGorKyxrKyspe2lmKGo9PT1pbClqPTA7aWYoaz09PWlsKWs9MDsvLyAgKGopLS0tKGkpLS0tKGspXG5vbmVIb2xlTW92ZW1lbnRzW2ldPWdldEJldmVsVmVjKGFob2xlW2ldLGFob2xlW2pdLGFob2xlW2tdKTt9aG9sZXNNb3ZlbWVudHMucHVzaChvbmVIb2xlTW92ZW1lbnRzKTt2ZXJ0aWNlc01vdmVtZW50cz12ZXJ0aWNlc01vdmVtZW50cy5jb25jYXQob25lSG9sZU1vdmVtZW50cyk7fS8vIExvb3AgYmV2ZWxTZWdtZW50cywgMSBmb3IgdGhlIGZyb250LCAxIGZvciB0aGUgYmFja1xuZm9yKGI9MDtiPGJldmVsU2VnbWVudHM7YisrKXsvL2ZvciAoIGIgPSBiZXZlbFNlZ21lbnRzOyBiID4gMDsgYiAtLSApIHtcbnQ9Yi9iZXZlbFNlZ21lbnRzO3o9YmV2ZWxUaGlja25lc3MqKDEtdCk7Ly96ID0gYmV2ZWxUaGlja25lc3MgKiB0O1xuYnM9YmV2ZWxTaXplKk1hdGguc2luKHQqTWF0aC5QSS8yKTsvLyBjdXJ2ZWRcbi8vYnMgPSBiZXZlbFNpemUgKiB0OyAvLyBsaW5lYXJcbi8vIGNvbnRyYWN0IHNoYXBlXG5mb3IoaT0wLGlsPWNvbnRvdXIubGVuZ3RoO2k8aWw7aSsrKXt2ZXJ0PXNjYWxlUHQyKGNvbnRvdXJbaV0sY29udG91ck1vdmVtZW50c1tpXSxicyk7dih2ZXJ0LngsdmVydC55LC16KTt9Ly8gZXhwYW5kIGhvbGVzXG5mb3IoaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7YWhvbGU9aG9sZXNbaF07b25lSG9sZU1vdmVtZW50cz1ob2xlc01vdmVtZW50c1toXTtmb3IoaT0wLGlsPWFob2xlLmxlbmd0aDtpPGlsO2krKyl7dmVydD1zY2FsZVB0MihhaG9sZVtpXSxvbmVIb2xlTW92ZW1lbnRzW2ldLGJzKTt2KHZlcnQueCx2ZXJ0LnksLXopO319fWJzPWJldmVsU2l6ZTsvLyBCYWNrIGZhY2luZyB2ZXJ0aWNlc1xuZm9yKGk9MDtpPHZsZW47aSsrKXt2ZXJ0PWJldmVsRW5hYmxlZD9zY2FsZVB0Mih2ZXJ0aWNlc1tpXSx2ZXJ0aWNlc01vdmVtZW50c1tpXSxicyk6dmVydGljZXNbaV07aWYoIWV4dHJ1ZGVCeVBhdGgpe3YodmVydC54LHZlcnQueSwwKTt9ZWxzZXsvLyB2KCB2ZXJ0LngsIHZlcnQueSArIGV4dHJ1ZGVQdHNbIDAgXS55LCBleHRydWRlUHRzWyAwIF0ueCApO1xubm9ybWFsLmNvcHkoc3BsaW5lVHViZS5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcih2ZXJ0LngpO2Jpbm9ybWFsLmNvcHkoc3BsaW5lVHViZS5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKHZlcnQueSk7cG9zaXRpb24yLmNvcHkoZXh0cnVkZVB0c1swXSkuYWRkKG5vcm1hbCkuYWRkKGJpbm9ybWFsKTt2KHBvc2l0aW9uMi54LHBvc2l0aW9uMi55LHBvc2l0aW9uMi56KTt9fS8vIEFkZCBzdGVwcGVkIHZlcnRpY2VzLi4uXG4vLyBJbmNsdWRpbmcgZnJvbnQgZmFjaW5nIHZlcnRpY2VzXG52YXIgcztmb3Iocz0xO3M8PXN0ZXBzO3MrKyl7Zm9yKGk9MDtpPHZsZW47aSsrKXt2ZXJ0PWJldmVsRW5hYmxlZD9zY2FsZVB0Mih2ZXJ0aWNlc1tpXSx2ZXJ0aWNlc01vdmVtZW50c1tpXSxicyk6dmVydGljZXNbaV07aWYoIWV4dHJ1ZGVCeVBhdGgpe3YodmVydC54LHZlcnQueSxhbW91bnQvc3RlcHMqcyk7fWVsc2V7Ly8gdiggdmVydC54LCB2ZXJ0LnkgKyBleHRydWRlUHRzWyBzIC0gMSBdLnksIGV4dHJ1ZGVQdHNbIHMgLSAxIF0ueCApO1xubm9ybWFsLmNvcHkoc3BsaW5lVHViZS5ub3JtYWxzW3NdKS5tdWx0aXBseVNjYWxhcih2ZXJ0LngpO2Jpbm9ybWFsLmNvcHkoc3BsaW5lVHViZS5iaW5vcm1hbHNbc10pLm11bHRpcGx5U2NhbGFyKHZlcnQueSk7cG9zaXRpb24yLmNvcHkoZXh0cnVkZVB0c1tzXSkuYWRkKG5vcm1hbCkuYWRkKGJpbm9ybWFsKTt2KHBvc2l0aW9uMi54LHBvc2l0aW9uMi55LHBvc2l0aW9uMi56KTt9fX0vLyBBZGQgYmV2ZWwgc2VnbWVudHMgcGxhbmVzXG4vL2ZvciAoIGIgPSAxOyBiIDw9IGJldmVsU2VnbWVudHM7IGIgKysgKSB7XG5mb3IoYj1iZXZlbFNlZ21lbnRzLTE7Yj49MDtiLS0pe3Q9Yi9iZXZlbFNlZ21lbnRzO3o9YmV2ZWxUaGlja25lc3MqKDEtdCk7Ly9icyA9IGJldmVsU2l6ZSAqICggMS1NYXRoLnNpbiAoICggMSAtIHQgKSAqIE1hdGguUEkvMiApICk7XG5icz1iZXZlbFNpemUqTWF0aC5zaW4odCpNYXRoLlBJLzIpOy8vIGNvbnRyYWN0IHNoYXBlXG5mb3IoaT0wLGlsPWNvbnRvdXIubGVuZ3RoO2k8aWw7aSsrKXt2ZXJ0PXNjYWxlUHQyKGNvbnRvdXJbaV0sY29udG91ck1vdmVtZW50c1tpXSxicyk7dih2ZXJ0LngsdmVydC55LGFtb3VudCt6KTt9Ly8gZXhwYW5kIGhvbGVzXG5mb3IoaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7YWhvbGU9aG9sZXNbaF07b25lSG9sZU1vdmVtZW50cz1ob2xlc01vdmVtZW50c1toXTtmb3IoaT0wLGlsPWFob2xlLmxlbmd0aDtpPGlsO2krKyl7dmVydD1zY2FsZVB0MihhaG9sZVtpXSxvbmVIb2xlTW92ZW1lbnRzW2ldLGJzKTtpZighZXh0cnVkZUJ5UGF0aCl7dih2ZXJ0LngsdmVydC55LGFtb3VudCt6KTt9ZWxzZXt2KHZlcnQueCx2ZXJ0LnkrZXh0cnVkZVB0c1tzdGVwcy0xXS55LGV4dHJ1ZGVQdHNbc3RlcHMtMV0ueCt6KTt9fX19LyogRmFjZXMgKi8vLyBUb3AgYW5kIGJvdHRvbSBmYWNlc1xuYnVpbGRMaWRGYWNlcygpOy8vIFNpZGVzIGZhY2VzXG5idWlsZFNpZGVGYWNlcygpOy8vLy8vICBJbnRlcm5hbCBmdW5jdGlvbnNcbmZ1bmN0aW9uIGJ1aWxkTGlkRmFjZXMoKXtpZihiZXZlbEVuYWJsZWQpe3ZhciBsYXllcj0wOy8vIHN0ZXBzICsgMVxudmFyIG9mZnNldD12bGVuKmxheWVyOy8vIEJvdHRvbSBmYWNlc1xuZm9yKGk9MDtpPGZsZW47aSsrKXtmYWNlPWZhY2VzW2ldO2YzKGZhY2VbMl0rb2Zmc2V0LGZhY2VbMV0rb2Zmc2V0LGZhY2VbMF0rb2Zmc2V0KTt9bGF5ZXI9c3RlcHMrYmV2ZWxTZWdtZW50cyoyO29mZnNldD12bGVuKmxheWVyOy8vIFRvcCBmYWNlc1xuZm9yKGk9MDtpPGZsZW47aSsrKXtmYWNlPWZhY2VzW2ldO2YzKGZhY2VbMF0rb2Zmc2V0LGZhY2VbMV0rb2Zmc2V0LGZhY2VbMl0rb2Zmc2V0KTt9fWVsc2V7Ly8gQm90dG9tIGZhY2VzXG5mb3IoaT0wO2k8ZmxlbjtpKyspe2ZhY2U9ZmFjZXNbaV07ZjMoZmFjZVsyXSxmYWNlWzFdLGZhY2VbMF0pO30vLyBUb3AgZmFjZXNcbmZvcihpPTA7aTxmbGVuO2krKyl7ZmFjZT1mYWNlc1tpXTtmMyhmYWNlWzBdK3ZsZW4qc3RlcHMsZmFjZVsxXSt2bGVuKnN0ZXBzLGZhY2VbMl0rdmxlbipzdGVwcyk7fX19Ly8gQ3JlYXRlIGZhY2VzIGZvciB0aGUgei1zaWRlcyBvZiB0aGUgc2hhcGVcbmZ1bmN0aW9uIGJ1aWxkU2lkZUZhY2VzKCl7dmFyIGxheWVyb2Zmc2V0PTA7c2lkZXdhbGxzKGNvbnRvdXIsbGF5ZXJvZmZzZXQpO2xheWVyb2Zmc2V0Kz1jb250b3VyLmxlbmd0aDtmb3IoaD0wLGhsPWhvbGVzLmxlbmd0aDtoPGhsO2grKyl7YWhvbGU9aG9sZXNbaF07c2lkZXdhbGxzKGFob2xlLGxheWVyb2Zmc2V0KTsvLywgdHJ1ZVxubGF5ZXJvZmZzZXQrPWFob2xlLmxlbmd0aDt9fWZ1bmN0aW9uIHNpZGV3YWxscyhjb250b3VyLGxheWVyb2Zmc2V0KXt2YXIgaixrO2k9Y29udG91ci5sZW5ndGg7d2hpbGUoLS1pPj0wKXtqPWk7az1pLTE7aWYoazwwKWs9Y29udG91ci5sZW5ndGgtMTsvL2NvbnNvbGUubG9nKCdiJywgaSxqLCBpLTEsIGssdmVydGljZXMubGVuZ3RoKTtcbnZhciBzPTAsc2w9c3RlcHMrYmV2ZWxTZWdtZW50cyoyO2ZvcihzPTA7czxzbDtzKyspe3ZhciBzbGVuMT12bGVuKnM7dmFyIHNsZW4yPXZsZW4qKHMrMSk7dmFyIGE9bGF5ZXJvZmZzZXQraitzbGVuMSxiPWxheWVyb2Zmc2V0K2src2xlbjEsYz1sYXllcm9mZnNldCtrK3NsZW4yLGQ9bGF5ZXJvZmZzZXQraitzbGVuMjtmNChhLGIsYyxkLGNvbnRvdXIscyxzbCxqLGspO319fWZ1bmN0aW9uIHYoeCx5LHope3Njb3BlLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoeCx5LHopKTt9ZnVuY3Rpb24gZjMoYSxiLGMpe2ErPXNoYXBlc09mZnNldDtiKz1zaGFwZXNPZmZzZXQ7Yys9c2hhcGVzT2Zmc2V0O3Njb3BlLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsYixjLG51bGwsbnVsbCwwKSk7dmFyIHV2cz11dmdlbi5nZW5lcmF0ZVRvcFVWKHNjb3BlLGEsYixjKTtzY29wZS5mYWNlVmVydGV4VXZzWzBdLnB1c2godXZzKTt9ZnVuY3Rpb24gZjQoYSxiLGMsZCx3YWxsQ29udG91cixzdGVwSW5kZXgsc3RlcHNMZW5ndGgsY29udG91ckluZGV4MSxjb250b3VySW5kZXgyKXthKz1zaGFwZXNPZmZzZXQ7Yis9c2hhcGVzT2Zmc2V0O2MrPXNoYXBlc09mZnNldDtkKz1zaGFwZXNPZmZzZXQ7c2NvcGUuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYSxiLGQsbnVsbCxudWxsLDEpKTtzY29wZS5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhiLGMsZCxudWxsLG51bGwsMSkpO3ZhciB1dnM9dXZnZW4uZ2VuZXJhdGVTaWRlV2FsbFVWKHNjb3BlLGEsYixjLGQpO3Njb3BlLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdXZzWzBdLHV2c1sxXSx1dnNbM11dKTtzY29wZS5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3V2c1sxXSx1dnNbMl0sdXZzWzNdXSk7fX07VEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3I9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oZ2VvbWV0cnksaW5kZXhBLGluZGV4QixpbmRleEMpe3ZhciB2ZXJ0aWNlcz1nZW9tZXRyeS52ZXJ0aWNlczt2YXIgYT12ZXJ0aWNlc1tpbmRleEFdO3ZhciBiPXZlcnRpY2VzW2luZGV4Ql07dmFyIGM9dmVydGljZXNbaW5kZXhDXTtyZXR1cm5bbmV3IFRIUkVFLlZlY3RvcjIoYS54LGEueSksbmV3IFRIUkVFLlZlY3RvcjIoYi54LGIueSksbmV3IFRIUkVFLlZlY3RvcjIoYy54LGMueSldO30sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKGdlb21ldHJ5LGluZGV4QSxpbmRleEIsaW5kZXhDLGluZGV4RCl7dmFyIHZlcnRpY2VzPWdlb21ldHJ5LnZlcnRpY2VzO3ZhciBhPXZlcnRpY2VzW2luZGV4QV07dmFyIGI9dmVydGljZXNbaW5kZXhCXTt2YXIgYz12ZXJ0aWNlc1tpbmRleENdO3ZhciBkPXZlcnRpY2VzW2luZGV4RF07aWYoTWF0aC5hYnMoYS55LWIueSk8MC4wMSl7cmV0dXJuW25ldyBUSFJFRS5WZWN0b3IyKGEueCwxLWEueiksbmV3IFRIUkVFLlZlY3RvcjIoYi54LDEtYi56KSxuZXcgVEhSRUUuVmVjdG9yMihjLngsMS1jLnopLG5ldyBUSFJFRS5WZWN0b3IyKGQueCwxLWQueildO31lbHNle3JldHVybltuZXcgVEhSRUUuVmVjdG9yMihhLnksMS1hLnopLG5ldyBUSFJFRS5WZWN0b3IyKGIueSwxLWIueiksbmV3IFRIUkVFLlZlY3RvcjIoYy55LDEtYy56KSxuZXcgVEhSRUUuVmVjdG9yMihkLnksMS1kLnopXTt9fX07Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvU2hhcGVHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3Igam9ub2JyMSAvIGh0dHA6Ly9qb25vYnIxLmNvbVxyXG4gKlxyXG4gKiBDcmVhdGVzIGEgb25lLXNpZGVkIHBvbHlnb25hbCBnZW9tZXRyeSBmcm9tIGEgcGF0aCBzaGFwZS4gU2ltaWxhciB0b1xyXG4gKiBFeHRydWRlR2VvbWV0cnkuXHJcbiAqXHJcbiAqIHBhcmFtZXRlcnMgPSB7XHJcbiAqXHJcbiAqXHRjdXJ2ZVNlZ21lbnRzOiA8aW50PiwgLy8gbnVtYmVyIG9mIHBvaW50cyBvbiB0aGUgY3VydmVzLiBOT1QgVVNFRCBBVCBUSEUgTU9NRU5ULlxyXG4gKlxyXG4gKlx0bWF0ZXJpYWw6IDxpbnQ+IC8vIG1hdGVyaWFsIGluZGV4IGZvciBmcm9udCBhbmQgYmFjayBmYWNlc1xyXG4gKlx0dXZHZW5lcmF0b3I6IDxPYmplY3Q+IC8vIG9iamVjdCB0aGF0IHByb3ZpZGVzIFVWIGdlbmVyYXRvciBmdW5jdGlvbnNcclxuICpcclxuICogfVxyXG4gKiovVEhSRUUuU2hhcGVHZW9tZXRyeT1mdW5jdGlvbihzaGFwZXMsb3B0aW9ucyl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1NoYXBlR2VvbWV0cnknO2lmKEFycmF5LmlzQXJyYXkoc2hhcGVzKT09PWZhbHNlKXNoYXBlcz1bc2hhcGVzXTt0aGlzLmFkZFNoYXBlTGlzdChzaGFwZXMsb3B0aW9ucyk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt9O1RIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TaGFwZUdlb21ldHJ5Oy8qKlxyXG4gKiBBZGQgYW4gYXJyYXkgb2Ygc2hhcGVzIHRvIFRIUkVFLlNoYXBlR2VvbWV0cnkuXHJcbiAqL1RIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlTGlzdD1mdW5jdGlvbihzaGFwZXMsb3B0aW9ucyl7Zm9yKHZhciBpPTAsbD1zaGFwZXMubGVuZ3RoO2k8bDtpKyspe3RoaXMuYWRkU2hhcGUoc2hhcGVzW2ldLG9wdGlvbnMpO31yZXR1cm4gdGhpczt9Oy8qKlxyXG4gKiBBZGRzIGEgc2hhcGUgdG8gVEhSRUUuU2hhcGVHZW9tZXRyeSwgYmFzZWQgb24gVEhSRUUuRXh0cnVkZUdlb21ldHJ5LlxyXG4gKi9USFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihzaGFwZSxvcHRpb25zKXtpZihvcHRpb25zPT09dW5kZWZpbmVkKW9wdGlvbnM9e307dmFyIGN1cnZlU2VnbWVudHM9b3B0aW9ucy5jdXJ2ZVNlZ21lbnRzIT09dW5kZWZpbmVkP29wdGlvbnMuY3VydmVTZWdtZW50czoxMjt2YXIgbWF0ZXJpYWw9b3B0aW9ucy5tYXRlcmlhbDt2YXIgdXZnZW49b3B0aW9ucy5VVkdlbmVyYXRvcj09PXVuZGVmaW5lZD9USFJFRS5FeHRydWRlR2VvbWV0cnkuV29ybGRVVkdlbmVyYXRvcjpvcHRpb25zLlVWR2VuZXJhdG9yOy8vXG52YXIgaSxsLGhvbGU7dmFyIHNoYXBlc09mZnNldD10aGlzLnZlcnRpY2VzLmxlbmd0aDt2YXIgc2hhcGVQb2ludHM9c2hhcGUuZXh0cmFjdFBvaW50cyhjdXJ2ZVNlZ21lbnRzKTt2YXIgdmVydGljZXM9c2hhcGVQb2ludHMuc2hhcGU7dmFyIGhvbGVzPXNoYXBlUG9pbnRzLmhvbGVzO3ZhciByZXZlcnNlPSFUSFJFRS5TaGFwZVV0aWxzLmlzQ2xvY2tXaXNlKHZlcnRpY2VzKTtpZihyZXZlcnNlKXt2ZXJ0aWNlcz12ZXJ0aWNlcy5yZXZlcnNlKCk7Ly8gTWF5YmUgd2Ugc2hvdWxkIGFsc28gY2hlY2sgaWYgaG9sZXMgYXJlIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24sIGp1c3QgdG8gYmUgc2FmZS4uLlxuZm9yKGk9MCxsPWhvbGVzLmxlbmd0aDtpPGw7aSsrKXtob2xlPWhvbGVzW2ldO2lmKFRIUkVFLlNoYXBlVXRpbHMuaXNDbG9ja1dpc2UoaG9sZSkpe2hvbGVzW2ldPWhvbGUucmV2ZXJzZSgpO319cmV2ZXJzZT1mYWxzZTt9dmFyIGZhY2VzPVRIUkVFLlNoYXBlVXRpbHMudHJpYW5ndWxhdGVTaGFwZSh2ZXJ0aWNlcyxob2xlcyk7Ly8gVmVydGljZXNcbmZvcihpPTAsbD1ob2xlcy5sZW5ndGg7aTxsO2krKyl7aG9sZT1ob2xlc1tpXTt2ZXJ0aWNlcz12ZXJ0aWNlcy5jb25jYXQoaG9sZSk7fS8vXG52YXIgdmVydCx2bGVuPXZlcnRpY2VzLmxlbmd0aDt2YXIgZmFjZSxmbGVuPWZhY2VzLmxlbmd0aDtmb3IoaT0wO2k8dmxlbjtpKyspe3ZlcnQ9dmVydGljZXNbaV07dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKHZlcnQueCx2ZXJ0LnksMCkpO31mb3IoaT0wO2k8ZmxlbjtpKyspe2ZhY2U9ZmFjZXNbaV07dmFyIGE9ZmFjZVswXStzaGFwZXNPZmZzZXQ7dmFyIGI9ZmFjZVsxXStzaGFwZXNPZmZzZXQ7dmFyIGM9ZmFjZVsyXStzaGFwZXNPZmZzZXQ7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhhLGIsYyxudWxsLG51bGwsbWF0ZXJpYWwpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaCh1dmdlbi5nZW5lcmF0ZVRvcFVWKHRoaXMsYSxiLGMpKTt9fTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9MYXRoZUJ1ZmZlckdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBNdWdlbjg3IC8gaHR0cHM6Ly9naXRodWIuY29tL011Z2VuODdcclxuICovLy8gcG9pbnRzIC0gdG8gY3JlYXRlIGEgY2xvc2VkIHRvcnVzLCBvbmUgbXVzdCB1c2UgYSBzZXQgb2YgcG9pbnRzXG4vLyAgICBsaWtlIHNvOiBbIGEsIGIsIGMsIGQsIGEgXSwgc2VlIGZpcnN0IGlzIHRoZSBzYW1lIGFzIGxhc3QuXG4vLyBzZWdtZW50cyAtIHRoZSBudW1iZXIgb2YgY2lyY3VtZmVyZW5jZSBzZWdtZW50cyB0byBjcmVhdGVcbi8vIHBoaVN0YXJ0IC0gdGhlIHN0YXJ0aW5nIHJhZGlhblxuLy8gcGhpTGVuZ3RoIC0gdGhlIHJhZGlhbiAoMCB0byAyUEkpIHJhbmdlIG9mIHRoZSBsYXRoZWQgc2VjdGlvblxuLy8gICAgMlBJIGlzIGEgY2xvc2VkIGxhdGhlLCBsZXNzIHRoYW4gMlBJIGlzIGEgcG9ydGlvbi5cblRIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24ocG9pbnRzLHNlZ21lbnRzLHBoaVN0YXJ0LHBoaUxlbmd0aCl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0xhdGhlQnVmZmVyR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOnBvaW50cyxzZWdtZW50czpzZWdtZW50cyxwaGlTdGFydDpwaGlTdGFydCxwaGlMZW5ndGg6cGhpTGVuZ3RofTtzZWdtZW50cz1NYXRoLmZsb29yKHNlZ21lbnRzKXx8MTI7cGhpU3RhcnQ9cGhpU3RhcnR8fDA7cGhpTGVuZ3RoPXBoaUxlbmd0aHx8TWF0aC5QSSoyOy8vIGNsYW1wIHBoaUxlbmd0aCBzbyBpdCdzIGluIHJhbmdlIG9mIFsgMCwgMlBJIF1cbnBoaUxlbmd0aD1USFJFRS5NYXRoLmNsYW1wKHBoaUxlbmd0aCwwLE1hdGguUEkqMik7Ly8gdGhlc2UgYXJlIHVzZWQgdG8gY2FsY3VsYXRlIGJ1ZmZlciBsZW5ndGhcbnZhciB2ZXJ0ZXhDb3VudD0oc2VnbWVudHMrMSkqcG9pbnRzLmxlbmd0aDt2YXIgaW5kZXhDb3VudD1zZWdtZW50cypwb2ludHMubGVuZ3RoKjIqMzsvLyBidWZmZXJzXG52YXIgaW5kaWNlcz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyhpbmRleENvdW50PjY1NTM1P1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShpbmRleENvdW50KSwxKTt2YXIgdmVydGljZXM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpLDMpO3ZhciB1dnM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjIpLDIpOy8vIGhlbHBlciB2YXJpYWJsZXNcbnZhciBpbmRleD0wLGluZGV4T2Zmc2V0PTAsYmFzZTt2YXIgaW52ZXJzZVBvaW50TGVuZ3RoPTEuMC8ocG9pbnRzLmxlbmd0aC0xKTt2YXIgaW52ZXJzZVNlZ21lbnRzPTEuMC9zZWdtZW50czt2YXIgdmVydGV4PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHV2PW5ldyBUSFJFRS5WZWN0b3IyKCk7dmFyIGksajsvLyBnZW5lcmF0ZSB2ZXJ0aWNlcyBhbmQgdXZzXG5mb3IoaT0wO2k8PXNlZ21lbnRzO2krKyl7dmFyIHBoaT1waGlTdGFydCtpKmludmVyc2VTZWdtZW50cypwaGlMZW5ndGg7dmFyIHNpbj1NYXRoLnNpbihwaGkpO3ZhciBjb3M9TWF0aC5jb3MocGhpKTtmb3Ioaj0wO2o8PXBvaW50cy5sZW5ndGgtMTtqKyspey8vIHZlcnRleFxudmVydGV4Lng9cG9pbnRzW2pdLngqc2luO3ZlcnRleC55PXBvaW50c1tqXS55O3ZlcnRleC56PXBvaW50c1tqXS54KmNvczt2ZXJ0aWNlcy5zZXRYWVooaW5kZXgsdmVydGV4LngsdmVydGV4LnksdmVydGV4LnopOy8vIHV2XG51di54PWkvc2VnbWVudHM7dXYueT1qLyhwb2ludHMubGVuZ3RoLTEpO3V2cy5zZXRYWShpbmRleCx1di54LHV2LnkpOy8vIGluY3JlYXNlIGluZGV4XG5pbmRleCsrO319Ly8gZ2VuZXJhdGUgaW5kaWNlc1xuZm9yKGk9MDtpPHNlZ21lbnRzO2krKyl7Zm9yKGo9MDtqPHBvaW50cy5sZW5ndGgtMTtqKyspe2Jhc2U9aitpKnBvaW50cy5sZW5ndGg7Ly8gaW5kaWNlc1xudmFyIGE9YmFzZTt2YXIgYj1iYXNlK3BvaW50cy5sZW5ndGg7dmFyIGM9YmFzZStwb2ludHMubGVuZ3RoKzE7dmFyIGQ9YmFzZSsxOy8vIGZhY2Ugb25lXG5pbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYSk7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYik7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsZCk7aW5kZXhPZmZzZXQrKzsvLyBmYWNlIHR3b1xuaW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGIpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGMpO2luZGV4T2Zmc2V0Kys7aW5kaWNlcy5zZXRYKGluZGV4T2Zmc2V0LGQpO2luZGV4T2Zmc2V0Kys7fX0vLyBidWlsZCBnZW9tZXRyeVxudGhpcy5zZXRJbmRleChpbmRpY2VzKTt0aGlzLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLHZlcnRpY2VzKTt0aGlzLmFkZEF0dHJpYnV0ZSgndXYnLHV2cyk7Ly8gZ2VuZXJhdGUgbm9ybWFsc1xudGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpOy8vIGlmIHRoZSBnZW9tZXRyeSBpcyBjbG9zZWQsIHdlIG5lZWQgdG8gYXZlcmFnZSB0aGUgbm9ybWFscyBhbG9uZyB0aGUgc2VhbS5cbi8vIGJlY2F1c2UgdGhlIGNvcnJlc3BvbmRpbmcgdmVydGljZXMgYXJlIGlkZW50aWNhbCAoYnV0IHN0aWxsIGhhdmUgZGlmZmVyZW50IFVWcykuXG5pZihwaGlMZW5ndGg9PT1NYXRoLlBJKjIpe3ZhciBub3JtYWxzPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7dmFyIG4xPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIG4yPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIG49bmV3IFRIUkVFLlZlY3RvcjMoKTsvLyB0aGlzIGlzIHRoZSBidWZmZXIgb2Zmc2V0IGZvciB0aGUgbGFzdCBsaW5lIG9mIHZlcnRpY2VzXG5iYXNlPXNlZ21lbnRzKnBvaW50cy5sZW5ndGgqMztmb3IoaT0wLGo9MDtpPHBvaW50cy5sZW5ndGg7aSsrLGorPTMpey8vIHNlbGVjdCB0aGUgbm9ybWFsIG9mIHRoZSB2ZXJ0ZXggaW4gdGhlIGZpcnN0IGxpbmVcbm4xLng9bm9ybWFsc1tqKzBdO24xLnk9bm9ybWFsc1tqKzFdO24xLno9bm9ybWFsc1tqKzJdOy8vIHNlbGVjdCB0aGUgbm9ybWFsIG9mIHRoZSB2ZXJ0ZXggaW4gdGhlIGxhc3QgbGluZVxubjIueD1ub3JtYWxzW2Jhc2UraiswXTtuMi55PW5vcm1hbHNbYmFzZStqKzFdO24yLno9bm9ybWFsc1tiYXNlK2orMl07Ly8gYXZlcmFnZSBub3JtYWxzXG5uLmFkZFZlY3RvcnMobjEsbjIpLm5vcm1hbGl6ZSgpOy8vIGFzc2lnbiB0aGUgbmV3IHZhbHVlcyB0byBib3RoIG5vcm1hbHNcbm5vcm1hbHNbaiswXT1ub3JtYWxzW2Jhc2UraiswXT1uLng7bm9ybWFsc1tqKzFdPW5vcm1hbHNbYmFzZStqKzFdPW4ueTtub3JtYWxzW2orMl09bm9ybWFsc1tiYXNlK2orMl09bi56O30vLyBuZXh0IHJvd1xufX07VEhSRUUuTGF0aGVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnk7Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvTGF0aGVHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYXN0cm9kdWQgLyBodHRwOi8vYXN0cm9kdWQuaXNncmVhdC5vcmcvXHJcbiAqIEBhdXRob3Igeno4NSAvIGh0dHBzOi8vZ2l0aHViLmNvbS96ejg1XHJcbiAqIEBhdXRob3IgYmhvdXN0b24gLyBodHRwOi8vY2xhcmEuaW9cclxuICovLy8gcG9pbnRzIC0gdG8gY3JlYXRlIGEgY2xvc2VkIHRvcnVzLCBvbmUgbXVzdCB1c2UgYSBzZXQgb2YgcG9pbnRzXG4vLyAgICBsaWtlIHNvOiBbIGEsIGIsIGMsIGQsIGEgXSwgc2VlIGZpcnN0IGlzIHRoZSBzYW1lIGFzIGxhc3QuXG4vLyBzZWdtZW50cyAtIHRoZSBudW1iZXIgb2YgY2lyY3VtZmVyZW5jZSBzZWdtZW50cyB0byBjcmVhdGVcbi8vIHBoaVN0YXJ0IC0gdGhlIHN0YXJ0aW5nIHJhZGlhblxuLy8gcGhpTGVuZ3RoIC0gdGhlIHJhZGlhbiAoMCB0byAyUEkpIHJhbmdlIG9mIHRoZSBsYXRoZWQgc2VjdGlvblxuLy8gICAgMlBJIGlzIGEgY2xvc2VkIGxhdGhlLCBsZXNzIHRoYW4gMlBJIGlzIGEgcG9ydGlvbi5cblRIUkVFLkxhdGhlR2VvbWV0cnk9ZnVuY3Rpb24ocG9pbnRzLHNlZ21lbnRzLHBoaVN0YXJ0LHBoaUxlbmd0aCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J0xhdGhlR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOnBvaW50cyxzZWdtZW50czpzZWdtZW50cyxwaGlTdGFydDpwaGlTdGFydCxwaGlMZW5ndGg6cGhpTGVuZ3RofTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuTGF0aGVCdWZmZXJHZW9tZXRyeShwb2ludHMsc2VnbWVudHMscGhpU3RhcnQscGhpTGVuZ3RoKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCk7fTtUSFJFRS5MYXRoZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuTGF0aGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTGF0aGVHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9QbGFuZUdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogYmFzZWQgb24gaHR0cDovL3BhcGVydmlzaW9uM2QuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL2FzMy90cnVuay9zcmMvb3JnL3BhcGVydmlzaW9uM2Qvb2JqZWN0cy9wcmltaXRpdmVzL1BsYW5lLmFzXHJcbiAqL1RIUkVFLlBsYW5lR2VvbWV0cnk9ZnVuY3Rpb24od2lkdGgsaGVpZ2h0LHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdQbGFuZUdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOndpZHRoLGhlaWdodDpoZWlnaHQsd2lkdGhTZWdtZW50czp3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeSh3aWR0aCxoZWlnaHQsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cykpO307VEhSRUUuUGxhbmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBsYW5lR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBsYW5lR2VvbWV0cnk7Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvUGxhbmVCdWZmZXJHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIGJhc2VkIG9uIGh0dHA6Ly9wYXBlcnZpc2lvbjNkLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9hczMvdHJ1bmsvc3JjL29yZy9wYXBlcnZpc2lvbjNkL29iamVjdHMvcHJpbWl0aXZlcy9QbGFuZS5hc1xyXG4gKi9USFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKHdpZHRoLGhlaWdodCx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nUGxhbmVCdWZmZXJHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LHdpZHRoU2VnbWVudHM6d2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50c307dmFyIHdpZHRoX2hhbGY9d2lkdGgvMjt2YXIgaGVpZ2h0X2hhbGY9aGVpZ2h0LzI7dmFyIGdyaWRYPU1hdGguZmxvb3Iod2lkdGhTZWdtZW50cyl8fDE7dmFyIGdyaWRZPU1hdGguZmxvb3IoaGVpZ2h0U2VnbWVudHMpfHwxO3ZhciBncmlkWDE9Z3JpZFgrMTt2YXIgZ3JpZFkxPWdyaWRZKzE7dmFyIHNlZ21lbnRfd2lkdGg9d2lkdGgvZ3JpZFg7dmFyIHNlZ21lbnRfaGVpZ2h0PWhlaWdodC9ncmlkWTt2YXIgdmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShncmlkWDEqZ3JpZFkxKjMpO3ZhciBub3JtYWxzPW5ldyBGbG9hdDMyQXJyYXkoZ3JpZFgxKmdyaWRZMSozKTt2YXIgdXZzPW5ldyBGbG9hdDMyQXJyYXkoZ3JpZFgxKmdyaWRZMSoyKTt2YXIgb2Zmc2V0PTA7dmFyIG9mZnNldDI9MDtmb3IodmFyIGl5PTA7aXk8Z3JpZFkxO2l5Kyspe3ZhciB5PWl5KnNlZ21lbnRfaGVpZ2h0LWhlaWdodF9oYWxmO2Zvcih2YXIgaXg9MDtpeDxncmlkWDE7aXgrKyl7dmFyIHg9aXgqc2VnbWVudF93aWR0aC13aWR0aF9oYWxmO3ZlcnRpY2VzW29mZnNldF09eDt2ZXJ0aWNlc1tvZmZzZXQrMV09LXk7bm9ybWFsc1tvZmZzZXQrMl09MTt1dnNbb2Zmc2V0Ml09aXgvZ3JpZFg7dXZzW29mZnNldDIrMV09MS1peS9ncmlkWTtvZmZzZXQrPTM7b2Zmc2V0Mis9Mjt9fW9mZnNldD0wO3ZhciBpbmRpY2VzPW5ldyh2ZXJ0aWNlcy5sZW5ndGgvMz42NTUzNT9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoZ3JpZFgqZ3JpZFkqNik7Zm9yKHZhciBpeT0wO2l5PGdyaWRZO2l5Kyspe2Zvcih2YXIgaXg9MDtpeDxncmlkWDtpeCsrKXt2YXIgYT1peCtncmlkWDEqaXk7dmFyIGI9aXgrZ3JpZFgxKihpeSsxKTt2YXIgYz1peCsxK2dyaWRYMSooaXkrMSk7dmFyIGQ9aXgrMStncmlkWDEqaXk7aW5kaWNlc1tvZmZzZXRdPWE7aW5kaWNlc1tvZmZzZXQrMV09YjtpbmRpY2VzW29mZnNldCsyXT1kO2luZGljZXNbb2Zmc2V0KzNdPWI7aW5kaWNlc1tvZmZzZXQrNF09YztpbmRpY2VzW29mZnNldCs1XT1kO29mZnNldCs9Njt9fXRoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShpbmRpY2VzLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodmVydGljZXMsMykpO3RoaXMuYWRkQXR0cmlidXRlKCdub3JtYWwnLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobm9ybWFscywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3V2JyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHV2cywyKSk7fTtUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9SaW5nQnVmZmVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIE11Z2VuODcgLyBodHRwczovL2dpdGh1Yi5jb20vTXVnZW44N1xyXG4gKi9USFJFRS5SaW5nQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oaW5uZXJSYWRpdXMsb3V0ZXJSYWRpdXMsdGhldGFTZWdtZW50cyxwaGlTZWdtZW50cyx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nUmluZ0J1ZmZlckdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e2lubmVyUmFkaXVzOmlubmVyUmFkaXVzLG91dGVyUmFkaXVzOm91dGVyUmFkaXVzLHRoZXRhU2VnbWVudHM6dGhldGFTZWdtZW50cyxwaGlTZWdtZW50czpwaGlTZWdtZW50cyx0aGV0YVN0YXJ0OnRoZXRhU3RhcnQsdGhldGFMZW5ndGg6dGhldGFMZW5ndGh9O2lubmVyUmFkaXVzPWlubmVyUmFkaXVzfHwyMDtvdXRlclJhZGl1cz1vdXRlclJhZGl1c3x8NTA7dGhldGFTdGFydD10aGV0YVN0YXJ0IT09dW5kZWZpbmVkP3RoZXRhU3RhcnQ6MDt0aGV0YUxlbmd0aD10aGV0YUxlbmd0aCE9PXVuZGVmaW5lZD90aGV0YUxlbmd0aDpNYXRoLlBJKjI7dGhldGFTZWdtZW50cz10aGV0YVNlZ21lbnRzIT09dW5kZWZpbmVkP01hdGgubWF4KDMsdGhldGFTZWdtZW50cyk6ODtwaGlTZWdtZW50cz1waGlTZWdtZW50cyE9PXVuZGVmaW5lZD9NYXRoLm1heCgxLHBoaVNlZ21lbnRzKToxOy8vIHRoZXNlIGFyZSB1c2VkIHRvIGNhbGN1bGF0ZSBidWZmZXIgbGVuZ3RoXG52YXIgdmVydGV4Q291bnQ9KHRoZXRhU2VnbWVudHMrMSkqKHBoaVNlZ21lbnRzKzEpO3ZhciBpbmRleENvdW50PXRoZXRhU2VnbWVudHMqcGhpU2VnbWVudHMqMiozOy8vIGJ1ZmZlcnNcbnZhciBpbmRpY2VzPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3KGluZGV4Q291bnQ+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGluZGV4Q291bnQpLDEpO3ZhciB2ZXJ0aWNlcz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMyksMyk7dmFyIG5vcm1hbHM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpLDMpO3ZhciB1dnM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjIpLDIpOy8vIHNvbWUgaGVscGVyIHZhcmlhYmxlc1xudmFyIGluZGV4PTAsaW5kZXhPZmZzZXQ9MCxzZWdtZW50O3ZhciByYWRpdXM9aW5uZXJSYWRpdXM7dmFyIHJhZGl1c1N0ZXA9KG91dGVyUmFkaXVzLWlubmVyUmFkaXVzKS9waGlTZWdtZW50czt2YXIgdmVydGV4PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHV2PW5ldyBUSFJFRS5WZWN0b3IyKCk7dmFyIGosaTsvLyBnZW5lcmF0ZSB2ZXJ0aWNlcywgbm9ybWFscyBhbmQgdXZzXG4vLyB2YWx1ZXMgYXJlIGdlbmVyYXRlIGZyb20gdGhlIGluc2lkZSBvZiB0aGUgcmluZyB0byB0aGUgb3V0c2lkZVxuZm9yKGo9MDtqPD1waGlTZWdtZW50cztqKyspe2ZvcihpPTA7aTw9dGhldGFTZWdtZW50cztpKyspe3NlZ21lbnQ9dGhldGFTdGFydCtpL3RoZXRhU2VnbWVudHMqdGhldGFMZW5ndGg7Ly8gdmVydGV4XG52ZXJ0ZXgueD1yYWRpdXMqTWF0aC5jb3Moc2VnbWVudCk7dmVydGV4Lnk9cmFkaXVzKk1hdGguc2luKHNlZ21lbnQpO3ZlcnRpY2VzLnNldFhZWihpbmRleCx2ZXJ0ZXgueCx2ZXJ0ZXgueSx2ZXJ0ZXgueik7Ly8gbm9ybWFsXG5ub3JtYWxzLnNldFhZWihpbmRleCwwLDAsMSk7Ly8gdXZcbnV2Lng9KHZlcnRleC54L291dGVyUmFkaXVzKzEpLzI7dXYueT0odmVydGV4Lnkvb3V0ZXJSYWRpdXMrMSkvMjt1dnMuc2V0WFkoaW5kZXgsdXYueCx1di55KTsvLyBpbmNyZWFzZSBpbmRleFxuaW5kZXgrKzt9Ly8gaW5jcmVhc2UgdGhlIHJhZGl1cyBmb3IgbmV4dCByb3cgb2YgdmVydGljZXNcbnJhZGl1cys9cmFkaXVzU3RlcDt9Ly8gZ2VuZXJhdGUgaW5kaWNlc1xuZm9yKGo9MDtqPHBoaVNlZ21lbnRzO2orKyl7dmFyIHRoZXRhU2VnbWVudExldmVsPWoqKHRoZXRhU2VnbWVudHMrMSk7Zm9yKGk9MDtpPHRoZXRhU2VnbWVudHM7aSsrKXtzZWdtZW50PWkrdGhldGFTZWdtZW50TGV2ZWw7Ly8gaW5kaWNlc1xudmFyIGE9c2VnbWVudDt2YXIgYj1zZWdtZW50K3RoZXRhU2VnbWVudHMrMTt2YXIgYz1zZWdtZW50K3RoZXRhU2VnbWVudHMrMjt2YXIgZD1zZWdtZW50KzE7Ly8gZmFjZSBvbmVcbmluZGljZXMuc2V0WChpbmRleE9mZnNldCxhKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxiKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxjKTtpbmRleE9mZnNldCsrOy8vIGZhY2UgdHdvXG5pbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYSk7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYyk7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsZCk7aW5kZXhPZmZzZXQrKzt9fS8vIGJ1aWxkIGdlb21ldHJ5XG50aGlzLnNldEluZGV4KGluZGljZXMpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsdmVydGljZXMpO3RoaXMuYWRkQXR0cmlidXRlKCdub3JtYWwnLG5vcm1hbHMpO3RoaXMuYWRkQXR0cmlidXRlKCd1dicsdXZzKTt9O1RIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUmluZ0J1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1JpbmdHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgS2FsZWIgTXVycGh5XHJcbiAqL1RIUkVFLlJpbmdHZW9tZXRyeT1mdW5jdGlvbihpbm5lclJhZGl1cyxvdXRlclJhZGl1cyx0aGV0YVNlZ21lbnRzLHBoaVNlZ21lbnRzLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdSaW5nR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17aW5uZXJSYWRpdXM6aW5uZXJSYWRpdXMsb3V0ZXJSYWRpdXM6b3V0ZXJSYWRpdXMsdGhldGFTZWdtZW50czp0aGV0YVNlZ21lbnRzLHBoaVNlZ21lbnRzOnBoaVNlZ21lbnRzLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeShpbm5lclJhZGl1cyxvdXRlclJhZGl1cyx0aGV0YVNlZ21lbnRzLHBoaVNlZ21lbnRzLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpKTt9O1RIUkVFLlJpbmdHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlJpbmdHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUmluZ0dlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1NwaGVyZUdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuU3BoZXJlR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLHdpZHRoU2VnbWVudHMsaGVpZ2h0U2VnbWVudHMscGhpU3RhcnQscGhpTGVuZ3RoLHRoZXRhU3RhcnQsdGhldGFMZW5ndGgpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdTcGhlcmVHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6cmFkaXVzLHdpZHRoU2VnbWVudHM6d2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50czpoZWlnaHRTZWdtZW50cyxwaGlTdGFydDpwaGlTdGFydCxwaGlMZW5ndGg6cGhpTGVuZ3RoLHRoZXRhU3RhcnQ6dGhldGFTdGFydCx0aGV0YUxlbmd0aDp0aGV0YUxlbmd0aH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5KHJhZGl1cyx3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzLHBoaVN0YXJ0LHBoaUxlbmd0aCx0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoKSk7fTtUSFJFRS5TcGhlcmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlNwaGVyZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TcGhlcmVHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9TcGhlcmVCdWZmZXJHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYmVuYWFkYW1zIC8gaHR0cHM6Ly90d2l0dGVyLmNvbS9iZW5fYV9hZGFtc1xyXG4gKiBiYXNlZCBvbiBUSFJFRS5TcGhlcmVHZW9tZXRyeVxyXG4gKi9USFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihyYWRpdXMsd2lkdGhTZWdtZW50cyxoZWlnaHRTZWdtZW50cyxwaGlTdGFydCxwaGlMZW5ndGgsdGhldGFTdGFydCx0aGV0YUxlbmd0aCl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1NwaGVyZUJ1ZmZlckdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsd2lkdGhTZWdtZW50czp3aWR0aFNlZ21lbnRzLGhlaWdodFNlZ21lbnRzOmhlaWdodFNlZ21lbnRzLHBoaVN0YXJ0OnBoaVN0YXJ0LHBoaUxlbmd0aDpwaGlMZW5ndGgsdGhldGFTdGFydDp0aGV0YVN0YXJ0LHRoZXRhTGVuZ3RoOnRoZXRhTGVuZ3RofTtyYWRpdXM9cmFkaXVzfHw1MDt3aWR0aFNlZ21lbnRzPU1hdGgubWF4KDMsTWF0aC5mbG9vcih3aWR0aFNlZ21lbnRzKXx8OCk7aGVpZ2h0U2VnbWVudHM9TWF0aC5tYXgoMixNYXRoLmZsb29yKGhlaWdodFNlZ21lbnRzKXx8Nik7cGhpU3RhcnQ9cGhpU3RhcnQhPT11bmRlZmluZWQ/cGhpU3RhcnQ6MDtwaGlMZW5ndGg9cGhpTGVuZ3RoIT09dW5kZWZpbmVkP3BoaUxlbmd0aDpNYXRoLlBJKjI7dGhldGFTdGFydD10aGV0YVN0YXJ0IT09dW5kZWZpbmVkP3RoZXRhU3RhcnQ6MDt0aGV0YUxlbmd0aD10aGV0YUxlbmd0aCE9PXVuZGVmaW5lZD90aGV0YUxlbmd0aDpNYXRoLlBJO3ZhciB0aGV0YUVuZD10aGV0YVN0YXJ0K3RoZXRhTGVuZ3RoO3ZhciB2ZXJ0ZXhDb3VudD0od2lkdGhTZWdtZW50cysxKSooaGVpZ2h0U2VnbWVudHMrMSk7dmFyIHBvc2l0aW9ucz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMyksMyk7dmFyIG5vcm1hbHM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpLDMpO3ZhciB1dnM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjIpLDIpO3ZhciBpbmRleD0wLHZlcnRpY2VzPVtdLG5vcm1hbD1uZXcgVEhSRUUuVmVjdG9yMygpO2Zvcih2YXIgeT0wO3k8PWhlaWdodFNlZ21lbnRzO3krKyl7dmFyIHZlcnRpY2VzUm93PVtdO3ZhciB2PXkvaGVpZ2h0U2VnbWVudHM7Zm9yKHZhciB4PTA7eDw9d2lkdGhTZWdtZW50czt4Kyspe3ZhciB1PXgvd2lkdGhTZWdtZW50czt2YXIgcHg9LXJhZGl1cypNYXRoLmNvcyhwaGlTdGFydCt1KnBoaUxlbmd0aCkqTWF0aC5zaW4odGhldGFTdGFydCt2KnRoZXRhTGVuZ3RoKTt2YXIgcHk9cmFkaXVzKk1hdGguY29zKHRoZXRhU3RhcnQrdip0aGV0YUxlbmd0aCk7dmFyIHB6PXJhZGl1cypNYXRoLnNpbihwaGlTdGFydCt1KnBoaUxlbmd0aCkqTWF0aC5zaW4odGhldGFTdGFydCt2KnRoZXRhTGVuZ3RoKTtub3JtYWwuc2V0KHB4LHB5LHB6KS5ub3JtYWxpemUoKTtwb3NpdGlvbnMuc2V0WFlaKGluZGV4LHB4LHB5LHB6KTtub3JtYWxzLnNldFhZWihpbmRleCxub3JtYWwueCxub3JtYWwueSxub3JtYWwueik7dXZzLnNldFhZKGluZGV4LHUsMS12KTt2ZXJ0aWNlc1Jvdy5wdXNoKGluZGV4KTtpbmRleCsrO312ZXJ0aWNlcy5wdXNoKHZlcnRpY2VzUm93KTt9dmFyIGluZGljZXM9W107Zm9yKHZhciB5PTA7eTxoZWlnaHRTZWdtZW50czt5Kyspe2Zvcih2YXIgeD0wO3g8d2lkdGhTZWdtZW50czt4Kyspe3ZhciB2MT12ZXJ0aWNlc1t5XVt4KzFdO3ZhciB2Mj12ZXJ0aWNlc1t5XVt4XTt2YXIgdjM9dmVydGljZXNbeSsxXVt4XTt2YXIgdjQ9dmVydGljZXNbeSsxXVt4KzFdO2lmKHkhPT0wfHx0aGV0YVN0YXJ0PjApaW5kaWNlcy5wdXNoKHYxLHYyLHY0KTtpZih5IT09aGVpZ2h0U2VnbWVudHMtMXx8dGhldGFFbmQ8TWF0aC5QSSlpbmRpY2VzLnB1c2godjIsdjMsdjQpO319dGhpcy5zZXRJbmRleChuZXcocG9zaXRpb25zLmNvdW50PjY1NTM1P1RIUkVFLlVpbnQzMkF0dHJpYnV0ZTpUSFJFRS5VaW50MTZBdHRyaWJ1dGUpKGluZGljZXMsMSkpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicscG9zaXRpb25zKTt0aGlzLmFkZEF0dHJpYnV0ZSgnbm9ybWFsJyxub3JtYWxzKTt0aGlzLmFkZEF0dHJpYnV0ZSgndXYnLHV2cyk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzKCkscmFkaXVzKTt9O1RIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1RleHRHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3Igeno4NSAvIGh0dHA6Ly93d3cubGFiNGdhbWVzLm5ldC96ejg1L2Jsb2dcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICpcclxuICogVGV4dCA9IDNEIFRleHRcclxuICpcclxuICogcGFyYW1ldGVycyA9IHtcclxuICogIGZvbnQ6IDxUSFJFRS5Gb250PiwgLy8gZm9udFxyXG4gKlxyXG4gKiAgc2l6ZTogPGZsb2F0PiwgLy8gc2l6ZSBvZiB0aGUgdGV4dFxyXG4gKiAgaGVpZ2h0OiA8ZmxvYXQ+LCAvLyB0aGlja25lc3MgdG8gZXh0cnVkZSB0ZXh0XHJcbiAqICBjdXJ2ZVNlZ21lbnRzOiA8aW50PiwgLy8gbnVtYmVyIG9mIHBvaW50cyBvbiB0aGUgY3VydmVzXHJcbiAqXHJcbiAqICBiZXZlbEVuYWJsZWQ6IDxib29sPiwgLy8gdHVybiBvbiBiZXZlbFxyXG4gKiAgYmV2ZWxUaGlja25lc3M6IDxmbG9hdD4sIC8vIGhvdyBkZWVwIGludG8gdGV4dCBiZXZlbCBnb2VzXHJcbiAqICBiZXZlbFNpemU6IDxmbG9hdD4gLy8gaG93IGZhciBmcm9tIHRleHQgb3V0bGluZSBpcyBiZXZlbFxyXG4gKiB9XHJcbiAqL1RIUkVFLlRleHRHZW9tZXRyeT1mdW5jdGlvbih0ZXh0LHBhcmFtZXRlcnMpe3BhcmFtZXRlcnM9cGFyYW1ldGVyc3x8e307dmFyIGZvbnQ9cGFyYW1ldGVycy5mb250O2lmKGZvbnQgaW5zdGFuY2VvZiBUSFJFRS5Gb250PT09ZmFsc2Upe2NvbnNvbGUuZXJyb3IoJ1RIUkVFLlRleHRHZW9tZXRyeTogZm9udCBwYXJhbWV0ZXIgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkZvbnQuJyk7cmV0dXJuIG5ldyBUSFJFRS5HZW9tZXRyeSgpO312YXIgc2hhcGVzPWZvbnQuZ2VuZXJhdGVTaGFwZXModGV4dCxwYXJhbWV0ZXJzLnNpemUscGFyYW1ldGVycy5jdXJ2ZVNlZ21lbnRzKTsvLyB0cmFuc2xhdGUgcGFyYW1ldGVycyB0byBFeHRydWRlR2VvbWV0cnkgQVBJXG5wYXJhbWV0ZXJzLmFtb3VudD1wYXJhbWV0ZXJzLmhlaWdodCE9PXVuZGVmaW5lZD9wYXJhbWV0ZXJzLmhlaWdodDo1MDsvLyBkZWZhdWx0c1xuaWYocGFyYW1ldGVycy5iZXZlbFRoaWNrbmVzcz09PXVuZGVmaW5lZClwYXJhbWV0ZXJzLmJldmVsVGhpY2tuZXNzPTEwO2lmKHBhcmFtZXRlcnMuYmV2ZWxTaXplPT09dW5kZWZpbmVkKXBhcmFtZXRlcnMuYmV2ZWxTaXplPTg7aWYocGFyYW1ldGVycy5iZXZlbEVuYWJsZWQ9PT11bmRlZmluZWQpcGFyYW1ldGVycy5iZXZlbEVuYWJsZWQ9ZmFsc2U7VEhSRUUuRXh0cnVkZUdlb21ldHJ5LmNhbGwodGhpcyxzaGFwZXMscGFyYW1ldGVycyk7dGhpcy50eXBlPSdUZXh0R2VvbWV0cnknO307VEhSRUUuVGV4dEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRleHRHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVGV4dEdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1RvcnVzQnVmZmVyR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIE11Z2VuODcgLyBodHRwczovL2dpdGh1Yi5jb20vTXVnZW44N1xyXG4gKi9USFJFRS5Ub3J1c0J1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKHJhZGl1cyx0dWJlLHJhZGlhbFNlZ21lbnRzLHR1YnVsYXJTZWdtZW50cyxhcmMpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPSdUb3J1c0J1ZmZlckdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsdHViZTp0dWJlLHJhZGlhbFNlZ21lbnRzOnJhZGlhbFNlZ21lbnRzLHR1YnVsYXJTZWdtZW50czp0dWJ1bGFyU2VnbWVudHMsYXJjOmFyY307cmFkaXVzPXJhZGl1c3x8MTAwO3R1YmU9dHViZXx8NDA7cmFkaWFsU2VnbWVudHM9TWF0aC5mbG9vcihyYWRpYWxTZWdtZW50cyl8fDg7dHVidWxhclNlZ21lbnRzPU1hdGguZmxvb3IodHVidWxhclNlZ21lbnRzKXx8NjthcmM9YXJjfHxNYXRoLlBJKjI7Ly8gdXNlZCB0byBjYWxjdWxhdGUgYnVmZmVyIGxlbmd0aFxudmFyIHZlcnRleENvdW50PShyYWRpYWxTZWdtZW50cysxKSoodHVidWxhclNlZ21lbnRzKzEpO3ZhciBpbmRleENvdW50PXJhZGlhbFNlZ21lbnRzKnR1YnVsYXJTZWdtZW50cyoyKjM7Ly8gYnVmZmVyc1xudmFyIGluZGljZXM9bmV3KGluZGV4Q291bnQ+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGluZGV4Q291bnQpO3ZhciB2ZXJ0aWNlcz1uZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpO3ZhciBub3JtYWxzPW5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQqMyk7dmFyIHV2cz1uZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjIpOy8vIG9mZnNldCB2YXJpYWJsZXNcbnZhciB2ZXJ0ZXhCdWZmZXJPZmZzZXQ9MDt2YXIgdXZCdWZmZXJPZmZzZXQ9MDt2YXIgaW5kZXhCdWZmZXJPZmZzZXQ9MDsvLyBoZWxwZXIgdmFyaWFibGVzXG52YXIgY2VudGVyPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHZlcnRleD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgaixpOy8vIGdlbmVyYXRlIHZlcnRpY2VzLCBub3JtYWxzIGFuZCB1dnNcbmZvcihqPTA7ajw9cmFkaWFsU2VnbWVudHM7aisrKXtmb3IoaT0wO2k8PXR1YnVsYXJTZWdtZW50cztpKyspe3ZhciB1PWkvdHVidWxhclNlZ21lbnRzKmFyYzt2YXIgdj1qL3JhZGlhbFNlZ21lbnRzKk1hdGguUEkqMjsvLyB2ZXJ0ZXhcbnZlcnRleC54PShyYWRpdXMrdHViZSpNYXRoLmNvcyh2KSkqTWF0aC5jb3ModSk7dmVydGV4Lnk9KHJhZGl1cyt0dWJlKk1hdGguY29zKHYpKSpNYXRoLnNpbih1KTt2ZXJ0ZXguej10dWJlKk1hdGguc2luKHYpO3ZlcnRpY2VzW3ZlcnRleEJ1ZmZlck9mZnNldF09dmVydGV4Lng7dmVydGljZXNbdmVydGV4QnVmZmVyT2Zmc2V0KzFdPXZlcnRleC55O3ZlcnRpY2VzW3ZlcnRleEJ1ZmZlck9mZnNldCsyXT12ZXJ0ZXguejsvLyB0aGlzIHZlY3RvciBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgbm9ybWFsXG5jZW50ZXIueD1yYWRpdXMqTWF0aC5jb3ModSk7Y2VudGVyLnk9cmFkaXVzKk1hdGguc2luKHUpOy8vIG5vcm1hbFxubm9ybWFsLnN1YlZlY3RvcnModmVydGV4LGNlbnRlcikubm9ybWFsaXplKCk7bm9ybWFsc1t2ZXJ0ZXhCdWZmZXJPZmZzZXRdPW5vcm1hbC54O25vcm1hbHNbdmVydGV4QnVmZmVyT2Zmc2V0KzFdPW5vcm1hbC55O25vcm1hbHNbdmVydGV4QnVmZmVyT2Zmc2V0KzJdPW5vcm1hbC56Oy8vIHV2XG51dnNbdXZCdWZmZXJPZmZzZXRdPWkvdHVidWxhclNlZ21lbnRzO3V2c1t1dkJ1ZmZlck9mZnNldCsxXT1qL3JhZGlhbFNlZ21lbnRzOy8vIHVwZGF0ZSBvZmZzZXRzXG52ZXJ0ZXhCdWZmZXJPZmZzZXQrPTM7dXZCdWZmZXJPZmZzZXQrPTI7fX0vLyBnZW5lcmF0ZSBpbmRpY2VzXG5mb3Ioaj0xO2o8PXJhZGlhbFNlZ21lbnRzO2orKyl7Zm9yKGk9MTtpPD10dWJ1bGFyU2VnbWVudHM7aSsrKXsvLyBpbmRpY2VzXG52YXIgYT0odHVidWxhclNlZ21lbnRzKzEpKmoraS0xO3ZhciBiPSh0dWJ1bGFyU2VnbWVudHMrMSkqKGotMSkraS0xO3ZhciBjPSh0dWJ1bGFyU2VnbWVudHMrMSkqKGotMSkraTt2YXIgZD0odHVidWxhclNlZ21lbnRzKzEpKmoraTsvLyBmYWNlIG9uZVxuaW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldF09YTtpbmRpY2VzW2luZGV4QnVmZmVyT2Zmc2V0KzFdPWI7aW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldCsyXT1kOy8vIGZhY2UgdHdvXG5pbmRpY2VzW2luZGV4QnVmZmVyT2Zmc2V0KzNdPWI7aW5kaWNlc1tpbmRleEJ1ZmZlck9mZnNldCs0XT1jO2luZGljZXNbaW5kZXhCdWZmZXJPZmZzZXQrNV09ZDsvLyB1cGRhdGUgb2Zmc2V0XG5pbmRleEJ1ZmZlck9mZnNldCs9Njt9fS8vIGJ1aWxkIGdlb21ldHJ5XG50aGlzLnNldEluZGV4KG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoaW5kaWNlcywxKSk7dGhpcy5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZSgnbm9ybWFsJyxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5vcm1hbHMsMykpO3RoaXMuYWRkQXR0cmlidXRlKCd1dicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSh1dnMsMikpO307VEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnk7Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvVG9ydXNHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3Igb29zbW94aWVjb2RlXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqIGJhc2VkIG9uIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hd2F5M2Qvc291cmNlL2Jyb3dzZS90cnVuay9mcDEwL0F3YXkzRExpdGUvc3JjL2F3YXkzZGxpdGUvcHJpbWl0aXZlcy9Ub3J1cy5hcz9yPTI4ODhcclxuICovVEhSRUUuVG9ydXNHZW9tZXRyeT1mdW5jdGlvbihyYWRpdXMsdHViZSxyYWRpYWxTZWdtZW50cyx0dWJ1bGFyU2VnbWVudHMsYXJjKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nVG9ydXNHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6cmFkaXVzLHR1YmU6dHViZSxyYWRpYWxTZWdtZW50czpyYWRpYWxTZWdtZW50cyx0dWJ1bGFyU2VnbWVudHM6dHVidWxhclNlZ21lbnRzLGFyYzphcmN9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBUSFJFRS5Ub3J1c0J1ZmZlckdlb21ldHJ5KHJhZGl1cyx0dWJlLHJhZGlhbFNlZ21lbnRzLHR1YnVsYXJTZWdtZW50cyxhcmMpKTt9O1RIUkVFLlRvcnVzR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Ub3J1c0dlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Ub3J1c0dlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1RvcnVzS25vdEJ1ZmZlckdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBNdWdlbjg3IC8gaHR0cHM6Ly9naXRodWIuY29tL011Z2VuODdcclxuICpcclxuICogc2VlOiBodHRwOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcHF0b3J1cy9cclxuICovVEhSRUUuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLHR1YmUsdHVidWxhclNlZ21lbnRzLHJhZGlhbFNlZ21lbnRzLHAscSl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1RvcnVzS25vdEJ1ZmZlckdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsdHViZTp0dWJlLHR1YnVsYXJTZWdtZW50czp0dWJ1bGFyU2VnbWVudHMscmFkaWFsU2VnbWVudHM6cmFkaWFsU2VnbWVudHMscDpwLHE6cX07cmFkaXVzPXJhZGl1c3x8MTAwO3R1YmU9dHViZXx8NDA7dHVidWxhclNlZ21lbnRzPU1hdGguZmxvb3IodHVidWxhclNlZ21lbnRzKXx8NjQ7cmFkaWFsU2VnbWVudHM9TWF0aC5mbG9vcihyYWRpYWxTZWdtZW50cyl8fDg7cD1wfHwyO3E9cXx8MzsvLyB1c2VkIHRvIGNhbGN1bGF0ZSBidWZmZXIgbGVuZ3RoXG52YXIgdmVydGV4Q291bnQ9KHJhZGlhbFNlZ21lbnRzKzEpKih0dWJ1bGFyU2VnbWVudHMrMSk7dmFyIGluZGV4Q291bnQ9cmFkaWFsU2VnbWVudHMqdHVidWxhclNlZ21lbnRzKjIqMzsvLyBidWZmZXJzXG52YXIgaW5kaWNlcz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyhpbmRleENvdW50PjY1NTM1P1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShpbmRleENvdW50KSwxKTt2YXIgdmVydGljZXM9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50KjMpLDMpO3ZhciBub3JtYWxzPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCozKSwzKTt2YXIgdXZzPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCoyKSwyKTsvLyBoZWxwZXIgdmFyaWFibGVzXG52YXIgaSxqLGluZGV4PTAsaW5kZXhPZmZzZXQ9MDt2YXIgdmVydGV4PW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIG5vcm1hbD1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciB1dj1uZXcgVEhSRUUuVmVjdG9yMigpO3ZhciBQMT1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBQMj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBCPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIFQ9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgTj1uZXcgVEhSRUUuVmVjdG9yMygpOy8vIGdlbmVyYXRlIHZlcnRpY2VzLCBub3JtYWxzIGFuZCB1dnNcbmZvcihpPTA7aTw9dHVidWxhclNlZ21lbnRzOysraSl7Ly8gdGhlIHJhZGlhbiBcInVcIiBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgcG9zaXRpb24gb24gdGhlIHRvcnVzIGN1cnZlIG9mIHRoZSBjdXJyZW50IHR1YnVsYXIgc2VnZW1lbnRcbnZhciB1PWkvdHVidWxhclNlZ21lbnRzKnAqTWF0aC5QSSoyOy8vIG5vdyB3ZSBjYWxjdWxhdGUgdHdvIHBvaW50cy4gUDEgaXMgb3VyIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIGN1cnZlLCBQMiBpcyBhIGxpdHRsZSBmYXJ0aGVyIGFoZWFkLlxuLy8gdGhlc2UgcG9pbnRzIGFyZSB1c2VkIHRvIGNyZWF0ZSBhIHNwZWNpYWwgXCJjb29yZGluYXRlIHNwYWNlXCIsIHdoaWNoIGlzIG5lY2Vzc2FyeSB0byBjYWxjdWxhdGUgdGhlIGNvcnJlY3QgdmVydGV4IHBvc2l0aW9uc1xuY2FsY3VsYXRlUG9zaXRpb25PbkN1cnZlKHUscCxxLHJhZGl1cyxQMSk7Y2FsY3VsYXRlUG9zaXRpb25PbkN1cnZlKHUrMC4wMSxwLHEscmFkaXVzLFAyKTsvLyBjYWxjdWxhdGUgb3J0aG9ub3JtYWwgYmFzaXNcblQuc3ViVmVjdG9ycyhQMixQMSk7Ti5hZGRWZWN0b3JzKFAyLFAxKTtCLmNyb3NzVmVjdG9ycyhULE4pO04uY3Jvc3NWZWN0b3JzKEIsVCk7Ly8gbm9ybWFsaXplIEIsIE4uIFQgY2FuIGJlIGlnbm9yZWQsIHdlIGRvbid0IHVzZSBpdFxuQi5ub3JtYWxpemUoKTtOLm5vcm1hbGl6ZSgpO2ZvcihqPTA7ajw9cmFkaWFsU2VnbWVudHM7KytqKXsvLyBub3cgY2FsY3VsYXRlIHRoZSB2ZXJ0aWNlcy4gdGhleSBhcmUgbm90aGluZyBtb3JlIHRoYW4gYW4gZXh0cnVzaW9uIG9mIHRoZSB0b3J1cyBjdXJ2ZS5cbi8vIGJlY2F1c2Ugd2UgZXh0cnVkZSBhIHNoYXBlIGluIHRoZSB4eS1wbGFuZSwgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxjdWxhdGUgYSB6LXZhbHVlLlxudmFyIHY9ai9yYWRpYWxTZWdtZW50cypNYXRoLlBJKjI7dmFyIGN4PS10dWJlKk1hdGguY29zKHYpO3ZhciBjeT10dWJlKk1hdGguc2luKHYpOy8vIG5vdyBjYWxjdWxhdGUgdGhlIGZpbmFsIHZlcnRleCBwb3NpdGlvbi5cbi8vIGZpcnN0IHdlIG9yaWVudCB0aGUgZXh0cnVzaW9uIHdpdGggb3VyIGJhc2lzIHZlY3RvcywgdGhlbiB3ZSBhZGQgaXQgdG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIGN1cnZlXG52ZXJ0ZXgueD1QMS54KyhjeCpOLngrY3kqQi54KTt2ZXJ0ZXgueT1QMS55KyhjeCpOLnkrY3kqQi55KTt2ZXJ0ZXguej1QMS56KyhjeCpOLnorY3kqQi56KTsvLyB2ZXJ0ZXhcbnZlcnRpY2VzLnNldFhZWihpbmRleCx2ZXJ0ZXgueCx2ZXJ0ZXgueSx2ZXJ0ZXgueik7Ly8gbm9ybWFsIChQMSBpcyBhbHdheXMgdGhlIGNlbnRlci9vcmlnaW4gb2YgdGhlIGV4dHJ1c2lvbiwgdGh1cyB3ZSBjYW4gdXNlIGl0IHRvIGNhbGN1bGF0ZSB0aGUgbm9ybWFsKVxubm9ybWFsLnN1YlZlY3RvcnModmVydGV4LFAxKS5ub3JtYWxpemUoKTtub3JtYWxzLnNldFhZWihpbmRleCxub3JtYWwueCxub3JtYWwueSxub3JtYWwueik7Ly8gdXZcbnV2Lng9aS90dWJ1bGFyU2VnbWVudHM7dXYueT1qL3JhZGlhbFNlZ21lbnRzO3V2cy5zZXRYWShpbmRleCx1di54LHV2LnkpOy8vIGluY3JlYXNlIGluZGV4XG5pbmRleCsrO319Ly8gZ2VuZXJhdGUgaW5kaWNlc1xuZm9yKGo9MTtqPD10dWJ1bGFyU2VnbWVudHM7aisrKXtmb3IoaT0xO2k8PXJhZGlhbFNlZ21lbnRzO2krKyl7Ly8gaW5kaWNlc1xudmFyIGE9KHJhZGlhbFNlZ21lbnRzKzEpKihqLTEpKyhpLTEpO3ZhciBiPShyYWRpYWxTZWdtZW50cysxKSpqKyhpLTEpO3ZhciBjPShyYWRpYWxTZWdtZW50cysxKSpqK2k7dmFyIGQ9KHJhZGlhbFNlZ21lbnRzKzEpKihqLTEpK2k7Ly8gZmFjZSBvbmVcbmluZGljZXMuc2V0WChpbmRleE9mZnNldCxhKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxiKTtpbmRleE9mZnNldCsrO2luZGljZXMuc2V0WChpbmRleE9mZnNldCxkKTtpbmRleE9mZnNldCsrOy8vIGZhY2UgdHdvXG5pbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYik7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsYyk7aW5kZXhPZmZzZXQrKztpbmRpY2VzLnNldFgoaW5kZXhPZmZzZXQsZCk7aW5kZXhPZmZzZXQrKzt9fS8vIGJ1aWxkIGdlb21ldHJ5XG50aGlzLnNldEluZGV4KGluZGljZXMpO3RoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsdmVydGljZXMpO3RoaXMuYWRkQXR0cmlidXRlKCdub3JtYWwnLG5vcm1hbHMpO3RoaXMuYWRkQXR0cmlidXRlKCd1dicsdXZzKTsvLyB0aGlzIGZ1bmN0aW9uIGNhbGN1bGF0ZXMgdGhlIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIHRvcnVzIGN1cnZlXG5mdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbk9uQ3VydmUodSxwLHEscmFkaXVzLHBvc2l0aW9uKXt2YXIgY3U9TWF0aC5jb3ModSk7dmFyIHN1PU1hdGguc2luKHUpO3ZhciBxdU92ZXJQPXEvcCp1O3ZhciBjcz1NYXRoLmNvcyhxdU92ZXJQKTtwb3NpdGlvbi54PXJhZGl1cyooMitjcykqMC41KmN1O3Bvc2l0aW9uLnk9cmFkaXVzKigyK2NzKSpzdSowLjU7cG9zaXRpb24uej1yYWRpdXMqTWF0aC5zaW4ocXVPdmVyUCkqMC41O319O1RIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1RvcnVzS25vdEdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBvb3Ntb3hpZWNvZGVcclxuICovVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLHR1YmUsdHVidWxhclNlZ21lbnRzLHJhZGlhbFNlZ21lbnRzLHAscSxoZWlnaHRTY2FsZSl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1RvcnVzS25vdEdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsdHViZTp0dWJlLHR1YnVsYXJTZWdtZW50czp0dWJ1bGFyU2VnbWVudHMscmFkaWFsU2VnbWVudHM6cmFkaWFsU2VnbWVudHMscDpwLHE6cX07aWYoaGVpZ2h0U2NhbGUhPT11bmRlZmluZWQpY29uc29sZS53YXJuKCdUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeTogaGVpZ2h0U2NhbGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zY2FsZSggeCwgeSwgeiApIGluc3RlYWQuJyk7dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5KHJhZGl1cyx0dWJlLHR1YnVsYXJTZWdtZW50cyxyYWRpYWxTZWdtZW50cyxwLHEpKTt0aGlzLm1lcmdlVmVydGljZXMoKTt9O1RIUkVFLlRvcnVzS25vdEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNLbm90R2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzS25vdEdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1R1YmVHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwczovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cHM6Ly9naXRodWIuY29tL3p6ODVcclxuICogQGF1dGhvciBtaW5pbmdvbGQgLyBodHRwczovL2dpdGh1Yi5jb20vbWluaW5nb2xkXHJcbiAqIEBhdXRob3Igam9ub2JyMSAvIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25vYnIxXHJcbiAqXHJcbiAqIE1vZGlmaWVkIGZyb20gdGhlIFRvcnVzS25vdEdlb21ldHJ5IGJ5IEBvb3Ntb3hpZWNvZGVcclxuICpcclxuICogQ3JlYXRlcyBhIHR1YmUgd2hpY2ggZXh0cnVkZXMgYWxvbmcgYSAzZCBzcGxpbmVcclxuICpcclxuICogVXNlcyBwYXJhbGxlbCB0cmFuc3BvcnQgZnJhbWVzIGFzIGRlc2NyaWJlZCBpblxyXG4gKiBodHRwOi8vd3d3LmNzLmluZGlhbmEuZWR1L3B1Yi90ZWNocmVwb3J0cy9UUjQyNS5wZGZcclxuICovVEhSRUUuVHViZUdlb21ldHJ5PWZ1bmN0aW9uKHBhdGgsc2VnbWVudHMscmFkaXVzLHJhZGlhbFNlZ21lbnRzLGNsb3NlZCx0YXBlcil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9J1R1YmVHZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtwYXRoOnBhdGgsc2VnbWVudHM6c2VnbWVudHMscmFkaXVzOnJhZGl1cyxyYWRpYWxTZWdtZW50czpyYWRpYWxTZWdtZW50cyxjbG9zZWQ6Y2xvc2VkLHRhcGVyOnRhcGVyfTtzZWdtZW50cz1zZWdtZW50c3x8NjQ7cmFkaXVzPXJhZGl1c3x8MTtyYWRpYWxTZWdtZW50cz1yYWRpYWxTZWdtZW50c3x8ODtjbG9zZWQ9Y2xvc2VkfHxmYWxzZTt0YXBlcj10YXBlcnx8VEhSRUUuVHViZUdlb21ldHJ5Lk5vVGFwZXI7dmFyIGdyaWQ9W107dmFyIHNjb3BlPXRoaXMsdGFuZ2VudCxub3JtYWwsYmlub3JtYWwsbnVtcG9pbnRzPXNlZ21lbnRzKzEsdSx2LHIsY3gsY3kscG9zLHBvczI9bmV3IFRIUkVFLlZlY3RvcjMoKSxpLGosaXAsanAsYSxiLGMsZCx1dmEsdXZiLHV2Yyx1dmQ7dmFyIGZyYW1lcz1uZXcgVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcyhwYXRoLHNlZ21lbnRzLGNsb3NlZCksdGFuZ2VudHM9ZnJhbWVzLnRhbmdlbnRzLG5vcm1hbHM9ZnJhbWVzLm5vcm1hbHMsYmlub3JtYWxzPWZyYW1lcy5iaW5vcm1hbHM7Ly8gcHJveHkgaW50ZXJuYWxzXG50aGlzLnRhbmdlbnRzPXRhbmdlbnRzO3RoaXMubm9ybWFscz1ub3JtYWxzO3RoaXMuYmlub3JtYWxzPWJpbm9ybWFscztmdW5jdGlvbiB2ZXJ0KHgseSx6KXtyZXR1cm4gc2NvcGUudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyh4LHkseikpLTE7fS8vIGNvbnN0cnVjdCB0aGUgZ3JpZFxuZm9yKGk9MDtpPG51bXBvaW50cztpKyspe2dyaWRbaV09W107dT1pLyhudW1wb2ludHMtMSk7cG9zPXBhdGguZ2V0UG9pbnRBdCh1KTt0YW5nZW50PXRhbmdlbnRzW2ldO25vcm1hbD1ub3JtYWxzW2ldO2Jpbm9ybWFsPWJpbm9ybWFsc1tpXTtyPXJhZGl1cyp0YXBlcih1KTtmb3Ioaj0wO2o8cmFkaWFsU2VnbWVudHM7aisrKXt2PWovcmFkaWFsU2VnbWVudHMqMipNYXRoLlBJO2N4PS1yKk1hdGguY29zKHYpOy8vIFRPRE86IEhhY2s6IE5lZ2F0aW5nIGl0IHNvIGl0IGZhY2VzIG91dHNpZGUuXG5jeT1yKk1hdGguc2luKHYpO3BvczIuY29weShwb3MpO3BvczIueCs9Y3gqbm9ybWFsLngrY3kqYmlub3JtYWwueDtwb3MyLnkrPWN4Km5vcm1hbC55K2N5KmJpbm9ybWFsLnk7cG9zMi56Kz1jeCpub3JtYWwueitjeSpiaW5vcm1hbC56O2dyaWRbaV1bal09dmVydChwb3MyLngscG9zMi55LHBvczIueik7fX0vLyBjb25zdHJ1Y3QgdGhlIG1lc2hcbmZvcihpPTA7aTxzZWdtZW50cztpKyspe2ZvcihqPTA7ajxyYWRpYWxTZWdtZW50cztqKyspe2lwPWNsb3NlZD8oaSsxKSVzZWdtZW50czppKzE7anA9KGorMSklcmFkaWFsU2VnbWVudHM7YT1ncmlkW2ldW2pdOy8vICoqKiBOT1QgTkVDRVNTQVJJTFkgUExBTkFSICEgKioqXG5iPWdyaWRbaXBdW2pdO2M9Z3JpZFtpcF1banBdO2Q9Z3JpZFtpXVtqcF07dXZhPW5ldyBUSFJFRS5WZWN0b3IyKGkvc2VnbWVudHMsai9yYWRpYWxTZWdtZW50cyk7dXZiPW5ldyBUSFJFRS5WZWN0b3IyKChpKzEpL3NlZ21lbnRzLGovcmFkaWFsU2VnbWVudHMpO3V2Yz1uZXcgVEhSRUUuVmVjdG9yMigoaSsxKS9zZWdtZW50cywoaisxKS9yYWRpYWxTZWdtZW50cyk7dXZkPW5ldyBUSFJFRS5WZWN0b3IyKGkvc2VnbWVudHMsKGorMSkvcmFkaWFsU2VnbWVudHMpO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYSxiLGQpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdXZhLHV2Yix1dmRdKTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGIsYyxkKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3V2Yi5jbG9uZSgpLHV2Yyx1dmQuY2xvbmUoKV0pO319dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7fTtUSFJFRS5UdWJlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UdWJlR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlR1YmVHZW9tZXRyeTtUSFJFRS5UdWJlR2VvbWV0cnkuTm9UYXBlcj1mdW5jdGlvbih1KXtyZXR1cm4gMTt9O1RIUkVFLlR1YmVHZW9tZXRyeS5TaW51c29pZGFsVGFwZXI9ZnVuY3Rpb24odSl7cmV0dXJuIE1hdGguc2luKE1hdGguUEkqdSk7fTsvLyBGb3IgY29tcHV0aW5nIG9mIEZyZW5ldCBmcmFtZXMsIGV4cG9zaW5nIHRoZSB0YW5nZW50cywgbm9ybWFscyBhbmQgYmlub3JtYWxzIHRoZSBzcGxpbmVcblRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXM9ZnVuY3Rpb24ocGF0aCxzZWdtZW50cyxjbG9zZWQpe3ZhciBub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoKSx0YW5nZW50cz1bXSxub3JtYWxzPVtdLGJpbm9ybWFscz1bXSx2ZWM9bmV3IFRIUkVFLlZlY3RvcjMoKSxtYXQ9bmV3IFRIUkVFLk1hdHJpeDQoKSxudW1wb2ludHM9c2VnbWVudHMrMSx0aGV0YSxzbWFsbGVzdCx0eCx0eSx0eixpLHU7Ly8gZXhwb3NlIGludGVybmFsc1xudGhpcy50YW5nZW50cz10YW5nZW50czt0aGlzLm5vcm1hbHM9bm9ybWFsczt0aGlzLmJpbm9ybWFscz1iaW5vcm1hbHM7Ly8gY29tcHV0ZSB0aGUgdGFuZ2VudCB2ZWN0b3JzIGZvciBlYWNoIHNlZ21lbnQgb24gdGhlIHBhdGhcbmZvcihpPTA7aTxudW1wb2ludHM7aSsrKXt1PWkvKG51bXBvaW50cy0xKTt0YW5nZW50c1tpXT1wYXRoLmdldFRhbmdlbnRBdCh1KTt0YW5nZW50c1tpXS5ub3JtYWxpemUoKTt9aW5pdGlhbE5vcm1hbDMoKTsvKlxyXG5cdGZ1bmN0aW9uIGluaXRpYWxOb3JtYWwxKGxhc3RCaW5vcm1hbCkge1xyXG5cdFx0Ly8gZml4ZWQgc3RhcnQgYmlub3JtYWwuIEhhcyBkYW5nZXJzIG9mIDAgdmVjdG9yc1xyXG5cdFx0bm9ybWFsc1sgMCBdID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdGJpbm9ybWFsc1sgMCBdID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdGlmIChsYXN0Qmlub3JtYWw9PT11bmRlZmluZWQpIGxhc3RCaW5vcm1hbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCAwLCAwLCAxICk7XHJcblx0XHRub3JtYWxzWyAwIF0uY3Jvc3NWZWN0b3JzKCBsYXN0Qmlub3JtYWwsIHRhbmdlbnRzWyAwIF0gKS5ub3JtYWxpemUoKTtcclxuXHRcdGJpbm9ybWFsc1sgMCBdLmNyb3NzVmVjdG9ycyggdGFuZ2VudHNbIDAgXSwgbm9ybWFsc1sgMCBdICkubm9ybWFsaXplKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBpbml0aWFsTm9ybWFsMigpIHtcclxuXHJcblx0XHQvLyBUaGlzIHVzZXMgdGhlIEZyZW5ldC1TZXJyZXQgZm9ybXVsYSBmb3IgZGVyaXZpbmcgYmlub3JtYWxcclxuXHRcdHZhciB0MiA9IHBhdGguZ2V0VGFuZ2VudEF0KCBlcHNpbG9uICk7XHJcblxyXG5cdFx0bm9ybWFsc1sgMCBdID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5zdWJWZWN0b3JzKCB0MiwgdGFuZ2VudHNbIDAgXSApLm5vcm1hbGl6ZSgpO1xyXG5cdFx0Ymlub3JtYWxzWyAwIF0gPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyggdGFuZ2VudHNbIDAgXSwgbm9ybWFsc1sgMCBdICk7XHJcblxyXG5cdFx0bm9ybWFsc1sgMCBdLmNyb3NzVmVjdG9ycyggYmlub3JtYWxzWyAwIF0sIHRhbmdlbnRzWyAwIF0gKS5ub3JtYWxpemUoKTsgLy8gbGFzdCBiaW5vcm1hbCB4IHRhbmdlbnRcclxuXHRcdGJpbm9ybWFsc1sgMCBdLmNyb3NzVmVjdG9ycyggdGFuZ2VudHNbIDAgXSwgbm9ybWFsc1sgMCBdICkubm9ybWFsaXplKCk7XHJcblxyXG5cdH1cclxuXHQqL2Z1bmN0aW9uIGluaXRpYWxOb3JtYWwzKCl7Ly8gc2VsZWN0IGFuIGluaXRpYWwgbm9ybWFsIHZlY3RvciBwZXJwZW5kaWN1bGFyIHRvIHRoZSBmaXJzdCB0YW5nZW50IHZlY3Rvcixcbi8vIGFuZCBpbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBzbWFsbGVzdCB0YW5nZW50IHh5eiBjb21wb25lbnRcbm5vcm1hbHNbMF09bmV3IFRIUkVFLlZlY3RvcjMoKTtiaW5vcm1hbHNbMF09bmV3IFRIUkVFLlZlY3RvcjMoKTtzbWFsbGVzdD1OdW1iZXIuTUFYX1ZBTFVFO3R4PU1hdGguYWJzKHRhbmdlbnRzWzBdLngpO3R5PU1hdGguYWJzKHRhbmdlbnRzWzBdLnkpO3R6PU1hdGguYWJzKHRhbmdlbnRzWzBdLnopO2lmKHR4PD1zbWFsbGVzdCl7c21hbGxlc3Q9dHg7bm9ybWFsLnNldCgxLDAsMCk7fWlmKHR5PD1zbWFsbGVzdCl7c21hbGxlc3Q9dHk7bm9ybWFsLnNldCgwLDEsMCk7fWlmKHR6PD1zbWFsbGVzdCl7bm9ybWFsLnNldCgwLDAsMSk7fXZlYy5jcm9zc1ZlY3RvcnModGFuZ2VudHNbMF0sbm9ybWFsKS5ub3JtYWxpemUoKTtub3JtYWxzWzBdLmNyb3NzVmVjdG9ycyh0YW5nZW50c1swXSx2ZWMpO2Jpbm9ybWFsc1swXS5jcm9zc1ZlY3RvcnModGFuZ2VudHNbMF0sbm9ybWFsc1swXSk7fS8vIGNvbXB1dGUgdGhlIHNsb3dseS12YXJ5aW5nIG5vcm1hbCBhbmQgYmlub3JtYWwgdmVjdG9ycyBmb3IgZWFjaCBzZWdtZW50IG9uIHRoZSBwYXRoXG5mb3IoaT0xO2k8bnVtcG9pbnRzO2krKyl7bm9ybWFsc1tpXT1ub3JtYWxzW2ktMV0uY2xvbmUoKTtiaW5vcm1hbHNbaV09Ymlub3JtYWxzW2ktMV0uY2xvbmUoKTt2ZWMuY3Jvc3NWZWN0b3JzKHRhbmdlbnRzW2ktMV0sdGFuZ2VudHNbaV0pO2lmKHZlYy5sZW5ndGgoKT5OdW1iZXIuRVBTSUxPTil7dmVjLm5vcm1hbGl6ZSgpO3RoZXRhPU1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKHRhbmdlbnRzW2ktMV0uZG90KHRhbmdlbnRzW2ldKSwtMSwxKSk7Ly8gY2xhbXAgZm9yIGZsb2F0aW5nIHB0IGVycm9yc1xubm9ybWFsc1tpXS5hcHBseU1hdHJpeDQobWF0Lm1ha2VSb3RhdGlvbkF4aXModmVjLHRoZXRhKSk7fWJpbm9ybWFsc1tpXS5jcm9zc1ZlY3RvcnModGFuZ2VudHNbaV0sbm9ybWFsc1tpXSk7fS8vIGlmIHRoZSBjdXJ2ZSBpcyBjbG9zZWQsIHBvc3Rwcm9jZXNzIHRoZSB2ZWN0b3JzIHNvIHRoZSBmaXJzdCBhbmQgbGFzdCBub3JtYWwgdmVjdG9ycyBhcmUgdGhlIHNhbWVcbmlmKGNsb3NlZCl7dGhldGE9TWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAobm9ybWFsc1swXS5kb3Qobm9ybWFsc1tudW1wb2ludHMtMV0pLC0xLDEpKTt0aGV0YS89bnVtcG9pbnRzLTE7aWYodGFuZ2VudHNbMF0uZG90KHZlYy5jcm9zc1ZlY3RvcnMobm9ybWFsc1swXSxub3JtYWxzW251bXBvaW50cy0xXSkpPjApe3RoZXRhPS10aGV0YTt9Zm9yKGk9MTtpPG51bXBvaW50cztpKyspey8vIHR3aXN0IGEgbGl0dGxlLi4uXG5ub3JtYWxzW2ldLmFwcGx5TWF0cml4NChtYXQubWFrZVJvdGF0aW9uQXhpcyh0YW5nZW50c1tpXSx0aGV0YSppKSk7Ymlub3JtYWxzW2ldLmNyb3NzVmVjdG9ycyh0YW5nZW50c1tpXSxub3JtYWxzW2ldKTt9fX07Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvUG9seWhlZHJvbkdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBjbG9ja3dvcmtnZWVrIC8gaHR0cHM6Ly9naXRodWIuY29tL2Nsb2Nrd29ya2dlZWtcclxuICogQGF1dGhvciB0aW1vdGh5cHJhdGxleSAvIGh0dHBzOi8vZ2l0aHViLmNvbS90aW1vdGh5cHJhdGxleVxyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuKi9USFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24odmVydGljZXMsaW5kaWNlcyxyYWRpdXMsZGV0YWlsKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nUG9seWhlZHJvbkdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOnZlcnRpY2VzLGluZGljZXM6aW5kaWNlcyxyYWRpdXM6cmFkaXVzLGRldGFpbDpkZXRhaWx9O3JhZGl1cz1yYWRpdXN8fDE7ZGV0YWlsPWRldGFpbHx8MDt2YXIgdGhhdD10aGlzO2Zvcih2YXIgaT0wLGw9dmVydGljZXMubGVuZ3RoO2k8bDtpKz0zKXtwcmVwYXJlKG5ldyBUSFJFRS5WZWN0b3IzKHZlcnRpY2VzW2ldLHZlcnRpY2VzW2krMV0sdmVydGljZXNbaSsyXSkpO312YXIgcD10aGlzLnZlcnRpY2VzO3ZhciBmYWNlcz1bXTtmb3IodmFyIGk9MCxqPTAsbD1pbmRpY2VzLmxlbmd0aDtpPGw7aSs9MyxqKyspe3ZhciB2MT1wW2luZGljZXNbaV1dO3ZhciB2Mj1wW2luZGljZXNbaSsxXV07dmFyIHYzPXBbaW5kaWNlc1tpKzJdXTtmYWNlc1tqXT1uZXcgVEhSRUUuRmFjZTModjEuaW5kZXgsdjIuaW5kZXgsdjMuaW5kZXgsW3YxLmNsb25lKCksdjIuY2xvbmUoKSx2My5jbG9uZSgpXSx1bmRlZmluZWQsaik7fXZhciBjZW50cm9pZD1uZXcgVEhSRUUuVmVjdG9yMygpO2Zvcih2YXIgaT0wLGw9ZmFjZXMubGVuZ3RoO2k8bDtpKyspe3N1YmRpdmlkZShmYWNlc1tpXSxkZXRhaWwpO30vLyBIYW5kbGUgY2FzZSB3aGVuIGZhY2Ugc3RyYWRkbGVzIHRoZSBzZWFtXG5mb3IodmFyIGk9MCxsPXRoaXMuZmFjZVZlcnRleFV2c1swXS5sZW5ndGg7aTxsO2krKyl7dmFyIHV2cz10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1baV07dmFyIHgwPXV2c1swXS54O3ZhciB4MT11dnNbMV0ueDt2YXIgeDI9dXZzWzJdLng7dmFyIG1heD1NYXRoLm1heCh4MCx4MSx4Mik7dmFyIG1pbj1NYXRoLm1pbih4MCx4MSx4Mik7aWYobWF4PjAuOSYmbWluPDAuMSl7Ly8gMC45IGlzIHNvbWV3aGF0IGFyYml0cmFyeVxuaWYoeDA8MC4yKXV2c1swXS54Kz0xO2lmKHgxPDAuMil1dnNbMV0ueCs9MTtpZih4MjwwLjIpdXZzWzJdLngrPTE7fX0vLyBBcHBseSByYWRpdXNcbmZvcih2YXIgaT0wLGw9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7aTxsO2krKyl7dGhpcy52ZXJ0aWNlc1tpXS5tdWx0aXBseVNjYWxhcihyYWRpdXMpO30vLyBNZXJnZSB2ZXJ0aWNlc1xudGhpcy5tZXJnZVZlcnRpY2VzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMoKSxyYWRpdXMpOy8vIFByb2plY3QgdmVjdG9yIG9udG8gc3BoZXJlJ3Mgc3VyZmFjZVxuZnVuY3Rpb24gcHJlcGFyZSh2ZWN0b3Ipe3ZhciB2ZXJ0ZXg9dmVjdG9yLm5vcm1hbGl6ZSgpLmNsb25lKCk7dmVydGV4LmluZGV4PXRoYXQudmVydGljZXMucHVzaCh2ZXJ0ZXgpLTE7Ly8gVGV4dHVyZSBjb29yZHMgYXJlIGVxdWl2YWxlbnQgdG8gbWFwIGNvb3JkcywgY2FsY3VsYXRlIGFuZ2xlIGFuZCBjb252ZXJ0IHRvIGZyYWN0aW9uIG9mIGEgY2lyY2xlLlxudmFyIHU9YXppbXV0aCh2ZWN0b3IpLzIvTWF0aC5QSSswLjU7dmFyIHY9aW5jbGluYXRpb24odmVjdG9yKS9NYXRoLlBJKzAuNTt2ZXJ0ZXgudXY9bmV3IFRIUkVFLlZlY3RvcjIodSwxLXYpO3JldHVybiB2ZXJ0ZXg7fS8vIEFwcHJveGltYXRlIGEgY3VydmVkIGZhY2Ugd2l0aCByZWN1cnNpdmVseSBzdWItZGl2aWRlZCB0cmlhbmdsZXMuXG5mdW5jdGlvbiBtYWtlKHYxLHYyLHYzLG1hdGVyaWFsSW5kZXgpe3ZhciBmYWNlPW5ldyBUSFJFRS5GYWNlMyh2MS5pbmRleCx2Mi5pbmRleCx2My5pbmRleCxbdjEuY2xvbmUoKSx2Mi5jbG9uZSgpLHYzLmNsb25lKCldLHVuZGVmaW5lZCxtYXRlcmlhbEluZGV4KTt0aGF0LmZhY2VzLnB1c2goZmFjZSk7Y2VudHJvaWQuY29weSh2MSkuYWRkKHYyKS5hZGQodjMpLmRpdmlkZVNjYWxhcigzKTt2YXIgYXppPWF6aW11dGgoY2VudHJvaWQpO3RoYXQuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtjb3JyZWN0VVYodjEudXYsdjEsYXppKSxjb3JyZWN0VVYodjIudXYsdjIsYXppKSxjb3JyZWN0VVYodjMudXYsdjMsYXppKV0pO30vLyBBbmFseXRpY2FsbHkgc3ViZGl2aWRlIGEgZmFjZSB0byB0aGUgcmVxdWlyZWQgZGV0YWlsIGxldmVsLlxuZnVuY3Rpb24gc3ViZGl2aWRlKGZhY2UsZGV0YWlsKXt2YXIgY29scz1NYXRoLnBvdygyLGRldGFpbCk7dmFyIGE9cHJlcGFyZSh0aGF0LnZlcnRpY2VzW2ZhY2UuYV0pO3ZhciBiPXByZXBhcmUodGhhdC52ZXJ0aWNlc1tmYWNlLmJdKTt2YXIgYz1wcmVwYXJlKHRoYXQudmVydGljZXNbZmFjZS5jXSk7dmFyIHY9W107dmFyIG1hdGVyaWFsSW5kZXg9ZmFjZS5tYXRlcmlhbEluZGV4Oy8vIENvbnN0cnVjdCBhbGwgb2YgdGhlIHZlcnRpY2VzIGZvciB0aGlzIHN1YmRpdmlzaW9uLlxuZm9yKHZhciBpPTA7aTw9Y29scztpKyspe3ZbaV09W107dmFyIGFqPXByZXBhcmUoYS5jbG9uZSgpLmxlcnAoYyxpL2NvbHMpKTt2YXIgYmo9cHJlcGFyZShiLmNsb25lKCkubGVycChjLGkvY29scykpO3ZhciByb3dzPWNvbHMtaTtmb3IodmFyIGo9MDtqPD1yb3dzO2orKyl7aWYoaj09PTAmJmk9PT1jb2xzKXt2W2ldW2pdPWFqO31lbHNle3ZbaV1bal09cHJlcGFyZShhai5jbG9uZSgpLmxlcnAoYmosai9yb3dzKSk7fX19Ly8gQ29uc3RydWN0IGFsbCBvZiB0aGUgZmFjZXMuXG5mb3IodmFyIGk9MDtpPGNvbHM7aSsrKXtmb3IodmFyIGo9MDtqPDIqKGNvbHMtaSktMTtqKyspe3ZhciBrPU1hdGguZmxvb3Ioai8yKTtpZihqJTI9PT0wKXttYWtlKHZbaV1baysxXSx2W2krMV1ba10sdltpXVtrXSxtYXRlcmlhbEluZGV4KTt9ZWxzZXttYWtlKHZbaV1baysxXSx2W2krMV1baysxXSx2W2krMV1ba10sbWF0ZXJpYWxJbmRleCk7fX19fS8vIEFuZ2xlIGFyb3VuZCB0aGUgWSBheGlzLCBjb3VudGVyLWNsb2Nrd2lzZSB3aGVuIGxvb2tpbmcgZnJvbSBhYm92ZS5cbmZ1bmN0aW9uIGF6aW11dGgodmVjdG9yKXtyZXR1cm4gTWF0aC5hdGFuMih2ZWN0b3IueiwtdmVjdG9yLngpO30vLyBBbmdsZSBhYm92ZSB0aGUgWFogcGxhbmUuXG5mdW5jdGlvbiBpbmNsaW5hdGlvbih2ZWN0b3Ipe3JldHVybiBNYXRoLmF0YW4yKC12ZWN0b3IueSxNYXRoLnNxcnQodmVjdG9yLngqdmVjdG9yLngrdmVjdG9yLnoqdmVjdG9yLnopKTt9Ly8gVGV4dHVyZSBmaXhpbmcgaGVscGVyLiBTcGhlcmVzIGhhdmUgc29tZSBvZGQgYmVoYXZpb3Vycy5cbmZ1bmN0aW9uIGNvcnJlY3RVVih1dix2ZWN0b3IsYXppbXV0aCl7aWYoYXppbXV0aDwwJiZ1di54PT09MSl1dj1uZXcgVEhSRUUuVmVjdG9yMih1di54LTEsdXYueSk7aWYodmVjdG9yLng9PT0wJiZ2ZWN0b3Iuej09PTApdXY9bmV3IFRIUkVFLlZlY3RvcjIoYXppbXV0aC8yL01hdGguUEkrMC41LHV2LnkpO3JldHVybiB1di5jbG9uZSgpO319O1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0RvZGVjYWhlZHJvbkdlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciBBYmUgUGF6b3MgLyBodHRwczovL2hhbW9pZC5jb21cclxuICovVEhSRUUuRG9kZWNhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLGRldGFpbCl7dmFyIHQ9KDErTWF0aC5zcXJ0KDUpKS8yO3ZhciByPTEvdDt2YXIgdmVydGljZXM9Wy8vICjCsTEsIMKxMSwgwrExKVxuLTEsLTEsLTEsLTEsLTEsMSwtMSwxLC0xLC0xLDEsMSwxLC0xLC0xLDEsLTEsMSwxLDEsLTEsMSwxLDEsLy8gKDAsIMKxMS/PhiwgwrHPhilcbjAsLXIsLXQsMCwtcix0LDAsciwtdCwwLHIsdCwvLyAowrExL8+GLCDCsc+GLCAwKVxuLXIsLXQsMCwtcix0LDAsciwtdCwwLHIsdCwwLC8vICjCsc+GLCAwLCDCsTEvz4YpXG4tdCwwLC1yLHQsMCwtciwtdCwwLHIsdCwwLHJdO3ZhciBpbmRpY2VzPVszLDExLDcsMyw3LDE1LDMsMTUsMTMsNywxOSwxNyw3LDE3LDYsNyw2LDE1LDE3LDQsOCwxNyw4LDEwLDE3LDEwLDYsOCwwLDE2LDgsMTYsMiw4LDIsMTAsMCwxMiwxLDAsMSwxOCwwLDE4LDE2LDYsMTAsMiw2LDIsMTMsNiwxMywxNSwyLDE2LDE4LDIsMTgsMywyLDMsMTMsMTgsMSw5LDE4LDksMTEsMTgsMTEsMyw0LDE0LDEyLDQsMTIsMCw0LDAsOCwxMSw5LDUsMTEsNSwxOSwxMSwxOSw3LDE5LDUsMTQsMTksMTQsNCwxOSw0LDE3LDEsMTIsMTQsMSwxNCw1LDEsNSw5XTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLHZlcnRpY2VzLGluZGljZXMscmFkaXVzLGRldGFpbCk7dGhpcy50eXBlPSdEb2RlY2FoZWRyb25HZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6cmFkaXVzLGRldGFpbDpkZXRhaWx9O307VEhSRUUuRG9kZWNhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuRG9kZWNhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkRvZGVjYWhlZHJvbkdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL0ljb3NhaGVkcm9uR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHRpbW90aHlwcmF0bGV5IC8gaHR0cHM6Ly9naXRodWIuY29tL3RpbW90aHlwcmF0bGV5XHJcbiAqL1RIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLGRldGFpbCl7dmFyIHQ9KDErTWF0aC5zcXJ0KDUpKS8yO3ZhciB2ZXJ0aWNlcz1bLTEsdCwwLDEsdCwwLC0xLC10LDAsMSwtdCwwLDAsLTEsdCwwLDEsdCwwLC0xLC10LDAsMSwtdCx0LDAsLTEsdCwwLDEsLXQsMCwtMSwtdCwwLDFdO3ZhciBpbmRpY2VzPVswLDExLDUsMCw1LDEsMCwxLDcsMCw3LDEwLDAsMTAsMTEsMSw1LDksNSwxMSw0LDExLDEwLDIsMTAsNyw2LDcsMSw4LDMsOSw0LDMsNCwyLDMsMiw2LDMsNiw4LDMsOCw5LDQsOSw1LDIsNCwxMSw2LDIsMTAsOCw2LDcsOSw4LDFdO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsdmVydGljZXMsaW5kaWNlcyxyYWRpdXMsZGV0YWlsKTt0aGlzLnR5cGU9J0ljb3NhaGVkcm9uR2VvbWV0cnknO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOnJhZGl1cyxkZXRhaWw6ZGV0YWlsfTt9O1RIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9PY3RhaGVkcm9uR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHRpbW90aHlwcmF0bGV5IC8gaHR0cHM6Ly9naXRodWIuY29tL3RpbW90aHlwcmF0bGV5XHJcbiAqL1RIUkVFLk9jdGFoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihyYWRpdXMsZGV0YWlsKXt2YXIgdmVydGljZXM9WzEsMCwwLC0xLDAsMCwwLDEsMCwwLC0xLDAsMCwwLDEsMCwwLC0xXTt2YXIgaW5kaWNlcz1bMCwyLDQsMCw0LDMsMCwzLDUsMCw1LDIsMSwyLDUsMSw1LDMsMSwzLDQsMSw0LDJdO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsdmVydGljZXMsaW5kaWNlcyxyYWRpdXMsZGV0YWlsKTt0aGlzLnR5cGU9J09jdGFoZWRyb25HZW9tZXRyeSc7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6cmFkaXVzLGRldGFpbDpkZXRhaWx9O307VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLk9jdGFoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5Oy8vIEZpbGU6c3JjL2V4dHJhcy9nZW9tZXRyaWVzL1RldHJhaGVkcm9uR2VvbWV0cnkuanNcbi8qKlxyXG4gKiBAYXV0aG9yIHRpbW90aHlwcmF0bGV5IC8gaHR0cHM6Ly9naXRodWIuY29tL3RpbW90aHlwcmF0bGV5XHJcbiAqL1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24ocmFkaXVzLGRldGFpbCl7dmFyIHZlcnRpY2VzPVsxLDEsMSwtMSwtMSwxLC0xLDEsLTEsMSwtMSwtMV07dmFyIGluZGljZXM9WzIsMSwwLDAsMywyLDEsMywwLDIsMywxXTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLHZlcnRpY2VzLGluZGljZXMscmFkaXVzLGRldGFpbCk7dGhpcy50eXBlPSdUZXRyYWhlZHJvbkdlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czpyYWRpdXMsZGV0YWlsOmRldGFpbH07fTtUSFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnk7Ly8gRmlsZTpzcmMvZXh0cmFzL2dlb21ldHJpZXMvUGFyYW1ldHJpY0dlb21ldHJ5LmpzXG4vKipcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cHM6Ly9naXRodWIuY29tL3p6ODVcclxuICogUGFyYW1ldHJpYyBTdXJmYWNlcyBHZW9tZXRyeVxyXG4gKiBiYXNlZCBvbiB0aGUgYnJpbGxpYW50IGFydGljbGUgYnkgQHByaWRlb3V0IGh0dHA6Ly9wcmlkZW91dC5uZXQvYmxvZy8/cD00NFxyXG4gKlxyXG4gKiBuZXcgVEhSRUUuUGFyYW1ldHJpY0dlb21ldHJ5KCBwYXJhbWV0cmljRnVuY3Rpb24sIHVTZWdtZW50cywgeVNlZ2VtZW50cyApO1xyXG4gKlxyXG4gKi9USFJFRS5QYXJhbWV0cmljR2VvbWV0cnk9ZnVuY3Rpb24oZnVuYyxzbGljZXMsc3RhY2tzKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT0nUGFyYW1ldHJpY0dlb21ldHJ5Jzt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6ZnVuYyxzbGljZXM6c2xpY2VzLHN0YWNrczpzdGFja3N9O3ZhciB2ZXJ0cz10aGlzLnZlcnRpY2VzO3ZhciBmYWNlcz10aGlzLmZhY2VzO3ZhciB1dnM9dGhpcy5mYWNlVmVydGV4VXZzWzBdO3ZhciBpLGoscDt2YXIgdSx2O3ZhciBzbGljZUNvdW50PXNsaWNlcysxO2ZvcihpPTA7aTw9c3RhY2tzO2krKyl7dj1pL3N0YWNrcztmb3Ioaj0wO2o8PXNsaWNlcztqKyspe3U9ai9zbGljZXM7cD1mdW5jKHUsdik7dmVydHMucHVzaChwKTt9fXZhciBhLGIsYyxkO3ZhciB1dmEsdXZiLHV2Yyx1dmQ7Zm9yKGk9MDtpPHN0YWNrcztpKyspe2ZvcihqPTA7ajxzbGljZXM7aisrKXthPWkqc2xpY2VDb3VudCtqO2I9aSpzbGljZUNvdW50K2orMTtjPShpKzEpKnNsaWNlQ291bnQraisxO2Q9KGkrMSkqc2xpY2VDb3VudCtqO3V2YT1uZXcgVEhSRUUuVmVjdG9yMihqL3NsaWNlcyxpL3N0YWNrcyk7dXZiPW5ldyBUSFJFRS5WZWN0b3IyKChqKzEpL3NsaWNlcyxpL3N0YWNrcyk7dXZjPW5ldyBUSFJFRS5WZWN0b3IyKChqKzEpL3NsaWNlcywoaSsxKS9zdGFja3MpO3V2ZD1uZXcgVEhSRUUuVmVjdG9yMihqL3NsaWNlcywoaSsxKS9zdGFja3MpO2ZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsYixkKSk7dXZzLnB1c2goW3V2YSx1dmIsdXZkXSk7ZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYixjLGQpKTt1dnMucHVzaChbdXZiLmNsb25lKCksdXZjLHV2ZC5jbG9uZSgpXSk7fX0vLyBjb25zb2xlLmxvZyh0aGlzKTtcbi8vIG1hZ2ljIGJ1bGxldFxuLy8gdmFyIGRpZmYgPSB0aGlzLm1lcmdlVmVydGljZXMoKTtcbi8vIGNvbnNvbGUubG9nKCdyZW1vdmVkICcsIGRpZmYsICcgdmVydGljZXMgYnkgbWVyZ2luZycpO1xudGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7fTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvZ2VvbWV0cmllcy9XaXJlZnJhbWVHZW9tZXRyeS5qc1xuLyoqXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXHJcbiAqL1RIUkVFLldpcmVmcmFtZUdlb21ldHJ5PWZ1bmN0aW9uKGdlb21ldHJ5KXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3ZhciBlZGdlPVswLDBdLGhhc2g9e307ZnVuY3Rpb24gc29ydEZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYjt9dmFyIGtleXM9WydhJywnYicsJ2MnXTtpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXt2YXIgdmVydGljZXM9Z2VvbWV0cnkudmVydGljZXM7dmFyIGZhY2VzPWdlb21ldHJ5LmZhY2VzO3ZhciBudW1FZGdlcz0wOy8vIGFsbG9jYXRlIG1heGltYWwgc2l6ZVxudmFyIGVkZ2VzPW5ldyBVaW50MzJBcnJheSg2KmZhY2VzLmxlbmd0aCk7Zm9yKHZhciBpPTAsbD1mYWNlcy5sZW5ndGg7aTxsO2krKyl7dmFyIGZhY2U9ZmFjZXNbaV07Zm9yKHZhciBqPTA7ajwzO2orKyl7ZWRnZVswXT1mYWNlW2tleXNbal1dO2VkZ2VbMV09ZmFjZVtrZXlzWyhqKzEpJTNdXTtlZGdlLnNvcnQoc29ydEZ1bmN0aW9uKTt2YXIga2V5PWVkZ2UudG9TdHJpbmcoKTtpZihoYXNoW2tleV09PT11bmRlZmluZWQpe2VkZ2VzWzIqbnVtRWRnZXNdPWVkZ2VbMF07ZWRnZXNbMipudW1FZGdlcysxXT1lZGdlWzFdO2hhc2hba2V5XT10cnVlO251bUVkZ2VzKys7fX19dmFyIGNvb3Jkcz1uZXcgRmxvYXQzMkFycmF5KG51bUVkZ2VzKjIqMyk7Zm9yKHZhciBpPTAsbD1udW1FZGdlcztpPGw7aSsrKXtmb3IodmFyIGo9MDtqPDI7aisrKXt2YXIgdmVydGV4PXZlcnRpY2VzW2VkZ2VzWzIqaStqXV07dmFyIGluZGV4PTYqaSszKmo7Y29vcmRzW2luZGV4KzBdPXZlcnRleC54O2Nvb3Jkc1tpbmRleCsxXT12ZXJ0ZXgueTtjb29yZHNbaW5kZXgrMl09dmVydGV4Lno7fX10aGlzLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoY29vcmRzLDMpKTt9ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXtpZihnZW9tZXRyeS5pbmRleCE9PW51bGwpey8vIEluZGV4ZWQgQnVmZmVyR2VvbWV0cnlcbnZhciBpbmRpY2VzPWdlb21ldHJ5LmluZGV4LmFycmF5O3ZhciB2ZXJ0aWNlcz1nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZhciBncm91cHM9Z2VvbWV0cnkuZ3JvdXBzO3ZhciBudW1FZGdlcz0wO2lmKGdyb3Vwcy5sZW5ndGg9PT0wKXtnZW9tZXRyeS5hZGRHcm91cCgwLGluZGljZXMubGVuZ3RoKTt9Ly8gYWxsb2NhdGUgbWF4aW1hbCBzaXplXG52YXIgZWRnZXM9bmV3IFVpbnQzMkFycmF5KDIqaW5kaWNlcy5sZW5ndGgpO2Zvcih2YXIgbz0wLG9sPWdyb3Vwcy5sZW5ndGg7bzxvbDsrK28pe3ZhciBncm91cD1ncm91cHNbb107dmFyIHN0YXJ0PWdyb3VwLnN0YXJ0O3ZhciBjb3VudD1ncm91cC5jb3VudDtmb3IodmFyIGk9c3RhcnQsaWw9c3RhcnQrY291bnQ7aTxpbDtpKz0zKXtmb3IodmFyIGo9MDtqPDM7aisrKXtlZGdlWzBdPWluZGljZXNbaStqXTtlZGdlWzFdPWluZGljZXNbaSsoaisxKSUzXTtlZGdlLnNvcnQoc29ydEZ1bmN0aW9uKTt2YXIga2V5PWVkZ2UudG9TdHJpbmcoKTtpZihoYXNoW2tleV09PT11bmRlZmluZWQpe2VkZ2VzWzIqbnVtRWRnZXNdPWVkZ2VbMF07ZWRnZXNbMipudW1FZGdlcysxXT1lZGdlWzFdO2hhc2hba2V5XT10cnVlO251bUVkZ2VzKys7fX19fXZhciBjb29yZHM9bmV3IEZsb2F0MzJBcnJheShudW1FZGdlcyoyKjMpO2Zvcih2YXIgaT0wLGw9bnVtRWRnZXM7aTxsO2krKyl7Zm9yKHZhciBqPTA7ajwyO2orKyl7dmFyIGluZGV4PTYqaSszKmo7dmFyIGluZGV4Mj1lZGdlc1syKmkral07Y29vcmRzW2luZGV4KzBdPXZlcnRpY2VzLmdldFgoaW5kZXgyKTtjb29yZHNbaW5kZXgrMV09dmVydGljZXMuZ2V0WShpbmRleDIpO2Nvb3Jkc1tpbmRleCsyXT12ZXJ0aWNlcy5nZXRaKGluZGV4Mik7fX10aGlzLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoY29vcmRzLDMpKTt9ZWxzZXsvLyBub24taW5kZXhlZCBCdWZmZXJHZW9tZXRyeVxudmFyIHZlcnRpY2VzPWdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7dmFyIG51bUVkZ2VzPXZlcnRpY2VzLmxlbmd0aC8zO3ZhciBudW1UcmlzPW51bUVkZ2VzLzM7dmFyIGNvb3Jkcz1uZXcgRmxvYXQzMkFycmF5KG51bUVkZ2VzKjIqMyk7Zm9yKHZhciBpPTAsbD1udW1UcmlzO2k8bDtpKyspe2Zvcih2YXIgaj0wO2o8MztqKyspe3ZhciBpbmRleD0xOCppKzYqajt2YXIgaW5kZXgxPTkqaSszKmo7Y29vcmRzW2luZGV4KzBdPXZlcnRpY2VzW2luZGV4MV07Y29vcmRzW2luZGV4KzFdPXZlcnRpY2VzW2luZGV4MSsxXTtjb29yZHNbaW5kZXgrMl09dmVydGljZXNbaW5kZXgxKzJdO3ZhciBpbmRleDI9OSppKzMqKChqKzEpJTMpO2Nvb3Jkc1tpbmRleCszXT12ZXJ0aWNlc1tpbmRleDJdO2Nvb3Jkc1tpbmRleCs0XT12ZXJ0aWNlc1tpbmRleDIrMV07Y29vcmRzW2luZGV4KzVdPXZlcnRpY2VzW2luZGV4MisyXTt9fXRoaXMuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjb29yZHMsMykpO319fTtUSFJFRS5XaXJlZnJhbWVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLldpcmVmcmFtZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5XaXJlZnJhbWVHZW9tZXRyeTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9BeGlzSGVscGVyLmpzXG4vKipcclxuICogQGF1dGhvciBzcm91Y2hlcmF5IC8gaHR0cDovL3Nyb3VjaGVyYXkub3JnL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5BeGlzSGVscGVyPWZ1bmN0aW9uKHNpemUpe3NpemU9c2l6ZXx8MTt2YXIgdmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShbMCwwLDAsc2l6ZSwwLDAsMCwwLDAsMCxzaXplLDAsMCwwLDAsMCwwLHNpemVdKTt2YXIgY29sb3JzPW5ldyBGbG9hdDMyQXJyYXkoWzEsMCwwLDEsMC42LDAsMCwxLDAsMC42LDEsMCwwLDAsMSwwLDAuNiwxXSk7dmFyIGdlb21ldHJ5PW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO2dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodmVydGljZXMsMykpO2dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnY29sb3InLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoY29sb3JzLDMpKTt2YXIgbWF0ZXJpYWw9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzfSk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxnZW9tZXRyeSxtYXRlcmlhbCk7fTtUSFJFRS5BeGlzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLkF4aXNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkF4aXNIZWxwZXI7Ly8gRmlsZTpzcmMvZXh0cmFzL2hlbHBlcnMvQXJyb3dIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL2dpdGh1Yi5jb20veno4NVxyXG4gKiBAYXV0aG9yIGJob3VzdG9uIC8gaHR0cDovL2NsYXJhLmlvXHJcbiAqXHJcbiAqIENyZWF0ZXMgYW4gYXJyb3cgZm9yIHZpc3VhbGl6aW5nIGRpcmVjdGlvbnNcclxuICpcclxuICogUGFyYW1ldGVyczpcclxuICogIGRpciAtIFZlY3RvcjNcclxuICogIG9yaWdpbiAtIFZlY3RvcjNcclxuICogIGxlbmd0aCAtIE51bWJlclxyXG4gKiAgY29sb3IgLSBjb2xvciBpbiBoZXggdmFsdWVcclxuICogIGhlYWRMZW5ndGggLSBOdW1iZXJcclxuICogIGhlYWRXaWR0aCAtIE51bWJlclxyXG4gKi9USFJFRS5BcnJvd0hlbHBlcj1mdW5jdGlvbigpe3ZhciBsaW5lR2VvbWV0cnk9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7bGluZUdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKFswLDAsMCwwLDEsMF0sMykpO3ZhciBjb25lR2VvbWV0cnk9bmV3IFRIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkoMCwwLjUsMSw1LDEpO2NvbmVHZW9tZXRyeS50cmFuc2xhdGUoMCwtMC41LDApO3JldHVybiBmdW5jdGlvbiBBcnJvd0hlbHBlcihkaXIsb3JpZ2luLGxlbmd0aCxjb2xvcixoZWFkTGVuZ3RoLGhlYWRXaWR0aCl7Ly8gZGlyIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZFxuVEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTtpZihjb2xvcj09PXVuZGVmaW5lZCljb2xvcj0weGZmZmYwMDtpZihsZW5ndGg9PT11bmRlZmluZWQpbGVuZ3RoPTE7aWYoaGVhZExlbmd0aD09PXVuZGVmaW5lZCloZWFkTGVuZ3RoPTAuMipsZW5ndGg7aWYoaGVhZFdpZHRoPT09dW5kZWZpbmVkKWhlYWRXaWR0aD0wLjIqaGVhZExlbmd0aDt0aGlzLnBvc2l0aW9uLmNvcHkob3JpZ2luKTt0aGlzLmxpbmU9bmV3IFRIUkVFLkxpbmUobGluZUdlb21ldHJ5LG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6Y29sb3J9KSk7dGhpcy5saW5lLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5hZGQodGhpcy5saW5lKTt0aGlzLmNvbmU9bmV3IFRIUkVFLk1lc2goY29uZUdlb21ldHJ5LG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6Y29sb3J9KSk7dGhpcy5jb25lLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnNldERpcmVjdGlvbihkaXIpO3RoaXMuc2V0TGVuZ3RoKGxlbmd0aCxoZWFkTGVuZ3RoLGhlYWRXaWR0aCk7fTt9KCk7VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQXJyb3dIZWxwZXI7VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldERpcmVjdGlvbj1mdW5jdGlvbigpe3ZhciBheGlzPW5ldyBUSFJFRS5WZWN0b3IzKCk7dmFyIHJhZGlhbnM7cmV0dXJuIGZ1bmN0aW9uIHNldERpcmVjdGlvbihkaXIpey8vIGRpciBpcyBhc3N1bWVkIHRvIGJlIG5vcm1hbGl6ZWRcbmlmKGRpci55PjAuOTk5OTkpe3RoaXMucXVhdGVybmlvbi5zZXQoMCwwLDAsMSk7fWVsc2UgaWYoZGlyLnk8LTAuOTk5OTkpe3RoaXMucXVhdGVybmlvbi5zZXQoMSwwLDAsMCk7fWVsc2V7YXhpcy5zZXQoZGlyLnosMCwtZGlyLngpLm5vcm1hbGl6ZSgpO3JhZGlhbnM9TWF0aC5hY29zKGRpci55KTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShheGlzLHJhZGlhbnMpO319O30oKTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0TGVuZ3RoPWZ1bmN0aW9uKGxlbmd0aCxoZWFkTGVuZ3RoLGhlYWRXaWR0aCl7aWYoaGVhZExlbmd0aD09PXVuZGVmaW5lZCloZWFkTGVuZ3RoPTAuMipsZW5ndGg7aWYoaGVhZFdpZHRoPT09dW5kZWZpbmVkKWhlYWRXaWR0aD0wLjIqaGVhZExlbmd0aDt0aGlzLmxpbmUuc2NhbGUuc2V0KDEsTWF0aC5tYXgoMCxsZW5ndGgtaGVhZExlbmd0aCksMSk7dGhpcy5saW5lLnVwZGF0ZU1hdHJpeCgpO3RoaXMuY29uZS5zY2FsZS5zZXQoaGVhZFdpZHRoLGhlYWRMZW5ndGgsaGVhZFdpZHRoKTt0aGlzLmNvbmUucG9zaXRpb24ueT1sZW5ndGg7dGhpcy5jb25lLnVwZGF0ZU1hdHJpeCgpO307VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGNvbG9yKXt0aGlzLmxpbmUubWF0ZXJpYWwuY29sb3IuY29weShjb2xvcik7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkoY29sb3IpO307Ly8gRmlsZTpzcmMvZXh0cmFzL2hlbHBlcnMvQm94SGVscGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICovVEhSRUUuQm94SGVscGVyPWZ1bmN0aW9uKG9iamVjdCl7dmFyIGluZGljZXM9bmV3IFVpbnQxNkFycmF5KFswLDEsMSwyLDIsMywzLDAsNCw1LDUsNiw2LDcsNyw0LDAsNCwxLDUsMiw2LDMsN10pO3ZhciBwb3NpdGlvbnM9bmV3IEZsb2F0MzJBcnJheSg4KjMpO3ZhciBnZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtnZW9tZXRyeS5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGluZGljZXMsMSkpO2dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25zLDMpKTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGdlb21ldHJ5LG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MHhmZmZmMDB9KSk7aWYob2JqZWN0IT09dW5kZWZpbmVkKXt0aGlzLnVwZGF0ZShvYmplY3QpO319O1RIUkVFLkJveEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkJveEhlbHBlcjtUSFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBib3g9bmV3IFRIUkVFLkJveDMoKTtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXtpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5Cb3gzKXtib3guY29weShvYmplY3QpO31lbHNle2JveC5zZXRGcm9tT2JqZWN0KG9iamVjdCk7fWlmKGJveC5pc0VtcHR5KCkpcmV0dXJuO3ZhciBtaW49Ym94Lm1pbjt2YXIgbWF4PWJveC5tYXg7LypcclxuXHRcdCAgNV9fX180XHJcblx0XHQxL19fXzAvfFxyXG5cdFx0fCA2X198XzdcclxuXHRcdDIvX19fMy9cclxuXHJcblx0XHQwOiBtYXgueCwgbWF4LnksIG1heC56XHJcblx0XHQxOiBtaW4ueCwgbWF4LnksIG1heC56XHJcblx0XHQyOiBtaW4ueCwgbWluLnksIG1heC56XHJcblx0XHQzOiBtYXgueCwgbWluLnksIG1heC56XHJcblx0XHQ0OiBtYXgueCwgbWF4LnksIG1pbi56XHJcblx0XHQ1OiBtaW4ueCwgbWF4LnksIG1pbi56XHJcblx0XHQ2OiBtaW4ueCwgbWluLnksIG1pbi56XHJcblx0XHQ3OiBtYXgueCwgbWluLnksIG1pbi56XHJcblx0XHQqL3ZhciBwb3NpdGlvbj10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247dmFyIGFycmF5PXBvc2l0aW9uLmFycmF5O2FycmF5WzBdPW1heC54O2FycmF5WzFdPW1heC55O2FycmF5WzJdPW1heC56O2FycmF5WzNdPW1pbi54O2FycmF5WzRdPW1heC55O2FycmF5WzVdPW1heC56O2FycmF5WzZdPW1pbi54O2FycmF5WzddPW1pbi55O2FycmF5WzhdPW1heC56O2FycmF5WzldPW1heC54O2FycmF5WzEwXT1taW4ueTthcnJheVsxMV09bWF4Lno7YXJyYXlbMTJdPW1heC54O2FycmF5WzEzXT1tYXgueTthcnJheVsxNF09bWluLno7YXJyYXlbMTVdPW1pbi54O2FycmF5WzE2XT1tYXgueTthcnJheVsxN109bWluLno7YXJyYXlbMThdPW1pbi54O2FycmF5WzE5XT1taW4ueTthcnJheVsyMF09bWluLno7YXJyYXlbMjFdPW1heC54O2FycmF5WzIyXT1taW4ueTthcnJheVsyM109bWluLno7cG9zaXRpb24ubmVlZHNVcGRhdGU9dHJ1ZTt0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO307fSgpOy8vIEZpbGU6c3JjL2V4dHJhcy9oZWxwZXJzL0JvdW5kaW5nQm94SGVscGVyLmpzXG4vKipcclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqLy8vIGEgaGVscGVyIHRvIHNob3cgdGhlIHdvcmxkLWF4aXMtYWxpZ25lZCBib3VuZGluZyBib3ggZm9yIGFuIG9iamVjdFxuVEhSRUUuQm91bmRpbmdCb3hIZWxwZXI9ZnVuY3Rpb24ob2JqZWN0LGhleCl7dmFyIGNvbG9yPWhleCE9PXVuZGVmaW5lZD9oZXg6MHg4ODg4ODg7dGhpcy5vYmplY3Q9b2JqZWN0O3RoaXMuYm94PW5ldyBUSFJFRS5Cb3gzKCk7VEhSRUUuTWVzaC5jYWxsKHRoaXMsbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEsMSwxKSxuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOmNvbG9yLHdpcmVmcmFtZTp0cnVlfSkpO307VEhSRUUuQm91bmRpbmdCb3hIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLkJvdW5kaW5nQm94SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Cb3VuZGluZ0JveEhlbHBlcjtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5ib3guc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCk7dGhpcy5ib3guc2l6ZSh0aGlzLnNjYWxlKTt0aGlzLmJveC5jZW50ZXIodGhpcy5wb3NpdGlvbik7fTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9DYW1lcmFIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKlxyXG4gKlx0LSBzaG93cyBmcnVzdHVtLCBsaW5lIG9mIHNpZ2h0IGFuZCB1cCBvZiB0aGUgY2FtZXJhXHJcbiAqXHQtIHN1aXRhYmxlIGZvciBmYXN0IHVwZGF0ZXNcclxuICogXHQtIGJhc2VkIG9uIGZydXN0dW0gdmlzdWFsaXphdGlvbiBpbiBsaWdodGdsLmpzIHNoYWRvd21hcCBleGFtcGxlXHJcbiAqXHRcdGh0dHA6Ly9ldmFudy5naXRodWIuY29tL2xpZ2h0Z2wuanMvdGVzdHMvc2hhZG93bWFwLmh0bWxcclxuICovVEhSRUUuQ2FtZXJhSGVscGVyPWZ1bmN0aW9uKGNhbWVyYSl7dmFyIGdlb21ldHJ5PW5ldyBUSFJFRS5HZW9tZXRyeSgpO3ZhciBtYXRlcmlhbD1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjB4ZmZmZmZmLHZlcnRleENvbG9yczpUSFJFRS5GYWNlQ29sb3JzfSk7dmFyIHBvaW50TWFwPXt9Oy8vIGNvbG9yc1xudmFyIGhleEZydXN0dW09MHhmZmFhMDA7dmFyIGhleENvbmU9MHhmZjAwMDA7dmFyIGhleFVwPTB4MDBhYWZmO3ZhciBoZXhUYXJnZXQ9MHhmZmZmZmY7dmFyIGhleENyb3NzPTB4MzMzMzMzOy8vIG5lYXJcbmFkZExpbmUoXCJuMVwiLFwibjJcIixoZXhGcnVzdHVtKTthZGRMaW5lKFwibjJcIixcIm40XCIsaGV4RnJ1c3R1bSk7YWRkTGluZShcIm40XCIsXCJuM1wiLGhleEZydXN0dW0pO2FkZExpbmUoXCJuM1wiLFwibjFcIixoZXhGcnVzdHVtKTsvLyBmYXJcbmFkZExpbmUoXCJmMVwiLFwiZjJcIixoZXhGcnVzdHVtKTthZGRMaW5lKFwiZjJcIixcImY0XCIsaGV4RnJ1c3R1bSk7YWRkTGluZShcImY0XCIsXCJmM1wiLGhleEZydXN0dW0pO2FkZExpbmUoXCJmM1wiLFwiZjFcIixoZXhGcnVzdHVtKTsvLyBzaWRlc1xuYWRkTGluZShcIm4xXCIsXCJmMVwiLGhleEZydXN0dW0pO2FkZExpbmUoXCJuMlwiLFwiZjJcIixoZXhGcnVzdHVtKTthZGRMaW5lKFwibjNcIixcImYzXCIsaGV4RnJ1c3R1bSk7YWRkTGluZShcIm40XCIsXCJmNFwiLGhleEZydXN0dW0pOy8vIGNvbmVcbmFkZExpbmUoXCJwXCIsXCJuMVwiLGhleENvbmUpO2FkZExpbmUoXCJwXCIsXCJuMlwiLGhleENvbmUpO2FkZExpbmUoXCJwXCIsXCJuM1wiLGhleENvbmUpO2FkZExpbmUoXCJwXCIsXCJuNFwiLGhleENvbmUpOy8vIHVwXG5hZGRMaW5lKFwidTFcIixcInUyXCIsaGV4VXApO2FkZExpbmUoXCJ1MlwiLFwidTNcIixoZXhVcCk7YWRkTGluZShcInUzXCIsXCJ1MVwiLGhleFVwKTsvLyB0YXJnZXRcbmFkZExpbmUoXCJjXCIsXCJ0XCIsaGV4VGFyZ2V0KTthZGRMaW5lKFwicFwiLFwiY1wiLGhleENyb3NzKTsvLyBjcm9zc1xuYWRkTGluZShcImNuMVwiLFwiY24yXCIsaGV4Q3Jvc3MpO2FkZExpbmUoXCJjbjNcIixcImNuNFwiLGhleENyb3NzKTthZGRMaW5lKFwiY2YxXCIsXCJjZjJcIixoZXhDcm9zcyk7YWRkTGluZShcImNmM1wiLFwiY2Y0XCIsaGV4Q3Jvc3MpO2Z1bmN0aW9uIGFkZExpbmUoYSxiLGhleCl7YWRkUG9pbnQoYSxoZXgpO2FkZFBvaW50KGIsaGV4KTt9ZnVuY3Rpb24gYWRkUG9pbnQoaWQsaGV4KXtnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKCkpO2dlb21ldHJ5LmNvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihoZXgpKTtpZihwb2ludE1hcFtpZF09PT11bmRlZmluZWQpe3BvaW50TWFwW2lkXT1bXTt9cG9pbnRNYXBbaWRdLnB1c2goZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoLTEpO31USFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGdlb21ldHJ5LG1hdGVyaWFsKTt0aGlzLmNhbWVyYT1jYW1lcmE7dGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO3RoaXMubWF0cml4PWNhbWVyYS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5wb2ludE1hcD1wb2ludE1hcDt0aGlzLnVwZGF0ZSgpO307VEhSRUUuQ2FtZXJhSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ2FtZXJhSGVscGVyO1RIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGdlb21ldHJ5LHBvaW50TWFwO3ZhciB2ZWN0b3I9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgY2FtZXJhPW5ldyBUSFJFRS5DYW1lcmEoKTtmdW5jdGlvbiBzZXRQb2ludChwb2ludCx4LHkseil7dmVjdG9yLnNldCh4LHkseikudW5wcm9qZWN0KGNhbWVyYSk7dmFyIHBvaW50cz1wb2ludE1hcFtwb2ludF07aWYocG9pbnRzIT09dW5kZWZpbmVkKXtmb3IodmFyIGk9MCxpbD1wb2ludHMubGVuZ3RoO2k8aWw7aSsrKXtnZW9tZXRyeS52ZXJ0aWNlc1twb2ludHNbaV1dLmNvcHkodmVjdG9yKTt9fX1yZXR1cm4gZnVuY3Rpb24oKXtnZW9tZXRyeT10aGlzLmdlb21ldHJ5O3BvaW50TWFwPXRoaXMucG9pbnRNYXA7dmFyIHc9MSxoPTE7Ly8gd2UgbmVlZCBqdXN0IGNhbWVyYSBwcm9qZWN0aW9uIG1hdHJpeFxuLy8gd29ybGQgbWF0cml4IG11c3QgYmUgaWRlbnRpdHlcbmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7Ly8gY2VudGVyIC8gdGFyZ2V0XG5zZXRQb2ludChcImNcIiwwLDAsLTEpO3NldFBvaW50KFwidFwiLDAsMCwxKTsvLyBuZWFyXG5zZXRQb2ludChcIm4xXCIsLXcsLWgsLTEpO3NldFBvaW50KFwibjJcIix3LC1oLC0xKTtzZXRQb2ludChcIm4zXCIsLXcsaCwtMSk7c2V0UG9pbnQoXCJuNFwiLHcsaCwtMSk7Ly8gZmFyXG5zZXRQb2ludChcImYxXCIsLXcsLWgsMSk7c2V0UG9pbnQoXCJmMlwiLHcsLWgsMSk7c2V0UG9pbnQoXCJmM1wiLC13LGgsMSk7c2V0UG9pbnQoXCJmNFwiLHcsaCwxKTsvLyB1cFxuc2V0UG9pbnQoXCJ1MVwiLHcqMC43LGgqMS4xLC0xKTtzZXRQb2ludChcInUyXCIsLXcqMC43LGgqMS4xLC0xKTtzZXRQb2ludChcInUzXCIsMCxoKjIsLTEpOy8vIGNyb3NzXG5zZXRQb2ludChcImNmMVwiLC13LDAsMSk7c2V0UG9pbnQoXCJjZjJcIix3LDAsMSk7c2V0UG9pbnQoXCJjZjNcIiwwLC1oLDEpO3NldFBvaW50KFwiY2Y0XCIsMCxoLDEpO3NldFBvaW50KFwiY24xXCIsLXcsMCwtMSk7c2V0UG9pbnQoXCJjbjJcIix3LDAsLTEpO3NldFBvaW50KFwiY24zXCIsMCwtaCwtMSk7c2V0UG9pbnQoXCJjbjRcIiwwLGgsLTEpO2dlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT10cnVlO307fSgpOy8vIEZpbGU6c3JjL2V4dHJhcy9oZWxwZXJzL0RpcmVjdGlvbmFsTGlnaHRIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuICovVEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlcj1mdW5jdGlvbihsaWdodCxzaXplKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9bGlnaHQ7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1mYWxzZTtpZihzaXplPT09dW5kZWZpbmVkKXNpemU9MTt2YXIgZ2VvbWV0cnk9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7Z2VvbWV0cnkuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoWy1zaXplLHNpemUsMCxzaXplLHNpemUsMCxzaXplLC1zaXplLDAsLXNpemUsLXNpemUsMCwtc2l6ZSxzaXplLDBdLDMpKTt2YXIgbWF0ZXJpYWw9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtmb2c6ZmFsc2V9KTt0aGlzLmFkZChuZXcgVEhSRUUuTGluZShnZW9tZXRyeSxtYXRlcmlhbCkpO2dlb21ldHJ5PW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO2dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKFswLDAsMCwwLDAsMV0sMykpO3RoaXMuYWRkKG5ldyBUSFJFRS5MaW5lKGdlb21ldHJ5LG1hdGVyaWFsKSk7dGhpcy51cGRhdGUoKTt9O1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgbGlnaHRQbGFuZT10aGlzLmNoaWxkcmVuWzBdO3ZhciB0YXJnZXRMaW5lPXRoaXMuY2hpbGRyZW5bMV07bGlnaHRQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCk7bGlnaHRQbGFuZS5tYXRlcmlhbC5kaXNwb3NlKCk7dGFyZ2V0TGluZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCk7fTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjI9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjM9bmV3IFRIUkVFLlZlY3RvcjMoKTtyZXR1cm4gZnVuY3Rpb24oKXt2MS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7djIuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt2My5zdWJWZWN0b3JzKHYyLHYxKTt2YXIgbGlnaHRQbGFuZT10aGlzLmNoaWxkcmVuWzBdO3ZhciB0YXJnZXRMaW5lPXRoaXMuY2hpbGRyZW5bMV07bGlnaHRQbGFuZS5sb29rQXQodjMpO2xpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGFyZ2V0TGluZS5sb29rQXQodjMpO3RhcmdldExpbmUuc2NhbGUuej12My5sZW5ndGgoKTt9O30oKTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9FZGdlc0hlbHBlci5qc1xuLyoqXHJcbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxyXG4gKiBAcGFyYW0gb2JqZWN0IFRIUkVFLk1lc2ggd2hvc2UgZ2VvbWV0cnkgd2lsbCBiZSB1c2VkXHJcbiAqIEBwYXJhbSBoZXggbGluZSBjb2xvclxyXG4gKiBAcGFyYW0gdGhyZXNob2xkQW5nbGUgdGhlIG1pbmltdW0gYW5nbGUgKGluIGRlZ3JlZXMpLFxyXG4gKiBiZXR3ZWVuIHRoZSBmYWNlIG5vcm1hbHMgb2YgYWRqYWNlbnQgZmFjZXMsXHJcbiAqIHRoYXQgaXMgcmVxdWlyZWQgdG8gcmVuZGVyIGFuIGVkZ2UuIEEgdmFsdWUgb2YgMTAgbWVhbnNcclxuICogYW4gZWRnZSBpcyBvbmx5IHJlbmRlcmVkIGlmIHRoZSBhbmdsZSBpcyBhdCBsZWFzdCAxMCBkZWdyZWVzLlxyXG4gKi9USFJFRS5FZGdlc0hlbHBlcj1mdW5jdGlvbihvYmplY3QsaGV4LHRocmVzaG9sZEFuZ2xlKXt2YXIgY29sb3I9aGV4IT09dW5kZWZpbmVkP2hleDoweGZmZmZmZjtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLG5ldyBUSFJFRS5FZGdlc0dlb21ldHJ5KG9iamVjdC5nZW9tZXRyeSx0aHJlc2hvbGRBbmdsZSksbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpjb2xvcn0pKTt0aGlzLm1hdHJpeD1vYmplY3QubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO307VEhSRUUuRWRnZXNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuRWRnZXNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkVkZ2VzSGVscGVyOy8vIEZpbGU6c3JjL2V4dHJhcy9oZWxwZXJzL0ZhY2VOb3JtYWxzSGVscGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiovVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI9ZnVuY3Rpb24ob2JqZWN0LHNpemUsaGV4LGxpbmV3aWR0aCl7Ly8gRmFjZU5vcm1hbHNIZWxwZXIgb25seSBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeVxudGhpcy5vYmplY3Q9b2JqZWN0O3RoaXMuc2l6ZT1zaXplIT09dW5kZWZpbmVkP3NpemU6MTt2YXIgY29sb3I9aGV4IT09dW5kZWZpbmVkP2hleDoweGZmZmYwMDt2YXIgd2lkdGg9bGluZXdpZHRoIT09dW5kZWZpbmVkP2xpbmV3aWR0aDoxOy8vXG52YXIgbk5vcm1hbHM9MDt2YXIgb2JqR2VvbWV0cnk9dGhpcy5vYmplY3QuZ2VvbWV0cnk7aWYob2JqR2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSl7bk5vcm1hbHM9b2JqR2VvbWV0cnkuZmFjZXMubGVuZ3RoO31lbHNle2NvbnNvbGUud2FybignVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI6IG9ubHkgVEhSRUUuR2VvbWV0cnkgaXMgc3VwcG9ydGVkLiBVc2UgVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlciwgaW5zdGVhZC4nKTt9Ly9cbnZhciBnZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTt2YXIgcG9zaXRpb25zPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKG5Ob3JtYWxzKjIqMywzKTtnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxwb3NpdGlvbnMpO1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsZ2VvbWV0cnksbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpjb2xvcixsaW5ld2lkdGg6d2lkdGh9KSk7Ly9cbnRoaXMubWF0cml4QXV0b1VwZGF0ZT1mYWxzZTt0aGlzLnVwZGF0ZSgpO307VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkZhY2VOb3JtYWxzSGVscGVyO1RIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgdjE9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgdjI9bmV3IFRIUkVFLlZlY3RvcjMoKTt2YXIgbm9ybWFsTWF0cml4PW5ldyBUSFJFRS5NYXRyaXgzKCk7cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpe3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO3ZhciBtYXRyaXhXb3JsZD10aGlzLm9iamVjdC5tYXRyaXhXb3JsZDt2YXIgcG9zaXRpb249dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uOy8vXG52YXIgb2JqR2VvbWV0cnk9dGhpcy5vYmplY3QuZ2VvbWV0cnk7dmFyIHZlcnRpY2VzPW9iakdlb21ldHJ5LnZlcnRpY2VzO3ZhciBmYWNlcz1vYmpHZW9tZXRyeS5mYWNlczt2YXIgaWR4PTA7Zm9yKHZhciBpPTAsbD1mYWNlcy5sZW5ndGg7aTxsO2krKyl7dmFyIGZhY2U9ZmFjZXNbaV07dmFyIG5vcm1hbD1mYWNlLm5vcm1hbDt2MS5jb3B5KHZlcnRpY2VzW2ZhY2UuYV0pLmFkZCh2ZXJ0aWNlc1tmYWNlLmJdKS5hZGQodmVydGljZXNbZmFjZS5jXSkuZGl2aWRlU2NhbGFyKDMpLmFwcGx5TWF0cml4NChtYXRyaXhXb3JsZCk7djIuY29weShub3JtYWwpLmFwcGx5TWF0cml4Myhub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKHYxKTtwb3NpdGlvbi5zZXRYWVooaWR4LHYxLngsdjEueSx2MS56KTtpZHg9aWR4KzE7cG9zaXRpb24uc2V0WFlaKGlkeCx2Mi54LHYyLnksdjIueik7aWR4PWlkeCsxO31wb3NpdGlvbi5uZWVkc1VwZGF0ZT10cnVlO3JldHVybiB0aGlzO307fSgpOy8vIEZpbGU6c3JjL2V4dHJhcy9oZWxwZXJzL0dyaWRIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5HcmlkSGVscGVyPWZ1bmN0aW9uKHNpemUsc3RlcCxjb2xvcjEsY29sb3IyKXtjb2xvcjE9bmV3IFRIUkVFLkNvbG9yKGNvbG9yMSE9PXVuZGVmaW5lZD9jb2xvcjE6MHg0NDQ0NDQpO2NvbG9yMj1uZXcgVEhSRUUuQ29sb3IoY29sb3IyIT09dW5kZWZpbmVkP2NvbG9yMjoweDg4ODg4OCk7dmFyIHZlcnRpY2VzPVtdO3ZhciBjb2xvcnM9W107Zm9yKHZhciBpPS1zaXplLGo9MDtpPD1zaXplO2krPXN0ZXApe3ZlcnRpY2VzLnB1c2goLXNpemUsMCxpLHNpemUsMCxpKTt2ZXJ0aWNlcy5wdXNoKGksMCwtc2l6ZSxpLDAsc2l6ZSk7dmFyIGNvbG9yPWk9PT0wP2NvbG9yMTpjb2xvcjI7Y29sb3IudG9BcnJheShjb2xvcnMsaik7ais9Mztjb2xvci50b0FycmF5KGNvbG9ycyxqKTtqKz0zO2NvbG9yLnRvQXJyYXkoY29sb3JzLGopO2orPTM7Y29sb3IudG9BcnJheShjb2xvcnMsaik7ais9Mzt9dmFyIGdlb21ldHJ5PW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO2dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKHZlcnRpY2VzLDMpKTtnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ2NvbG9yJyxuZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShjb2xvcnMsMykpO3ZhciBtYXRlcmlhbD1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczpUSFJFRS5WZXJ0ZXhDb2xvcnN9KTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGdlb21ldHJ5LG1hdGVyaWFsKTt9O1RIUkVFLkdyaWRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuR3JpZEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuR3JpZEhlbHBlcjtUSFJFRS5HcmlkSGVscGVyLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdUSFJFRS5HcmlkSGVscGVyOiBzZXRDb2xvcnMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLCBwYXNzIHRoZW0gaW4gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQuJyk7fTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9IZW1pc3BoZXJlTGlnaHRIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXI9ZnVuY3Rpb24obGlnaHQsc3BoZXJlU2l6ZSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWxpZ2h0O3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1saWdodC5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5jb2xvcnM9W25ldyBUSFJFRS5Db2xvcigpLG5ldyBUSFJFRS5Db2xvcigpXTt2YXIgZ2VvbWV0cnk9bmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHNwaGVyZVNpemUsNCwyKTtnZW9tZXRyeS5yb3RhdGVYKC1NYXRoLlBJLzIpO2Zvcih2YXIgaT0wLGlsPTg7aTxpbDtpKyspe2dlb21ldHJ5LmZhY2VzW2ldLmNvbG9yPXRoaXMuY29sb3JzW2k8ND8wOjFdO312YXIgbWF0ZXJpYWw9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuRmFjZUNvbG9ycyx3aXJlZnJhbWU6dHJ1ZX0pO3RoaXMubGlnaHRTcGhlcmU9bmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksbWF0ZXJpYWwpO3RoaXMuYWRkKHRoaXMubGlnaHRTcGhlcmUpO3RoaXMudXBkYXRlKCk7fTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlcjtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmxpZ2h0U3BoZXJlLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmxpZ2h0U3BoZXJlLm1hdGVyaWFsLmRpc3Bvc2UoKTt9O1RIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIHZlY3Rvcj1uZXcgVEhSRUUuVmVjdG9yMygpO3JldHVybiBmdW5jdGlvbigpe3RoaXMuY29sb3JzWzBdLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMuY29sb3JzWzFdLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMubGlnaHRTcGhlcmUubG9va0F0KHZlY3Rvci5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCkubmVnYXRlKCkpO3RoaXMubGlnaHRTcGhlcmUuZ2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZT10cnVlO307fSgpOy8vIEZpbGU6c3JjL2V4dHJhcy9oZWxwZXJzL1BvaW50TGlnaHRIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5Qb2ludExpZ2h0SGVscGVyPWZ1bmN0aW9uKGxpZ2h0LHNwaGVyZVNpemUpe3RoaXMubGlnaHQ9bGlnaHQ7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBnZW9tZXRyeT1uZXcgVEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkoc3BoZXJlU2l6ZSw0LDIpO3ZhciBtYXRlcmlhbD1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3dpcmVmcmFtZTp0cnVlLGZvZzpmYWxzZX0pO21hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO1RIUkVFLk1lc2guY2FsbCh0aGlzLGdlb21ldHJ5LG1hdGVyaWFsKTt0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1mYWxzZTsvKlxyXG5cdHZhciBkaXN0YW5jZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkoIDEsIDIgKTtcclxuXHR2YXIgZGlzdGFuY2VNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogaGV4Q29sb3IsIGZvZzogZmFsc2UsIHdpcmVmcmFtZTogdHJ1ZSwgb3BhY2l0eTogMC4xLCB0cmFuc3BhcmVudDogdHJ1ZSB9ICk7XHJcblxyXG5cdHRoaXMubGlnaHRTcGhlcmUgPSBuZXcgVEhSRUUuTWVzaCggYnVsYkdlb21ldHJ5LCBidWxiTWF0ZXJpYWwgKTtcclxuXHR0aGlzLmxpZ2h0RGlzdGFuY2UgPSBuZXcgVEhSRUUuTWVzaCggZGlzdGFuY2VHZW9tZXRyeSwgZGlzdGFuY2VNYXRlcmlhbCApO1xyXG5cclxuXHR2YXIgZCA9IGxpZ2h0LmRpc3RhbmNlO1xyXG5cclxuXHRpZiAoIGQgPT09IDAuMCApIHtcclxuXHJcblx0XHR0aGlzLmxpZ2h0RGlzdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuXHR9IGVsc2Uge1xyXG5cclxuXHRcdHRoaXMubGlnaHREaXN0YW5jZS5zY2FsZS5zZXQoIGQsIGQsIGQgKTtcclxuXHJcblx0fVxyXG5cclxuXHR0aGlzLmFkZCggdGhpcy5saWdodERpc3RhbmNlICk7XHJcblx0Ki99O1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBvaW50TGlnaHRIZWxwZXI7VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubWF0ZXJpYWwuZGlzcG9zZSgpO307VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTsvKlxyXG5cdHZhciBkID0gdGhpcy5saWdodC5kaXN0YW5jZTtcclxuXHJcblx0aWYgKCBkID09PSAwLjAgKSB7XHJcblxyXG5cdFx0dGhpcy5saWdodERpc3RhbmNlLnZpc2libGUgPSBmYWxzZTtcclxuXHJcblx0fSBlbHNlIHtcclxuXHJcblx0XHR0aGlzLmxpZ2h0RGlzdGFuY2UudmlzaWJsZSA9IHRydWU7XHJcblx0XHR0aGlzLmxpZ2h0RGlzdGFuY2Uuc2NhbGUuc2V0KCBkLCBkLCBkICk7XHJcblxyXG5cdH1cclxuXHQqL307Ly8gRmlsZTpzcmMvZXh0cmFzL2hlbHBlcnMvU2tlbGV0b25IZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIFNlYW4gR3JpZmZpbiAvIGh0dHA6Ly90d2l0dGVyLmNvbS9zZ3JpZlxyXG4gKiBAYXV0aG9yIE1pY2hhZWwgR3VlcnJlcm8gLyBodHRwOi8vcmVhbGl0eW1lbHRkb3duLmNvbVxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIGlrZXJyIC8gaHR0cDovL3Zlcm9sZC5jb21cclxuICovVEhSRUUuU2tlbGV0b25IZWxwZXI9ZnVuY3Rpb24ob2JqZWN0KXt0aGlzLmJvbmVzPXRoaXMuZ2V0Qm9uZUxpc3Qob2JqZWN0KTt2YXIgZ2VvbWV0cnk9bmV3IFRIUkVFLkdlb21ldHJ5KCk7Zm9yKHZhciBpPTA7aTx0aGlzLmJvbmVzLmxlbmd0aDtpKyspe3ZhciBib25lPXRoaXMuYm9uZXNbaV07aWYoYm9uZS5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5Cb25lKXtnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKCkpO2dlb21ldHJ5LnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoKSk7Z2VvbWV0cnkuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKDAsMCwxKSk7Z2VvbWV0cnkuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKDAsMSwwKSk7fX1nZW9tZXRyeS5keW5hbWljPXRydWU7dmFyIG1hdGVyaWFsPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLlZlcnRleENvbG9ycyxkZXB0aFRlc3Q6ZmFsc2UsZGVwdGhXcml0ZTpmYWxzZSx0cmFuc3BhcmVudDp0cnVlfSk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy5yb290PW9iamVjdDt0aGlzLm1hdHJpeD1vYmplY3QubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3RoaXMudXBkYXRlKCk7fTtUSFJFRS5Ta2VsZXRvbkhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5Ta2VsZXRvbkhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU2tlbGV0b25IZWxwZXI7VEhSRUUuU2tlbGV0b25IZWxwZXIucHJvdG90eXBlLmdldEJvbmVMaXN0PWZ1bmN0aW9uKG9iamVjdCl7dmFyIGJvbmVMaXN0PVtdO2lmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkJvbmUpe2JvbmVMaXN0LnB1c2gob2JqZWN0KTt9Zm9yKHZhciBpPTA7aTxvYmplY3QuY2hpbGRyZW4ubGVuZ3RoO2krKyl7Ym9uZUxpc3QucHVzaC5hcHBseShib25lTGlzdCx0aGlzLmdldEJvbmVMaXN0KG9iamVjdC5jaGlsZHJlbltpXSkpO31yZXR1cm4gYm9uZUxpc3Q7fTtUSFJFRS5Ta2VsZXRvbkhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7dmFyIG1hdHJpeFdvcmxkSW52PW5ldyBUSFJFRS5NYXRyaXg0KCkuZ2V0SW52ZXJzZSh0aGlzLnJvb3QubWF0cml4V29ybGQpO3ZhciBib25lTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KCk7dmFyIGo9MDtmb3IodmFyIGk9MDtpPHRoaXMuYm9uZXMubGVuZ3RoO2krKyl7dmFyIGJvbmU9dGhpcy5ib25lc1tpXTtpZihib25lLnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLkJvbmUpe2JvbmVNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXhXb3JsZEludixib25lLm1hdHJpeFdvcmxkKTtnZW9tZXRyeS52ZXJ0aWNlc1tqXS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYm9uZU1hdHJpeCk7Ym9uZU1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeFdvcmxkSW52LGJvbmUucGFyZW50Lm1hdHJpeFdvcmxkKTtnZW9tZXRyeS52ZXJ0aWNlc1tqKzFdLnNldEZyb21NYXRyaXhQb3NpdGlvbihib25lTWF0cml4KTtqKz0yO319Z2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPXRydWU7Z2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7fTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9TcG90TGlnaHRIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcclxuKi9USFJFRS5TcG90TGlnaHRIZWxwZXI9ZnVuY3Rpb24obGlnaHQpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1saWdodDt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9bGlnaHQubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3ZhciBnZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTt2YXIgcG9zaXRpb25zPVswLDAsMCwwLDAsMSwwLDAsMCwxLDAsMSwwLDAsMCwtMSwwLDEsMCwwLDAsMCwxLDEsMCwwLDAsMCwtMSwxXTtmb3IodmFyIGk9MCxqPTEsbD0zMjtpPGw7aSsrLGorKyl7dmFyIHAxPWkvbCpNYXRoLlBJKjI7dmFyIHAyPWovbCpNYXRoLlBJKjI7cG9zaXRpb25zLnB1c2goTWF0aC5jb3MocDEpLE1hdGguc2luKHAxKSwxLE1hdGguY29zKHAyKSxNYXRoLnNpbihwMiksMSk7fWdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKHBvc2l0aW9ucywzKSk7dmFyIG1hdGVyaWFsPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Zm9nOmZhbHNlfSk7dGhpcy5jb25lPW5ldyBUSFJFRS5MaW5lU2VnbWVudHMoZ2VvbWV0cnksbWF0ZXJpYWwpO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy51cGRhdGUoKTt9O1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3BvdExpZ2h0SGVscGVyO1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKTt9O1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIHZlY3Rvcj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciB2ZWN0b3IyPW5ldyBUSFJFRS5WZWN0b3IzKCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGNvbmVMZW5ndGg9dGhpcy5saWdodC5kaXN0YW5jZT90aGlzLmxpZ2h0LmRpc3RhbmNlOjEwMDA7dmFyIGNvbmVXaWR0aD1jb25lTGVuZ3RoKk1hdGgudGFuKHRoaXMubGlnaHQuYW5nbGUpO3RoaXMuY29uZS5zY2FsZS5zZXQoY29uZVdpZHRoLGNvbmVXaWR0aCxjb25lTGVuZ3RoKTt2ZWN0b3Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO3ZlY3RvcjIuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt0aGlzLmNvbmUubG9va0F0KHZlY3RvcjIuc3ViKHZlY3RvcikpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt9O30oKTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9WZXJ0ZXhOb3JtYWxzSGVscGVyLmpzXG4vKipcclxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiovVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlcj1mdW5jdGlvbihvYmplY3Qsc2l6ZSxoZXgsbGluZXdpZHRoKXt0aGlzLm9iamVjdD1vYmplY3Q7dGhpcy5zaXplPXNpemUhPT11bmRlZmluZWQ/c2l6ZToxO3ZhciBjb2xvcj1oZXghPT11bmRlZmluZWQ/aGV4OjB4ZmYwMDAwO3ZhciB3aWR0aD1saW5ld2lkdGghPT11bmRlZmluZWQ/bGluZXdpZHRoOjE7Ly9cbnZhciBuTm9ybWFscz0wO3ZhciBvYmpHZW9tZXRyeT10aGlzLm9iamVjdC5nZW9tZXRyeTtpZihvYmpHZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXtuTm9ybWFscz1vYmpHZW9tZXRyeS5mYWNlcy5sZW5ndGgqMzt9ZWxzZSBpZihvYmpHZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXtuTm9ybWFscz1vYmpHZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbC5jb3VudDt9Ly9cbnZhciBnZW9tZXRyeT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTt2YXIgcG9zaXRpb25zPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKG5Ob3JtYWxzKjIqMywzKTtnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxwb3NpdGlvbnMpO1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsZ2VvbWV0cnksbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpjb2xvcixsaW5ld2lkdGg6d2lkdGh9KSk7Ly9cbnRoaXMubWF0cml4QXV0b1VwZGF0ZT1mYWxzZTt0aGlzLnVwZGF0ZSgpO307VEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyO1RIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciB2MT1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciB2Mj1uZXcgVEhSRUUuVmVjdG9yMygpO3ZhciBub3JtYWxNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDMoKTtyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKCl7dmFyIGtleXM9WydhJywnYicsJ2MnXTt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTt2YXIgbWF0cml4V29ybGQ9dGhpcy5vYmplY3QubWF0cml4V29ybGQ7dmFyIHBvc2l0aW9uPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjsvL1xudmFyIG9iakdlb21ldHJ5PXRoaXMub2JqZWN0Lmdlb21ldHJ5O2lmKG9iakdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpe3ZhciB2ZXJ0aWNlcz1vYmpHZW9tZXRyeS52ZXJ0aWNlczt2YXIgZmFjZXM9b2JqR2VvbWV0cnkuZmFjZXM7dmFyIGlkeD0wO2Zvcih2YXIgaT0wLGw9ZmFjZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBmYWNlPWZhY2VzW2ldO2Zvcih2YXIgaj0wLGpsPWZhY2UudmVydGV4Tm9ybWFscy5sZW5ndGg7ajxqbDtqKyspe3ZhciB2ZXJ0ZXg9dmVydGljZXNbZmFjZVtrZXlzW2pdXV07dmFyIG5vcm1hbD1mYWNlLnZlcnRleE5vcm1hbHNbal07djEuY29weSh2ZXJ0ZXgpLmFwcGx5TWF0cml4NChtYXRyaXhXb3JsZCk7djIuY29weShub3JtYWwpLmFwcGx5TWF0cml4Myhub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKHYxKTtwb3NpdGlvbi5zZXRYWVooaWR4LHYxLngsdjEueSx2MS56KTtpZHg9aWR4KzE7cG9zaXRpb24uc2V0WFlaKGlkeCx2Mi54LHYyLnksdjIueik7aWR4PWlkeCsxO319fWVsc2UgaWYob2JqR2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIG9ialBvcz1vYmpHZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZhciBvYmpOb3JtPW9iakdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsO3ZhciBpZHg9MDsvLyBmb3Igc2ltcGxpY2l0eSwgaWdub3JlIGluZGV4IGFuZCBkcmF3Y2FsbHMsIGFuZCByZW5kZXIgZXZlcnkgbm9ybWFsXG5mb3IodmFyIGo9MCxqbD1vYmpQb3MuY291bnQ7ajxqbDtqKyspe3YxLnNldChvYmpQb3MuZ2V0WChqKSxvYmpQb3MuZ2V0WShqKSxvYmpQb3MuZ2V0WihqKSkuYXBwbHlNYXRyaXg0KG1hdHJpeFdvcmxkKTt2Mi5zZXQob2JqTm9ybS5nZXRYKGopLG9iak5vcm0uZ2V0WShqKSxvYmpOb3JtLmdldFooaikpO3YyLmFwcGx5TWF0cml4Myhub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKHYxKTtwb3NpdGlvbi5zZXRYWVooaWR4LHYxLngsdjEueSx2MS56KTtpZHg9aWR4KzE7cG9zaXRpb24uc2V0WFlaKGlkeCx2Mi54LHYyLnksdjIueik7aWR4PWlkeCsxO319cG9zaXRpb24ubmVlZHNVcGRhdGU9dHJ1ZTtyZXR1cm4gdGhpczt9O30oKTsvLyBGaWxlOnNyYy9leHRyYXMvaGVscGVycy9XaXJlZnJhbWVIZWxwZXIuanNcbi8qKlxyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xyXG4gKi9USFJFRS5XaXJlZnJhbWVIZWxwZXI9ZnVuY3Rpb24ob2JqZWN0LGhleCl7dmFyIGNvbG9yPWhleCE9PXVuZGVmaW5lZD9oZXg6MHhmZmZmZmY7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxuZXcgVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkob2JqZWN0Lmdlb21ldHJ5KSxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmNvbG9yfSkpO3RoaXMubWF0cml4PW9iamVjdC5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7fTtUSFJFRS5XaXJlZnJhbWVIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuV2lyZWZyYW1lSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5XaXJlZnJhbWVIZWxwZXI7Ly8gRmlsZTpzcmMvZXh0cmFzL29iamVjdHMvSW1tZWRpYXRlUmVuZGVyT2JqZWN0LmpzXG4vKipcclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICovVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0PWZ1bmN0aW9uKG1hdGVyaWFsKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubWF0ZXJpYWw9bWF0ZXJpYWw7dGhpcy5yZW5kZXI9ZnVuY3Rpb24ocmVuZGVyQ2FsbGJhY2spe307fTtUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdDsvLyBGaWxlOnNyYy9leHRyYXMvb2JqZWN0cy9Nb3JwaEJsZW5kTWVzaC5qc1xuLyoqXHJcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXHJcbiAqL1RIUkVFLk1vcnBoQmxlbmRNZXNoPWZ1bmN0aW9uKGdlb21ldHJ5LG1hdGVyaWFsKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxnZW9tZXRyeSxtYXRlcmlhbCk7dGhpcy5hbmltYXRpb25zTWFwPXt9O3RoaXMuYW5pbWF0aW9uc0xpc3Q9W107Ly8gcHJlcGFyZSBkZWZhdWx0IGFuaW1hdGlvblxuLy8gKGFsbCBmcmFtZXMgcGxheWVkIHRvZ2V0aGVyIGluIDEgc2Vjb25kKVxudmFyIG51bUZyYW1lcz10aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7dmFyIG5hbWU9XCJfX2RlZmF1bHRcIjt2YXIgc3RhcnRGcmFtZT0wO3ZhciBlbmRGcmFtZT1udW1GcmFtZXMtMTt2YXIgZnBzPW51bUZyYW1lcy8xO3RoaXMuY3JlYXRlQW5pbWF0aW9uKG5hbWUsc3RhcnRGcmFtZSxlbmRGcmFtZSxmcHMpO3RoaXMuc2V0QW5pbWF0aW9uV2VpZ2h0KG5hbWUsMSk7fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1vcnBoQmxlbmRNZXNoO1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5jcmVhdGVBbmltYXRpb249ZnVuY3Rpb24obmFtZSxzdGFydCxlbmQsZnBzKXt2YXIgYW5pbWF0aW9uPXtzdGFydDpzdGFydCxlbmQ6ZW5kLGxlbmd0aDplbmQtc3RhcnQrMSxmcHM6ZnBzLGR1cmF0aW9uOihlbmQtc3RhcnQpL2ZwcyxsYXN0RnJhbWU6MCxjdXJyZW50RnJhbWU6MCxhY3RpdmU6ZmFsc2UsdGltZTowLGRpcmVjdGlvbjoxLHdlaWdodDoxLGRpcmVjdGlvbkJhY2t3YXJkczpmYWxzZSxtaXJyb3JlZExvb3A6ZmFsc2V9O3RoaXMuYW5pbWF0aW9uc01hcFtuYW1lXT1hbmltYXRpb247dGhpcy5hbmltYXRpb25zTGlzdC5wdXNoKGFuaW1hdGlvbik7fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuYXV0b0NyZWF0ZUFuaW1hdGlvbnM9ZnVuY3Rpb24oZnBzKXt2YXIgcGF0dGVybj0vKFthLXpdKylfPyhcXGQrKS9pO3ZhciBmaXJzdEFuaW1hdGlvbixmcmFtZVJhbmdlcz17fTt2YXIgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeTtmb3IodmFyIGk9MCxpbD1nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoO2k8aWw7aSsrKXt2YXIgbW9ycGg9Z2VvbWV0cnkubW9ycGhUYXJnZXRzW2ldO3ZhciBjaHVua3M9bW9ycGgubmFtZS5tYXRjaChwYXR0ZXJuKTtpZihjaHVua3MmJmNodW5rcy5sZW5ndGg+MSl7dmFyIG5hbWU9Y2h1bmtzWzFdO2lmKCFmcmFtZVJhbmdlc1tuYW1lXSlmcmFtZVJhbmdlc1tuYW1lXT17c3RhcnQ6SW5maW5pdHksZW5kOi1JbmZpbml0eX07dmFyIHJhbmdlPWZyYW1lUmFuZ2VzW25hbWVdO2lmKGk8cmFuZ2Uuc3RhcnQpcmFuZ2Uuc3RhcnQ9aTtpZihpPnJhbmdlLmVuZClyYW5nZS5lbmQ9aTtpZighZmlyc3RBbmltYXRpb24pZmlyc3RBbmltYXRpb249bmFtZTt9fWZvcih2YXIgbmFtZSBpbiBmcmFtZVJhbmdlcyl7dmFyIHJhbmdlPWZyYW1lUmFuZ2VzW25hbWVdO3RoaXMuY3JlYXRlQW5pbWF0aW9uKG5hbWUscmFuZ2Uuc3RhcnQscmFuZ2UuZW5kLGZwcyk7fXRoaXMuZmlyc3RBbmltYXRpb249Zmlyc3RBbmltYXRpb247fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRGlyZWN0aW9uRm9yd2FyZD1mdW5jdGlvbihuYW1lKXt2YXIgYW5pbWF0aW9uPXRoaXMuYW5pbWF0aW9uc01hcFtuYW1lXTtpZihhbmltYXRpb24pe2FuaW1hdGlvbi5kaXJlY3Rpb249MTthbmltYXRpb24uZGlyZWN0aW9uQmFja3dhcmRzPWZhbHNlO319O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EaXJlY3Rpb25CYWNrd2FyZD1mdW5jdGlvbihuYW1lKXt2YXIgYW5pbWF0aW9uPXRoaXMuYW5pbWF0aW9uc01hcFtuYW1lXTtpZihhbmltYXRpb24pe2FuaW1hdGlvbi5kaXJlY3Rpb249LTE7YW5pbWF0aW9uLmRpcmVjdGlvbkJhY2t3YXJkcz10cnVlO319O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25GUFM9ZnVuY3Rpb24obmFtZSxmcHMpe3ZhciBhbmltYXRpb249dGhpcy5hbmltYXRpb25zTWFwW25hbWVdO2lmKGFuaW1hdGlvbil7YW5pbWF0aW9uLmZwcz1mcHM7YW5pbWF0aW9uLmR1cmF0aW9uPShhbmltYXRpb24uZW5kLWFuaW1hdGlvbi5zdGFydCkvYW5pbWF0aW9uLmZwczt9fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRHVyYXRpb249ZnVuY3Rpb24obmFtZSxkdXJhdGlvbil7dmFyIGFuaW1hdGlvbj10aGlzLmFuaW1hdGlvbnNNYXBbbmFtZV07aWYoYW5pbWF0aW9uKXthbmltYXRpb24uZHVyYXRpb249ZHVyYXRpb247YW5pbWF0aW9uLmZwcz0oYW5pbWF0aW9uLmVuZC1hbmltYXRpb24uc3RhcnQpL2FuaW1hdGlvbi5kdXJhdGlvbjt9fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uV2VpZ2h0PWZ1bmN0aW9uKG5hbWUsd2VpZ2h0KXt2YXIgYW5pbWF0aW9uPXRoaXMuYW5pbWF0aW9uc01hcFtuYW1lXTtpZihhbmltYXRpb24pe2FuaW1hdGlvbi53ZWlnaHQ9d2VpZ2h0O319O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKG5hbWUsdGltZSl7dmFyIGFuaW1hdGlvbj10aGlzLmFuaW1hdGlvbnNNYXBbbmFtZV07aWYoYW5pbWF0aW9uKXthbmltYXRpb24udGltZT10aW1lO319O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5nZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKG5hbWUpe3ZhciB0aW1lPTA7dmFyIGFuaW1hdGlvbj10aGlzLmFuaW1hdGlvbnNNYXBbbmFtZV07aWYoYW5pbWF0aW9uKXt0aW1lPWFuaW1hdGlvbi50aW1lO31yZXR1cm4gdGltZTt9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5nZXRBbmltYXRpb25EdXJhdGlvbj1mdW5jdGlvbihuYW1lKXt2YXIgZHVyYXRpb249LTE7dmFyIGFuaW1hdGlvbj10aGlzLmFuaW1hdGlvbnNNYXBbbmFtZV07aWYoYW5pbWF0aW9uKXtkdXJhdGlvbj1hbmltYXRpb24uZHVyYXRpb247fXJldHVybiBkdXJhdGlvbjt9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5wbGF5QW5pbWF0aW9uPWZ1bmN0aW9uKG5hbWUpe3ZhciBhbmltYXRpb249dGhpcy5hbmltYXRpb25zTWFwW25hbWVdO2lmKGFuaW1hdGlvbil7YW5pbWF0aW9uLnRpbWU9MDthbmltYXRpb24uYWN0aXZlPXRydWU7fWVsc2V7Y29uc29sZS53YXJuKFwiVEhSRUUuTW9ycGhCbGVuZE1lc2g6IGFuaW1hdGlvbltcIituYW1lK1wiXSB1bmRlZmluZWQgaW4gLnBsYXlBbmltYXRpb24oKVwiKTt9fTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc3RvcEFuaW1hdGlvbj1mdW5jdGlvbihuYW1lKXt2YXIgYW5pbWF0aW9uPXRoaXMuYW5pbWF0aW9uc01hcFtuYW1lXTtpZihhbmltYXRpb24pe2FuaW1hdGlvbi5hY3RpdmU9ZmFsc2U7fX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihkZWx0YSl7Zm9yKHZhciBpPTAsaWw9dGhpcy5hbmltYXRpb25zTGlzdC5sZW5ndGg7aTxpbDtpKyspe3ZhciBhbmltYXRpb249dGhpcy5hbmltYXRpb25zTGlzdFtpXTtpZighYW5pbWF0aW9uLmFjdGl2ZSljb250aW51ZTt2YXIgZnJhbWVUaW1lPWFuaW1hdGlvbi5kdXJhdGlvbi9hbmltYXRpb24ubGVuZ3RoO2FuaW1hdGlvbi50aW1lKz1hbmltYXRpb24uZGlyZWN0aW9uKmRlbHRhO2lmKGFuaW1hdGlvbi5taXJyb3JlZExvb3Ape2lmKGFuaW1hdGlvbi50aW1lPmFuaW1hdGlvbi5kdXJhdGlvbnx8YW5pbWF0aW9uLnRpbWU8MCl7YW5pbWF0aW9uLmRpcmVjdGlvbio9LTE7aWYoYW5pbWF0aW9uLnRpbWU+YW5pbWF0aW9uLmR1cmF0aW9uKXthbmltYXRpb24udGltZT1hbmltYXRpb24uZHVyYXRpb247YW5pbWF0aW9uLmRpcmVjdGlvbkJhY2t3YXJkcz10cnVlO31pZihhbmltYXRpb24udGltZTwwKXthbmltYXRpb24udGltZT0wO2FuaW1hdGlvbi5kaXJlY3Rpb25CYWNrd2FyZHM9ZmFsc2U7fX19ZWxzZXthbmltYXRpb24udGltZT1hbmltYXRpb24udGltZSVhbmltYXRpb24uZHVyYXRpb247aWYoYW5pbWF0aW9uLnRpbWU8MClhbmltYXRpb24udGltZSs9YW5pbWF0aW9uLmR1cmF0aW9uO312YXIga2V5ZnJhbWU9YW5pbWF0aW9uLnN0YXJ0K1RIUkVFLk1hdGguY2xhbXAoTWF0aC5mbG9vcihhbmltYXRpb24udGltZS9mcmFtZVRpbWUpLDAsYW5pbWF0aW9uLmxlbmd0aC0xKTt2YXIgd2VpZ2h0PWFuaW1hdGlvbi53ZWlnaHQ7aWYoa2V5ZnJhbWUhPT1hbmltYXRpb24uY3VycmVudEZyYW1lKXt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1thbmltYXRpb24ubGFzdEZyYW1lXT0wO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2FuaW1hdGlvbi5jdXJyZW50RnJhbWVdPTEqd2VpZ2h0O3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2tleWZyYW1lXT0wO2FuaW1hdGlvbi5sYXN0RnJhbWU9YW5pbWF0aW9uLmN1cnJlbnRGcmFtZTthbmltYXRpb24uY3VycmVudEZyYW1lPWtleWZyYW1lO312YXIgbWl4PWFuaW1hdGlvbi50aW1lJWZyYW1lVGltZS9mcmFtZVRpbWU7aWYoYW5pbWF0aW9uLmRpcmVjdGlvbkJhY2t3YXJkcyltaXg9MS1taXg7aWYoYW5pbWF0aW9uLmN1cnJlbnRGcmFtZSE9PWFuaW1hdGlvbi5sYXN0RnJhbWUpe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2FuaW1hdGlvbi5jdXJyZW50RnJhbWVdPW1peCp3ZWlnaHQ7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbYW5pbWF0aW9uLmxhc3RGcmFtZV09KDEtbWl4KSp3ZWlnaHQ7fWVsc2V7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbYW5pbWF0aW9uLmN1cnJlbnRGcmFtZV09d2VpZ2h0O319fTsvLyBFeHBvcnQgdGhlIFRIUkVFIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbi8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cbi8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdCB2aWEgYSBzdHJpbmcgaWRlbnRpZmllcixcbi8vIGZvciBDbG9zdXJlIENvbXBpbGVyIFwiYWR2YW5jZWRcIiBtb2RlLlxuaWYodHlwZW9mIGV4cG9ydHMhPT0ndW5kZWZpbmVkJyl7aWYodHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnJiZtb2R1bGUuZXhwb3J0cyl7ZXhwb3J0cz1tb2R1bGUuZXhwb3J0cz1USFJFRTt9ZXhwb3J0cy5USFJFRT1USFJFRTt9ZWxzZXt0aGlzWydUSFJFRSddPVRIUkVFO31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aHJlZS90aHJlZS5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_detector__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_detector___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__lib_detector__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__elements__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__lights__ = __webpack_require__(13);\n\n\n\n\nconst OrbitControls = __webpack_require__(14)(__WEBPACK_IMPORTED_MODULE_0_three___default.a);\nconst height = window.innerHeight;\nconst width = window.innerWidth;\n\nlet scene, camera, renderer;\n\n(function init() {\n  scene = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Scene();\n  camera = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.PerspectiveCamera(45, width / height, 0.1, 10000);\n  camera.position.set(0, 150, 1000);\n\n  renderer = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.WebGLRenderer({ alpha: true });\n  renderer.setSize(width, height);\n  renderer.setClearColor(0x000000);\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = __WEBPACK_IMPORTED_MODULE_0_three___default.a.PCFSoftShadowMap;\n  document.body.appendChild(renderer.domElement);\n\n  Object(__WEBPACK_IMPORTED_MODULE_2__elements__[\"a\" /* addElements */])(scene);\n  Object(__WEBPACK_IMPORTED_MODULE_3__lights__[\"a\" /* default */])(scene);\n\n  window.addEventListener('resize', function () {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }, false);\n\n  const controls = new OrbitControls(camera);\n})();\n\nfunction animate() {\n  requestAnimationFrame(animate);\n  renderer.render(scene, camera);\n  Object(__WEBPACK_IMPORTED_MODULE_2__elements__[\"b\" /* animateElements */])();\n}\n\nif (__WEBPACK_IMPORTED_MODULE_1__lib_detector___default.a.webgl) {\n  animate();\n} else {\n  const warning = __WEBPACK_IMPORTED_MODULE_1__lib_detector___default.a.getWebGLErrorMessage();\n  document.getElementById('container').appendChild(warning);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2luZGV4LmpzPzg2ZjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBEZXRlY3RvciBmcm9tICcuL2xpYi9kZXRlY3Rvcic7XG5pbXBvcnQgeyBhZGRFbGVtZW50cywgYW5pbWF0ZUVsZW1lbnRzIH0gZnJvbSAnLi9lbGVtZW50cyc7XG5pbXBvcnQgYWRkTGlnaHRzIGZyb20gJy4vbGlnaHRzJztcbmNvbnN0IE9yYml0Q29udHJvbHMgPSByZXF1aXJlKCd0aHJlZS1vcmJpdC1jb250cm9scycpKFRIUkVFKTtcbmNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbmNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cbmxldCBzY2VuZSwgY2FtZXJhLCByZW5kZXJlcjtcblxuKGZ1bmN0aW9uIGluaXQoKSB7XG4gIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgd2lkdGggLyBoZWlnaHQsIDAuMSwgMTAwMDApO1xuICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDE1MCwgMTAwMCk7XG5cbiAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFscGhhOiB0cnVlIH0pO1xuICByZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICByZW5kZXJlci5zZXRDbGVhckNvbG9yKDB4MDAwMDAwKTtcbiAgcmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xuICByZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cbiAgYWRkRWxlbWVudHMoc2NlbmUpO1xuICBhZGRMaWdodHMoc2NlbmUpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgfSwgZmFsc2UpO1xuXG4gIGNvbnN0IGNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoY2FtZXJhKTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICBhbmltYXRlRWxlbWVudHMoKTtcbn1cblxuaWYgKERldGVjdG9yLndlYmdsKSB7XG4gIGFuaW1hdGUoKTtcbn0gZWxzZSB7XG4gIGNvbnN0IHdhcm5pbmcgPSBEZXRlY3Rvci5nZXRXZWJHTEVycm9yTWVzc2FnZSgpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykuYXBwZW5kQ2hpbGQod2FybmluZyk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar Detector = {\n\n  canvas: !!window.CanvasRenderingContext2D,\n  webgl: function () {\n\n    try {\n\n      var canvas = document.createElement('canvas');return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n\n      return false;\n    }\n  }(),\n  workers: !!window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n  getWebGLErrorMessage: function () {\n\n    var element = document.createElement('div');\n    element.id = 'webgl-error-message';\n    element.style.fontFamily = 'monospace';\n    element.style.fontSize = '13px';\n    element.style.fontWeight = 'normal';\n    element.style.textAlign = 'center';\n    element.style.background = '#fff';\n    element.style.color = '#000';\n    element.style.padding = '1.5em';\n    element.style.width = '400px';\n    element.style.margin = '5em auto 0';\n\n    if (!this.webgl) {\n\n      element.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n') : ['Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n');\n    }\n\n    return element;\n  },\n\n  addGetWebGLMessage: function (parameters) {\n\n    var parent, id, element;\n\n    parameters = parameters || {};\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body;\n    id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n    element = Detector.getWebGLErrorMessage();\n    element.id = id;\n\n    parent.appendChild(element);\n  }\n\n};\n\n// browserify support\nif (true) {\n\n  module.exports = Detector;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2xpYi9kZXRlY3Rvci5qcz81MzlmIl0sInNvdXJjZXNDb250ZW50IjpbIlxudmFyIERldGVjdG9yID0ge1xuXG4gIGNhbnZhczogISF3aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICB3ZWJnbDogZnVuY3Rpb24gKCkge1xuXG4gICAgdHJ5IHtcblxuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO3JldHVybiAhISh3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmIChjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJykpKTtcbiAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0oKSxcbiAgd29ya2VyczogISF3aW5kb3cuV29ya2VyLFxuICBmaWxlYXBpOiB3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2IsXG5cbiAgZ2V0V2ViR0xFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5pZCA9ICd3ZWJnbC1lcnJvci1tZXNzYWdlJztcbiAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnbW9ub3NwYWNlJztcbiAgICBlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuICAgIGVsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdub3JtYWwnO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmZmYnO1xuICAgIGVsZW1lbnQuc3R5bGUuY29sb3IgPSAnIzAwMCc7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzEuNWVtJztcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzQwMHB4JztcbiAgICBlbGVtZW50LnN0eWxlLm1hcmdpbiA9ICc1ZW0gYXV0byAwJztcblxuICAgIGlmICghdGhpcy53ZWJnbCkge1xuXG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgPyBbJ1lvdXIgZ3JhcGhpY3MgY2FyZCBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIgLz4nLCAnRmluZCBvdXQgaG93IHRvIGdldCBpdCA8YSBocmVmPVwiaHR0cDovL2dldC53ZWJnbC5vcmcvXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+aGVyZTwvYT4uJ10uam9pbignXFxuJykgOiBbJ1lvdXIgYnJvd3NlciBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIvPicsICdGaW5kIG91dCBob3cgdG8gZ2V0IGl0IDxhIGhyZWY9XCJodHRwOi8vZ2V0LndlYmdsLm9yZy9cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5oZXJlPC9hPi4nXS5qb2luKCdcXG4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSxcblxuICBhZGRHZXRXZWJHTE1lc3NhZ2U6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XG5cbiAgICB2YXIgcGFyZW50LCBpZCwgZWxlbWVudDtcblxuICAgIHBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzIHx8IHt9O1xuXG4gICAgcGFyZW50ID0gcGFyYW1ldGVycy5wYXJlbnQgIT09IHVuZGVmaW5lZCA/IHBhcmFtZXRlcnMucGFyZW50IDogZG9jdW1lbnQuYm9keTtcbiAgICBpZCA9IHBhcmFtZXRlcnMuaWQgIT09IHVuZGVmaW5lZCA/IHBhcmFtZXRlcnMuaWQgOiAnb2xkaWUnO1xuXG4gICAgZWxlbWVudCA9IERldGVjdG9yLmdldFdlYkdMRXJyb3JNZXNzYWdlKCk7XG4gICAgZWxlbWVudC5pZCA9IGlkO1xuXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9XG5cbn07XG5cbi8vIGJyb3dzZXJpZnkgc3VwcG9ydFxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBEZXRlY3Rvcjtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2xpYi9kZXRlY3Rvci5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addElements; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return animateElements; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cubes__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__figure__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sphere__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__planeBottom__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__lamp__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__gui__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__shadows__ = __webpack_require__(12);\n\n\n\n\n\n\n\n\n// gui();\n\nfunction addElements(scene) {\n    Object(__WEBPACK_IMPORTED_MODULE_3__planeBottom__[\"a\" /* default */])(scene);\n    scene.add(__WEBPACK_IMPORTED_MODULE_2__sphere__[\"a\" /* default */]);\n    scene.add(__WEBPACK_IMPORTED_MODULE_1__figure__[\"a\" /* default */]);\n    Object(__WEBPACK_IMPORTED_MODULE_4__lamp__[\"a\" /* default */])(scene);\n    scene.add(__WEBPACK_IMPORTED_MODULE_6__shadows__[\"a\" /* default */]);\n    scene.add(Object(__WEBPACK_IMPORTED_MODULE_0__cubes__[\"a\" /* default */])(-100, 50, 200));\n    scene.add(Object(__WEBPACK_IMPORTED_MODULE_0__cubes__[\"a\" /* default */])(250, 100, 250));\n}\n\nfunction animateElements() {\n    // sphere.rotation.y += ball.rotationY;\n    // sphere.rotation.x += ball.rotationX;\n    // sphere.rotation.z += ball.rotationZ;\n    // sphere.position.y += ball.positionY;\n    // sphere.position.x += ball.positionX;\n    // sphere.position.z += ball.positionZ;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL2luZGV4LmpzP2E1MzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldEN1YmVzIGZyb20gJy4vY3ViZXMnO1xuaW1wb3J0IGZpZ3VyZSBmcm9tICcuL2ZpZ3VyZSc7XG5pbXBvcnQgc3BoZXJlIGZyb20gJy4vc3BoZXJlJztcbmltcG9ydCBwbGFuZSBmcm9tICcuL3BsYW5lQm90dG9tJztcbmltcG9ydCBsYW1wIGZyb20gJy4vbGFtcCc7XG5pbXBvcnQgeyBiYWxsLCBwbGFuZUdVSSwgZ3VpIH0gZnJvbSAnLi8uLi9ndWknO1xuaW1wb3J0IHNoYWRvdyBmcm9tICcuL3NoYWRvd3MnO1xuXG4vLyBndWkoKTtcblxuZnVuY3Rpb24gYWRkRWxlbWVudHMoc2NlbmUpIHtcbiAgICBwbGFuZShzY2VuZSk7XG4gICAgc2NlbmUuYWRkKHNwaGVyZSk7XG4gICAgc2NlbmUuYWRkKGZpZ3VyZSk7XG4gICAgbGFtcChzY2VuZSk7XG4gICAgc2NlbmUuYWRkKHNoYWRvdyk7XG4gICAgc2NlbmUuYWRkKGdldEN1YmVzKC0xMDAsIDUwLCAyMDApKTtcbiAgICBzY2VuZS5hZGQoZ2V0Q3ViZXMoMjUwLCAxMDAsIDI1MCkpO1xufVxuXG5mdW5jdGlvbiBhbmltYXRlRWxlbWVudHMoKSB7XG4gICAgLy8gc3BoZXJlLnJvdGF0aW9uLnkgKz0gYmFsbC5yb3RhdGlvblk7XG4gICAgLy8gc3BoZXJlLnJvdGF0aW9uLnggKz0gYmFsbC5yb3RhdGlvblg7XG4gICAgLy8gc3BoZXJlLnJvdGF0aW9uLnogKz0gYmFsbC5yb3RhdGlvblo7XG4gICAgLy8gc3BoZXJlLnBvc2l0aW9uLnkgKz0gYmFsbC5wb3NpdGlvblk7XG4gICAgLy8gc3BoZXJlLnBvc2l0aW9uLnggKz0gYmFsbC5wb3NpdGlvblg7XG4gICAgLy8gc3BoZXJlLnBvc2l0aW9uLnogKz0gYmFsbC5wb3NpdGlvblo7XG59XG5cbmV4cG9ydCB7IGFkZEVsZW1lbnRzIH07XG5leHBvcnQgeyBhbmltYXRlRWxlbWVudHMgfTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2VsZW1lbnRzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\n\nfunction getCubes(x, y, z) {\n    const geometry = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.BoxGeometry(100, 100, 100);\n    const material = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.MeshPhongMaterial({\n        color: 0x486ca7,\n        specular: 0x555555,\n        shininess: 10 });\n\n    const cube = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Mesh(geometry, material);\n    cube.position.set(x, y, z);\n    cube.castShadow = true;\n\n    return cube;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (getCubes);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL2N1YmVzLmpzPzNhZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRIUkVFIGZyb20gJ3RocmVlJztcblxuZnVuY3Rpb24gZ2V0Q3ViZXMoeCwgeSwgeikge1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEwMCwgMTAwLCAxMDApO1xuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcbiAgICAgICAgY29sb3I6IDB4NDg2Y2E3LFxuICAgICAgICBzcGVjdWxhcjogMHg1NTU1NTUsXG4gICAgICAgIHNoaW5pbmVzczogMTAgfSk7XG5cbiAgICBjb25zdCBjdWJlID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcbiAgICBjdWJlLnBvc2l0aW9uLnNldCh4LCB5LCB6KTtcbiAgICBjdWJlLmNhc3RTaGFkb3cgPSB0cnVlO1xuXG4gICAgcmV0dXJuIGN1YmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldEN1YmVzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvZWxlbWVudHMvY3ViZXMuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\n\nvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.OctahedronGeometry(20);\nvar color = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Color(\"#7833aa\");\nvar material = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.MeshLambertMaterial({ color: color.getHex() });\nvar figure = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Mesh(geometry, material);\nfigure.position.set(-50, 20, 0);\nfigure.castShadow = true;\n/* harmony default export */ __webpack_exports__[\"a\"] = (figure);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL2ZpZ3VyZS5qcz81ZDE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUSFJFRSBmcm9tICd0aHJlZSc7XG5cbnZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5PY3RhaGVkcm9uR2VvbWV0cnkoMjApO1xudmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKFwiIzc4MzNhYVwiKTtcbnZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHsgY29sb3I6IGNvbG9yLmdldEhleCgpIH0pO1xudmFyIGZpZ3VyZSA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5maWd1cmUucG9zaXRpb24uc2V0KC01MCwgMjAsIDApO1xuZmlndXJlLmNhc3RTaGFkb3cgPSB0cnVlO1xuZXhwb3J0IGRlZmF1bHQgZmlndXJlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvZWxlbWVudHMvZmlndXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\n\nvar color = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Color(\"#00ff00\");\nvar material = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.MeshPhongMaterial({ color: color.getHex(), specular: 0x00ff00, shininess: 20, wireframe: true });\nconst geometry = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.SphereGeometry(50, 7, 7);\n\nconst sphere = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Mesh(geometry, material);\nsphere.position.set(25, 50, 0);\nsphere.castShadow = true;\n/* harmony default export */ __webpack_exports__[\"a\"] = (sphere);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL3NwaGVyZS5qcz84Yzc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUSFJFRSBmcm9tICd0aHJlZSc7XG5cbnZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvcihcIiMwMGZmMDBcIik7XG52YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogY29sb3IuZ2V0SGV4KCksIHNwZWN1bGFyOiAweDAwZmYwMCwgc2hpbmluZXNzOiAyMCwgd2lyZWZyYW1lOiB0cnVlIH0pO1xuY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoNTAsIDcsIDcpO1xuXG5jb25zdCBzcGhlcmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuc3BoZXJlLnBvc2l0aW9uLnNldCgyNSwgNTAsIDApO1xuc3BoZXJlLmNhc3RTaGFkb3cgPSB0cnVlO1xuZXhwb3J0IGRlZmF1bHQgc3BoZXJlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvZWxlbWVudHMvc3BoZXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\nvar loader = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.TextureLoader();\n\nfunction plane(scene) {\n  loader.load('./textures/1.png', texture => {\n    texture.wrapS = __WEBPACK_IMPORTED_MODULE_0_three___default.a.RepeatWrapping;\n    texture.wrapT = __WEBPACK_IMPORTED_MODULE_0_three___default.a.RepeatWrapping;\n    texture.repeat.set(12, 12);\n    const geometry = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.PlaneGeometry(1000, 1000);\n    const material = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.MeshPhongMaterial({ side: __WEBPACK_IMPORTED_MODULE_0_three___default.a.DoubleSide, map: texture, shininess: 2 });\n    const obj = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Mesh(geometry, material);\n    obj.rotateX(-Math.PI / 2);\n    scene.add(obj);\n\n    obj.receiveShadow = true;\n  });\n}\n/* harmony default export */ __webpack_exports__[\"a\"] = (plane);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL3BsYW5lQm90dG9tLmpzPzE0NWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRIUkVFIGZyb20gJ3RocmVlJztcbnZhciBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xuXG5mdW5jdGlvbiBwbGFuZShzY2VuZSkge1xuICBsb2FkZXIubG9hZCgnLi90ZXh0dXJlcy8xLnBuZycsIHRleHR1cmUgPT4ge1xuICAgIHRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgdGV4dHVyZS5yZXBlYXQuc2V0KDEyLCAxMik7XG4gICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMDAwLCAxMDAwKTtcbiAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7IHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsIG1hcDogdGV4dHVyZSwgc2hpbmluZXNzOiAyIH0pO1xuICAgIGNvbnN0IG9iaiA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gICAgb2JqLnJvdGF0ZVgoLU1hdGguUEkgLyAyKTtcbiAgICBzY2VuZS5hZGQob2JqKTtcblxuICAgIG9iai5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBwbGFuZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2VsZW1lbnRzL3BsYW5lQm90dG9tLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three_collada_loader__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three_collada_loader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three_collada_loader__);\n\n\nconst loader = new __WEBPACK_IMPORTED_MODULE_0_three_collada_loader___default.a();\nfunction lamp(scene) {\n    loader.load('./models/lamp/model.dae', texture => {\n        texture.scene.scale.set(2, 2, 2);\n        texture.scene.rotation.set(-1.53, 0, 0);\n        texture.scene.position.set(200, -2, 100);\n        scene.add(texture.scene);\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (lamp);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2VsZW1lbnRzL2xhbXAuanM/MDQ5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29sbGFkYUxvYWRlciBmcm9tICd0aHJlZS1jb2xsYWRhLWxvYWRlcic7XG5cbmNvbnN0IGxvYWRlciA9IG5ldyBDb2xsYWRhTG9hZGVyKCk7XG5mdW5jdGlvbiBsYW1wKHNjZW5lKSB7XG4gICAgbG9hZGVyLmxvYWQoJy4vbW9kZWxzL2xhbXAvbW9kZWwuZGFlJywgdGV4dHVyZSA9PiB7XG4gICAgICAgIHRleHR1cmUuc2NlbmUuc2NhbGUuc2V0KDIsIDIsIDIpO1xuICAgICAgICB0ZXh0dXJlLnNjZW5lLnJvdGF0aW9uLnNldCgtMS41MywgMCwgMCk7XG4gICAgICAgIHRleHR1cmUuc2NlbmUucG9zaXRpb24uc2V0KDIwMCwgLTIsIDEwMCk7XG4gICAgICAgIHNjZW5lLmFkZCh0ZXh0dXJlLnNjZW5lKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbGFtcDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2VsZW1lbnRzL2xhbXAuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

eval("var THREE = __webpack_require__(0);\n\n/**\n* @author Tim Knip / http://www.floorplanner.com/ / tim at floorplanner.com\n* @author Tony Parisi / http://www.tonyparisi.com/\n*/\n\nvar ColladaLoader = function () {\n\n    var COLLADA = null;\n    var scene = null;\n    var visualScene;\n    var kinematicsModel;\n\n    var readyCallbackFunc = null;\n\n    var sources = {};\n    var images = {};\n    var animations = {};\n    var controllers = {};\n    var geometries = {};\n    var materials = {};\n    var effects = {};\n    var cameras = {};\n    var lights = {};\n\n    var animData;\n    var kinematics;\n    var visualScenes;\n    var kinematicsModels;\n    var baseUrl;\n    var morphs;\n    var skins;\n\n    var flip_uv = true;\n    var preferredShading = THREE.SmoothShading;\n\n    var options = {\n        // Force Geometry to always be centered at the local origin of the\n        // containing Mesh.\n        centerGeometry: false,\n\n        // Axis conversion is done for geometries, animations, and controllers.\n        // If we ever pull cameras or lights out of the COLLADA file, they'll\n        // need extra work.\n        convertUpAxis: false,\n\n        subdivideFaces: true,\n\n        upAxis: 'Y',\n\n        // For reflective or refractive materials we'll use this cubemap\n        defaultEnvMap: null\n\n    };\n\n    var colladaUnit = 1.0;\n    var colladaUp = 'Y';\n    var upConversion = null;\n\n    function load(url, readyCallback, progressCallback, failCallback) {\n\n        var length = 0;\n\n        if (document.implementation && document.implementation.createDocument) {\n\n            var request = new XMLHttpRequest();\n\n            request.onreadystatechange = function () {\n\n                if (request.readyState === 4) {\n\n                    if (request.status === 0 || request.status === 200) {\n\n                        if (request.response) {\n\n                            readyCallbackFunc = readyCallback;\n                            parse(request.response, undefined, url);\n                        } else {\n\n                            if (failCallback) {\n\n                                failCallback();\n                            } else {\n\n                                console.error(\"ColladaLoader: Empty or non-existing file (\" + url + \")\");\n                            }\n                        }\n                    }\n                } else if (request.readyState === 3) {\n\n                    if (progressCallback) {\n\n                        if (length === 0) {\n\n                            length = request.getResponseHeader(\"Content-Length\");\n                        }\n\n                        progressCallback({ total: length, loaded: request.responseText.length });\n                    }\n                }\n            };\n\n            request.open(\"GET\", url, true);\n            request.send(null);\n        } else {\n\n            alert(\"Don't know how to parse XML!\");\n        }\n    }\n\n    function parse(text, callBack, url) {\n\n        COLLADA = new DOMParser().parseFromString(text, 'text/xml');\n        callBack = callBack || readyCallbackFunc;\n\n        if (url !== undefined) {\n\n            var parts = url.split('/');\n            parts.pop();\n            baseUrl = (parts.length < 1 ? '.' : parts.join('/')) + '/';\n        }\n\n        parseAsset();\n        setUpConversion();\n        images = parseLib(\"library_images image\", _Image, \"image\");\n        materials = parseLib(\"library_materials material\", Material, \"material\");\n        effects = parseLib(\"library_effects effect\", Effect, \"effect\");\n        geometries = parseLib(\"library_geometries geometry\", Geometry, \"geometry\");\n        cameras = parseLib(\"library_cameras camera\", Camera, \"camera\");\n        lights = parseLib(\"library_lights light\", Light, \"light\");\n        controllers = parseLib(\"library_controllers controller\", Controller, \"controller\");\n        animations = parseLib(\"library_animations animation\", Animation, \"animation\");\n        visualScenes = parseLib(\"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\");\n        kinematicsModels = parseLib(\"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\");\n\n        morphs = [];\n        skins = [];\n\n        visualScene = parseScene();\n        scene = new THREE.Group();\n\n        for (var i = 0; i < visualScene.nodes.length; i++) {\n\n            scene.add(createSceneGraph(visualScene.nodes[i]));\n        }\n\n        // unit conversion\n        scene.scale.multiplyScalar(colladaUnit);\n\n        createAnimations();\n\n        kinematicsModel = parseKinematicsModel();\n        createKinematics();\n\n        var result = {\n\n            scene: scene,\n            morphs: morphs,\n            skins: skins,\n            animations: animData,\n            kinematics: kinematics,\n            dae: {\n                images: images,\n                materials: materials,\n                cameras: cameras,\n                lights: lights,\n                effects: effects,\n                geometries: geometries,\n                controllers: controllers,\n                animations: animations,\n                visualScenes: visualScenes,\n                visualScene: visualScene,\n                scene: visualScene,\n                kinematicsModels: kinematicsModels,\n                kinematicsModel: kinematicsModel\n            }\n\n        };\n\n        if (callBack) {\n\n            callBack(result);\n        }\n\n        return result;\n    }\n\n    function setPreferredShading(shading) {\n\n        preferredShading = shading;\n    }\n\n    function parseAsset() {\n\n        var elements = COLLADA.querySelectorAll('asset');\n\n        var element = elements[0];\n\n        if (element && element.childNodes) {\n\n            for (var i = 0; i < element.childNodes.length; i++) {\n\n                var child = element.childNodes[i];\n\n                switch (child.nodeName) {\n\n                    case 'unit':\n\n                        var meter = child.getAttribute('meter');\n\n                        if (meter) {\n\n                            colladaUnit = parseFloat(meter);\n                        }\n\n                        break;\n\n                    case 'up_axis':\n\n                        colladaUp = child.textContent.charAt(0);\n                        break;\n\n                }\n            }\n        }\n    }\n\n    function parseLib(q, classSpec, prefix) {\n\n        var elements = COLLADA.querySelectorAll(q);\n\n        var lib = {};\n\n        var i = 0;\n\n        var elementsLength = elements.length;\n\n        for (var j = 0; j < elementsLength; j++) {\n\n            var element = elements[j];\n            var daeElement = new classSpec().parse(element);\n\n            if (!daeElement.id || daeElement.id.length === 0) daeElement.id = prefix + i++;\n            lib[daeElement.id] = daeElement;\n        }\n\n        return lib;\n    }\n\n    function parseScene() {\n\n        var sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\n        if (sceneElement) {\n\n            var url = sceneElement.getAttribute('url').replace(/^#/, '');\n            return visualScenes[url.length > 0 ? url : 'visual_scene0'];\n        } else {\n\n            return null;\n        }\n    }\n\n    function parseKinematicsModel() {\n\n        var kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\n\n        if (kinematicsModelElement) {\n\n            var url = kinematicsModelElement.getAttribute('url').replace(/^#/, '');\n            return kinematicsModels[url.length > 0 ? url : 'kinematics_model0'];\n        } else {\n\n            return null;\n        }\n    }\n\n    function createAnimations() {\n\n        animData = [];\n\n        // fill in the keys\n        recurseHierarchy(scene);\n    }\n\n    function recurseHierarchy(node) {\n\n        var n = visualScene.getChildById(node.colladaId, true),\n            newData = null;\n\n        if (n && n.keys) {\n\n            newData = {\n                fps: 60,\n                hierarchy: [{\n                    node: n,\n                    keys: n.keys,\n                    sids: n.sids\n                }],\n                node: node,\n                name: 'animation_' + node.name,\n                length: 0\n            };\n\n            animData.push(newData);\n\n            for (var i = 0, il = n.keys.length; i < il; i++) {\n\n                newData.length = Math.max(newData.length, n.keys[i].time);\n            }\n        } else {\n\n            newData = {\n                hierarchy: [{\n                    keys: [],\n                    sids: []\n                }]\n            };\n        }\n\n        for (var i = 0, il = node.children.length; i < il; i++) {\n\n            var d = recurseHierarchy(node.children[i]);\n\n            for (var j = 0, jl = d.hierarchy.length; j < jl; j++) {\n\n                newData.hierarchy.push({\n                    keys: [],\n                    sids: []\n                });\n            }\n        }\n\n        return newData;\n    }\n\n    function calcAnimationBounds() {\n\n        var start = 1000000;\n        var end = -start;\n        var frames = 0;\n        var ID;\n        for (var id in animations) {\n\n            var animation = animations[id];\n            ID = ID || animation.id;\n            for (var i = 0; i < animation.sampler.length; i++) {\n\n                var sampler = animation.sampler[i];\n\n                sampler.create();\n\n                start = Math.min(start, sampler.startTime);\n                end = Math.max(end, sampler.endTime);\n                frames = Math.max(frames, sampler.input.length);\n            }\n        }\n\n        return { start: start, end: end, frames: frames, ID: ID };\n    }\n\n    function createMorph(geometry, ctrl) {\n\n        var morphCtrl = ctrl instanceof InstanceController ? controllers[ctrl.url] : ctrl;\n\n        if (!morphCtrl || !morphCtrl.morph) {\n\n            console.log(\"could not find morph controller!\");\n            return;\n        }\n\n        var morph = morphCtrl.morph;\n\n        for (var i = 0; i < morph.targets.length; i++) {\n\n            var target_id = morph.targets[i];\n            var daeGeometry = geometries[target_id];\n\n            if (!daeGeometry.mesh || !daeGeometry.mesh.primitives || !daeGeometry.mesh.primitives.length) {\n                continue;\n            }\n\n            var target = daeGeometry.mesh.primitives[0].geometry;\n\n            if (target.vertices.length === geometry.vertices.length) {\n\n                geometry.morphTargets.push({ name: \"target_1\", vertices: target.vertices });\n            }\n        }\n\n        geometry.morphTargets.push({ name: \"target_Z\", vertices: geometry.vertices });\n    }\n\n    function createSkin(geometry, ctrl, applyBindShape) {\n\n        var skinCtrl = controllers[ctrl.url];\n\n        if (!skinCtrl || !skinCtrl.skin) {\n\n            console.log(\"could not find skin controller!\");\n            return;\n        }\n\n        if (!ctrl.skeleton || !ctrl.skeleton.length) {\n\n            console.log(\"could not find the skeleton for the skin!\");\n            return;\n        }\n\n        var skin = skinCtrl.skin;\n        var skeleton = visualScene.getChildById(ctrl.skeleton[0]);\n        var hierarchy = [];\n\n        applyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n        var bones = [];\n        geometry.skinWeights = [];\n        geometry.skinIndices = [];\n\n        //createBones( geometry.bones, skin, hierarchy, skeleton, null, -1 );\n        //createWeights( skin, geometry.bones, geometry.skinIndices, geometry.skinWeights );\n\n        /*\n        geometry.animation = {\n            name: 'take_001',\n            fps: 30,\n            length: 2,\n            JIT: true,\n            hierarchy: hierarchy\n        };\n        */\n\n        if (applyBindShape) {\n\n            for (var i = 0; i < geometry.vertices.length; i++) {\n\n                geometry.vertices[i].applyMatrix4(skin.bindShapeMatrix);\n            }\n        }\n    }\n\n    function setupSkeleton(node, bones, frame, parent) {\n\n        node.world = node.world || new THREE.Matrix4();\n        node.localworld = node.localworld || new THREE.Matrix4();\n        node.world.copy(node.matrix);\n        node.localworld.copy(node.matrix);\n\n        if (node.channels && node.channels.length) {\n\n            var channel = node.channels[0];\n            var m = channel.sampler.output[frame];\n\n            if (m instanceof THREE.Matrix4) {\n\n                node.world.copy(m);\n                node.localworld.copy(m);\n                if (frame === 0) node.matrix.copy(m);\n            }\n        }\n\n        if (parent) {\n\n            node.world.multiplyMatrices(parent, node.world);\n        }\n\n        bones.push(node);\n\n        for (var i = 0; i < node.nodes.length; i++) {\n\n            setupSkeleton(node.nodes[i], bones, frame, node.world);\n        }\n    }\n\n    function setupSkinningMatrices(bones, skin) {\n\n        // FIXME: this is dumb...\n\n        for (var i = 0; i < bones.length; i++) {\n\n            var bone = bones[i];\n            var found = -1;\n\n            if (bone.type != 'JOINT') continue;\n\n            for (var j = 0; j < skin.joints.length; j++) {\n\n                if (bone.sid === skin.joints[j]) {\n\n                    found = j;\n                    break;\n                }\n            }\n\n            if (found >= 0) {\n\n                var inv = skin.invBindMatrices[found];\n\n                bone.invBindMatrix = inv;\n                bone.skinningMatrix = new THREE.Matrix4();\n                bone.skinningMatrix.multiplyMatrices(bone.world, inv); // (IBMi * JMi)\n                bone.animatrix = new THREE.Matrix4();\n\n                bone.animatrix.copy(bone.localworld);\n                bone.weights = [];\n\n                for (var j = 0; j < skin.weights.length; j++) {\n\n                    for (var k = 0; k < skin.weights[j].length; k++) {\n\n                        var w = skin.weights[j][k];\n\n                        if (w.joint === found) {\n\n                            bone.weights.push(w);\n                        }\n                    }\n                }\n            } else {\n\n                console.warn(\"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\");\n\n                bone.skinningMatrix = new THREE.Matrix4();\n                bone.weights = [];\n            }\n        }\n    }\n\n    //Walk the Collada tree and flatten the bones into a list, extract the position, quat and scale from the matrix\n    function flattenSkeleton(skeleton) {\n\n        var list = [];\n        var walk = function (parentid, node, list) {\n\n            var bone = {};\n            bone.name = node.sid;\n            bone.parent = parentid;\n            bone.matrix = node.matrix;\n            var data = [new THREE.Vector3(), new THREE.Quaternion(), new THREE.Vector3()];\n            bone.matrix.decompose(data[0], data[1], data[2]);\n\n            bone.pos = [data[0].x, data[0].y, data[0].z];\n\n            bone.scl = [data[2].x, data[2].y, data[2].z];\n            bone.rotq = [data[1].x, data[1].y, data[1].z, data[1].w];\n            list.push(bone);\n\n            for (var i in node.nodes) {\n\n                walk(node.sid, node.nodes[i], list);\n            }\n        };\n\n        walk(-1, skeleton, list);\n        return list;\n    }\n\n    //Move the vertices into the pose that is proper for the start of the animation\n    function skinToBindPose(geometry, skeleton, skinController) {\n\n        var bones = [];\n        setupSkeleton(skeleton, bones, -1);\n        setupSkinningMatrices(bones, skinController.skin);\n        var v = new THREE.Vector3();\n        var skinned = [];\n\n        for (var i = 0; i < geometry.vertices.length; i++) {\n\n            skinned.push(new THREE.Vector3());\n        }\n\n        for (i = 0; i < bones.length; i++) {\n\n            if (bones[i].type != 'JOINT') continue;\n\n            for (var j = 0; j < bones[i].weights.length; j++) {\n\n                var w = bones[i].weights[j];\n                var vidx = w.index;\n                var weight = w.weight;\n\n                var o = geometry.vertices[vidx];\n                var s = skinned[vidx];\n\n                v.x = o.x;\n                v.y = o.y;\n                v.z = o.z;\n\n                v.applyMatrix4(bones[i].skinningMatrix);\n\n                s.x += v.x * weight;\n                s.y += v.y * weight;\n                s.z += v.z * weight;\n            }\n        }\n\n        for (var i = 0; i < geometry.vertices.length; i++) {\n\n            geometry.vertices[i] = skinned[i];\n        }\n    }\n\n    function applySkin(geometry, instanceCtrl, frame) {\n\n        var skinController = controllers[instanceCtrl.url];\n\n        frame = frame !== undefined ? frame : 40;\n\n        if (!skinController || !skinController.skin) {\n\n            console.log('ColladaLoader: Could not find skin controller.');\n            return;\n        }\n\n        if (!instanceCtrl.skeleton || !instanceCtrl.skeleton.length) {\n\n            console.log('ColladaLoader: Could not find the skeleton for the skin. ');\n            return;\n        }\n\n        var animationBounds = calcAnimationBounds();\n        var skeleton = visualScene.getChildById(instanceCtrl.skeleton[0], true) || visualScene.getChildBySid(instanceCtrl.skeleton[0], true);\n\n        //flatten the skeleton into a list of bones\n        var bonelist = flattenSkeleton(skeleton);\n        var joints = skinController.skin.joints;\n\n        //sort that list so that the order reflects the order in the joint list\n        var sortedbones = [];\n        for (var i = 0; i < joints.length; i++) {\n\n            for (var j = 0; j < bonelist.length; j++) {\n\n                if (bonelist[j].name === joints[i]) {\n\n                    sortedbones[i] = bonelist[j];\n                }\n            }\n        }\n\n        //hook up the parents by index instead of name\n        for (var i = 0; i < sortedbones.length; i++) {\n\n            for (var j = 0; j < sortedbones.length; j++) {\n\n                if (sortedbones[i].parent === sortedbones[j].name) {\n\n                    sortedbones[i].parent = j;\n                }\n            }\n        }\n\n        var i, j, w, vidx, weight;\n        var v = new THREE.Vector3(),\n            o,\n            s;\n\n        // move vertices to bind shape\n        for (i = 0; i < geometry.vertices.length; i++) {\n            geometry.vertices[i].applyMatrix4(skinController.skin.bindShapeMatrix);\n        }\n\n        var skinIndices = [];\n        var skinWeights = [];\n        var weights = skinController.skin.weights;\n\n        // hook up the skin weights\n        // TODO - this might be a good place to choose greatest 4 weights\n        for (var i = 0; i < weights.length; i++) {\n\n            var indicies = new THREE.Vector4(weights[i][0] ? weights[i][0].joint : 0, weights[i][1] ? weights[i][1].joint : 0, weights[i][2] ? weights[i][2].joint : 0, weights[i][3] ? weights[i][3].joint : 0);\n            var weight = new THREE.Vector4(weights[i][0] ? weights[i][0].weight : 0, weights[i][1] ? weights[i][1].weight : 0, weights[i][2] ? weights[i][2].weight : 0, weights[i][3] ? weights[i][3].weight : 0);\n\n            skinIndices.push(indicies);\n            skinWeights.push(weight);\n        }\n\n        geometry.skinIndices = skinIndices;\n        geometry.skinWeights = skinWeights;\n        geometry.bones = sortedbones;\n        // process animation, or simply pose the rig if no animation\n\n        //create an animation for the animated bones\n        //NOTE: this has no effect when using morphtargets\n        var animationdata = { \"name\": animationBounds.ID, \"fps\": 30, \"length\": animationBounds.frames / 30, \"hierarchy\": [] };\n\n        for (var j = 0; j < sortedbones.length; j++) {\n\n            animationdata.hierarchy.push({ parent: sortedbones[j].parent, name: sortedbones[j].name, keys: [] });\n        }\n\n        console.log('ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.');\n\n        skinToBindPose(geometry, skeleton, skinController);\n\n        for (frame = 0; frame < animationBounds.frames; frame++) {\n\n            var bones = [];\n            var skinned = [];\n            // process the frame and setup the rig with a fresh\n            // transform, possibly from the bone's animation channel(s)\n\n            setupSkeleton(skeleton, bones, frame);\n            setupSkinningMatrices(bones, skinController.skin);\n\n            for (var i = 0; i < bones.length; i++) {\n\n                for (var j = 0; j < animationdata.hierarchy.length; j++) {\n\n                    if (animationdata.hierarchy[j].name === bones[i].sid) {\n\n                        var key = {};\n                        key.time = frame / 30;\n                        key.matrix = bones[i].animatrix;\n\n                        if (frame === 0) bones[i].matrix = key.matrix;\n\n                        var data = [new THREE.Vector3(), new THREE.Quaternion(), new THREE.Vector3()];\n                        key.matrix.decompose(data[0], data[1], data[2]);\n\n                        key.pos = [data[0].x, data[0].y, data[0].z];\n\n                        key.scl = [data[2].x, data[2].y, data[2].z];\n                        key.rot = data[1];\n\n                        animationdata.hierarchy[j].keys.push(key);\n                    }\n                }\n            }\n\n            geometry.animation = animationdata;\n        }\n    }\n\n    function createKinematics() {\n\n        if (kinematicsModel && kinematicsModel.joints.length === 0) {\n            kinematics = undefined;\n            return;\n        }\n\n        var jointMap = {};\n\n        var _addToMap = function (jointIndex, parentVisualElement) {\n\n            var parentVisualElementId = parentVisualElement.getAttribute('id');\n            var colladaNode = visualScene.getChildById(parentVisualElementId, true);\n            var joint = kinematicsModel.joints[jointIndex];\n\n            scene.traverse(function (node) {\n\n                if (node.colladaId == parentVisualElementId) {\n\n                    jointMap[jointIndex] = {\n                        node: node,\n                        transforms: colladaNode.transforms,\n                        joint: joint,\n                        position: joint.zeroPosition\n                    };\n                }\n            });\n        };\n\n        kinematics = {\n\n            joints: kinematicsModel && kinematicsModel.joints,\n\n            getJointValue: function (jointIndex) {\n\n                var jointData = jointMap[jointIndex];\n\n                if (jointData) {\n\n                    return jointData.position;\n                } else {\n\n                    console.log('getJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n                }\n            },\n\n            setJointValue: function (jointIndex, value) {\n\n                var jointData = jointMap[jointIndex];\n\n                if (jointData) {\n\n                    var joint = jointData.joint;\n\n                    if (value > joint.limits.max || value < joint.limits.min) {\n\n                        console.log('setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')');\n                    } else if (joint.static) {\n\n                        console.log('setJointValue: joint ' + jointIndex + ' is static');\n                    } else {\n\n                        var threejsNode = jointData.node;\n                        var axis = joint.axis;\n                        var transforms = jointData.transforms;\n\n                        var matrix = new THREE.Matrix4();\n\n                        for (i = 0; i < transforms.length; i++) {\n\n                            var transform = transforms[i];\n\n                            // kinda ghetto joint detection\n                            if (transform.sid && transform.sid.indexOf('joint' + jointIndex) !== -1) {\n\n                                // apply actual joint value here\n                                switch (joint.type) {\n\n                                    case 'revolute':\n\n                                        matrix.multiply(m1.makeRotationAxis(axis, THREE.Math.degToRad(value)));\n                                        break;\n\n                                    case 'prismatic':\n\n                                        matrix.multiply(m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n                                        break;\n\n                                    default:\n\n                                        console.warn('setJointValue: unknown joint type: ' + joint.type);\n                                        break;\n\n                                }\n                            } else {\n\n                                var m1 = new THREE.Matrix4();\n\n                                switch (transform.type) {\n\n                                    case 'matrix':\n\n                                        matrix.multiply(transform.obj);\n\n                                        break;\n\n                                    case 'translate':\n\n                                        matrix.multiply(m1.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n\n                                        break;\n\n                                    case 'rotate':\n\n                                        matrix.multiply(m1.makeRotationAxis(transform.obj, transform.angle));\n\n                                        break;\n\n                                }\n                            }\n                        }\n\n                        // apply the matrix to the threejs node\n                        var elementsFloat32Arr = matrix.elements;\n                        var elements = Array.prototype.slice.call(elementsFloat32Arr);\n\n                        var elementsRowMajor = [elements[0], elements[4], elements[8], elements[12], elements[1], elements[5], elements[9], elements[13], elements[2], elements[6], elements[10], elements[14], elements[3], elements[7], elements[11], elements[15]];\n\n                        threejsNode.matrix.set.apply(threejsNode.matrix, elementsRowMajor);\n                        threejsNode.matrix.decompose(threejsNode.position, threejsNode.quaternion, threejsNode.scale);\n                    }\n                } else {\n\n                    console.log('setJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n                }\n            }\n\n        };\n\n        var element = COLLADA.querySelector('scene instance_kinematics_scene');\n\n        if (element) {\n\n            for (var i = 0; i < element.childNodes.length; i++) {\n\n                var child = element.childNodes[i];\n\n                if (child.nodeType != 1) continue;\n\n                switch (child.nodeName) {\n\n                    case 'bind_joint_axis':\n\n                        var visualTarget = child.getAttribute('target').split('/').pop();\n                        var axis = child.querySelector('axis param').textContent;\n                        var jointIndex = parseInt(axis.split('joint').pop().split('.')[0]);\n                        var visualTargetElement = COLLADA.querySelector('[sid=\"' + visualTarget + '\"]');\n\n                        if (visualTargetElement) {\n                            var parentVisualElement = visualTargetElement.parentElement;\n                            _addToMap(jointIndex, parentVisualElement);\n                        }\n\n                        break;\n\n                    default:\n\n                        break;\n\n                }\n            }\n        }\n    }\n\n    function createSceneGraph(node, parent) {\n\n        var obj = new THREE.Object3D();\n        var skinned = false;\n        var skinController;\n        var morphController;\n        var i, j;\n\n        // FIXME: controllers\n\n        for (i = 0; i < node.controllers.length; i++) {\n\n            var controller = controllers[node.controllers[i].url];\n\n            switch (controller.type) {\n\n                case 'skin':\n\n                    if (geometries[controller.skin.source]) {\n\n                        var inst_geom = new InstanceGeometry();\n\n                        inst_geom.url = controller.skin.source;\n                        inst_geom.instance_material = node.controllers[i].instance_material;\n\n                        node.geometries.push(inst_geom);\n                        skinned = true;\n                        skinController = node.controllers[i];\n                    } else if (controllers[controller.skin.source]) {\n\n                        // urgh: controller can be chained\n                        // handle the most basic case...\n\n                        var second = controllers[controller.skin.source];\n                        morphController = second;\n                        //\tskinController = node.controllers[i];\n\n                        if (second.morph && geometries[second.morph.source]) {\n\n                            var inst_geom = new InstanceGeometry();\n\n                            inst_geom.url = second.morph.source;\n                            inst_geom.instance_material = node.controllers[i].instance_material;\n\n                            node.geometries.push(inst_geom);\n                        }\n                    }\n\n                    break;\n\n                case 'morph':\n\n                    if (geometries[controller.morph.source]) {\n\n                        var inst_geom = new InstanceGeometry();\n\n                        inst_geom.url = controller.morph.source;\n                        inst_geom.instance_material = node.controllers[i].instance_material;\n\n                        node.geometries.push(inst_geom);\n                        morphController = node.controllers[i];\n                    }\n\n                    console.log('ColladaLoader: Morph-controller partially supported.');\n\n                default:\n                    break;\n\n            }\n        }\n\n        // geometries\n\n        var double_sided_materials = {};\n\n        for (i = 0; i < node.geometries.length; i++) {\n\n            var instance_geometry = node.geometries[i];\n            var instance_materials = instance_geometry.instance_material;\n            var geometry = geometries[instance_geometry.url];\n            var used_materials = {};\n            var used_materials_array = [];\n            var num_materials = 0;\n            var first_material;\n\n            if (geometry) {\n\n                if (!geometry.mesh || !geometry.mesh.primitives) continue;\n\n                if (obj.name.length === 0) {\n\n                    obj.name = geometry.id;\n                }\n\n                // collect used fx for this geometry-instance\n\n                if (instance_materials) {\n\n                    for (j = 0; j < instance_materials.length; j++) {\n\n                        var instance_material = instance_materials[j];\n                        var mat = materials[instance_material.target];\n                        var effect_id = mat.instance_effect.url;\n                        var shader = effects[effect_id].shader;\n                        var material3js = shader.material;\n\n                        if (geometry.doubleSided) {\n\n                            if (!(instance_material.symbol in double_sided_materials)) {\n\n                                var _copied_material = material3js.clone();\n                                _copied_material.side = THREE.DoubleSide;\n                                double_sided_materials[instance_material.symbol] = _copied_material;\n                            }\n\n                            material3js = double_sided_materials[instance_material.symbol];\n                        }\n\n                        material3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n                        used_materials[instance_material.symbol] = num_materials;\n                        used_materials_array.push(material3js);\n                        first_material = material3js;\n                        first_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\n                        num_materials++;\n                    }\n                }\n\n                var mesh;\n                var material = first_material || new THREE.MeshLambertMaterial({ color: 0xdddddd, side: geometry.doubleSided ? THREE.DoubleSide : THREE.FrontSide });\n                var geom = geometry.mesh.geometry3js;\n\n                if (num_materials > 1) {\n\n                    material = new THREE.MultiMaterial(used_materials_array);\n                }\n\n                if (skinController !== undefined) {\n\n                    applySkin(geom, skinController);\n\n                    if (geom.morphTargets.length > 0) {\n\n                        material.morphTargets = true;\n                        material.skinning = false;\n                    } else {\n\n                        material.morphTargets = false;\n                        material.skinning = true;\n                    }\n\n                    mesh = new THREE.SkinnedMesh(geom, material, false);\n\n                    //mesh.skeleton = skinController.skeleton;\n                    //mesh.skinController = controllers[ skinController.url ];\n                    //mesh.skinInstanceController = skinController;\n                    mesh.name = 'skin_' + skins.length;\n\n                    //mesh.animationHandle.setKey(0);\n                    skins.push(mesh);\n                } else if (morphController !== undefined) {\n\n                    createMorph(geom, morphController);\n\n                    material.morphTargets = true;\n\n                    mesh = new THREE.Mesh(geom, material);\n                    mesh.name = 'morph_' + morphs.length;\n\n                    morphs.push(mesh);\n                } else {\n\n                    if (geom.isLineStrip === true) {\n\n                        mesh = new THREE.Line(geom);\n                    } else {\n\n                        mesh = new THREE.Mesh(geom, material);\n                    }\n                }\n\n                obj.add(mesh);\n            }\n        }\n\n        for (i = 0; i < node.cameras.length; i++) {\n\n            var instance_camera = node.cameras[i];\n            var cparams = cameras[instance_camera.url];\n\n            var cam = new THREE.PerspectiveCamera(cparams.yfov, parseFloat(cparams.aspect_ratio), parseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n            obj.add(cam);\n        }\n\n        for (i = 0; i < node.lights.length; i++) {\n\n            var light = null;\n            var instance_light = node.lights[i];\n            var lparams = lights[instance_light.url];\n\n            if (lparams && lparams.technique) {\n\n                var color = lparams.color.getHex();\n                var intensity = lparams.intensity;\n                var distance = lparams.distance;\n                var angle = lparams.falloff_angle;\n\n                switch (lparams.technique) {\n\n                    case 'directional':\n\n                        light = new THREE.DirectionalLight(color, intensity, distance);\n                        light.position.set(0, 0, 1);\n                        break;\n\n                    case 'point':\n\n                        light = new THREE.PointLight(color, intensity, distance);\n                        break;\n\n                    case 'spot':\n\n                        light = new THREE.SpotLight(color, intensity, distance, angle);\n                        light.position.set(0, 0, 1);\n                        break;\n\n                    case 'ambient':\n\n                        light = new THREE.AmbientLight(color);\n                        break;\n\n                }\n            }\n\n            if (light) {\n                obj.add(light);\n            }\n        }\n\n        obj.name = node.name || node.id || \"\";\n        obj.colladaId = node.id || \"\";\n        obj.layer = node.layer || \"\";\n        obj.matrix = node.matrix;\n        obj.matrix.decompose(obj.position, obj.quaternion, obj.scale);\n\n        if (options.centerGeometry && obj.geometry) {\n\n            var delta = obj.geometry.center();\n            delta.multiply(obj.scale);\n            delta.applyQuaternion(obj.quaternion);\n\n            obj.position.sub(delta);\n        }\n\n        for (i = 0; i < node.nodes.length; i++) {\n\n            obj.add(createSceneGraph(node.nodes[i], node));\n        }\n\n        return obj;\n    }\n\n    function getJointId(skin, id) {\n\n        for (var i = 0; i < skin.joints.length; i++) {\n\n            if (skin.joints[i] === id) {\n\n                return i;\n            }\n        }\n    }\n\n    function getLibraryNode(id) {\n\n        var nodes = COLLADA.querySelectorAll('library_nodes node');\n\n        for (var i = 0; i < nodes.length; i++) {\n\n            var attObj = nodes[i].attributes.getNamedItem('id');\n\n            if (attObj && attObj.value === id) {\n\n                return nodes[i];\n            }\n        }\n\n        return undefined;\n    }\n\n    function getChannelsForNode(node) {\n\n        var channels = [];\n        var startTime = 1000000;\n        var endTime = -1000000;\n\n        for (var id in animations) {\n\n            var animation = animations[id];\n\n            for (var i = 0; i < animation.channel.length; i++) {\n\n                var channel = animation.channel[i];\n                var sampler = animation.sampler[i];\n                var id = channel.target.split('/')[0];\n\n                if (id == node.id) {\n\n                    sampler.create();\n                    channel.sampler = sampler;\n                    startTime = Math.min(startTime, sampler.startTime);\n                    endTime = Math.max(endTime, sampler.endTime);\n                    channels.push(channel);\n                }\n            }\n        }\n\n        if (channels.length) {\n\n            node.startTime = startTime;\n            node.endTime = endTime;\n        }\n\n        return channels;\n    }\n\n    function calcFrameDuration(node) {\n\n        var minT = 10000000;\n\n        for (var i = 0; i < node.channels.length; i++) {\n\n            var sampler = node.channels[i].sampler;\n\n            for (var j = 0; j < sampler.input.length - 1; j++) {\n\n                var t0 = sampler.input[j];\n                var t1 = sampler.input[j + 1];\n                minT = Math.min(minT, t1 - t0);\n            }\n        }\n\n        return minT;\n    }\n\n    function calcMatrixAt(node, t) {\n\n        var animated = {};\n\n        var i, j;\n\n        for (i = 0; i < node.channels.length; i++) {\n\n            var channel = node.channels[i];\n            animated[channel.sid] = channel;\n        }\n\n        var matrix = new THREE.Matrix4();\n\n        for (i = 0; i < node.transforms.length; i++) {\n\n            var transform = node.transforms[i];\n            var channel = animated[transform.sid];\n\n            if (channel !== undefined) {\n\n                var sampler = channel.sampler;\n                var value;\n\n                for (j = 0; j < sampler.input.length - 1; j++) {\n\n                    if (sampler.input[j + 1] > t) {\n\n                        value = sampler.output[j];\n                        //console.log(value.flatten)\n                        break;\n                    }\n                }\n\n                if (value !== undefined) {\n\n                    if (value instanceof THREE.Matrix4) {\n\n                        matrix.multiplyMatrices(matrix, value);\n                    } else {\n\n                        // FIXME: handle other types\n\n                        matrix.multiplyMatrices(matrix, transform.matrix);\n                    }\n                } else {\n\n                    matrix.multiplyMatrices(matrix, transform.matrix);\n                }\n            } else {\n\n                matrix.multiplyMatrices(matrix, transform.matrix);\n            }\n        }\n\n        return matrix;\n    }\n\n    function bakeAnimations(node) {\n\n        if (node.channels && node.channels.length) {\n\n            var keys = [],\n                sids = [];\n\n            for (var i = 0, il = node.channels.length; i < il; i++) {\n\n                var channel = node.channels[i],\n                    fullSid = channel.fullSid,\n                    sampler = channel.sampler,\n                    input = sampler.input,\n                    transform = node.getTransformBySid(channel.sid),\n                    member;\n\n                if (channel.arrIndices) {\n\n                    member = [];\n\n                    for (var j = 0, jl = channel.arrIndices.length; j < jl; j++) {\n\n                        member[j] = getConvertedIndex(channel.arrIndices[j]);\n                    }\n                } else {\n\n                    member = getConvertedMember(channel.member);\n                }\n\n                if (transform) {\n\n                    if (sids.indexOf(fullSid) === -1) {\n\n                        sids.push(fullSid);\n                    }\n\n                    for (var j = 0, jl = input.length; j < jl; j++) {\n\n                        var time = input[j],\n                            data = sampler.getData(transform.type, j, member),\n                            key = findKey(keys, time);\n\n                        if (!key) {\n\n                            key = new Key(time);\n                            var timeNdx = findTimeNdx(keys, time);\n                            keys.splice(timeNdx === -1 ? keys.length : timeNdx, 0, key);\n                        }\n\n                        key.addTarget(fullSid, transform, member, data);\n                    }\n                } else {\n\n                    console.log('Could not find transform \"' + channel.sid + '\" in node ' + node.id);\n                }\n            }\n\n            // post process\n            for (var i = 0; i < sids.length; i++) {\n\n                var sid = sids[i];\n\n                for (var j = 0; j < keys.length; j++) {\n\n                    var key = keys[j];\n\n                    if (!key.hasTarget(sid)) {\n\n                        interpolateKeys(keys, key, j, sid);\n                    }\n                }\n            }\n\n            node.keys = keys;\n            node.sids = sids;\n        }\n    }\n\n    function findKey(keys, time) {\n\n        var retVal = null;\n\n        for (var i = 0, il = keys.length; i < il && retVal === null; i++) {\n\n            var key = keys[i];\n\n            if (key.time === time) {\n\n                retVal = key;\n            } else if (key.time > time) {\n\n                break;\n            }\n        }\n\n        return retVal;\n    }\n\n    function findTimeNdx(keys, time) {\n\n        var ndx = -1;\n\n        for (var i = 0, il = keys.length; i < il && ndx === -1; i++) {\n\n            var key = keys[i];\n\n            if (key.time >= time) {\n\n                ndx = i;\n            }\n        }\n\n        return ndx;\n    }\n\n    function interpolateKeys(keys, key, ndx, fullSid) {\n\n        var prevKey = getPrevKeyWith(keys, fullSid, ndx ? ndx - 1 : 0),\n            nextKey = getNextKeyWith(keys, fullSid, ndx + 1);\n\n        if (prevKey && nextKey) {\n\n            var scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n                prevTarget = prevKey.getTarget(fullSid),\n                nextData = nextKey.getTarget(fullSid).data,\n                prevData = prevTarget.data,\n                data;\n\n            if (prevTarget.type === 'matrix') {\n\n                data = prevData;\n            } else if (prevData.length) {\n\n                data = [];\n\n                for (var i = 0; i < prevData.length; ++i) {\n\n                    data[i] = prevData[i] + (nextData[i] - prevData[i]) * scale;\n                }\n            } else {\n\n                data = prevData + (nextData - prevData) * scale;\n            }\n\n            key.addTarget(fullSid, prevTarget.transform, prevTarget.member, data);\n        }\n    }\n\n    // Get next key with given sid\n\n    function getNextKeyWith(keys, fullSid, ndx) {\n\n        for (; ndx < keys.length; ndx++) {\n\n            var key = keys[ndx];\n\n            if (key.hasTarget(fullSid)) {\n\n                return key;\n            }\n        }\n\n        return null;\n    }\n\n    // Get previous key with given sid\n\n    function getPrevKeyWith(keys, fullSid, ndx) {\n\n        ndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n        for (; ndx >= 0; ndx--) {\n\n            var key = keys[ndx];\n\n            if (key.hasTarget(fullSid)) {\n\n                return key;\n            }\n        }\n\n        return null;\n    }\n\n    function _Image() {\n\n        this.id = \"\";\n        this.init_from = \"\";\n    }\n\n    _Image.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            if (child.nodeName === 'init_from') {\n\n                this.init_from = child.textContent;\n            }\n        }\n\n        return this;\n    };\n\n    function Controller() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.type = \"\";\n        this.skin = null;\n        this.morph = null;\n    }\n\n    Controller.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n        this.type = \"none\";\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'skin':\n\n                    this.skin = new Skin().parse(child);\n                    this.type = child.nodeName;\n                    break;\n\n                case 'morph':\n\n                    this.morph = new Morph().parse(child);\n                    this.type = child.nodeName;\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Morph() {\n\n        this.method = null;\n        this.source = null;\n        this.targets = null;\n        this.weights = null;\n    }\n\n    Morph.prototype.parse = function (element) {\n\n        var sources = {};\n        var inputs = [];\n        var i;\n\n        this.method = element.getAttribute('method');\n        this.source = element.getAttribute('source').replace(/^#/, '');\n\n        for (i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'source':\n\n                    var source = new Source().parse(child);\n                    sources[source.id] = source;\n                    break;\n\n                case 'targets':\n\n                    inputs = this.parseInputs(child);\n                    break;\n\n                default:\n\n                    console.log(child.nodeName);\n                    break;\n\n            }\n        }\n\n        for (i = 0; i < inputs.length; i++) {\n\n            var input = inputs[i];\n            var source = sources[input.source];\n\n            switch (input.semantic) {\n\n                case 'MORPH_TARGET':\n\n                    this.targets = source.read();\n                    break;\n\n                case 'MORPH_WEIGHT':\n\n                    this.weights = source.read();\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Morph.prototype.parseInputs = function (element) {\n\n        var inputs = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'input':\n\n                    inputs.push(new Input().parse(child));\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        return inputs;\n    };\n\n    function Skin() {\n\n        this.source = \"\";\n        this.bindShapeMatrix = null;\n        this.invBindMatrices = [];\n        this.joints = [];\n        this.weights = [];\n    }\n\n    Skin.prototype.parse = function (element) {\n\n        var sources = {};\n        var joints, weights;\n\n        this.source = element.getAttribute('source').replace(/^#/, '');\n        this.invBindMatrices = [];\n        this.joints = [];\n        this.weights = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'bind_shape_matrix':\n\n                    var f = _floats(child.textContent);\n                    this.bindShapeMatrix = getConvertedMat4(f);\n                    break;\n\n                case 'source':\n\n                    var src = new Source().parse(child);\n                    sources[src.id] = src;\n                    break;\n\n                case 'joints':\n\n                    joints = child;\n                    break;\n\n                case 'vertex_weights':\n\n                    weights = child;\n                    break;\n\n                default:\n\n                    console.log(child.nodeName);\n                    break;\n\n            }\n        }\n\n        this.parseJoints(joints, sources);\n        this.parseWeights(weights, sources);\n\n        return this;\n    };\n\n    Skin.prototype.parseJoints = function (element, sources) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'input':\n\n                    var input = new Input().parse(child);\n                    var source = sources[input.source];\n\n                    if (input.semantic === 'JOINT') {\n\n                        this.joints = source.read();\n                    } else if (input.semantic === 'INV_BIND_MATRIX') {\n\n                        this.invBindMatrices = source.read();\n                    }\n\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    };\n\n    Skin.prototype.parseWeights = function (element, sources) {\n\n        var v,\n            vcount,\n            inputs = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'input':\n\n                    inputs.push(new Input().parse(child));\n                    break;\n\n                case 'v':\n\n                    v = _ints(child.textContent);\n                    break;\n\n                case 'vcount':\n\n                    vcount = _ints(child.textContent);\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        var index = 0;\n\n        for (var i = 0; i < vcount.length; i++) {\n\n            var numBones = vcount[i];\n            var vertex_weights = [];\n\n            for (var j = 0; j < numBones; j++) {\n\n                var influence = {};\n\n                for (var k = 0; k < inputs.length; k++) {\n\n                    var input = inputs[k];\n                    var value = v[index + input.offset];\n\n                    switch (input.semantic) {\n\n                        case 'JOINT':\n\n                            influence.joint = value; //this.joints[value];\n                            break;\n\n                        case 'WEIGHT':\n\n                            influence.weight = sources[input.source].data[value];\n                            break;\n\n                        default:\n                            break;\n\n                    }\n                }\n\n                vertex_weights.push(influence);\n                index += inputs.length;\n            }\n\n            for (var j = 0; j < vertex_weights.length; j++) {\n\n                vertex_weights[j].index = i;\n            }\n\n            this.weights.push(vertex_weights);\n        }\n    };\n\n    function VisualScene() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.nodes = [];\n        this.scene = new THREE.Group();\n    }\n\n    VisualScene.prototype.getChildById = function (id, recursive) {\n\n        for (var i = 0; i < this.nodes.length; i++) {\n\n            var node = this.nodes[i].getChildById(id, recursive);\n\n            if (node) {\n\n                return node;\n            }\n        }\n\n        return null;\n    };\n\n    VisualScene.prototype.getChildBySid = function (sid, recursive) {\n\n        for (var i = 0; i < this.nodes.length; i++) {\n\n            var node = this.nodes[i].getChildBySid(sid, recursive);\n\n            if (node) {\n\n                return node;\n            }\n        }\n\n        return null;\n    };\n\n    VisualScene.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n        this.nodes = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'node':\n\n                    this.nodes.push(new Node().parse(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Node() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.sid = \"\";\n        this.nodes = [];\n        this.controllers = [];\n        this.transforms = [];\n        this.geometries = [];\n        this.channels = [];\n        this.matrix = new THREE.Matrix4();\n    }\n\n    Node.prototype.getChannelForTransform = function (transformSid) {\n\n        for (var i = 0; i < this.channels.length; i++) {\n\n            var channel = this.channels[i];\n            var parts = channel.target.split('/');\n            var id = parts.shift();\n            var sid = parts.shift();\n            var dotSyntax = sid.indexOf(\".\") >= 0;\n            var arrSyntax = sid.indexOf(\"(\") >= 0;\n            var arrIndices;\n            var member;\n\n            if (dotSyntax) {\n\n                parts = sid.split(\".\");\n                sid = parts.shift();\n                member = parts.shift();\n            } else if (arrSyntax) {\n\n                arrIndices = sid.split(\"(\");\n                sid = arrIndices.shift();\n\n                for (var j = 0; j < arrIndices.length; j++) {\n\n                    arrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n                }\n            }\n\n            if (sid === transformSid) {\n\n                channel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n                return channel;\n            }\n        }\n\n        return null;\n    };\n\n    Node.prototype.getChildById = function (id, recursive) {\n\n        if (this.id === id) {\n\n            return this;\n        }\n\n        if (recursive) {\n\n            for (var i = 0; i < this.nodes.length; i++) {\n\n                var n = this.nodes[i].getChildById(id, recursive);\n\n                if (n) {\n\n                    return n;\n                }\n            }\n        }\n\n        return null;\n    };\n\n    Node.prototype.getChildBySid = function (sid, recursive) {\n\n        if (this.sid === sid) {\n\n            return this;\n        }\n\n        if (recursive) {\n\n            for (var i = 0; i < this.nodes.length; i++) {\n\n                var n = this.nodes[i].getChildBySid(sid, recursive);\n\n                if (n) {\n\n                    return n;\n                }\n            }\n        }\n\n        return null;\n    };\n\n    Node.prototype.getTransformBySid = function (sid) {\n\n        for (var i = 0; i < this.transforms.length; i++) {\n\n            if (this.transforms[i].sid === sid) return this.transforms[i];\n        }\n\n        return null;\n    };\n\n    Node.prototype.parse = function (element) {\n\n        var url;\n\n        this.id = element.getAttribute('id');\n        this.sid = element.getAttribute('sid');\n        this.name = element.getAttribute('name');\n        this.type = element.getAttribute('type');\n        this.layer = element.getAttribute('layer');\n\n        this.type = this.type === 'JOINT' ? this.type : 'NODE';\n\n        this.nodes = [];\n        this.transforms = [];\n        this.geometries = [];\n        this.cameras = [];\n        this.lights = [];\n        this.controllers = [];\n        this.matrix = new THREE.Matrix4();\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'node':\n\n                    this.nodes.push(new Node().parse(child));\n                    break;\n\n                case 'instance_camera':\n\n                    this.cameras.push(new InstanceCamera().parse(child));\n                    break;\n\n                case 'instance_controller':\n\n                    this.controllers.push(new InstanceController().parse(child));\n                    break;\n\n                case 'instance_geometry':\n\n                    this.geometries.push(new InstanceGeometry().parse(child));\n                    break;\n\n                case 'instance_light':\n\n                    this.lights.push(new InstanceLight().parse(child));\n                    break;\n\n                case 'instance_node':\n\n                    url = child.getAttribute('url').replace(/^#/, '');\n                    var iNode = getLibraryNode(url);\n\n                    if (iNode) {\n\n                        this.nodes.push(new Node().parse(iNode));\n                    }\n\n                    break;\n\n                case 'rotate':\n                case 'translate':\n                case 'scale':\n                case 'matrix':\n                case 'lookat':\n                case 'skew':\n\n                    this.transforms.push(new Transform().parse(child));\n                    break;\n\n                case 'extra':\n                    break;\n\n                default:\n\n                    console.log(child.nodeName);\n                    break;\n\n            }\n        }\n\n        this.channels = getChannelsForNode(this);\n        bakeAnimations(this);\n\n        this.updateMatrix();\n\n        return this;\n    };\n\n    Node.prototype.updateMatrix = function () {\n\n        this.matrix.identity();\n\n        for (var i = 0; i < this.transforms.length; i++) {\n\n            this.transforms[i].apply(this.matrix);\n        }\n    };\n\n    function Transform() {\n\n        this.sid = \"\";\n        this.type = \"\";\n        this.data = [];\n        this.obj = null;\n    }\n\n    Transform.prototype.parse = function (element) {\n\n        this.sid = element.getAttribute('sid');\n        this.type = element.nodeName;\n        this.data = _floats(element.textContent);\n        this.convert();\n\n        return this;\n    };\n\n    Transform.prototype.convert = function () {\n\n        switch (this.type) {\n\n            case 'matrix':\n\n                this.obj = getConvertedMat4(this.data);\n                break;\n\n            case 'rotate':\n\n                this.angle = THREE.Math.degToRad(this.data[3]);\n\n            case 'translate':\n\n                fixCoords(this.data, -1);\n                this.obj = new THREE.Vector3(this.data[0], this.data[1], this.data[2]);\n                break;\n\n            case 'scale':\n\n                fixCoords(this.data, 1);\n                this.obj = new THREE.Vector3(this.data[0], this.data[1], this.data[2]);\n                break;\n\n            default:\n                console.log('Can not convert Transform of type ' + this.type);\n                break;\n\n        }\n    };\n\n    Transform.prototype.apply = function () {\n\n        var m1 = new THREE.Matrix4();\n\n        return function (matrix) {\n\n            switch (this.type) {\n\n                case 'matrix':\n\n                    matrix.multiply(this.obj);\n\n                    break;\n\n                case 'translate':\n\n                    matrix.multiply(m1.makeTranslation(this.obj.x, this.obj.y, this.obj.z));\n\n                    break;\n\n                case 'rotate':\n\n                    matrix.multiply(m1.makeRotationAxis(this.obj, this.angle));\n\n                    break;\n\n                case 'scale':\n\n                    matrix.scale(this.obj);\n\n                    break;\n\n            }\n        };\n    }();\n\n    Transform.prototype.update = function (data, member) {\n\n        var members = ['X', 'Y', 'Z', 'ANGLE'];\n\n        switch (this.type) {\n\n            case 'matrix':\n\n                if (!member) {\n\n                    this.obj.copy(data);\n                } else if (member.length === 1) {\n\n                    switch (member[0]) {\n\n                        case 0:\n\n                            this.obj.n11 = data[0];\n                            this.obj.n21 = data[1];\n                            this.obj.n31 = data[2];\n                            this.obj.n41 = data[3];\n\n                            break;\n\n                        case 1:\n\n                            this.obj.n12 = data[0];\n                            this.obj.n22 = data[1];\n                            this.obj.n32 = data[2];\n                            this.obj.n42 = data[3];\n\n                            break;\n\n                        case 2:\n\n                            this.obj.n13 = data[0];\n                            this.obj.n23 = data[1];\n                            this.obj.n33 = data[2];\n                            this.obj.n43 = data[3];\n\n                            break;\n\n                        case 3:\n\n                            this.obj.n14 = data[0];\n                            this.obj.n24 = data[1];\n                            this.obj.n34 = data[2];\n                            this.obj.n44 = data[3];\n\n                            break;\n\n                    }\n                } else if (member.length === 2) {\n\n                    var propName = 'n' + (member[0] + 1) + (member[1] + 1);\n                    this.obj[propName] = data;\n                } else {\n\n                    console.log('Incorrect addressing of matrix in transform.');\n                }\n\n                break;\n\n            case 'translate':\n            case 'scale':\n\n                if (Object.prototype.toString.call(member) === '[object Array]') {\n\n                    member = members[member[0]];\n                }\n\n                switch (member) {\n\n                    case 'X':\n\n                        this.obj.x = data;\n                        break;\n\n                    case 'Y':\n\n                        this.obj.y = data;\n                        break;\n\n                    case 'Z':\n\n                        this.obj.z = data;\n                        break;\n\n                    default:\n\n                        this.obj.x = data[0];\n                        this.obj.y = data[1];\n                        this.obj.z = data[2];\n                        break;\n\n                }\n\n                break;\n\n            case 'rotate':\n\n                if (Object.prototype.toString.call(member) === '[object Array]') {\n\n                    member = members[member[0]];\n                }\n\n                switch (member) {\n\n                    case 'X':\n\n                        this.obj.x = data;\n                        break;\n\n                    case 'Y':\n\n                        this.obj.y = data;\n                        break;\n\n                    case 'Z':\n\n                        this.obj.z = data;\n                        break;\n\n                    case 'ANGLE':\n\n                        this.angle = THREE.Math.degToRad(data);\n                        break;\n\n                    default:\n\n                        this.obj.x = data[0];\n                        this.obj.y = data[1];\n                        this.obj.z = data[2];\n                        this.angle = THREE.Math.degToRad(data[3]);\n                        break;\n\n                }\n                break;\n\n        }\n    };\n\n    function InstanceController() {\n\n        this.url = \"\";\n        this.skeleton = [];\n        this.instance_material = [];\n    }\n\n    InstanceController.prototype.parse = function (element) {\n\n        this.url = element.getAttribute('url').replace(/^#/, '');\n        this.skeleton = [];\n        this.instance_material = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType !== 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'skeleton':\n\n                    this.skeleton.push(child.textContent.replace(/^#/, ''));\n                    break;\n\n                case 'bind_material':\n\n                    var instances = child.querySelectorAll('instance_material');\n\n                    for (var j = 0; j < instances.length; j++) {\n\n                        var instance = instances[j];\n                        this.instance_material.push(new InstanceMaterial().parse(instance));\n                    }\n\n                    break;\n\n                case 'extra':\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function InstanceMaterial() {\n\n        this.symbol = \"\";\n        this.target = \"\";\n    }\n\n    InstanceMaterial.prototype.parse = function (element) {\n\n        this.symbol = element.getAttribute('symbol');\n        this.target = element.getAttribute('target').replace(/^#/, '');\n        return this;\n    };\n\n    function InstanceGeometry() {\n\n        this.url = \"\";\n        this.instance_material = [];\n    }\n\n    InstanceGeometry.prototype.parse = function (element) {\n\n        this.url = element.getAttribute('url').replace(/^#/, '');\n        this.instance_material = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            if (child.nodeName === 'bind_material') {\n\n                var instances = child.querySelectorAll('instance_material');\n\n                for (var j = 0; j < instances.length; j++) {\n\n                    var instance = instances[j];\n                    this.instance_material.push(new InstanceMaterial().parse(instance));\n                }\n\n                break;\n            }\n        }\n\n        return this;\n    };\n\n    function Geometry() {\n\n        this.id = \"\";\n        this.mesh = null;\n    }\n\n    Geometry.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n\n        extractDoubleSided(this, element);\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'mesh':\n\n                    this.mesh = new Mesh(this).parse(child);\n                    break;\n\n                case 'extra':\n\n                    // console.log( child );\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    };\n\n    function Mesh(geometry) {\n\n        this.geometry = geometry.id;\n        this.primitives = [];\n        this.vertices = null;\n        this.geometry3js = null;\n    }\n\n    Mesh.prototype.parse = function (element) {\n\n        this.primitives = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'source':\n\n                    _source(child);\n                    break;\n\n                case 'vertices':\n\n                    this.vertices = new Vertices().parse(child);\n                    break;\n\n                case 'linestrips':\n\n                    this.primitives.push(new LineStrips().parse(child));\n                    break;\n\n                case 'triangles':\n\n                    this.primitives.push(new Triangles().parse(child));\n                    break;\n\n                case 'polygons':\n\n                    this.primitives.push(new Polygons().parse(child));\n                    break;\n\n                case 'polylist':\n\n                    this.primitives.push(new Polylist().parse(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        this.geometry3js = new THREE.Geometry();\n\n        if (this.vertices === null) {\n\n            // TODO (mrdoob): Study case when this is null (carrier.dae)\n\n            return this;\n        }\n\n        var vertexData = sources[this.vertices.input['POSITION'].source].data;\n\n        for (var i = 0; i < vertexData.length; i += 3) {\n\n            this.geometry3js.vertices.push(getConvertedVec3(vertexData, i).clone());\n        }\n\n        for (var i = 0; i < this.primitives.length; i++) {\n\n            var primitive = this.primitives[i];\n            primitive.setVertices(this.vertices);\n            this.handlePrimitive(primitive, this.geometry3js);\n        }\n\n        if (this.geometry3js.calcNormals) {\n\n            this.geometry3js.computeVertexNormals();\n            delete this.geometry3js.calcNormals;\n        }\n\n        return this;\n    };\n\n    Mesh.prototype.handlePrimitive = function (primitive, geom) {\n\n        if (primitive instanceof LineStrips) {\n\n            // TODO: Handle indices. Maybe easier with BufferGeometry?\n\n            geom.isLineStrip = true;\n            return;\n        }\n\n        var j,\n            k,\n            pList = primitive.p,\n            inputs = primitive.inputs;\n        var input, index, idx32;\n        var source, numParams;\n        var vcIndex = 0,\n            vcount = 3,\n            maxOffset = 0;\n        var texture_sets = [];\n\n        for (j = 0; j < inputs.length; j++) {\n\n            input = inputs[j];\n\n            var offset = input.offset + 1;\n            maxOffset = maxOffset < offset ? offset : maxOffset;\n\n            switch (input.semantic) {\n\n                case 'TEXCOORD':\n                    texture_sets.push(input.set);\n                    break;\n\n            }\n        }\n\n        for (var pCount = 0; pCount < pList.length; ++pCount) {\n\n            var p = pList[pCount],\n                i = 0;\n\n            while (i < p.length) {\n\n                var vs = [];\n                var ns = [];\n                var ts = null;\n                var cs = [];\n\n                if (primitive.vcount) {\n\n                    vcount = primitive.vcount.length ? primitive.vcount[vcIndex++] : primitive.vcount;\n                } else {\n\n                    vcount = p.length / maxOffset;\n                }\n\n                for (j = 0; j < vcount; j++) {\n\n                    for (k = 0; k < inputs.length; k++) {\n\n                        input = inputs[k];\n                        source = sources[input.source];\n\n                        index = p[i + j * maxOffset + input.offset];\n                        numParams = source.accessor.params.length;\n                        idx32 = index * numParams;\n\n                        switch (input.semantic) {\n\n                            case 'VERTEX':\n\n                                vs.push(index);\n\n                                break;\n\n                            case 'NORMAL':\n\n                                ns.push(getConvertedVec3(source.data, idx32));\n\n                                break;\n\n                            case 'TEXCOORD':\n\n                                ts = ts || {};\n                                if (ts[input.set] === undefined) ts[input.set] = [];\n                                // invert the V\n                                ts[input.set].push(new THREE.Vector2(source.data[idx32], source.data[idx32 + 1]));\n\n                                break;\n\n                            case 'COLOR':\n\n                                cs.push(new THREE.Color().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\n                                break;\n\n                            default:\n\n                                break;\n\n                        }\n                    }\n                }\n\n                if (ns.length === 0) {\n\n                    // check the vertices inputs\n                    input = this.vertices.input.NORMAL;\n\n                    if (input) {\n\n                        source = sources[input.source];\n                        numParams = source.accessor.params.length;\n\n                        for (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n                            ns.push(getConvertedVec3(source.data, vs[ndx] * numParams));\n                        }\n                    } else {\n\n                        geom.calcNormals = true;\n                    }\n                }\n\n                if (!ts) {\n\n                    ts = {};\n                    // check the vertices inputs\n                    input = this.vertices.input.TEXCOORD;\n\n                    if (input) {\n\n                        texture_sets.push(input.set);\n                        source = sources[input.source];\n                        numParams = source.accessor.params.length;\n\n                        for (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n                            idx32 = vs[ndx] * numParams;\n                            if (ts[input.set] === undefined) ts[input.set] = [];\n                            // invert the V\n                            ts[input.set].push(new THREE.Vector2(source.data[idx32], 1.0 - source.data[idx32 + 1]));\n                        }\n                    }\n                }\n\n                if (cs.length === 0) {\n\n                    // check the vertices inputs\n                    input = this.vertices.input.COLOR;\n\n                    if (input) {\n\n                        source = sources[input.source];\n                        numParams = source.accessor.params.length;\n\n                        for (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n                            idx32 = vs[ndx] * numParams;\n                            cs.push(new THREE.Color().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n                        }\n                    }\n                }\n\n                var face = null,\n                    faces = [],\n                    uv,\n                    uvArr;\n\n                if (vcount === 3) {\n\n                    faces.push(new THREE.Face3(vs[0], vs[1], vs[2], ns, cs.length ? cs : new THREE.Color()));\n                } else if (vcount === 4) {\n\n                    faces.push(new THREE.Face3(vs[0], vs[1], vs[3], ns.length ? [ns[0].clone(), ns[1].clone(), ns[3].clone()] : [], cs.length ? [cs[0], cs[1], cs[3]] : new THREE.Color()));\n\n                    faces.push(new THREE.Face3(vs[1], vs[2], vs[3], ns.length ? [ns[1].clone(), ns[2].clone(), ns[3].clone()] : [], cs.length ? [cs[1], cs[2], cs[3]] : new THREE.Color()));\n                } else if (vcount > 4 && options.subdivideFaces) {\n\n                    var clr = cs.length ? cs : new THREE.Color(),\n                        vec1,\n                        vec2,\n                        vec3,\n                        v1,\n                        v2,\n                        norm;\n\n                    // subdivide into multiple Face3s\n\n                    for (k = 1; k < vcount - 1;) {\n\n                        faces.push(new THREE.Face3(vs[0], vs[k], vs[k + 1], ns.length ? [ns[0].clone(), ns[k++].clone(), ns[k].clone()] : [], clr));\n                    }\n                }\n\n                if (faces.length) {\n\n                    for (var ndx = 0, len = faces.length; ndx < len; ndx++) {\n\n                        face = faces[ndx];\n                        face.daeMaterial = primitive.material;\n                        geom.faces.push(face);\n\n                        for (k = 0; k < texture_sets.length; k++) {\n\n                            uv = ts[texture_sets[k]];\n\n                            if (vcount > 4) {\n\n                                // Grab the right UVs for the vertices in this face\n                                uvArr = [uv[0], uv[ndx + 1], uv[ndx + 2]];\n                            } else if (vcount === 4) {\n\n                                if (ndx === 0) {\n\n                                    uvArr = [uv[0], uv[1], uv[3]];\n                                } else {\n\n                                    uvArr = [uv[1].clone(), uv[2], uv[3].clone()];\n                                }\n                            } else {\n\n                                uvArr = [uv[0], uv[1], uv[2]];\n                            }\n\n                            if (geom.faceVertexUvs[k] === undefined) {\n\n                                geom.faceVertexUvs[k] = [];\n                            }\n\n                            geom.faceVertexUvs[k].push(uvArr);\n                        }\n                    }\n                } else {\n\n                    console.log('dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id);\n                }\n\n                i += maxOffset * vcount;\n            }\n        }\n    };\n\n    function Polygons() {\n\n        this.material = \"\";\n        this.count = 0;\n        this.inputs = [];\n        this.vcount = null;\n        this.p = [];\n        this.geometry = new THREE.Geometry();\n    }\n\n    Polygons.prototype.setVertices = function (vertices) {\n\n        for (var i = 0; i < this.inputs.length; i++) {\n\n            if (this.inputs[i].source === vertices.id) {\n\n                this.inputs[i].source = vertices.input['POSITION'].source;\n            }\n        }\n    };\n\n    Polygons.prototype.parse = function (element) {\n\n        this.material = element.getAttribute('material');\n        this.count = _attr_as_int(element, 'count', 0);\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'input':\n\n                    this.inputs.push(new Input().parse(element.childNodes[i]));\n                    break;\n\n                case 'vcount':\n\n                    this.vcount = _ints(child.textContent);\n                    break;\n\n                case 'p':\n\n                    this.p.push(_ints(child.textContent));\n                    break;\n\n                case 'ph':\n\n                    console.warn('polygon holes not yet supported!');\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Polylist() {\n\n        Polygons.call(this);\n\n        this.vcount = [];\n    }\n\n    Polylist.prototype = Object.create(Polygons.prototype);\n    Polylist.prototype.constructor = Polylist;\n\n    function LineStrips() {\n\n        Polygons.call(this);\n\n        this.vcount = 1;\n    }\n\n    LineStrips.prototype = Object.create(Polygons.prototype);\n    LineStrips.prototype.constructor = LineStrips;\n\n    function Triangles() {\n\n        Polygons.call(this);\n\n        this.vcount = 3;\n    }\n\n    Triangles.prototype = Object.create(Polygons.prototype);\n    Triangles.prototype.constructor = Triangles;\n\n    function Accessor() {\n\n        this.source = \"\";\n        this.count = 0;\n        this.stride = 0;\n        this.params = [];\n    }\n\n    Accessor.prototype.parse = function (element) {\n\n        this.params = [];\n        this.source = element.getAttribute('source');\n        this.count = _attr_as_int(element, 'count', 0);\n        this.stride = _attr_as_int(element, 'stride', 0);\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            if (child.nodeName === 'param') {\n\n                var param = {};\n                param['name'] = child.getAttribute('name');\n                param['type'] = child.getAttribute('type');\n                this.params.push(param);\n            }\n        }\n\n        return this;\n    };\n\n    function Vertices() {\n\n        this.input = {};\n    }\n\n    Vertices.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            if (element.childNodes[i].nodeName === 'input') {\n\n                var input = new Input().parse(element.childNodes[i]);\n                this.input[input.semantic] = input;\n            }\n        }\n\n        return this;\n    };\n\n    function Input() {\n\n        this.semantic = \"\";\n        this.offset = 0;\n        this.source = \"\";\n        this.set = 0;\n    }\n\n    Input.prototype.parse = function (element) {\n\n        this.semantic = element.getAttribute('semantic');\n        this.source = element.getAttribute('source').replace(/^#/, '');\n        this.set = _attr_as_int(element, 'set', -1);\n        this.offset = _attr_as_int(element, 'offset', 0);\n\n        if (this.semantic === 'TEXCOORD' && this.set < 0) {\n\n            this.set = 0;\n        }\n\n        return this;\n    };\n\n    function Source(id) {\n\n        this.id = id;\n        this.type = null;\n    }\n\n    Source.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'bool_array':\n\n                    this.data = _bools(child.textContent);\n                    this.type = child.nodeName;\n                    break;\n\n                case 'float_array':\n\n                    this.data = _floats(child.textContent);\n                    this.type = child.nodeName;\n                    break;\n\n                case 'int_array':\n\n                    this.data = _ints(child.textContent);\n                    this.type = child.nodeName;\n                    break;\n\n                case 'IDREF_array':\n                case 'Name_array':\n\n                    this.data = _strings(child.textContent);\n                    this.type = child.nodeName;\n                    break;\n\n                case 'technique_common':\n\n                    for (var j = 0; j < child.childNodes.length; j++) {\n\n                        if (child.childNodes[j].nodeName === 'accessor') {\n\n                            this.accessor = new Accessor().parse(child.childNodes[j]);\n                            break;\n                        }\n                    }\n                    break;\n\n                default:\n                    // console.log(child.nodeName);\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Source.prototype.read = function () {\n\n        var result = [];\n\n        //for (var i = 0; i < this.accessor.params.length; i++) {\n\n        var param = this.accessor.params[0];\n\n        //console.log(param.name + \" \" + param.type);\n\n        switch (param.type) {\n\n            case 'IDREF':\n            case 'Name':case 'name':\n            case 'float':\n\n                return this.data;\n\n            case 'float4x4':\n\n                for (var j = 0; j < this.data.length; j += 16) {\n\n                    var s = this.data.slice(j, j + 16);\n                    var m = getConvertedMat4(s);\n                    result.push(m);\n                }\n\n                break;\n\n            default:\n\n                console.log('ColladaLoader: Source: Read dont know how to read ' + param.type + '.');\n                break;\n\n        }\n\n        //}\n\n        return result;\n    };\n\n    function Material() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.instance_effect = null;\n    }\n\n    Material.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            if (element.childNodes[i].nodeName === 'instance_effect') {\n\n                this.instance_effect = new InstanceEffect().parse(element.childNodes[i]);\n                break;\n            }\n        }\n\n        return this;\n    };\n\n    function ColorOrTexture() {\n\n        this.color = new THREE.Color();\n        this.color.setRGB(Math.random(), Math.random(), Math.random());\n        this.color.a = 1.0;\n\n        this.texture = null;\n        this.texcoord = null;\n        this.texOpts = null;\n    }\n\n    ColorOrTexture.prototype.isColor = function () {\n\n        return this.texture === null;\n    };\n\n    ColorOrTexture.prototype.isTexture = function () {\n\n        return this.texture != null;\n    };\n\n    ColorOrTexture.prototype.parse = function (element) {\n\n        if (element.nodeName === 'transparent') {\n\n            this.opaque = element.getAttribute('opaque');\n        }\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'color':\n\n                    var rgba = _floats(child.textContent);\n                    this.color = new THREE.Color();\n                    this.color.setRGB(rgba[0], rgba[1], rgba[2]);\n                    this.color.a = rgba[3];\n                    break;\n\n                case 'texture':\n\n                    this.texture = child.getAttribute('texture');\n                    this.texcoord = child.getAttribute('texcoord');\n                    // Defaults from:\n                    // https://collada.org/mediawiki/index.php/Maya_texture_placement_MAYA_extension\n                    this.texOpts = {\n                        offsetU: 0,\n                        offsetV: 0,\n                        repeatU: 1,\n                        repeatV: 1,\n                        wrapU: 1,\n                        wrapV: 1\n                    };\n                    this.parseTexture(child);\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    ColorOrTexture.prototype.parseTexture = function (element) {\n\n        if (!element.childNodes) return this;\n\n        // This should be supported by Maya, 3dsMax, and MotionBuilder\n\n        if (element.childNodes[1] && element.childNodes[1].nodeName === 'extra') {\n\n            element = element.childNodes[1];\n\n            if (element.childNodes[1] && element.childNodes[1].nodeName === 'technique') {\n\n                element = element.childNodes[1];\n            }\n        }\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'offsetU':\n                case 'offsetV':\n                case 'repeatU':\n                case 'repeatV':\n\n                    this.texOpts[child.nodeName] = parseFloat(child.textContent);\n\n                    break;\n\n                case 'wrapU':\n                case 'wrapV':\n\n                    // some dae have a value of true which becomes NaN via parseInt\n\n                    if (child.textContent.toUpperCase() === 'TRUE') {\n\n                        this.texOpts[child.nodeName] = 1;\n                    } else {\n\n                        this.texOpts[child.nodeName] = parseInt(child.textContent);\n                    }\n                    break;\n\n                default:\n\n                    this.texOpts[child.nodeName] = child.textContent;\n\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Shader(type, effect) {\n\n        this.type = type;\n        this.effect = effect;\n        this.material = null;\n    }\n\n    Shader.prototype.parse = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'emission':\n                case 'diffuse':\n                case 'specular':\n                case 'transparent':\n\n                    this[child.nodeName] = new ColorOrTexture().parse(child);\n                    break;\n\n                case 'bump':\n\n                    // If 'bumptype' is 'heightfield', create a 'bump' property\n                    // Else if 'bumptype' is 'normalmap', create a 'normal' property\n                    // (Default to 'bump')\n                    var bumpType = child.getAttribute('bumptype');\n                    if (bumpType) {\n                        if (bumpType.toLowerCase() === \"heightfield\") {\n                            this['bump'] = new ColorOrTexture().parse(child);\n                        } else if (bumpType.toLowerCase() === \"normalmap\") {\n                            this['normal'] = new ColorOrTexture().parse(child);\n                        } else {\n                            console.error(\"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\");\n                            this['bump'] = new ColorOrTexture().parse(child);\n                        }\n                    } else {\n                        console.warn(\"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\");\n                        this['bump'] = new ColorOrTexture().parse(child);\n                    }\n\n                    break;\n\n                case 'shininess':\n                case 'reflectivity':\n                case 'index_of_refraction':\n                case 'transparency':\n\n                    var f = child.querySelectorAll('float');\n\n                    if (f.length > 0) this[child.nodeName] = parseFloat(f[0].textContent);\n\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        this.create();\n        return this;\n    };\n\n    Shader.prototype.create = function () {\n\n        var props = {};\n\n        var transparent = false;\n\n        if (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n            // convert transparent color RBG to average value\n            var transparentColor = this['transparent'];\n            var transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\n\n            if (transparencyLevel > 0) {\n                transparent = true;\n                props['transparent'] = true;\n                props['opacity'] = 1 - transparencyLevel;\n            }\n        }\n\n        var keys = {\n            'diffuse': 'map',\n            'ambient': 'lightMap',\n            'specular': 'specularMap',\n            'emission': 'emissionMap',\n            'bump': 'bumpMap',\n            'normal': 'normalMap'\n        };\n\n        for (var prop in this) {\n\n            switch (prop) {\n\n                case 'ambient':\n                case 'emission':\n                case 'diffuse':\n                case 'specular':\n                case 'bump':\n                case 'normal':\n\n                    var cot = this[prop];\n\n                    if (cot instanceof ColorOrTexture) {\n\n                        if (cot.isTexture()) {\n\n                            var samplerId = cot.texture;\n                            var surfaceId = this.effect.sampler[samplerId];\n\n                            if (surfaceId !== undefined && surfaceId.source !== undefined) {\n\n                                var surface = this.effect.surface[surfaceId.source];\n\n                                if (surface !== undefined) {\n\n                                    var image = images[surface.init_from];\n\n                                    if (image) {\n\n                                        var url = baseUrl + image.init_from;\n\n                                        var texture;\n                                        var loader = THREE.Loader.Handlers.get(url);\n\n                                        if (loader !== null) {\n\n                                            texture = loader.load(url);\n                                        } else {\n\n                                            texture = new THREE.Texture();\n\n                                            loadTextureImage(texture, url);\n                                        }\n\n                                        texture.wrapS = cot.texOpts.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n                                        texture.wrapT = cot.texOpts.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n                                        texture.offset.x = cot.texOpts.offsetU;\n                                        texture.offset.y = cot.texOpts.offsetV;\n                                        texture.repeat.x = cot.texOpts.repeatU;\n                                        texture.repeat.y = cot.texOpts.repeatV;\n                                        props[keys[prop]] = texture;\n\n                                        // Texture with baked lighting?\n                                        if (prop === 'emission') props['emissive'] = 0xffffff;\n                                    }\n                                }\n                            }\n                        } else if (prop === 'diffuse' || !transparent) {\n\n                            if (prop === 'emission') {\n\n                                props['emissive'] = cot.color.getHex();\n                            } else {\n\n                                props[prop] = cot.color.getHex();\n                            }\n                        }\n                    }\n\n                    break;\n\n                case 'shininess':\n\n                    props[prop] = this[prop];\n                    break;\n\n                case 'reflectivity':\n\n                    props[prop] = this[prop];\n                    if (props[prop] > 0.0) props['envMap'] = options.defaultEnvMap;\n                    props['combine'] = THREE.MixOperation; //mix regular shading with reflective component\n                    break;\n\n                case 'index_of_refraction':\n\n                    props['refractionRatio'] = this[prop]; //TODO: \"index_of_refraction\" becomes \"refractionRatio\" in shader, but I'm not sure if the two are actually comparable\n                    if (this[prop] !== 1.0) props['envMap'] = options.defaultEnvMap;\n                    break;\n\n                case 'transparency':\n                    // gets figured out up top\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        props['shading'] = preferredShading;\n        props['side'] = this.effect.doubleSided ? THREE.DoubleSide : THREE.FrontSide;\n\n        if (props.diffuse !== undefined) {\n\n            props.color = props.diffuse;\n            delete props.diffuse;\n        }\n\n        switch (this.type) {\n\n            case 'constant':\n\n                if (props.emissive != undefined) props.color = props.emissive;\n                this.material = new THREE.MeshBasicMaterial(props);\n                break;\n\n            case 'phong':\n            case 'blinn':\n\n                this.material = new THREE.MeshPhongMaterial(props);\n                break;\n\n            case 'lambert':\n            default:\n\n                this.material = new THREE.MeshLambertMaterial(props);\n                break;\n\n        }\n\n        return this.material;\n    };\n\n    function Surface(effect) {\n\n        this.effect = effect;\n        this.init_from = null;\n        this.format = null;\n    }\n\n    Surface.prototype.parse = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'init_from':\n\n                    this.init_from = child.textContent;\n                    break;\n\n                case 'format':\n\n                    this.format = child.textContent;\n                    break;\n\n                default:\n\n                    console.log(\"unhandled Surface prop: \" + child.nodeName);\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Sampler2D(effect) {\n\n        this.effect = effect;\n        this.source = null;\n        this.wrap_s = null;\n        this.wrap_t = null;\n        this.minfilter = null;\n        this.magfilter = null;\n        this.mipfilter = null;\n    }\n\n    Sampler2D.prototype.parse = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'source':\n\n                    this.source = child.textContent;\n                    break;\n\n                case 'minfilter':\n\n                    this.minfilter = child.textContent;\n                    break;\n\n                case 'magfilter':\n\n                    this.magfilter = child.textContent;\n                    break;\n\n                case 'mipfilter':\n\n                    this.mipfilter = child.textContent;\n                    break;\n\n                case 'wrap_s':\n\n                    this.wrap_s = child.textContent;\n                    break;\n\n                case 'wrap_t':\n\n                    this.wrap_t = child.textContent;\n                    break;\n\n                default:\n\n                    console.log(\"unhandled Sampler2D prop: \" + child.nodeName);\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Effect() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.shader = null;\n        this.surface = {};\n        this.sampler = {};\n    }\n\n    Effect.prototype.create = function () {\n\n        if (this.shader === null) {\n\n            return null;\n        }\n    };\n\n    Effect.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n\n        extractDoubleSided(this, element);\n\n        this.shader = null;\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'profile_COMMON':\n\n                    this.parseTechnique(this.parseProfileCOMMON(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Effect.prototype.parseNewparam = function (element) {\n\n        var sid = element.getAttribute('sid');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'surface':\n\n                    this.surface[sid] = new Surface(this).parse(child);\n                    break;\n\n                case 'sampler2D':\n\n                    this.sampler[sid] = new Sampler2D(this).parse(child);\n                    break;\n\n                case 'extra':\n\n                    break;\n\n                default:\n\n                    console.log(child.nodeName);\n                    break;\n\n            }\n        }\n    };\n\n    Effect.prototype.parseProfileCOMMON = function (element) {\n\n        var technique;\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'profile_COMMON':\n\n                    this.parseProfileCOMMON(child);\n                    break;\n\n                case 'technique':\n\n                    technique = child;\n                    break;\n\n                case 'newparam':\n\n                    this.parseNewparam(child);\n                    break;\n\n                case 'image':\n\n                    var _image = new _Image().parse(child);\n                    images[_image.id] = _image;\n                    break;\n\n                case 'extra':\n                    break;\n\n                default:\n\n                    console.log(child.nodeName);\n                    break;\n\n            }\n        }\n\n        return technique;\n    };\n\n    Effect.prototype.parseTechnique = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'constant':\n                case 'lambert':\n                case 'blinn':\n                case 'phong':\n\n                    this.shader = new Shader(child.nodeName, this).parse(child);\n                    break;\n                case 'extra':\n                    this.parseExtra(child);\n                    break;\n                default:\n                    break;\n\n            }\n        }\n    };\n\n    Effect.prototype.parseExtra = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'technique':\n                    this.parseExtraTechnique(child);\n                    break;\n                default:\n                    break;\n\n            }\n        }\n    };\n\n    Effect.prototype.parseExtraTechnique = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'bump':\n                    this.shader.parse(element);\n                    break;\n                default:\n                    break;\n\n            }\n        }\n    };\n\n    function InstanceEffect() {\n\n        this.url = \"\";\n    }\n\n    InstanceEffect.prototype.parse = function (element) {\n\n        this.url = element.getAttribute('url').replace(/^#/, '');\n        return this;\n    };\n\n    function Animation() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.source = {};\n        this.sampler = [];\n        this.channel = [];\n    }\n\n    Animation.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n        this.source = {};\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'animation':\n\n                    var anim = new Animation().parse(child);\n\n                    for (var src in anim.source) {\n\n                        this.source[src] = anim.source[src];\n                    }\n\n                    for (var j = 0; j < anim.channel.length; j++) {\n\n                        this.channel.push(anim.channel[j]);\n                        this.sampler.push(anim.sampler[j]);\n                    }\n\n                    break;\n\n                case 'source':\n\n                    var src = new Source().parse(child);\n                    this.source[src.id] = src;\n                    break;\n\n                case 'sampler':\n\n                    this.sampler.push(new Sampler(this).parse(child));\n                    break;\n\n                case 'channel':\n\n                    this.channel.push(new Channel(this).parse(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Channel(animation) {\n\n        this.animation = animation;\n        this.source = \"\";\n        this.target = \"\";\n        this.fullSid = null;\n        this.sid = null;\n        this.dotSyntax = null;\n        this.arrSyntax = null;\n        this.arrIndices = null;\n        this.member = null;\n    }\n\n    Channel.prototype.parse = function (element) {\n\n        this.source = element.getAttribute('source').replace(/^#/, '');\n        this.target = element.getAttribute('target');\n\n        var parts = this.target.split('/');\n\n        var id = parts.shift();\n        var sid = parts.shift();\n\n        var dotSyntax = sid.indexOf(\".\") >= 0;\n        var arrSyntax = sid.indexOf(\"(\") >= 0;\n\n        if (dotSyntax) {\n\n            parts = sid.split(\".\");\n            this.sid = parts.shift();\n            this.member = parts.shift();\n        } else if (arrSyntax) {\n\n            var arrIndices = sid.split(\"(\");\n            this.sid = arrIndices.shift();\n\n            for (var j = 0; j < arrIndices.length; j++) {\n\n                arrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n            }\n\n            this.arrIndices = arrIndices;\n        } else {\n\n            this.sid = sid;\n        }\n\n        this.fullSid = sid;\n        this.dotSyntax = dotSyntax;\n        this.arrSyntax = arrSyntax;\n\n        return this;\n    };\n\n    function Sampler(animation) {\n\n        this.id = \"\";\n        this.animation = animation;\n        this.inputs = [];\n        this.input = null;\n        this.output = null;\n        this.strideOut = null;\n        this.interpolation = null;\n        this.startTime = null;\n        this.endTime = null;\n        this.duration = 0;\n    }\n\n    Sampler.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.inputs = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'input':\n\n                    this.inputs.push(new Input().parse(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Sampler.prototype.create = function () {\n\n        for (var i = 0; i < this.inputs.length; i++) {\n\n            var input = this.inputs[i];\n            var source = this.animation.source[input.source];\n\n            switch (input.semantic) {\n\n                case 'INPUT':\n\n                    this.input = source.read();\n                    break;\n\n                case 'OUTPUT':\n\n                    this.output = source.read();\n                    this.strideOut = source.accessor.stride;\n                    break;\n\n                case 'INTERPOLATION':\n\n                    this.interpolation = source.read();\n                    break;\n\n                case 'IN_TANGENT':\n\n                    break;\n\n                case 'OUT_TANGENT':\n\n                    break;\n\n                default:\n\n                    console.log(input.semantic);\n                    break;\n\n            }\n        }\n\n        this.startTime = 0;\n        this.endTime = 0;\n        this.duration = 0;\n\n        if (this.input.length) {\n\n            this.startTime = 100000000;\n            this.endTime = -100000000;\n\n            for (var i = 0; i < this.input.length; i++) {\n\n                this.startTime = Math.min(this.startTime, this.input[i]);\n                this.endTime = Math.max(this.endTime, this.input[i]);\n            }\n\n            this.duration = this.endTime - this.startTime;\n        }\n    };\n\n    Sampler.prototype.getData = function (type, ndx, member) {\n\n        var data;\n\n        if (type === 'matrix' && this.strideOut === 16) {\n\n            data = this.output[ndx];\n        } else if (this.strideOut > 1) {\n\n            data = [];\n            ndx *= this.strideOut;\n\n            for (var i = 0; i < this.strideOut; ++i) {\n\n                data[i] = this.output[ndx + i];\n            }\n\n            if (this.strideOut === 3) {\n\n                switch (type) {\n\n                    case 'rotate':\n                    case 'translate':\n\n                        fixCoords(data, -1);\n                        break;\n\n                    case 'scale':\n\n                        fixCoords(data, 1);\n                        break;\n\n                }\n            } else if (this.strideOut === 4 && type === 'matrix') {\n\n                fixCoords(data, -1);\n            }\n        } else {\n\n            data = this.output[ndx];\n\n            if (member && type === 'translate') {\n                data = getConvertedTranslation(member, data);\n            }\n        }\n\n        return data;\n    };\n\n    function Key(time) {\n\n        this.targets = [];\n        this.time = time;\n    }\n\n    Key.prototype.addTarget = function (fullSid, transform, member, data) {\n\n        this.targets.push({\n            sid: fullSid,\n            member: member,\n            transform: transform,\n            data: data\n        });\n    };\n\n    Key.prototype.apply = function (opt_sid) {\n\n        for (var i = 0; i < this.targets.length; ++i) {\n\n            var target = this.targets[i];\n\n            if (!opt_sid || target.sid === opt_sid) {\n\n                target.transform.update(target.data, target.member);\n            }\n        }\n    };\n\n    Key.prototype.getTarget = function (fullSid) {\n\n        for (var i = 0; i < this.targets.length; ++i) {\n\n            if (this.targets[i].sid === fullSid) {\n\n                return this.targets[i];\n            }\n        }\n\n        return null;\n    };\n\n    Key.prototype.hasTarget = function (fullSid) {\n\n        for (var i = 0; i < this.targets.length; ++i) {\n\n            if (this.targets[i].sid === fullSid) {\n\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    // TODO: Currently only doing linear interpolation. Should support full COLLADA spec.\n    Key.prototype.interpolate = function (nextKey, time) {\n\n        for (var i = 0, l = this.targets.length; i < l; i++) {\n\n            var target = this.targets[i],\n                nextTarget = nextKey.getTarget(target.sid),\n                data;\n\n            if (target.transform.type !== 'matrix' && nextTarget) {\n\n                var scale = (time - this.time) / (nextKey.time - this.time),\n                    nextData = nextTarget.data,\n                    prevData = target.data;\n\n                if (scale < 0) scale = 0;\n                if (scale > 1) scale = 1;\n\n                if (prevData.length) {\n\n                    data = [];\n\n                    for (var j = 0; j < prevData.length; ++j) {\n\n                        data[j] = prevData[j] + (nextData[j] - prevData[j]) * scale;\n                    }\n                } else {\n\n                    data = prevData + (nextData - prevData) * scale;\n                }\n            } else {\n\n                data = target.data;\n            }\n\n            target.transform.update(data, target.member);\n        }\n    };\n\n    // Camera\n    function Camera() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.technique = \"\";\n    }\n\n    Camera.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'optics':\n\n                    this.parseOptics(child);\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Camera.prototype.parseOptics = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            if (element.childNodes[i].nodeName === 'technique_common') {\n\n                var technique = element.childNodes[i];\n\n                for (var j = 0; j < technique.childNodes.length; j++) {\n\n                    this.technique = technique.childNodes[j].nodeName;\n\n                    if (this.technique === 'perspective') {\n\n                        var perspective = technique.childNodes[j];\n\n                        for (var k = 0; k < perspective.childNodes.length; k++) {\n\n                            var param = perspective.childNodes[k];\n\n                            switch (param.nodeName) {\n\n                                case 'yfov':\n                                    this.yfov = param.textContent;\n                                    break;\n                                case 'xfov':\n                                    this.xfov = param.textContent;\n                                    break;\n                                case 'znear':\n                                    this.znear = param.textContent;\n                                    break;\n                                case 'zfar':\n                                    this.zfar = param.textContent;\n                                    break;\n                                case 'aspect_ratio':\n                                    this.aspect_ratio = param.textContent;\n                                    break;\n\n                            }\n                        }\n                    } else if (this.technique === 'orthographic') {\n\n                        var orthographic = technique.childNodes[j];\n\n                        for (var k = 0; k < orthographic.childNodes.length; k++) {\n\n                            var param = orthographic.childNodes[k];\n\n                            switch (param.nodeName) {\n\n                                case 'xmag':\n                                    this.xmag = param.textContent;\n                                    break;\n                                case 'ymag':\n                                    this.ymag = param.textContent;\n                                    break;\n                                case 'znear':\n                                    this.znear = param.textContent;\n                                    break;\n                                case 'zfar':\n                                    this.zfar = param.textContent;\n                                    break;\n                                case 'aspect_ratio':\n                                    this.aspect_ratio = param.textContent;\n                                    break;\n\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    function InstanceCamera() {\n\n        this.url = \"\";\n    }\n\n    InstanceCamera.prototype.parse = function (element) {\n\n        this.url = element.getAttribute('url').replace(/^#/, '');\n\n        return this;\n    };\n\n    // Light\n\n    function Light() {\n\n        this.id = \"\";\n        this.name = \"\";\n        this.technique = \"\";\n    }\n\n    Light.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'technique_common':\n\n                    this.parseCommon(child);\n                    break;\n\n                case 'technique':\n\n                    this.parseTechnique(child);\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    Light.prototype.parseCommon = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            switch (element.childNodes[i].nodeName) {\n\n                case 'directional':\n                case 'point':\n                case 'spot':\n                case 'ambient':\n\n                    this.technique = element.childNodes[i].nodeName;\n\n                    var light = element.childNodes[i];\n\n                    for (var j = 0; j < light.childNodes.length; j++) {\n\n                        var child = light.childNodes[j];\n\n                        switch (child.nodeName) {\n\n                            case 'color':\n\n                                var rgba = _floats(child.textContent);\n                                this.color = new THREE.Color(0);\n                                this.color.setRGB(rgba[0], rgba[1], rgba[2]);\n                                this.color.a = rgba[3];\n                                break;\n\n                            case 'falloff_angle':\n\n                                this.falloff_angle = parseFloat(child.textContent);\n                                break;\n\n                            case 'quadratic_attenuation':\n                                var f = parseFloat(child.textContent);\n                                this.distance = f ? Math.sqrt(1 / f) : 0;\n                        }\n                    }\n\n            }\n        }\n\n        return this;\n    };\n\n    Light.prototype.parseTechnique = function (element) {\n\n        this.profile = element.getAttribute('profile');\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n\n            switch (child.nodeName) {\n\n                case 'intensity':\n\n                    this.intensity = parseFloat(child.textContent);\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function InstanceLight() {\n\n        this.url = \"\";\n    }\n\n    InstanceLight.prototype.parse = function (element) {\n\n        this.url = element.getAttribute('url').replace(/^#/, '');\n\n        return this;\n    };\n\n    function KinematicsModel() {\n\n        this.id = '';\n        this.name = '';\n        this.joints = [];\n        this.links = [];\n    }\n\n    KinematicsModel.prototype.parse = function (element) {\n\n        this.id = element.getAttribute('id');\n        this.name = element.getAttribute('name');\n        this.joints = [];\n        this.links = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'technique_common':\n\n                    this.parseCommon(child);\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    KinematicsModel.prototype.parseCommon = function (element) {\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (element.childNodes[i].nodeName) {\n\n                case 'joint':\n                    this.joints.push(new Joint().parse(child));\n                    break;\n\n                case 'link':\n                    this.links.push(new Link().parse(child));\n                    break;\n\n                default:\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Joint() {\n\n        this.sid = '';\n        this.name = '';\n        this.axis = new THREE.Vector3();\n        this.limits = {\n            min: 0,\n            max: 0\n        };\n        this.type = '';\n        this.static = false;\n        this.zeroPosition = 0.0;\n        this.middlePosition = 0.0;\n    }\n\n    Joint.prototype.parse = function (element) {\n\n        this.sid = element.getAttribute('sid');\n        this.name = element.getAttribute('name');\n        this.axis = new THREE.Vector3();\n        this.limits = {\n            min: 0,\n            max: 0\n        };\n        this.type = '';\n        this.static = false;\n        this.zeroPosition = 0.0;\n        this.middlePosition = 0.0;\n\n        var axisElement = element.querySelector('axis');\n        var _axis = _floats(axisElement.textContent);\n        this.axis = getConvertedVec3(_axis, 0);\n\n        var min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\n        var max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\n\n        this.limits = {\n            min: min,\n            max: max\n        };\n\n        var jointTypes = ['prismatic', 'revolute'];\n        for (var i = 0; i < jointTypes.length; i++) {\n\n            var type = jointTypes[i];\n\n            var jointElement = element.querySelector(type);\n\n            if (jointElement) {\n\n                this.type = type;\n            }\n        }\n\n        // if the min is equal to or somehow greater than the max, consider the joint static\n        if (this.limits.min >= this.limits.max) {\n\n            this.static = true;\n        }\n\n        this.middlePosition = (this.limits.min + this.limits.max) / 2.0;\n        return this;\n    };\n\n    function Link() {\n\n        this.sid = '';\n        this.name = '';\n        this.transforms = [];\n        this.attachments = [];\n    }\n\n    Link.prototype.parse = function (element) {\n\n        this.sid = element.getAttribute('sid');\n        this.name = element.getAttribute('name');\n        this.transforms = [];\n        this.attachments = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'attachment_full':\n                    this.attachments.push(new Attachment().parse(child));\n                    break;\n\n                case 'rotate':\n                case 'translate':\n                case 'matrix':\n\n                    this.transforms.push(new Transform().parse(child));\n                    break;\n\n                default:\n\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function Attachment() {\n\n        this.joint = '';\n        this.transforms = [];\n        this.links = [];\n    }\n\n    Attachment.prototype.parse = function (element) {\n\n        this.joint = element.getAttribute('joint').split('/').pop();\n        this.links = [];\n\n        for (var i = 0; i < element.childNodes.length; i++) {\n\n            var child = element.childNodes[i];\n            if (child.nodeType != 1) continue;\n\n            switch (child.nodeName) {\n\n                case 'link':\n                    this.links.push(new Link().parse(child));\n                    break;\n\n                case 'rotate':\n                case 'translate':\n                case 'matrix':\n\n                    this.transforms.push(new Transform().parse(child));\n                    break;\n\n                default:\n\n                    break;\n\n            }\n        }\n\n        return this;\n    };\n\n    function _source(element) {\n\n        var id = element.getAttribute('id');\n\n        if (sources[id] != undefined) {\n\n            return sources[id];\n        }\n\n        sources[id] = new Source(id).parse(element);\n        return sources[id];\n    }\n\n    function _nsResolver(nsPrefix) {\n\n        if (nsPrefix === \"dae\") {\n\n            return \"http://www.collada.org/2005/11/COLLADASchema\";\n        }\n\n        return null;\n    }\n\n    function _bools(str) {\n\n        var raw = _strings(str);\n        var data = [];\n\n        for (var i = 0, l = raw.length; i < l; i++) {\n\n            data.push(raw[i] === 'true' || raw[i] === '1' ? true : false);\n        }\n\n        return data;\n    }\n\n    function _floats(str) {\n\n        var raw = _strings(str);\n        var data = [];\n\n        for (var i = 0, l = raw.length; i < l; i++) {\n\n            data.push(parseFloat(raw[i]));\n        }\n\n        return data;\n    }\n\n    function _ints(str) {\n\n        var raw = _strings(str);\n        var data = [];\n\n        for (var i = 0, l = raw.length; i < l; i++) {\n\n            data.push(parseInt(raw[i], 10));\n        }\n\n        return data;\n    }\n\n    function _strings(str) {\n\n        return str.length > 0 ? _trimString(str).split(/\\s+/) : [];\n    }\n\n    function _trimString(str) {\n\n        return str.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n    }\n\n    function _attr_as_float(element, name, defaultValue) {\n\n        if (element.hasAttribute(name)) {\n\n            return parseFloat(element.getAttribute(name));\n        } else {\n\n            return defaultValue;\n        }\n    }\n\n    function _attr_as_int(element, name, defaultValue) {\n\n        if (element.hasAttribute(name)) {\n\n            return parseInt(element.getAttribute(name), 10);\n        } else {\n\n            return defaultValue;\n        }\n    }\n\n    function _attr_as_string(element, name, defaultValue) {\n\n        if (element.hasAttribute(name)) {\n\n            return element.getAttribute(name);\n        } else {\n\n            return defaultValue;\n        }\n    }\n\n    function _format_float(f, num) {\n\n        if (f === undefined) {\n\n            var s = '0.';\n\n            while (s.length < num + 2) {\n\n                s += '0';\n            }\n\n            return s;\n        }\n\n        num = num || 2;\n\n        var parts = f.toString().split('.');\n        parts[1] = parts.length > 1 ? parts[1].substr(0, num) : \"0\";\n\n        while (parts[1].length < num) {\n\n            parts[1] += '0';\n        }\n\n        return parts.join('.');\n    }\n\n    function loadTextureImage(texture, url) {\n\n        var loader = new THREE.ImageLoader();\n\n        loader.load(url, function (image) {\n\n            texture.image = image;\n            texture.needsUpdate = true;\n        });\n    }\n\n    function extractDoubleSided(obj, element) {\n\n        obj.doubleSided = false;\n\n        var node = element.querySelectorAll('extra double_sided')[0];\n\n        if (node) {\n\n            if (node && parseInt(node.textContent, 10) === 1) {\n\n                obj.doubleSided = true;\n            }\n        }\n    }\n\n    // Up axis conversion\n\n    function setUpConversion() {\n\n        if (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n            upConversion = null;\n        } else {\n\n            switch (colladaUp) {\n\n                case 'X':\n\n                    upConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n                    break;\n\n                case 'Y':\n\n                    upConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n                    break;\n\n                case 'Z':\n\n                    upConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n                    break;\n\n            }\n        }\n    }\n\n    function fixCoords(data, sign) {\n\n        if (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n            return;\n        }\n\n        switch (upConversion) {\n\n            case 'XtoY':\n\n                var tmp = data[0];\n                data[0] = sign * data[1];\n                data[1] = tmp;\n                break;\n\n            case 'XtoZ':\n\n                var tmp = data[2];\n                data[2] = data[1];\n                data[1] = data[0];\n                data[0] = tmp;\n                break;\n\n            case 'YtoX':\n\n                var tmp = data[0];\n                data[0] = data[1];\n                data[1] = sign * tmp;\n                break;\n\n            case 'YtoZ':\n\n                var tmp = data[1];\n                data[1] = sign * data[2];\n                data[2] = tmp;\n                break;\n\n            case 'ZtoX':\n\n                var tmp = data[0];\n                data[0] = data[1];\n                data[1] = data[2];\n                data[2] = tmp;\n                break;\n\n            case 'ZtoY':\n\n                var tmp = data[1];\n                data[1] = data[2];\n                data[2] = sign * tmp;\n                break;\n\n        }\n    }\n\n    function getConvertedTranslation(axis, data) {\n\n        if (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n            return data;\n        }\n\n        switch (axis) {\n            case 'X':\n                data = upConversion === 'XtoY' ? data * -1 : data;\n                break;\n            case 'Y':\n                data = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\n                break;\n            case 'Z':\n                data = upConversion === 'ZtoY' ? data * -1 : data;\n                break;\n            default:\n                break;\n        }\n\n        return data;\n    }\n\n    function getConvertedVec3(data, offset) {\n\n        var arr = [data[offset], data[offset + 1], data[offset + 2]];\n        fixCoords(arr, -1);\n        return new THREE.Vector3(arr[0], arr[1], arr[2]);\n    }\n\n    function getConvertedMat4(data) {\n\n        if (options.convertUpAxis) {\n\n            // First fix rotation and scale\n\n            // Columns first\n            var arr = [data[0], data[4], data[8]];\n            fixCoords(arr, -1);\n            data[0] = arr[0];\n            data[4] = arr[1];\n            data[8] = arr[2];\n            arr = [data[1], data[5], data[9]];\n            fixCoords(arr, -1);\n            data[1] = arr[0];\n            data[5] = arr[1];\n            data[9] = arr[2];\n            arr = [data[2], data[6], data[10]];\n            fixCoords(arr, -1);\n            data[2] = arr[0];\n            data[6] = arr[1];\n            data[10] = arr[2];\n            // Rows second\n            arr = [data[0], data[1], data[2]];\n            fixCoords(arr, -1);\n            data[0] = arr[0];\n            data[1] = arr[1];\n            data[2] = arr[2];\n            arr = [data[4], data[5], data[6]];\n            fixCoords(arr, -1);\n            data[4] = arr[0];\n            data[5] = arr[1];\n            data[6] = arr[2];\n            arr = [data[8], data[9], data[10]];\n            fixCoords(arr, -1);\n            data[8] = arr[0];\n            data[9] = arr[1];\n            data[10] = arr[2];\n\n            // Now fix translation\n            arr = [data[3], data[7], data[11]];\n            fixCoords(arr, -1);\n            data[3] = arr[0];\n            data[7] = arr[1];\n            data[11] = arr[2];\n        }\n\n        return new THREE.Matrix4().set(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], data[9], data[10], data[11], data[12], data[13], data[14], data[15]);\n    }\n\n    function getConvertedIndex(index) {\n\n        if (index > -1 && index < 3) {\n\n            var members = ['X', 'Y', 'Z'],\n                indices = { X: 0, Y: 1, Z: 2 };\n\n            index = getConvertedMember(members[index]);\n            index = indices[index];\n        }\n\n        return index;\n    }\n\n    function getConvertedMember(member) {\n\n        if (options.convertUpAxis) {\n\n            switch (member) {\n\n                case 'X':\n\n                    switch (upConversion) {\n\n                        case 'XtoY':\n                        case 'XtoZ':\n                        case 'YtoX':\n\n                            member = 'Y';\n                            break;\n\n                        case 'ZtoX':\n\n                            member = 'Z';\n                            break;\n\n                    }\n\n                    break;\n\n                case 'Y':\n\n                    switch (upConversion) {\n\n                        case 'XtoY':\n                        case 'YtoX':\n                        case 'ZtoX':\n\n                            member = 'X';\n                            break;\n\n                        case 'XtoZ':\n                        case 'YtoZ':\n                        case 'ZtoY':\n\n                            member = 'Z';\n                            break;\n\n                    }\n\n                    break;\n\n                case 'Z':\n\n                    switch (upConversion) {\n\n                        case 'XtoZ':\n\n                            member = 'X';\n                            break;\n\n                        case 'YtoZ':\n                        case 'ZtoX':\n                        case 'ZtoY':\n\n                            member = 'Y';\n                            break;\n\n                    }\n\n                    break;\n\n            }\n        }\n\n        return member;\n    }\n\n    return {\n\n        load: load,\n        parse: parse,\n        setPreferredShading: setPreferredShading,\n        applySkin: applySkin,\n        geometries: geometries,\n        options: options\n\n    };\n};\n\nmodule.exports = ColladaLoader;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aHJlZS1jb2xsYWRhLWxvYWRlci9pbmRleC5qcz9kZDk0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBUSFJFRSA9IHJlcXVpcmUoJ3RocmVlJyk7XG5cbi8qKlxuKiBAYXV0aG9yIFRpbSBLbmlwIC8gaHR0cDovL3d3dy5mbG9vcnBsYW5uZXIuY29tLyAvIHRpbSBhdCBmbG9vcnBsYW5uZXIuY29tXG4qIEBhdXRob3IgVG9ueSBQYXJpc2kgLyBodHRwOi8vd3d3LnRvbnlwYXJpc2kuY29tL1xuKi9cblxudmFyIENvbGxhZGFMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgQ09MTEFEQSA9IG51bGw7XG4gICAgdmFyIHNjZW5lID0gbnVsbDtcbiAgICB2YXIgdmlzdWFsU2NlbmU7XG4gICAgdmFyIGtpbmVtYXRpY3NNb2RlbDtcblxuICAgIHZhciByZWFkeUNhbGxiYWNrRnVuYyA9IG51bGw7XG5cbiAgICB2YXIgc291cmNlcyA9IHt9O1xuICAgIHZhciBpbWFnZXMgPSB7fTtcbiAgICB2YXIgYW5pbWF0aW9ucyA9IHt9O1xuICAgIHZhciBjb250cm9sbGVycyA9IHt9O1xuICAgIHZhciBnZW9tZXRyaWVzID0ge307XG4gICAgdmFyIG1hdGVyaWFscyA9IHt9O1xuICAgIHZhciBlZmZlY3RzID0ge307XG4gICAgdmFyIGNhbWVyYXMgPSB7fTtcbiAgICB2YXIgbGlnaHRzID0ge307XG5cbiAgICB2YXIgYW5pbURhdGE7XG4gICAgdmFyIGtpbmVtYXRpY3M7XG4gICAgdmFyIHZpc3VhbFNjZW5lcztcbiAgICB2YXIga2luZW1hdGljc01vZGVscztcbiAgICB2YXIgYmFzZVVybDtcbiAgICB2YXIgbW9ycGhzO1xuICAgIHZhciBza2lucztcblxuICAgIHZhciBmbGlwX3V2ID0gdHJ1ZTtcbiAgICB2YXIgcHJlZmVycmVkU2hhZGluZyA9IFRIUkVFLlNtb290aFNoYWRpbmc7XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgLy8gRm9yY2UgR2VvbWV0cnkgdG8gYWx3YXlzIGJlIGNlbnRlcmVkIGF0IHRoZSBsb2NhbCBvcmlnaW4gb2YgdGhlXG4gICAgICAgIC8vIGNvbnRhaW5pbmcgTWVzaC5cbiAgICAgICAgY2VudGVyR2VvbWV0cnk6IGZhbHNlLFxuXG4gICAgICAgIC8vIEF4aXMgY29udmVyc2lvbiBpcyBkb25lIGZvciBnZW9tZXRyaWVzLCBhbmltYXRpb25zLCBhbmQgY29udHJvbGxlcnMuXG4gICAgICAgIC8vIElmIHdlIGV2ZXIgcHVsbCBjYW1lcmFzIG9yIGxpZ2h0cyBvdXQgb2YgdGhlIENPTExBREEgZmlsZSwgdGhleSdsbFxuICAgICAgICAvLyBuZWVkIGV4dHJhIHdvcmsuXG4gICAgICAgIGNvbnZlcnRVcEF4aXM6IGZhbHNlLFxuXG4gICAgICAgIHN1YmRpdmlkZUZhY2VzOiB0cnVlLFxuXG4gICAgICAgIHVwQXhpczogJ1knLFxuXG4gICAgICAgIC8vIEZvciByZWZsZWN0aXZlIG9yIHJlZnJhY3RpdmUgbWF0ZXJpYWxzIHdlJ2xsIHVzZSB0aGlzIGN1YmVtYXBcbiAgICAgICAgZGVmYXVsdEVudk1hcDogbnVsbFxuXG4gICAgfTtcblxuICAgIHZhciBjb2xsYWRhVW5pdCA9IDEuMDtcbiAgICB2YXIgY29sbGFkYVVwID0gJ1knO1xuICAgIHZhciB1cENvbnZlcnNpb24gPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gbG9hZCh1cmwsIHJlYWR5Q2FsbGJhY2ssIHByb2dyZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjaykge1xuXG4gICAgICAgIHZhciBsZW5ndGggPSAwO1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiAmJiBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCkge1xuXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgfHwgcmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlDYWxsYmFja0Z1bmMgPSByZWFkeUNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlKHJlcXVlc3QucmVzcG9uc2UsIHVuZGVmaW5lZCwgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbENhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ29sbGFkYUxvYWRlcjogRW1wdHkgb3Igbm9uLWV4aXN0aW5nIGZpbGUgKFwiICsgdXJsICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSAzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gcmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHsgdG90YWw6IGxlbmd0aCwgbG9hZGVkOiByZXF1ZXN0LnJlc3BvbnNlVGV4dC5sZW5ndGggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZChudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgYWxlcnQoXCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBYTUwhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2UodGV4dCwgY2FsbEJhY2ssIHVybCkge1xuXG4gICAgICAgIENPTExBREEgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHRleHQsICd0ZXh0L3htbCcpO1xuICAgICAgICBjYWxsQmFjayA9IGNhbGxCYWNrIHx8IHJlYWR5Q2FsbGJhY2tGdW5jO1xuXG4gICAgICAgIGlmICh1cmwgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIHBhcnRzLnBvcCgpO1xuICAgICAgICAgICAgYmFzZVVybCA9IChwYXJ0cy5sZW5ndGggPCAxID8gJy4nIDogcGFydHMuam9pbignLycpKSArICcvJztcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlQXNzZXQoKTtcbiAgICAgICAgc2V0VXBDb252ZXJzaW9uKCk7XG4gICAgICAgIGltYWdlcyA9IHBhcnNlTGliKFwibGlicmFyeV9pbWFnZXMgaW1hZ2VcIiwgX0ltYWdlLCBcImltYWdlXCIpO1xuICAgICAgICBtYXRlcmlhbHMgPSBwYXJzZUxpYihcImxpYnJhcnlfbWF0ZXJpYWxzIG1hdGVyaWFsXCIsIE1hdGVyaWFsLCBcIm1hdGVyaWFsXCIpO1xuICAgICAgICBlZmZlY3RzID0gcGFyc2VMaWIoXCJsaWJyYXJ5X2VmZmVjdHMgZWZmZWN0XCIsIEVmZmVjdCwgXCJlZmZlY3RcIik7XG4gICAgICAgIGdlb21ldHJpZXMgPSBwYXJzZUxpYihcImxpYnJhcnlfZ2VvbWV0cmllcyBnZW9tZXRyeVwiLCBHZW9tZXRyeSwgXCJnZW9tZXRyeVwiKTtcbiAgICAgICAgY2FtZXJhcyA9IHBhcnNlTGliKFwibGlicmFyeV9jYW1lcmFzIGNhbWVyYVwiLCBDYW1lcmEsIFwiY2FtZXJhXCIpO1xuICAgICAgICBsaWdodHMgPSBwYXJzZUxpYihcImxpYnJhcnlfbGlnaHRzIGxpZ2h0XCIsIExpZ2h0LCBcImxpZ2h0XCIpO1xuICAgICAgICBjb250cm9sbGVycyA9IHBhcnNlTGliKFwibGlicmFyeV9jb250cm9sbGVycyBjb250cm9sbGVyXCIsIENvbnRyb2xsZXIsIFwiY29udHJvbGxlclwiKTtcbiAgICAgICAgYW5pbWF0aW9ucyA9IHBhcnNlTGliKFwibGlicmFyeV9hbmltYXRpb25zIGFuaW1hdGlvblwiLCBBbmltYXRpb24sIFwiYW5pbWF0aW9uXCIpO1xuICAgICAgICB2aXN1YWxTY2VuZXMgPSBwYXJzZUxpYihcImxpYnJhcnlfdmlzdWFsX3NjZW5lcyB2aXN1YWxfc2NlbmVcIiwgVmlzdWFsU2NlbmUsIFwidmlzdWFsX3NjZW5lXCIpO1xuICAgICAgICBraW5lbWF0aWNzTW9kZWxzID0gcGFyc2VMaWIoXCJsaWJyYXJ5X2tpbmVtYXRpY3NfbW9kZWxzIGtpbmVtYXRpY3NfbW9kZWxcIiwgS2luZW1hdGljc01vZGVsLCBcImtpbmVtYXRpY3NfbW9kZWxcIik7XG5cbiAgICAgICAgbW9ycGhzID0gW107XG4gICAgICAgIHNraW5zID0gW107XG5cbiAgICAgICAgdmlzdWFsU2NlbmUgPSBwYXJzZVNjZW5lKCk7XG4gICAgICAgIHNjZW5lID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXN1YWxTY2VuZS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBzY2VuZS5hZGQoY3JlYXRlU2NlbmVHcmFwaCh2aXN1YWxTY2VuZS5ub2Rlc1tpXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdW5pdCBjb252ZXJzaW9uXG4gICAgICAgIHNjZW5lLnNjYWxlLm11bHRpcGx5U2NhbGFyKGNvbGxhZGFVbml0KTtcblxuICAgICAgICBjcmVhdGVBbmltYXRpb25zKCk7XG5cbiAgICAgICAga2luZW1hdGljc01vZGVsID0gcGFyc2VLaW5lbWF0aWNzTW9kZWwoKTtcbiAgICAgICAgY3JlYXRlS2luZW1hdGljcygpO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSB7XG5cbiAgICAgICAgICAgIHNjZW5lOiBzY2VuZSxcbiAgICAgICAgICAgIG1vcnBoczogbW9ycGhzLFxuICAgICAgICAgICAgc2tpbnM6IHNraW5zLFxuICAgICAgICAgICAgYW5pbWF0aW9uczogYW5pbURhdGEsXG4gICAgICAgICAgICBraW5lbWF0aWNzOiBraW5lbWF0aWNzLFxuICAgICAgICAgICAgZGFlOiB7XG4gICAgICAgICAgICAgICAgaW1hZ2VzOiBpbWFnZXMsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxzOiBtYXRlcmlhbHMsXG4gICAgICAgICAgICAgICAgY2FtZXJhczogY2FtZXJhcyxcbiAgICAgICAgICAgICAgICBsaWdodHM6IGxpZ2h0cyxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBlZmZlY3RzLFxuICAgICAgICAgICAgICAgIGdlb21ldHJpZXM6IGdlb21ldHJpZXMsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcnM6IGNvbnRyb2xsZXJzLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgICAgICAgICAgICAgdmlzdWFsU2NlbmVzOiB2aXN1YWxTY2VuZXMsXG4gICAgICAgICAgICAgICAgdmlzdWFsU2NlbmU6IHZpc3VhbFNjZW5lLFxuICAgICAgICAgICAgICAgIHNjZW5lOiB2aXN1YWxTY2VuZSxcbiAgICAgICAgICAgICAgICBraW5lbWF0aWNzTW9kZWxzOiBraW5lbWF0aWNzTW9kZWxzLFxuICAgICAgICAgICAgICAgIGtpbmVtYXRpY3NNb2RlbDoga2luZW1hdGljc01vZGVsXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoY2FsbEJhY2spIHtcblxuICAgICAgICAgICAgY2FsbEJhY2socmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UHJlZmVycmVkU2hhZGluZyhzaGFkaW5nKSB7XG5cbiAgICAgICAgcHJlZmVycmVkU2hhZGluZyA9IHNoYWRpbmc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VBc3NldCgpIHtcblxuICAgICAgICB2YXIgZWxlbWVudHMgPSBDT0xMQURBLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Fzc2V0Jyk7XG5cbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1swXTtcblxuICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNoaWxkTm9kZXMpIHtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd1bml0JzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGVyID0gY2hpbGQuZ2V0QXR0cmlidXRlKCdtZXRlcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0ZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhZGFVbml0ID0gcGFyc2VGbG9hdChtZXRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3VwX2F4aXMnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYWRhVXAgPSBjaGlsZC50ZXh0Q29udGVudC5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlTGliKHEsIGNsYXNzU3BlYywgcHJlZml4KSB7XG5cbiAgICAgICAgdmFyIGVsZW1lbnRzID0gQ09MTEFEQS5xdWVyeVNlbGVjdG9yQWxsKHEpO1xuXG4gICAgICAgIHZhciBsaWIgPSB7fTtcblxuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgdmFyIGVsZW1lbnRzTGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWxlbWVudHNMZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2pdO1xuICAgICAgICAgICAgdmFyIGRhZUVsZW1lbnQgPSBuZXcgY2xhc3NTcGVjKCkucGFyc2UoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmICghZGFlRWxlbWVudC5pZCB8fCBkYWVFbGVtZW50LmlkLmxlbmd0aCA9PT0gMCkgZGFlRWxlbWVudC5pZCA9IHByZWZpeCArIGkrKztcbiAgICAgICAgICAgIGxpYltkYWVFbGVtZW50LmlkXSA9IGRhZUVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGliO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlU2NlbmUoKSB7XG5cbiAgICAgICAgdmFyIHNjZW5lRWxlbWVudCA9IENPTExBREEucXVlcnlTZWxlY3RvckFsbCgnc2NlbmUgaW5zdGFuY2VfdmlzdWFsX3NjZW5lJylbMF07XG5cbiAgICAgICAgaWYgKHNjZW5lRWxlbWVudCkge1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gc2NlbmVFbGVtZW50LmdldEF0dHJpYnV0ZSgndXJsJykucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgICAgICByZXR1cm4gdmlzdWFsU2NlbmVzW3VybC5sZW5ndGggPiAwID8gdXJsIDogJ3Zpc3VhbF9zY2VuZTAnXTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NNb2RlbCgpIHtcblxuICAgICAgICB2YXIga2luZW1hdGljc01vZGVsRWxlbWVudCA9IENPTExBREEucXVlcnlTZWxlY3RvckFsbCgnaW5zdGFuY2Vfa2luZW1hdGljc19tb2RlbCcpWzBdO1xuXG4gICAgICAgIGlmIChraW5lbWF0aWNzTW9kZWxFbGVtZW50KSB7XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBraW5lbWF0aWNzTW9kZWxFbGVtZW50LmdldEF0dHJpYnV0ZSgndXJsJykucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgICAgICByZXR1cm4ga2luZW1hdGljc01vZGVsc1t1cmwubGVuZ3RoID4gMCA/IHVybCA6ICdraW5lbWF0aWNzX21vZGVsMCddO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGlvbnMoKSB7XG5cbiAgICAgICAgYW5pbURhdGEgPSBbXTtcblxuICAgICAgICAvLyBmaWxsIGluIHRoZSBrZXlzXG4gICAgICAgIHJlY3Vyc2VIaWVyYXJjaHkoc2NlbmUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlY3Vyc2VIaWVyYXJjaHkobm9kZSkge1xuXG4gICAgICAgIHZhciBuID0gdmlzdWFsU2NlbmUuZ2V0Q2hpbGRCeUlkKG5vZGUuY29sbGFkYUlkLCB0cnVlKSxcbiAgICAgICAgICAgIG5ld0RhdGEgPSBudWxsO1xuXG4gICAgICAgIGlmIChuICYmIG4ua2V5cykge1xuXG4gICAgICAgICAgICBuZXdEYXRhID0ge1xuICAgICAgICAgICAgICAgIGZwczogNjAsXG4gICAgICAgICAgICAgICAgaGllcmFyY2h5OiBbe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBuLFxuICAgICAgICAgICAgICAgICAgICBrZXlzOiBuLmtleXMsXG4gICAgICAgICAgICAgICAgICAgIHNpZHM6IG4uc2lkc1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FuaW1hdGlvbl8nICsgbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogMFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYW5pbURhdGEucHVzaChuZXdEYXRhKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gbi5rZXlzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIG5ld0RhdGEubGVuZ3RoID0gTWF0aC5tYXgobmV3RGF0YS5sZW5ndGgsIG4ua2V5c1tpXS50aW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgbmV3RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBoaWVyYXJjaHk6IFt7XG4gICAgICAgICAgICAgICAgICAgIGtleXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBzaWRzOiBbXVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBkID0gcmVjdXJzZUhpZXJhcmNoeShub2RlLmNoaWxkcmVuW2ldKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gZC5oaWVyYXJjaHkubGVuZ3RoOyBqIDwgamw7IGorKykge1xuXG4gICAgICAgICAgICAgICAgbmV3RGF0YS5oaWVyYXJjaHkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBzaWRzOiBbXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld0RhdGE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY0FuaW1hdGlvbkJvdW5kcygpIHtcblxuICAgICAgICB2YXIgc3RhcnQgPSAxMDAwMDAwO1xuICAgICAgICB2YXIgZW5kID0gLXN0YXJ0O1xuICAgICAgICB2YXIgZnJhbWVzID0gMDtcbiAgICAgICAgdmFyIElEO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiBhbmltYXRpb25zKSB7XG5cbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBhbmltYXRpb25zW2lkXTtcbiAgICAgICAgICAgIElEID0gSUQgfHwgYW5pbWF0aW9uLmlkO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb24uc2FtcGxlci5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBhbmltYXRpb24uc2FtcGxlcltpXTtcblxuICAgICAgICAgICAgICAgIHNhbXBsZXIuY3JlYXRlKCk7XG5cbiAgICAgICAgICAgICAgICBzdGFydCA9IE1hdGgubWluKHN0YXJ0LCBzYW1wbGVyLnN0YXJ0VGltZSk7XG4gICAgICAgICAgICAgICAgZW5kID0gTWF0aC5tYXgoZW5kLCBzYW1wbGVyLmVuZFRpbWUpO1xuICAgICAgICAgICAgICAgIGZyYW1lcyA9IE1hdGgubWF4KGZyYW1lcywgc2FtcGxlci5pbnB1dC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCwgZnJhbWVzOiBmcmFtZXMsIElEOiBJRCB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1vcnBoKGdlb21ldHJ5LCBjdHJsKSB7XG5cbiAgICAgICAgdmFyIG1vcnBoQ3RybCA9IGN0cmwgaW5zdGFuY2VvZiBJbnN0YW5jZUNvbnRyb2xsZXIgPyBjb250cm9sbGVyc1tjdHJsLnVybF0gOiBjdHJsO1xuXG4gICAgICAgIGlmICghbW9ycGhDdHJsIHx8ICFtb3JwaEN0cmwubW9ycGgpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb3VsZCBub3QgZmluZCBtb3JwaCBjb250cm9sbGVyIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtb3JwaCA9IG1vcnBoQ3RybC5tb3JwaDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vcnBoLnRhcmdldHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIHRhcmdldF9pZCA9IG1vcnBoLnRhcmdldHNbaV07XG4gICAgICAgICAgICB2YXIgZGFlR2VvbWV0cnkgPSBnZW9tZXRyaWVzW3RhcmdldF9pZF07XG5cbiAgICAgICAgICAgIGlmICghZGFlR2VvbWV0cnkubWVzaCB8fCAhZGFlR2VvbWV0cnkubWVzaC5wcmltaXRpdmVzIHx8ICFkYWVHZW9tZXRyeS5tZXNoLnByaW1pdGl2ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBkYWVHZW9tZXRyeS5tZXNoLnByaW1pdGl2ZXNbMF0uZ2VvbWV0cnk7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXQudmVydGljZXMubGVuZ3RoID09PSBnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgpIHtcblxuICAgICAgICAgICAgICAgIGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5wdXNoKHsgbmFtZTogXCJ0YXJnZXRfMVwiLCB2ZXJ0aWNlczogdGFyZ2V0LnZlcnRpY2VzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZ2VvbWV0cnkubW9ycGhUYXJnZXRzLnB1c2goeyBuYW1lOiBcInRhcmdldF9aXCIsIHZlcnRpY2VzOiBnZW9tZXRyeS52ZXJ0aWNlcyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTa2luKGdlb21ldHJ5LCBjdHJsLCBhcHBseUJpbmRTaGFwZSkge1xuXG4gICAgICAgIHZhciBza2luQ3RybCA9IGNvbnRyb2xsZXJzW2N0cmwudXJsXTtcblxuICAgICAgICBpZiAoIXNraW5DdHJsIHx8ICFza2luQ3RybC5za2luKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY291bGQgbm90IGZpbmQgc2tpbiBjb250cm9sbGVyIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3RybC5za2VsZXRvbiB8fCAhY3RybC5za2VsZXRvbi5sZW5ndGgpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb3VsZCBub3QgZmluZCB0aGUgc2tlbGV0b24gZm9yIHRoZSBza2luIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBza2luID0gc2tpbkN0cmwuc2tpbjtcbiAgICAgICAgdmFyIHNrZWxldG9uID0gdmlzdWFsU2NlbmUuZ2V0Q2hpbGRCeUlkKGN0cmwuc2tlbGV0b25bMF0pO1xuICAgICAgICB2YXIgaGllcmFyY2h5ID0gW107XG5cbiAgICAgICAgYXBwbHlCaW5kU2hhcGUgPSBhcHBseUJpbmRTaGFwZSAhPT0gdW5kZWZpbmVkID8gYXBwbHlCaW5kU2hhcGUgOiB0cnVlO1xuXG4gICAgICAgIHZhciBib25lcyA9IFtdO1xuICAgICAgICBnZW9tZXRyeS5za2luV2VpZ2h0cyA9IFtdO1xuICAgICAgICBnZW9tZXRyeS5za2luSW5kaWNlcyA9IFtdO1xuXG4gICAgICAgIC8vY3JlYXRlQm9uZXMoIGdlb21ldHJ5LmJvbmVzLCBza2luLCBoaWVyYXJjaHksIHNrZWxldG9uLCBudWxsLCAtMSApO1xuICAgICAgICAvL2NyZWF0ZVdlaWdodHMoIHNraW4sIGdlb21ldHJ5LmJvbmVzLCBnZW9tZXRyeS5za2luSW5kaWNlcywgZ2VvbWV0cnkuc2tpbldlaWdodHMgKTtcblxuICAgICAgICAvKlxuICAgICAgICBnZW9tZXRyeS5hbmltYXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiAndGFrZV8wMDEnLFxuICAgICAgICAgICAgZnBzOiAzMCxcbiAgICAgICAgICAgIGxlbmd0aDogMixcbiAgICAgICAgICAgIEpJVDogdHJ1ZSxcbiAgICAgICAgICAgIGhpZXJhcmNoeTogaGllcmFyY2h5XG4gICAgICAgIH07XG4gICAgICAgICovXG5cbiAgICAgICAgaWYgKGFwcGx5QmluZFNoYXBlKSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzW2ldLmFwcGx5TWF0cml4NChza2luLmJpbmRTaGFwZU1hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cFNrZWxldG9uKG5vZGUsIGJvbmVzLCBmcmFtZSwgcGFyZW50KSB7XG5cbiAgICAgICAgbm9kZS53b3JsZCA9IG5vZGUud29ybGQgfHwgbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICAgICAgbm9kZS5sb2NhbHdvcmxkID0gbm9kZS5sb2NhbHdvcmxkIHx8IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgICAgIG5vZGUud29ybGQuY29weShub2RlLm1hdHJpeCk7XG4gICAgICAgIG5vZGUubG9jYWx3b3JsZC5jb3B5KG5vZGUubWF0cml4KTtcblxuICAgICAgICBpZiAobm9kZS5jaGFubmVscyAmJiBub2RlLmNoYW5uZWxzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5vZGUuY2hhbm5lbHNbMF07XG4gICAgICAgICAgICB2YXIgbSA9IGNoYW5uZWwuc2FtcGxlci5vdXRwdXRbZnJhbWVdO1xuXG4gICAgICAgICAgICBpZiAobSBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDQpIHtcblxuICAgICAgICAgICAgICAgIG5vZGUud29ybGQuY29weShtKTtcbiAgICAgICAgICAgICAgICBub2RlLmxvY2Fsd29ybGQuY29weShtKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUgPT09IDApIG5vZGUubWF0cml4LmNvcHkobSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50KSB7XG5cbiAgICAgICAgICAgIG5vZGUud29ybGQubXVsdGlwbHlNYXRyaWNlcyhwYXJlbnQsIG5vZGUud29ybGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9uZXMucHVzaChub2RlKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgc2V0dXBTa2VsZXRvbihub2RlLm5vZGVzW2ldLCBib25lcywgZnJhbWUsIG5vZGUud29ybGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXBTa2lubmluZ01hdHJpY2VzKGJvbmVzLCBza2luKSB7XG5cbiAgICAgICAgLy8gRklYTUU6IHRoaXMgaXMgZHVtYi4uLlxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGJvbmUgPSBib25lc1tpXTtcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IC0xO1xuXG4gICAgICAgICAgICBpZiAoYm9uZS50eXBlICE9ICdKT0lOVCcpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNraW4uam9pbnRzLmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoYm9uZS5zaWQgPT09IHNraW4uam9pbnRzW2pdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBqO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmb3VuZCA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW52ID0gc2tpbi5pbnZCaW5kTWF0cmljZXNbZm91bmRdO1xuXG4gICAgICAgICAgICAgICAgYm9uZS5pbnZCaW5kTWF0cml4ID0gaW52O1xuICAgICAgICAgICAgICAgIGJvbmUuc2tpbm5pbmdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgICAgICAgICAgICAgIGJvbmUuc2tpbm5pbmdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhib25lLndvcmxkLCBpbnYpOyAvLyAoSUJNaSAqIEpNaSlcbiAgICAgICAgICAgICAgICBib25lLmFuaW1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG5cbiAgICAgICAgICAgICAgICBib25lLmFuaW1hdHJpeC5jb3B5KGJvbmUubG9jYWx3b3JsZCk7XG4gICAgICAgICAgICAgICAgYm9uZS53ZWlnaHRzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNraW4ud2VpZ2h0cy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2tpbi53ZWlnaHRzW2pdLmxlbmd0aDsgaysrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gc2tpbi53ZWlnaHRzW2pdW2tdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAody5qb2ludCA9PT0gZm91bmQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUud2VpZ2h0cy5wdXNoKHcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkNvbGxhZGFMb2FkZXI6IENvdWxkIG5vdCBmaW5kIGpvaW50ICdcIiArIGJvbmUuc2lkICsgXCInLlwiKTtcblxuICAgICAgICAgICAgICAgIGJvbmUuc2tpbm5pbmdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgICAgICAgICAgICAgIGJvbmUud2VpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy9XYWxrIHRoZSBDb2xsYWRhIHRyZWUgYW5kIGZsYXR0ZW4gdGhlIGJvbmVzIGludG8gYSBsaXN0LCBleHRyYWN0IHRoZSBwb3NpdGlvbiwgcXVhdCBhbmQgc2NhbGUgZnJvbSB0aGUgbWF0cml4XG4gICAgZnVuY3Rpb24gZmxhdHRlblNrZWxldG9uKHNrZWxldG9uKSB7XG5cbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgdmFyIHdhbGsgPSBmdW5jdGlvbiAocGFyZW50aWQsIG5vZGUsIGxpc3QpIHtcblxuICAgICAgICAgICAgdmFyIGJvbmUgPSB7fTtcbiAgICAgICAgICAgIGJvbmUubmFtZSA9IG5vZGUuc2lkO1xuICAgICAgICAgICAgYm9uZS5wYXJlbnQgPSBwYXJlbnRpZDtcbiAgICAgICAgICAgIGJvbmUubWF0cml4ID0gbm9kZS5tYXRyaXg7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtuZXcgVEhSRUUuVmVjdG9yMygpLCBuZXcgVEhSRUUuUXVhdGVybmlvbigpLCBuZXcgVEhSRUUuVmVjdG9yMygpXTtcbiAgICAgICAgICAgIGJvbmUubWF0cml4LmRlY29tcG9zZShkYXRhWzBdLCBkYXRhWzFdLCBkYXRhWzJdKTtcblxuICAgICAgICAgICAgYm9uZS5wb3MgPSBbZGF0YVswXS54LCBkYXRhWzBdLnksIGRhdGFbMF0uel07XG5cbiAgICAgICAgICAgIGJvbmUuc2NsID0gW2RhdGFbMl0ueCwgZGF0YVsyXS55LCBkYXRhWzJdLnpdO1xuICAgICAgICAgICAgYm9uZS5yb3RxID0gW2RhdGFbMV0ueCwgZGF0YVsxXS55LCBkYXRhWzFdLnosIGRhdGFbMV0ud107XG4gICAgICAgICAgICBsaXN0LnB1c2goYm9uZSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gbm9kZS5ub2Rlcykge1xuXG4gICAgICAgICAgICAgICAgd2Fsayhub2RlLnNpZCwgbm9kZS5ub2Rlc1tpXSwgbGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2FsaygtMSwgc2tlbGV0b24sIGxpc3QpO1xuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG5cbiAgICAvL01vdmUgdGhlIHZlcnRpY2VzIGludG8gdGhlIHBvc2UgdGhhdCBpcyBwcm9wZXIgZm9yIHRoZSBzdGFydCBvZiB0aGUgYW5pbWF0aW9uXG4gICAgZnVuY3Rpb24gc2tpblRvQmluZFBvc2UoZ2VvbWV0cnksIHNrZWxldG9uLCBza2luQ29udHJvbGxlcikge1xuXG4gICAgICAgIHZhciBib25lcyA9IFtdO1xuICAgICAgICBzZXR1cFNrZWxldG9uKHNrZWxldG9uLCBib25lcywgLTEpO1xuICAgICAgICBzZXR1cFNraW5uaW5nTWF0cmljZXMoYm9uZXMsIHNraW5Db250cm9sbGVyLnNraW4pO1xuICAgICAgICB2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgIHZhciBza2lubmVkID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBza2lubmVkLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKGJvbmVzW2ldLnR5cGUgIT0gJ0pPSU5UJykgY29udGludWU7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYm9uZXNbaV0ud2VpZ2h0cy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHcgPSBib25lc1tpXS53ZWlnaHRzW2pdO1xuICAgICAgICAgICAgICAgIHZhciB2aWR4ID0gdy5pbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0ID0gdy53ZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgbyA9IGdlb21ldHJ5LnZlcnRpY2VzW3ZpZHhdO1xuICAgICAgICAgICAgICAgIHZhciBzID0gc2tpbm5lZFt2aWR4XTtcblxuICAgICAgICAgICAgICAgIHYueCA9IG8ueDtcbiAgICAgICAgICAgICAgICB2LnkgPSBvLnk7XG4gICAgICAgICAgICAgICAgdi56ID0gby56O1xuXG4gICAgICAgICAgICAgICAgdi5hcHBseU1hdHJpeDQoYm9uZXNbaV0uc2tpbm5pbmdNYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgcy54ICs9IHYueCAqIHdlaWdodDtcbiAgICAgICAgICAgICAgICBzLnkgKz0gdi55ICogd2VpZ2h0O1xuICAgICAgICAgICAgICAgIHMueiArPSB2LnogKiB3ZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzW2ldID0gc2tpbm5lZFtpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5U2tpbihnZW9tZXRyeSwgaW5zdGFuY2VDdHJsLCBmcmFtZSkge1xuXG4gICAgICAgIHZhciBza2luQ29udHJvbGxlciA9IGNvbnRyb2xsZXJzW2luc3RhbmNlQ3RybC51cmxdO1xuXG4gICAgICAgIGZyYW1lID0gZnJhbWUgIT09IHVuZGVmaW5lZCA/IGZyYW1lIDogNDA7XG5cbiAgICAgICAgaWYgKCFza2luQ29udHJvbGxlciB8fCAhc2tpbkNvbnRyb2xsZXIuc2tpbikge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29sbGFkYUxvYWRlcjogQ291bGQgbm90IGZpbmQgc2tpbiBjb250cm9sbGVyLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpbnN0YW5jZUN0cmwuc2tlbGV0b24gfHwgIWluc3RhbmNlQ3RybC5za2VsZXRvbi5sZW5ndGgpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbGxhZGFMb2FkZXI6IENvdWxkIG5vdCBmaW5kIHRoZSBza2VsZXRvbiBmb3IgdGhlIHNraW4uICcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFuaW1hdGlvbkJvdW5kcyA9IGNhbGNBbmltYXRpb25Cb3VuZHMoKTtcbiAgICAgICAgdmFyIHNrZWxldG9uID0gdmlzdWFsU2NlbmUuZ2V0Q2hpbGRCeUlkKGluc3RhbmNlQ3RybC5za2VsZXRvblswXSwgdHJ1ZSkgfHwgdmlzdWFsU2NlbmUuZ2V0Q2hpbGRCeVNpZChpbnN0YW5jZUN0cmwuc2tlbGV0b25bMF0sIHRydWUpO1xuXG4gICAgICAgIC8vZmxhdHRlbiB0aGUgc2tlbGV0b24gaW50byBhIGxpc3Qgb2YgYm9uZXNcbiAgICAgICAgdmFyIGJvbmVsaXN0ID0gZmxhdHRlblNrZWxldG9uKHNrZWxldG9uKTtcbiAgICAgICAgdmFyIGpvaW50cyA9IHNraW5Db250cm9sbGVyLnNraW4uam9pbnRzO1xuXG4gICAgICAgIC8vc29ydCB0aGF0IGxpc3Qgc28gdGhhdCB0aGUgb3JkZXIgcmVmbGVjdHMgdGhlIG9yZGVyIGluIHRoZSBqb2ludCBsaXN0XG4gICAgICAgIHZhciBzb3J0ZWRib25lcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJvbmVsaXN0Lmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoYm9uZWxpc3Rbal0ubmFtZSA9PT0gam9pbnRzW2ldKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc29ydGVkYm9uZXNbaV0gPSBib25lbGlzdFtqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2hvb2sgdXAgdGhlIHBhcmVudHMgYnkgaW5kZXggaW5zdGVhZCBvZiBuYW1lXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29ydGVkYm9uZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzb3J0ZWRib25lcy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRlZGJvbmVzW2ldLnBhcmVudCA9PT0gc29ydGVkYm9uZXNbal0ubmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNvcnRlZGJvbmVzW2ldLnBhcmVudCA9IGo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGksIGosIHcsIHZpZHgsIHdlaWdodDtcbiAgICAgICAgdmFyIHYgPSBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgICAgICAgICAgbyxcbiAgICAgICAgICAgIHM7XG5cbiAgICAgICAgLy8gbW92ZSB2ZXJ0aWNlcyB0byBiaW5kIHNoYXBlXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZ2VvbWV0cnkudmVydGljZXNbaV0uYXBwbHlNYXRyaXg0KHNraW5Db250cm9sbGVyLnNraW4uYmluZFNoYXBlTWF0cml4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBza2luSW5kaWNlcyA9IFtdO1xuICAgICAgICB2YXIgc2tpbldlaWdodHMgPSBbXTtcbiAgICAgICAgdmFyIHdlaWdodHMgPSBza2luQ29udHJvbGxlci5za2luLndlaWdodHM7XG5cbiAgICAgICAgLy8gaG9vayB1cCB0aGUgc2tpbiB3ZWlnaHRzXG4gICAgICAgIC8vIFRPRE8gLSB0aGlzIG1pZ2h0IGJlIGEgZ29vZCBwbGFjZSB0byBjaG9vc2UgZ3JlYXRlc3QgNCB3ZWlnaHRzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgaW5kaWNpZXMgPSBuZXcgVEhSRUUuVmVjdG9yNCh3ZWlnaHRzW2ldWzBdID8gd2VpZ2h0c1tpXVswXS5qb2ludCA6IDAsIHdlaWdodHNbaV1bMV0gPyB3ZWlnaHRzW2ldWzFdLmpvaW50IDogMCwgd2VpZ2h0c1tpXVsyXSA/IHdlaWdodHNbaV1bMl0uam9pbnQgOiAwLCB3ZWlnaHRzW2ldWzNdID8gd2VpZ2h0c1tpXVszXS5qb2ludCA6IDApO1xuICAgICAgICAgICAgdmFyIHdlaWdodCA9IG5ldyBUSFJFRS5WZWN0b3I0KHdlaWdodHNbaV1bMF0gPyB3ZWlnaHRzW2ldWzBdLndlaWdodCA6IDAsIHdlaWdodHNbaV1bMV0gPyB3ZWlnaHRzW2ldWzFdLndlaWdodCA6IDAsIHdlaWdodHNbaV1bMl0gPyB3ZWlnaHRzW2ldWzJdLndlaWdodCA6IDAsIHdlaWdodHNbaV1bM10gPyB3ZWlnaHRzW2ldWzNdLndlaWdodCA6IDApO1xuXG4gICAgICAgICAgICBza2luSW5kaWNlcy5wdXNoKGluZGljaWVzKTtcbiAgICAgICAgICAgIHNraW5XZWlnaHRzLnB1c2god2VpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdlb21ldHJ5LnNraW5JbmRpY2VzID0gc2tpbkluZGljZXM7XG4gICAgICAgIGdlb21ldHJ5LnNraW5XZWlnaHRzID0gc2tpbldlaWdodHM7XG4gICAgICAgIGdlb21ldHJ5LmJvbmVzID0gc29ydGVkYm9uZXM7XG4gICAgICAgIC8vIHByb2Nlc3MgYW5pbWF0aW9uLCBvciBzaW1wbHkgcG9zZSB0aGUgcmlnIGlmIG5vIGFuaW1hdGlvblxuXG4gICAgICAgIC8vY3JlYXRlIGFuIGFuaW1hdGlvbiBmb3IgdGhlIGFuaW1hdGVkIGJvbmVzXG4gICAgICAgIC8vTk9URTogdGhpcyBoYXMgbm8gZWZmZWN0IHdoZW4gdXNpbmcgbW9ycGh0YXJnZXRzXG4gICAgICAgIHZhciBhbmltYXRpb25kYXRhID0geyBcIm5hbWVcIjogYW5pbWF0aW9uQm91bmRzLklELCBcImZwc1wiOiAzMCwgXCJsZW5ndGhcIjogYW5pbWF0aW9uQm91bmRzLmZyYW1lcyAvIDMwLCBcImhpZXJhcmNoeVwiOiBbXSB9O1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc29ydGVkYm9uZXMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgYW5pbWF0aW9uZGF0YS5oaWVyYXJjaHkucHVzaCh7IHBhcmVudDogc29ydGVkYm9uZXNbal0ucGFyZW50LCBuYW1lOiBzb3J0ZWRib25lc1tqXS5uYW1lLCBrZXlzOiBbXSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb2xsYWRhTG9hZGVyOicsIGFuaW1hdGlvbkJvdW5kcy5JRCArICcgaGFzICcgKyBzb3J0ZWRib25lcy5sZW5ndGggKyAnIGJvbmVzLicpO1xuXG4gICAgICAgIHNraW5Ub0JpbmRQb3NlKGdlb21ldHJ5LCBza2VsZXRvbiwgc2tpbkNvbnRyb2xsZXIpO1xuXG4gICAgICAgIGZvciAoZnJhbWUgPSAwOyBmcmFtZSA8IGFuaW1hdGlvbkJvdW5kcy5mcmFtZXM7IGZyYW1lKyspIHtcblxuICAgICAgICAgICAgdmFyIGJvbmVzID0gW107XG4gICAgICAgICAgICB2YXIgc2tpbm5lZCA9IFtdO1xuICAgICAgICAgICAgLy8gcHJvY2VzcyB0aGUgZnJhbWUgYW5kIHNldHVwIHRoZSByaWcgd2l0aCBhIGZyZXNoXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0sIHBvc3NpYmx5IGZyb20gdGhlIGJvbmUncyBhbmltYXRpb24gY2hhbm5lbChzKVxuXG4gICAgICAgICAgICBzZXR1cFNrZWxldG9uKHNrZWxldG9uLCBib25lcywgZnJhbWUpO1xuICAgICAgICAgICAgc2V0dXBTa2lubmluZ01hdHJpY2VzKGJvbmVzLCBza2luQ29udHJvbGxlci5za2luKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib25lcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhbmltYXRpb25kYXRhLmhpZXJhcmNoeS5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25kYXRhLmhpZXJhcmNoeVtqXS5uYW1lID09PSBib25lc1tpXS5zaWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LnRpbWUgPSBmcmFtZSAvIDMwO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5Lm1hdHJpeCA9IGJvbmVzW2ldLmFuaW1hdHJpeDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lID09PSAwKSBib25lc1tpXS5tYXRyaXggPSBrZXkubWF0cml4O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtuZXcgVEhSRUUuVmVjdG9yMygpLCBuZXcgVEhSRUUuUXVhdGVybmlvbigpLCBuZXcgVEhSRUUuVmVjdG9yMygpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleS5tYXRyaXguZGVjb21wb3NlKGRhdGFbMF0sIGRhdGFbMV0sIGRhdGFbMl0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkucG9zID0gW2RhdGFbMF0ueCwgZGF0YVswXS55LCBkYXRhWzBdLnpdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkuc2NsID0gW2RhdGFbMl0ueCwgZGF0YVsyXS55LCBkYXRhWzJdLnpdO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LnJvdCA9IGRhdGFbMV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbmRhdGEuaGllcmFyY2h5W2pdLmtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZW9tZXRyeS5hbmltYXRpb24gPSBhbmltYXRpb25kYXRhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlS2luZW1hdGljcygpIHtcblxuICAgICAgICBpZiAoa2luZW1hdGljc01vZGVsICYmIGtpbmVtYXRpY3NNb2RlbC5qb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBraW5lbWF0aWNzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGpvaW50TWFwID0ge307XG5cbiAgICAgICAgdmFyIF9hZGRUb01hcCA9IGZ1bmN0aW9uIChqb2ludEluZGV4LCBwYXJlbnRWaXN1YWxFbGVtZW50KSB7XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnRWaXN1YWxFbGVtZW50SWQgPSBwYXJlbnRWaXN1YWxFbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgIHZhciBjb2xsYWRhTm9kZSA9IHZpc3VhbFNjZW5lLmdldENoaWxkQnlJZChwYXJlbnRWaXN1YWxFbGVtZW50SWQsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGpvaW50ID0ga2luZW1hdGljc01vZGVsLmpvaW50c1tqb2ludEluZGV4XTtcblxuICAgICAgICAgICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24gKG5vZGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbGxhZGFJZCA9PSBwYXJlbnRWaXN1YWxFbGVtZW50SWQpIHtcblxuICAgICAgICAgICAgICAgICAgICBqb2ludE1hcFtqb2ludEluZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zOiBjb2xsYWRhTm9kZS50cmFuc2Zvcm1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQ6IGpvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGpvaW50Lnplcm9Qb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGtpbmVtYXRpY3MgPSB7XG5cbiAgICAgICAgICAgIGpvaW50czoga2luZW1hdGljc01vZGVsICYmIGtpbmVtYXRpY3NNb2RlbC5qb2ludHMsXG5cbiAgICAgICAgICAgIGdldEpvaW50VmFsdWU6IGZ1bmN0aW9uIChqb2ludEluZGV4KSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgam9pbnREYXRhID0gam9pbnRNYXBbam9pbnRJbmRleF07XG5cbiAgICAgICAgICAgICAgICBpZiAoam9pbnREYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpvaW50RGF0YS5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRKb2ludFZhbHVlOiBqb2ludCAnICsgam9pbnRJbmRleCArICcgZG9lc25cXCd0IGV4aXN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc2V0Sm9pbnRWYWx1ZTogZnVuY3Rpb24gKGpvaW50SW5kZXgsIHZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgam9pbnREYXRhID0gam9pbnRNYXBbam9pbnRJbmRleF07XG5cbiAgICAgICAgICAgICAgICBpZiAoam9pbnREYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gam9pbnREYXRhLmpvaW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IGpvaW50LmxpbWl0cy5tYXggfHwgdmFsdWUgPCBqb2ludC5saW1pdHMubWluKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXRKb2ludFZhbHVlOiBqb2ludCAnICsgam9pbnRJbmRleCArICcgdmFsdWUgJyArIHZhbHVlICsgJyBvdXRzaWRlIG9mIGxpbWl0cyAobWluOiAnICsgam9pbnQubGltaXRzLm1pbiArICcsIG1heDogJyArIGpvaW50LmxpbWl0cy5tYXggKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpvaW50LnN0YXRpYykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2V0Sm9pbnRWYWx1ZTogam9pbnQgJyArIGpvaW50SW5kZXggKyAnIGlzIHN0YXRpYycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhyZWVqc05vZGUgPSBqb2ludERhdGEubm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBheGlzID0gam9pbnQuYXhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1zID0gam9pbnREYXRhLnRyYW5zZm9ybXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBraW5kYSBnaGV0dG8gam9pbnQgZGV0ZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybS5zaWQgJiYgdHJhbnNmb3JtLnNpZC5pbmRleE9mKCdqb2ludCcgKyBqb2ludEluZGV4KSAhPT0gLTEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcHBseSBhY3R1YWwgam9pbnQgdmFsdWUgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGpvaW50LnR5cGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV2b2x1dGUnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KG0xLm1ha2VSb3RhdGlvbkF4aXMoYXhpcywgVEhSRUUuTWF0aC5kZWdUb1JhZCh2YWx1ZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJpc21hdGljJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseShtMS5tYWtlVHJhbnNsYXRpb24oYXhpcy54ICogdmFsdWUsIGF4aXMueSAqIHZhbHVlLCBheGlzLnogKiB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXRKb2ludFZhbHVlOiB1bmtub3duIGpvaW50IHR5cGU6ICcgKyBqb2ludC50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbTEgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHJhbnNmb3JtLnR5cGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSh0cmFuc2Zvcm0ub2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4Lm11bHRpcGx5KG0xLm1ha2VUcmFuc2xhdGlvbih0cmFuc2Zvcm0ub2JqLngsIHRyYW5zZm9ybS5vYmoueSwgdHJhbnNmb3JtLm9iai56KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseShtMS5tYWtlUm90YXRpb25BeGlzKHRyYW5zZm9ybS5vYmosIHRyYW5zZm9ybS5hbmdsZSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwbHkgdGhlIG1hdHJpeCB0byB0aGUgdGhyZWVqcyBub2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNGbG9hdDMyQXJyID0gbWF0cml4LmVsZW1lbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbWVudHNGbG9hdDMyQXJyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzUm93TWFqb3IgPSBbZWxlbWVudHNbMF0sIGVsZW1lbnRzWzRdLCBlbGVtZW50c1s4XSwgZWxlbWVudHNbMTJdLCBlbGVtZW50c1sxXSwgZWxlbWVudHNbNV0sIGVsZW1lbnRzWzldLCBlbGVtZW50c1sxM10sIGVsZW1lbnRzWzJdLCBlbGVtZW50c1s2XSwgZWxlbWVudHNbMTBdLCBlbGVtZW50c1sxNF0sIGVsZW1lbnRzWzNdLCBlbGVtZW50c1s3XSwgZWxlbWVudHNbMTFdLCBlbGVtZW50c1sxNV1dO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlZWpzTm9kZS5tYXRyaXguc2V0LmFwcGx5KHRocmVlanNOb2RlLm1hdHJpeCwgZWxlbWVudHNSb3dNYWpvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlZWpzTm9kZS5tYXRyaXguZGVjb21wb3NlKHRocmVlanNOb2RlLnBvc2l0aW9uLCB0aHJlZWpzTm9kZS5xdWF0ZXJuaW9uLCB0aHJlZWpzTm9kZS5zY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXRKb2ludFZhbHVlOiBqb2ludCAnICsgam9pbnRJbmRleCArICcgZG9lc25cXCd0IGV4aXN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGVsZW1lbnQgPSBDT0xMQURBLnF1ZXJ5U2VsZWN0b3IoJ3NjZW5lIGluc3RhbmNlX2tpbmVtYXRpY3Nfc2NlbmUnKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JpbmRfam9pbnRfYXhpcyc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aXN1YWxUYXJnZXQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpLnNwbGl0KCcvJykucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXhpcyA9IGNoaWxkLnF1ZXJ5U2VsZWN0b3IoJ2F4aXMgcGFyYW0nKS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludEluZGV4ID0gcGFyc2VJbnQoYXhpcy5zcGxpdCgnam9pbnQnKS5wb3AoKS5zcGxpdCgnLicpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aXN1YWxUYXJnZXRFbGVtZW50ID0gQ09MTEFEQS5xdWVyeVNlbGVjdG9yKCdbc2lkPVwiJyArIHZpc3VhbFRhcmdldCArICdcIl0nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpc3VhbFRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50VmlzdWFsRWxlbWVudCA9IHZpc3VhbFRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkVG9NYXAoam9pbnRJbmRleCwgcGFyZW50VmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NlbmVHcmFwaChub2RlLCBwYXJlbnQpIHtcblxuICAgICAgICB2YXIgb2JqID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgICAgIHZhciBza2lubmVkID0gZmFsc2U7XG4gICAgICAgIHZhciBza2luQ29udHJvbGxlcjtcbiAgICAgICAgdmFyIG1vcnBoQ29udHJvbGxlcjtcbiAgICAgICAgdmFyIGksIGo7XG5cbiAgICAgICAgLy8gRklYTUU6IGNvbnRyb2xsZXJzXG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGUuY29udHJvbGxlcnMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyc1tub2RlLmNvbnRyb2xsZXJzW2ldLnVybF07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY29udHJvbGxlci50eXBlKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdza2luJzpcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cmllc1tjb250cm9sbGVyLnNraW4uc291cmNlXSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdF9nZW9tID0gbmV3IEluc3RhbmNlR2VvbWV0cnkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdF9nZW9tLnVybCA9IGNvbnRyb2xsZXIuc2tpbi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0X2dlb20uaW5zdGFuY2VfbWF0ZXJpYWwgPSBub2RlLmNvbnRyb2xsZXJzW2ldLmluc3RhbmNlX21hdGVyaWFsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdlb21ldHJpZXMucHVzaChpbnN0X2dlb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2luQ29udHJvbGxlciA9IG5vZGUuY29udHJvbGxlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udHJvbGxlcnNbY29udHJvbGxlci5za2luLnNvdXJjZV0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXJnaDogY29udHJvbGxlciBjYW4gYmUgY2hhaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBtb3N0IGJhc2ljIGNhc2UuLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlY29uZCA9IGNvbnRyb2xsZXJzW2NvbnRyb2xsZXIuc2tpbi5zb3VyY2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9ycGhDb250cm9sbGVyID0gc2Vjb25kO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdHNraW5Db250cm9sbGVyID0gbm9kZS5jb250cm9sbGVyc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZC5tb3JwaCAmJiBnZW9tZXRyaWVzW3NlY29uZC5tb3JwaC5zb3VyY2VdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdF9nZW9tID0gbmV3IEluc3RhbmNlR2VvbWV0cnkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RfZ2VvbS51cmwgPSBzZWNvbmQubW9ycGguc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RfZ2VvbS5pbnN0YW5jZV9tYXRlcmlhbCA9IG5vZGUuY29udHJvbGxlcnNbaV0uaW5zdGFuY2VfbWF0ZXJpYWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdlb21ldHJpZXMucHVzaChpbnN0X2dlb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdtb3JwaCc6XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlb21ldHJpZXNbY29udHJvbGxlci5tb3JwaC5zb3VyY2VdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0X2dlb20gPSBuZXcgSW5zdGFuY2VHZW9tZXRyeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0X2dlb20udXJsID0gY29udHJvbGxlci5tb3JwaC5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0X2dlb20uaW5zdGFuY2VfbWF0ZXJpYWwgPSBub2RlLmNvbnRyb2xsZXJzW2ldLmluc3RhbmNlX21hdGVyaWFsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdlb21ldHJpZXMucHVzaChpbnN0X2dlb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9ycGhDb250cm9sbGVyID0gbm9kZS5jb250cm9sbGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb2xsYWRhTG9hZGVyOiBNb3JwaC1jb250cm9sbGVyIHBhcnRpYWxseSBzdXBwb3J0ZWQuJyk7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2VvbWV0cmllc1xuXG4gICAgICAgIHZhciBkb3VibGVfc2lkZWRfbWF0ZXJpYWxzID0ge307XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGUuZ2VvbWV0cmllcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VfZ2VvbWV0cnkgPSBub2RlLmdlb21ldHJpZXNbaV07XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VfbWF0ZXJpYWxzID0gaW5zdGFuY2VfZ2VvbWV0cnkuaW5zdGFuY2VfbWF0ZXJpYWw7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzW2luc3RhbmNlX2dlb21ldHJ5LnVybF07XG4gICAgICAgICAgICB2YXIgdXNlZF9tYXRlcmlhbHMgPSB7fTtcbiAgICAgICAgICAgIHZhciB1c2VkX21hdGVyaWFsc19hcnJheSA9IFtdO1xuICAgICAgICAgICAgdmFyIG51bV9tYXRlcmlhbHMgPSAwO1xuICAgICAgICAgICAgdmFyIGZpcnN0X21hdGVyaWFsO1xuXG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcblxuICAgICAgICAgICAgICAgIGlmICghZ2VvbWV0cnkubWVzaCB8fCAhZ2VvbWV0cnkubWVzaC5wcmltaXRpdmVzKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmIChvYmoubmFtZS5sZW5ndGggPT09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICBvYmoubmFtZSA9IGdlb21ldHJ5LmlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgdXNlZCBmeCBmb3IgdGhpcyBnZW9tZXRyeS1pbnN0YW5jZVxuXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlX21hdGVyaWFscykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBpbnN0YW5jZV9tYXRlcmlhbHMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlX21hdGVyaWFsID0gaW5zdGFuY2VfbWF0ZXJpYWxzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdCA9IG1hdGVyaWFsc1tpbnN0YW5jZV9tYXRlcmlhbC50YXJnZXRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVmZmVjdF9pZCA9IG1hdC5pbnN0YW5jZV9lZmZlY3QudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYWRlciA9IGVmZmVjdHNbZWZmZWN0X2lkXS5zaGFkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwzanMgPSBzaGFkZXIubWF0ZXJpYWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW9tZXRyeS5kb3VibGVTaWRlZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5zdGFuY2VfbWF0ZXJpYWwuc3ltYm9sIGluIGRvdWJsZV9zaWRlZF9tYXRlcmlhbHMpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jb3BpZWRfbWF0ZXJpYWwgPSBtYXRlcmlhbDNqcy5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29waWVkX21hdGVyaWFsLnNpZGUgPSBUSFJFRS5Eb3VibGVTaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVfc2lkZWRfbWF0ZXJpYWxzW2luc3RhbmNlX21hdGVyaWFsLnN5bWJvbF0gPSBfY29waWVkX21hdGVyaWFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsM2pzID0gZG91YmxlX3NpZGVkX21hdGVyaWFsc1tpbnN0YW5jZV9tYXRlcmlhbC5zeW1ib2xdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDNqcy5vcGFjaXR5ID0gIW1hdGVyaWFsM2pzLm9wYWNpdHkgPyAxIDogbWF0ZXJpYWwzanMub3BhY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRfbWF0ZXJpYWxzW2luc3RhbmNlX21hdGVyaWFsLnN5bWJvbF0gPSBudW1fbWF0ZXJpYWxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZF9tYXRlcmlhbHNfYXJyYXkucHVzaChtYXRlcmlhbDNqcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9tYXRlcmlhbCA9IG1hdGVyaWFsM2pzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0ZXJpYWwubmFtZSA9IG1hdC5uYW1lID09PSBudWxsIHx8IG1hdC5uYW1lID09PSAnJyA/IG1hdC5pZCA6IG1hdC5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtX21hdGVyaWFscysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1lc2g7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gZmlyc3RfbWF0ZXJpYWwgfHwgbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoeyBjb2xvcjogMHhkZGRkZGQsIHNpZGU6IGdlb21ldHJ5LmRvdWJsZVNpZGVkID8gVEhSRUUuRG91YmxlU2lkZSA6IFRIUkVFLkZyb250U2lkZSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbSA9IGdlb21ldHJ5Lm1lc2guZ2VvbWV0cnkzanM7XG5cbiAgICAgICAgICAgICAgICBpZiAobnVtX21hdGVyaWFscyA+IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NdWx0aU1hdGVyaWFsKHVzZWRfbWF0ZXJpYWxzX2FycmF5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2tpbkNvbnRyb2xsZXIgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5U2tpbihnZW9tLCBza2luQ29udHJvbGxlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlb20ubW9ycGhUYXJnZXRzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubW9ycGhUYXJnZXRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNraW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2tpbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5Ta2lubmVkTWVzaChnZW9tLCBtYXRlcmlhbCwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vbWVzaC5za2VsZXRvbiA9IHNraW5Db250cm9sbGVyLnNrZWxldG9uO1xuICAgICAgICAgICAgICAgICAgICAvL21lc2guc2tpbkNvbnRyb2xsZXIgPSBjb250cm9sbGVyc1sgc2tpbkNvbnRyb2xsZXIudXJsIF07XG4gICAgICAgICAgICAgICAgICAgIC8vbWVzaC5za2luSW5zdGFuY2VDb250cm9sbGVyID0gc2tpbkNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgIG1lc2gubmFtZSA9ICdza2luXycgKyBza2lucy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9tZXNoLmFuaW1hdGlvbkhhbmRsZS5zZXRLZXkoMCk7XG4gICAgICAgICAgICAgICAgICAgIHNraW5zLnB1c2gobWVzaCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb3JwaENvbnRyb2xsZXIgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU1vcnBoKGdlb20sIG1vcnBoQ29udHJvbGxlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubW9ycGhUYXJnZXRzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgbWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgICAgICBtZXNoLm5hbWUgPSAnbW9ycGhfJyArIG1vcnBocy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgbW9ycGhzLnB1c2gobWVzaCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbS5pc0xpbmVTdHJpcCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLkxpbmUoZ2VvbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tLCBtYXRlcmlhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvYmouYWRkKG1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGUuY2FtZXJhcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VfY2FtZXJhID0gbm9kZS5jYW1lcmFzW2ldO1xuICAgICAgICAgICAgdmFyIGNwYXJhbXMgPSBjYW1lcmFzW2luc3RhbmNlX2NhbWVyYS51cmxdO1xuXG4gICAgICAgICAgICB2YXIgY2FtID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGNwYXJhbXMueWZvdiwgcGFyc2VGbG9hdChjcGFyYW1zLmFzcGVjdF9yYXRpbyksIHBhcnNlRmxvYXQoY3BhcmFtcy56bmVhciksIHBhcnNlRmxvYXQoY3BhcmFtcy56ZmFyKSk7XG5cbiAgICAgICAgICAgIG9iai5hZGQoY2FtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgbGlnaHQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlX2xpZ2h0ID0gbm9kZS5saWdodHNbaV07XG4gICAgICAgICAgICB2YXIgbHBhcmFtcyA9IGxpZ2h0c1tpbnN0YW5jZV9saWdodC51cmxdO1xuXG4gICAgICAgICAgICBpZiAobHBhcmFtcyAmJiBscGFyYW1zLnRlY2huaXF1ZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gbHBhcmFtcy5jb2xvci5nZXRIZXgoKTtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZW5zaXR5ID0gbHBhcmFtcy5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gbHBhcmFtcy5kaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBscGFyYW1zLmZhbGxvZmZfYW5nbGU7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxwYXJhbXMudGVjaG5pcXVlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlyZWN0aW9uYWwnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0LnBvc2l0aW9uLnNldCgwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvaW50JzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodChjb2xvciwgaW50ZW5zaXR5LCBkaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzcG90JzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBhbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5wb3NpdGlvbi5zZXQoMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbWJpZW50JzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGlnaHQpIHtcbiAgICAgICAgICAgICAgICBvYmouYWRkKGxpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9iai5uYW1lID0gbm9kZS5uYW1lIHx8IG5vZGUuaWQgfHwgXCJcIjtcbiAgICAgICAgb2JqLmNvbGxhZGFJZCA9IG5vZGUuaWQgfHwgXCJcIjtcbiAgICAgICAgb2JqLmxheWVyID0gbm9kZS5sYXllciB8fCBcIlwiO1xuICAgICAgICBvYmoubWF0cml4ID0gbm9kZS5tYXRyaXg7XG4gICAgICAgIG9iai5tYXRyaXguZGVjb21wb3NlKG9iai5wb3NpdGlvbiwgb2JqLnF1YXRlcm5pb24sIG9iai5zY2FsZSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyR2VvbWV0cnkgJiYgb2JqLmdlb21ldHJ5KSB7XG5cbiAgICAgICAgICAgIHZhciBkZWx0YSA9IG9iai5nZW9tZXRyeS5jZW50ZXIoKTtcbiAgICAgICAgICAgIGRlbHRhLm11bHRpcGx5KG9iai5zY2FsZSk7XG4gICAgICAgICAgICBkZWx0YS5hcHBseVF1YXRlcm5pb24ob2JqLnF1YXRlcm5pb24pO1xuXG4gICAgICAgICAgICBvYmoucG9zaXRpb24uc3ViKGRlbHRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIG9iai5hZGQoY3JlYXRlU2NlbmVHcmFwaChub2RlLm5vZGVzW2ldLCBub2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEpvaW50SWQoc2tpbiwgaWQpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNraW4uam9pbnRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGlmIChza2luLmpvaW50c1tpXSA9PT0gaWQpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TGlicmFyeU5vZGUoaWQpIHtcblxuICAgICAgICB2YXIgbm9kZXMgPSBDT0xMQURBLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpYnJhcnlfbm9kZXMgbm9kZScpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGF0dE9iaiA9IG5vZGVzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCdpZCcpO1xuXG4gICAgICAgICAgICBpZiAoYXR0T2JqICYmIGF0dE9iai52YWx1ZSA9PT0gaWQpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBub2Rlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q2hhbm5lbHNGb3JOb2RlKG5vZGUpIHtcblxuICAgICAgICB2YXIgY2hhbm5lbHMgPSBbXTtcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IDEwMDAwMDA7XG4gICAgICAgIHZhciBlbmRUaW1lID0gLTEwMDAwMDA7XG5cbiAgICAgICAgZm9yICh2YXIgaWQgaW4gYW5pbWF0aW9ucykge1xuXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gYW5pbWF0aW9uc1tpZF07XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uLmNoYW5uZWwubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gYW5pbWF0aW9uLmNoYW5uZWxbaV07XG4gICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBhbmltYXRpb24uc2FtcGxlcltpXTtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBjaGFubmVsLnRhcmdldC5zcGxpdCgnLycpWzBdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlkID09IG5vZGUuaWQpIHtcblxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjaGFubmVsLnNhbXBsZXIgPSBzYW1wbGVyO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBNYXRoLm1pbihzdGFydFRpbWUsIHNhbXBsZXIuc3RhcnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZW5kVGltZSA9IE1hdGgubWF4KGVuZFRpbWUsIHNhbXBsZXIuZW5kVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxzLnB1c2goY2hhbm5lbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5uZWxzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBub2RlLnN0YXJ0VGltZSA9IHN0YXJ0VGltZTtcbiAgICAgICAgICAgIG5vZGUuZW5kVGltZSA9IGVuZFRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hhbm5lbHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY0ZyYW1lRHVyYXRpb24obm9kZSkge1xuXG4gICAgICAgIHZhciBtaW5UID0gMTAwMDAwMDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoYW5uZWxzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBzYW1wbGVyID0gbm9kZS5jaGFubmVsc1tpXS5zYW1wbGVyO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNhbXBsZXIuaW5wdXQubGVuZ3RoIC0gMTsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdDAgPSBzYW1wbGVyLmlucHV0W2pdO1xuICAgICAgICAgICAgICAgIHZhciB0MSA9IHNhbXBsZXIuaW5wdXRbaiArIDFdO1xuICAgICAgICAgICAgICAgIG1pblQgPSBNYXRoLm1pbihtaW5ULCB0MSAtIHQwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtaW5UO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGNNYXRyaXhBdChub2RlLCB0KSB7XG5cbiAgICAgICAgdmFyIGFuaW1hdGVkID0ge307XG5cbiAgICAgICAgdmFyIGksIGo7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGUuY2hhbm5lbHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBub2RlLmNoYW5uZWxzW2ldO1xuICAgICAgICAgICAgYW5pbWF0ZWRbY2hhbm5lbC5zaWRdID0gY2hhbm5lbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG5vZGUudHJhbnNmb3Jtc1tpXTtcbiAgICAgICAgICAgIHZhciBjaGFubmVsID0gYW5pbWF0ZWRbdHJhbnNmb3JtLnNpZF07XG5cbiAgICAgICAgICAgIGlmIChjaGFubmVsICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzYW1wbGVyID0gY2hhbm5lbC5zYW1wbGVyO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBzYW1wbGVyLmlucHV0Lmxlbmd0aCAtIDE7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzYW1wbGVyLmlucHV0W2ogKyAxXSA+IHQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzYW1wbGVyLm91dHB1dFtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codmFsdWUuZmxhdHRlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUSFJFRS5NYXRyaXg0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogaGFuZGxlIG90aGVyIHR5cGVzXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgdHJhbnNmb3JtLm1hdHJpeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgdHJhbnNmb3JtLm1hdHJpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgdHJhbnNmb3JtLm1hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0cml4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJha2VBbmltYXRpb25zKG5vZGUpIHtcblxuICAgICAgICBpZiAobm9kZS5jaGFubmVscyAmJiBub2RlLmNoYW5uZWxzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICB2YXIga2V5cyA9IFtdLFxuICAgICAgICAgICAgICAgIHNpZHMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gbm9kZS5jaGFubmVscy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5vZGUuY2hhbm5lbHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxTaWQgPSBjaGFubmVsLmZ1bGxTaWQsXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZXIgPSBjaGFubmVsLnNhbXBsZXIsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gc2FtcGxlci5pbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtID0gbm9kZS5nZXRUcmFuc2Zvcm1CeVNpZChjaGFubmVsLnNpZCksXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjtcblxuICAgICAgICAgICAgICAgIGlmIChjaGFubmVsLmFyckluZGljZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBtZW1iZXIgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBjaGFubmVsLmFyckluZGljZXMubGVuZ3RoOyBqIDwgamw7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJbal0gPSBnZXRDb252ZXJ0ZWRJbmRleChjaGFubmVsLmFyckluZGljZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBtZW1iZXIgPSBnZXRDb252ZXJ0ZWRNZW1iZXIoY2hhbm5lbC5tZW1iZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkcy5pbmRleE9mKGZ1bGxTaWQpID09PSAtMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWRzLnB1c2goZnVsbFNpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBpbnB1dC5sZW5ndGg7IGogPCBqbDsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1lID0gaW5wdXRbal0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHNhbXBsZXIuZ2V0RGF0YSh0cmFuc2Zvcm0udHlwZSwgaiwgbWVtYmVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBmaW5kS2V5KGtleXMsIHRpbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWtleSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gbmV3IEtleSh0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZU5keCA9IGZpbmRUaW1lTmR4KGtleXMsIHRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXMuc3BsaWNlKHRpbWVOZHggPT09IC0xID8ga2V5cy5sZW5ndGggOiB0aW1lTmR4LCAwLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkuYWRkVGFyZ2V0KGZ1bGxTaWQsIHRyYW5zZm9ybSwgbWVtYmVyLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvdWxkIG5vdCBmaW5kIHRyYW5zZm9ybSBcIicgKyBjaGFubmVsLnNpZCArICdcIiBpbiBub2RlICcgKyBub2RlLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBvc3QgcHJvY2Vzc1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaWRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2lkID0gc2lkc1tpXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgha2V5Lmhhc1RhcmdldChzaWQpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlS2V5cyhrZXlzLCBrZXksIGosIHNpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUua2V5cyA9IGtleXM7XG4gICAgICAgICAgICBub2RlLnNpZHMgPSBzaWRzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZEtleShrZXlzLCB0aW1lKSB7XG5cbiAgICAgICAgdmFyIHJldFZhbCA9IG51bGw7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0ga2V5cy5sZW5ndGg7IGkgPCBpbCAmJiByZXRWYWwgPT09IG51bGw7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgICAgICAgICAgaWYgKGtleS50aW1lID09PSB0aW1lKSB7XG5cbiAgICAgICAgICAgICAgICByZXRWYWwgPSBrZXk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGtleS50aW1lID4gdGltZSkge1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRUaW1lTmR4KGtleXMsIHRpbWUpIHtcblxuICAgICAgICB2YXIgbmR4ID0gLTE7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0ga2V5cy5sZW5ndGg7IGkgPCBpbCAmJiBuZHggPT09IC0xOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgICAgICAgIGlmIChrZXkudGltZSA+PSB0aW1lKSB7XG5cbiAgICAgICAgICAgICAgICBuZHggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5keDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZUtleXMoa2V5cywga2V5LCBuZHgsIGZ1bGxTaWQpIHtcblxuICAgICAgICB2YXIgcHJldktleSA9IGdldFByZXZLZXlXaXRoKGtleXMsIGZ1bGxTaWQsIG5keCA/IG5keCAtIDEgOiAwKSxcbiAgICAgICAgICAgIG5leHRLZXkgPSBnZXROZXh0S2V5V2l0aChrZXlzLCBmdWxsU2lkLCBuZHggKyAxKTtcblxuICAgICAgICBpZiAocHJldktleSAmJiBuZXh0S2V5KSB7XG5cbiAgICAgICAgICAgIHZhciBzY2FsZSA9IChrZXkudGltZSAtIHByZXZLZXkudGltZSkgLyAobmV4dEtleS50aW1lIC0gcHJldktleS50aW1lKSxcbiAgICAgICAgICAgICAgICBwcmV2VGFyZ2V0ID0gcHJldktleS5nZXRUYXJnZXQoZnVsbFNpZCksXG4gICAgICAgICAgICAgICAgbmV4dERhdGEgPSBuZXh0S2V5LmdldFRhcmdldChmdWxsU2lkKS5kYXRhLFxuICAgICAgICAgICAgICAgIHByZXZEYXRhID0gcHJldlRhcmdldC5kYXRhLFxuICAgICAgICAgICAgICAgIGRhdGE7XG5cbiAgICAgICAgICAgIGlmIChwcmV2VGFyZ2V0LnR5cGUgPT09ICdtYXRyaXgnKSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gcHJldkRhdGE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByZXZEYXRhLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgZGF0YSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2RGF0YS5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBwcmV2RGF0YVtpXSArIChuZXh0RGF0YVtpXSAtIHByZXZEYXRhW2ldKSAqIHNjYWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gcHJldkRhdGEgKyAobmV4dERhdGEgLSBwcmV2RGF0YSkgKiBzY2FsZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAga2V5LmFkZFRhcmdldChmdWxsU2lkLCBwcmV2VGFyZ2V0LnRyYW5zZm9ybSwgcHJldlRhcmdldC5tZW1iZXIsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IG5leHQga2V5IHdpdGggZ2l2ZW4gc2lkXG5cbiAgICBmdW5jdGlvbiBnZXROZXh0S2V5V2l0aChrZXlzLCBmdWxsU2lkLCBuZHgpIHtcblxuICAgICAgICBmb3IgKDsgbmR4IDwga2V5cy5sZW5ndGg7IG5keCsrKSB7XG5cbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW25keF07XG5cbiAgICAgICAgICAgIGlmIChrZXkuaGFzVGFyZ2V0KGZ1bGxTaWQpKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gR2V0IHByZXZpb3VzIGtleSB3aXRoIGdpdmVuIHNpZFxuXG4gICAgZnVuY3Rpb24gZ2V0UHJldktleVdpdGgoa2V5cywgZnVsbFNpZCwgbmR4KSB7XG5cbiAgICAgICAgbmR4ID0gbmR4ID49IDAgPyBuZHggOiBuZHggKyBrZXlzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKDsgbmR4ID49IDA7IG5keC0tKSB7XG5cbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW25keF07XG5cbiAgICAgICAgICAgIGlmIChrZXkuaGFzVGFyZ2V0KGZ1bGxTaWQpKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX0ltYWdlKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLmluaXRfZnJvbSA9IFwiXCI7XG4gICAgfVxuXG4gICAgX0ltYWdlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVOYW1lID09PSAnaW5pdF9mcm9tJykge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0X2Zyb20gPSBjaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlwiO1xuICAgICAgICB0aGlzLnNraW4gPSBudWxsO1xuICAgICAgICB0aGlzLm1vcnBoID0gbnVsbDtcbiAgICB9XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLnR5cGUgPSBcIm5vbmVcIjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3NraW4nOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2tpbiA9IG5ldyBTa2luKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdtb3JwaCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3JwaCA9IG5ldyBNb3JwaCgpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBNb3JwaCgpIHtcblxuICAgICAgICB0aGlzLm1ldGhvZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRzID0gbnVsbDtcbiAgICAgICAgdGhpcy53ZWlnaHRzID0gbnVsbDtcbiAgICB9XG5cbiAgICBNb3JwaC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciBzb3VyY2VzID0ge307XG4gICAgICAgIHZhciBpbnB1dHMgPSBbXTtcbiAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgdGhpcy5tZXRob2QgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbWV0aG9kJyk7XG4gICAgICAgIHRoaXMuc291cmNlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NvdXJjZScpLnJlcGxhY2UoL14jLywgJycpO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBuZXcgU291cmNlKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzW3NvdXJjZS5pZF0gPSBzb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGFyZ2V0cyc6XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzID0gdGhpcy5wYXJzZUlucHV0cyhjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGlsZC5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2lucHV0LnNvdXJjZV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQuc2VtYW50aWMpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ01PUlBIX1RBUkdFVCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRzID0gc291cmNlLnJlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdNT1JQSF9XRUlHSFQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2VpZ2h0cyA9IHNvdXJjZS5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb3JwaC5wcm90b3R5cGUucGFyc2VJbnB1dHMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciBpbnB1dHMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0JzpcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChuZXcgSW5wdXQoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlucHV0cztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2tpbigpIHtcblxuICAgICAgICB0aGlzLnNvdXJjZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuYmluZFNoYXBlTWF0cml4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnZCaW5kTWF0cmljZXMgPSBbXTtcbiAgICAgICAgdGhpcy5qb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy53ZWlnaHRzID0gW107XG4gICAgfVxuXG4gICAgU2tpbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciBzb3VyY2VzID0ge307XG4gICAgICAgIHZhciBqb2ludHMsIHdlaWdodHM7XG5cbiAgICAgICAgdGhpcy5zb3VyY2UgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc291cmNlJykucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgIHRoaXMuaW52QmluZE1hdHJpY2VzID0gW107XG4gICAgICAgIHRoaXMuam9pbnRzID0gW107XG4gICAgICAgIHRoaXMud2VpZ2h0cyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYmluZF9zaGFwZV9tYXRyaXgnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gX2Zsb2F0cyhjaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZFNoYXBlTWF0cml4ID0gZ2V0Q29udmVydGVkTWF0NChmKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBuZXcgU291cmNlKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzW3NyYy5pZF0gPSBzcmM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnam9pbnRzJzpcblxuICAgICAgICAgICAgICAgICAgICBqb2ludHMgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0ZXhfd2VpZ2h0cyc6XG5cbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cyA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXJzZUpvaW50cyhqb2ludHMsIHNvdXJjZXMpO1xuICAgICAgICB0aGlzLnBhcnNlV2VpZ2h0cyh3ZWlnaHRzLCBzb3VyY2VzKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU2tpbi5wcm90b3R5cGUucGFyc2VKb2ludHMgPSBmdW5jdGlvbiAoZWxlbWVudCwgc291cmNlcykge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5wdXQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IG5ldyBJbnB1dCgpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5wdXQuc291cmNlXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc2VtYW50aWMgPT09ICdKT0lOVCcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qb2ludHMgPSBzb3VyY2UucmVhZCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnNlbWFudGljID09PSAnSU5WX0JJTkRfTUFUUklYJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludkJpbmRNYXRyaWNlcyA9IHNvdXJjZS5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIFNraW4ucHJvdG90eXBlLnBhcnNlV2VpZ2h0cyA9IGZ1bmN0aW9uIChlbGVtZW50LCBzb3VyY2VzKSB7XG5cbiAgICAgICAgdmFyIHYsXG4gICAgICAgICAgICB2Y291bnQsXG4gICAgICAgICAgICBpbnB1dHMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0JzpcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChuZXcgSW5wdXQoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3YnOlxuXG4gICAgICAgICAgICAgICAgICAgIHYgPSBfaW50cyhjaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndmNvdW50JzpcblxuICAgICAgICAgICAgICAgICAgICB2Y291bnQgPSBfaW50cyhjaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2Y291bnQubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIG51bUJvbmVzID0gdmNvdW50W2ldO1xuICAgICAgICAgICAgdmFyIHZlcnRleF93ZWlnaHRzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtQm9uZXM7IGorKykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGluZmx1ZW5jZSA9IHt9O1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBpbnB1dHMubGVuZ3RoOyBrKyspIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNba107XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZbaW5kZXggKyBpbnB1dC5vZmZzZXRdO1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQuc2VtYW50aWMpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSk9JTlQnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbHVlbmNlLmpvaW50ID0gdmFsdWU7IC8vdGhpcy5qb2ludHNbdmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdXRUlHSFQnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbHVlbmNlLndlaWdodCA9IHNvdXJjZXNbaW5wdXQuc291cmNlXS5kYXRhW3ZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmVydGV4X3dlaWdodHMucHVzaChpbmZsdWVuY2UpO1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IGlucHV0cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmVydGV4X3dlaWdodHMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgIHZlcnRleF93ZWlnaHRzW2pdLmluZGV4ID0gaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy53ZWlnaHRzLnB1c2godmVydGV4X3dlaWdodHMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFZpc3VhbFNjZW5lKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICB9XG5cbiAgICBWaXN1YWxTY2VuZS5wcm90b3R5cGUuZ2V0Q2hpbGRCeUlkID0gZnVuY3Rpb24gKGlkLCByZWN1cnNpdmUpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVzW2ldLmdldENoaWxkQnlJZChpZCwgcmVjdXJzaXZlKTtcblxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIFZpc3VhbFNjZW5lLnByb3RvdHlwZS5nZXRDaGlsZEJ5U2lkID0gZnVuY3Rpb24gKHNpZCwgcmVjdXJzaXZlKSB7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5ub2Rlc1tpXS5nZXRDaGlsZEJ5U2lkKHNpZCwgcmVjdXJzaXZlKTtcblxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIFZpc3VhbFNjZW5lLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdub2RlJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IE5vZGUoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gTm9kZSgpIHtcblxuICAgICAgICB0aGlzLmlkID0gXCJcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJcIjtcbiAgICAgICAgdGhpcy5zaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1zID0gW107XG4gICAgICAgIHRoaXMuZ2VvbWV0cmllcyA9IFtdO1xuICAgICAgICB0aGlzLmNoYW5uZWxzID0gW107XG4gICAgICAgIHRoaXMubWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICB9XG5cbiAgICBOb2RlLnByb3RvdHlwZS5nZXRDaGFubmVsRm9yVHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybVNpZCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGFubmVscy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV07XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBjaGFubmVsLnRhcmdldC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgdmFyIGlkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgICAgIHZhciBzaWQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICAgICAgdmFyIGRvdFN5bnRheCA9IHNpZC5pbmRleE9mKFwiLlwiKSA+PSAwO1xuICAgICAgICAgICAgdmFyIGFyclN5bnRheCA9IHNpZC5pbmRleE9mKFwiKFwiKSA+PSAwO1xuICAgICAgICAgICAgdmFyIGFyckluZGljZXM7XG4gICAgICAgICAgICB2YXIgbWVtYmVyO1xuXG4gICAgICAgICAgICBpZiAoZG90U3ludGF4KSB7XG5cbiAgICAgICAgICAgICAgICBwYXJ0cyA9IHNpZC5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgc2lkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBtZW1iZXIgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhcnJTeW50YXgpIHtcblxuICAgICAgICAgICAgICAgIGFyckluZGljZXMgPSBzaWQuc3BsaXQoXCIoXCIpO1xuICAgICAgICAgICAgICAgIHNpZCA9IGFyckluZGljZXMuc2hpZnQoKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJySW5kaWNlcy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGFyckluZGljZXNbal0gPSBwYXJzZUludChhcnJJbmRpY2VzW2pdLnJlcGxhY2UoL1xcKS8sICcnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2lkID09PSB0cmFuc2Zvcm1TaWQpIHtcblxuICAgICAgICAgICAgICAgIGNoYW5uZWwuaW5mbyA9IHsgc2lkOiBzaWQsIGRvdFN5bnRheDogZG90U3ludGF4LCBhcnJTeW50YXg6IGFyclN5bnRheCwgYXJySW5kaWNlczogYXJySW5kaWNlcyB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFubmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIE5vZGUucHJvdG90eXBlLmdldENoaWxkQnlJZCA9IGZ1bmN0aW9uIChpZCwgcmVjdXJzaXZlKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuaWQgPT09IGlkKSB7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5ub2Rlc1tpXS5nZXRDaGlsZEJ5SWQoaWQsIHJlY3Vyc2l2ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBOb2RlLnByb3RvdHlwZS5nZXRDaGlsZEJ5U2lkID0gZnVuY3Rpb24gKHNpZCwgcmVjdXJzaXZlKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuc2lkID09PSBzaWQpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVjdXJzaXZlKSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLm5vZGVzW2ldLmdldENoaWxkQnlTaWQoc2lkLCByZWN1cnNpdmUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG4pIHtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgTm9kZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtQnlTaWQgPSBmdW5jdGlvbiAoc2lkKSB7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNmb3Jtc1tpXS5zaWQgPT09IHNpZCkgcmV0dXJuIHRoaXMudHJhbnNmb3Jtc1tpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBOb2RlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdmFyIHVybDtcblxuICAgICAgICB0aGlzLmlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHRoaXMuc2lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLnR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgICAgICB0aGlzLmxheWVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xheWVyJyk7XG5cbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy50eXBlID09PSAnSk9JTlQnID8gdGhpcy50eXBlIDogJ05PREUnO1xuXG4gICAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1zID0gW107XG4gICAgICAgIHRoaXMuZ2VvbWV0cmllcyA9IFtdO1xuICAgICAgICB0aGlzLmNhbWVyYXMgPSBbXTtcbiAgICAgICAgdGhpcy5saWdodHMgPSBbXTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVycyA9IFtdO1xuICAgICAgICB0aGlzLm1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdub2RlJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IE5vZGUoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2NhbWVyYSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFzLnB1c2gobmV3IEluc3RhbmNlQ2FtZXJhKCkucGFyc2UoY2hpbGQpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9jb250cm9sbGVyJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2gobmV3IEluc3RhbmNlQ29udHJvbGxlcigpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFuY2VfZ2VvbWV0cnknOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvbWV0cmllcy5wdXNoKG5ldyBJbnN0YW5jZUdlb21ldHJ5KCkucGFyc2UoY2hpbGQpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9saWdodCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodHMucHVzaChuZXcgSW5zdGFuY2VMaWdodCgpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFuY2Vfbm9kZSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdXJsID0gY2hpbGQuZ2V0QXR0cmlidXRlKCd1cmwnKS5yZXBsYWNlKC9eIy8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlOb2RlID0gZ2V0TGlicmFyeU5vZGUodXJsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaU5vZGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5ldyBOb2RlKCkucGFyc2UoaU5vZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NjYWxlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2xvb2thdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2tldyc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1zLnB1c2gobmV3IFRyYW5zZm9ybSgpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGFubmVscyA9IGdldENoYW5uZWxzRm9yTm9kZSh0aGlzKTtcbiAgICAgICAgYmFrZUFuaW1hdGlvbnModGhpcyk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXgoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTm9kZS5wcm90b3R5cGUudXBkYXRlTWF0cml4ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHRoaXMubWF0cml4LmlkZW50aXR5KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1zW2ldLmFwcGx5KHRoaXMubWF0cml4KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBUcmFuc2Zvcm0oKSB7XG5cbiAgICAgICAgdGhpcy5zaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5vYmogPSBudWxsO1xuICAgIH1cblxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMuc2lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NpZCcpO1xuICAgICAgICB0aGlzLnR5cGUgPSBlbGVtZW50Lm5vZGVOYW1lO1xuICAgICAgICB0aGlzLmRhdGEgPSBfZmxvYXRzKGVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICB0aGlzLmNvbnZlcnQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG5cbiAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG5cbiAgICAgICAgICAgICAgICB0aGlzLm9iaiA9IGdldENvbnZlcnRlZE1hdDQodGhpcy5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcblxuICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHRoaXMuZGF0YVszXSk7XG5cbiAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG5cbiAgICAgICAgICAgICAgICBmaXhDb29yZHModGhpcy5kYXRhLCAtMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgVEhSRUUuVmVjdG9yMyh0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSwgdGhpcy5kYXRhWzJdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuXG4gICAgICAgICAgICAgICAgZml4Q29vcmRzKHRoaXMuZGF0YSwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgVEhSRUUuVmVjdG9yMyh0aGlzLmRhdGFbMF0sIHRoaXMuZGF0YVsxXSwgdGhpcy5kYXRhWzJdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ2FuIG5vdCBjb252ZXJ0IFRyYW5zZm9ybSBvZiB0eXBlICcgKyB0aGlzLnR5cGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgbTEgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobWF0cml4KSB7XG5cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSh0aGlzLm9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseShtMS5tYWtlVHJhbnNsYXRpb24odGhpcy5vYmoueCwgdGhpcy5vYmoueSwgdGhpcy5vYmoueikpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcblxuICAgICAgICAgICAgICAgICAgICBtYXRyaXgubXVsdGlwbHkobTEubWFrZVJvdGF0aW9uQXhpcyh0aGlzLm9iaiwgdGhpcy5hbmdsZSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zY2FsZSh0aGlzLm9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBtZW1iZXIpIHtcblxuICAgICAgICB2YXIgbWVtYmVycyA9IFsnWCcsICdZJywgJ1onLCAnQU5HTEUnXTtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuXG4gICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuXG4gICAgICAgICAgICAgICAgaWYgKCFtZW1iZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5jb3B5KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVtYmVyLmxlbmd0aCA9PT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVtYmVyWzBdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm4xMSA9IGRhdGFbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoubjIxID0gZGF0YVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5uMzEgPSBkYXRhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm40MSA9IGRhdGFbM107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoubjEyID0gZGF0YVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5uMjIgPSBkYXRhWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm4zMiA9IGRhdGFbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoubjQyID0gZGF0YVszXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5uMTMgPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm4yMyA9IGRhdGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoubjMzID0gZGF0YVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5uNDMgPSBkYXRhWzNdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm4xNCA9IGRhdGFbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoubjI0ID0gZGF0YVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5uMzQgPSBkYXRhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLm40NCA9IGRhdGFbM107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZW1iZXIubGVuZ3RoID09PSAyKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BOYW1lID0gJ24nICsgKG1lbWJlclswXSArIDEpICsgKG1lbWJlclsxXSArIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ialtwcm9wTmFtZV0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luY29ycmVjdCBhZGRyZXNzaW5nIG9mIG1hdHJpeCBpbiB0cmFuc2Zvcm0uJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICBjYXNlICdzY2FsZSc6XG5cbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lbWJlcikgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcblxuICAgICAgICAgICAgICAgICAgICBtZW1iZXIgPSBtZW1iZXJzW21lbWJlclswXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZW1iZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdYJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoueCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdZJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoueSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdaJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoueiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai54ID0gZGF0YVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLnkgPSBkYXRhWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoueiA9IGRhdGFbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZW1iZXIpID09PSAnW29iamVjdCBBcnJheV0nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyID0gbWVtYmVyc1ttZW1iZXJbMF1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVtYmVyKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWCc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLnggPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWSc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLnkgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWic6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLnogPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQU5HTEUnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuZ2xlID0gVEhSRUUuTWF0aC5kZWdUb1JhZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLnggPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmoueSA9IGRhdGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai56ID0gZGF0YVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKGRhdGFbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbnN0YW5jZUNvbnRyb2xsZXIoKSB7XG5cbiAgICAgICAgdGhpcy51cmwgPSBcIlwiO1xuICAgICAgICB0aGlzLnNrZWxldG9uID0gW107XG4gICAgICAgIHRoaXMuaW5zdGFuY2VfbWF0ZXJpYWwgPSBbXTtcbiAgICB9XG5cbiAgICBJbnN0YW5jZUNvbnRyb2xsZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLnVybCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd1cmwnKS5yZXBsYWNlKC9eIy8sICcnKTtcbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IFtdO1xuICAgICAgICB0aGlzLmluc3RhbmNlX21hdGVyaWFsID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9PSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnc2tlbGV0b24nOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2tlbGV0b24ucHVzaChjaGlsZC50ZXh0Q29udGVudC5yZXBsYWNlKC9eIy8sICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYmluZF9tYXRlcmlhbCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlcyA9IGNoaWxkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2luc3RhbmNlX21hdGVyaWFsJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbnN0YW5jZXMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gaW5zdGFuY2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZV9tYXRlcmlhbC5wdXNoKG5ldyBJbnN0YW5jZU1hdGVyaWFsKCkucGFyc2UoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5zdGFuY2VNYXRlcmlhbCgpIHtcblxuICAgICAgICB0aGlzLnN5bWJvbCA9IFwiXCI7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gXCJcIjtcbiAgICB9XG5cbiAgICBJbnN0YW5jZU1hdGVyaWFsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5zeW1ib2wgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3ltYm9sJyk7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5zdGFuY2VHZW9tZXRyeSgpIHtcblxuICAgICAgICB0aGlzLnVybCA9IFwiXCI7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VfbWF0ZXJpYWwgPSBbXTtcbiAgICB9XG5cbiAgICBJbnN0YW5jZUdlb21ldHJ5LnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy51cmwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndXJsJykucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VfbWF0ZXJpYWwgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlTmFtZSA9PT0gJ2JpbmRfbWF0ZXJpYWwnKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VzID0gY2hpbGQucXVlcnlTZWxlY3RvckFsbCgnaW5zdGFuY2VfbWF0ZXJpYWwnKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5zdGFuY2VzLmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gaW5zdGFuY2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlX21hdGVyaWFsLnB1c2gobmV3IEluc3RhbmNlTWF0ZXJpYWwoKS5wYXJzZShpbnN0YW5jZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEdlb21ldHJ5KCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm1lc2ggPSBudWxsO1xuICAgIH1cblxuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICAgIGV4dHJhY3REb3VibGVTaWRlZCh0aGlzLCBlbGVtZW50KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ21lc2gnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKHRoaXMpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdleHRyYSc6XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gTWVzaChnZW9tZXRyeSkge1xuXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeS5pZDtcbiAgICAgICAgdGhpcy5wcmltaXRpdmVzID0gW107XG4gICAgICAgIHRoaXMudmVydGljZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmdlb21ldHJ5M2pzID0gbnVsbDtcbiAgICB9XG5cbiAgICBNZXNoLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5wcmltaXRpdmVzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuXG4gICAgICAgICAgICAgICAgICAgIF9zb3VyY2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2VzJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVzdHJpcHMnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpbWl0aXZlcy5wdXNoKG5ldyBMaW5lU3RyaXBzKCkucGFyc2UoY2hpbGQpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0cmlhbmdsZXMnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpbWl0aXZlcy5wdXNoKG5ldyBUcmlhbmdsZXMoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3BvbHlnb25zJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW1pdGl2ZXMucHVzaChuZXcgUG9seWdvbnMoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3BvbHlsaXN0JzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW1pdGl2ZXMucHVzaChuZXcgUG9seWxpc3QoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdlb21ldHJ5M2pzID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmVydGljZXMgPT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gVE9ETyAobXJkb29iKTogU3R1ZHkgY2FzZSB3aGVuIHRoaXMgaXMgbnVsbCAoY2Fycmllci5kYWUpXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZlcnRleERhdGEgPSBzb3VyY2VzW3RoaXMudmVydGljZXMuaW5wdXRbJ1BPU0lUSU9OJ10uc291cmNlXS5kYXRhO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4RGF0YS5sZW5ndGg7IGkgKz0gMykge1xuXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5M2pzLnZlcnRpY2VzLnB1c2goZ2V0Q29udmVydGVkVmVjMyh2ZXJ0ZXhEYXRhLCBpKS5jbG9uZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcmltaXRpdmVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZXNbaV07XG4gICAgICAgICAgICBwcmltaXRpdmUuc2V0VmVydGljZXModGhpcy52ZXJ0aWNlcyk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVByaW1pdGl2ZShwcmltaXRpdmUsIHRoaXMuZ2VvbWV0cnkzanMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnkzanMuY2FsY05vcm1hbHMpIHtcblxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeTNqcy5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2VvbWV0cnkzanMuY2FsY05vcm1hbHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTWVzaC5wcm90b3R5cGUuaGFuZGxlUHJpbWl0aXZlID0gZnVuY3Rpb24gKHByaW1pdGl2ZSwgZ2VvbSkge1xuXG4gICAgICAgIGlmIChwcmltaXRpdmUgaW5zdGFuY2VvZiBMaW5lU3RyaXBzKSB7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IEhhbmRsZSBpbmRpY2VzLiBNYXliZSBlYXNpZXIgd2l0aCBCdWZmZXJHZW9tZXRyeT9cblxuICAgICAgICAgICAgZ2VvbS5pc0xpbmVTdHJpcCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaixcbiAgICAgICAgICAgIGssXG4gICAgICAgICAgICBwTGlzdCA9IHByaW1pdGl2ZS5wLFxuICAgICAgICAgICAgaW5wdXRzID0gcHJpbWl0aXZlLmlucHV0cztcbiAgICAgICAgdmFyIGlucHV0LCBpbmRleCwgaWR4MzI7XG4gICAgICAgIHZhciBzb3VyY2UsIG51bVBhcmFtcztcbiAgICAgICAgdmFyIHZjSW5kZXggPSAwLFxuICAgICAgICAgICAgdmNvdW50ID0gMyxcbiAgICAgICAgICAgIG1heE9mZnNldCA9IDA7XG4gICAgICAgIHZhciB0ZXh0dXJlX3NldHMgPSBbXTtcblxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgaW5wdXRzLmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXRzW2pdO1xuXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gaW5wdXQub2Zmc2V0ICsgMTtcbiAgICAgICAgICAgIG1heE9mZnNldCA9IG1heE9mZnNldCA8IG9mZnNldCA/IG9mZnNldCA6IG1heE9mZnNldDtcblxuICAgICAgICAgICAgc3dpdGNoIChpbnB1dC5zZW1hbnRpYykge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnVEVYQ09PUkQnOlxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlX3NldHMucHVzaChpbnB1dC5zZXQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgcENvdW50ID0gMDsgcENvdW50IDwgcExpc3QubGVuZ3RoOyArK3BDb3VudCkge1xuXG4gICAgICAgICAgICB2YXIgcCA9IHBMaXN0W3BDb3VudF0sXG4gICAgICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChpIDwgcC5sZW5ndGgpIHtcblxuICAgICAgICAgICAgICAgIHZhciB2cyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBucyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciB0cyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGNzID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlLnZjb3VudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZjb3VudCA9IHByaW1pdGl2ZS52Y291bnQubGVuZ3RoID8gcHJpbWl0aXZlLnZjb3VudFt2Y0luZGV4KytdIDogcHJpbWl0aXZlLnZjb3VudDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIHZjb3VudCA9IHAubGVuZ3RoIC8gbWF4T2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB2Y291bnQ7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBpbnB1dHMubGVuZ3RoOyBrKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBpbnB1dHNba107XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2VzW2lucHV0LnNvdXJjZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gcFtpICsgaiAqIG1heE9mZnNldCArIGlucHV0Lm9mZnNldF07XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1QYXJhbXMgPSBzb3VyY2UuYWNjZXNzb3IucGFyYW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkeDMyID0gaW5kZXggKiBudW1QYXJhbXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQuc2VtYW50aWMpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1ZFUlRFWCc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnMucHVzaChpbmRleCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdOT1JNQUwnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5zLnB1c2goZ2V0Q29udmVydGVkVmVjMyhzb3VyY2UuZGF0YSwgaWR4MzIpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cyA9IHRzIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHNbaW5wdXQuc2V0XSA9PT0gdW5kZWZpbmVkKSB0c1tpbnB1dC5zZXRdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludmVydCB0aGUgVlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c1tpbnB1dC5zZXRdLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoc291cmNlLmRhdGFbaWR4MzJdLCBzb3VyY2UuZGF0YVtpZHgzMiArIDFdKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT0xPUic6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3MucHVzaChuZXcgVEhSRUUuQ29sb3IoKS5zZXRSR0Ioc291cmNlLmRhdGFbaWR4MzJdLCBzb3VyY2UuZGF0YVtpZHgzMiArIDFdLCBzb3VyY2UuZGF0YVtpZHgzMiArIDJdKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobnMubGVuZ3RoID09PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHZlcnRpY2VzIGlucHV0c1xuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IHRoaXMudmVydGljZXMuaW5wdXQuTk9STUFMO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2VzW2lucHV0LnNvdXJjZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1QYXJhbXMgPSBzb3VyY2UuYWNjZXNzb3IucGFyYW1zLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmR4ID0gMCwgbGVuID0gdnMubGVuZ3RoOyBuZHggPCBsZW47IG5keCsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBucy5wdXNoKGdldENvbnZlcnRlZFZlYzMoc291cmNlLmRhdGEsIHZzW25keF0gKiBudW1QYXJhbXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbS5jYWxjTm9ybWFscyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHZlcnRpY2VzIGlucHV0c1xuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IHRoaXMudmVydGljZXMuaW5wdXQuVEVYQ09PUkQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmVfc2V0cy5wdXNoKGlucHV0LnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2VzW2lucHV0LnNvdXJjZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1QYXJhbXMgPSBzb3VyY2UuYWNjZXNzb3IucGFyYW1zLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmR4ID0gMCwgbGVuID0gdnMubGVuZ3RoOyBuZHggPCBsZW47IG5keCsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgzMiA9IHZzW25keF0gKiBudW1QYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRzW2lucHV0LnNldF0gPT09IHVuZGVmaW5lZCkgdHNbaW5wdXQuc2V0XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludmVydCB0aGUgVlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzW2lucHV0LnNldF0ucHVzaChuZXcgVEhSRUUuVmVjdG9yMihzb3VyY2UuZGF0YVtpZHgzMl0sIDEuMCAtIHNvdXJjZS5kYXRhW2lkeDMyICsgMV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjcy5sZW5ndGggPT09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgdmVydGljZXMgaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGhpcy52ZXJ0aWNlcy5pbnB1dC5DT0xPUjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc291cmNlc1tpbnB1dC5zb3VyY2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtUGFyYW1zID0gc291cmNlLmFjY2Vzc29yLnBhcmFtcy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5keCA9IDAsIGxlbiA9IHZzLmxlbmd0aDsgbmR4IDwgbGVuOyBuZHgrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4MzIgPSB2c1tuZHhdICogbnVtUGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzLnB1c2gobmV3IFRIUkVFLkNvbG9yKCkuc2V0UkdCKHNvdXJjZS5kYXRhW2lkeDMyXSwgc291cmNlLmRhdGFbaWR4MzIgKyAxXSwgc291cmNlLmRhdGFbaWR4MzIgKyAyXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGZhY2UgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICBmYWNlcyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICB1dixcbiAgICAgICAgICAgICAgICAgICAgdXZBcnI7XG5cbiAgICAgICAgICAgICAgICBpZiAodmNvdW50ID09PSAzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTModnNbMF0sIHZzWzFdLCB2c1syXSwgbnMsIGNzLmxlbmd0aCA/IGNzIDogbmV3IFRIUkVFLkNvbG9yKCkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZjb3VudCA9PT0gNCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHZzWzBdLCB2c1sxXSwgdnNbM10sIG5zLmxlbmd0aCA/IFtuc1swXS5jbG9uZSgpLCBuc1sxXS5jbG9uZSgpLCBuc1szXS5jbG9uZSgpXSA6IFtdLCBjcy5sZW5ndGggPyBbY3NbMF0sIGNzWzFdLCBjc1szXV0gOiBuZXcgVEhSRUUuQ29sb3IoKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHZzWzFdLCB2c1syXSwgdnNbM10sIG5zLmxlbmd0aCA/IFtuc1sxXS5jbG9uZSgpLCBuc1syXS5jbG9uZSgpLCBuc1szXS5jbG9uZSgpXSA6IFtdLCBjcy5sZW5ndGggPyBbY3NbMV0sIGNzWzJdLCBjc1szXV0gOiBuZXcgVEhSRUUuQ29sb3IoKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmNvdW50ID4gNCAmJiBvcHRpb25zLnN1YmRpdmlkZUZhY2VzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsciA9IGNzLmxlbmd0aCA/IGNzIDogbmV3IFRIUkVFLkNvbG9yKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMxLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2MSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHYyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBzdWJkaXZpZGUgaW50byBtdWx0aXBsZSBGYWNlM3NcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAxOyBrIDwgdmNvdW50IC0gMTspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTModnNbMF0sIHZzW2tdLCB2c1trICsgMV0sIG5zLmxlbmd0aCA/IFtuc1swXS5jbG9uZSgpLCBuc1trKytdLmNsb25lKCksIG5zW2tdLmNsb25lKCldIDogW10sIGNscikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZhY2VzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5keCA9IDAsIGxlbiA9IGZhY2VzLmxlbmd0aDsgbmR4IDwgbGVuOyBuZHgrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNlID0gZmFjZXNbbmR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2UuZGFlTWF0ZXJpYWwgPSBwcmltaXRpdmUubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tLmZhY2VzLnB1c2goZmFjZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCB0ZXh0dXJlX3NldHMubGVuZ3RoOyBrKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2ID0gdHNbdGV4dHVyZV9zZXRzW2tdXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Y291bnQgPiA0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgcmlnaHQgVVZzIGZvciB0aGUgdmVydGljZXMgaW4gdGhpcyBmYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2QXJyID0gW3V2WzBdLCB1dltuZHggKyAxXSwgdXZbbmR4ICsgMl1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmNvdW50ID09PSA0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5keCA9PT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dkFyciA9IFt1dlswXSwgdXZbMV0sIHV2WzNdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZBcnIgPSBbdXZbMV0uY2xvbmUoKSwgdXZbMl0sIHV2WzNdLmNsb25lKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dkFyciA9IFt1dlswXSwgdXZbMV0sIHV2WzJdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbS5mYWNlVmVydGV4VXZzW2tdID09PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tLmZhY2VWZXJ0ZXhVdnNba10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tLmZhY2VWZXJ0ZXhVdnNba10ucHVzaCh1dkFycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkcm9wcGVkIGZhY2Ugd2l0aCB2Y291bnQgJyArIHZjb3VudCArICcgZm9yIGdlb21ldHJ5IHdpdGggaWQ6ICcgKyBnZW9tLmlkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpICs9IG1heE9mZnNldCAqIHZjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBQb2x5Z29ucygpIHtcblxuICAgICAgICB0aGlzLm1hdGVyaWFsID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaW5wdXRzID0gW107XG4gICAgICAgIHRoaXMudmNvdW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wID0gW107XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgVEhSRUUuR2VvbWV0cnkoKTtcbiAgICB9XG5cbiAgICBQb2x5Z29ucy5wcm90b3R5cGUuc2V0VmVydGljZXMgPSBmdW5jdGlvbiAodmVydGljZXMpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0c1tpXS5zb3VyY2UgPT09IHZlcnRpY2VzLmlkKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0c1tpXS5zb3VyY2UgPSB2ZXJ0aWNlcy5pbnB1dFsnUE9TSVRJT04nXS5zb3VyY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgUG9seWdvbnMucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLm1hdGVyaWFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJyk7XG4gICAgICAgIHRoaXMuY291bnQgPSBfYXR0cl9hc19pbnQoZWxlbWVudCwgJ2NvdW50JywgMCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbnB1dCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dHMucHVzaChuZXcgSW5wdXQoKS5wYXJzZShlbGVtZW50LmNoaWxkTm9kZXNbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd2Y291bnQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmNvdW50ID0gX2ludHMoY2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3AnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucC5wdXNoKF9pbnRzKGNoaWxkLnRleHRDb250ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncGgnOlxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigncG9seWdvbiBob2xlcyBub3QgeWV0IHN1cHBvcnRlZCEnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFBvbHlsaXN0KCkge1xuXG4gICAgICAgIFBvbHlnb25zLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy52Y291bnQgPSBbXTtcbiAgICB9XG5cbiAgICBQb2x5bGlzdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBvbHlnb25zLnByb3RvdHlwZSk7XG4gICAgUG9seWxpc3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUG9seWxpc3Q7XG5cbiAgICBmdW5jdGlvbiBMaW5lU3RyaXBzKCkge1xuXG4gICAgICAgIFBvbHlnb25zLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy52Y291bnQgPSAxO1xuICAgIH1cblxuICAgIExpbmVTdHJpcHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQb2x5Z29ucy5wcm90b3R5cGUpO1xuICAgIExpbmVTdHJpcHMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGluZVN0cmlwcztcblxuICAgIGZ1bmN0aW9uIFRyaWFuZ2xlcygpIHtcblxuICAgICAgICBQb2x5Z29ucy5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHRoaXMudmNvdW50ID0gMztcbiAgICB9XG5cbiAgICBUcmlhbmdsZXMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQb2x5Z29ucy5wcm90b3R5cGUpO1xuICAgIFRyaWFuZ2xlcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUcmlhbmdsZXM7XG5cbiAgICBmdW5jdGlvbiBBY2Nlc3NvcigpIHtcblxuICAgICAgICB0aGlzLnNvdXJjZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLnN0cmlkZSA9IDA7XG4gICAgICAgIHRoaXMucGFyYW1zID0gW107XG4gICAgfVxuXG4gICAgQWNjZXNzb3IucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLnBhcmFtcyA9IFtdO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzb3VyY2UnKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IF9hdHRyX2FzX2ludChlbGVtZW50LCAnY291bnQnLCAwKTtcbiAgICAgICAgdGhpcy5zdHJpZGUgPSBfYXR0cl9hc19pbnQoZWxlbWVudCwgJ3N0cmlkZScsIDApO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVOYW1lID09PSAncGFyYW0nKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSB7fTtcbiAgICAgICAgICAgICAgICBwYXJhbVsnbmFtZSddID0gY2hpbGQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gICAgICAgICAgICAgICAgcGFyYW1bJ3R5cGUnXSA9IGNoaWxkLmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLnB1c2gocGFyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFZlcnRpY2VzKCkge1xuXG4gICAgICAgIHRoaXMuaW5wdXQgPSB7fTtcbiAgICB9XG5cbiAgICBWZXJ0aWNlcy5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lID09PSAnaW5wdXQnKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBuZXcgSW5wdXQoKS5wYXJzZShlbGVtZW50LmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRbaW5wdXQuc2VtYW50aWNdID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5wdXQoKSB7XG5cbiAgICAgICAgdGhpcy5zZW1hbnRpYyA9IFwiXCI7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBcIlwiO1xuICAgICAgICB0aGlzLnNldCA9IDA7XG4gICAgfVxuXG4gICAgSW5wdXQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLnNlbWFudGljID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NlbWFudGljJyk7XG4gICAgICAgIHRoaXMuc291cmNlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NvdXJjZScpLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICB0aGlzLnNldCA9IF9hdHRyX2FzX2ludChlbGVtZW50LCAnc2V0JywgLTEpO1xuICAgICAgICB0aGlzLm9mZnNldCA9IF9hdHRyX2FzX2ludChlbGVtZW50LCAnb2Zmc2V0JywgMCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2VtYW50aWMgPT09ICdURVhDT09SRCcgJiYgdGhpcy5zZXQgPCAwKSB7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTb3VyY2UoaWQpIHtcblxuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudHlwZSA9IG51bGw7XG4gICAgfVxuXG4gICAgU291cmNlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbF9hcnJheSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gX2Jvb2xzKGNoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZmxvYXRfYXJyYXknOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IF9mbG9hdHMoY2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbnRfYXJyYXknOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IF9pbnRzKGNoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnSURSRUZfYXJyYXknOlxuICAgICAgICAgICAgICAgIGNhc2UgJ05hbWVfYXJyYXknOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IF9zdHJpbmdzKGNoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGlsZC5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZE5vZGVzW2pdLm5vZGVOYW1lID09PSAnYWNjZXNzb3InKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc29yID0gbmV3IEFjY2Vzc29yKCkucGFyc2UoY2hpbGQuY2hpbGROb2Rlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGlsZC5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU291cmNlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcblxuICAgICAgICAvL2ZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hY2Nlc3Nvci5wYXJhbXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICB2YXIgcGFyYW0gPSB0aGlzLmFjY2Vzc29yLnBhcmFtc1swXTtcblxuICAgICAgICAvL2NvbnNvbGUubG9nKHBhcmFtLm5hbWUgKyBcIiBcIiArIHBhcmFtLnR5cGUpO1xuXG4gICAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkge1xuXG4gICAgICAgICAgICBjYXNlICdJRFJFRic6XG4gICAgICAgICAgICBjYXNlICdOYW1lJzpjYXNlICduYW1lJzpcbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGE7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0NHg0JzpcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5kYXRhLmxlbmd0aDsgaiArPSAxNikge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5kYXRhLnNsaWNlKGosIGogKyAxNik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0gZ2V0Q29udmVydGVkTWF0NChzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29sbGFkYUxvYWRlcjogU291cmNlOiBSZWFkIGRvbnQga25vdyBob3cgdG8gcmVhZCAnICsgcGFyYW0udHlwZSArICcuJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIE1hdGVyaWFsKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmluc3RhbmNlX2VmZmVjdCA9IG51bGw7XG4gICAgfVxuXG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLmlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHRoaXMubmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PT0gJ2luc3RhbmNlX2VmZmVjdCcpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VfZWZmZWN0ID0gbmV3IEluc3RhbmNlRWZmZWN0KCkucGFyc2UoZWxlbWVudC5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDb2xvck9yVGV4dHVyZSgpIHtcblxuICAgICAgICB0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG4gICAgICAgIHRoaXMuY29sb3Iuc2V0UkdCKE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICB0aGlzLmNvbG9yLmEgPSAxLjA7XG5cbiAgICAgICAgdGhpcy50ZXh0dXJlID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZXhjb29yZCA9IG51bGw7XG4gICAgICAgIHRoaXMudGV4T3B0cyA9IG51bGw7XG4gICAgfVxuXG4gICAgQ29sb3JPclRleHR1cmUucHJvdG90eXBlLmlzQ29sb3IgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dHVyZSA9PT0gbnVsbDtcbiAgICB9O1xuXG4gICAgQ29sb3JPclRleHR1cmUucHJvdG90eXBlLmlzVGV4dHVyZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlICE9IG51bGw7XG4gICAgfTtcblxuICAgIENvbG9yT3JUZXh0dXJlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQubm9kZU5hbWUgPT09ICd0cmFuc3BhcmVudCcpIHtcblxuICAgICAgICAgICAgdGhpcy5vcGFxdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnb3BhcXVlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbG9yJzpcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmdiYSA9IF9mbG9hdHMoY2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3Iuc2V0UkdCKHJnYmFbMF0sIHJnYmFbMV0sIHJnYmFbMl0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yLmEgPSByZ2JhWzNdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHR1cmUnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IGNoaWxkLmdldEF0dHJpYnV0ZSgndGV4dHVyZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleGNvb3JkID0gY2hpbGQuZ2V0QXR0cmlidXRlKCd0ZXhjb29yZCcpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0cyBmcm9tOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2NvbGxhZGEub3JnL21lZGlhd2lraS9pbmRleC5waHAvTWF5YV90ZXh0dXJlX3BsYWNlbWVudF9NQVlBX2V4dGVuc2lvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleE9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRVOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdFU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBlYXRWOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwVjogMVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlVGV4dHVyZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBDb2xvck9yVGV4dHVyZS5wcm90b3R5cGUucGFyc2VUZXh0dXJlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICBpZiAoIWVsZW1lbnQuY2hpbGROb2RlcykgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgc3VwcG9ydGVkIGJ5IE1heWEsIDNkc01heCwgYW5kIE1vdGlvbkJ1aWxkZXJcblxuICAgICAgICBpZiAoZWxlbWVudC5jaGlsZE5vZGVzWzFdICYmIGVsZW1lbnQuY2hpbGROb2Rlc1sxXS5ub2RlTmFtZSA9PT0gJ2V4dHJhJykge1xuXG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5jaGlsZE5vZGVzWzFdO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZE5vZGVzWzFdICYmIGVsZW1lbnQuY2hpbGROb2Rlc1sxXS5ub2RlTmFtZSA9PT0gJ3RlY2huaXF1ZScpIHtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmNoaWxkTm9kZXNbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFYnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3JlcGVhdFUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3JlcGVhdFYnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4T3B0c1tjaGlsZC5ub2RlTmFtZV0gPSBwYXJzZUZsb2F0KGNoaWxkLnRleHRDb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3dyYXBVJzpcbiAgICAgICAgICAgICAgICBjYXNlICd3cmFwVic6XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc29tZSBkYWUgaGF2ZSBhIHZhbHVlIG9mIHRydWUgd2hpY2ggYmVjb21lcyBOYU4gdmlhIHBhcnNlSW50XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLnRleHRDb250ZW50LnRvVXBwZXJDYXNlKCkgPT09ICdUUlVFJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleE9wdHNbY2hpbGQubm9kZU5hbWVdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXhPcHRzW2NoaWxkLm5vZGVOYW1lXSA9IHBhcnNlSW50KGNoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXhPcHRzW2NoaWxkLm5vZGVOYW1lXSA9IGNoaWxkLnRleHRDb250ZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2hhZGVyKHR5cGUsIGVmZmVjdCkge1xuXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuZWZmZWN0ID0gZWZmZWN0O1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbnVsbDtcbiAgICB9XG5cbiAgICBTaGFkZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2VtaXNzaW9uJzpcbiAgICAgICAgICAgICAgICBjYXNlICdkaWZmdXNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzcGVjdWxhcic6XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhbnNwYXJlbnQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbY2hpbGQubm9kZU5hbWVdID0gbmV3IENvbG9yT3JUZXh0dXJlKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2J1bXAnOlxuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmICdidW1wdHlwZScgaXMgJ2hlaWdodGZpZWxkJywgY3JlYXRlIGEgJ2J1bXAnIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgICAgIC8vIEVsc2UgaWYgJ2J1bXB0eXBlJyBpcyAnbm9ybWFsbWFwJywgY3JlYXRlIGEgJ25vcm1hbCcgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgICAgLy8gKERlZmF1bHQgdG8gJ2J1bXAnKVxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVtcFR5cGUgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoJ2J1bXB0eXBlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidW1wVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bXBUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiaGVpZ2h0ZmllbGRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ2J1bXAnXSA9IG5ldyBDb2xvck9yVGV4dHVyZSgpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnVtcFR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJub3JtYWxtYXBcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ25vcm1hbCddID0gbmV3IENvbG9yT3JUZXh0dXJlKCkucGFyc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiU2hhZGVyLnByb3RvdHlwZS5wYXJzZTogSW52YWxpZCB2YWx1ZSBmb3IgYXR0cmlidXRlICdidW1wdHlwZScgKFwiICsgYnVtcFR5cGUgKyBcIikgLSB2YWxpZCBidW1wdHlwZXMgYXJlICdIRUlHSFRGSUVMRCcgYW5kICdOT1JNQUxNQVAnIC0gZGVmYXVsdGluZyB0byAnSEVJR0hURklFTEQnXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ2J1bXAnXSA9IG5ldyBDb2xvck9yVGV4dHVyZSgpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlNoYWRlci5wcm90b3R5cGUucGFyc2U6IEF0dHJpYnV0ZSAnYnVtcHR5cGUnIG1pc3NpbmcgZnJvbSBidW1wIG5vZGUgLSBkZWZhdWx0aW5nIHRvICdIRUlHSFRGSUVMRCdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWydidW1wJ10gPSBuZXcgQ29sb3JPclRleHR1cmUoKS5wYXJzZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaW5pbmVzcyc6XG4gICAgICAgICAgICAgICAgY2FzZSAncmVmbGVjdGl2aXR5JzpcbiAgICAgICAgICAgICAgICBjYXNlICdpbmRleF9vZl9yZWZyYWN0aW9uJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc3BhcmVuY3knOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gY2hpbGQucXVlcnlTZWxlY3RvckFsbCgnZmxvYXQnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPiAwKSB0aGlzW2NoaWxkLm5vZGVOYW1lXSA9IHBhcnNlRmxvYXQoZlswXS50ZXh0Q29udGVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFNoYWRlci5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBwcm9wcyA9IHt9O1xuXG4gICAgICAgIHZhciB0cmFuc3BhcmVudCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzWyd0cmFuc3BhcmVuY3knXSAhPT0gdW5kZWZpbmVkICYmIHRoaXNbJ3RyYW5zcGFyZW50J10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gY29udmVydCB0cmFuc3BhcmVudCBjb2xvciBSQkcgdG8gYXZlcmFnZSB2YWx1ZVxuICAgICAgICAgICAgdmFyIHRyYW5zcGFyZW50Q29sb3IgPSB0aGlzWyd0cmFuc3BhcmVudCddO1xuICAgICAgICAgICAgdmFyIHRyYW5zcGFyZW5jeUxldmVsID0gKHRoaXMudHJhbnNwYXJlbnQuY29sb3IuciArIHRoaXMudHJhbnNwYXJlbnQuY29sb3IuZyArIHRoaXMudHJhbnNwYXJlbnQuY29sb3IuYikgLyAzICogdGhpcy50cmFuc3BhcmVuY3k7XG5cbiAgICAgICAgICAgIGlmICh0cmFuc3BhcmVuY3lMZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgICB0cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHJvcHNbJ3RyYW5zcGFyZW50J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHByb3BzWydvcGFjaXR5J10gPSAxIC0gdHJhbnNwYXJlbmN5TGV2ZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5cyA9IHtcbiAgICAgICAgICAgICdkaWZmdXNlJzogJ21hcCcsXG4gICAgICAgICAgICAnYW1iaWVudCc6ICdsaWdodE1hcCcsXG4gICAgICAgICAgICAnc3BlY3VsYXInOiAnc3BlY3VsYXJNYXAnLFxuICAgICAgICAgICAgJ2VtaXNzaW9uJzogJ2VtaXNzaW9uTWFwJyxcbiAgICAgICAgICAgICdidW1wJzogJ2J1bXBNYXAnLFxuICAgICAgICAgICAgJ25vcm1hbCc6ICdub3JtYWxNYXAnXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB0aGlzKSB7XG5cbiAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYW1iaWVudCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1pc3Npb24nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RpZmZ1c2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NwZWN1bGFyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdidW1wJzpcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3QgPSB0aGlzW3Byb3BdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3QgaW5zdGFuY2VvZiBDb2xvck9yVGV4dHVyZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY290LmlzVGV4dHVyZSgpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtcGxlcklkID0gY290LnRleHR1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1cmZhY2VJZCA9IHRoaXMuZWZmZWN0LnNhbXBsZXJbc2FtcGxlcklkXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdXJmYWNlSWQgIT09IHVuZGVmaW5lZCAmJiBzdXJmYWNlSWQuc291cmNlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VyZmFjZSA9IHRoaXMuZWZmZWN0LnN1cmZhY2Vbc3VyZmFjZUlkLnNvdXJjZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1cmZhY2UgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBpbWFnZXNbc3VyZmFjZS5pbml0X2Zyb21dO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgaW1hZ2UuaW5pdF9mcm9tO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWRlciA9IFRIUkVFLkxvYWRlci5IYW5kbGVycy5nZXQodXJsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZXIgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbG9hZGVyLmxvYWQodXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRUZXh0dXJlSW1hZ2UodGV4dHVyZSwgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gY290LnRleE9wdHMud3JhcFUgPyBUSFJFRS5SZXBlYXRXcmFwcGluZyA6IFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS53cmFwVCA9IGNvdC50ZXhPcHRzLndyYXBWID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUub2Zmc2V0LnggPSBjb3QudGV4T3B0cy5vZmZzZXRVO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUub2Zmc2V0LnkgPSBjb3QudGV4T3B0cy5vZmZzZXRWO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnggPSBjb3QudGV4T3B0cy5yZXBlYXRVO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnkgPSBjb3QudGV4T3B0cy5yZXBlYXRWO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2tleXNbcHJvcF1dID0gdGV4dHVyZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRleHR1cmUgd2l0aCBiYWtlZCBsaWdodGluZz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2VtaXNzaW9uJykgcHJvcHNbJ2VtaXNzaXZlJ10gPSAweGZmZmZmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gJ2RpZmZ1c2UnIHx8ICF0cmFuc3BhcmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdlbWlzc2lvbicpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1snZW1pc3NpdmUnXSA9IGNvdC5jb2xvci5nZXRIZXgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW3Byb3BdID0gY290LmNvbG9yLmdldEhleCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpbmluZXNzJzpcblxuICAgICAgICAgICAgICAgICAgICBwcm9wc1twcm9wXSA9IHRoaXNbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncmVmbGVjdGl2aXR5JzpcblxuICAgICAgICAgICAgICAgICAgICBwcm9wc1twcm9wXSA9IHRoaXNbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wc1twcm9wXSA+IDAuMCkgcHJvcHNbJ2Vudk1hcCddID0gb3B0aW9ucy5kZWZhdWx0RW52TWFwO1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1snY29tYmluZSddID0gVEhSRUUuTWl4T3BlcmF0aW9uOyAvL21peCByZWd1bGFyIHNoYWRpbmcgd2l0aCByZWZsZWN0aXZlIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2luZGV4X29mX3JlZnJhY3Rpb24nOlxuXG4gICAgICAgICAgICAgICAgICAgIHByb3BzWydyZWZyYWN0aW9uUmF0aW8nXSA9IHRoaXNbcHJvcF07IC8vVE9ETzogXCJpbmRleF9vZl9yZWZyYWN0aW9uXCIgYmVjb21lcyBcInJlZnJhY3Rpb25SYXRpb1wiIGluIHNoYWRlciwgYnV0IEknbSBub3Qgc3VyZSBpZiB0aGUgdHdvIGFyZSBhY3R1YWxseSBjb21wYXJhYmxlXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzW3Byb3BdICE9PSAxLjApIHByb3BzWydlbnZNYXAnXSA9IG9wdGlvbnMuZGVmYXVsdEVudk1hcDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc3BhcmVuY3knOlxuICAgICAgICAgICAgICAgICAgICAvLyBnZXRzIGZpZ3VyZWQgb3V0IHVwIHRvcFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wc1snc2hhZGluZyddID0gcHJlZmVycmVkU2hhZGluZztcbiAgICAgICAgcHJvcHNbJ3NpZGUnXSA9IHRoaXMuZWZmZWN0LmRvdWJsZVNpZGVkID8gVEhSRUUuRG91YmxlU2lkZSA6IFRIUkVFLkZyb250U2lkZTtcblxuICAgICAgICBpZiAocHJvcHMuZGlmZnVzZSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgIHByb3BzLmNvbG9yID0gcHJvcHMuZGlmZnVzZTtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wcy5kaWZmdXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcblxuICAgICAgICAgICAgY2FzZSAnY29uc3RhbnQnOlxuXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLmVtaXNzaXZlICE9IHVuZGVmaW5lZCkgcHJvcHMuY29sb3IgPSBwcm9wcy5lbWlzc2l2ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHByb3BzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICAgICAgY2FzZSAnYmxpbm4nOlxuXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbChwcm9wcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbChwcm9wcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1hdGVyaWFsO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTdXJmYWNlKGVmZmVjdCkge1xuXG4gICAgICAgIHRoaXMuZWZmZWN0ID0gZWZmZWN0O1xuICAgICAgICB0aGlzLmluaXRfZnJvbSA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBTdXJmYWNlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbml0X2Zyb20nOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdF9mcm9tID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0JzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1bmhhbmRsZWQgU3VyZmFjZSBwcm9wOiBcIiArIGNoaWxkLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTYW1wbGVyMkQoZWZmZWN0KSB7XG5cbiAgICAgICAgdGhpcy5lZmZlY3QgPSBlZmZlY3Q7XG4gICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy53cmFwX3MgPSBudWxsO1xuICAgICAgICB0aGlzLndyYXBfdCA9IG51bGw7XG4gICAgICAgIHRoaXMubWluZmlsdGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYWdmaWx0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm1pcGZpbHRlciA9IG51bGw7XG4gICAgfVxuXG4gICAgU2FtcGxlcjJELnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnbWluZmlsdGVyJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbmZpbHRlciA9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ21hZ2ZpbHRlcic6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWdmaWx0ZXIgPSBjaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdtaXBmaWx0ZXInOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWlwZmlsdGVyID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnd3JhcF9zJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyYXBfcyA9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3dyYXBfdCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cmFwX3QgPSBjaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5oYW5kbGVkIFNhbXBsZXIyRCBwcm9wOiBcIiArIGNoaWxkLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBFZmZlY3QoKSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IFwiXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuc2hhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdXJmYWNlID0ge307XG4gICAgICAgIHRoaXMuc2FtcGxlciA9IHt9O1xuICAgIH1cblxuICAgIEVmZmVjdC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmICh0aGlzLnNoYWRlciA9PT0gbnVsbCkge1xuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFZmZlY3QucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLmlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHRoaXMubmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICAgICAgZXh0cmFjdERvdWJsZVNpZGVkKHRoaXMsIGVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuc2hhZGVyID0gbnVsbDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2ZpbGVfQ09NTU9OJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlVGVjaG5pcXVlKHRoaXMucGFyc2VQcm9maWxlQ09NTU9OKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBFZmZlY3QucHJvdG90eXBlLnBhcnNlTmV3cGFyYW0gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciBzaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc2lkJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzdXJmYWNlJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1cmZhY2Vbc2lkXSA9IG5ldyBTdXJmYWNlKHRoaXMpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzYW1wbGVyMkQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlcltzaWRdID0gbmV3IFNhbXBsZXIyRCh0aGlzKS5wYXJzZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGlsZC5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRWZmZWN0LnByb3RvdHlwZS5wYXJzZVByb2ZpbGVDT01NT04gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciB0ZWNobmlxdWU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2ZpbGVfQ09NTU9OJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlUHJvZmlsZUNPTU1PTihjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcblxuICAgICAgICAgICAgICAgICAgICB0ZWNobmlxdWUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICduZXdwYXJhbSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZU5ld3BhcmFtKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdpbWFnZSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIF9pbWFnZSA9IG5ldyBfSW1hZ2UoKS5wYXJzZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlc1tfaW1hZ2UuaWRdID0gX2ltYWdlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJhJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZWNobmlxdWU7XG4gICAgfTtcblxuICAgIEVmZmVjdC5wcm90b3R5cGUucGFyc2VUZWNobmlxdWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnY29uc3RhbnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2JsaW5uJzpcbiAgICAgICAgICAgICAgICBjYXNlICdwaG9uZyc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkZXIgPSBuZXcgU2hhZGVyKGNoaWxkLm5vZGVOYW1lLCB0aGlzKS5wYXJzZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJhJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUV4dHJhKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFZmZlY3QucHJvdG90eXBlLnBhcnNlRXh0cmEgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUV4dHJhVGVjaG5pcXVlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFZmZlY3QucHJvdG90eXBlLnBhcnNlRXh0cmFUZWNobmlxdWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYnVtcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhZGVyLnBhcnNlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEluc3RhbmNlRWZmZWN0KCkge1xuXG4gICAgICAgIHRoaXMudXJsID0gXCJcIjtcbiAgICB9XG5cbiAgICBJbnN0YW5jZUVmZmVjdC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMudXJsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3VybCcpLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHt9O1xuICAgICAgICB0aGlzLnNhbXBsZXIgPSBbXTtcbiAgICAgICAgdGhpcy5jaGFubmVsID0gW107XG4gICAgfVxuXG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHt9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdhbmltYXRpb24nOlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltID0gbmV3IEFuaW1hdGlvbigpLnBhcnNlKGNoaWxkKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzcmMgaW4gYW5pbS5zb3VyY2UpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2Vbc3JjXSA9IGFuaW0uc291cmNlW3NyY107XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFuaW0uY2hhbm5lbC5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWwucHVzaChhbmltLmNoYW5uZWxbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLnB1c2goYW5pbS5zYW1wbGVyW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnc291cmNlJzpcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gbmV3IFNvdXJjZSgpLnBhcnNlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2Vbc3JjLmlkXSA9IHNyYztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzYW1wbGVyJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIucHVzaChuZXcgU2FtcGxlcih0aGlzKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2NoYW5uZWwnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbm5lbC5wdXNoKG5ldyBDaGFubmVsKHRoaXMpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBDaGFubmVsKGFuaW1hdGlvbikge1xuXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gYW5pbWF0aW9uO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IFwiXCI7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5mdWxsU2lkID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaWQgPSBudWxsO1xuICAgICAgICB0aGlzLmRvdFN5bnRheCA9IG51bGw7XG4gICAgICAgIHRoaXMuYXJyU3ludGF4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcnJJbmRpY2VzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZW1iZXIgPSBudWxsO1xuICAgIH1cblxuICAgIENoYW5uZWwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLnNvdXJjZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzb3VyY2UnKS5yZXBsYWNlKC9eIy8sICcnKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGFyZ2V0Jyk7XG5cbiAgICAgICAgdmFyIHBhcnRzID0gdGhpcy50YXJnZXQuc3BsaXQoJy8nKTtcblxuICAgICAgICB2YXIgaWQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICB2YXIgc2lkID0gcGFydHMuc2hpZnQoKTtcblxuICAgICAgICB2YXIgZG90U3ludGF4ID0gc2lkLmluZGV4T2YoXCIuXCIpID49IDA7XG4gICAgICAgIHZhciBhcnJTeW50YXggPSBzaWQuaW5kZXhPZihcIihcIikgPj0gMDtcblxuICAgICAgICBpZiAoZG90U3ludGF4KSB7XG5cbiAgICAgICAgICAgIHBhcnRzID0gc2lkLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIHRoaXMuc2lkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgICAgIHRoaXMubWVtYmVyID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcnJTeW50YXgpIHtcblxuICAgICAgICAgICAgdmFyIGFyckluZGljZXMgPSBzaWQuc3BsaXQoXCIoXCIpO1xuICAgICAgICAgICAgdGhpcy5zaWQgPSBhcnJJbmRpY2VzLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJySW5kaWNlcy5sZW5ndGg7IGorKykge1xuXG4gICAgICAgICAgICAgICAgYXJySW5kaWNlc1tqXSA9IHBhcnNlSW50KGFyckluZGljZXNbal0ucmVwbGFjZSgvXFwpLywgJycpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hcnJJbmRpY2VzID0gYXJySW5kaWNlcztcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdGhpcy5zaWQgPSBzaWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZ1bGxTaWQgPSBzaWQ7XG4gICAgICAgIHRoaXMuZG90U3ludGF4ID0gZG90U3ludGF4O1xuICAgICAgICB0aGlzLmFyclN5bnRheCA9IGFyclN5bnRheDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2FtcGxlcihhbmltYXRpb24pIHtcblxuICAgICAgICB0aGlzLmlkID0gXCJcIjtcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSBhbmltYXRpb247XG4gICAgICAgIHRoaXMuaW5wdXRzID0gW107XG4gICAgICAgIHRoaXMuaW5wdXQgPSBudWxsO1xuICAgICAgICB0aGlzLm91dHB1dCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RyaWRlT3V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBudWxsO1xuICAgICAgICB0aGlzLmVuZFRpbWUgPSBudWxsO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gMDtcbiAgICB9XG5cbiAgICBTYW1wbGVyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLmlucHV0cyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5wdXQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRzLnB1c2gobmV3IElucHV0KCkucGFyc2UoY2hpbGQpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFNhbXBsZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMuaW5wdXRzW2ldO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuYW5pbWF0aW9uLnNvdXJjZVtpbnB1dC5zb3VyY2VdO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGlucHV0LnNlbWFudGljKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdJTlBVVCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IHNvdXJjZS5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnT1VUUFVUJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dCA9IHNvdXJjZS5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaWRlT3V0ID0gc291cmNlLmFjY2Vzc29yLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdJTlRFUlBPTEFUSU9OJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVycG9sYXRpb24gPSBzb3VyY2UucmVhZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0lOX1RBTkdFTlQnOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnT1VUX1RBTkdFTlQnOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dC5zZW1hbnRpYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDA7XG4gICAgICAgIHRoaXMuZW5kVGltZSA9IDA7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLmlucHV0Lmxlbmd0aCkge1xuXG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDEwMDAwMDAwMDtcbiAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IC0xMDAwMDAwMDA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnB1dC5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBNYXRoLm1pbih0aGlzLnN0YXJ0VGltZSwgdGhpcy5pbnB1dFtpXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gTWF0aC5tYXgodGhpcy5lbmRUaW1lLCB0aGlzLmlucHV0W2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiA9IHRoaXMuZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFNhbXBsZXIucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAodHlwZSwgbmR4LCBtZW1iZXIpIHtcblxuICAgICAgICB2YXIgZGF0YTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ21hdHJpeCcgJiYgdGhpcy5zdHJpZGVPdXQgPT09IDE2KSB7XG5cbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLm91dHB1dFtuZHhdO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RyaWRlT3V0ID4gMSkge1xuXG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgICAgICBuZHggKj0gdGhpcy5zdHJpZGVPdXQ7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdHJpZGVPdXQ7ICsraSkge1xuXG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IHRoaXMub3V0cHV0W25keCArIGldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJpZGVPdXQgPT09IDMpIHtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeENvb3JkcyhkYXRhLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2FsZSc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpeENvb3JkcyhkYXRhLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0cmlkZU91dCA9PT0gNCAmJiB0eXBlID09PSAnbWF0cml4Jykge1xuXG4gICAgICAgICAgICAgICAgZml4Q29vcmRzKGRhdGEsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgZGF0YSA9IHRoaXMub3V0cHV0W25keF07XG5cbiAgICAgICAgICAgIGlmIChtZW1iZXIgJiYgdHlwZSA9PT0gJ3RyYW5zbGF0ZScpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gZ2V0Q29udmVydGVkVHJhbnNsYXRpb24obWVtYmVyLCBkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBLZXkodGltZSkge1xuXG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgIH1cblxuICAgIEtleS5wcm90b3R5cGUuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gKGZ1bGxTaWQsIHRyYW5zZm9ybSwgbWVtYmVyLCBkYXRhKSB7XG5cbiAgICAgICAgdGhpcy50YXJnZXRzLnB1c2goe1xuICAgICAgICAgICAgc2lkOiBmdWxsU2lkLFxuICAgICAgICAgICAgbWVtYmVyOiBtZW1iZXIsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIEtleS5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAob3B0X3NpZCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YXJnZXRzLmxlbmd0aDsgKytpKSB7XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldHNbaV07XG5cbiAgICAgICAgICAgIGlmICghb3B0X3NpZCB8fCB0YXJnZXQuc2lkID09PSBvcHRfc2lkKSB7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQudHJhbnNmb3JtLnVwZGF0ZSh0YXJnZXQuZGF0YSwgdGFyZ2V0Lm1lbWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgS2V5LnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAoZnVsbFNpZCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YXJnZXRzLmxlbmd0aDsgKytpKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldHNbaV0uc2lkID09PSBmdWxsU2lkKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIEtleS5wcm90b3R5cGUuaGFzVGFyZ2V0ID0gZnVuY3Rpb24gKGZ1bGxTaWQpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGFyZ2V0cy5sZW5ndGg7ICsraSkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXRzW2ldLnNpZCA9PT0gZnVsbFNpZCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8vIFRPRE86IEN1cnJlbnRseSBvbmx5IGRvaW5nIGxpbmVhciBpbnRlcnBvbGF0aW9uLiBTaG91bGQgc3VwcG9ydCBmdWxsIENPTExBREEgc3BlYy5cbiAgICBLZXkucHJvdG90eXBlLmludGVycG9sYXRlID0gZnVuY3Rpb24gKG5leHRLZXksIHRpbWUpIHtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMudGFyZ2V0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0c1tpXSxcbiAgICAgICAgICAgICAgICBuZXh0VGFyZ2V0ID0gbmV4dEtleS5nZXRUYXJnZXQodGFyZ2V0LnNpZCksXG4gICAgICAgICAgICAgICAgZGF0YTtcblxuICAgICAgICAgICAgaWYgKHRhcmdldC50cmFuc2Zvcm0udHlwZSAhPT0gJ21hdHJpeCcgJiYgbmV4dFRhcmdldCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gKHRpbWUgLSB0aGlzLnRpbWUpIC8gKG5leHRLZXkudGltZSAtIHRoaXMudGltZSksXG4gICAgICAgICAgICAgICAgICAgIG5leHREYXRhID0gbmV4dFRhcmdldC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwcmV2RGF0YSA9IHRhcmdldC5kYXRhO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlIDwgMCkgc2NhbGUgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHNjYWxlID0gMTtcblxuICAgICAgICAgICAgICAgIGlmIChwcmV2RGF0YS5sZW5ndGgpIHtcblxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwcmV2RGF0YS5sZW5ndGg7ICsraikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2pdID0gcHJldkRhdGFbal0gKyAobmV4dERhdGFbal0gLSBwcmV2RGF0YVtqXSkgKiBzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHByZXZEYXRhICsgKG5leHREYXRhIC0gcHJldkRhdGEpICogc2NhbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGRhdGEgPSB0YXJnZXQuZGF0YTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFyZ2V0LnRyYW5zZm9ybS51cGRhdGUoZGF0YSwgdGFyZ2V0Lm1lbWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQ2FtZXJhXG4gICAgZnVuY3Rpb24gQ2FtZXJhKCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnRlY2huaXF1ZSA9IFwiXCI7XG4gICAgfVxuXG4gICAgQ2FtZXJhLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnb3B0aWNzJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlT3B0aWNzKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIENhbWVyYS5wcm90b3R5cGUucGFyc2VPcHRpY3MgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT09ICd0ZWNobmlxdWVfY29tbW9uJykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRlY2huaXF1ZSA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVjaG5pcXVlLmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlY2huaXF1ZSA9IHRlY2huaXF1ZS5jaGlsZE5vZGVzW2pdLm5vZGVOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlY2huaXF1ZSA9PT0gJ3BlcnNwZWN0aXZlJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyc3BlY3RpdmUgPSB0ZWNobmlxdWUuY2hpbGROb2Rlc1tqXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBwZXJzcGVjdGl2ZS5jaGlsZE5vZGVzLmxlbmd0aDsgaysrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBwZXJzcGVjdGl2ZS5jaGlsZE5vZGVzW2tdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXJhbS5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3lmb3YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55Zm92ID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneGZvdic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnhmb3YgPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd6bmVhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpuZWFyID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnemZhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpmYXIgPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhc3BlY3RfcmF0aW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3BlY3RfcmF0aW8gPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGVjaG5pcXVlID09PSAnb3J0aG9ncmFwaGljJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3J0aG9ncmFwaGljID0gdGVjaG5pcXVlLmNoaWxkTm9kZXNbal07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3J0aG9ncmFwaGljLmNoaWxkTm9kZXMubGVuZ3RoOyBrKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG9ydGhvZ3JhcGhpYy5jaGlsZE5vZGVzW2tdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXJhbS5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3htYWcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54bWFnID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneW1hZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnltYWcgPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd6bmVhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpuZWFyID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnemZhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpmYXIgPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhc3BlY3RfcmF0aW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3BlY3RfcmF0aW8gPSBwYXJhbS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEluc3RhbmNlQ2FtZXJhKCkge1xuXG4gICAgICAgIHRoaXMudXJsID0gXCJcIjtcbiAgICB9XG5cbiAgICBJbnN0YW5jZUNhbWVyYS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMudXJsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3VybCcpLnJlcGxhY2UoL14jLywgJycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvLyBMaWdodFxuXG4gICAgZnVuY3Rpb24gTGlnaHQoKSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IFwiXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMudGVjaG5pcXVlID0gXCJcIjtcbiAgICB9XG5cbiAgICBMaWdodC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMuaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDb21tb24oY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZVRlY2huaXF1ZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMaWdodC5wcm90b3R5cGUucGFyc2VDb21tb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdkaXJlY3Rpb25hbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAncG9pbnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3Nwb3QnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FtYmllbnQnOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVjaG5pcXVlID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaWdodCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpZ2h0LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gbGlnaHQuY2hpbGROb2Rlc1tqXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sb3InOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZ2JhID0gX2Zsb2F0cyhjaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3Iuc2V0UkdCKHJnYmFbMF0sIHJnYmFbMV0sIHJnYmFbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yLmEgPSByZ2JhWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZhbGxvZmZfYW5nbGUnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmFsbG9mZl9hbmdsZSA9IHBhcnNlRmxvYXQoY2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3F1YWRyYXRpY19hdHRlbnVhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gcGFyc2VGbG9hdChjaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBmID8gTWF0aC5zcXJ0KDEgLyBmKSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExpZ2h0LnByb3RvdHlwZS5wYXJzZVRlY2huaXF1ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5wcm9maWxlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3Byb2ZpbGUnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2ludGVuc2l0eSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBwYXJzZUZsb2F0KGNoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbnN0YW5jZUxpZ2h0KCkge1xuXG4gICAgICAgIHRoaXMudXJsID0gXCJcIjtcbiAgICB9XG5cbiAgICBJbnN0YW5jZUxpZ2h0LnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy51cmwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndXJsJykucmVwbGFjZSgvXiMvLCAnJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEtpbmVtYXRpY3NNb2RlbCgpIHtcblxuICAgICAgICB0aGlzLmlkID0gJyc7XG4gICAgICAgIHRoaXMubmFtZSA9ICcnO1xuICAgICAgICB0aGlzLmpvaW50cyA9IFtdO1xuICAgICAgICB0aGlzLmxpbmtzID0gW107XG4gICAgfVxuXG4gICAgS2luZW1hdGljc01vZGVsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cbiAgICAgICAgdGhpcy5pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLmpvaW50cyA9IFtdO1xuICAgICAgICB0aGlzLmxpbmtzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkLm5vZGVOYW1lKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0ZWNobmlxdWVfY29tbW9uJzpcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ29tbW9uKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEtpbmVtYXRpY3NNb2RlbC5wcm90b3R5cGUucGFyc2VDb21tb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChlbGVtZW50LmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2pvaW50JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qb2ludHMucHVzaChuZXcgSm9pbnQoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzLnB1c2gobmV3IExpbmsoKS5wYXJzZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSm9pbnQoKSB7XG5cbiAgICAgICAgdGhpcy5zaWQgPSAnJztcbiAgICAgICAgdGhpcy5uYW1lID0gJyc7XG4gICAgICAgIHRoaXMuYXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgIHRoaXMubGltaXRzID0ge1xuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAwXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHlwZSA9ICcnO1xuICAgICAgICB0aGlzLnN0YXRpYyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnplcm9Qb3NpdGlvbiA9IDAuMDtcbiAgICAgICAgdGhpcy5taWRkbGVQb3NpdGlvbiA9IDAuMDtcbiAgICB9XG5cbiAgICBKb2ludC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG4gICAgICAgIHRoaXMuc2lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NpZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICB0aGlzLmF4aXMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICB0aGlzLmxpbWl0cyA9IHtcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnR5cGUgPSAnJztcbiAgICAgICAgdGhpcy5zdGF0aWMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy56ZXJvUG9zaXRpb24gPSAwLjA7XG4gICAgICAgIHRoaXMubWlkZGxlUG9zaXRpb24gPSAwLjA7XG5cbiAgICAgICAgdmFyIGF4aXNFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdheGlzJyk7XG4gICAgICAgIHZhciBfYXhpcyA9IF9mbG9hdHMoYXhpc0VsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICB0aGlzLmF4aXMgPSBnZXRDb252ZXJ0ZWRWZWMzKF9heGlzLCAwKTtcblxuICAgICAgICB2YXIgbWluID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdsaW1pdHMgbWluJykgPyBwYXJzZUZsb2F0KGVsZW1lbnQucXVlcnlTZWxlY3RvcignbGltaXRzIG1pbicpLnRleHRDb250ZW50KSA6IC0zNjA7XG4gICAgICAgIHZhciBtYXggPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpbWl0cyBtYXgnKSA/IHBhcnNlRmxvYXQoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdsaW1pdHMgbWF4JykudGV4dENvbnRlbnQpIDogMzYwO1xuXG4gICAgICAgIHRoaXMubGltaXRzID0ge1xuICAgICAgICAgICAgbWluOiBtaW4sXG4gICAgICAgICAgICBtYXg6IG1heFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBqb2ludFR5cGVzID0gWydwcmlzbWF0aWMnLCAncmV2b2x1dGUnXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqb2ludFR5cGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciB0eXBlID0gam9pbnRUeXBlc1tpXTtcblxuICAgICAgICAgICAgdmFyIGpvaW50RWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3Rvcih0eXBlKTtcblxuICAgICAgICAgICAgaWYgKGpvaW50RWxlbWVudCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSBtaW4gaXMgZXF1YWwgdG8gb3Igc29tZWhvdyBncmVhdGVyIHRoYW4gdGhlIG1heCwgY29uc2lkZXIgdGhlIGpvaW50IHN0YXRpY1xuICAgICAgICBpZiAodGhpcy5saW1pdHMubWluID49IHRoaXMubGltaXRzLm1heCkge1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRpYyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1pZGRsZVBvc2l0aW9uID0gKHRoaXMubGltaXRzLm1pbiArIHRoaXMubGltaXRzLm1heCkgLyAyLjA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBMaW5rKCkge1xuXG4gICAgICAgIHRoaXMuc2lkID0gJyc7XG4gICAgICAgIHRoaXMubmFtZSA9ICcnO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybXMgPSBbXTtcbiAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IFtdO1xuICAgIH1cblxuICAgIExpbmsucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLnNpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzaWQnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1zID0gW107XG4gICAgICAgIHRoaXMuYXR0YWNobWVudHMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBlbGVtZW50LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT0gMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGQubm9kZU5hbWUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2F0dGFjaG1lbnRfZnVsbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMucHVzaChuZXcgQXR0YWNobWVudCgpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1zLnB1c2gobmV3IFRyYW5zZm9ybSgpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEF0dGFjaG1lbnQoKSB7XG5cbiAgICAgICAgdGhpcy5qb2ludCA9ICcnO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybXMgPSBbXTtcbiAgICAgICAgdGhpcy5saW5rcyA9IFtdO1xuICAgIH1cblxuICAgIEF0dGFjaG1lbnQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICB0aGlzLmpvaW50ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2pvaW50Jykuc3BsaXQoJy8nKS5wb3AoKTtcbiAgICAgICAgdGhpcy5saW5rcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSAhPSAxKSBjb250aW51ZTtcblxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZC5ub2RlTmFtZSkge1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3MucHVzaChuZXcgTGluaygpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1zLnB1c2gobmV3IFRyYW5zZm9ybSgpLnBhcnNlKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIF9zb3VyY2UoZWxlbWVudCkge1xuXG4gICAgICAgIHZhciBpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICAgIGlmIChzb3VyY2VzW2lkXSAhPSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZXNbaWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgc291cmNlc1tpZF0gPSBuZXcgU291cmNlKGlkKS5wYXJzZShlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZXNbaWRdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9uc1Jlc29sdmVyKG5zUHJlZml4KSB7XG5cbiAgICAgICAgaWYgKG5zUHJlZml4ID09PSBcImRhZVwiKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBcImh0dHA6Ly93d3cuY29sbGFkYS5vcmcvMjAwNS8xMS9DT0xMQURBU2NoZW1hXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYm9vbHMoc3RyKSB7XG5cbiAgICAgICAgdmFyIHJhdyA9IF9zdHJpbmdzKHN0cik7XG4gICAgICAgIHZhciBkYXRhID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByYXcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGRhdGEucHVzaChyYXdbaV0gPT09ICd0cnVlJyB8fCByYXdbaV0gPT09ICcxJyA/IHRydWUgOiBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfZmxvYXRzKHN0cikge1xuXG4gICAgICAgIHZhciByYXcgPSBfc3RyaW5ncyhzdHIpO1xuICAgICAgICB2YXIgZGF0YSA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcmF3Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXG4gICAgICAgICAgICBkYXRhLnB1c2gocGFyc2VGbG9hdChyYXdbaV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9pbnRzKHN0cikge1xuXG4gICAgICAgIHZhciByYXcgPSBfc3RyaW5ncyhzdHIpO1xuICAgICAgICB2YXIgZGF0YSA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcmF3Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXG4gICAgICAgICAgICBkYXRhLnB1c2gocGFyc2VJbnQocmF3W2ldLCAxMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3N0cmluZ3Moc3RyKSB7XG5cbiAgICAgICAgcmV0dXJuIHN0ci5sZW5ndGggPiAwID8gX3RyaW1TdHJpbmcoc3RyKS5zcGxpdCgvXFxzKy8pIDogW107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3RyaW1TdHJpbmcoc3RyKSB7XG5cbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKy8sIFwiXCIpLnJlcGxhY2UoL1xccyskLywgXCJcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2F0dHJfYXNfZmxvYXQoZWxlbWVudCwgbmFtZSwgZGVmYXVsdFZhbHVlKSB7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9hdHRyX2FzX2ludChlbGVtZW50LCBuYW1lLCBkZWZhdWx0VmFsdWUpIHtcblxuICAgICAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUobmFtZSkpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfYXR0cl9hc19zdHJpbmcoZWxlbWVudCwgbmFtZSwgZGVmYXVsdFZhbHVlKSB7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9mb3JtYXRfZmxvYXQoZiwgbnVtKSB7XG5cbiAgICAgICAgaWYgKGYgPT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICB2YXIgcyA9ICcwLic7XG5cbiAgICAgICAgICAgIHdoaWxlIChzLmxlbmd0aCA8IG51bSArIDIpIHtcblxuICAgICAgICAgICAgICAgIHMgKz0gJzAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfVxuXG4gICAgICAgIG51bSA9IG51bSB8fCAyO1xuXG4gICAgICAgIHZhciBwYXJ0cyA9IGYudG9TdHJpbmcoKS5zcGxpdCgnLicpO1xuICAgICAgICBwYXJ0c1sxXSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0c1sxXS5zdWJzdHIoMCwgbnVtKSA6IFwiMFwiO1xuXG4gICAgICAgIHdoaWxlIChwYXJ0c1sxXS5sZW5ndGggPCBudW0pIHtcblxuICAgICAgICAgICAgcGFydHNbMV0gKz0gJzAnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJy4nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkVGV4dHVyZUltYWdlKHRleHR1cmUsIHVybCkge1xuXG4gICAgICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuSW1hZ2VMb2FkZXIoKTtcblxuICAgICAgICBsb2FkZXIubG9hZCh1cmwsIGZ1bmN0aW9uIChpbWFnZSkge1xuXG4gICAgICAgICAgICB0ZXh0dXJlLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0cmFjdERvdWJsZVNpZGVkKG9iaiwgZWxlbWVudCkge1xuXG4gICAgICAgIG9iai5kb3VibGVTaWRlZCA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBub2RlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdleHRyYSBkb3VibGVfc2lkZWQnKVswXTtcblxuICAgICAgICBpZiAobm9kZSkge1xuXG4gICAgICAgICAgICBpZiAobm9kZSAmJiBwYXJzZUludChub2RlLnRleHRDb250ZW50LCAxMCkgPT09IDEpIHtcblxuICAgICAgICAgICAgICAgIG9iai5kb3VibGVTaWRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcCBheGlzIGNvbnZlcnNpb25cblxuICAgIGZ1bmN0aW9uIHNldFVwQ29udmVyc2lvbigpIHtcblxuICAgICAgICBpZiAob3B0aW9ucy5jb252ZXJ0VXBBeGlzICE9PSB0cnVlIHx8IGNvbGxhZGFVcCA9PT0gb3B0aW9ucy51cEF4aXMpIHtcblxuICAgICAgICAgICAgdXBDb252ZXJzaW9uID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgc3dpdGNoIChjb2xsYWRhVXApIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ1gnOlxuXG4gICAgICAgICAgICAgICAgICAgIHVwQ29udmVyc2lvbiA9IG9wdGlvbnMudXBBeGlzID09PSAnWScgPyAnWHRvWScgOiAnWHRvWic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnWSc6XG5cbiAgICAgICAgICAgICAgICAgICAgdXBDb252ZXJzaW9uID0gb3B0aW9ucy51cEF4aXMgPT09ICdYJyA/ICdZdG9YJyA6ICdZdG9aJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdaJzpcblxuICAgICAgICAgICAgICAgICAgICB1cENvbnZlcnNpb24gPSBvcHRpb25zLnVwQXhpcyA9PT0gJ1gnID8gJ1p0b1gnIDogJ1p0b1knO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4Q29vcmRzKGRhdGEsIHNpZ24pIHtcblxuICAgICAgICBpZiAob3B0aW9ucy5jb252ZXJ0VXBBeGlzICE9PSB0cnVlIHx8IGNvbGxhZGFVcCA9PT0gb3B0aW9ucy51cEF4aXMpIHtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh1cENvbnZlcnNpb24pIHtcblxuICAgICAgICAgICAgY2FzZSAnWHRvWSc6XG5cbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gZGF0YVswXTtcbiAgICAgICAgICAgICAgICBkYXRhWzBdID0gc2lnbiAqIGRhdGFbMV07XG4gICAgICAgICAgICAgICAgZGF0YVsxXSA9IHRtcDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnWHRvWic6XG5cbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gZGF0YVsyXTtcbiAgICAgICAgICAgICAgICBkYXRhWzJdID0gZGF0YVsxXTtcbiAgICAgICAgICAgICAgICBkYXRhWzFdID0gZGF0YVswXTtcbiAgICAgICAgICAgICAgICBkYXRhWzBdID0gdG1wO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdZdG9YJzpcblxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgIGRhdGFbMF0gPSBkYXRhWzFdO1xuICAgICAgICAgICAgICAgIGRhdGFbMV0gPSBzaWduICogdG1wO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdZdG9aJzpcblxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBkYXRhWzFdO1xuICAgICAgICAgICAgICAgIGRhdGFbMV0gPSBzaWduICogZGF0YVsyXTtcbiAgICAgICAgICAgICAgICBkYXRhWzJdID0gdG1wO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdadG9YJzpcblxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgIGRhdGFbMF0gPSBkYXRhWzFdO1xuICAgICAgICAgICAgICAgIGRhdGFbMV0gPSBkYXRhWzJdO1xuICAgICAgICAgICAgICAgIGRhdGFbMl0gPSB0bXA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ1p0b1knOlxuXG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IGRhdGFbMV07XG4gICAgICAgICAgICAgICAgZGF0YVsxXSA9IGRhdGFbMl07XG4gICAgICAgICAgICAgICAgZGF0YVsyXSA9IHNpZ24gKiB0bXA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbnZlcnRlZFRyYW5zbGF0aW9uKGF4aXMsIGRhdGEpIHtcblxuICAgICAgICBpZiAob3B0aW9ucy5jb252ZXJ0VXBBeGlzICE9PSB0cnVlIHx8IGNvbGxhZGFVcCA9PT0gb3B0aW9ucy51cEF4aXMpIHtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGF4aXMpIHtcbiAgICAgICAgICAgIGNhc2UgJ1gnOlxuICAgICAgICAgICAgICAgIGRhdGEgPSB1cENvbnZlcnNpb24gPT09ICdYdG9ZJyA/IGRhdGEgKiAtMSA6IGRhdGE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdZJzpcbiAgICAgICAgICAgICAgICBkYXRhID0gdXBDb252ZXJzaW9uID09PSAnWXRvWicgfHwgdXBDb252ZXJzaW9uID09PSAnWXRvWCcgPyBkYXRhICogLTEgOiBkYXRhO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnWic6XG4gICAgICAgICAgICAgICAgZGF0YSA9IHVwQ29udmVyc2lvbiA9PT0gJ1p0b1knID8gZGF0YSAqIC0xIDogZGF0YTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb252ZXJ0ZWRWZWMzKGRhdGEsIG9mZnNldCkge1xuXG4gICAgICAgIHZhciBhcnIgPSBbZGF0YVtvZmZzZXRdLCBkYXRhW29mZnNldCArIDFdLCBkYXRhW29mZnNldCArIDJdXTtcbiAgICAgICAgZml4Q29vcmRzKGFyciwgLTEpO1xuICAgICAgICByZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYXJyWzBdLCBhcnJbMV0sIGFyclsyXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udmVydGVkTWF0NChkYXRhKSB7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuY29udmVydFVwQXhpcykge1xuXG4gICAgICAgICAgICAvLyBGaXJzdCBmaXggcm90YXRpb24gYW5kIHNjYWxlXG5cbiAgICAgICAgICAgIC8vIENvbHVtbnMgZmlyc3RcbiAgICAgICAgICAgIHZhciBhcnIgPSBbZGF0YVswXSwgZGF0YVs0XSwgZGF0YVs4XV07XG4gICAgICAgICAgICBmaXhDb29yZHMoYXJyLCAtMSk7XG4gICAgICAgICAgICBkYXRhWzBdID0gYXJyWzBdO1xuICAgICAgICAgICAgZGF0YVs0XSA9IGFyclsxXTtcbiAgICAgICAgICAgIGRhdGFbOF0gPSBhcnJbMl07XG4gICAgICAgICAgICBhcnIgPSBbZGF0YVsxXSwgZGF0YVs1XSwgZGF0YVs5XV07XG4gICAgICAgICAgICBmaXhDb29yZHMoYXJyLCAtMSk7XG4gICAgICAgICAgICBkYXRhWzFdID0gYXJyWzBdO1xuICAgICAgICAgICAgZGF0YVs1XSA9IGFyclsxXTtcbiAgICAgICAgICAgIGRhdGFbOV0gPSBhcnJbMl07XG4gICAgICAgICAgICBhcnIgPSBbZGF0YVsyXSwgZGF0YVs2XSwgZGF0YVsxMF1dO1xuICAgICAgICAgICAgZml4Q29vcmRzKGFyciwgLTEpO1xuICAgICAgICAgICAgZGF0YVsyXSA9IGFyclswXTtcbiAgICAgICAgICAgIGRhdGFbNl0gPSBhcnJbMV07XG4gICAgICAgICAgICBkYXRhWzEwXSA9IGFyclsyXTtcbiAgICAgICAgICAgIC8vIFJvd3Mgc2Vjb25kXG4gICAgICAgICAgICBhcnIgPSBbZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXV07XG4gICAgICAgICAgICBmaXhDb29yZHMoYXJyLCAtMSk7XG4gICAgICAgICAgICBkYXRhWzBdID0gYXJyWzBdO1xuICAgICAgICAgICAgZGF0YVsxXSA9IGFyclsxXTtcbiAgICAgICAgICAgIGRhdGFbMl0gPSBhcnJbMl07XG4gICAgICAgICAgICBhcnIgPSBbZGF0YVs0XSwgZGF0YVs1XSwgZGF0YVs2XV07XG4gICAgICAgICAgICBmaXhDb29yZHMoYXJyLCAtMSk7XG4gICAgICAgICAgICBkYXRhWzRdID0gYXJyWzBdO1xuICAgICAgICAgICAgZGF0YVs1XSA9IGFyclsxXTtcbiAgICAgICAgICAgIGRhdGFbNl0gPSBhcnJbMl07XG4gICAgICAgICAgICBhcnIgPSBbZGF0YVs4XSwgZGF0YVs5XSwgZGF0YVsxMF1dO1xuICAgICAgICAgICAgZml4Q29vcmRzKGFyciwgLTEpO1xuICAgICAgICAgICAgZGF0YVs4XSA9IGFyclswXTtcbiAgICAgICAgICAgIGRhdGFbOV0gPSBhcnJbMV07XG4gICAgICAgICAgICBkYXRhWzEwXSA9IGFyclsyXTtcblxuICAgICAgICAgICAgLy8gTm93IGZpeCB0cmFuc2xhdGlvblxuICAgICAgICAgICAgYXJyID0gW2RhdGFbM10sIGRhdGFbN10sIGRhdGFbMTFdXTtcbiAgICAgICAgICAgIGZpeENvb3JkcyhhcnIsIC0xKTtcbiAgICAgICAgICAgIGRhdGFbM10gPSBhcnJbMF07XG4gICAgICAgICAgICBkYXRhWzddID0gYXJyWzFdO1xuICAgICAgICAgICAgZGF0YVsxMV0gPSBhcnJbMl07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoKS5zZXQoZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXSwgZGF0YVszXSwgZGF0YVs0XSwgZGF0YVs1XSwgZGF0YVs2XSwgZGF0YVs3XSwgZGF0YVs4XSwgZGF0YVs5XSwgZGF0YVsxMF0sIGRhdGFbMTFdLCBkYXRhWzEyXSwgZGF0YVsxM10sIGRhdGFbMTRdLCBkYXRhWzE1XSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udmVydGVkSW5kZXgoaW5kZXgpIHtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSAmJiBpbmRleCA8IDMpIHtcblxuICAgICAgICAgICAgdmFyIG1lbWJlcnMgPSBbJ1gnLCAnWScsICdaJ10sXG4gICAgICAgICAgICAgICAgaW5kaWNlcyA9IHsgWDogMCwgWTogMSwgWjogMiB9O1xuXG4gICAgICAgICAgICBpbmRleCA9IGdldENvbnZlcnRlZE1lbWJlcihtZW1iZXJzW2luZGV4XSk7XG4gICAgICAgICAgICBpbmRleCA9IGluZGljZXNbaW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbnZlcnRlZE1lbWJlcihtZW1iZXIpIHtcblxuICAgICAgICBpZiAob3B0aW9ucy5jb252ZXJ0VXBBeGlzKSB7XG5cbiAgICAgICAgICAgIHN3aXRjaCAobWVtYmVyKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdYJzpcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHVwQ29udmVyc2lvbikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdYdG9ZJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1h0b1onOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWXRvWCc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXIgPSAnWSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1p0b1gnOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyID0gJ1onO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ1knOlxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodXBDb252ZXJzaW9uKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1h0b1knOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWXRvWCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdadG9YJzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlciA9ICdYJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWHRvWic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdZdG9aJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1p0b1knOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyID0gJ1onO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ1onOlxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodXBDb252ZXJzaW9uKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1h0b1onOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyID0gJ1gnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdZdG9aJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1p0b1gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWnRvWSc6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXIgPSAnWSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVtYmVyO1xuICAgIH1cblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgbG9hZDogbG9hZCxcbiAgICAgICAgcGFyc2U6IHBhcnNlLFxuICAgICAgICBzZXRQcmVmZXJyZWRTaGFkaW5nOiBzZXRQcmVmZXJyZWRTaGFkaW5nLFxuICAgICAgICBhcHBseVNraW46IGFwcGx5U2tpbixcbiAgICAgICAgZ2VvbWV0cmllczogZ2VvbWV0cmllcyxcbiAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuXG4gICAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGFkYUxvYWRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aHJlZS1jb2xsYWRhLWxvYWRlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export ball */\n/* unused harmony export gui */\nconst DAT = __webpack_require__(11);\nconst ball = {\n  rotationY: 0,\n  rotationX: 0,\n  rotationZ: 0,\n  positionY: 0,\n  positionX: 0,\n  positionZ: 0\n};\n\nconst gui = () => {\n  var gui = new DAT.GUI();\n  gui.add(ball, 'rotationY').min(-0.2).max(0.2).step(0.001);\n  gui.add(ball, 'rotationX').min(-0.2).max(0.2).step(0.001);\n  gui.add(ball, 'rotationZ').min(-0.2).max(0.2).step(0.001);\n  gui.add(ball, 'positionY').min(-5).max(5).step(0.1);\n  gui.add(ball, 'positionX').min(-5).max(5).step(0.1);\n  gui.add(ball, 'positionZ').min(-5).max(5).step(0.1);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9ndWkuanM/MDUyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEQVQgPSByZXF1aXJlKCcuL2xpYi9kYXQuZ3VpLm1pbicpO1xuY29uc3QgYmFsbCA9IHtcbiAgcm90YXRpb25ZOiAwLFxuICByb3RhdGlvblg6IDAsXG4gIHJvdGF0aW9uWjogMCxcbiAgcG9zaXRpb25ZOiAwLFxuICBwb3NpdGlvblg6IDAsXG4gIHBvc2l0aW9uWjogMFxufTtcblxuY29uc3QgZ3VpID0gKCkgPT4ge1xuICB2YXIgZ3VpID0gbmV3IERBVC5HVUkoKTtcbiAgZ3VpLmFkZChiYWxsLCAncm90YXRpb25ZJykubWluKC0wLjIpLm1heCgwLjIpLnN0ZXAoMC4wMDEpO1xuICBndWkuYWRkKGJhbGwsICdyb3RhdGlvblgnKS5taW4oLTAuMikubWF4KDAuMikuc3RlcCgwLjAwMSk7XG4gIGd1aS5hZGQoYmFsbCwgJ3JvdGF0aW9uWicpLm1pbigtMC4yKS5tYXgoMC4yKS5zdGVwKDAuMDAxKTtcbiAgZ3VpLmFkZChiYWxsLCAncG9zaXRpb25ZJykubWluKC01KS5tYXgoNSkuc3RlcCgwLjEpO1xuICBndWkuYWRkKGJhbGwsICdwb3NpdGlvblgnKS5taW4oLTUpLm1heCg1KS5zdGVwKDAuMSk7XG4gIGd1aS5hZGQoYmFsbCwgJ3Bvc2l0aW9uWicpLm1pbigtNSkubWF4KDUpLnN0ZXAoMC4xKTtcbn07XG5cbmV4cG9ydCB7IGJhbGwsIGd1aSB9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvZ3VpLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

eval("!function (e, t) {\n   true ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.dat = t() : e.dat = t();\n}(this, function () {\n  return function (e) {\n    function t(o) {\n      if (n[o]) return n[o].exports;var i = n[o] = { exports: {}, id: o, loaded: !1 };return e[o].call(i.exports, i, i.exports, t), i.loaded = !0, i.exports;\n    }var n = {};return t.m = e, t.c = n, t.p = \"\", t(0);\n  }([function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }t.__esModule = !0;var i = n(1),\n        r = o(i);t.default = r.default, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }t.__esModule = !0;var i = n(2),\n        r = o(i),\n        a = n(6),\n        l = o(a),\n        s = n(3),\n        u = o(s),\n        d = n(7),\n        c = o(d),\n        f = n(8),\n        _ = o(f),\n        p = n(10),\n        h = o(p),\n        m = n(11),\n        b = o(m),\n        g = n(12),\n        v = o(g),\n        y = n(13),\n        w = o(y),\n        x = n(14),\n        E = o(x),\n        C = n(15),\n        A = o(C),\n        S = n(16),\n        k = o(S),\n        O = n(9),\n        T = o(O),\n        R = n(17),\n        L = o(R);t.default = { color: { Color: r.default, math: l.default, interpret: u.default }, controllers: { Controller: c.default, BooleanController: _.default, OptionController: h.default, StringController: b.default, NumberController: v.default, NumberControllerBox: w.default, NumberControllerSlider: E.default, FunctionController: A.default, ColorController: k.default }, dom: { dom: T.default }, gui: { GUI: L.default }, GUI: L.default }, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t, n) {\n      Object.defineProperty(e, t, { get: function () {\n          return \"RGB\" === this.__state.space ? this.__state[t] : (h.recalculateRGB(this, t, n), this.__state[t]);\n        }, set: function (e) {\n          \"RGB\" !== this.__state.space && (h.recalculateRGB(this, t, n), this.__state.space = \"RGB\"), this.__state[t] = e;\n        } });\n    }function a(e, t) {\n      Object.defineProperty(e, t, { get: function () {\n          return \"HSV\" === this.__state.space ? this.__state[t] : (h.recalculateHSV(this), this.__state[t]);\n        }, set: function (e) {\n          \"HSV\" !== this.__state.space && (h.recalculateHSV(this), this.__state.space = \"HSV\"), this.__state[t] = e;\n        } });\n    }t.__esModule = !0;var l = n(3),\n        s = o(l),\n        u = n(6),\n        d = o(u),\n        c = n(4),\n        f = o(c),\n        _ = n(5),\n        p = o(_),\n        h = function () {\n      function e() {\n        if (i(this, e), this.__state = s.default.apply(this, arguments), this.__state === !1) throw new Error(\"Failed to interpret color arguments\");this.__state.a = this.__state.a || 1;\n      }return e.prototype.toString = function () {\n        return (0, f.default)(this);\n      }, e.prototype.toHexString = function () {\n        return (0, f.default)(this, !0);\n      }, e.prototype.toOriginal = function () {\n        return this.__state.conversion.write(this);\n      }, e;\n    }();h.recalculateRGB = function (e, t, n) {\n      if (\"HEX\" === e.__state.space) e.__state[t] = d.default.component_from_hex(e.__state.hex, n);else {\n        if (\"HSV\" !== e.__state.space) throw new Error(\"Corrupted color state\");p.default.extend(e.__state, d.default.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v));\n      }\n    }, h.recalculateHSV = function (e) {\n      var t = d.default.rgb_to_hsv(e.r, e.g, e.b);p.default.extend(e.__state, { s: t.s, v: t.v }), p.default.isNaN(t.h) ? p.default.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = t.h;\n    }, h.COMPONENTS = [\"r\", \"g\", \"b\", \"h\", \"s\", \"v\", \"hex\", \"a\"], r(h.prototype, \"r\", 2), r(h.prototype, \"g\", 1), r(h.prototype, \"b\", 0), a(h.prototype, \"h\"), a(h.prototype, \"s\"), a(h.prototype, \"v\"), Object.defineProperty(h.prototype, \"a\", { get: function () {\n        return this.__state.a;\n      }, set: function (e) {\n        this.__state.a = e;\n      } }), Object.defineProperty(h.prototype, \"hex\", { get: function () {\n        return \"HEX\" !== !this.__state.space && (this.__state.hex = d.default.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex;\n      }, set: function (e) {\n        this.__state.space = \"HEX\", this.__state.hex = e;\n      } }), t.default = h, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }t.__esModule = !0;var i = n(4),\n        r = o(i),\n        a = n(5),\n        l = o(a),\n        s = [{ litmus: l.default.isString, conversions: { THREE_CHAR_HEX: { read: function (e) {\n            var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null !== t && { space: \"HEX\", hex: parseInt(\"0x\" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString(), 0) };\n          }, write: r.default }, SIX_CHAR_HEX: { read: function (e) {\n            var t = e.match(/^#([A-F0-9]{6})$/i);return null !== t && { space: \"HEX\", hex: parseInt(\"0x\" + t[1].toString(), 0) };\n          }, write: r.default }, CSS_RGB: { read: function (e) {\n            var t = e.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null !== t && { space: \"RGB\", r: parseFloat(t[1]), g: parseFloat(t[2]), b: parseFloat(t[3]) };\n          }, write: r.default }, CSS_RGBA: { read: function (e) {\n            var t = e.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null !== t && { space: \"RGB\", r: parseFloat(t[1]), g: parseFloat(t[2]), b: parseFloat(t[3]), a: parseFloat(t[4]) };\n          }, write: r.default } } }, { litmus: l.default.isNumber, conversions: { HEX: { read: function (e) {\n            return { space: \"HEX\", hex: e, conversionName: \"HEX\" };\n          }, write: function (e) {\n            return e.hex;\n          } } } }, { litmus: l.default.isArray, conversions: { RGB_ARRAY: { read: function (e) {\n            return 3 === e.length && { space: \"RGB\", r: e[0], g: e[1], b: e[2] };\n          }, write: function (e) {\n            return [e.r, e.g, e.b];\n          } }, RGBA_ARRAY: { read: function (e) {\n            return 4 === e.length && { space: \"RGB\", r: e[0], g: e[1], b: e[2], a: e[3] };\n          }, write: function (e) {\n            return [e.r, e.g, e.b, e.a];\n          } } } }, { litmus: l.default.isObject, conversions: { RGBA_OBJ: { read: function (e) {\n            return !!(l.default.isNumber(e.r) && l.default.isNumber(e.g) && l.default.isNumber(e.b) && l.default.isNumber(e.a)) && { space: \"RGB\", r: e.r, g: e.g, b: e.b, a: e.a };\n          }, write: function (e) {\n            return { r: e.r, g: e.g, b: e.b, a: e.a };\n          } }, RGB_OBJ: { read: function (e) {\n            return !!(l.default.isNumber(e.r) && l.default.isNumber(e.g) && l.default.isNumber(e.b)) && { space: \"RGB\", r: e.r, g: e.g, b: e.b };\n          }, write: function (e) {\n            return { r: e.r, g: e.g, b: e.b };\n          } }, HSVA_OBJ: { read: function (e) {\n            return !!(l.default.isNumber(e.h) && l.default.isNumber(e.s) && l.default.isNumber(e.v) && l.default.isNumber(e.a)) && { space: \"HSV\", h: e.h, s: e.s, v: e.v, a: e.a };\n          }, write: function (e) {\n            return { h: e.h, s: e.s, v: e.v, a: e.a };\n          } }, HSV_OBJ: { read: function (e) {\n            return !!(l.default.isNumber(e.h) && l.default.isNumber(e.s) && l.default.isNumber(e.v)) && { space: \"HSV\", h: e.h, s: e.s, v: e.v };\n          }, write: function (e) {\n            return { h: e.h, s: e.s, v: e.v };\n          } } } }],\n        u = void 0,\n        d = void 0,\n        c = function () {\n      d = !1;var e = arguments.length > 1 ? l.default.toArray(arguments) : arguments[0];return l.default.each(s, function (t) {\n        if (t.litmus(e)) return l.default.each(t.conversions, function (t, n) {\n          if (u = t.read(e), d === !1 && u !== !1) return d = u, u.conversionName = n, u.conversion = t, l.default.BREAK;\n        }), l.default.BREAK;\n      }), d;\n    };t.default = c, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    t.__esModule = !0, t.default = function (e, t) {\n      var n = e.__state.conversionName.toString(),\n          o = Math.round(e.r),\n          i = Math.round(e.g),\n          r = Math.round(e.b),\n          a = e.a,\n          l = Math.round(e.h),\n          s = e.s.toFixed(1),\n          u = e.v.toFixed(1);if (t || \"THREE_CHAR_HEX\" === n || \"SIX_CHAR_HEX\" === n) {\n        for (var d = e.hex.toString(16); d.length < 6;) d = \"0\" + d;return \"#\" + d;\n      }return \"CSS_RGB\" === n ? \"rgb(\" + o + \",\" + i + \",\" + r + \")\" : \"CSS_RGBA\" === n ? \"rgba(\" + o + \",\" + i + \",\" + r + \",\" + a + \")\" : \"HEX\" === n ? \"0x\" + e.hex.toString(16) : \"RGB_ARRAY\" === n ? \"[\" + o + \",\" + i + \",\" + r + \"]\" : \"RGBA_ARRAY\" === n ? \"[\" + o + \",\" + i + \",\" + r + \",\" + a + \"]\" : \"RGB_OBJ\" === n ? \"{r:\" + o + \",g:\" + i + \",b:\" + r + \"}\" : \"RGBA_OBJ\" === n ? \"{r:\" + o + \",g:\" + i + \",b:\" + r + \",a:\" + a + \"}\" : \"HSV_OBJ\" === n ? \"{h:\" + l + \",s:\" + s + \",v:\" + u + \"}\" : \"HSVA_OBJ\" === n ? \"{h:\" + l + \",s:\" + s + \",v:\" + u + \",a:\" + a + \"}\" : \"unknown format\";\n    }, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    t.__esModule = !0;var n = Array.prototype.forEach,\n        o = Array.prototype.slice,\n        i = { BREAK: {}, extend: function (e) {\n        return this.each(o.call(arguments, 1), function (t) {\n          var n = this.isObject(t) ? Object.keys(t) : [];n.forEach(function (n) {\n            this.isUndefined(t[n]) || (e[n] = t[n]);\n          }.bind(this));\n        }, this), e;\n      }, defaults: function (e) {\n        return this.each(o.call(arguments, 1), function (t) {\n          var n = this.isObject(t) ? Object.keys(t) : [];n.forEach(function (n) {\n            this.isUndefined(e[n]) && (e[n] = t[n]);\n          }.bind(this));\n        }, this), e;\n      }, compose: function () {\n        var e = o.call(arguments);return function () {\n          for (var t = o.call(arguments), n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];return t[0];\n        };\n      }, each: function (e, t, o) {\n        if (e) if (n && e.forEach && e.forEach === n) e.forEach(t, o);else if (e.length === e.length + 0) {\n          var i = void 0,\n              r = void 0;for (i = 0, r = e.length; i < r; i++) if (i in e && t.call(o, e[i], i) === this.BREAK) return;\n        } else for (var a in e) if (t.call(o, e[a], a) === this.BREAK) return;\n      }, defer: function (e) {\n        setTimeout(e, 0);\n      }, debounce: function (e, t, n) {\n        var o = void 0;return function () {\n          function i() {\n            o = null, n || e.apply(r, a);\n          }var r = this,\n              a = arguments,\n              l = n || !o;clearTimeout(o), o = setTimeout(i, t), l && e.apply(r, a);\n        };\n      }, toArray: function (e) {\n        return e.toArray ? e.toArray() : o.call(e);\n      }, isUndefined: function (e) {\n        return void 0 === e;\n      }, isNull: function (e) {\n        return null === e;\n      }, isNaN: function (e) {\n        function t(t) {\n          return e.apply(this, arguments);\n        }return t.toString = function () {\n          return e.toString();\n        }, t;\n      }(function (e) {\n        return isNaN(e);\n      }), isArray: Array.isArray || function (e) {\n        return e.constructor === Array;\n      }, isObject: function (e) {\n        return e === Object(e);\n      }, isNumber: function (e) {\n        return e === e + 0;\n      }, isString: function (e) {\n        return e === e + \"\";\n      }, isBoolean: function (e) {\n        return e === !1 || e === !0;\n      }, isFunction: function (e) {\n        return \"[object Function]\" === Object.prototype.toString.call(e);\n      } };t.default = i, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    t.__esModule = !0;var n = void 0,\n        o = { hsv_to_rgb: function (e, t, n) {\n        var o = Math.floor(e / 60) % 6,\n            i = e / 60 - Math.floor(e / 60),\n            r = n * (1 - t),\n            a = n * (1 - i * t),\n            l = n * (1 - (1 - i) * t),\n            s = [[n, l, r], [a, n, r], [r, n, l], [r, a, n], [l, r, n], [n, r, a]][o];return { r: 255 * s[0], g: 255 * s[1], b: 255 * s[2] };\n      }, rgb_to_hsv: function (e, t, n) {\n        var o = Math.min(e, t, n),\n            i = Math.max(e, t, n),\n            r = i - o,\n            a = void 0,\n            l = void 0;return 0 === i ? { h: NaN, s: 0, v: 0 } : (l = r / i, a = e === i ? (t - n) / r : t === i ? 2 + (n - e) / r : 4 + (e - t) / r, a /= 6, a < 0 && (a += 1), { h: 360 * a, s: l, v: i / 255 });\n      }, rgb_to_hex: function (e, t, n) {\n        var o = this.hex_with_component(0, 2, e);return o = this.hex_with_component(o, 1, t), o = this.hex_with_component(o, 0, n);\n      }, component_from_hex: function (e, t) {\n        return e >> 8 * t & 255;\n      }, hex_with_component: function (e, t, o) {\n        return o << (n = 8 * t) | e & ~(255 << n);\n      } };t.default = o, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    function n(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }t.__esModule = !0;var o = function () {\n      function e(t, o) {\n        n(this, e), this.initialValue = t[o], this.domElement = document.createElement(\"div\"), this.object = t, this.property = o, this.__onChange = void 0, this.__onFinishChange = void 0;\n      }return e.prototype.onChange = function (e) {\n        return this.__onChange = e, this;\n      }, e.prototype.onFinishChange = function (e) {\n        return this.__onFinishChange = e, this;\n      }, e.prototype.setValue = function (e) {\n        return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this;\n      }, e.prototype.getValue = function () {\n        return this.object[this.property];\n      }, e.prototype.updateDisplay = function () {\n        return this;\n      }, e.prototype.isModified = function () {\n        return this.initialValue !== this.getValue();\n      }, e;\n    }();t.default = o, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }t.__esModule = !0;var l = n(7),\n        s = o(l),\n        u = n(9),\n        d = o(u),\n        c = function (e) {\n      function t(n, o) {\n        function a() {\n          s.setValue(!s.__prev);\n        }i(this, t);var l = r(this, e.call(this, n, o)),\n            s = l;return l.__prev = l.getValue(), l.__checkbox = document.createElement(\"input\"), l.__checkbox.setAttribute(\"type\", \"checkbox\"), d.default.bind(l.__checkbox, \"change\", a, !1), l.domElement.appendChild(l.__checkbox), l.updateDisplay(), l;\n      }return a(t, e), t.prototype.setValue = function (t) {\n        var n = e.prototype.setValue.call(this, t);return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), n;\n      }, t.prototype.updateDisplay = function () {\n        return this.getValue() === !0 ? (this.__checkbox.setAttribute(\"checked\", \"checked\"), this.__checkbox.checked = !0, this.__prev = !0) : (this.__checkbox.checked = !1, this.__prev = !1), e.prototype.updateDisplay.call(this);\n      }, t;\n    }(s.default);t.default = c, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e) {\n      if (\"0\" === e || a.default.isUndefined(e)) return 0;var t = e.match(u);return a.default.isNull(t) ? 0 : parseFloat(t[1]);\n    }t.__esModule = !0;var r = n(5),\n        a = o(r),\n        l = { HTMLEvents: [\"change\"], MouseEvents: [\"click\", \"mousemove\", \"mousedown\", \"mouseup\", \"mouseover\"], KeyboardEvents: [\"keydown\"] },\n        s = {};a.default.each(l, function (e, t) {\n      a.default.each(e, function (e) {\n        s[e] = t;\n      });\n    });var u = /(\\d+(\\.\\d+)?)px/,\n        d = { makeSelectable: function (e, t) {\n        void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function () {\n          return !1;\n        } : function () {}, e.style.MozUserSelect = t ? \"auto\" : \"none\", e.style.KhtmlUserSelect = t ? \"auto\" : \"none\", e.unselectable = t ? \"on\" : \"off\");\n      }, makeFullscreen: function (e, t, n) {\n        var o = n,\n            i = t;a.default.isUndefined(i) && (i = !0), a.default.isUndefined(o) && (o = !0), e.style.position = \"absolute\", i && (e.style.left = 0, e.style.right = 0), o && (e.style.top = 0, e.style.bottom = 0);\n      }, fakeEvent: function (e, t, n, o) {\n        var i = n || {},\n            r = s[t];if (!r) throw new Error(\"Event type \" + t + \" not supported.\");var l = document.createEvent(r);switch (r) {case \"MouseEvents\":\n            var u = i.x || i.clientX || 0,\n                d = i.y || i.clientY || 0;l.initMouseEvent(t, i.bubbles || !1, i.cancelable || !0, window, i.clickCount || 1, 0, 0, u, d, !1, !1, !1, !1, 0, null);break;case \"KeyboardEvents\":\n            var c = l.initKeyboardEvent || l.initKeyEvent;a.default.defaults(i, { cancelable: !0, ctrlKey: !1, altKey: !1, shiftKey: !1, metaKey: !1, keyCode: void 0, charCode: void 0 }), c(t, i.bubbles || !1, i.cancelable, window, i.ctrlKey, i.altKey, i.shiftKey, i.metaKey, i.keyCode, i.charCode);break;default:\n            l.initEvent(t, i.bubbles || !1, i.cancelable || !0);}a.default.defaults(l, o), e.dispatchEvent(l);\n      }, bind: function (e, t, n, o) {\n        var i = o || !1;return e.addEventListener ? e.addEventListener(t, n, i) : e.attachEvent && e.attachEvent(\"on\" + t, n), d;\n      }, unbind: function (e, t, n, o) {\n        var i = o || !1;return e.removeEventListener ? e.removeEventListener(t, n, i) : e.detachEvent && e.detachEvent(\"on\" + t, n), d;\n      }, addClass: function (e, t) {\n        if (void 0 === e.className) e.className = t;else if (e.className !== t) {\n          var n = e.className.split(/ +/);n.indexOf(t) === -1 && (n.push(t), e.className = n.join(\" \").replace(/^\\s+/, \"\").replace(/\\s+$/, \"\"));\n        }return d;\n      }, removeClass: function (e, t) {\n        if (t) {\n          if (e.className === t) e.removeAttribute(\"class\");else {\n            var n = e.className.split(/ +/),\n                o = n.indexOf(t);o !== -1 && (n.splice(o, 1), e.className = n.join(\" \"));\n          }\n        } else e.className = void 0;return d;\n      }, hasClass: function (e, t) {\n        return new RegExp(\"(?:^|\\\\s+)\" + t + \"(?:\\\\s+|$)\").test(e.className) || !1;\n      }, getWidth: function (e) {\n        var t = getComputedStyle(e);return i(t[\"border-left-width\"]) + i(t[\"border-right-width\"]) + i(t[\"padding-left\"]) + i(t[\"padding-right\"]) + i(t.width);\n      }, getHeight: function (e) {\n        var t = getComputedStyle(e);return i(t[\"border-top-width\"]) + i(t[\"border-bottom-width\"]) + i(t[\"padding-top\"]) + i(t[\"padding-bottom\"]) + i(t.height);\n      }, getOffset: function (e) {\n        var t = e,\n            n = { left: 0, top: 0 };if (t.offsetParent) do n.left += t.offsetLeft, n.top += t.offsetTop, t = t.offsetParent; while (t);return n;\n      }, isActive: function (e) {\n        return e === document.activeElement && (e.type || e.href);\n      } };t.default = d, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }t.__esModule = !0;var l = n(7),\n        s = o(l),\n        u = n(9),\n        d = o(u),\n        c = n(5),\n        f = o(c),\n        _ = function (e) {\n      function t(n, o, a) {\n        i(this, t);var l = r(this, e.call(this, n, o)),\n            s = a,\n            u = l;if (l.__select = document.createElement(\"select\"), f.default.isArray(s)) {\n          var c = {};f.default.each(s, function (e) {\n            c[e] = e;\n          }), s = c;\n        }return f.default.each(s, function (e, t) {\n          var n = document.createElement(\"option\");n.innerHTML = t, n.setAttribute(\"value\", e), u.__select.appendChild(n);\n        }), l.updateDisplay(), d.default.bind(l.__select, \"change\", function () {\n          var e = this.options[this.selectedIndex].value;u.setValue(e);\n        }), l.domElement.appendChild(l.__select), l;\n      }return a(t, e), t.prototype.setValue = function (t) {\n        var n = e.prototype.setValue.call(this, t);return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), n;\n      }, t.prototype.updateDisplay = function () {\n        return d.default.isActive(this.__select) ? this : (this.__select.value = this.getValue(), e.prototype.updateDisplay.call(this));\n      }, t;\n    }(s.default);t.default = _, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }t.__esModule = !0;var l = n(7),\n        s = o(l),\n        u = n(9),\n        d = o(u),\n        c = function (e) {\n      function t(n, o) {\n        function a() {\n          u.setValue(u.__input.value);\n        }function l() {\n          u.__onFinishChange && u.__onFinishChange.call(u, u.getValue());\n        }i(this, t);var s = r(this, e.call(this, n, o)),\n            u = s;return s.__input = document.createElement(\"input\"), s.__input.setAttribute(\"type\", \"text\"), d.default.bind(s.__input, \"keyup\", a), d.default.bind(s.__input, \"change\", a), d.default.bind(s.__input, \"blur\", l), d.default.bind(s.__input, \"keydown\", function (e) {\n          13 === e.keyCode && this.blur();\n        }), s.updateDisplay(), s.domElement.appendChild(s.__input), s;\n      }return a(t, e), t.prototype.updateDisplay = function () {\n        return d.default.isActive(this.__input) || (this.__input.value = this.getValue()), e.prototype.updateDisplay.call(this);\n      }, t;\n    }(s.default);t.default = c, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }function l(e) {\n      var t = e.toString();return t.indexOf(\".\") > -1 ? t.length - t.indexOf(\".\") - 1 : 0;\n    }t.__esModule = !0;var s = n(7),\n        u = o(s),\n        d = n(5),\n        c = o(d),\n        f = function (e) {\n      function t(n, o, a) {\n        i(this, t);var s = r(this, e.call(this, n, o)),\n            u = a || {};return s.__min = u.min, s.__max = u.max, s.__step = u.step, c.default.isUndefined(s.__step) ? 0 === s.initialValue ? s.__impliedStep = 1 : s.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(s.initialValue)) / Math.LN10)) / 10 : s.__impliedStep = s.__step, s.__precision = l(s.__impliedStep), s;\n      }return a(t, e), t.prototype.setValue = function (t) {\n        var n = t;return void 0 !== this.__min && n < this.__min ? n = this.__min : void 0 !== this.__max && n > this.__max && (n = this.__max), void 0 !== this.__step && n % this.__step !== 0 && (n = Math.round(n / this.__step) * this.__step), e.prototype.setValue.call(this, n);\n      }, t.prototype.min = function (e) {\n        return this.__min = e, this;\n      }, t.prototype.max = function (e) {\n        return this.__max = e, this;\n      }, t.prototype.step = function (e) {\n        return this.__step = e, this.__impliedStep = e, this.__precision = l(e), this;\n      }, t;\n    }(u.default);t.default = f, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }function l(e, t) {\n      var n = Math.pow(10, t);return Math.round(e * n) / n;\n    }t.__esModule = !0;var s = n(12),\n        u = o(s),\n        d = n(9),\n        c = o(d),\n        f = n(5),\n        _ = o(f),\n        p = function (e) {\n      function t(n, o, a) {\n        function l() {\n          var e = parseFloat(m.__input.value);_.default.isNaN(e) || m.setValue(e);\n        }function s() {\n          m.__onFinishChange && m.__onFinishChange.call(m, m.getValue());\n        }function u() {\n          s();\n        }function d(e) {\n          var t = b - e.clientY;m.setValue(m.getValue() + t * m.__impliedStep), b = e.clientY;\n        }function f() {\n          c.default.unbind(window, \"mousemove\", d), c.default.unbind(window, \"mouseup\", f), s();\n        }function p(e) {\n          c.default.bind(window, \"mousemove\", d), c.default.bind(window, \"mouseup\", f), b = e.clientY;\n        }i(this, t);var h = r(this, e.call(this, n, o, a));h.__truncationSuspended = !1;var m = h,\n            b = void 0;return h.__input = document.createElement(\"input\"), h.__input.setAttribute(\"type\", \"text\"), c.default.bind(h.__input, \"change\", l), c.default.bind(h.__input, \"blur\", u), c.default.bind(h.__input, \"mousedown\", p), c.default.bind(h.__input, \"keydown\", function (e) {\n          13 === e.keyCode && (m.__truncationSuspended = !0, this.blur(), m.__truncationSuspended = !1, s());\n        }), h.updateDisplay(), h.domElement.appendChild(h.__input), h;\n      }return a(t, e), t.prototype.updateDisplay = function () {\n        return this.__input.value = this.__truncationSuspended ? this.getValue() : l(this.getValue(), this.__precision), e.prototype.updateDisplay.call(this);\n      }, t;\n    }(u.default);t.default = p, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }function l(e, t, n, o, i) {\n      return o + (i - o) * ((e - t) / (n - t));\n    }t.__esModule = !0;var s = n(12),\n        u = o(s),\n        d = n(9),\n        c = o(d),\n        f = function (e) {\n      function t(n, o, a, s, u) {\n        function d(e) {\n          document.activeElement.blur(), c.default.bind(window, \"mousemove\", f), c.default.bind(window, \"mouseup\", _), f(e);\n        }function f(e) {\n          e.preventDefault();var t = h.__background.getBoundingClientRect();return h.setValue(l(e.clientX, t.left, t.right, h.__min, h.__max)), !1;\n        }function _() {\n          c.default.unbind(window, \"mousemove\", f), c.default.unbind(window, \"mouseup\", _), h.__onFinishChange && h.__onFinishChange.call(h, h.getValue());\n        }i(this, t);var p = r(this, e.call(this, n, o, { min: a, max: s, step: u })),\n            h = p;return p.__background = document.createElement(\"div\"), p.__foreground = document.createElement(\"div\"), c.default.bind(p.__background, \"mousedown\", d), c.default.addClass(p.__background, \"slider\"), c.default.addClass(p.__foreground, \"slider-fg\"), p.updateDisplay(), p.__background.appendChild(p.__foreground), p.domElement.appendChild(p.__background), p;\n      }return a(t, e), t.prototype.updateDisplay = function () {\n        var t = (this.getValue() - this.__min) / (this.__max - this.__min);return this.__foreground.style.width = 100 * t + \"%\", e.prototype.updateDisplay.call(this);\n      }, t;\n    }(u.default);t.default = f, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }t.__esModule = !0;var l = n(7),\n        s = o(l),\n        u = n(9),\n        d = o(u),\n        c = function (e) {\n      function t(n, o, a) {\n        i(this, t);var l = r(this, e.call(this, n, o)),\n            s = l;return l.__button = document.createElement(\"div\"), l.__button.innerHTML = void 0 === a ? \"Fire\" : a, d.default.bind(l.__button, \"click\", function (e) {\n          return e.preventDefault(), s.fire(), !1;\n        }), d.default.addClass(l.__button, \"button\"), l.domElement.appendChild(l.__button), l;\n      }return a(t, e), t.prototype.fire = function () {\n        this.__onChange && this.__onChange.call(this), this.getValue().call(this.object), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue());\n      }, t;\n    }(s.default);t.default = c, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }function r(e, t) {\n      if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n    }function a(e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n    }function l(e, t, n, o) {\n      e.style.background = \"\", g.default.each(y, function (i) {\n        e.style.cssText += \"background: \" + i + \"linear-gradient(\" + t + \", \" + n + \" 0%, \" + o + \" 100%); \";\n      });\n    }function s(e) {\n      e.style.background = \"\", e.style.cssText += \"background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);\", e.style.cssText += \"background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\", e.style.cssText += \"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\", e.style.cssText += \"background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\", e.style.cssText += \"background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\";\n    }t.__esModule = !0;var u = n(7),\n        d = o(u),\n        c = n(9),\n        f = o(c),\n        _ = n(2),\n        p = o(_),\n        h = n(3),\n        m = o(h),\n        b = n(5),\n        g = o(b),\n        v = function (e) {\n      function t(n, o) {\n        function a(e) {\n          h(e), f.default.bind(window, \"mousemove\", h), f.default.bind(window, \"mouseup\", u);\n        }function u() {\n          f.default.unbind(window, \"mousemove\", h), f.default.unbind(window, \"mouseup\", u), _();\n        }function d() {\n          var e = (0, m.default)(this.value);e !== !1 ? (y.__color.__state = e, y.setValue(y.__color.toOriginal())) : this.value = y.__color.toString();\n        }function c() {\n          f.default.unbind(window, \"mousemove\", b), f.default.unbind(window, \"mouseup\", c), _();\n        }function _() {\n          y.__onFinishChange && y.__onFinishChange.call(y, y.__color.toOriginal());\n        }function h(e) {\n          e.preventDefault();var t = y.__saturation_field.getBoundingClientRect(),\n              n = (e.clientX - t.left) / (t.right - t.left),\n              o = 1 - (e.clientY - t.top) / (t.bottom - t.top);return o > 1 ? o = 1 : o < 0 && (o = 0), n > 1 ? n = 1 : n < 0 && (n = 0), y.__color.v = o, y.__color.s = n, y.setValue(y.__color.toOriginal()), !1;\n        }function b(e) {\n          e.preventDefault();var t = y.__hue_field.getBoundingClientRect(),\n              n = 1 - (e.clientY - t.top) / (t.bottom - t.top);return n > 1 ? n = 1 : n < 0 && (n = 0), y.__color.h = 360 * n, y.setValue(y.__color.toOriginal()), !1;\n        }i(this, t);var v = r(this, e.call(this, n, o));v.__color = new p.default(v.getValue()), v.__temp = new p.default(0);var y = v;v.domElement = document.createElement(\"div\"), f.default.makeSelectable(v.domElement, !1), v.__selector = document.createElement(\"div\"), v.__selector.className = \"selector\", v.__saturation_field = document.createElement(\"div\"), v.__saturation_field.className = \"saturation-field\", v.__field_knob = document.createElement(\"div\"), v.__field_knob.className = \"field-knob\", v.__field_knob_border = \"2px solid \", v.__hue_knob = document.createElement(\"div\"), v.__hue_knob.className = \"hue-knob\", v.__hue_field = document.createElement(\"div\"), v.__hue_field.className = \"hue-field\", v.__input = document.createElement(\"input\"), v.__input.type = \"text\", v.__input_textShadow = \"0 1px 1px \", f.default.bind(v.__input, \"keydown\", function (e) {\n          13 === e.keyCode && d.call(this);\n        }), f.default.bind(v.__input, \"blur\", d), f.default.bind(v.__selector, \"mousedown\", function () {\n          f.default.addClass(this, \"drag\").bind(window, \"mouseup\", function () {\n            f.default.removeClass(y.__selector, \"drag\");\n          });\n        });var w = document.createElement(\"div\");return g.default.extend(v.__selector.style, { width: \"122px\", height: \"102px\", padding: \"3px\", backgroundColor: \"#222\", boxShadow: \"0px 1px 3px rgba(0,0,0,0.3)\" }), g.default.extend(v.__field_knob.style, { position: \"absolute\", width: \"12px\", height: \"12px\", border: v.__field_knob_border + (v.__color.v < .5 ? \"#fff\" : \"#000\"), boxShadow: \"0px 1px 3px rgba(0,0,0,0.5)\", borderRadius: \"12px\", zIndex: 1 }), g.default.extend(v.__hue_knob.style, { position: \"absolute\", width: \"15px\", height: \"2px\", borderRight: \"4px solid #fff\", zIndex: 1 }), g.default.extend(v.__saturation_field.style, { width: \"100px\", height: \"100px\", border: \"1px solid #555\", marginRight: \"3px\", display: \"inline-block\", cursor: \"pointer\" }), g.default.extend(w.style, { width: \"100%\", height: \"100%\", background: \"none\" }), l(w, \"top\", \"rgba(0,0,0,0)\", \"#000\"), g.default.extend(v.__hue_field.style, { width: \"15px\", height: \"100px\", border: \"1px solid #555\", cursor: \"ns-resize\", position: \"absolute\", top: \"3px\", right: \"3px\" }), s(v.__hue_field), g.default.extend(v.__input.style, { outline: \"none\", textAlign: \"center\", color: \"#fff\", border: 0, fontWeight: \"bold\", textShadow: v.__input_textShadow + \"rgba(0,0,0,0.7)\" }), f.default.bind(v.__saturation_field, \"mousedown\", a), f.default.bind(v.__field_knob, \"mousedown\", a), f.default.bind(v.__hue_field, \"mousedown\", function (e) {\n          b(e), f.default.bind(window, \"mousemove\", b), f.default.bind(window, \"mouseup\", c);\n        }), v.__saturation_field.appendChild(w), v.__selector.appendChild(v.__field_knob), v.__selector.appendChild(v.__saturation_field), v.__selector.appendChild(v.__hue_field), v.__hue_field.appendChild(v.__hue_knob), v.domElement.appendChild(v.__input), v.domElement.appendChild(v.__selector), v.updateDisplay(), v;\n      }return a(t, e), t.prototype.updateDisplay = function () {\n        var e = (0, m.default)(this.getValue());if (e !== !1) {\n          var t = !1;g.default.each(p.default.COMPONENTS, function (n) {\n            if (!g.default.isUndefined(e[n]) && !g.default.isUndefined(this.__color.__state[n]) && e[n] !== this.__color.__state[n]) return t = !0, {};\n          }, this), t && g.default.extend(this.__color.__state, e);\n        }g.default.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;var n = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0,\n            o = 255 - n;g.default.extend(this.__field_knob.style, { marginLeft: 100 * this.__color.s - 7 + \"px\", marginTop: 100 * (1 - this.__color.v) - 7 + \"px\", backgroundColor: this.__temp.toHexString(), border: this.__field_knob_border + \"rgb(\" + n + \",\" + n + \",\" + n + \")\" }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + \"px\", this.__temp.s = 1, this.__temp.v = 1, l(this.__saturation_field, \"left\", \"#fff\", this.__temp.toHexString()), this.__input.value = this.__color.toString(), g.default.extend(this.__input.style, { backgroundColor: this.__color.toHexString(), color: \"rgb(\" + n + \",\" + n + \",\" + n + \")\", textShadow: this.__input_textShadow + \"rgba(\" + o + \",\" + o + \",\" + o + \",.7)\" });\n      }, t;\n    }(d.default),\n        y = [\"-moz-\", \"-o-\", \"-webkit-\", \"-ms-\", \"\"];t.default = v, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t, n) {\n      var o = document.createElement(\"li\");return t && o.appendChild(t), n ? e.__ul.insertBefore(o, n) : e.__ul.appendChild(o), e.onResize(), o;\n    }function r(e, t) {\n      var n = e.__preset_select[e.__preset_select.selectedIndex];t ? n.innerHTML = n.value + \"*\" : n.innerHTML = n.value;\n    }function a(e, t, n) {\n      if (n.__li = t, n.__gui = e, U.default.extend(n, { options: function (t) {\n          if (arguments.length > 1) {\n            var o = n.__li.nextElementSibling;return n.remove(), s(e, n.object, n.property, { before: o, factoryArgs: [U.default.toArray(arguments)] });\n          }if (U.default.isArray(t) || U.default.isObject(t)) {\n            var i = n.__li.nextElementSibling;return n.remove(), s(e, n.object, n.property, { before: i, factoryArgs: [t] });\n          }\n        }, name: function (e) {\n          return n.__li.firstElementChild.firstElementChild.innerHTML = e, n;\n        }, listen: function () {\n          return n.__gui.listen(n), n;\n        }, remove: function () {\n          return n.__gui.remove(n), n;\n        } }), n instanceof N.default) {\n        var o = new B.default(n.object, n.property, {\n          min: n.__min, max: n.__max, step: n.__step });U.default.each([\"updateDisplay\", \"onChange\", \"onFinishChange\", \"step\"], function (e) {\n          var t = n[e],\n              i = o[e];n[e] = o[e] = function () {\n            var e = Array.prototype.slice.call(arguments);return i.apply(o, e), t.apply(n, e);\n          };\n        }), z.default.addClass(t, \"has-slider\"), n.domElement.insertBefore(o.domElement, n.domElement.firstElementChild);\n      } else if (n instanceof B.default) {\n        var i = function (t) {\n          if (U.default.isNumber(n.__min) && U.default.isNumber(n.__max)) {\n            var o = n.__li.firstElementChild.firstElementChild.innerHTML,\n                i = n.__gui.__listening.indexOf(n) > -1;n.remove();var r = s(e, n.object, n.property, { before: n.__li.nextElementSibling, factoryArgs: [n.__min, n.__max, n.__step] });return r.name(o), i && r.listen(), r;\n          }return t;\n        };n.min = U.default.compose(i, n.min), n.max = U.default.compose(i, n.max);\n      } else n instanceof O.default ? (z.default.bind(t, \"click\", function () {\n        z.default.fakeEvent(n.__checkbox, \"click\");\n      }), z.default.bind(n.__checkbox, \"click\", function (e) {\n        e.stopPropagation();\n      })) : n instanceof R.default ? (z.default.bind(t, \"click\", function () {\n        z.default.fakeEvent(n.__button, \"click\");\n      }), z.default.bind(t, \"mouseover\", function () {\n        z.default.addClass(n.__button, \"hover\");\n      }), z.default.bind(t, \"mouseout\", function () {\n        z.default.removeClass(n.__button, \"hover\");\n      })) : n instanceof j.default && (z.default.addClass(t, \"color\"), n.updateDisplay = U.default.compose(function (e) {\n        return t.style.borderLeftColor = n.__color.toString(), e;\n      }, n.updateDisplay), n.updateDisplay());n.setValue = U.default.compose(function (t) {\n        return e.getRoot().__preset_select && n.isModified() && r(e.getRoot(), !0), t;\n      }, n.setValue);\n    }function l(e, t) {\n      var n = e.getRoot(),\n          o = n.__rememberedObjects.indexOf(t.object);if (o !== -1) {\n        var i = n.__rememberedObjectIndecesToControllers[o];if (void 0 === i && (i = {}, n.__rememberedObjectIndecesToControllers[o] = i), i[t.property] = t, n.load && n.load.remembered) {\n          var r = n.load.remembered,\n              a = void 0;if (r[e.preset]) a = r[e.preset];else {\n            if (!r[Q]) return;a = r[Q];\n          }if (a[o] && void 0 !== a[o][t.property]) {\n            var l = a[o][t.property];t.initialValue = l, t.setValue(l);\n          }\n        }\n      }\n    }function s(e, t, n, o) {\n      if (void 0 === t[n]) throw new Error('Object \"' + t + '\" has no property \"' + n + '\"');var r = void 0;if (o.color) r = new j.default(t, n);else {\n        var s = [t, n].concat(o.factoryArgs);r = C.default.apply(e, s);\n      }o.before instanceof S.default && (o.before = o.before.__li), l(e, r), z.default.addClass(r.domElement, \"c\");var u = document.createElement(\"span\");z.default.addClass(u, \"property-name\"), u.innerHTML = r.property;var d = document.createElement(\"div\");d.appendChild(u), d.appendChild(r.domElement);var c = i(e, d, o.before);return z.default.addClass(c, oe.CLASS_CONTROLLER_ROW), r instanceof j.default ? z.default.addClass(c, \"color\") : z.default.addClass(c, g(r.getValue())), a(e, c, r), e.__controllers.push(r), r;\n    }function u(e, t) {\n      return document.location.href + \".\" + t;\n    }function d(e, t, n) {\n      var o = document.createElement(\"option\");o.innerHTML = t, o.value = t, e.__preset_select.appendChild(o), n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1);\n    }function c(e, t) {\n      t.style.display = e.useLocalStorage ? \"block\" : \"none\";\n    }function f(e) {\n      var t = e.__save_row = document.createElement(\"li\");z.default.addClass(e.domElement, \"has-save\"), e.__ul.insertBefore(t, e.__ul.firstChild), z.default.addClass(t, \"save-row\");var n = document.createElement(\"span\");n.innerHTML = \"&nbsp;\", z.default.addClass(n, \"button gears\");var o = document.createElement(\"span\");o.innerHTML = \"Save\", z.default.addClass(o, \"button\"), z.default.addClass(o, \"save\");var i = document.createElement(\"span\");i.innerHTML = \"New\", z.default.addClass(i, \"button\"), z.default.addClass(i, \"save-as\");var r = document.createElement(\"span\");r.innerHTML = \"Revert\", z.default.addClass(r, \"button\"), z.default.addClass(r, \"revert\");var a = e.__preset_select = document.createElement(\"select\");if (e.load && e.load.remembered ? U.default.each(e.load.remembered, function (t, n) {\n        d(e, n, n === e.preset);\n      }) : d(e, Q, !1), z.default.bind(a, \"change\", function () {\n        for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].innerHTML = e.__preset_select[t].value;e.preset = this.value;\n      }), t.appendChild(a), t.appendChild(n), t.appendChild(o), t.appendChild(i), t.appendChild(r), q) {\n        var l = document.getElementById(\"dg-local-explain\"),\n            s = document.getElementById(\"dg-local-storage\"),\n            f = document.getElementById(\"dg-save-locally\");f.style.display = \"block\", \"true\" === localStorage.getItem(u(e, \"isLocal\")) && s.setAttribute(\"checked\", \"checked\"), c(e, l), z.default.bind(s, \"change\", function () {\n          e.useLocalStorage = !e.useLocalStorage, c(e, l);\n        });\n      }var _ = document.getElementById(\"dg-new-constructor\");z.default.bind(_, \"keydown\", function (e) {\n        !e.metaKey || 67 !== e.which && 67 !== e.keyCode || Z.hide();\n      }), z.default.bind(n, \"click\", function () {\n        _.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2), Z.show(), _.focus(), _.select();\n      }), z.default.bind(o, \"click\", function () {\n        e.save();\n      }), z.default.bind(i, \"click\", function () {\n        var t = prompt(\"Enter a new preset name.\");t && e.saveAs(t);\n      }), z.default.bind(r, \"click\", function () {\n        e.revert();\n      });\n    }function _(e) {\n      function t(t) {\n        return t.preventDefault(), e.width += i - t.clientX, e.onResize(), i = t.clientX, !1;\n      }function n() {\n        z.default.removeClass(e.__closeButton, oe.CLASS_DRAG), z.default.unbind(window, \"mousemove\", t), z.default.unbind(window, \"mouseup\", n);\n      }function o(o) {\n        return o.preventDefault(), i = o.clientX, z.default.addClass(e.__closeButton, oe.CLASS_DRAG), z.default.bind(window, \"mousemove\", t), z.default.bind(window, \"mouseup\", n), !1;\n      }var i = void 0;e.__resize_handle = document.createElement(\"div\"), U.default.extend(e.__resize_handle.style, { width: \"6px\", marginLeft: \"-3px\", height: \"200px\", cursor: \"ew-resize\", position: \"absolute\" }), z.default.bind(e.__resize_handle, \"mousedown\", o), z.default.bind(e.__closeButton, \"mousedown\", o), e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild);\n    }function p(e, t) {\n      e.domElement.style.width = t + \"px\", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + \"px\"), e.__closeButton && (e.__closeButton.style.width = t + \"px\");\n    }function h(e, t) {\n      var n = {};return U.default.each(e.__rememberedObjects, function (o, i) {\n        var r = {},\n            a = e.__rememberedObjectIndecesToControllers[i];U.default.each(a, function (e, n) {\n          r[n] = t ? e.initialValue : e.getValue();\n        }), n[i] = r;\n      }), n;\n    }function m(e) {\n      for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].value === e.preset && (e.__preset_select.selectedIndex = t);\n    }function b(e) {\n      0 !== e.length && D.default.call(window, function () {\n        b(e);\n      }), U.default.each(e, function (e) {\n        e.updateDisplay();\n      });\n    }t.__esModule = !0;var g = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n      return typeof e;\n    } : function (e) {\n      return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n    },\n        v = n(18),\n        y = o(v),\n        w = n(19),\n        x = o(w),\n        E = n(20),\n        C = o(E),\n        A = n(7),\n        S = o(A),\n        k = n(8),\n        O = o(k),\n        T = n(15),\n        R = o(T),\n        L = n(13),\n        B = o(L),\n        M = n(14),\n        N = o(M),\n        H = n(16),\n        j = o(H),\n        P = n(21),\n        D = o(P),\n        V = n(22),\n        F = o(V),\n        I = n(9),\n        z = o(I),\n        G = n(5),\n        U = o(G),\n        X = n(23),\n        K = o(X);y.default.inject(K.default);var Y = \"dg\",\n        J = 72,\n        W = 20,\n        Q = \"Default\",\n        q = function () {\n      try {\n        return \"localStorage\" in window && null !== window.localStorage;\n      } catch (e) {\n        return !1;\n      }\n    }(),\n        Z = void 0,\n        $ = !0,\n        ee = void 0,\n        te = !1,\n        ne = [],\n        oe = function e(t) {\n      function n() {\n        var e = o.getRoot();e.width += 1, U.default.defer(function () {\n          e.width -= 1;\n        });\n      }var o = this,\n          r = t || {};this.domElement = document.createElement(\"div\"), this.__ul = document.createElement(\"ul\"), this.domElement.appendChild(this.__ul), z.default.addClass(this.domElement, Y), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], r = U.default.defaults(r, { closeOnTop: !1, autoPlace: !0, width: e.DEFAULT_WIDTH }), r = U.default.defaults(r, { resizable: r.autoPlace, hideable: r.autoPlace }), U.default.isUndefined(r.load) ? r.load = { preset: Q } : r.preset && (r.load.preset = r.preset), U.default.isUndefined(r.parent) && r.hideable && ne.push(this), r.resizable = U.default.isUndefined(r.parent) && r.resizable, r.autoPlace && U.default.isUndefined(r.scrollable) && (r.scrollable = !0);var a = q && \"true\" === localStorage.getItem(u(this, \"isLocal\")),\n          l = void 0;if (Object.defineProperties(this, { parent: { get: function () {\n            return r.parent;\n          } }, scrollable: { get: function () {\n            return r.scrollable;\n          } }, autoPlace: { get: function () {\n            return r.autoPlace;\n          } }, closeOnTop: { get: function () {\n            return r.closeOnTop;\n          } }, preset: { get: function () {\n            return o.parent ? o.getRoot().preset : r.load.preset;\n          }, set: function (e) {\n            o.parent ? o.getRoot().preset = e : r.load.preset = e, m(this), o.revert();\n          } }, width: { get: function () {\n            return r.width;\n          }, set: function (e) {\n            r.width = e, p(o, e);\n          } }, name: { get: function () {\n            return r.name;\n          }, set: function (e) {\n            r.name = e, titleRowName && (titleRowName.innerHTML = r.name);\n          } }, closed: { get: function () {\n            return r.closed;\n          }, set: function (t) {\n            r.closed = t, r.closed ? z.default.addClass(o.__ul, e.CLASS_CLOSED) : z.default.removeClass(o.__ul, e.CLASS_CLOSED), this.onResize(), o.__closeButton && (o.__closeButton.innerHTML = t ? e.TEXT_OPEN : e.TEXT_CLOSED);\n          } }, load: { get: function () {\n            return r.load;\n          } }, useLocalStorage: { get: function () {\n            return a;\n          }, set: function (e) {\n            q && (a = e, e ? z.default.bind(window, \"unload\", l) : z.default.unbind(window, \"unload\", l), localStorage.setItem(u(o, \"isLocal\"), e));\n          } } }), U.default.isUndefined(r.parent)) {\n        if (r.closed = !1, z.default.addClass(this.domElement, e.CLASS_MAIN), z.default.makeSelectable(this.domElement, !1), q && a) {\n          o.useLocalStorage = !0;var s = localStorage.getItem(u(this, \"gui\"));s && (r.load = JSON.parse(s));\n        }this.__closeButton = document.createElement(\"div\"), this.__closeButton.innerHTML = e.TEXT_CLOSED, z.default.addClass(this.__closeButton, e.CLASS_CLOSE_BUTTON), r.closeOnTop ? (z.default.addClass(this.__closeButton, e.CLASS_CLOSE_TOP), this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0])) : (z.default.addClass(this.__closeButton, e.CLASS_CLOSE_BOTTOM), this.domElement.appendChild(this.__closeButton)), z.default.bind(this.__closeButton, \"click\", function () {\n          o.closed = !o.closed;\n        });\n      } else {\n        void 0 === r.closed && (r.closed = !0);var d = document.createTextNode(r.name);z.default.addClass(d, \"controller-name\");var c = i(o, d),\n            f = function (e) {\n          return e.preventDefault(), o.closed = !o.closed, !1;\n        };z.default.addClass(this.__ul, e.CLASS_CLOSED), z.default.addClass(c, \"title\"), z.default.bind(c, \"click\", f), r.closed || (this.closed = !1);\n      }r.autoPlace && (U.default.isUndefined(r.parent) && ($ && (ee = document.createElement(\"div\"), z.default.addClass(ee, Y), z.default.addClass(ee, e.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(ee), $ = !1), ee.appendChild(this.domElement), z.default.addClass(this.domElement, e.CLASS_AUTO_PLACE)), this.parent || p(o, r.width)), this.__resizeHandler = function () {\n        o.onResizeDebounced();\n      }, z.default.bind(window, \"resize\", this.__resizeHandler), z.default.bind(this.__ul, \"webkitTransitionEnd\", this.__resizeHandler), z.default.bind(this.__ul, \"transitionend\", this.__resizeHandler), z.default.bind(this.__ul, \"oTransitionEnd\", this.__resizeHandler), this.onResize(), r.resizable && _(this), l = function () {\n        q && \"true\" === localStorage.getItem(u(o, \"isLocal\")) && localStorage.setItem(u(o, \"gui\"), JSON.stringify(o.getSaveObject()));\n      }, this.saveToLocalStorageIfPossible = l, r.parent || n();\n    };oe.toggleHide = function () {\n      te = !te, U.default.each(ne, function (e) {\n        e.domElement.style.display = te ? \"none\" : \"\";\n      });\n    }, oe.CLASS_AUTO_PLACE = \"a\", oe.CLASS_AUTO_PLACE_CONTAINER = \"ac\", oe.CLASS_MAIN = \"main\", oe.CLASS_CONTROLLER_ROW = \"cr\", oe.CLASS_TOO_TALL = \"taller-than-window\", oe.CLASS_CLOSED = \"closed\", oe.CLASS_CLOSE_BUTTON = \"close-button\", oe.CLASS_CLOSE_TOP = \"close-top\", oe.CLASS_CLOSE_BOTTOM = \"close-bottom\", oe.CLASS_DRAG = \"drag\", oe.DEFAULT_WIDTH = 245, oe.TEXT_CLOSED = \"Close Controls\", oe.TEXT_OPEN = \"Open Controls\", oe._keydownHandler = function (e) {\n      \"text\" === document.activeElement.type || e.which !== J && e.keyCode !== J || oe.toggleHide();\n    }, z.default.bind(window, \"keydown\", oe._keydownHandler, !1), U.default.extend(oe.prototype, { add: function (e, t) {\n        return s(this, e, t, { factoryArgs: Array.prototype.slice.call(arguments, 2) });\n      }, addColor: function (e, t) {\n        return s(this, e, t, { color: !0 });\n      }, remove: function (e) {\n        this.__ul.removeChild(e.__li), this.__controllers.splice(this.__controllers.indexOf(e), 1);var t = this;U.default.defer(function () {\n          t.onResize();\n        });\n      }, destroy: function () {\n        this.autoPlace && ee.removeChild(this.domElement), z.default.unbind(window, \"keydown\", oe._keydownHandler, !1), z.default.unbind(window, \"resize\", this.__resizeHandler), this.saveToLocalStorageIfPossible && z.default.unbind(window, \"unload\", this.saveToLocalStorageIfPossible);\n      }, addFolder: function (e) {\n        if (void 0 !== this.__folders[e]) throw new Error('You already have a folder in this GUI by the name \"' + e + '\"');var t = { name: e, parent: this };t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);var n = new oe(t);this.__folders[e] = n;var o = i(this, n.domElement);return z.default.addClass(o, \"folder\"), n;\n      }, open: function () {\n        this.closed = !1;\n      }, close: function () {\n        this.closed = !0;\n      }, onResize: function () {\n        var e = this.getRoot();if (e.scrollable) {\n          var t = z.default.getOffset(e.__ul).top,\n              n = 0;U.default.each(e.__ul.childNodes, function (t) {\n            e.autoPlace && t === e.__save_row || (n += z.default.getHeight(t));\n          }), window.innerHeight - t - W < n ? (z.default.addClass(e.domElement, oe.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - W + \"px\") : (z.default.removeClass(e.domElement, oe.CLASS_TOO_TALL), e.__ul.style.height = \"auto\");\n        }e.__resize_handle && U.default.defer(function () {\n          e.__resize_handle.style.height = e.__ul.offsetHeight + \"px\";\n        }), e.__closeButton && (e.__closeButton.style.width = e.width + \"px\");\n      }, onResizeDebounced: U.default.debounce(function () {\n        this.onResize();\n      }, 50), remember: function () {\n        if (U.default.isUndefined(Z) && (Z = new F.default(), Z.domElement.innerHTML = x.default), this.parent) throw new Error(\"You can only call remember on a top level GUI.\");var e = this;U.default.each(Array.prototype.slice.call(arguments), function (t) {\n          0 === e.__rememberedObjects.length && f(e), e.__rememberedObjects.indexOf(t) === -1 && e.__rememberedObjects.push(t);\n        }), this.autoPlace && p(this, this.width);\n      }, getRoot: function () {\n        for (var e = this; e.parent;) e = e.parent;return e;\n      }, getSaveObject: function () {\n        var e = this.load;return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = h(this)), e.folders = {}, U.default.each(this.__folders, function (t, n) {\n          e.folders[n] = t.getSaveObject();\n        }), e;\n      }, save: function () {\n        this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = h(this), r(this, !1), this.saveToLocalStorageIfPossible();\n      }, saveAs: function (e) {\n        this.load.remembered || (this.load.remembered = {}, this.load.remembered[Q] = h(this, !0)), this.load.remembered[e] = h(this), this.preset = e, d(this, e, !0), this.saveToLocalStorageIfPossible();\n      }, revert: function (e) {\n        U.default.each(this.__controllers, function (t) {\n          this.getRoot().load.remembered ? l(e || this.getRoot(), t) : t.setValue(t.initialValue), t.__onFinishChange && t.__onFinishChange.call(t, t.getValue());\n        }, this), U.default.each(this.__folders, function (e) {\n          e.revert(e);\n        }), e || r(this.getRoot(), !1);\n      }, listen: function (e) {\n        var t = 0 === this.__listening.length;this.__listening.push(e), t && b(this.__listening);\n      }, updateDisplay: function () {\n        U.default.each(this.__controllers, function (e) {\n          e.updateDisplay();\n        }), U.default.each(this.__folders, function (e) {\n          e.updateDisplay();\n        });\n      } }), t.default = oe, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    e.exports = { load: function (e, t) {\n        var n = t || document,\n            o = n.createElement(\"link\");o.type = \"text/css\", o.rel = \"stylesheet\", o.href = e, n.getElementsByTagName(\"head\")[0].appendChild(o);\n      }, inject: function (e, t) {\n        var n = t || document,\n            o = document.createElement(\"style\");o.type = \"text/css\", o.innerHTML = e;var i = n.getElementsByTagName(\"head\")[0];try {\n          i.appendChild(o);\n        } catch (e) {}\n      } };\n  }, function (e, t) {\n    e.exports = \"<div id=dg-save class=\\\"dg dialogue\\\"> Here's the new load parameter for your <code>GUI</code>'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>\";\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }t.__esModule = !0;var i = n(10),\n        r = o(i),\n        a = n(13),\n        l = o(a),\n        s = n(14),\n        u = o(s),\n        d = n(11),\n        c = o(d),\n        f = n(15),\n        _ = o(f),\n        p = n(8),\n        h = o(p),\n        m = n(5),\n        b = o(m),\n        g = function (e, t) {\n      var n = e[t];return b.default.isArray(arguments[2]) || b.default.isObject(arguments[2]) ? new r.default(e, t, arguments[2]) : b.default.isNumber(n) ? b.default.isNumber(arguments[2]) && b.default.isNumber(arguments[3]) ? b.default.isNumber(arguments[4]) ? new u.default(e, t, arguments[2], arguments[3], arguments[4]) : new u.default(e, t, arguments[2], arguments[3]) : b.default.isNumber(arguments[4]) ? new l.default(e, t, { min: arguments[2], max: arguments[3], step: arguments[4] }) : new l.default(e, t, { min: arguments[2], max: arguments[3] }) : b.default.isString(n) ? new c.default(e, t) : b.default.isFunction(n) ? new _.default(e, t, \"\") : b.default.isBoolean(n) ? new h.default(e, t) : null;\n    };t.default = g, e.exports = t.default;\n  }, function (e, t) {\n    \"use strict\";\n    function n(e) {\n      setTimeout(e, 1e3 / 60);\n    }t.__esModule = !0, t.default = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || n, e.exports = t.default;\n  }, function (e, t, n) {\n    \"use strict\";\n    function o(e) {\n      return e && e.__esModule ? e : { default: e };\n    }function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }t.__esModule = !0;var r = n(9),\n        a = o(r),\n        l = n(5),\n        s = o(l),\n        u = function () {\n      function e() {\n        i(this, e), this.backgroundElement = document.createElement(\"div\"), s.default.extend(this.backgroundElement.style, { backgroundColor: \"rgba(0,0,0,0.8)\", top: 0, left: 0, display: \"none\", zIndex: \"1000\", opacity: 0, WebkitTransition: \"opacity 0.2s linear\", transition: \"opacity 0.2s linear\" }), a.default.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = \"fixed\", this.domElement = document.createElement(\"div\"), s.default.extend(this.domElement.style, { position: \"fixed\", display: \"none\", zIndex: \"1001\", opacity: 0, WebkitTransition: \"-webkit-transform 0.2s ease-out, opacity 0.2s linear\", transition: \"transform 0.2s ease-out, opacity 0.2s linear\" }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);var t = this;a.default.bind(this.backgroundElement, \"click\", function () {\n          t.hide();\n        });\n      }return e.prototype.show = function () {\n        var e = this;this.backgroundElement.style.display = \"block\", this.domElement.style.display = \"block\", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = \"scale(1.1)\", this.layout(), s.default.defer(function () {\n          e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = \"scale(1)\";\n        });\n      }, e.prototype.hide = function e() {\n        var t = this,\n            e = function e() {\n          t.domElement.style.display = \"none\", t.backgroundElement.style.display = \"none\", a.default.unbind(t.domElement, \"webkitTransitionEnd\", e), a.default.unbind(t.domElement, \"transitionend\", e), a.default.unbind(t.domElement, \"oTransitionEnd\", e);\n        };a.default.bind(this.domElement, \"webkitTransitionEnd\", e), a.default.bind(this.domElement, \"transitionend\", e), a.default.bind(this.domElement, \"oTransitionEnd\", e), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = \"scale(1.1)\";\n      }, e.prototype.layout = function () {\n        this.domElement.style.left = window.innerWidth / 2 - a.default.getWidth(this.domElement) / 2 + \"px\", this.domElement.style.top = window.innerHeight / 2 - a.default.getHeight(this.domElement) / 2 + \"px\";\n      }, e;\n    }();t.default = u, e.exports = t.default;\n  }, function (e, t, n) {\n    t = e.exports = n(24)(), t.push([e.id, \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{transition:height .1s ease-out;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\", \"\"]);\n  }, function (e, t) {\n    e.exports = function () {\n      var e = [];return e.toString = function () {\n        for (var e = [], t = 0; t < this.length; t++) {\n          var n = this[t];n[2] ? e.push(\"@media \" + n[2] + \"{\" + n[1] + \"}\") : e.push(n[1]);\n        }return e.join(\"\");\n      }, e.i = function (t, n) {\n        \"string\" == typeof t && (t = [[null, t, \"\"]]);for (var o = {}, i = 0; i < this.length; i++) {\n          var r = this[i][0];\"number\" == typeof r && (o[r] = !0);\n        }for (i = 0; i < t.length; i++) {\n          var a = t[i];\"number\" == typeof a[0] && o[a[0]] || (n && !a[2] ? a[2] = n : n && (a[2] = \"(\" + a[2] + \") and (\" + n + \")\"), e.push(a));\n        }\n      }, e;\n    };\n  }]);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9saWIvZGF0Lmd1aS5taW4uanM/NjViYSJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24gKGUsIHQpIHtcbiAgXCJvYmplY3RcIiA9PSB0eXBlb2YgZXhwb3J0cyAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA9IHQoKSA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoW10sIHQpIDogXCJvYmplY3RcIiA9PSB0eXBlb2YgZXhwb3J0cyA/IGV4cG9ydHMuZGF0ID0gdCgpIDogZS5kYXQgPSB0KCk7XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgZnVuY3Rpb24gdChvKSB7XG4gICAgICBpZiAobltvXSkgcmV0dXJuIG5bb10uZXhwb3J0czt2YXIgaSA9IG5bb10gPSB7IGV4cG9ydHM6IHt9LCBpZDogbywgbG9hZGVkOiAhMSB9O3JldHVybiBlW29dLmNhbGwoaS5leHBvcnRzLCBpLCBpLmV4cG9ydHMsIHQpLCBpLmxvYWRlZCA9ICEwLCBpLmV4cG9ydHM7XG4gICAgfXZhciBuID0ge307cmV0dXJuIHQubSA9IGUsIHQuYyA9IG4sIHQucCA9IFwiXCIsIHQoMCk7XG4gIH0oW2Z1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfXQuX19lc01vZHVsZSA9ICEwO3ZhciBpID0gbigxKSxcbiAgICAgICAgciA9IG8oaSk7dC5kZWZhdWx0ID0gci5kZWZhdWx0LCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfXQuX19lc01vZHVsZSA9ICEwO3ZhciBpID0gbigyKSxcbiAgICAgICAgciA9IG8oaSksXG4gICAgICAgIGEgPSBuKDYpLFxuICAgICAgICBsID0gbyhhKSxcbiAgICAgICAgcyA9IG4oMyksXG4gICAgICAgIHUgPSBvKHMpLFxuICAgICAgICBkID0gbig3KSxcbiAgICAgICAgYyA9IG8oZCksXG4gICAgICAgIGYgPSBuKDgpLFxuICAgICAgICBfID0gbyhmKSxcbiAgICAgICAgcCA9IG4oMTApLFxuICAgICAgICBoID0gbyhwKSxcbiAgICAgICAgbSA9IG4oMTEpLFxuICAgICAgICBiID0gbyhtKSxcbiAgICAgICAgZyA9IG4oMTIpLFxuICAgICAgICB2ID0gbyhnKSxcbiAgICAgICAgeSA9IG4oMTMpLFxuICAgICAgICB3ID0gbyh5KSxcbiAgICAgICAgeCA9IG4oMTQpLFxuICAgICAgICBFID0gbyh4KSxcbiAgICAgICAgQyA9IG4oMTUpLFxuICAgICAgICBBID0gbyhDKSxcbiAgICAgICAgUyA9IG4oMTYpLFxuICAgICAgICBrID0gbyhTKSxcbiAgICAgICAgTyA9IG4oOSksXG4gICAgICAgIFQgPSBvKE8pLFxuICAgICAgICBSID0gbigxNyksXG4gICAgICAgIEwgPSBvKFIpO3QuZGVmYXVsdCA9IHsgY29sb3I6IHsgQ29sb3I6IHIuZGVmYXVsdCwgbWF0aDogbC5kZWZhdWx0LCBpbnRlcnByZXQ6IHUuZGVmYXVsdCB9LCBjb250cm9sbGVyczogeyBDb250cm9sbGVyOiBjLmRlZmF1bHQsIEJvb2xlYW5Db250cm9sbGVyOiBfLmRlZmF1bHQsIE9wdGlvbkNvbnRyb2xsZXI6IGguZGVmYXVsdCwgU3RyaW5nQ29udHJvbGxlcjogYi5kZWZhdWx0LCBOdW1iZXJDb250cm9sbGVyOiB2LmRlZmF1bHQsIE51bWJlckNvbnRyb2xsZXJCb3g6IHcuZGVmYXVsdCwgTnVtYmVyQ29udHJvbGxlclNsaWRlcjogRS5kZWZhdWx0LCBGdW5jdGlvbkNvbnRyb2xsZXI6IEEuZGVmYXVsdCwgQ29sb3JDb250cm9sbGVyOiBrLmRlZmF1bHQgfSwgZG9tOiB7IGRvbTogVC5kZWZhdWx0IH0sIGd1aTogeyBHVUk6IEwuZGVmYXVsdCB9LCBHVUk6IEwuZGVmYXVsdCB9LCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQsIG4pIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBcIlJHQlwiID09PSB0aGlzLl9fc3RhdGUuc3BhY2UgPyB0aGlzLl9fc3RhdGVbdF0gOiAoaC5yZWNhbGN1bGF0ZVJHQih0aGlzLCB0LCBuKSwgdGhpcy5fX3N0YXRlW3RdKTtcbiAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIFwiUkdCXCIgIT09IHRoaXMuX19zdGF0ZS5zcGFjZSAmJiAoaC5yZWNhbGN1bGF0ZVJHQih0aGlzLCB0LCBuKSwgdGhpcy5fX3N0YXRlLnNwYWNlID0gXCJSR0JcIiksIHRoaXMuX19zdGF0ZVt0XSA9IGU7XG4gICAgICAgIH0gfSk7XG4gICAgfWZ1bmN0aW9uIGEoZSwgdCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIFwiSFNWXCIgPT09IHRoaXMuX19zdGF0ZS5zcGFjZSA/IHRoaXMuX19zdGF0ZVt0XSA6IChoLnJlY2FsY3VsYXRlSFNWKHRoaXMpLCB0aGlzLl9fc3RhdGVbdF0pO1xuICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgXCJIU1ZcIiAhPT0gdGhpcy5fX3N0YXRlLnNwYWNlICYmIChoLnJlY2FsY3VsYXRlSFNWKHRoaXMpLCB0aGlzLl9fc3RhdGUuc3BhY2UgPSBcIkhTVlwiKSwgdGhpcy5fX3N0YXRlW3RdID0gZTtcbiAgICAgICAgfSB9KTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIGwgPSBuKDMpLFxuICAgICAgICBzID0gbyhsKSxcbiAgICAgICAgdSA9IG4oNiksXG4gICAgICAgIGQgPSBvKHUpLFxuICAgICAgICBjID0gbig0KSxcbiAgICAgICAgZiA9IG8oYyksXG4gICAgICAgIF8gPSBuKDUpLFxuICAgICAgICBwID0gbyhfKSxcbiAgICAgICAgaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIGlmIChpKHRoaXMsIGUpLCB0aGlzLl9fc3RhdGUgPSBzLmRlZmF1bHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdGhpcy5fX3N0YXRlID09PSAhMSkgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGludGVycHJldCBjb2xvciBhcmd1bWVudHNcIik7dGhpcy5fX3N0YXRlLmEgPSB0aGlzLl9fc3RhdGUuYSB8fCAxO1xuICAgICAgfXJldHVybiBlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICgwLCBmLmRlZmF1bHQpKHRoaXMpO1xuICAgICAgfSwgZS5wcm90b3R5cGUudG9IZXhTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoMCwgZi5kZWZhdWx0KSh0aGlzLCAhMCk7XG4gICAgICB9LCBlLnByb3RvdHlwZS50b09yaWdpbmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fX3N0YXRlLmNvbnZlcnNpb24ud3JpdGUodGhpcyk7XG4gICAgICB9LCBlO1xuICAgIH0oKTtoLnJlY2FsY3VsYXRlUkdCID0gZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICAgIGlmIChcIkhFWFwiID09PSBlLl9fc3RhdGUuc3BhY2UpIGUuX19zdGF0ZVt0XSA9IGQuZGVmYXVsdC5jb21wb25lbnRfZnJvbV9oZXgoZS5fX3N0YXRlLmhleCwgbik7ZWxzZSB7XG4gICAgICAgIGlmIChcIkhTVlwiICE9PSBlLl9fc3RhdGUuc3BhY2UpIHRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCBjb2xvciBzdGF0ZVwiKTtwLmRlZmF1bHQuZXh0ZW5kKGUuX19zdGF0ZSwgZC5kZWZhdWx0Lmhzdl90b19yZ2IoZS5fX3N0YXRlLmgsIGUuX19zdGF0ZS5zLCBlLl9fc3RhdGUudikpO1xuICAgICAgfVxuICAgIH0sIGgucmVjYWxjdWxhdGVIU1YgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHQgPSBkLmRlZmF1bHQucmdiX3RvX2hzdihlLnIsIGUuZywgZS5iKTtwLmRlZmF1bHQuZXh0ZW5kKGUuX19zdGF0ZSwgeyBzOiB0LnMsIHY6IHQudiB9KSwgcC5kZWZhdWx0LmlzTmFOKHQuaCkgPyBwLmRlZmF1bHQuaXNVbmRlZmluZWQoZS5fX3N0YXRlLmgpICYmIChlLl9fc3RhdGUuaCA9IDApIDogZS5fX3N0YXRlLmggPSB0Lmg7XG4gICAgfSwgaC5DT01QT05FTlRTID0gW1wiclwiLCBcImdcIiwgXCJiXCIsIFwiaFwiLCBcInNcIiwgXCJ2XCIsIFwiaGV4XCIsIFwiYVwiXSwgcihoLnByb3RvdHlwZSwgXCJyXCIsIDIpLCByKGgucHJvdG90eXBlLCBcImdcIiwgMSksIHIoaC5wcm90b3R5cGUsIFwiYlwiLCAwKSwgYShoLnByb3RvdHlwZSwgXCJoXCIpLCBhKGgucHJvdG90eXBlLCBcInNcIiksIGEoaC5wcm90b3R5cGUsIFwidlwiKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCBcImFcIiwgeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19zdGF0ZS5hO1xuICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLl9fc3RhdGUuYSA9IGU7XG4gICAgICB9IH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsIFwiaGV4XCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkhFWFwiICE9PSAhdGhpcy5fX3N0YXRlLnNwYWNlICYmICh0aGlzLl9fc3RhdGUuaGV4ID0gZC5kZWZhdWx0LnJnYl90b19oZXgodGhpcy5yLCB0aGlzLmcsIHRoaXMuYikpLCB0aGlzLl9fc3RhdGUuaGV4O1xuICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLl9fc3RhdGUuc3BhY2UgPSBcIkhFWFwiLCB0aGlzLl9fc3RhdGUuaGV4ID0gZTtcbiAgICAgIH0gfSksIHQuZGVmYXVsdCA9IGgsIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIGkgPSBuKDQpLFxuICAgICAgICByID0gbyhpKSxcbiAgICAgICAgYSA9IG4oNSksXG4gICAgICAgIGwgPSBvKGEpLFxuICAgICAgICBzID0gW3sgbGl0bXVzOiBsLmRlZmF1bHQuaXNTdHJpbmcsIGNvbnZlcnNpb25zOiB7IFRIUkVFX0NIQVJfSEVYOiB7IHJlYWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdCA9IGUubWF0Y2goL14jKFtBLUYwLTldKShbQS1GMC05XSkoW0EtRjAtOV0pJC9pKTtyZXR1cm4gbnVsbCAhPT0gdCAmJiB7IHNwYWNlOiBcIkhFWFwiLCBoZXg6IHBhcnNlSW50KFwiMHhcIiArIHRbMV0udG9TdHJpbmcoKSArIHRbMV0udG9TdHJpbmcoKSArIHRbMl0udG9TdHJpbmcoKSArIHRbMl0udG9TdHJpbmcoKSArIHRbM10udG9TdHJpbmcoKSArIHRbM10udG9TdHJpbmcoKSwgMCkgfTtcbiAgICAgICAgICB9LCB3cml0ZTogci5kZWZhdWx0IH0sIFNJWF9DSEFSX0hFWDogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLm1hdGNoKC9eIyhbQS1GMC05XXs2fSkkL2kpO3JldHVybiBudWxsICE9PSB0ICYmIHsgc3BhY2U6IFwiSEVYXCIsIGhleDogcGFyc2VJbnQoXCIweFwiICsgdFsxXS50b1N0cmluZygpLCAwKSB9O1xuICAgICAgICAgIH0sIHdyaXRlOiByLmRlZmF1bHQgfSwgQ1NTX1JHQjogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLm1hdGNoKC9ecmdiXFwoXFxzKiguKylcXHMqLFxccyooLispXFxzKixcXHMqKC4rKVxccypcXCkvKTtyZXR1cm4gbnVsbCAhPT0gdCAmJiB7IHNwYWNlOiBcIlJHQlwiLCByOiBwYXJzZUZsb2F0KHRbMV0pLCBnOiBwYXJzZUZsb2F0KHRbMl0pLCBiOiBwYXJzZUZsb2F0KHRbM10pIH07XG4gICAgICAgICAgfSwgd3JpdGU6IHIuZGVmYXVsdCB9LCBDU1NfUkdCQTogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLm1hdGNoKC9ecmdiYVxcKFxccyooLispXFxzKixcXHMqKC4rKVxccyosXFxzKiguKylcXHMqLFxccyooLispXFxzKlxcKS8pO3JldHVybiBudWxsICE9PSB0ICYmIHsgc3BhY2U6IFwiUkdCXCIsIHI6IHBhcnNlRmxvYXQodFsxXSksIGc6IHBhcnNlRmxvYXQodFsyXSksIGI6IHBhcnNlRmxvYXQodFszXSksIGE6IHBhcnNlRmxvYXQodFs0XSkgfTtcbiAgICAgICAgICB9LCB3cml0ZTogci5kZWZhdWx0IH0gfSB9LCB7IGxpdG11czogbC5kZWZhdWx0LmlzTnVtYmVyLCBjb252ZXJzaW9uczogeyBIRVg6IHsgcmVhZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHNwYWNlOiBcIkhFWFwiLCBoZXg6IGUsIGNvbnZlcnNpb25OYW1lOiBcIkhFWFwiIH07XG4gICAgICAgICAgfSwgd3JpdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5oZXg7XG4gICAgICAgICAgfSB9IH0gfSwgeyBsaXRtdXM6IGwuZGVmYXVsdC5pc0FycmF5LCBjb252ZXJzaW9uczogeyBSR0JfQVJSQVk6IHsgcmVhZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAzID09PSBlLmxlbmd0aCAmJiB7IHNwYWNlOiBcIlJHQlwiLCByOiBlWzBdLCBnOiBlWzFdLCBiOiBlWzJdIH07XG4gICAgICAgICAgfSwgd3JpdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gW2UuciwgZS5nLCBlLmJdO1xuICAgICAgICAgIH0gfSwgUkdCQV9BUlJBWTogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoICYmIHsgc3BhY2U6IFwiUkdCXCIsIHI6IGVbMF0sIGc6IGVbMV0sIGI6IGVbMl0sIGE6IGVbM10gfTtcbiAgICAgICAgICB9LCB3cml0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBbZS5yLCBlLmcsIGUuYiwgZS5hXTtcbiAgICAgICAgICB9IH0gfSB9LCB7IGxpdG11czogbC5kZWZhdWx0LmlzT2JqZWN0LCBjb252ZXJzaW9uczogeyBSR0JBX09CSjogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhKGwuZGVmYXVsdC5pc051bWJlcihlLnIpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmcpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmIpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmEpKSAmJiB7IHNwYWNlOiBcIlJHQlwiLCByOiBlLnIsIGc6IGUuZywgYjogZS5iLCBhOiBlLmEgfTtcbiAgICAgICAgICB9LCB3cml0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHI6IGUuciwgZzogZS5nLCBiOiBlLmIsIGE6IGUuYSB9O1xuICAgICAgICAgIH0gfSwgUkdCX09CSjogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhKGwuZGVmYXVsdC5pc051bWJlcihlLnIpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmcpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmIpKSAmJiB7IHNwYWNlOiBcIlJHQlwiLCByOiBlLnIsIGc6IGUuZywgYjogZS5iIH07XG4gICAgICAgICAgfSwgd3JpdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4geyByOiBlLnIsIGc6IGUuZywgYjogZS5iIH07XG4gICAgICAgICAgfSB9LCBIU1ZBX09CSjogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhKGwuZGVmYXVsdC5pc051bWJlcihlLmgpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLnMpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLnYpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLmEpKSAmJiB7IHNwYWNlOiBcIkhTVlwiLCBoOiBlLmgsIHM6IGUucywgdjogZS52LCBhOiBlLmEgfTtcbiAgICAgICAgICB9LCB3cml0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGg6IGUuaCwgczogZS5zLCB2OiBlLnYsIGE6IGUuYSB9O1xuICAgICAgICAgIH0gfSwgSFNWX09CSjogeyByZWFkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhKGwuZGVmYXVsdC5pc051bWJlcihlLmgpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLnMpICYmIGwuZGVmYXVsdC5pc051bWJlcihlLnYpKSAmJiB7IHNwYWNlOiBcIkhTVlwiLCBoOiBlLmgsIHM6IGUucywgdjogZS52IH07XG4gICAgICAgICAgfSwgd3JpdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBoOiBlLmgsIHM6IGUucywgdjogZS52IH07XG4gICAgICAgICAgfSB9IH0gfV0sXG4gICAgICAgIHUgPSB2b2lkIDAsXG4gICAgICAgIGQgPSB2b2lkIDAsXG4gICAgICAgIGMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBkID0gITE7dmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGwuZGVmYXVsdC50b0FycmF5KGFyZ3VtZW50cykgOiBhcmd1bWVudHNbMF07cmV0dXJuIGwuZGVmYXVsdC5lYWNoKHMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGlmICh0LmxpdG11cyhlKSkgcmV0dXJuIGwuZGVmYXVsdC5lYWNoKHQuY29udmVyc2lvbnMsIGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgICAgaWYgKHUgPSB0LnJlYWQoZSksIGQgPT09ICExICYmIHUgIT09ICExKSByZXR1cm4gZCA9IHUsIHUuY29udmVyc2lvbk5hbWUgPSBuLCB1LmNvbnZlcnNpb24gPSB0LCBsLmRlZmF1bHQuQlJFQUs7XG4gICAgICAgIH0pLCBsLmRlZmF1bHQuQlJFQUs7XG4gICAgICB9KSwgZDtcbiAgICB9O3QuZGVmYXVsdCA9IGMsIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB0Ll9fZXNNb2R1bGUgPSAhMCwgdC5kZWZhdWx0ID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHZhciBuID0gZS5fX3N0YXRlLmNvbnZlcnNpb25OYW1lLnRvU3RyaW5nKCksXG4gICAgICAgICAgbyA9IE1hdGgucm91bmQoZS5yKSxcbiAgICAgICAgICBpID0gTWF0aC5yb3VuZChlLmcpLFxuICAgICAgICAgIHIgPSBNYXRoLnJvdW5kKGUuYiksXG4gICAgICAgICAgYSA9IGUuYSxcbiAgICAgICAgICBsID0gTWF0aC5yb3VuZChlLmgpLFxuICAgICAgICAgIHMgPSBlLnMudG9GaXhlZCgxKSxcbiAgICAgICAgICB1ID0gZS52LnRvRml4ZWQoMSk7aWYgKHQgfHwgXCJUSFJFRV9DSEFSX0hFWFwiID09PSBuIHx8IFwiU0lYX0NIQVJfSEVYXCIgPT09IG4pIHtcbiAgICAgICAgZm9yICh2YXIgZCA9IGUuaGV4LnRvU3RyaW5nKDE2KTsgZC5sZW5ndGggPCA2OykgZCA9IFwiMFwiICsgZDtyZXR1cm4gXCIjXCIgKyBkO1xuICAgICAgfXJldHVybiBcIkNTU19SR0JcIiA9PT0gbiA/IFwicmdiKFwiICsgbyArIFwiLFwiICsgaSArIFwiLFwiICsgciArIFwiKVwiIDogXCJDU1NfUkdCQVwiID09PSBuID8gXCJyZ2JhKFwiICsgbyArIFwiLFwiICsgaSArIFwiLFwiICsgciArIFwiLFwiICsgYSArIFwiKVwiIDogXCJIRVhcIiA9PT0gbiA/IFwiMHhcIiArIGUuaGV4LnRvU3RyaW5nKDE2KSA6IFwiUkdCX0FSUkFZXCIgPT09IG4gPyBcIltcIiArIG8gKyBcIixcIiArIGkgKyBcIixcIiArIHIgKyBcIl1cIiA6IFwiUkdCQV9BUlJBWVwiID09PSBuID8gXCJbXCIgKyBvICsgXCIsXCIgKyBpICsgXCIsXCIgKyByICsgXCIsXCIgKyBhICsgXCJdXCIgOiBcIlJHQl9PQkpcIiA9PT0gbiA/IFwie3I6XCIgKyBvICsgXCIsZzpcIiArIGkgKyBcIixiOlwiICsgciArIFwifVwiIDogXCJSR0JBX09CSlwiID09PSBuID8gXCJ7cjpcIiArIG8gKyBcIixnOlwiICsgaSArIFwiLGI6XCIgKyByICsgXCIsYTpcIiArIGEgKyBcIn1cIiA6IFwiSFNWX09CSlwiID09PSBuID8gXCJ7aDpcIiArIGwgKyBcIixzOlwiICsgcyArIFwiLHY6XCIgKyB1ICsgXCJ9XCIgOiBcIkhTVkFfT0JKXCIgPT09IG4gPyBcIntoOlwiICsgbCArIFwiLHM6XCIgKyBzICsgXCIsdjpcIiArIHUgKyBcIixhOlwiICsgYSArIFwifVwiIDogXCJ1bmtub3duIGZvcm1hdFwiO1xuICAgIH0sIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB0Ll9fZXNNb2R1bGUgPSAhMDt2YXIgbiA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLFxuICAgICAgICBvID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgICBpID0geyBCUkVBSzoge30sIGV4dGVuZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChvLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB2YXIgbiA9IHRoaXMuaXNPYmplY3QodCkgPyBPYmplY3Qua2V5cyh0KSA6IFtdO24uZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdGhpcy5pc1VuZGVmaW5lZCh0W25dKSB8fCAoZVtuXSA9IHRbbl0pO1xuICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH0sIHRoaXMpLCBlO1xuICAgICAgfSwgZGVmYXVsdHM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goby5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdmFyIG4gPSB0aGlzLmlzT2JqZWN0KHQpID8gT2JqZWN0LmtleXModCkgOiBbXTtuLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNVbmRlZmluZWQoZVtuXSkgJiYgKGVbbl0gPSB0W25dKTtcbiAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LCB0aGlzKSwgZTtcbiAgICAgIH0sIGNvbXBvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBvLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAodmFyIHQgPSBvLmNhbGwoYXJndW1lbnRzKSwgbiA9IGUubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIHQgPSBbZVtuXS5hcHBseSh0aGlzLCB0KV07cmV0dXJuIHRbMF07XG4gICAgICAgIH07XG4gICAgICB9LCBlYWNoOiBmdW5jdGlvbiAoZSwgdCwgbykge1xuICAgICAgICBpZiAoZSkgaWYgKG4gJiYgZS5mb3JFYWNoICYmIGUuZm9yRWFjaCA9PT0gbikgZS5mb3JFYWNoKHQsIG8pO2Vsc2UgaWYgKGUubGVuZ3RoID09PSBlLmxlbmd0aCArIDApIHtcbiAgICAgICAgICB2YXIgaSA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgciA9IHZvaWQgMDtmb3IgKGkgPSAwLCByID0gZS5sZW5ndGg7IGkgPCByOyBpKyspIGlmIChpIGluIGUgJiYgdC5jYWxsKG8sIGVbaV0sIGkpID09PSB0aGlzLkJSRUFLKSByZXR1cm47XG4gICAgICAgIH0gZWxzZSBmb3IgKHZhciBhIGluIGUpIGlmICh0LmNhbGwobywgZVthXSwgYSkgPT09IHRoaXMuQlJFQUspIHJldHVybjtcbiAgICAgIH0sIGRlZmVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBzZXRUaW1lb3V0KGUsIDApO1xuICAgICAgfSwgZGVib3VuY2U6IGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgICAgIHZhciBvID0gdm9pZCAwO3JldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZnVuY3Rpb24gaSgpIHtcbiAgICAgICAgICAgIG8gPSBudWxsLCBuIHx8IGUuYXBwbHkociwgYSk7XG4gICAgICAgICAgfXZhciByID0gdGhpcyxcbiAgICAgICAgICAgICAgYSA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgbCA9IG4gfHwgIW87Y2xlYXJUaW1lb3V0KG8pLCBvID0gc2V0VGltZW91dChpLCB0KSwgbCAmJiBlLmFwcGx5KHIsIGEpO1xuICAgICAgICB9O1xuICAgICAgfSwgdG9BcnJheTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUudG9BcnJheSA/IGUudG9BcnJheSgpIDogby5jYWxsKGUpO1xuICAgICAgfSwgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IGU7XG4gICAgICB9LCBpc051bGw6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBudWxsID09PSBlO1xuICAgICAgfSwgaXNOYU46IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGZ1bmN0aW9uIHQodCkge1xuICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1yZXR1cm4gdC50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZS50b1N0cmluZygpO1xuICAgICAgICB9LCB0O1xuICAgICAgfShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gaXNOYU4oZSk7XG4gICAgICB9KSwgaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXk7XG4gICAgICB9LCBpc09iamVjdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPT09IE9iamVjdChlKTtcbiAgICAgIH0sIGlzTnVtYmVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZSA9PT0gZSArIDA7XG4gICAgICB9LCBpc1N0cmluZzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPT09IGUgKyBcIlwiO1xuICAgICAgfSwgaXNCb29sZWFuOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZSA9PT0gITEgfHwgZSA9PT0gITA7XG4gICAgICB9LCBpc0Z1bmN0aW9uOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk7XG4gICAgICB9IH07dC5kZWZhdWx0ID0gaSwgZS5leHBvcnRzID0gdC5kZWZhdWx0O1xuICB9LCBmdW5jdGlvbiAoZSwgdCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHQuX19lc01vZHVsZSA9ICEwO3ZhciBuID0gdm9pZCAwLFxuICAgICAgICBvID0geyBoc3ZfdG9fcmdiOiBmdW5jdGlvbiAoZSwgdCwgbikge1xuICAgICAgICB2YXIgbyA9IE1hdGguZmxvb3IoZSAvIDYwKSAlIDYsXG4gICAgICAgICAgICBpID0gZSAvIDYwIC0gTWF0aC5mbG9vcihlIC8gNjApLFxuICAgICAgICAgICAgciA9IG4gKiAoMSAtIHQpLFxuICAgICAgICAgICAgYSA9IG4gKiAoMSAtIGkgKiB0KSxcbiAgICAgICAgICAgIGwgPSBuICogKDEgLSAoMSAtIGkpICogdCksXG4gICAgICAgICAgICBzID0gW1tuLCBsLCByXSwgW2EsIG4sIHJdLCBbciwgbiwgbF0sIFtyLCBhLCBuXSwgW2wsIHIsIG5dLCBbbiwgciwgYV1dW29dO3JldHVybiB7IHI6IDI1NSAqIHNbMF0sIGc6IDI1NSAqIHNbMV0sIGI6IDI1NSAqIHNbMl0gfTtcbiAgICAgIH0sIHJnYl90b19oc3Y6IGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgICAgIHZhciBvID0gTWF0aC5taW4oZSwgdCwgbiksXG4gICAgICAgICAgICBpID0gTWF0aC5tYXgoZSwgdCwgbiksXG4gICAgICAgICAgICByID0gaSAtIG8sXG4gICAgICAgICAgICBhID0gdm9pZCAwLFxuICAgICAgICAgICAgbCA9IHZvaWQgMDtyZXR1cm4gMCA9PT0gaSA/IHsgaDogTmFOLCBzOiAwLCB2OiAwIH0gOiAobCA9IHIgLyBpLCBhID0gZSA9PT0gaSA/ICh0IC0gbikgLyByIDogdCA9PT0gaSA/IDIgKyAobiAtIGUpIC8gciA6IDQgKyAoZSAtIHQpIC8gciwgYSAvPSA2LCBhIDwgMCAmJiAoYSArPSAxKSwgeyBoOiAzNjAgKiBhLCBzOiBsLCB2OiBpIC8gMjU1IH0pO1xuICAgICAgfSwgcmdiX3RvX2hleDogZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICAgICAgdmFyIG8gPSB0aGlzLmhleF93aXRoX2NvbXBvbmVudCgwLCAyLCBlKTtyZXR1cm4gbyA9IHRoaXMuaGV4X3dpdGhfY29tcG9uZW50KG8sIDEsIHQpLCBvID0gdGhpcy5oZXhfd2l0aF9jb21wb25lbnQobywgMCwgbik7XG4gICAgICB9LCBjb21wb25lbnRfZnJvbV9oZXg6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiBlID4+IDggKiB0ICYgMjU1O1xuICAgICAgfSwgaGV4X3dpdGhfY29tcG9uZW50OiBmdW5jdGlvbiAoZSwgdCwgbykge1xuICAgICAgICByZXR1cm4gbyA8PCAobiA9IDggKiB0KSB8IGUgJiB+KDI1NSA8PCBuKTtcbiAgICAgIH0gfTt0LmRlZmF1bHQgPSBvLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbihlLCB0KSB7XG4gICAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfXQuX19lc01vZHVsZSA9ICEwO3ZhciBvID0gZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gZSh0LCBvKSB7XG4gICAgICAgIG4odGhpcywgZSksIHRoaXMuaW5pdGlhbFZhbHVlID0gdFtvXSwgdGhpcy5kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgdGhpcy5vYmplY3QgPSB0LCB0aGlzLnByb3BlcnR5ID0gbywgdGhpcy5fX29uQ2hhbmdlID0gdm9pZCAwLCB0aGlzLl9fb25GaW5pc2hDaGFuZ2UgPSB2b2lkIDA7XG4gICAgICB9cmV0dXJuIGUucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19vbkNoYW5nZSA9IGUsIHRoaXM7XG4gICAgICB9LCBlLnByb3RvdHlwZS5vbkZpbmlzaENoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fb25GaW5pc2hDaGFuZ2UgPSBlLCB0aGlzO1xuICAgICAgfSwgZS5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RbdGhpcy5wcm9wZXJ0eV0gPSBlLCB0aGlzLl9fb25DaGFuZ2UgJiYgdGhpcy5fX29uQ2hhbmdlLmNhbGwodGhpcywgZSksIHRoaXMudXBkYXRlRGlzcGxheSgpLCB0aGlzO1xuICAgICAgfSwgZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdFt0aGlzLnByb3BlcnR5XTtcbiAgICAgIH0sIGUucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSwgZS5wcm90b3R5cGUuaXNNb2RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbFZhbHVlICE9PSB0aGlzLmdldFZhbHVlKCk7XG4gICAgICB9LCBlO1xuICAgIH0oKTt0LmRlZmF1bHQgPSBvLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQpIHtcbiAgICAgIGlmICghZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiAhdCB8fCBcIm9iamVjdFwiICE9IHR5cGVvZiB0ICYmIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCA/IGUgOiB0O1xuICAgIH1mdW5jdGlvbiBhKGUsIHQpIHtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2YgdCk7ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IGUsIGVudW1lcmFibGU6ICExLCB3cml0YWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAgfSB9KSwgdCAmJiAoT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsIHQpIDogZS5fX3Byb3RvX18gPSB0KTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIGwgPSBuKDcpLFxuICAgICAgICBzID0gbyhsKSxcbiAgICAgICAgdSA9IG4oOSksXG4gICAgICAgIGQgPSBvKHUpLFxuICAgICAgICBjID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZ1bmN0aW9uIHQobiwgbykge1xuICAgICAgICBmdW5jdGlvbiBhKCkge1xuICAgICAgICAgIHMuc2V0VmFsdWUoIXMuX19wcmV2KTtcbiAgICAgICAgfWkodGhpcywgdCk7dmFyIGwgPSByKHRoaXMsIGUuY2FsbCh0aGlzLCBuLCBvKSksXG4gICAgICAgICAgICBzID0gbDtyZXR1cm4gbC5fX3ByZXYgPSBsLmdldFZhbHVlKCksIGwuX19jaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSwgbC5fX2NoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKSwgZC5kZWZhdWx0LmJpbmQobC5fX2NoZWNrYm94LCBcImNoYW5nZVwiLCBhLCAhMSksIGwuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChsLl9fY2hlY2tib3gpLCBsLnVwZGF0ZURpc3BsYXkoKSwgbDtcbiAgICAgIH1yZXR1cm4gYSh0LCBlKSwgdC5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgbiA9IGUucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcywgdCk7cmV0dXJuIHRoaXMuX19vbkZpbmlzaENoYW5nZSAmJiB0aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLmdldFZhbHVlKCkpLCB0aGlzLl9fcHJldiA9IHRoaXMuZ2V0VmFsdWUoKSwgbjtcbiAgICAgIH0sIHQucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCkgPT09ICEwID8gKHRoaXMuX19jaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiKSwgdGhpcy5fX2NoZWNrYm94LmNoZWNrZWQgPSAhMCwgdGhpcy5fX3ByZXYgPSAhMCkgOiAodGhpcy5fX2NoZWNrYm94LmNoZWNrZWQgPSAhMSwgdGhpcy5fX3ByZXYgPSAhMSksIGUucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkuY2FsbCh0aGlzKTtcbiAgICAgIH0sIHQ7XG4gICAgfShzLmRlZmF1bHQpO3QuZGVmYXVsdCA9IGMsIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcbiAgICB9ZnVuY3Rpb24gaShlKSB7XG4gICAgICBpZiAoXCIwXCIgPT09IGUgfHwgYS5kZWZhdWx0LmlzVW5kZWZpbmVkKGUpKSByZXR1cm4gMDt2YXIgdCA9IGUubWF0Y2godSk7cmV0dXJuIGEuZGVmYXVsdC5pc051bGwodCkgPyAwIDogcGFyc2VGbG9hdCh0WzFdKTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIHIgPSBuKDUpLFxuICAgICAgICBhID0gbyhyKSxcbiAgICAgICAgbCA9IHsgSFRNTEV2ZW50czogW1wiY2hhbmdlXCJdLCBNb3VzZUV2ZW50czogW1wiY2xpY2tcIiwgXCJtb3VzZW1vdmVcIiwgXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCIsIFwibW91c2VvdmVyXCJdLCBLZXlib2FyZEV2ZW50czogW1wia2V5ZG93blwiXSB9LFxuICAgICAgICBzID0ge307YS5kZWZhdWx0LmVhY2gobCwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIGEuZGVmYXVsdC5lYWNoKGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHNbZV0gPSB0O1xuICAgICAgfSk7XG4gICAgfSk7dmFyIHUgPSAvKFxcZCsoXFwuXFxkKyk/KXB4LyxcbiAgICAgICAgZCA9IHsgbWFrZVNlbGVjdGFibGU6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHZvaWQgMCAhPT0gZSAmJiB2b2lkIDAgIT09IGUuc3R5bGUgJiYgKGUub25zZWxlY3RzdGFydCA9IHQgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9IDogZnVuY3Rpb24gKCkge30sIGUuc3R5bGUuTW96VXNlclNlbGVjdCA9IHQgPyBcImF1dG9cIiA6IFwibm9uZVwiLCBlLnN0eWxlLktodG1sVXNlclNlbGVjdCA9IHQgPyBcImF1dG9cIiA6IFwibm9uZVwiLCBlLnVuc2VsZWN0YWJsZSA9IHQgPyBcIm9uXCIgOiBcIm9mZlwiKTtcbiAgICAgIH0sIG1ha2VGdWxsc2NyZWVuOiBmdW5jdGlvbiAoZSwgdCwgbikge1xuICAgICAgICB2YXIgbyA9IG4sXG4gICAgICAgICAgICBpID0gdDthLmRlZmF1bHQuaXNVbmRlZmluZWQoaSkgJiYgKGkgPSAhMCksIGEuZGVmYXVsdC5pc1VuZGVmaW5lZChvKSAmJiAobyA9ICEwKSwgZS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIiwgaSAmJiAoZS5zdHlsZS5sZWZ0ID0gMCwgZS5zdHlsZS5yaWdodCA9IDApLCBvICYmIChlLnN0eWxlLnRvcCA9IDAsIGUuc3R5bGUuYm90dG9tID0gMCk7XG4gICAgICB9LCBmYWtlRXZlbnQ6IGZ1bmN0aW9uIChlLCB0LCBuLCBvKSB7XG4gICAgICAgIHZhciBpID0gbiB8fCB7fSxcbiAgICAgICAgICAgIHIgPSBzW3RdO2lmICghcikgdGhyb3cgbmV3IEVycm9yKFwiRXZlbnQgdHlwZSBcIiArIHQgKyBcIiBub3Qgc3VwcG9ydGVkLlwiKTt2YXIgbCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KHIpO3N3aXRjaCAocikge2Nhc2UgXCJNb3VzZUV2ZW50c1wiOlxuICAgICAgICAgICAgdmFyIHUgPSBpLnggfHwgaS5jbGllbnRYIHx8IDAsXG4gICAgICAgICAgICAgICAgZCA9IGkueSB8fCBpLmNsaWVudFkgfHwgMDtsLmluaXRNb3VzZUV2ZW50KHQsIGkuYnViYmxlcyB8fCAhMSwgaS5jYW5jZWxhYmxlIHx8ICEwLCB3aW5kb3csIGkuY2xpY2tDb3VudCB8fCAxLCAwLCAwLCB1LCBkLCAhMSwgITEsICExLCAhMSwgMCwgbnVsbCk7YnJlYWs7Y2FzZSBcIktleWJvYXJkRXZlbnRzXCI6XG4gICAgICAgICAgICB2YXIgYyA9IGwuaW5pdEtleWJvYXJkRXZlbnQgfHwgbC5pbml0S2V5RXZlbnQ7YS5kZWZhdWx0LmRlZmF1bHRzKGksIHsgY2FuY2VsYWJsZTogITAsIGN0cmxLZXk6ICExLCBhbHRLZXk6ICExLCBzaGlmdEtleTogITEsIG1ldGFLZXk6ICExLCBrZXlDb2RlOiB2b2lkIDAsIGNoYXJDb2RlOiB2b2lkIDAgfSksIGModCwgaS5idWJibGVzIHx8ICExLCBpLmNhbmNlbGFibGUsIHdpbmRvdywgaS5jdHJsS2V5LCBpLmFsdEtleSwgaS5zaGlmdEtleSwgaS5tZXRhS2V5LCBpLmtleUNvZGUsIGkuY2hhckNvZGUpO2JyZWFrO2RlZmF1bHQ6XG4gICAgICAgICAgICBsLmluaXRFdmVudCh0LCBpLmJ1YmJsZXMgfHwgITEsIGkuY2FuY2VsYWJsZSB8fCAhMCk7fWEuZGVmYXVsdC5kZWZhdWx0cyhsLCBvKSwgZS5kaXNwYXRjaEV2ZW50KGwpO1xuICAgICAgfSwgYmluZDogZnVuY3Rpb24gKGUsIHQsIG4sIG8pIHtcbiAgICAgICAgdmFyIGkgPSBvIHx8ICExO3JldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIgPyBlLmFkZEV2ZW50TGlzdGVuZXIodCwgbiwgaSkgOiBlLmF0dGFjaEV2ZW50ICYmIGUuYXR0YWNoRXZlbnQoXCJvblwiICsgdCwgbiksIGQ7XG4gICAgICB9LCB1bmJpbmQ6IGZ1bmN0aW9uIChlLCB0LCBuLCBvKSB7XG4gICAgICAgIHZhciBpID0gbyB8fCAhMTtyZXR1cm4gZS5yZW1vdmVFdmVudExpc3RlbmVyID8gZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4sIGkpIDogZS5kZXRhY2hFdmVudCAmJiBlLmRldGFjaEV2ZW50KFwib25cIiArIHQsIG4pLCBkO1xuICAgICAgfSwgYWRkQ2xhc3M6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUuY2xhc3NOYW1lKSBlLmNsYXNzTmFtZSA9IHQ7ZWxzZSBpZiAoZS5jbGFzc05hbWUgIT09IHQpIHtcbiAgICAgICAgICB2YXIgbiA9IGUuY2xhc3NOYW1lLnNwbGl0KC8gKy8pO24uaW5kZXhPZih0KSA9PT0gLTEgJiYgKG4ucHVzaCh0KSwgZS5jbGFzc05hbWUgPSBuLmpvaW4oXCIgXCIpLnJlcGxhY2UoL15cXHMrLywgXCJcIikucmVwbGFjZSgvXFxzKyQvLCBcIlwiKSk7XG4gICAgICAgIH1yZXR1cm4gZDtcbiAgICAgIH0sIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGlmIChlLmNsYXNzTmFtZSA9PT0gdCkgZS5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtlbHNlIHtcbiAgICAgICAgICAgIHZhciBuID0gZS5jbGFzc05hbWUuc3BsaXQoLyArLyksXG4gICAgICAgICAgICAgICAgbyA9IG4uaW5kZXhPZih0KTtvICE9PSAtMSAmJiAobi5zcGxpY2UobywgMSksIGUuY2xhc3NOYW1lID0gbi5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgZS5jbGFzc05hbWUgPSB2b2lkIDA7cmV0dXJuIGQ7XG4gICAgICB9LCBoYXNDbGFzczogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKylcIiArIHQgKyBcIig/OlxcXFxzK3wkKVwiKS50ZXN0KGUuY2xhc3NOYW1lKSB8fCAhMTtcbiAgICAgIH0sIGdldFdpZHRoOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IGdldENvbXB1dGVkU3R5bGUoZSk7cmV0dXJuIGkodFtcImJvcmRlci1sZWZ0LXdpZHRoXCJdKSArIGkodFtcImJvcmRlci1yaWdodC13aWR0aFwiXSkgKyBpKHRbXCJwYWRkaW5nLWxlZnRcIl0pICsgaSh0W1wicGFkZGluZy1yaWdodFwiXSkgKyBpKHQud2lkdGgpO1xuICAgICAgfSwgZ2V0SGVpZ2h0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IGdldENvbXB1dGVkU3R5bGUoZSk7cmV0dXJuIGkodFtcImJvcmRlci10b3Atd2lkdGhcIl0pICsgaSh0W1wiYm9yZGVyLWJvdHRvbS13aWR0aFwiXSkgKyBpKHRbXCJwYWRkaW5nLXRvcFwiXSkgKyBpKHRbXCJwYWRkaW5nLWJvdHRvbVwiXSkgKyBpKHQuaGVpZ2h0KTtcbiAgICAgIH0sIGdldE9mZnNldDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHQgPSBlLFxuICAgICAgICAgICAgbiA9IHsgbGVmdDogMCwgdG9wOiAwIH07aWYgKHQub2Zmc2V0UGFyZW50KSBkbyBuLmxlZnQgKz0gdC5vZmZzZXRMZWZ0LCBuLnRvcCArPSB0Lm9mZnNldFRvcCwgdCA9IHQub2Zmc2V0UGFyZW50OyB3aGlsZSAodCk7cmV0dXJuIG47XG4gICAgICB9LCBpc0FjdGl2ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKGUudHlwZSB8fCBlLmhyZWYpO1xuICAgICAgfSB9O3QuZGVmYXVsdCA9IGQsIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcbiAgICB9ZnVuY3Rpb24gaShlLCB0KSB7XG4gICAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfWZ1bmN0aW9uIHIoZSwgdCkge1xuICAgICAgaWYgKCFlKSB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuICF0IHx8IFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgJiYgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0ID8gZSA6IHQ7XG4gICAgfWZ1bmN0aW9uIGEoZSwgdCkge1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCAmJiBudWxsICE9PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiB0KTtlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodCAmJiB0LnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogZSwgZW51bWVyYWJsZTogITEsIHdyaXRhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCB9IH0pLCB0ICYmIChPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSwgdCkgOiBlLl9fcHJvdG9fXyA9IHQpO1xuICAgIH10Ll9fZXNNb2R1bGUgPSAhMDt2YXIgbCA9IG4oNyksXG4gICAgICAgIHMgPSBvKGwpLFxuICAgICAgICB1ID0gbig5KSxcbiAgICAgICAgZCA9IG8odSksXG4gICAgICAgIGMgPSBuKDUpLFxuICAgICAgICBmID0gbyhjKSxcbiAgICAgICAgXyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBmdW5jdGlvbiB0KG4sIG8sIGEpIHtcbiAgICAgICAgaSh0aGlzLCB0KTt2YXIgbCA9IHIodGhpcywgZS5jYWxsKHRoaXMsIG4sIG8pKSxcbiAgICAgICAgICAgIHMgPSBhLFxuICAgICAgICAgICAgdSA9IGw7aWYgKGwuX19zZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLCBmLmRlZmF1bHQuaXNBcnJheShzKSkge1xuICAgICAgICAgIHZhciBjID0ge307Zi5kZWZhdWx0LmVhY2gocywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGNbZV0gPSBlO1xuICAgICAgICAgIH0pLCBzID0gYztcbiAgICAgICAgfXJldHVybiBmLmRlZmF1bHQuZWFjaChzLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIHZhciBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtuLmlubmVySFRNTCA9IHQsIG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgZSksIHUuX19zZWxlY3QuYXBwZW5kQ2hpbGQobik7XG4gICAgICAgIH0pLCBsLnVwZGF0ZURpc3BsYXkoKSwgZC5kZWZhdWx0LmJpbmQobC5fX3NlbGVjdCwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBlID0gdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0udmFsdWU7dS5zZXRWYWx1ZShlKTtcbiAgICAgICAgfSksIGwuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChsLl9fc2VsZWN0KSwgbDtcbiAgICAgIH1yZXR1cm4gYSh0LCBlKSwgdC5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgbiA9IGUucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcywgdCk7cmV0dXJuIHRoaXMuX19vbkZpbmlzaENoYW5nZSAmJiB0aGlzLl9fb25GaW5pc2hDaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLmdldFZhbHVlKCkpLCBuO1xuICAgICAgfSwgdC5wcm90b3R5cGUudXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGQuZGVmYXVsdC5pc0FjdGl2ZSh0aGlzLl9fc2VsZWN0KSA/IHRoaXMgOiAodGhpcy5fX3NlbGVjdC52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKSwgZS5wcm90b3R5cGUudXBkYXRlRGlzcGxheS5jYWxsKHRoaXMpKTtcbiAgICAgIH0sIHQ7XG4gICAgfShzLmRlZmF1bHQpO3QuZGVmYXVsdCA9IF8sIGUuZXhwb3J0cyA9IHQuZGVmYXVsdDtcbiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcbiAgICB9ZnVuY3Rpb24gaShlLCB0KSB7XG4gICAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfWZ1bmN0aW9uIHIoZSwgdCkge1xuICAgICAgaWYgKCFlKSB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuICF0IHx8IFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgJiYgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0ID8gZSA6IHQ7XG4gICAgfWZ1bmN0aW9uIGEoZSwgdCkge1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCAmJiBudWxsICE9PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiB0KTtlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodCAmJiB0LnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogZSwgZW51bWVyYWJsZTogITEsIHdyaXRhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCB9IH0pLCB0ICYmIChPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSwgdCkgOiBlLl9fcHJvdG9fXyA9IHQpO1xuICAgIH10Ll9fZXNNb2R1bGUgPSAhMDt2YXIgbCA9IG4oNyksXG4gICAgICAgIHMgPSBvKGwpLFxuICAgICAgICB1ID0gbig5KSxcbiAgICAgICAgZCA9IG8odSksXG4gICAgICAgIGMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZnVuY3Rpb24gdChuLCBvKSB7XG4gICAgICAgIGZ1bmN0aW9uIGEoKSB7XG4gICAgICAgICAgdS5zZXRWYWx1ZSh1Ll9faW5wdXQudmFsdWUpO1xuICAgICAgICB9ZnVuY3Rpb24gbCgpIHtcbiAgICAgICAgICB1Ll9fb25GaW5pc2hDaGFuZ2UgJiYgdS5fX29uRmluaXNoQ2hhbmdlLmNhbGwodSwgdS5nZXRWYWx1ZSgpKTtcbiAgICAgICAgfWkodGhpcywgdCk7dmFyIHMgPSByKHRoaXMsIGUuY2FsbCh0aGlzLCBuLCBvKSksXG4gICAgICAgICAgICB1ID0gcztyZXR1cm4gcy5fX2lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLCBzLl9faW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIiksIGQuZGVmYXVsdC5iaW5kKHMuX19pbnB1dCwgXCJrZXl1cFwiLCBhKSwgZC5kZWZhdWx0LmJpbmQocy5fX2lucHV0LCBcImNoYW5nZVwiLCBhKSwgZC5kZWZhdWx0LmJpbmQocy5fX2lucHV0LCBcImJsdXJcIiwgbCksIGQuZGVmYXVsdC5iaW5kKHMuX19pbnB1dCwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgMTMgPT09IGUua2V5Q29kZSAmJiB0aGlzLmJsdXIoKTtcbiAgICAgICAgfSksIHMudXBkYXRlRGlzcGxheSgpLCBzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQocy5fX2lucHV0KSwgcztcbiAgICAgIH1yZXR1cm4gYSh0LCBlKSwgdC5wcm90b3R5cGUudXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGQuZGVmYXVsdC5pc0FjdGl2ZSh0aGlzLl9faW5wdXQpIHx8ICh0aGlzLl9faW5wdXQudmFsdWUgPSB0aGlzLmdldFZhbHVlKCkpLCBlLnByb3RvdHlwZS51cGRhdGVEaXNwbGF5LmNhbGwodGhpcyk7XG4gICAgICB9LCB0O1xuICAgIH0ocy5kZWZhdWx0KTt0LmRlZmF1bHQgPSBjLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQpIHtcbiAgICAgIGlmICghZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiAhdCB8fCBcIm9iamVjdFwiICE9IHR5cGVvZiB0ICYmIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCA/IGUgOiB0O1xuICAgIH1mdW5jdGlvbiBhKGUsIHQpIHtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2YgdCk7ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IGUsIGVudW1lcmFibGU6ICExLCB3cml0YWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAgfSB9KSwgdCAmJiAoT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsIHQpIDogZS5fX3Byb3RvX18gPSB0KTtcbiAgICB9ZnVuY3Rpb24gbChlKSB7XG4gICAgICB2YXIgdCA9IGUudG9TdHJpbmcoKTtyZXR1cm4gdC5pbmRleE9mKFwiLlwiKSA+IC0xID8gdC5sZW5ndGggLSB0LmluZGV4T2YoXCIuXCIpIC0gMSA6IDA7XG4gICAgfXQuX19lc01vZHVsZSA9ICEwO3ZhciBzID0gbig3KSxcbiAgICAgICAgdSA9IG8ocyksXG4gICAgICAgIGQgPSBuKDUpLFxuICAgICAgICBjID0gbyhkKSxcbiAgICAgICAgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBmdW5jdGlvbiB0KG4sIG8sIGEpIHtcbiAgICAgICAgaSh0aGlzLCB0KTt2YXIgcyA9IHIodGhpcywgZS5jYWxsKHRoaXMsIG4sIG8pKSxcbiAgICAgICAgICAgIHUgPSBhIHx8IHt9O3JldHVybiBzLl9fbWluID0gdS5taW4sIHMuX19tYXggPSB1Lm1heCwgcy5fX3N0ZXAgPSB1LnN0ZXAsIGMuZGVmYXVsdC5pc1VuZGVmaW5lZChzLl9fc3RlcCkgPyAwID09PSBzLmluaXRpYWxWYWx1ZSA/IHMuX19pbXBsaWVkU3RlcCA9IDEgOiBzLl9faW1wbGllZFN0ZXAgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihNYXRoLmxvZyhNYXRoLmFicyhzLmluaXRpYWxWYWx1ZSkpIC8gTWF0aC5MTjEwKSkgLyAxMCA6IHMuX19pbXBsaWVkU3RlcCA9IHMuX19zdGVwLCBzLl9fcHJlY2lzaW9uID0gbChzLl9faW1wbGllZFN0ZXApLCBzO1xuICAgICAgfXJldHVybiBhKHQsIGUpLCB0LnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBuID0gdDtyZXR1cm4gdm9pZCAwICE9PSB0aGlzLl9fbWluICYmIG4gPCB0aGlzLl9fbWluID8gbiA9IHRoaXMuX19taW4gOiB2b2lkIDAgIT09IHRoaXMuX19tYXggJiYgbiA+IHRoaXMuX19tYXggJiYgKG4gPSB0aGlzLl9fbWF4KSwgdm9pZCAwICE9PSB0aGlzLl9fc3RlcCAmJiBuICUgdGhpcy5fX3N0ZXAgIT09IDAgJiYgKG4gPSBNYXRoLnJvdW5kKG4gLyB0aGlzLl9fc3RlcCkgKiB0aGlzLl9fc3RlcCksIGUucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcywgbik7XG4gICAgICB9LCB0LnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fX21pbiA9IGUsIHRoaXM7XG4gICAgICB9LCB0LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fX21heCA9IGUsIHRoaXM7XG4gICAgICB9LCB0LnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19zdGVwID0gZSwgdGhpcy5fX2ltcGxpZWRTdGVwID0gZSwgdGhpcy5fX3ByZWNpc2lvbiA9IGwoZSksIHRoaXM7XG4gICAgICB9LCB0O1xuICAgIH0odS5kZWZhdWx0KTt0LmRlZmF1bHQgPSBmLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQpIHtcbiAgICAgIGlmICghZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiAhdCB8fCBcIm9iamVjdFwiICE9IHR5cGVvZiB0ICYmIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCA/IGUgOiB0O1xuICAgIH1mdW5jdGlvbiBhKGUsIHQpIHtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2YgdCk7ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IGUsIGVudW1lcmFibGU6ICExLCB3cml0YWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAgfSB9KSwgdCAmJiAoT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsIHQpIDogZS5fX3Byb3RvX18gPSB0KTtcbiAgICB9ZnVuY3Rpb24gbChlLCB0KSB7XG4gICAgICB2YXIgbiA9IE1hdGgucG93KDEwLCB0KTtyZXR1cm4gTWF0aC5yb3VuZChlICogbikgLyBuO1xuICAgIH10Ll9fZXNNb2R1bGUgPSAhMDt2YXIgcyA9IG4oMTIpLFxuICAgICAgICB1ID0gbyhzKSxcbiAgICAgICAgZCA9IG4oOSksXG4gICAgICAgIGMgPSBvKGQpLFxuICAgICAgICBmID0gbig1KSxcbiAgICAgICAgXyA9IG8oZiksXG4gICAgICAgIHAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZnVuY3Rpb24gdChuLCBvLCBhKSB7XG4gICAgICAgIGZ1bmN0aW9uIGwoKSB7XG4gICAgICAgICAgdmFyIGUgPSBwYXJzZUZsb2F0KG0uX19pbnB1dC52YWx1ZSk7Xy5kZWZhdWx0LmlzTmFOKGUpIHx8IG0uc2V0VmFsdWUoZSk7XG4gICAgICAgIH1mdW5jdGlvbiBzKCkge1xuICAgICAgICAgIG0uX19vbkZpbmlzaENoYW5nZSAmJiBtLl9fb25GaW5pc2hDaGFuZ2UuY2FsbChtLCBtLmdldFZhbHVlKCkpO1xuICAgICAgICB9ZnVuY3Rpb24gdSgpIHtcbiAgICAgICAgICBzKCk7XG4gICAgICAgIH1mdW5jdGlvbiBkKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IGIgLSBlLmNsaWVudFk7bS5zZXRWYWx1ZShtLmdldFZhbHVlKCkgKyB0ICogbS5fX2ltcGxpZWRTdGVwKSwgYiA9IGUuY2xpZW50WTtcbiAgICAgICAgfWZ1bmN0aW9uIGYoKSB7XG4gICAgICAgICAgYy5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGQpLCBjLmRlZmF1bHQudW5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIGYpLCBzKCk7XG4gICAgICAgIH1mdW5jdGlvbiBwKGUpIHtcbiAgICAgICAgICBjLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGQpLCBjLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2V1cFwiLCBmKSwgYiA9IGUuY2xpZW50WTtcbiAgICAgICAgfWkodGhpcywgdCk7dmFyIGggPSByKHRoaXMsIGUuY2FsbCh0aGlzLCBuLCBvLCBhKSk7aC5fX3RydW5jYXRpb25TdXNwZW5kZWQgPSAhMTt2YXIgbSA9IGgsXG4gICAgICAgICAgICBiID0gdm9pZCAwO3JldHVybiBoLl9faW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksIGguX19pbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKSwgYy5kZWZhdWx0LmJpbmQoaC5fX2lucHV0LCBcImNoYW5nZVwiLCBsKSwgYy5kZWZhdWx0LmJpbmQoaC5fX2lucHV0LCBcImJsdXJcIiwgdSksIGMuZGVmYXVsdC5iaW5kKGguX19pbnB1dCwgXCJtb3VzZWRvd25cIiwgcCksIGMuZGVmYXVsdC5iaW5kKGguX19pbnB1dCwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgMTMgPT09IGUua2V5Q29kZSAmJiAobS5fX3RydW5jYXRpb25TdXNwZW5kZWQgPSAhMCwgdGhpcy5ibHVyKCksIG0uX190cnVuY2F0aW9uU3VzcGVuZGVkID0gITEsIHMoKSk7XG4gICAgICAgIH0pLCBoLnVwZGF0ZURpc3BsYXkoKSwgaC5kb21FbGVtZW50LmFwcGVuZENoaWxkKGguX19pbnB1dCksIGg7XG4gICAgICB9cmV0dXJuIGEodCwgZSksIHQucHJvdG90eXBlLnVwZGF0ZURpc3BsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9faW5wdXQudmFsdWUgPSB0aGlzLl9fdHJ1bmNhdGlvblN1c3BlbmRlZCA/IHRoaXMuZ2V0VmFsdWUoKSA6IGwodGhpcy5nZXRWYWx1ZSgpLCB0aGlzLl9fcHJlY2lzaW9uKSwgZS5wcm90b3R5cGUudXBkYXRlRGlzcGxheS5jYWxsKHRoaXMpO1xuICAgICAgfSwgdDtcbiAgICB9KHUuZGVmYXVsdCk7dC5kZWZhdWx0ID0gcCwgZS5leHBvcnRzID0gdC5kZWZhdWx0O1xuICB9LCBmdW5jdGlvbiAoZSwgdCwgbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9O1xuICAgIH1mdW5jdGlvbiBpKGUsIHQpIHtcbiAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9ZnVuY3Rpb24gcihlLCB0KSB7XG4gICAgICBpZiAoIWUpIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gIXQgfHwgXCJvYmplY3RcIiAhPSB0eXBlb2YgdCAmJiBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgPyBlIDogdDtcbiAgICB9ZnVuY3Rpb24gYShlLCB0KSB7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHQpO2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh0ICYmIHQucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBlLCBlbnVtZXJhYmxlOiAhMSwgd3JpdGFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwIH0gfSksIHQgJiYgKE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihlLCB0KSA6IGUuX19wcm90b19fID0gdCk7XG4gICAgfWZ1bmN0aW9uIGwoZSwgdCwgbiwgbywgaSkge1xuICAgICAgcmV0dXJuIG8gKyAoaSAtIG8pICogKChlIC0gdCkgLyAobiAtIHQpKTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIHMgPSBuKDEyKSxcbiAgICAgICAgdSA9IG8ocyksXG4gICAgICAgIGQgPSBuKDkpLFxuICAgICAgICBjID0gbyhkKSxcbiAgICAgICAgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBmdW5jdGlvbiB0KG4sIG8sIGEsIHMsIHUpIHtcbiAgICAgICAgZnVuY3Rpb24gZChlKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksIGMuZGVmYXVsdC5iaW5kKHdpbmRvdywgXCJtb3VzZW1vdmVcIiwgZiksIGMuZGVmYXVsdC5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIF8pLCBmKGUpO1xuICAgICAgICB9ZnVuY3Rpb24gZihlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciB0ID0gaC5fX2JhY2tncm91bmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGguc2V0VmFsdWUobChlLmNsaWVudFgsIHQubGVmdCwgdC5yaWdodCwgaC5fX21pbiwgaC5fX21heCkpLCAhMTtcbiAgICAgICAgfWZ1bmN0aW9uIF8oKSB7XG4gICAgICAgICAgYy5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGYpLCBjLmRlZmF1bHQudW5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIF8pLCBoLl9fb25GaW5pc2hDaGFuZ2UgJiYgaC5fX29uRmluaXNoQ2hhbmdlLmNhbGwoaCwgaC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgfWkodGhpcywgdCk7dmFyIHAgPSByKHRoaXMsIGUuY2FsbCh0aGlzLCBuLCBvLCB7IG1pbjogYSwgbWF4OiBzLCBzdGVwOiB1IH0pKSxcbiAgICAgICAgICAgIGggPSBwO3JldHVybiBwLl9fYmFja2dyb3VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHAuX19mb3JlZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgYy5kZWZhdWx0LmJpbmQocC5fX2JhY2tncm91bmQsIFwibW91c2Vkb3duXCIsIGQpLCBjLmRlZmF1bHQuYWRkQ2xhc3MocC5fX2JhY2tncm91bmQsIFwic2xpZGVyXCIpLCBjLmRlZmF1bHQuYWRkQ2xhc3MocC5fX2ZvcmVncm91bmQsIFwic2xpZGVyLWZnXCIpLCBwLnVwZGF0ZURpc3BsYXkoKSwgcC5fX2JhY2tncm91bmQuYXBwZW5kQ2hpbGQocC5fX2ZvcmVncm91bmQpLCBwLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQocC5fX2JhY2tncm91bmQpLCBwO1xuICAgICAgfXJldHVybiBhKHQsIGUpLCB0LnByb3RvdHlwZS51cGRhdGVEaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9ICh0aGlzLmdldFZhbHVlKCkgLSB0aGlzLl9fbWluKSAvICh0aGlzLl9fbWF4IC0gdGhpcy5fX21pbik7cmV0dXJuIHRoaXMuX19mb3JlZ3JvdW5kLnN0eWxlLndpZHRoID0gMTAwICogdCArIFwiJVwiLCBlLnByb3RvdHlwZS51cGRhdGVEaXNwbGF5LmNhbGwodGhpcyk7XG4gICAgICB9LCB0O1xuICAgIH0odS5kZWZhdWx0KTt0LmRlZmF1bHQgPSBmLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQpIHtcbiAgICAgIGlmICghZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiAhdCB8fCBcIm9iamVjdFwiICE9IHR5cGVvZiB0ICYmIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCA/IGUgOiB0O1xuICAgIH1mdW5jdGlvbiBhKGUsIHQpIHtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2YgdCk7ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IGUsIGVudW1lcmFibGU6ICExLCB3cml0YWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAgfSB9KSwgdCAmJiAoT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsIHQpIDogZS5fX3Byb3RvX18gPSB0KTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIGwgPSBuKDcpLFxuICAgICAgICBzID0gbyhsKSxcbiAgICAgICAgdSA9IG4oOSksXG4gICAgICAgIGQgPSBvKHUpLFxuICAgICAgICBjID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZ1bmN0aW9uIHQobiwgbywgYSkge1xuICAgICAgICBpKHRoaXMsIHQpO3ZhciBsID0gcih0aGlzLCBlLmNhbGwodGhpcywgbiwgbykpLFxuICAgICAgICAgICAgcyA9IGw7cmV0dXJuIGwuX19idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBsLl9fYnV0dG9uLmlubmVySFRNTCA9IHZvaWQgMCA9PT0gYSA/IFwiRmlyZVwiIDogYSwgZC5kZWZhdWx0LmJpbmQobC5fX2J1dHRvbiwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCksIHMuZmlyZSgpLCAhMTtcbiAgICAgICAgfSksIGQuZGVmYXVsdC5hZGRDbGFzcyhsLl9fYnV0dG9uLCBcImJ1dHRvblwiKSwgbC5kb21FbGVtZW50LmFwcGVuZENoaWxkKGwuX19idXR0b24pLCBsO1xuICAgICAgfXJldHVybiBhKHQsIGUpLCB0LnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9fb25DaGFuZ2UgJiYgdGhpcy5fX29uQ2hhbmdlLmNhbGwodGhpcyksIHRoaXMuZ2V0VmFsdWUoKS5jYWxsKHRoaXMub2JqZWN0KSwgdGhpcy5fX29uRmluaXNoQ2hhbmdlICYmIHRoaXMuX19vbkZpbmlzaENoYW5nZS5jYWxsKHRoaXMsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gICAgICB9LCB0O1xuICAgIH0ocy5kZWZhdWx0KTt0LmRlZmF1bHQgPSBjLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG4gICAgfWZ1bmN0aW9uIGkoZSwgdCkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1mdW5jdGlvbiByKGUsIHQpIHtcbiAgICAgIGlmICghZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiAhdCB8fCBcIm9iamVjdFwiICE9IHR5cGVvZiB0ICYmIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCA/IGUgOiB0O1xuICAgIH1mdW5jdGlvbiBhKGUsIHQpIHtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2YgdCk7ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IGUsIGVudW1lcmFibGU6ICExLCB3cml0YWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAgfSB9KSwgdCAmJiAoT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsIHQpIDogZS5fX3Byb3RvX18gPSB0KTtcbiAgICB9ZnVuY3Rpb24gbChlLCB0LCBuLCBvKSB7XG4gICAgICBlLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiLCBnLmRlZmF1bHQuZWFjaCh5LCBmdW5jdGlvbiAoaSkge1xuICAgICAgICBlLnN0eWxlLmNzc1RleHQgKz0gXCJiYWNrZ3JvdW5kOiBcIiArIGkgKyBcImxpbmVhci1ncmFkaWVudChcIiArIHQgKyBcIiwgXCIgKyBuICsgXCIgMCUsIFwiICsgbyArIFwiIDEwMCUpOyBcIjtcbiAgICAgIH0pO1xuICAgIH1mdW5jdGlvbiBzKGUpIHtcbiAgICAgIGUuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCIsIGUuc3R5bGUuY3NzVGV4dCArPSBcImJhY2tncm91bmQ6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsICNmZjAwZmYgMTclLCAjMDAwMGZmIDM0JSwgIzAwZmZmZiA1MCUsICMwMGZmMDAgNjclLCAjZmZmZjAwIDg0JSwgI2ZmMDAwMCAxMDAlKTtcIiwgZS5zdHlsZS5jc3NUZXh0ICs9IFwiYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpO1wiLCBlLnN0eWxlLmNzc1RleHQgKz0gXCJiYWNrZ3JvdW5kOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAgI2ZmMDAwMCAwJSwjZmYwMGZmIDE3JSwjMDAwMGZmIDM0JSwjMDBmZmZmIDUwJSwjMDBmZjAwIDY3JSwjZmZmZjAwIDg0JSwjZmYwMDAwIDEwMCUpO1wiLCBlLnN0eWxlLmNzc1RleHQgKz0gXCJiYWNrZ3JvdW5kOiAtbXMtbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsI2ZmMDBmZiAxNyUsIzAwMDBmZiAzNCUsIzAwZmZmZiA1MCUsIzAwZmYwMCA2NyUsI2ZmZmYwMCA4NCUsI2ZmMDAwMCAxMDAlKTtcIiwgZS5zdHlsZS5jc3NUZXh0ICs9IFwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvcCwgICNmZjAwMDAgMCUsI2ZmMDBmZiAxNyUsIzAwMDBmZiAzNCUsIzAwZmZmZiA1MCUsIzAwZmYwMCA2NyUsI2ZmZmYwMCA4NCUsI2ZmMDAwMCAxMDAlKTtcIjtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIHUgPSBuKDcpLFxuICAgICAgICBkID0gbyh1KSxcbiAgICAgICAgYyA9IG4oOSksXG4gICAgICAgIGYgPSBvKGMpLFxuICAgICAgICBfID0gbigyKSxcbiAgICAgICAgcCA9IG8oXyksXG4gICAgICAgIGggPSBuKDMpLFxuICAgICAgICBtID0gbyhoKSxcbiAgICAgICAgYiA9IG4oNSksXG4gICAgICAgIGcgPSBvKGIpLFxuICAgICAgICB2ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZ1bmN0aW9uIHQobiwgbykge1xuICAgICAgICBmdW5jdGlvbiBhKGUpIHtcbiAgICAgICAgICBoKGUpLCBmLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGgpLCBmLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2V1cFwiLCB1KTtcbiAgICAgICAgfWZ1bmN0aW9uIHUoKSB7XG4gICAgICAgICAgZi5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGgpLCBmLmRlZmF1bHQudW5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIHUpLCBfKCk7XG4gICAgICAgIH1mdW5jdGlvbiBkKCkge1xuICAgICAgICAgIHZhciBlID0gKDAsIG0uZGVmYXVsdCkodGhpcy52YWx1ZSk7ZSAhPT0gITEgPyAoeS5fX2NvbG9yLl9fc3RhdGUgPSBlLCB5LnNldFZhbHVlKHkuX19jb2xvci50b09yaWdpbmFsKCkpKSA6IHRoaXMudmFsdWUgPSB5Ll9fY29sb3IudG9TdHJpbmcoKTtcbiAgICAgICAgfWZ1bmN0aW9uIGMoKSB7XG4gICAgICAgICAgZi5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGIpLCBmLmRlZmF1bHQudW5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIGMpLCBfKCk7XG4gICAgICAgIH1mdW5jdGlvbiBfKCkge1xuICAgICAgICAgIHkuX19vbkZpbmlzaENoYW5nZSAmJiB5Ll9fb25GaW5pc2hDaGFuZ2UuY2FsbCh5LCB5Ll9fY29sb3IudG9PcmlnaW5hbCgpKTtcbiAgICAgICAgfWZ1bmN0aW9uIGgoZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTt2YXIgdCA9IHkuX19zYXR1cmF0aW9uX2ZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICBuID0gKGUuY2xpZW50WCAtIHQubGVmdCkgLyAodC5yaWdodCAtIHQubGVmdCksXG4gICAgICAgICAgICAgIG8gPSAxIC0gKGUuY2xpZW50WSAtIHQudG9wKSAvICh0LmJvdHRvbSAtIHQudG9wKTtyZXR1cm4gbyA+IDEgPyBvID0gMSA6IG8gPCAwICYmIChvID0gMCksIG4gPiAxID8gbiA9IDEgOiBuIDwgMCAmJiAobiA9IDApLCB5Ll9fY29sb3IudiA9IG8sIHkuX19jb2xvci5zID0gbiwgeS5zZXRWYWx1ZSh5Ll9fY29sb3IudG9PcmlnaW5hbCgpKSwgITE7XG4gICAgICAgIH1mdW5jdGlvbiBiKGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQgPSB5Ll9faHVlX2ZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICBuID0gMSAtIChlLmNsaWVudFkgLSB0LnRvcCkgLyAodC5ib3R0b20gLSB0LnRvcCk7cmV0dXJuIG4gPiAxID8gbiA9IDEgOiBuIDwgMCAmJiAobiA9IDApLCB5Ll9fY29sb3IuaCA9IDM2MCAqIG4sIHkuc2V0VmFsdWUoeS5fX2NvbG9yLnRvT3JpZ2luYWwoKSksICExO1xuICAgICAgICB9aSh0aGlzLCB0KTt2YXIgdiA9IHIodGhpcywgZS5jYWxsKHRoaXMsIG4sIG8pKTt2Ll9fY29sb3IgPSBuZXcgcC5kZWZhdWx0KHYuZ2V0VmFsdWUoKSksIHYuX190ZW1wID0gbmV3IHAuZGVmYXVsdCgwKTt2YXIgeSA9IHY7di5kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgZi5kZWZhdWx0Lm1ha2VTZWxlY3RhYmxlKHYuZG9tRWxlbWVudCwgITEpLCB2Ll9fc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB2Ll9fc2VsZWN0b3IuY2xhc3NOYW1lID0gXCJzZWxlY3RvclwiLCB2Ll9fc2F0dXJhdGlvbl9maWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHYuX19zYXR1cmF0aW9uX2ZpZWxkLmNsYXNzTmFtZSA9IFwic2F0dXJhdGlvbi1maWVsZFwiLCB2Ll9fZmllbGRfa25vYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHYuX19maWVsZF9rbm9iLmNsYXNzTmFtZSA9IFwiZmllbGQta25vYlwiLCB2Ll9fZmllbGRfa25vYl9ib3JkZXIgPSBcIjJweCBzb2xpZCBcIiwgdi5fX2h1ZV9rbm9iID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgdi5fX2h1ZV9rbm9iLmNsYXNzTmFtZSA9IFwiaHVlLWtub2JcIiwgdi5fX2h1ZV9maWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHYuX19odWVfZmllbGQuY2xhc3NOYW1lID0gXCJodWUtZmllbGRcIiwgdi5fX2lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLCB2Ll9faW5wdXQudHlwZSA9IFwidGV4dFwiLCB2Ll9faW5wdXRfdGV4dFNoYWRvdyA9IFwiMCAxcHggMXB4IFwiLCBmLmRlZmF1bHQuYmluZCh2Ll9faW5wdXQsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIDEzID09PSBlLmtleUNvZGUgJiYgZC5jYWxsKHRoaXMpO1xuICAgICAgICB9KSwgZi5kZWZhdWx0LmJpbmQodi5fX2lucHV0LCBcImJsdXJcIiwgZCksIGYuZGVmYXVsdC5iaW5kKHYuX19zZWxlY3RvciwgXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGYuZGVmYXVsdC5hZGRDbGFzcyh0aGlzLCBcImRyYWdcIikuYmluZCh3aW5kb3csIFwibW91c2V1cFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmLmRlZmF1bHQucmVtb3ZlQ2xhc3MoeS5fX3NlbGVjdG9yLCBcImRyYWdcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO3ZhciB3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gZy5kZWZhdWx0LmV4dGVuZCh2Ll9fc2VsZWN0b3Iuc3R5bGUsIHsgd2lkdGg6IFwiMTIycHhcIiwgaGVpZ2h0OiBcIjEwMnB4XCIsIHBhZGRpbmc6IFwiM3B4XCIsIGJhY2tncm91bmRDb2xvcjogXCIjMjIyXCIsIGJveFNoYWRvdzogXCIwcHggMXB4IDNweCByZ2JhKDAsMCwwLDAuMylcIiB9KSwgZy5kZWZhdWx0LmV4dGVuZCh2Ll9fZmllbGRfa25vYi5zdHlsZSwgeyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB3aWR0aDogXCIxMnB4XCIsIGhlaWdodDogXCIxMnB4XCIsIGJvcmRlcjogdi5fX2ZpZWxkX2tub2JfYm9yZGVyICsgKHYuX19jb2xvci52IDwgLjUgPyBcIiNmZmZcIiA6IFwiIzAwMFwiKSwgYm94U2hhZG93OiBcIjBweCAxcHggM3B4IHJnYmEoMCwwLDAsMC41KVwiLCBib3JkZXJSYWRpdXM6IFwiMTJweFwiLCB6SW5kZXg6IDEgfSksIGcuZGVmYXVsdC5leHRlbmQodi5fX2h1ZV9rbm9iLnN0eWxlLCB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHdpZHRoOiBcIjE1cHhcIiwgaGVpZ2h0OiBcIjJweFwiLCBib3JkZXJSaWdodDogXCI0cHggc29saWQgI2ZmZlwiLCB6SW5kZXg6IDEgfSksIGcuZGVmYXVsdC5leHRlbmQodi5fX3NhdHVyYXRpb25fZmllbGQuc3R5bGUsIHsgd2lkdGg6IFwiMTAwcHhcIiwgaGVpZ2h0OiBcIjEwMHB4XCIsIGJvcmRlcjogXCIxcHggc29saWQgIzU1NVwiLCBtYXJnaW5SaWdodDogXCIzcHhcIiwgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIiwgY3Vyc29yOiBcInBvaW50ZXJcIiB9KSwgZy5kZWZhdWx0LmV4dGVuZCh3LnN0eWxlLCB7IHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiwgYmFja2dyb3VuZDogXCJub25lXCIgfSksIGwodywgXCJ0b3BcIiwgXCJyZ2JhKDAsMCwwLDApXCIsIFwiIzAwMFwiKSwgZy5kZWZhdWx0LmV4dGVuZCh2Ll9faHVlX2ZpZWxkLnN0eWxlLCB7IHdpZHRoOiBcIjE1cHhcIiwgaGVpZ2h0OiBcIjEwMHB4XCIsIGJvcmRlcjogXCIxcHggc29saWQgIzU1NVwiLCBjdXJzb3I6IFwibnMtcmVzaXplXCIsIHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHRvcDogXCIzcHhcIiwgcmlnaHQ6IFwiM3B4XCIgfSksIHModi5fX2h1ZV9maWVsZCksIGcuZGVmYXVsdC5leHRlbmQodi5fX2lucHV0LnN0eWxlLCB7IG91dGxpbmU6IFwibm9uZVwiLCB0ZXh0QWxpZ246IFwiY2VudGVyXCIsIGNvbG9yOiBcIiNmZmZcIiwgYm9yZGVyOiAwLCBmb250V2VpZ2h0OiBcImJvbGRcIiwgdGV4dFNoYWRvdzogdi5fX2lucHV0X3RleHRTaGFkb3cgKyBcInJnYmEoMCwwLDAsMC43KVwiIH0pLCBmLmRlZmF1bHQuYmluZCh2Ll9fc2F0dXJhdGlvbl9maWVsZCwgXCJtb3VzZWRvd25cIiwgYSksIGYuZGVmYXVsdC5iaW5kKHYuX19maWVsZF9rbm9iLCBcIm1vdXNlZG93blwiLCBhKSwgZi5kZWZhdWx0LmJpbmQodi5fX2h1ZV9maWVsZCwgXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBiKGUpLCBmLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2Vtb3ZlXCIsIGIpLCBmLmRlZmF1bHQuYmluZCh3aW5kb3csIFwibW91c2V1cFwiLCBjKTtcbiAgICAgICAgfSksIHYuX19zYXR1cmF0aW9uX2ZpZWxkLmFwcGVuZENoaWxkKHcpLCB2Ll9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQodi5fX2ZpZWxkX2tub2IpLCB2Ll9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQodi5fX3NhdHVyYXRpb25fZmllbGQpLCB2Ll9fc2VsZWN0b3IuYXBwZW5kQ2hpbGQodi5fX2h1ZV9maWVsZCksIHYuX19odWVfZmllbGQuYXBwZW5kQ2hpbGQodi5fX2h1ZV9rbm9iKSwgdi5kb21FbGVtZW50LmFwcGVuZENoaWxkKHYuX19pbnB1dCksIHYuZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh2Ll9fc2VsZWN0b3IpLCB2LnVwZGF0ZURpc3BsYXkoKSwgdjtcbiAgICAgIH1yZXR1cm4gYSh0LCBlKSwgdC5wcm90b3R5cGUudXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSAoMCwgbS5kZWZhdWx0KSh0aGlzLmdldFZhbHVlKCkpO2lmIChlICE9PSAhMSkge1xuICAgICAgICAgIHZhciB0ID0gITE7Zy5kZWZhdWx0LmVhY2gocC5kZWZhdWx0LkNPTVBPTkVOVFMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICBpZiAoIWcuZGVmYXVsdC5pc1VuZGVmaW5lZChlW25dKSAmJiAhZy5kZWZhdWx0LmlzVW5kZWZpbmVkKHRoaXMuX19jb2xvci5fX3N0YXRlW25dKSAmJiBlW25dICE9PSB0aGlzLl9fY29sb3IuX19zdGF0ZVtuXSkgcmV0dXJuIHQgPSAhMCwge307XG4gICAgICAgICAgfSwgdGhpcyksIHQgJiYgZy5kZWZhdWx0LmV4dGVuZCh0aGlzLl9fY29sb3IuX19zdGF0ZSwgZSk7XG4gICAgICAgIH1nLmRlZmF1bHQuZXh0ZW5kKHRoaXMuX190ZW1wLl9fc3RhdGUsIHRoaXMuX19jb2xvci5fX3N0YXRlKSwgdGhpcy5fX3RlbXAuYSA9IDE7dmFyIG4gPSB0aGlzLl9fY29sb3IudiA8IC41IHx8IHRoaXMuX19jb2xvci5zID4gLjUgPyAyNTUgOiAwLFxuICAgICAgICAgICAgbyA9IDI1NSAtIG47Zy5kZWZhdWx0LmV4dGVuZCh0aGlzLl9fZmllbGRfa25vYi5zdHlsZSwgeyBtYXJnaW5MZWZ0OiAxMDAgKiB0aGlzLl9fY29sb3IucyAtIDcgKyBcInB4XCIsIG1hcmdpblRvcDogMTAwICogKDEgLSB0aGlzLl9fY29sb3IudikgLSA3ICsgXCJweFwiLCBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuX190ZW1wLnRvSGV4U3RyaW5nKCksIGJvcmRlcjogdGhpcy5fX2ZpZWxkX2tub2JfYm9yZGVyICsgXCJyZ2IoXCIgKyBuICsgXCIsXCIgKyBuICsgXCIsXCIgKyBuICsgXCIpXCIgfSksIHRoaXMuX19odWVfa25vYi5zdHlsZS5tYXJnaW5Ub3AgPSAxMDAgKiAoMSAtIHRoaXMuX19jb2xvci5oIC8gMzYwKSArIFwicHhcIiwgdGhpcy5fX3RlbXAucyA9IDEsIHRoaXMuX190ZW1wLnYgPSAxLCBsKHRoaXMuX19zYXR1cmF0aW9uX2ZpZWxkLCBcImxlZnRcIiwgXCIjZmZmXCIsIHRoaXMuX190ZW1wLnRvSGV4U3RyaW5nKCkpLCB0aGlzLl9faW5wdXQudmFsdWUgPSB0aGlzLl9fY29sb3IudG9TdHJpbmcoKSwgZy5kZWZhdWx0LmV4dGVuZCh0aGlzLl9faW5wdXQuc3R5bGUsIHsgYmFja2dyb3VuZENvbG9yOiB0aGlzLl9fY29sb3IudG9IZXhTdHJpbmcoKSwgY29sb3I6IFwicmdiKFwiICsgbiArIFwiLFwiICsgbiArIFwiLFwiICsgbiArIFwiKVwiLCB0ZXh0U2hhZG93OiB0aGlzLl9faW5wdXRfdGV4dFNoYWRvdyArIFwicmdiYShcIiArIG8gKyBcIixcIiArIG8gKyBcIixcIiArIG8gKyBcIiwuNylcIiB9KTtcbiAgICAgIH0sIHQ7XG4gICAgfShkLmRlZmF1bHQpLFxuICAgICAgICB5ID0gW1wiLW1vei1cIiwgXCItby1cIiwgXCItd2Via2l0LVwiLCBcIi1tcy1cIiwgXCJcIl07dC5kZWZhdWx0ID0gdiwgZS5leHBvcnRzID0gdC5kZWZhdWx0O1xuICB9LCBmdW5jdGlvbiAoZSwgdCwgbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9O1xuICAgIH1mdW5jdGlvbiBpKGUsIHQsIG4pIHtcbiAgICAgIHZhciBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO3JldHVybiB0ICYmIG8uYXBwZW5kQ2hpbGQodCksIG4gPyBlLl9fdWwuaW5zZXJ0QmVmb3JlKG8sIG4pIDogZS5fX3VsLmFwcGVuZENoaWxkKG8pLCBlLm9uUmVzaXplKCksIG87XG4gICAgfWZ1bmN0aW9uIHIoZSwgdCkge1xuICAgICAgdmFyIG4gPSBlLl9fcHJlc2V0X3NlbGVjdFtlLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4XTt0ID8gbi5pbm5lckhUTUwgPSBuLnZhbHVlICsgXCIqXCIgOiBuLmlubmVySFRNTCA9IG4udmFsdWU7XG4gICAgfWZ1bmN0aW9uIGEoZSwgdCwgbikge1xuICAgICAgaWYgKG4uX19saSA9IHQsIG4uX19ndWkgPSBlLCBVLmRlZmF1bHQuZXh0ZW5kKG4sIHsgb3B0aW9uczogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhciBvID0gbi5fX2xpLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbi5yZW1vdmUoKSwgcyhlLCBuLm9iamVjdCwgbi5wcm9wZXJ0eSwgeyBiZWZvcmU6IG8sIGZhY3RvcnlBcmdzOiBbVS5kZWZhdWx0LnRvQXJyYXkoYXJndW1lbnRzKV0gfSk7XG4gICAgICAgICAgfWlmIChVLmRlZmF1bHQuaXNBcnJheSh0KSB8fCBVLmRlZmF1bHQuaXNPYmplY3QodCkpIHtcbiAgICAgICAgICAgIHZhciBpID0gbi5fX2xpLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbi5yZW1vdmUoKSwgcyhlLCBuLm9iamVjdCwgbi5wcm9wZXJ0eSwgeyBiZWZvcmU6IGksIGZhY3RvcnlBcmdzOiBbdF0gfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBuYW1lOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBuLl9fbGkuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gZSwgbjtcbiAgICAgICAgfSwgbGlzdGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIG4uX19ndWkubGlzdGVuKG4pLCBuO1xuICAgICAgICB9LCByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gbi5fX2d1aS5yZW1vdmUobiksIG47XG4gICAgICAgIH0gfSksIG4gaW5zdGFuY2VvZiBOLmRlZmF1bHQpIHtcbiAgICAgICAgdmFyIG8gPSBuZXcgQi5kZWZhdWx0KG4ub2JqZWN0LCBuLnByb3BlcnR5LCB7XG4gICAgICAgICAgbWluOiBuLl9fbWluLCBtYXg6IG4uX19tYXgsIHN0ZXA6IG4uX19zdGVwIH0pO1UuZGVmYXVsdC5lYWNoKFtcInVwZGF0ZURpc3BsYXlcIiwgXCJvbkNoYW5nZVwiLCBcIm9uRmluaXNoQ2hhbmdlXCIsIFwic3RlcFwiXSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IG5bZV0sXG4gICAgICAgICAgICAgIGkgPSBvW2VdO25bZV0gPSBvW2VdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBpLmFwcGx5KG8sIGUpLCB0LmFwcGx5KG4sIGUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pLCB6LmRlZmF1bHQuYWRkQ2xhc3ModCwgXCJoYXMtc2xpZGVyXCIpLCBuLmRvbUVsZW1lbnQuaW5zZXJ0QmVmb3JlKG8uZG9tRWxlbWVudCwgbi5kb21FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgIH0gZWxzZSBpZiAobiBpbnN0YW5jZW9mIEIuZGVmYXVsdCkge1xuICAgICAgICB2YXIgaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgaWYgKFUuZGVmYXVsdC5pc051bWJlcihuLl9fbWluKSAmJiBVLmRlZmF1bHQuaXNOdW1iZXIobi5fX21heCkpIHtcbiAgICAgICAgICAgIHZhciBvID0gbi5fX2xpLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTCxcbiAgICAgICAgICAgICAgICBpID0gbi5fX2d1aS5fX2xpc3RlbmluZy5pbmRleE9mKG4pID4gLTE7bi5yZW1vdmUoKTt2YXIgciA9IHMoZSwgbi5vYmplY3QsIG4ucHJvcGVydHksIHsgYmVmb3JlOiBuLl9fbGkubmV4dEVsZW1lbnRTaWJsaW5nLCBmYWN0b3J5QXJnczogW24uX19taW4sIG4uX19tYXgsIG4uX19zdGVwXSB9KTtyZXR1cm4gci5uYW1lKG8pLCBpICYmIHIubGlzdGVuKCksIHI7XG4gICAgICAgICAgfXJldHVybiB0O1xuICAgICAgICB9O24ubWluID0gVS5kZWZhdWx0LmNvbXBvc2UoaSwgbi5taW4pLCBuLm1heCA9IFUuZGVmYXVsdC5jb21wb3NlKGksIG4ubWF4KTtcbiAgICAgIH0gZWxzZSBuIGluc3RhbmNlb2YgTy5kZWZhdWx0ID8gKHouZGVmYXVsdC5iaW5kKHQsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB6LmRlZmF1bHQuZmFrZUV2ZW50KG4uX19jaGVja2JveCwgXCJjbGlja1wiKTtcbiAgICAgIH0pLCB6LmRlZmF1bHQuYmluZChuLl9fY2hlY2tib3gsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0pKSA6IG4gaW5zdGFuY2VvZiBSLmRlZmF1bHQgPyAoei5kZWZhdWx0LmJpbmQodCwgXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHouZGVmYXVsdC5mYWtlRXZlbnQobi5fX2J1dHRvbiwgXCJjbGlja1wiKTtcbiAgICAgIH0pLCB6LmRlZmF1bHQuYmluZCh0LCBcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHouZGVmYXVsdC5hZGRDbGFzcyhuLl9fYnV0dG9uLCBcImhvdmVyXCIpO1xuICAgICAgfSksIHouZGVmYXVsdC5iaW5kKHQsIFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB6LmRlZmF1bHQucmVtb3ZlQ2xhc3Mobi5fX2J1dHRvbiwgXCJob3ZlclwiKTtcbiAgICAgIH0pKSA6IG4gaW5zdGFuY2VvZiBqLmRlZmF1bHQgJiYgKHouZGVmYXVsdC5hZGRDbGFzcyh0LCBcImNvbG9yXCIpLCBuLnVwZGF0ZURpc3BsYXkgPSBVLmRlZmF1bHQuY29tcG9zZShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gdC5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBuLl9fY29sb3IudG9TdHJpbmcoKSwgZTtcbiAgICAgIH0sIG4udXBkYXRlRGlzcGxheSksIG4udXBkYXRlRGlzcGxheSgpKTtuLnNldFZhbHVlID0gVS5kZWZhdWx0LmNvbXBvc2UoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIGUuZ2V0Um9vdCgpLl9fcHJlc2V0X3NlbGVjdCAmJiBuLmlzTW9kaWZpZWQoKSAmJiByKGUuZ2V0Um9vdCgpLCAhMCksIHQ7XG4gICAgICB9LCBuLnNldFZhbHVlKTtcbiAgICB9ZnVuY3Rpb24gbChlLCB0KSB7XG4gICAgICB2YXIgbiA9IGUuZ2V0Um9vdCgpLFxuICAgICAgICAgIG8gPSBuLl9fcmVtZW1iZXJlZE9iamVjdHMuaW5kZXhPZih0Lm9iamVjdCk7aWYgKG8gIT09IC0xKSB7XG4gICAgICAgIHZhciBpID0gbi5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVyc1tvXTtpZiAodm9pZCAwID09PSBpICYmIChpID0ge30sIG4uX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnNbb10gPSBpKSwgaVt0LnByb3BlcnR5XSA9IHQsIG4ubG9hZCAmJiBuLmxvYWQucmVtZW1iZXJlZCkge1xuICAgICAgICAgIHZhciByID0gbi5sb2FkLnJlbWVtYmVyZWQsXG4gICAgICAgICAgICAgIGEgPSB2b2lkIDA7aWYgKHJbZS5wcmVzZXRdKSBhID0gcltlLnByZXNldF07ZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXJbUV0pIHJldHVybjthID0gcltRXTtcbiAgICAgICAgICB9aWYgKGFbb10gJiYgdm9pZCAwICE9PSBhW29dW3QucHJvcGVydHldKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGFbb11bdC5wcm9wZXJ0eV07dC5pbml0aWFsVmFsdWUgPSBsLCB0LnNldFZhbHVlKGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1mdW5jdGlvbiBzKGUsIHQsIG4sIG8pIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IHRbbl0pIHRocm93IG5ldyBFcnJvcignT2JqZWN0IFwiJyArIHQgKyAnXCIgaGFzIG5vIHByb3BlcnR5IFwiJyArIG4gKyAnXCInKTt2YXIgciA9IHZvaWQgMDtpZiAoby5jb2xvcikgciA9IG5ldyBqLmRlZmF1bHQodCwgbik7ZWxzZSB7XG4gICAgICAgIHZhciBzID0gW3QsIG5dLmNvbmNhdChvLmZhY3RvcnlBcmdzKTtyID0gQy5kZWZhdWx0LmFwcGx5KGUsIHMpO1xuICAgICAgfW8uYmVmb3JlIGluc3RhbmNlb2YgUy5kZWZhdWx0ICYmIChvLmJlZm9yZSA9IG8uYmVmb3JlLl9fbGkpLCBsKGUsIHIpLCB6LmRlZmF1bHQuYWRkQ2xhc3Moci5kb21FbGVtZW50LCBcImNcIik7dmFyIHUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt6LmRlZmF1bHQuYWRkQ2xhc3ModSwgXCJwcm9wZXJ0eS1uYW1lXCIpLCB1LmlubmVySFRNTCA9IHIucHJvcGVydHk7dmFyIGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2QuYXBwZW5kQ2hpbGQodSksIGQuYXBwZW5kQ2hpbGQoci5kb21FbGVtZW50KTt2YXIgYyA9IGkoZSwgZCwgby5iZWZvcmUpO3JldHVybiB6LmRlZmF1bHQuYWRkQ2xhc3MoYywgb2UuQ0xBU1NfQ09OVFJPTExFUl9ST1cpLCByIGluc3RhbmNlb2Ygai5kZWZhdWx0ID8gei5kZWZhdWx0LmFkZENsYXNzKGMsIFwiY29sb3JcIikgOiB6LmRlZmF1bHQuYWRkQ2xhc3MoYywgZyhyLmdldFZhbHVlKCkpKSwgYShlLCBjLCByKSwgZS5fX2NvbnRyb2xsZXJzLnB1c2gociksIHI7XG4gICAgfWZ1bmN0aW9uIHUoZSwgdCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgKyBcIi5cIiArIHQ7XG4gICAgfWZ1bmN0aW9uIGQoZSwgdCwgbikge1xuICAgICAgdmFyIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO28uaW5uZXJIVE1MID0gdCwgby52YWx1ZSA9IHQsIGUuX19wcmVzZXRfc2VsZWN0LmFwcGVuZENoaWxkKG8pLCBuICYmIChlLl9fcHJlc2V0X3NlbGVjdC5zZWxlY3RlZEluZGV4ID0gZS5fX3ByZXNldF9zZWxlY3QubGVuZ3RoIC0gMSk7XG4gICAgfWZ1bmN0aW9uIGMoZSwgdCkge1xuICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gZS51c2VMb2NhbFN0b3JhZ2UgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgICB9ZnVuY3Rpb24gZihlKSB7XG4gICAgICB2YXIgdCA9IGUuX19zYXZlX3JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTt6LmRlZmF1bHQuYWRkQ2xhc3MoZS5kb21FbGVtZW50LCBcImhhcy1zYXZlXCIpLCBlLl9fdWwuaW5zZXJ0QmVmb3JlKHQsIGUuX191bC5maXJzdENoaWxkKSwgei5kZWZhdWx0LmFkZENsYXNzKHQsIFwic2F2ZS1yb3dcIik7dmFyIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtuLmlubmVySFRNTCA9IFwiJm5ic3A7XCIsIHouZGVmYXVsdC5hZGRDbGFzcyhuLCBcImJ1dHRvbiBnZWFyc1wiKTt2YXIgbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO28uaW5uZXJIVE1MID0gXCJTYXZlXCIsIHouZGVmYXVsdC5hZGRDbGFzcyhvLCBcImJ1dHRvblwiKSwgei5kZWZhdWx0LmFkZENsYXNzKG8sIFwic2F2ZVwiKTt2YXIgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2kuaW5uZXJIVE1MID0gXCJOZXdcIiwgei5kZWZhdWx0LmFkZENsYXNzKGksIFwiYnV0dG9uXCIpLCB6LmRlZmF1bHQuYWRkQ2xhc3MoaSwgXCJzYXZlLWFzXCIpO3ZhciByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ci5pbm5lckhUTUwgPSBcIlJldmVydFwiLCB6LmRlZmF1bHQuYWRkQ2xhc3MociwgXCJidXR0b25cIiksIHouZGVmYXVsdC5hZGRDbGFzcyhyLCBcInJldmVydFwiKTt2YXIgYSA9IGUuX19wcmVzZXRfc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpZiAoZS5sb2FkICYmIGUubG9hZC5yZW1lbWJlcmVkID8gVS5kZWZhdWx0LmVhY2goZS5sb2FkLnJlbWVtYmVyZWQsIGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgIGQoZSwgbiwgbiA9PT0gZS5wcmVzZXQpO1xuICAgICAgfSkgOiBkKGUsIFEsICExKSwgei5kZWZhdWx0LmJpbmQoYSwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGUuX19wcmVzZXRfc2VsZWN0Lmxlbmd0aDsgdCsrKSBlLl9fcHJlc2V0X3NlbGVjdFt0XS5pbm5lckhUTUwgPSBlLl9fcHJlc2V0X3NlbGVjdFt0XS52YWx1ZTtlLnByZXNldCA9IHRoaXMudmFsdWU7XG4gICAgICB9KSwgdC5hcHBlbmRDaGlsZChhKSwgdC5hcHBlbmRDaGlsZChuKSwgdC5hcHBlbmRDaGlsZChvKSwgdC5hcHBlbmRDaGlsZChpKSwgdC5hcHBlbmRDaGlsZChyKSwgcSkge1xuICAgICAgICB2YXIgbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGctbG9jYWwtZXhwbGFpblwiKSxcbiAgICAgICAgICAgIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRnLWxvY2FsLXN0b3JhZ2VcIiksXG4gICAgICAgICAgICBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZy1zYXZlLWxvY2FsbHlcIik7Zi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiLCBcInRydWVcIiA9PT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odShlLCBcImlzTG9jYWxcIikpICYmIHMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiksIGMoZSwgbCksIHouZGVmYXVsdC5iaW5kKHMsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlLnVzZUxvY2FsU3RvcmFnZSA9ICFlLnVzZUxvY2FsU3RvcmFnZSwgYyhlLCBsKTtcbiAgICAgICAgfSk7XG4gICAgICB9dmFyIF8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRnLW5ldy1jb25zdHJ1Y3RvclwiKTt6LmRlZmF1bHQuYmluZChfLCBcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgIWUubWV0YUtleSB8fCA2NyAhPT0gZS53aGljaCAmJiA2NyAhPT0gZS5rZXlDb2RlIHx8IFouaGlkZSgpO1xuICAgICAgfSksIHouZGVmYXVsdC5iaW5kKG4sIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KGUuZ2V0U2F2ZU9iamVjdCgpLCB2b2lkIDAsIDIpLCBaLnNob3coKSwgXy5mb2N1cygpLCBfLnNlbGVjdCgpO1xuICAgICAgfSksIHouZGVmYXVsdC5iaW5kKG8sIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlLnNhdmUoKTtcbiAgICAgIH0pLCB6LmRlZmF1bHQuYmluZChpLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSBwcm9tcHQoXCJFbnRlciBhIG5ldyBwcmVzZXQgbmFtZS5cIik7dCAmJiBlLnNhdmVBcyh0KTtcbiAgICAgIH0pLCB6LmRlZmF1bHQuYmluZChyLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZS5yZXZlcnQoKTtcbiAgICAgIH0pO1xuICAgIH1mdW5jdGlvbiBfKGUpIHtcbiAgICAgIGZ1bmN0aW9uIHQodCkge1xuICAgICAgICByZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLCBlLndpZHRoICs9IGkgLSB0LmNsaWVudFgsIGUub25SZXNpemUoKSwgaSA9IHQuY2xpZW50WCwgITE7XG4gICAgICB9ZnVuY3Rpb24gbigpIHtcbiAgICAgICAgei5kZWZhdWx0LnJlbW92ZUNsYXNzKGUuX19jbG9zZUJ1dHRvbiwgb2UuQ0xBU1NfRFJBRyksIHouZGVmYXVsdC51bmJpbmQod2luZG93LCBcIm1vdXNlbW92ZVwiLCB0KSwgei5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwibW91c2V1cFwiLCBuKTtcbiAgICAgIH1mdW5jdGlvbiBvKG8pIHtcbiAgICAgICAgcmV0dXJuIG8ucHJldmVudERlZmF1bHQoKSwgaSA9IG8uY2xpZW50WCwgei5kZWZhdWx0LmFkZENsYXNzKGUuX19jbG9zZUJ1dHRvbiwgb2UuQ0xBU1NfRFJBRyksIHouZGVmYXVsdC5iaW5kKHdpbmRvdywgXCJtb3VzZW1vdmVcIiwgdCksIHouZGVmYXVsdC5iaW5kKHdpbmRvdywgXCJtb3VzZXVwXCIsIG4pLCAhMTtcbiAgICAgIH12YXIgaSA9IHZvaWQgMDtlLl9fcmVzaXplX2hhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIFUuZGVmYXVsdC5leHRlbmQoZS5fX3Jlc2l6ZV9oYW5kbGUuc3R5bGUsIHsgd2lkdGg6IFwiNnB4XCIsIG1hcmdpbkxlZnQ6IFwiLTNweFwiLCBoZWlnaHQ6IFwiMjAwcHhcIiwgY3Vyc29yOiBcImV3LXJlc2l6ZVwiLCBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiIH0pLCB6LmRlZmF1bHQuYmluZChlLl9fcmVzaXplX2hhbmRsZSwgXCJtb3VzZWRvd25cIiwgbyksIHouZGVmYXVsdC5iaW5kKGUuX19jbG9zZUJ1dHRvbiwgXCJtb3VzZWRvd25cIiwgbyksIGUuZG9tRWxlbWVudC5pbnNlcnRCZWZvcmUoZS5fX3Jlc2l6ZV9oYW5kbGUsIGUuZG9tRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgfWZ1bmN0aW9uIHAoZSwgdCkge1xuICAgICAgZS5kb21FbGVtZW50LnN0eWxlLndpZHRoID0gdCArIFwicHhcIiwgZS5fX3NhdmVfcm93ICYmIGUuYXV0b1BsYWNlICYmIChlLl9fc2F2ZV9yb3cuc3R5bGUud2lkdGggPSB0ICsgXCJweFwiKSwgZS5fX2Nsb3NlQnV0dG9uICYmIChlLl9fY2xvc2VCdXR0b24uc3R5bGUud2lkdGggPSB0ICsgXCJweFwiKTtcbiAgICB9ZnVuY3Rpb24gaChlLCB0KSB7XG4gICAgICB2YXIgbiA9IHt9O3JldHVybiBVLmRlZmF1bHQuZWFjaChlLl9fcmVtZW1iZXJlZE9iamVjdHMsIGZ1bmN0aW9uIChvLCBpKSB7XG4gICAgICAgIHZhciByID0ge30sXG4gICAgICAgICAgICBhID0gZS5fX3JlbWVtYmVyZWRPYmplY3RJbmRlY2VzVG9Db250cm9sbGVyc1tpXTtVLmRlZmF1bHQuZWFjaChhLCBmdW5jdGlvbiAoZSwgbikge1xuICAgICAgICAgIHJbbl0gPSB0ID8gZS5pbml0aWFsVmFsdWUgOiBlLmdldFZhbHVlKCk7XG4gICAgICAgIH0pLCBuW2ldID0gcjtcbiAgICAgIH0pLCBuO1xuICAgIH1mdW5jdGlvbiBtKGUpIHtcbiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgZS5fX3ByZXNldF9zZWxlY3QubGVuZ3RoOyB0KyspIGUuX19wcmVzZXRfc2VsZWN0W3RdLnZhbHVlID09PSBlLnByZXNldCAmJiAoZS5fX3ByZXNldF9zZWxlY3Quc2VsZWN0ZWRJbmRleCA9IHQpO1xuICAgIH1mdW5jdGlvbiBiKGUpIHtcbiAgICAgIDAgIT09IGUubGVuZ3RoICYmIEQuZGVmYXVsdC5jYWxsKHdpbmRvdywgZnVuY3Rpb24gKCkge1xuICAgICAgICBiKGUpO1xuICAgICAgfSksIFUuZGVmYXVsdC5lYWNoKGUsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUudXBkYXRlRGlzcGxheSgpO1xuICAgICAgfSk7XG4gICAgfXQuX19lc01vZHVsZSA9ICEwO3ZhciBnID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZTtcbiAgICB9IDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBlICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBlO1xuICAgIH0sXG4gICAgICAgIHYgPSBuKDE4KSxcbiAgICAgICAgeSA9IG8odiksXG4gICAgICAgIHcgPSBuKDE5KSxcbiAgICAgICAgeCA9IG8odyksXG4gICAgICAgIEUgPSBuKDIwKSxcbiAgICAgICAgQyA9IG8oRSksXG4gICAgICAgIEEgPSBuKDcpLFxuICAgICAgICBTID0gbyhBKSxcbiAgICAgICAgayA9IG4oOCksXG4gICAgICAgIE8gPSBvKGspLFxuICAgICAgICBUID0gbigxNSksXG4gICAgICAgIFIgPSBvKFQpLFxuICAgICAgICBMID0gbigxMyksXG4gICAgICAgIEIgPSBvKEwpLFxuICAgICAgICBNID0gbigxNCksXG4gICAgICAgIE4gPSBvKE0pLFxuICAgICAgICBIID0gbigxNiksXG4gICAgICAgIGogPSBvKEgpLFxuICAgICAgICBQID0gbigyMSksXG4gICAgICAgIEQgPSBvKFApLFxuICAgICAgICBWID0gbigyMiksXG4gICAgICAgIEYgPSBvKFYpLFxuICAgICAgICBJID0gbig5KSxcbiAgICAgICAgeiA9IG8oSSksXG4gICAgICAgIEcgPSBuKDUpLFxuICAgICAgICBVID0gbyhHKSxcbiAgICAgICAgWCA9IG4oMjMpLFxuICAgICAgICBLID0gbyhYKTt5LmRlZmF1bHQuaW5qZWN0KEsuZGVmYXVsdCk7dmFyIFkgPSBcImRnXCIsXG4gICAgICAgIEogPSA3MixcbiAgICAgICAgVyA9IDIwLFxuICAgICAgICBRID0gXCJEZWZhdWx0XCIsXG4gICAgICAgIHEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gXCJsb2NhbFN0b3JhZ2VcIiBpbiB3aW5kb3cgJiYgbnVsbCAhPT0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgfVxuICAgIH0oKSxcbiAgICAgICAgWiA9IHZvaWQgMCxcbiAgICAgICAgJCA9ICEwLFxuICAgICAgICBlZSA9IHZvaWQgMCxcbiAgICAgICAgdGUgPSAhMSxcbiAgICAgICAgbmUgPSBbXSxcbiAgICAgICAgb2UgPSBmdW5jdGlvbiBlKHQpIHtcbiAgICAgIGZ1bmN0aW9uIG4oKSB7XG4gICAgICAgIHZhciBlID0gby5nZXRSb290KCk7ZS53aWR0aCArPSAxLCBVLmRlZmF1bHQuZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGUud2lkdGggLT0gMTtcbiAgICAgICAgfSk7XG4gICAgICB9dmFyIG8gPSB0aGlzLFxuICAgICAgICAgIHIgPSB0IHx8IHt9O3RoaXMuZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHRoaXMuX191bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSwgdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX191bCksIHouZGVmYXVsdC5hZGRDbGFzcyh0aGlzLmRvbUVsZW1lbnQsIFkpLCB0aGlzLl9fZm9sZGVycyA9IHt9LCB0aGlzLl9fY29udHJvbGxlcnMgPSBbXSwgdGhpcy5fX3JlbWVtYmVyZWRPYmplY3RzID0gW10sIHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0SW5kZWNlc1RvQ29udHJvbGxlcnMgPSBbXSwgdGhpcy5fX2xpc3RlbmluZyA9IFtdLCByID0gVS5kZWZhdWx0LmRlZmF1bHRzKHIsIHsgY2xvc2VPblRvcDogITEsIGF1dG9QbGFjZTogITAsIHdpZHRoOiBlLkRFRkFVTFRfV0lEVEggfSksIHIgPSBVLmRlZmF1bHQuZGVmYXVsdHMociwgeyByZXNpemFibGU6IHIuYXV0b1BsYWNlLCBoaWRlYWJsZTogci5hdXRvUGxhY2UgfSksIFUuZGVmYXVsdC5pc1VuZGVmaW5lZChyLmxvYWQpID8gci5sb2FkID0geyBwcmVzZXQ6IFEgfSA6IHIucHJlc2V0ICYmIChyLmxvYWQucHJlc2V0ID0gci5wcmVzZXQpLCBVLmRlZmF1bHQuaXNVbmRlZmluZWQoci5wYXJlbnQpICYmIHIuaGlkZWFibGUgJiYgbmUucHVzaCh0aGlzKSwgci5yZXNpemFibGUgPSBVLmRlZmF1bHQuaXNVbmRlZmluZWQoci5wYXJlbnQpICYmIHIucmVzaXphYmxlLCByLmF1dG9QbGFjZSAmJiBVLmRlZmF1bHQuaXNVbmRlZmluZWQoci5zY3JvbGxhYmxlKSAmJiAoci5zY3JvbGxhYmxlID0gITApO3ZhciBhID0gcSAmJiBcInRydWVcIiA9PT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odSh0aGlzLCBcImlzTG9jYWxcIikpLFxuICAgICAgICAgIGwgPSB2b2lkIDA7aWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsgcGFyZW50OiB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHIucGFyZW50O1xuICAgICAgICAgIH0gfSwgc2Nyb2xsYWJsZTogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByLnNjcm9sbGFibGU7XG4gICAgICAgICAgfSB9LCBhdXRvUGxhY2U6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gci5hdXRvUGxhY2U7XG4gICAgICAgICAgfSB9LCBjbG9zZU9uVG9wOiB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHIuY2xvc2VPblRvcDtcbiAgICAgICAgICB9IH0sIHByZXNldDogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBvLnBhcmVudCA/IG8uZ2V0Um9vdCgpLnByZXNldCA6IHIubG9hZC5wcmVzZXQ7XG4gICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgby5wYXJlbnQgPyBvLmdldFJvb3QoKS5wcmVzZXQgPSBlIDogci5sb2FkLnByZXNldCA9IGUsIG0odGhpcyksIG8ucmV2ZXJ0KCk7XG4gICAgICAgICAgfSB9LCB3aWR0aDogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByLndpZHRoO1xuICAgICAgICAgIH0sIHNldDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHIud2lkdGggPSBlLCBwKG8sIGUpO1xuICAgICAgICAgIH0gfSwgbmFtZTogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByLm5hbWU7XG4gICAgICAgICAgfSwgc2V0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgci5uYW1lID0gZSwgdGl0bGVSb3dOYW1lICYmICh0aXRsZVJvd05hbWUuaW5uZXJIVE1MID0gci5uYW1lKTtcbiAgICAgICAgICB9IH0sIGNsb3NlZDogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByLmNsb3NlZDtcbiAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByLmNsb3NlZCA9IHQsIHIuY2xvc2VkID8gei5kZWZhdWx0LmFkZENsYXNzKG8uX191bCwgZS5DTEFTU19DTE9TRUQpIDogei5kZWZhdWx0LnJlbW92ZUNsYXNzKG8uX191bCwgZS5DTEFTU19DTE9TRUQpLCB0aGlzLm9uUmVzaXplKCksIG8uX19jbG9zZUJ1dHRvbiAmJiAoby5fX2Nsb3NlQnV0dG9uLmlubmVySFRNTCA9IHQgPyBlLlRFWFRfT1BFTiA6IGUuVEVYVF9DTE9TRUQpO1xuICAgICAgICAgIH0gfSwgbG9hZDogeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByLmxvYWQ7XG4gICAgICAgICAgfSB9LCB1c2VMb2NhbFN0b3JhZ2U6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBxICYmIChhID0gZSwgZSA/IHouZGVmYXVsdC5iaW5kKHdpbmRvdywgXCJ1bmxvYWRcIiwgbCkgOiB6LmRlZmF1bHQudW5iaW5kKHdpbmRvdywgXCJ1bmxvYWRcIiwgbCksIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHUobywgXCJpc0xvY2FsXCIpLCBlKSk7XG4gICAgICAgICAgfSB9IH0pLCBVLmRlZmF1bHQuaXNVbmRlZmluZWQoci5wYXJlbnQpKSB7XG4gICAgICAgIGlmIChyLmNsb3NlZCA9ICExLCB6LmRlZmF1bHQuYWRkQ2xhc3ModGhpcy5kb21FbGVtZW50LCBlLkNMQVNTX01BSU4pLCB6LmRlZmF1bHQubWFrZVNlbGVjdGFibGUodGhpcy5kb21FbGVtZW50LCAhMSksIHEgJiYgYSkge1xuICAgICAgICAgIG8udXNlTG9jYWxTdG9yYWdlID0gITA7dmFyIHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh1KHRoaXMsIFwiZ3VpXCIpKTtzICYmIChyLmxvYWQgPSBKU09OLnBhcnNlKHMpKTtcbiAgICAgICAgfXRoaXMuX19jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHRoaXMuX19jbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSBlLlRFWFRfQ0xPU0VELCB6LmRlZmF1bHQuYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLCBlLkNMQVNTX0NMT1NFX0JVVFRPTiksIHIuY2xvc2VPblRvcCA/ICh6LmRlZmF1bHQuYWRkQ2xhc3ModGhpcy5fX2Nsb3NlQnV0dG9uLCBlLkNMQVNTX0NMT1NFX1RPUCksIHRoaXMuZG9tRWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5fX2Nsb3NlQnV0dG9uLCB0aGlzLmRvbUVsZW1lbnQuY2hpbGROb2Rlc1swXSkpIDogKHouZGVmYXVsdC5hZGRDbGFzcyh0aGlzLl9fY2xvc2VCdXR0b24sIGUuQ0xBU1NfQ0xPU0VfQk9UVE9NKSwgdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX19jbG9zZUJ1dHRvbikpLCB6LmRlZmF1bHQuYmluZCh0aGlzLl9fY2xvc2VCdXR0b24sIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG8uY2xvc2VkID0gIW8uY2xvc2VkO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZvaWQgMCA9PT0gci5jbG9zZWQgJiYgKHIuY2xvc2VkID0gITApO3ZhciBkID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoci5uYW1lKTt6LmRlZmF1bHQuYWRkQ2xhc3MoZCwgXCJjb250cm9sbGVyLW5hbWVcIik7dmFyIGMgPSBpKG8sIGQpLFxuICAgICAgICAgICAgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKSwgby5jbG9zZWQgPSAhby5jbG9zZWQsICExO1xuICAgICAgICB9O3ouZGVmYXVsdC5hZGRDbGFzcyh0aGlzLl9fdWwsIGUuQ0xBU1NfQ0xPU0VEKSwgei5kZWZhdWx0LmFkZENsYXNzKGMsIFwidGl0bGVcIiksIHouZGVmYXVsdC5iaW5kKGMsIFwiY2xpY2tcIiwgZiksIHIuY2xvc2VkIHx8ICh0aGlzLmNsb3NlZCA9ICExKTtcbiAgICAgIH1yLmF1dG9QbGFjZSAmJiAoVS5kZWZhdWx0LmlzVW5kZWZpbmVkKHIucGFyZW50KSAmJiAoJCAmJiAoZWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB6LmRlZmF1bHQuYWRkQ2xhc3MoZWUsIFkpLCB6LmRlZmF1bHQuYWRkQ2xhc3MoZWUsIGUuQ0xBU1NfQVVUT19QTEFDRV9DT05UQUlORVIpLCBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVlKSwgJCA9ICExKSwgZWUuYXBwZW5kQ2hpbGQodGhpcy5kb21FbGVtZW50KSwgei5kZWZhdWx0LmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwgZS5DTEFTU19BVVRPX1BMQUNFKSksIHRoaXMucGFyZW50IHx8IHAobywgci53aWR0aCkpLCB0aGlzLl9fcmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgby5vblJlc2l6ZURlYm91bmNlZCgpO1xuICAgICAgfSwgei5kZWZhdWx0LmJpbmQod2luZG93LCBcInJlc2l6ZVwiLCB0aGlzLl9fcmVzaXplSGFuZGxlciksIHouZGVmYXVsdC5iaW5kKHRoaXMuX191bCwgXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsIHRoaXMuX19yZXNpemVIYW5kbGVyKSwgei5kZWZhdWx0LmJpbmQodGhpcy5fX3VsLCBcInRyYW5zaXRpb25lbmRcIiwgdGhpcy5fX3Jlc2l6ZUhhbmRsZXIpLCB6LmRlZmF1bHQuYmluZCh0aGlzLl9fdWwsIFwib1RyYW5zaXRpb25FbmRcIiwgdGhpcy5fX3Jlc2l6ZUhhbmRsZXIpLCB0aGlzLm9uUmVzaXplKCksIHIucmVzaXphYmxlICYmIF8odGhpcyksIGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHEgJiYgXCJ0cnVlXCIgPT09IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHUobywgXCJpc0xvY2FsXCIpKSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh1KG8sIFwiZ3VpXCIpLCBKU09OLnN0cmluZ2lmeShvLmdldFNhdmVPYmplY3QoKSkpO1xuICAgICAgfSwgdGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlID0gbCwgci5wYXJlbnQgfHwgbigpO1xuICAgIH07b2UudG9nZ2xlSGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRlID0gIXRlLCBVLmRlZmF1bHQuZWFjaChuZSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0ZSA/IFwibm9uZVwiIDogXCJcIjtcbiAgICAgIH0pO1xuICAgIH0sIG9lLkNMQVNTX0FVVE9fUExBQ0UgPSBcImFcIiwgb2UuQ0xBU1NfQVVUT19QTEFDRV9DT05UQUlORVIgPSBcImFjXCIsIG9lLkNMQVNTX01BSU4gPSBcIm1haW5cIiwgb2UuQ0xBU1NfQ09OVFJPTExFUl9ST1cgPSBcImNyXCIsIG9lLkNMQVNTX1RPT19UQUxMID0gXCJ0YWxsZXItdGhhbi13aW5kb3dcIiwgb2UuQ0xBU1NfQ0xPU0VEID0gXCJjbG9zZWRcIiwgb2UuQ0xBU1NfQ0xPU0VfQlVUVE9OID0gXCJjbG9zZS1idXR0b25cIiwgb2UuQ0xBU1NfQ0xPU0VfVE9QID0gXCJjbG9zZS10b3BcIiwgb2UuQ0xBU1NfQ0xPU0VfQk9UVE9NID0gXCJjbG9zZS1ib3R0b21cIiwgb2UuQ0xBU1NfRFJBRyA9IFwiZHJhZ1wiLCBvZS5ERUZBVUxUX1dJRFRIID0gMjQ1LCBvZS5URVhUX0NMT1NFRCA9IFwiQ2xvc2UgQ29udHJvbHNcIiwgb2UuVEVYVF9PUEVOID0gXCJPcGVuIENvbnRyb2xzXCIsIG9lLl9rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBcInRleHRcIiA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50eXBlIHx8IGUud2hpY2ggIT09IEogJiYgZS5rZXlDb2RlICE9PSBKIHx8IG9lLnRvZ2dsZUhpZGUoKTtcbiAgICB9LCB6LmRlZmF1bHQuYmluZCh3aW5kb3csIFwia2V5ZG93blwiLCBvZS5fa2V5ZG93bkhhbmRsZXIsICExKSwgVS5kZWZhdWx0LmV4dGVuZChvZS5wcm90b3R5cGUsIHsgYWRkOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICByZXR1cm4gcyh0aGlzLCBlLCB0LCB7IGZhY3RvcnlBcmdzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIH0pO1xuICAgICAgfSwgYWRkQ29sb3I6IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiBzKHRoaXMsIGUsIHQsIHsgY29sb3I6ICEwIH0pO1xuICAgICAgfSwgcmVtb3ZlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLl9fdWwucmVtb3ZlQ2hpbGQoZS5fX2xpKSwgdGhpcy5fX2NvbnRyb2xsZXJzLnNwbGljZSh0aGlzLl9fY29udHJvbGxlcnMuaW5kZXhPZihlKSwgMSk7dmFyIHQgPSB0aGlzO1UuZGVmYXVsdC5kZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdC5vblJlc2l6ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hdXRvUGxhY2UgJiYgZWUucmVtb3ZlQ2hpbGQodGhpcy5kb21FbGVtZW50KSwgei5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwia2V5ZG93blwiLCBvZS5fa2V5ZG93bkhhbmRsZXIsICExKSwgei5kZWZhdWx0LnVuYmluZCh3aW5kb3csIFwicmVzaXplXCIsIHRoaXMuX19yZXNpemVIYW5kbGVyKSwgdGhpcy5zYXZlVG9Mb2NhbFN0b3JhZ2VJZlBvc3NpYmxlICYmIHouZGVmYXVsdC51bmJpbmQod2luZG93LCBcInVubG9hZFwiLCB0aGlzLnNhdmVUb0xvY2FsU3RvcmFnZUlmUG9zc2libGUpO1xuICAgICAgfSwgYWRkRm9sZGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLl9fZm9sZGVyc1tlXSkgdGhyb3cgbmV3IEVycm9yKCdZb3UgYWxyZWFkeSBoYXZlIGEgZm9sZGVyIGluIHRoaXMgR1VJIGJ5IHRoZSBuYW1lIFwiJyArIGUgKyAnXCInKTt2YXIgdCA9IHsgbmFtZTogZSwgcGFyZW50OiB0aGlzIH07dC5hdXRvUGxhY2UgPSB0aGlzLmF1dG9QbGFjZSwgdGhpcy5sb2FkICYmIHRoaXMubG9hZC5mb2xkZXJzICYmIHRoaXMubG9hZC5mb2xkZXJzW2VdICYmICh0LmNsb3NlZCA9IHRoaXMubG9hZC5mb2xkZXJzW2VdLmNsb3NlZCwgdC5sb2FkID0gdGhpcy5sb2FkLmZvbGRlcnNbZV0pO3ZhciBuID0gbmV3IG9lKHQpO3RoaXMuX19mb2xkZXJzW2VdID0gbjt2YXIgbyA9IGkodGhpcywgbi5kb21FbGVtZW50KTtyZXR1cm4gei5kZWZhdWx0LmFkZENsYXNzKG8sIFwiZm9sZGVyXCIpLCBuO1xuICAgICAgfSwgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsb3NlZCA9ICExO1xuICAgICAgfSwgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSAhMDtcbiAgICAgIH0sIG9uUmVzaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcy5nZXRSb290KCk7aWYgKGUuc2Nyb2xsYWJsZSkge1xuICAgICAgICAgIHZhciB0ID0gei5kZWZhdWx0LmdldE9mZnNldChlLl9fdWwpLnRvcCxcbiAgICAgICAgICAgICAgbiA9IDA7VS5kZWZhdWx0LmVhY2goZS5fX3VsLmNoaWxkTm9kZXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBlLmF1dG9QbGFjZSAmJiB0ID09PSBlLl9fc2F2ZV9yb3cgfHwgKG4gKz0gei5kZWZhdWx0LmdldEhlaWdodCh0KSk7XG4gICAgICAgICAgfSksIHdpbmRvdy5pbm5lckhlaWdodCAtIHQgLSBXIDwgbiA/ICh6LmRlZmF1bHQuYWRkQ2xhc3MoZS5kb21FbGVtZW50LCBvZS5DTEFTU19UT09fVEFMTCksIGUuX191bC5zdHlsZS5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0IC0gVyArIFwicHhcIikgOiAoei5kZWZhdWx0LnJlbW92ZUNsYXNzKGUuZG9tRWxlbWVudCwgb2UuQ0xBU1NfVE9PX1RBTEwpLCBlLl9fdWwuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCIpO1xuICAgICAgICB9ZS5fX3Jlc2l6ZV9oYW5kbGUgJiYgVS5kZWZhdWx0LmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlLl9fcmVzaXplX2hhbmRsZS5zdHlsZS5oZWlnaHQgPSBlLl9fdWwub2Zmc2V0SGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICB9KSwgZS5fX2Nsb3NlQnV0dG9uICYmIChlLl9fY2xvc2VCdXR0b24uc3R5bGUud2lkdGggPSBlLndpZHRoICsgXCJweFwiKTtcbiAgICAgIH0sIG9uUmVzaXplRGVib3VuY2VkOiBVLmRlZmF1bHQuZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgICB9LCA1MCksIHJlbWVtYmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChVLmRlZmF1bHQuaXNVbmRlZmluZWQoWikgJiYgKFogPSBuZXcgRi5kZWZhdWx0KCksIFouZG9tRWxlbWVudC5pbm5lckhUTUwgPSB4LmRlZmF1bHQpLCB0aGlzLnBhcmVudCkgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbiBvbmx5IGNhbGwgcmVtZW1iZXIgb24gYSB0b3AgbGV2ZWwgR1VJLlwiKTt2YXIgZSA9IHRoaXM7VS5kZWZhdWx0LmVhY2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAwID09PSBlLl9fcmVtZW1iZXJlZE9iamVjdHMubGVuZ3RoICYmIGYoZSksIGUuX19yZW1lbWJlcmVkT2JqZWN0cy5pbmRleE9mKHQpID09PSAtMSAmJiBlLl9fcmVtZW1iZXJlZE9iamVjdHMucHVzaCh0KTtcbiAgICAgICAgfSksIHRoaXMuYXV0b1BsYWNlICYmIHAodGhpcywgdGhpcy53aWR0aCk7XG4gICAgICB9LCBnZXRSb290OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGUgPSB0aGlzOyBlLnBhcmVudDspIGUgPSBlLnBhcmVudDtyZXR1cm4gZTtcbiAgICAgIH0sIGdldFNhdmVPYmplY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzLmxvYWQ7cmV0dXJuIGUuY2xvc2VkID0gdGhpcy5jbG9zZWQsIHRoaXMuX19yZW1lbWJlcmVkT2JqZWN0cy5sZW5ndGggPiAwICYmIChlLnByZXNldCA9IHRoaXMucHJlc2V0LCBlLnJlbWVtYmVyZWQgfHwgKGUucmVtZW1iZXJlZCA9IHt9KSwgZS5yZW1lbWJlcmVkW3RoaXMucHJlc2V0XSA9IGgodGhpcykpLCBlLmZvbGRlcnMgPSB7fSwgVS5kZWZhdWx0LmVhY2godGhpcy5fX2ZvbGRlcnMsIGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgICAgZS5mb2xkZXJzW25dID0gdC5nZXRTYXZlT2JqZWN0KCk7XG4gICAgICAgIH0pLCBlO1xuICAgICAgfSwgc2F2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvYWQucmVtZW1iZXJlZCB8fCAodGhpcy5sb2FkLnJlbWVtYmVyZWQgPSB7fSksIHRoaXMubG9hZC5yZW1lbWJlcmVkW3RoaXMucHJlc2V0XSA9IGgodGhpcyksIHIodGhpcywgITEpLCB0aGlzLnNhdmVUb0xvY2FsU3RvcmFnZUlmUG9zc2libGUoKTtcbiAgICAgIH0sIHNhdmVBczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5sb2FkLnJlbWVtYmVyZWQgfHwgKHRoaXMubG9hZC5yZW1lbWJlcmVkID0ge30sIHRoaXMubG9hZC5yZW1lbWJlcmVkW1FdID0gaCh0aGlzLCAhMCkpLCB0aGlzLmxvYWQucmVtZW1iZXJlZFtlXSA9IGgodGhpcyksIHRoaXMucHJlc2V0ID0gZSwgZCh0aGlzLCBlLCAhMCksIHRoaXMuc2F2ZVRvTG9jYWxTdG9yYWdlSWZQb3NzaWJsZSgpO1xuICAgICAgfSwgcmV2ZXJ0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBVLmRlZmF1bHQuZWFjaCh0aGlzLl9fY29udHJvbGxlcnMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdGhpcy5nZXRSb290KCkubG9hZC5yZW1lbWJlcmVkID8gbChlIHx8IHRoaXMuZ2V0Um9vdCgpLCB0KSA6IHQuc2V0VmFsdWUodC5pbml0aWFsVmFsdWUpLCB0Ll9fb25GaW5pc2hDaGFuZ2UgJiYgdC5fX29uRmluaXNoQ2hhbmdlLmNhbGwodCwgdC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgfSwgdGhpcyksIFUuZGVmYXVsdC5lYWNoKHRoaXMuX19mb2xkZXJzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucmV2ZXJ0KGUpO1xuICAgICAgICB9KSwgZSB8fCByKHRoaXMuZ2V0Um9vdCgpLCAhMSk7XG4gICAgICB9LCBsaXN0ZW46IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gMCA9PT0gdGhpcy5fX2xpc3RlbmluZy5sZW5ndGg7dGhpcy5fX2xpc3RlbmluZy5wdXNoKGUpLCB0ICYmIGIodGhpcy5fX2xpc3RlbmluZyk7XG4gICAgICB9LCB1cGRhdGVEaXNwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFUuZGVmYXVsdC5lYWNoKHRoaXMuX19jb250cm9sbGVycywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnVwZGF0ZURpc3BsYXkoKTtcbiAgICAgICAgfSksIFUuZGVmYXVsdC5lYWNoKHRoaXMuX19mb2xkZXJzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUudXBkYXRlRGlzcGxheSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gfSksIHQuZGVmYXVsdCA9IG9lLCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZS5leHBvcnRzID0geyBsb2FkOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgbiA9IHQgfHwgZG9jdW1lbnQsXG4gICAgICAgICAgICBvID0gbi5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtvLnR5cGUgPSBcInRleHQvY3NzXCIsIG8ucmVsID0gXCJzdHlsZXNoZWV0XCIsIG8uaHJlZiA9IGUsIG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKG8pO1xuICAgICAgfSwgaW5qZWN0OiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICB2YXIgbiA9IHQgfHwgZG9jdW1lbnQsXG4gICAgICAgICAgICBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO28udHlwZSA9IFwidGV4dC9jc3NcIiwgby5pbm5lckhUTUwgPSBlO3ZhciBpID0gbi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07dHJ5IHtcbiAgICAgICAgICBpLmFwcGVuZENoaWxkKG8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfSB9O1xuICB9LCBmdW5jdGlvbiAoZSwgdCkge1xuICAgIGUuZXhwb3J0cyA9IFwiPGRpdiBpZD1kZy1zYXZlIGNsYXNzPVxcXCJkZyBkaWFsb2d1ZVxcXCI+IEhlcmUncyB0aGUgbmV3IGxvYWQgcGFyYW1ldGVyIGZvciB5b3VyIDxjb2RlPkdVSTwvY29kZT4ncyBjb25zdHJ1Y3RvcjogPHRleHRhcmVhIGlkPWRnLW5ldy1jb25zdHJ1Y3Rvcj48L3RleHRhcmVhPiA8ZGl2IGlkPWRnLXNhdmUtbG9jYWxseT4gPGlucHV0IGlkPWRnLWxvY2FsLXN0b3JhZ2UgdHlwZT1jaGVja2JveCAvPiBBdXRvbWF0aWNhbGx5IHNhdmUgdmFsdWVzIHRvIDxjb2RlPmxvY2FsU3RvcmFnZTwvY29kZT4gb24gZXhpdC4gPGRpdiBpZD1kZy1sb2NhbC1leHBsYWluPlRoZSB2YWx1ZXMgc2F2ZWQgdG8gPGNvZGU+bG9jYWxTdG9yYWdlPC9jb2RlPiB3aWxsIG92ZXJyaWRlIHRob3NlIHBhc3NlZCB0byA8Y29kZT5kYXQuR1VJPC9jb2RlPidzIGNvbnN0cnVjdG9yLiBUaGlzIG1ha2VzIGl0IGVhc2llciB0byB3b3JrIGluY3JlbWVudGFsbHksIGJ1dCA8Y29kZT5sb2NhbFN0b3JhZ2U8L2NvZGU+IGlzIGZyYWdpbGUsIGFuZCB5b3VyIGZyaWVuZHMgbWF5IG5vdCBzZWUgdGhlIHNhbWUgdmFsdWVzIHlvdSBkby4gPC9kaXY+IDwvZGl2PiA8L2Rpdj5cIjtcbiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIGkgPSBuKDEwKSxcbiAgICAgICAgciA9IG8oaSksXG4gICAgICAgIGEgPSBuKDEzKSxcbiAgICAgICAgbCA9IG8oYSksXG4gICAgICAgIHMgPSBuKDE0KSxcbiAgICAgICAgdSA9IG8ocyksXG4gICAgICAgIGQgPSBuKDExKSxcbiAgICAgICAgYyA9IG8oZCksXG4gICAgICAgIGYgPSBuKDE1KSxcbiAgICAgICAgXyA9IG8oZiksXG4gICAgICAgIHAgPSBuKDgpLFxuICAgICAgICBoID0gbyhwKSxcbiAgICAgICAgbSA9IG4oNSksXG4gICAgICAgIGIgPSBvKG0pLFxuICAgICAgICBnID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHZhciBuID0gZVt0XTtyZXR1cm4gYi5kZWZhdWx0LmlzQXJyYXkoYXJndW1lbnRzWzJdKSB8fCBiLmRlZmF1bHQuaXNPYmplY3QoYXJndW1lbnRzWzJdKSA/IG5ldyByLmRlZmF1bHQoZSwgdCwgYXJndW1lbnRzWzJdKSA6IGIuZGVmYXVsdC5pc051bWJlcihuKSA/IGIuZGVmYXVsdC5pc051bWJlcihhcmd1bWVudHNbMl0pICYmIGIuZGVmYXVsdC5pc051bWJlcihhcmd1bWVudHNbM10pID8gYi5kZWZhdWx0LmlzTnVtYmVyKGFyZ3VtZW50c1s0XSkgPyBuZXcgdS5kZWZhdWx0KGUsIHQsIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdLCBhcmd1bWVudHNbNF0pIDogbmV3IHUuZGVmYXVsdChlLCB0LCBhcmd1bWVudHNbMl0sIGFyZ3VtZW50c1szXSkgOiBiLmRlZmF1bHQuaXNOdW1iZXIoYXJndW1lbnRzWzRdKSA/IG5ldyBsLmRlZmF1bHQoZSwgdCwgeyBtaW46IGFyZ3VtZW50c1syXSwgbWF4OiBhcmd1bWVudHNbM10sIHN0ZXA6IGFyZ3VtZW50c1s0XSB9KSA6IG5ldyBsLmRlZmF1bHQoZSwgdCwgeyBtaW46IGFyZ3VtZW50c1syXSwgbWF4OiBhcmd1bWVudHNbM10gfSkgOiBiLmRlZmF1bHQuaXNTdHJpbmcobikgPyBuZXcgYy5kZWZhdWx0KGUsIHQpIDogYi5kZWZhdWx0LmlzRnVuY3Rpb24obikgPyBuZXcgXy5kZWZhdWx0KGUsIHQsIFwiXCIpIDogYi5kZWZhdWx0LmlzQm9vbGVhbihuKSA/IG5ldyBoLmRlZmF1bHQoZSwgdCkgOiBudWxsO1xuICAgIH07dC5kZWZhdWx0ID0gZywgZS5leHBvcnRzID0gdC5kZWZhdWx0O1xuICB9LCBmdW5jdGlvbiAoZSwgdCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgc2V0VGltZW91dChlLCAxZTMgLyA2MCk7XG4gICAgfXQuX19lc01vZHVsZSA9ICEwLCB0LmRlZmF1bHQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgbiwgZS5leHBvcnRzID0gdC5kZWZhdWx0O1xuICB9LCBmdW5jdGlvbiAoZSwgdCwgbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9O1xuICAgIH1mdW5jdGlvbiBpKGUsIHQpIHtcbiAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9dC5fX2VzTW9kdWxlID0gITA7dmFyIHIgPSBuKDkpLFxuICAgICAgICBhID0gbyhyKSxcbiAgICAgICAgbCA9IG4oNSksXG4gICAgICAgIHMgPSBvKGwpLFxuICAgICAgICB1ID0gZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgaSh0aGlzLCBlKSwgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHMuZGVmYXVsdC5leHRlbmQodGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZSwgeyBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgwLDAsMCwwLjgpXCIsIHRvcDogMCwgbGVmdDogMCwgZGlzcGxheTogXCJub25lXCIsIHpJbmRleDogXCIxMDAwXCIsIG9wYWNpdHk6IDAsIFdlYmtpdFRyYW5zaXRpb246IFwib3BhY2l0eSAwLjJzIGxpbmVhclwiLCB0cmFuc2l0aW9uOiBcIm9wYWNpdHkgMC4ycyBsaW5lYXJcIiB9KSwgYS5kZWZhdWx0Lm1ha2VGdWxsc2NyZWVuKHRoaXMuYmFja2dyb3VuZEVsZW1lbnQpLCB0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiLCB0aGlzLmRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBzLmRlZmF1bHQuZXh0ZW5kKHRoaXMuZG9tRWxlbWVudC5zdHlsZSwgeyBwb3NpdGlvbjogXCJmaXhlZFwiLCBkaXNwbGF5OiBcIm5vbmVcIiwgekluZGV4OiBcIjEwMDFcIiwgb3BhY2l0eTogMCwgV2Via2l0VHJhbnNpdGlvbjogXCItd2Via2l0LXRyYW5zZm9ybSAwLjJzIGVhc2Utb3V0LCBvcGFjaXR5IDAuMnMgbGluZWFyXCIsIHRyYW5zaXRpb246IFwidHJhbnNmb3JtIDAuMnMgZWFzZS1vdXQsIG9wYWNpdHkgMC4ycyBsaW5lYXJcIiB9KSwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmJhY2tncm91bmRFbGVtZW50KSwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmRvbUVsZW1lbnQpO3ZhciB0ID0gdGhpczthLmRlZmF1bHQuYmluZCh0aGlzLmJhY2tncm91bmRFbGVtZW50LCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0LmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9cmV0dXJuIGUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdGhpczt0aGlzLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCIsIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiLCB0aGlzLmRvbUVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IDAsIHRoaXMuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBcInNjYWxlKDEuMSlcIiwgdGhpcy5sYXlvdXQoKSwgcy5kZWZhdWx0LmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlLmJhY2tncm91bmRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAxLCBlLmRvbUVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IDEsIGUuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBcInNjYWxlKDEpXCI7XG4gICAgICAgIH0pO1xuICAgICAgfSwgZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcyxcbiAgICAgICAgICAgIGUgPSBmdW5jdGlvbiBlKCkge1xuICAgICAgICAgIHQuZG9tRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIsIHQuYmFja2dyb3VuZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiLCBhLmRlZmF1bHQudW5iaW5kKHQuZG9tRWxlbWVudCwgXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsIGUpLCBhLmRlZmF1bHQudW5iaW5kKHQuZG9tRWxlbWVudCwgXCJ0cmFuc2l0aW9uZW5kXCIsIGUpLCBhLmRlZmF1bHQudW5iaW5kKHQuZG9tRWxlbWVudCwgXCJvVHJhbnNpdGlvbkVuZFwiLCBlKTtcbiAgICAgICAgfTthLmRlZmF1bHQuYmluZCh0aGlzLmRvbUVsZW1lbnQsIFwid2Via2l0VHJhbnNpdGlvbkVuZFwiLCBlKSwgYS5kZWZhdWx0LmJpbmQodGhpcy5kb21FbGVtZW50LCBcInRyYW5zaXRpb25lbmRcIiwgZSksIGEuZGVmYXVsdC5iaW5kKHRoaXMuZG9tRWxlbWVudCwgXCJvVHJhbnNpdGlvbkVuZFwiLCBlKSwgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMCwgdGhpcy5kb21FbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAwLCB0aGlzLmRvbUVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gXCJzY2FsZSgxLjEpXCI7XG4gICAgICB9LCBlLnByb3RvdHlwZS5sYXlvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLyAyIC0gYS5kZWZhdWx0LmdldFdpZHRoKHRoaXMuZG9tRWxlbWVudCkgLyAyICsgXCJweFwiLCB0aGlzLmRvbUVsZW1lbnQuc3R5bGUudG9wID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiAtIGEuZGVmYXVsdC5nZXRIZWlnaHQodGhpcy5kb21FbGVtZW50KSAvIDIgKyBcInB4XCI7XG4gICAgICB9LCBlO1xuICAgIH0oKTt0LmRlZmF1bHQgPSB1LCBlLmV4cG9ydHMgPSB0LmRlZmF1bHQ7XG4gIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgdCA9IGUuZXhwb3J0cyA9IG4oMjQpKCksIHQucHVzaChbZS5pZCwgXCIuZGcgdWx7bGlzdC1zdHlsZTpub25lO21hcmdpbjowO3BhZGRpbmc6MDt3aWR0aDoxMDAlO2NsZWFyOmJvdGh9LmRnLmFje3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2hlaWdodDowO3otaW5kZXg6MH0uZGc6bm90KC5hYykgLm1haW57b3ZlcmZsb3c6aGlkZGVufS5kZy5tYWlue3RyYW5zaXRpb246b3BhY2l0eSAuMXMgbGluZWFyfS5kZy5tYWluLnRhbGxlci10aGFuLXdpbmRvd3tvdmVyZmxvdy15OmF1dG99LmRnLm1haW4udGFsbGVyLXRoYW4td2luZG93IC5jbG9zZS1idXR0b257b3BhY2l0eToxO21hcmdpbi10b3A6LTFweDtib3JkZXItdG9wOjFweCBzb2xpZCAjMmMyYzJjfS5kZy5tYWluIHVsLmNsb3NlZCAuY2xvc2UtYnV0dG9ue29wYWNpdHk6MSFpbXBvcnRhbnR9LmRnLm1haW4gLmNsb3NlLWJ1dHRvbi5kcmFnLC5kZy5tYWluOmhvdmVyIC5jbG9zZS1idXR0b257b3BhY2l0eToxfS5kZy5tYWluIC5jbG9zZS1idXR0b257dHJhbnNpdGlvbjpvcGFjaXR5IC4xcyBsaW5lYXI7Ym9yZGVyOjA7bGluZS1oZWlnaHQ6MTlweDtoZWlnaHQ6MjBweDtjdXJzb3I6cG9pbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiMwMDB9LmRnLm1haW4gLmNsb3NlLWJ1dHRvbi5jbG9zZS10b3B7cG9zaXRpb246cmVsYXRpdmV9LmRnLm1haW4gLmNsb3NlLWJ1dHRvbi5jbG9zZS1ib3R0b217cG9zaXRpb246YWJzb2x1dGV9LmRnLm1haW4gLmNsb3NlLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMxMTF9LmRnLmF7ZmxvYXQ6cmlnaHQ7bWFyZ2luLXJpZ2h0OjE1cHg7b3ZlcmZsb3cteTp2aXNpYmxlfS5kZy5hLmhhcy1zYXZlPnVsLmNsb3NlLXRvcHttYXJnaW4tdG9wOjB9LmRnLmEuaGFzLXNhdmU+dWwuY2xvc2UtYm90dG9te21hcmdpbi10b3A6MjdweH0uZGcuYS5oYXMtc2F2ZT51bC5jbG9zZWR7bWFyZ2luLXRvcDowfS5kZy5hIC5zYXZlLXJvd3t0b3A6MDt6LWluZGV4OjEwMDJ9LmRnLmEgLnNhdmUtcm93LmNsb3NlLXRvcHtwb3NpdGlvbjpyZWxhdGl2ZX0uZGcuYSAuc2F2ZS1yb3cuY2xvc2UtYm90dG9te3Bvc2l0aW9uOmZpeGVkfS5kZyBsaXt0cmFuc2l0aW9uOmhlaWdodCAuMXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjpvdmVyZmxvdyAuMXMgbGluZWFyfS5kZyBsaTpub3QoLmZvbGRlcil7Y3Vyc29yOmF1dG87aGVpZ2h0OjI3cHg7bGluZS1oZWlnaHQ6MjdweDtwYWRkaW5nOjAgNHB4IDAgNXB4fS5kZyBsaS5mb2xkZXJ7cGFkZGluZzowO2JvcmRlci1sZWZ0OjRweCBzb2xpZCB0cmFuc3BhcmVudH0uZGcgbGkudGl0bGV7bWFyZ2luLWxlZnQ6LTRweH0uZGcgLmNsb3NlZCBsaTpub3QoLnRpdGxlKSwuZGcgLmNsb3NlZCB1bCBsaSwuZGcgLmNsb3NlZCB1bCBsaT4qe2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtib3JkZXI6MH0uZGcgLmNye2NsZWFyOmJvdGg7cGFkZGluZy1sZWZ0OjNweDtoZWlnaHQ6MjdweDtvdmVyZmxvdzpoaWRkZW59LmRnIC5wcm9wZXJ0eS1uYW1le2N1cnNvcjpkZWZhdWx0O2Zsb2F0OmxlZnQ7Y2xlYXI6bGVmdDt3aWR0aDo0MCU7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9LmRnIC5je2Zsb2F0OmxlZnQ7d2lkdGg6NjAlO3Bvc2l0aW9uOnJlbGF0aXZlfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRde2JvcmRlcjowO21hcmdpbi10b3A6NHB4O3BhZGRpbmc6M3B4O3dpZHRoOjEwMCU7ZmxvYXQ6cmlnaHR9LmRnIC5oYXMtc2xpZGVyIGlucHV0W3R5cGU9dGV4dF17d2lkdGg6MzAlO21hcmdpbi1sZWZ0OjB9LmRnIC5zbGlkZXJ7ZmxvYXQ6bGVmdDt3aWR0aDo2NiU7bWFyZ2luLWxlZnQ6LTVweDttYXJnaW4tcmlnaHQ6MDtoZWlnaHQ6MTlweDttYXJnaW4tdG9wOjRweH0uZGcgLnNsaWRlci1mZ3toZWlnaHQ6MTAwJX0uZGcgLmMgaW5wdXRbdHlwZT1jaGVja2JveF17bWFyZ2luLXRvcDo3cHh9LmRnIC5jIHNlbGVjdHttYXJnaW4tdG9wOjVweH0uZGcgLmNyLmJvb2xlYW4sLmRnIC5jci5ib29sZWFuICosLmRnIC5jci5mdW5jdGlvbiwuZGcgLmNyLmZ1bmN0aW9uICosLmRnIC5jci5mdW5jdGlvbiAucHJvcGVydHktbmFtZXtjdXJzb3I6cG9pbnRlcn0uZGcgLmNyLmNvbG9ye292ZXJmbG93OnZpc2libGV9LmRnIC5zZWxlY3RvcntkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLWxlZnQ6LTlweDttYXJnaW4tdG9wOjIzcHg7ei1pbmRleDoxMH0uZGcgLmM6aG92ZXIgLnNlbGVjdG9yLC5kZyAuc2VsZWN0b3IuZHJhZ3tkaXNwbGF5OmJsb2NrfS5kZyBsaS5zYXZlLXJvd3twYWRkaW5nOjB9LmRnIGxpLnNhdmUtcm93IC5idXR0b257ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIDZweH0uZGcuZGlhbG9ndWV7YmFja2dyb3VuZC1jb2xvcjojMjIyO3dpZHRoOjQ2MHB4O3BhZGRpbmc6MTVweDtmb250LXNpemU6MTNweDtsaW5lLWhlaWdodDoxNXB4fSNkZy1uZXctY29uc3RydWN0b3J7cGFkZGluZzoxMHB4O2NvbG9yOiMyMjI7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtmb250LXNpemU6MTBweDtib3JkZXI6MDtyZXNpemU6bm9uZTtib3gtc2hhZG93Omluc2V0IDFweCAxcHggMXB4ICM4ODg7d29yZC13cmFwOmJyZWFrLXdvcmQ7bWFyZ2luOjEycHggMDtkaXNwbGF5OmJsb2NrO3dpZHRoOjQ0MHB4O292ZXJmbG93LXk6c2Nyb2xsO2hlaWdodDoxMDBweDtwb3NpdGlvbjpyZWxhdGl2ZX0jZGctbG9jYWwtZXhwbGFpbntkaXNwbGF5Om5vbmU7Zm9udC1zaXplOjExcHg7bGluZS1oZWlnaHQ6MTdweDtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7cGFkZGluZzo4cHg7bWFyZ2luLXRvcDoxMHB4fSNkZy1sb2NhbC1leHBsYWluIGNvZGV7Zm9udC1zaXplOjEwcHh9I2RhdC1ndWktc2F2ZS1sb2NhbGx5e2Rpc3BsYXk6bm9uZX0uZGd7Y29sb3I6I2VlZTtmb250OjExcHggTHVjaWRhIEdyYW5kZSxzYW5zLXNlcmlmO3RleHQtc2hhZG93OjAgLTFweCAwICMxMTF9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFye3dpZHRoOjVweDtiYWNrZ3JvdW5kOiMxYTFhMWF9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFyLWNvcm5lcntoZWlnaHQ6MDtkaXNwbGF5Om5vbmV9LmRnLm1haW46Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1ie2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6IzY3Njc2N30uZGcgbGk6bm90KC5mb2xkZXIpe2JhY2tncm91bmQ6IzFhMWExYTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMmMyYzJjfS5kZyBsaS5zYXZlLXJvd3tsaW5lLWhlaWdodDoyNXB4O2JhY2tncm91bmQ6I2RhZDVjYjtib3JkZXI6MH0uZGcgbGkuc2F2ZS1yb3cgc2VsZWN0e21hcmdpbi1sZWZ0OjVweDt3aWR0aDoxMDhweH0uZGcgbGkuc2F2ZS1yb3cgLmJ1dHRvbnttYXJnaW4tbGVmdDo1cHg7bWFyZ2luLXRvcDoxcHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjlweDtsaW5lLWhlaWdodDo3cHg7cGFkZGluZzo0cHggNHB4IDVweDtiYWNrZ3JvdW5kOiNjNWJkYWQ7Y29sb3I6I2ZmZjt0ZXh0LXNoYWRvdzowIDFweCAwICNiMGE1OGY7Ym94LXNoYWRvdzowIC0xcHggMCAjYjBhNThmO2N1cnNvcjpwb2ludGVyfS5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uLmdlYXJze2JhY2tncm91bmQ6I2M1YmRhZCB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBc0FBQUFOQ0FZQUFBQi85WlE3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFRSkpSRUZVZU5waVlLQVUvUC8vUHdHSUMvQXBDQUJpQlNBVytJOEFDbEFjZ0t4UTRUOWhvTUFFVXJ4eDJRU0dONitlZ0RYKy92V1Q0ZTdOODJBTVlvUEF4L2V2d1dvWW9TWWJBQ1gyczdLeEN4emNzZXpEaDNldkZvREVCWVRFRXF5Y2dnV0F6QTlBdVVTUVFnZVlQYTlmUHY2L1lXbS9BY3g1SVBiN3R5L2Z3K1FaYmx3Njd2RHM4UjBZSHlRaGdPYngreUFKa0JxbUc1ZFBQRGgxYVBPR1IvZXVnVzBHNHZsSW9USWZ5RmNBK1Fla2hoSEpoUGRReGJpQUlndU1CVFFaclBENzEwOE02cm9XWURGUWlJQUF2NkFvdy8xYkZ3WGdpcytmMkxVQXlud29JYU5jejhYTngzRGw3TUVKVURHUXB4OWd0UThZQ3VlQitEMjZPRUNBQVFEYWR0N2U0NkQ0MlFBQUFBQkpSVTVFcmtKZ2dnPT0pIDJweCAxcHggbm8tcmVwZWF0O2hlaWdodDo3cHg7d2lkdGg6OHB4fS5kZyBsaS5zYXZlLXJvdyAuYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2JhYjE5ZTtib3gtc2hhZG93OjAgLTFweCAwICNiMGE1OGZ9LmRnIGxpLmZvbGRlcntib3JkZXItYm90dG9tOjB9LmRnIGxpLnRpdGxle3BhZGRpbmctbGVmdDoxNnB4O2JhY2tncm91bmQ6IzAwMCB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQlFBRkFKRUFBUC8vLy9QejgvLy8vLy8vL3lINUJBRUFBQUlBTEFBQUFBQUZBQVVBQUFJSWxJK2hLZ0Z4b0NnQU93PT0pIDZweCAxMHB4IG5vLXJlcGVhdDtjdXJzb3I6cG9pbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCBoc2xhKDAsMCUsMTAwJSwuMil9LmRnIC5jbG9zZWQgbGkudGl0bGV7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQlFBRkFKRUFBUC8vLy9QejgvLy8vLy8vL3lINUJBRUFBQUlBTEFBQUFBQUZBQVVBQUFJSWxHSVdxTUNiV0FFQU93PT0pfS5kZyAuY3IuYm9vbGVhbntib3JkZXItbGVmdDozcHggc29saWQgIzgwNjc4N30uZGcgLmNyLmNvbG9ye2JvcmRlci1sZWZ0OjNweCBzb2xpZH0uZGcgLmNyLmZ1bmN0aW9ue2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZTYxZDVmfS5kZyAuY3IubnVtYmVye2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMmZhMWQ2fS5kZyAuY3IubnVtYmVyIGlucHV0W3R5cGU9dGV4dF17Y29sb3I6IzJmYTFkNn0uZGcgLmNyLnN0cmluZ3tib3JkZXItbGVmdDozcHggc29saWQgIzFlZDM2Zn0uZGcgLmNyLnN0cmluZyBpbnB1dFt0eXBlPXRleHRde2NvbG9yOiMxZWQzNmZ9LmRnIC5jci5ib29sZWFuOmhvdmVyLC5kZyAuY3IuZnVuY3Rpb246aG92ZXJ7YmFja2dyb3VuZDojMTExfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRde2JhY2tncm91bmQ6IzMwMzAzMDtvdXRsaW5lOm5vbmV9LmRnIC5jIGlucHV0W3R5cGU9dGV4dF06aG92ZXJ7YmFja2dyb3VuZDojM2MzYzNjfS5kZyAuYyBpbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JhY2tncm91bmQ6IzQ5NDk0OTtjb2xvcjojZmZmfS5kZyAuYyAuc2xpZGVye2JhY2tncm91bmQ6IzMwMzAzMDtjdXJzb3I6ZXctcmVzaXplfS5kZyAuYyAuc2xpZGVyLWZne2JhY2tncm91bmQ6IzJmYTFkNjttYXgtd2lkdGg6MTAwJX0uZGcgLmMgLnNsaWRlcjpob3ZlcntiYWNrZ3JvdW5kOiMzYzNjM2N9LmRnIC5jIC5zbGlkZXI6aG92ZXIgLnNsaWRlci1mZ3tiYWNrZ3JvdW5kOiM0NGFiZGF9XCIsIFwiXCJdKTtcbiAgfSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IFtdO3JldHVybiBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgdGhpcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgIHZhciBuID0gdGhpc1t0XTtuWzJdID8gZS5wdXNoKFwiQG1lZGlhIFwiICsgblsyXSArIFwie1wiICsgblsxXSArIFwifVwiKSA6IGUucHVzaChuWzFdKTtcbiAgICAgICAgfXJldHVybiBlLmpvaW4oXCJcIik7XG4gICAgICB9LCBlLmkgPSBmdW5jdGlvbiAodCwgbikge1xuICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmICh0ID0gW1tudWxsLCB0LCBcIlwiXV0pO2ZvciAodmFyIG8gPSB7fSwgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHIgPSB0aGlzW2ldWzBdO1wibnVtYmVyXCIgPT0gdHlwZW9mIHIgJiYgKG9bcl0gPSAhMCk7XG4gICAgICAgIH1mb3IgKGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBhID0gdFtpXTtcIm51bWJlclwiID09IHR5cGVvZiBhWzBdICYmIG9bYVswXV0gfHwgKG4gJiYgIWFbMl0gPyBhWzJdID0gbiA6IG4gJiYgKGFbMl0gPSBcIihcIiArIGFbMl0gKyBcIikgYW5kIChcIiArIG4gKyBcIilcIiksIGUucHVzaChhKSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGU7XG4gICAgfTtcbiAgfV0pO1xufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9saWIvZGF0Lmd1aS5taW4uanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\n\nvar planeGeometry = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.PlaneGeometry(2500, 2500);\nplaneGeometry.rotateX(-Math.PI / 2);\n\nvar planeMaterial = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.ShadowMaterial();\n\nvar plane = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.Mesh(planeGeometry, planeMaterial);\nplane.receiveShadow = true;\nplane.position.y = 1;\n/* harmony default export */ __webpack_exports__[\"a\"] = (plane);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9lbGVtZW50cy9zaGFkb3dzLmpzPzczZGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRIUkVFIGZyb20gJ3RocmVlJztcblxudmFyIHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyNTAwLCAyNTAwKTtcbnBsYW5lR2VvbWV0cnkucm90YXRlWCgtTWF0aC5QSSAvIDIpO1xuXG52YXIgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkb3dNYXRlcmlhbCgpO1xuXG52YXIgcGxhbmUgPSBuZXcgVEhSRUUuTWVzaChwbGFuZUdlb21ldHJ5LCBwbGFuZU1hdGVyaWFsKTtcbnBsYW5lLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xucGxhbmUucG9zaXRpb24ueSA9IDE7XG5leHBvcnQgZGVmYXVsdCBwbGFuZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2VsZW1lbnRzL3NoYWRvd3MuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\n\nfunction addLights(scene) {\n  var pointLight = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.PointLight(0xd2d26b, 5, 300, 2);\n  pointLight.position.set(230, 170, 50);\n  scene.add(pointLight);\n\n  var pointLight2 = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.PointLight(0xd2d26b, 1, 600, 2);\n  pointLight2.position.set(250, 150, 50);\n  scene.add(pointLight2);\n\n  var light = new __WEBPACK_IMPORTED_MODULE_0_three___default.a.AmbientLight(0x151515); // soft white light\n  scene.add(light);\n\n  pointLight.castShadow = true;\n  pointLight.shadow.mapSize.width = 512; // default\n  pointLight.shadow.mapSize.height = 512; // default\n  pointLight.shadow.camera.near = 0.5; // default\n  pointLight.shadow.camera.far = 500;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (addLights);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9saWdodHMuanM/NzU2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5mdW5jdGlvbiBhZGRMaWdodHMoc2NlbmUpIHtcbiAgdmFyIHBvaW50TGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweGQyZDI2YiwgNSwgMzAwLCAyKTtcbiAgcG9pbnRMaWdodC5wb3NpdGlvbi5zZXQoMjMwLCAxNzAsIDUwKTtcbiAgc2NlbmUuYWRkKHBvaW50TGlnaHQpO1xuXG4gIHZhciBwb2ludExpZ2h0MiA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZDJkMjZiLCAxLCA2MDAsIDIpO1xuICBwb2ludExpZ2h0Mi5wb3NpdGlvbi5zZXQoMjUwLCAxNTAsIDUwKTtcbiAgc2NlbmUuYWRkKHBvaW50TGlnaHQyKTtcblxuICB2YXIgbGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4MTUxNTE1KTsgLy8gc29mdCB3aGl0ZSBsaWdodFxuICBzY2VuZS5hZGQobGlnaHQpO1xuXG4gIHBvaW50TGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XG4gIHBvaW50TGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSA1MTI7IC8vIGRlZmF1bHRcbiAgcG9pbnRMaWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSA1MTI7IC8vIGRlZmF1bHRcbiAgcG9pbnRMaWdodC5zaGFkb3cuY2FtZXJhLm5lYXIgPSAwLjU7IC8vIGRlZmF1bHRcbiAgcG9pbnRMaWdodC5zaGFkb3cuY2FtZXJhLmZhciA9IDUwMDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWRkTGlnaHRzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvbGlnaHRzLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, exports) {

eval("module.exports = function (THREE) {\n\t/**\n  * @author qiao / https://github.com/qiao\n  * @author mrdoob / http://mrdoob.com\n  * @author alteredq / http://alteredqualia.com/\n  * @author WestLangley / http://github.com/WestLangley\n  * @author erich666 / http://erichaines.com\n  */\n\n\t// This set of controls performs orbiting, dollying (zooming), and panning.\n\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls(object, domElement) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = -Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy(scope.target0);\n\t\t\tscope.object.position.copy(scope.position0);\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function update() {\n\n\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion(quat);\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3(offset);\n\n\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t}\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\t\tspherical.makeSafe();\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\t\t// move target to panned location\n\t\t\t\tscope.target.add(panOffset);\n\n\t\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tvar spherical = new THREE.Spherical();\n\t\tvar sphericalDelta = new THREE.Spherical();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t}\n\n\t\tfunction rotateLeft(angle) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\t\t}\n\n\t\tfunction rotateUp(angle) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\t\t}\n\n\t\tvar panLeft = function () {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar(-distance);\n\n\t\t\t\tpanOffset.add(v);\n\t\t\t};\n\t\t}();\n\n\t\tvar panUp = function () {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n\t\t\t\tv.multiplyScalar(distance);\n\n\t\t\t\tpanOffset.add(v);\n\t\t\t};\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tvar pan = function () {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t} else if (scope.object instanceof THREE.OrthographicCamera) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t}\n\t\t\t};\n\t\t}();\n\n\t\tfunction dollyIn(dollyScale) {\n\n\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\n\t\t\t\tscale /= dollyScale;\n\t\t\t} else if (scope.object instanceof THREE.OrthographicCamera) {\n\n\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\t\t\t} else {\n\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\tscope.enableZoom = false;\n\t\t\t}\n\t\t}\n\n\t\tfunction dollyOut(dollyScale) {\n\n\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\n\t\t\t\tscale *= dollyScale;\n\t\t\t} else if (scope.object instanceof THREE.OrthographicCamera) {\n\n\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\t\t\t} else {\n\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\tscope.enableZoom = false;\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate(event) {\n\n\t\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownDolly(event) {\n\n\t\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownPan(event) {\n\n\t\t\t//console.log( 'handleMouseDownPan' );\n\n\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseMoveRotate(event) {\n\n\t\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMoveDolly(event) {\n\n\t\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t}\n\n\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMovePan(event) {\n\n\t\t\t//console.log( 'handleMouseMovePan' );\n\n\t\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\tpanStart.copy(panEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseUp(event) {\n\n\t\t\t//console.log( 'handleMouseUp' );\n\n\t\t}\n\n\t\tfunction handleMouseWheel(event) {\n\n\t\t\t//console.log( 'handleMouseWheel' );\n\n\t\t\tif (event.deltaY < 0) {\n\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t} else if (event.deltaY > 0) {\n\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t}\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleKeyDown(event) {\n\n\t\t\t//console.log( 'handleKeyDown' );\n\n\t\t\tswitch (event.keyCode) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartRotate(event) {\n\n\t\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchStartDolly(event) {\n\n\t\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\tdollyStart.set(0, distance);\n\t\t}\n\n\t\tfunction handleTouchStartPan(event) {\n\n\t\t\t//console.log( 'handleTouchStartPan' );\n\n\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchMoveRotate(event) {\n\n\t\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMoveDolly(event) {\n\n\t\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\tdollyEnd.set(0, distance);\n\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t}\n\n\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMovePan(event) {\n\n\t\t\t//console.log( 'handleTouchMovePan' );\n\n\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\tpanStart.copy(panEnd);\n\n\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchEnd(event) {}\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif (event.button === scope.mouseButtons.ORBIT) {\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\tstate = STATE.ROTATE;\n\t\t\t} else if (event.button === scope.mouseButtons.ZOOM) {\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\tstate = STATE.DOLLY;\n\t\t\t} else if (event.button === scope.mouseButtons.PAN) {\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\tstate = STATE.PAN;\n\t\t\t}\n\n\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseMove(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif (state === STATE.ROTATE) {\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleMouseMoveRotate(event);\n\t\t\t} else if (state === STATE.DOLLY) {\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseMoveDolly(event);\n\t\t\t} else if (state === STATE.PAN) {\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleMouseMovePan(event);\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\thandleMouseUp(event);\n\n\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onMouseWheel(event) {\n\n\t\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\thandleMouseWheel(event);\n\n\t\t\tscope.dispatchEvent(startEvent); // not sure why these are here...\n\t\t\tscope.dispatchEvent(endEvent);\n\t\t}\n\n\t\tfunction onKeyDown(event) {\n\n\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\t\thandleKeyDown(event);\n\t\t}\n\n\t\tfunction onTouchStart(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\tswitch (event.touches.length) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t// one-fingered touch: rotate\n\n\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\t// two-fingered touch: dolly\n\n\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\thandleTouchStartDolly(event);\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3:\n\t\t\t\t\t// three-fingered touch: pan\n\n\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t}\n\t\t}\n\n\t\tfunction onTouchMove(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tswitch (event.touches.length) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t// one-fingered touch: rotate\n\n\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\t// two-fingered touch: dolly\n\n\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveDolly(event);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3:\n\t\t\t\t\t// three-fingered touch: pan\n\n\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\t\t}\n\n\t\tfunction onTouchEnd(event) {\n\n\t\t\tif (scope.enabled === false) return;\n\n\t\t\thandleTouchEnd(event);\n\n\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onContextMenu(event) {\n\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\t\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\t\twindow.addEventListener('keydown', onKeyDown, false);\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\t};\n\n\tOrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties(OrbitControls.prototype, {\n\n\t\tcenter: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .center has been renamed to .target');\n\t\t\t\treturn this.target;\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n\t\t\t\treturn !this.enableZoom;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n\t\t\t\tthis.enableZoom = !value;\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n\t\t\t\treturn !this.enableRotate;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n\t\t\t\tthis.enableRotate = !value;\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n\t\t\t\treturn !this.enablePan;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n\t\t\t\tthis.enablePan = !value;\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n\t\t\t\treturn !this.enableKeys;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n\t\t\t\tthis.enableKeys = !value;\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n\t\t\t\treturn !this.enableDamping;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n\t\t\t\tthis.enableDamping = !value;\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n\t\t\t\treturn this.dampingFactor;\n\t\t\t},\n\n\t\t\tset: function (value) {\n\n\t\t\t\tconsole.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n\t\t\t\tthis.dampingFactor = value;\n\t\t\t}\n\n\t\t}\n\n\t});\n\n\treturn OrbitControls;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGhyZWUtb3JiaXQtY29udHJvbHMvaW5kZXguanM/NzczOSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChUSFJFRSkge1xuXHQvKipcbiAgKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhb1xuICAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cbiAgKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xuICAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxuICAqIEBhdXRob3IgZXJpY2g2NjYgLyBodHRwOi8vZXJpY2hhaW5lcy5jb21cbiAgKi9cblxuXHQvLyBUaGlzIHNldCBvZiBjb250cm9scyBwZXJmb3JtcyBvcmJpdGluZywgZG9sbHlpbmcgKHpvb21pbmcpLCBhbmQgcGFubmluZy5cblx0Ly8gVW5saWtlIFRyYWNrYmFsbENvbnRyb2xzLCBpdCBtYWludGFpbnMgdGhlIFwidXBcIiBkaXJlY3Rpb24gb2JqZWN0LnVwICgrWSBieSBkZWZhdWx0KS5cblx0Ly9cblx0Ly8gICAgT3JiaXQgLSBsZWZ0IG1vdXNlIC8gdG91Y2g6IG9uZSBmaW5nZXIgbW92ZVxuXHQvLyAgICBab29tIC0gbWlkZGxlIG1vdXNlLCBvciBtb3VzZXdoZWVsIC8gdG91Y2g6IHR3byBmaW5nZXIgc3ByZWFkIG9yIHNxdWlzaFxuXHQvLyAgICBQYW4gLSByaWdodCBtb3VzZSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiB0aHJlZSBmaW50ZXIgc3dpcGVcblxuXHRmdW5jdGlvbiBPcmJpdENvbnRyb2xzKG9iamVjdCwgZG9tRWxlbWVudCkge1xuXG5cdFx0dGhpcy5vYmplY3QgPSBvYmplY3Q7XG5cblx0XHR0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50ICE9PSB1bmRlZmluZWQgPyBkb21FbGVtZW50IDogZG9jdW1lbnQ7XG5cblx0XHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2xcblx0XHR0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG5cdFx0Ly8gXCJ0YXJnZXRcIiBzZXRzIHRoZSBsb2NhdGlvbiBvZiBmb2N1cywgd2hlcmUgdGhlIG9iamVjdCBvcmJpdHMgYXJvdW5kXG5cdFx0dGhpcy50YXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG5cdFx0Ly8gSG93IGZhciB5b3UgY2FuIGRvbGx5IGluIGFuZCBvdXQgKCBQZXJzcGVjdGl2ZUNhbWVyYSBvbmx5IClcblx0XHR0aGlzLm1pbkRpc3RhbmNlID0gMDtcblx0XHR0aGlzLm1heERpc3RhbmNlID0gSW5maW5pdHk7XG5cblx0XHQvLyBIb3cgZmFyIHlvdSBjYW4gem9vbSBpbiBhbmQgb3V0ICggT3J0aG9ncmFwaGljQ2FtZXJhIG9ubHkgKVxuXHRcdHRoaXMubWluWm9vbSA9IDA7XG5cdFx0dGhpcy5tYXhab29tID0gSW5maW5pdHk7XG5cblx0XHQvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgdmVydGljYWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy5cblx0XHQvLyBSYW5nZSBpcyAwIHRvIE1hdGguUEkgcmFkaWFucy5cblx0XHR0aGlzLm1pblBvbGFyQW5nbGUgPSAwOyAvLyByYWRpYW5zXG5cdFx0dGhpcy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSTsgLy8gcmFkaWFuc1xuXG5cdFx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IGhvcml6b250YWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy5cblx0XHQvLyBJZiBzZXQsIG11c3QgYmUgYSBzdWItaW50ZXJ2YWwgb2YgdGhlIGludGVydmFsIFsgLSBNYXRoLlBJLCBNYXRoLlBJIF0uXG5cdFx0dGhpcy5taW5BemltdXRoQW5nbGUgPSAtSW5maW5pdHk7IC8vIHJhZGlhbnNcblx0XHR0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zXG5cblx0XHQvLyBTZXQgdG8gdHJ1ZSB0byBlbmFibGUgZGFtcGluZyAoaW5lcnRpYSlcblx0XHQvLyBJZiBkYW1waW5nIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcFxuXHRcdHRoaXMuZW5hYmxlRGFtcGluZyA9IGZhbHNlO1xuXHRcdHRoaXMuZGFtcGluZ0ZhY3RvciA9IDAuMjU7XG5cblx0XHQvLyBUaGlzIG9wdGlvbiBhY3R1YWxseSBlbmFibGVzIGRvbGx5aW5nIGluIGFuZCBvdXQ7IGxlZnQgYXMgXCJ6b29tXCIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHRcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHpvb21pbmdcblx0XHR0aGlzLmVuYWJsZVpvb20gPSB0cnVlO1xuXHRcdHRoaXMuem9vbVNwZWVkID0gMS4wO1xuXG5cdFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcm90YXRpbmdcblx0XHR0aGlzLmVuYWJsZVJvdGF0ZSA9IHRydWU7XG5cdFx0dGhpcy5yb3RhdGVTcGVlZCA9IDEuMDtcblxuXHRcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmdcblx0XHR0aGlzLmVuYWJsZVBhbiA9IHRydWU7XG5cdFx0dGhpcy5rZXlQYW5TcGVlZCA9IDcuMDsgLy8gcGl4ZWxzIG1vdmVkIHBlciBhcnJvdyBrZXkgcHVzaFxuXG5cdFx0Ly8gU2V0IHRvIHRydWUgdG8gYXV0b21hdGljYWxseSByb3RhdGUgYXJvdW5kIHRoZSB0YXJnZXRcblx0XHQvLyBJZiBhdXRvLXJvdGF0ZSBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3Bcblx0XHR0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTtcblx0XHR0aGlzLmF1dG9Sb3RhdGVTcGVlZCA9IDIuMDsgLy8gMzAgc2Vjb25kcyBwZXIgcm91bmQgd2hlbiBmcHMgaXMgNjBcblxuXHRcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHVzZSBvZiB0aGUga2V5c1xuXHRcdHRoaXMuZW5hYmxlS2V5cyA9IHRydWU7XG5cblx0XHQvLyBUaGUgZm91ciBhcnJvdyBrZXlzXG5cdFx0dGhpcy5rZXlzID0geyBMRUZUOiAzNywgVVA6IDM4LCBSSUdIVDogMzksIEJPVFRPTTogNDAgfTtcblxuXHRcdC8vIE1vdXNlIGJ1dHRvbnNcblx0XHR0aGlzLm1vdXNlQnV0dG9ucyA9IHsgT1JCSVQ6IFRIUkVFLk1PVVNFLkxFRlQsIFpPT006IFRIUkVFLk1PVVNFLk1JRERMRSwgUEFOOiBUSFJFRS5NT1VTRS5SSUdIVCB9O1xuXG5cdFx0Ly8gZm9yIHJlc2V0XG5cdFx0dGhpcy50YXJnZXQwID0gdGhpcy50YXJnZXQuY2xvbmUoKTtcblx0XHR0aGlzLnBvc2l0aW9uMCA9IHRoaXMub2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0dGhpcy56b29tMCA9IHRoaXMub2JqZWN0Lnpvb207XG5cblx0XHQvL1xuXHRcdC8vIHB1YmxpYyBtZXRob2RzXG5cdFx0Ly9cblxuXHRcdHRoaXMuZ2V0UG9sYXJBbmdsZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHNwaGVyaWNhbC5waGk7XG5cdFx0fTtcblxuXHRcdHRoaXMuZ2V0QXppbXV0aGFsQW5nbGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiBzcGhlcmljYWwudGhldGE7XG5cdFx0fTtcblxuXHRcdHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHNjb3BlLnRhcmdldC5jb3B5KHNjb3BlLnRhcmdldDApO1xuXHRcdFx0c2NvcGUub2JqZWN0LnBvc2l0aW9uLmNvcHkoc2NvcGUucG9zaXRpb24wKTtcblx0XHRcdHNjb3BlLm9iamVjdC56b29tID0gc2NvcGUuem9vbTA7XG5cblx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTtcblxuXHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cblx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblx0XHR9O1xuXG5cdFx0Ly8gdGhpcyBtZXRob2QgaXMgZXhwb3NlZCwgYnV0IHBlcmhhcHMgaXQgd291bGQgYmUgYmV0dGVyIGlmIHdlIGNhbiBtYWtlIGl0IHByaXZhdGUuLi5cblx0XHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0XHRcdC8vIHNvIGNhbWVyYS51cCBpcyB0aGUgb3JiaXQgYXhpc1xuXHRcdFx0dmFyIHF1YXQgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21Vbml0VmVjdG9ycyhvYmplY3QudXAsIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApKTtcblx0XHRcdHZhciBxdWF0SW52ZXJzZSA9IHF1YXQuY2xvbmUoKS5pbnZlcnNlKCk7XG5cblx0XHRcdHZhciBsYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHRcdFx0dmFyIGxhc3RRdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblxuXHRcdFx0XHR2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XG5cblx0XHRcdFx0b2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpO1xuXG5cdFx0XHRcdC8vIHJvdGF0ZSBvZmZzZXQgdG8gXCJ5LWF4aXMtaXMtdXBcIiBzcGFjZVxuXHRcdFx0XHRvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHF1YXQpO1xuXG5cdFx0XHRcdC8vIGFuZ2xlIGZyb20gei1heGlzIGFyb3VuZCB5LWF4aXNcblx0XHRcdFx0c3BoZXJpY2FsLnNldEZyb21WZWN0b3IzKG9mZnNldCk7XG5cblx0XHRcdFx0aWYgKHNjb3BlLmF1dG9Sb3RhdGUgJiYgc3RhdGUgPT09IFNUQVRFLk5PTkUpIHtcblxuXHRcdFx0XHRcdHJvdGF0ZUxlZnQoZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzcGhlcmljYWwudGhldGEgKz0gc3BoZXJpY2FsRGVsdGEudGhldGE7XG5cdFx0XHRcdHNwaGVyaWNhbC5waGkgKz0gc3BoZXJpY2FsRGVsdGEucGhpO1xuXG5cdFx0XHRcdC8vIHJlc3RyaWN0IHRoZXRhIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcblx0XHRcdFx0c3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgoc2NvcGUubWluQXppbXV0aEFuZ2xlLCBNYXRoLm1pbihzY29wZS5tYXhBemltdXRoQW5nbGUsIHNwaGVyaWNhbC50aGV0YSkpO1xuXG5cdFx0XHRcdC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXG5cdFx0XHRcdHNwaGVyaWNhbC5waGkgPSBNYXRoLm1heChzY29wZS5taW5Qb2xhckFuZ2xlLCBNYXRoLm1pbihzY29wZS5tYXhQb2xhckFuZ2xlLCBzcGhlcmljYWwucGhpKSk7XG5cblx0XHRcdFx0c3BoZXJpY2FsLm1ha2VTYWZlKCk7XG5cblx0XHRcdFx0c3BoZXJpY2FsLnJhZGl1cyAqPSBzY2FsZTtcblxuXHRcdFx0XHQvLyByZXN0cmljdCByYWRpdXMgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xuXHRcdFx0XHRzcGhlcmljYWwucmFkaXVzID0gTWF0aC5tYXgoc2NvcGUubWluRGlzdGFuY2UsIE1hdGgubWluKHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzKSk7XG5cblx0XHRcdFx0Ly8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uXG5cdFx0XHRcdHNjb3BlLnRhcmdldC5hZGQocGFuT2Zmc2V0KTtcblxuXHRcdFx0XHRvZmZzZXQuc2V0RnJvbVNwaGVyaWNhbChzcGhlcmljYWwpO1xuXG5cdFx0XHRcdC8vIHJvdGF0ZSBvZmZzZXQgYmFjayB0byBcImNhbWVyYS11cC12ZWN0b3ItaXMtdXBcIiBzcGFjZVxuXHRcdFx0XHRvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKTtcblxuXHRcdFx0XHRwb3NpdGlvbi5jb3B5KHNjb3BlLnRhcmdldCkuYWRkKG9mZnNldCk7XG5cblx0XHRcdFx0c2NvcGUub2JqZWN0Lmxvb2tBdChzY29wZS50YXJnZXQpO1xuXG5cdFx0XHRcdGlmIChzY29wZS5lbmFibGVEYW1waW5nID09PSB0cnVlKSB7XG5cblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS50aGV0YSAqPSAxIC0gc2NvcGUuZGFtcGluZ0ZhY3Rvcjtcblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgKj0gMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3I7XG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRzcGhlcmljYWxEZWx0YS5zZXQoMCwgMCwgMCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY2FsZSA9IDE7XG5cdFx0XHRcdHBhbk9mZnNldC5zZXQoMCwgMCwgMCk7XG5cblx0XHRcdFx0Ly8gdXBkYXRlIGNvbmRpdGlvbiBpczpcblx0XHRcdFx0Ly8gbWluKGNhbWVyYSBkaXNwbGFjZW1lbnQsIGNhbWVyYSByb3RhdGlvbiBpbiByYWRpYW5zKV4yID4gRVBTXG5cdFx0XHRcdC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxIC0geF4yIC8gOFxuXG5cdFx0XHRcdGlmICh6b29tQ2hhbmdlZCB8fCBsYXN0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQoc2NvcGUub2JqZWN0LnBvc2l0aW9uKSA+IEVQUyB8fCA4ICogKDEgLSBsYXN0UXVhdGVybmlvbi5kb3Qoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pKSA+IEVQUykge1xuXG5cdFx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XG5cblx0XHRcdFx0XHRsYXN0UG9zaXRpb24uY29weShzY29wZS5vYmplY3QucG9zaXRpb24pO1xuXHRcdFx0XHRcdGxhc3RRdWF0ZXJuaW9uLmNvcHkoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pO1xuXHRcdFx0XHRcdHpvb21DaGFuZ2VkID0gZmFsc2U7XG5cblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSgpO1xuXG5cdFx0dGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51Jywgb25Db250ZXh0TWVudSwgZmFsc2UpO1xuXHRcdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UpO1xuXHRcdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UpO1xuXG5cdFx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlKTtcblx0XHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSk7XG5cdFx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7XG5cblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSk7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG5cblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSk7XG5cblx0XHRcdC8vc2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnZGlzcG9zZScgfSApOyAvLyBzaG91bGQgdGhpcyBiZSBhZGRlZCBoZXJlP1xuXHRcdH07XG5cblx0XHQvL1xuXHRcdC8vIGludGVybmFsc1xuXHRcdC8vXG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIGNoYW5nZUV2ZW50ID0geyB0eXBlOiAnY2hhbmdlJyB9O1xuXHRcdHZhciBzdGFydEV2ZW50ID0geyB0eXBlOiAnc3RhcnQnIH07XG5cdFx0dmFyIGVuZEV2ZW50ID0geyB0eXBlOiAnZW5kJyB9O1xuXG5cdFx0dmFyIFNUQVRFID0geyBOT05FOiAtMSwgUk9UQVRFOiAwLCBET0xMWTogMSwgUEFOOiAyLCBUT1VDSF9ST1RBVEU6IDMsIFRPVUNIX0RPTExZOiA0LCBUT1VDSF9QQU46IDUgfTtcblxuXHRcdHZhciBzdGF0ZSA9IFNUQVRFLk5PTkU7XG5cblx0XHR2YXIgRVBTID0gMC4wMDAwMDE7XG5cblx0XHQvLyBjdXJyZW50IHBvc2l0aW9uIGluIHNwaGVyaWNhbCBjb29yZGluYXRlc1xuXHRcdHZhciBzcGhlcmljYWwgPSBuZXcgVEhSRUUuU3BoZXJpY2FsKCk7XG5cdFx0dmFyIHNwaGVyaWNhbERlbHRhID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xuXG5cdFx0dmFyIHNjYWxlID0gMTtcblx0XHR2YXIgcGFuT2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0XHR2YXIgem9vbUNoYW5nZWQgPSBmYWxzZTtcblxuXHRcdHZhciByb3RhdGVTdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdFx0dmFyIHJvdGF0ZUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdFx0dmFyIHJvdGF0ZURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHRcdHZhciBwYW5TdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdFx0dmFyIHBhbkVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdFx0dmFyIHBhbkRlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHRcdHZhciBkb2xseVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblx0XHR2YXIgZG9sbHlFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXHRcdHZhciBkb2xseURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHRcdGZ1bmN0aW9uIGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkge1xuXG5cdFx0XHRyZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcblxuXHRcdFx0cmV0dXJuIE1hdGgucG93KDAuOTUsIHNjb3BlLnpvb21TcGVlZCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcm90YXRlTGVmdChhbmdsZSkge1xuXG5cdFx0XHRzcGhlcmljYWxEZWx0YS50aGV0YSAtPSBhbmdsZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByb3RhdGVVcChhbmdsZSkge1xuXG5cdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgLT0gYW5nbGU7XG5cdFx0fVxuXG5cdFx0dmFyIHBhbkxlZnQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbkxlZnQoZGlzdGFuY2UsIG9iamVjdE1hdHJpeCkge1xuXG5cdFx0XHRcdHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDApOyAvLyBnZXQgWCBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4XG5cdFx0XHRcdHYubXVsdGlwbHlTY2FsYXIoLWRpc3RhbmNlKTtcblxuXHRcdFx0XHRwYW5PZmZzZXQuYWRkKHYpO1xuXHRcdFx0fTtcblx0XHR9KCk7XG5cblx0XHR2YXIgcGFuVXAgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhblVwKGRpc3RhbmNlLCBvYmplY3RNYXRyaXgpIHtcblxuXHRcdFx0XHR2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAxKTsgLy8gZ2V0IFkgY29sdW1uIG9mIG9iamVjdE1hdHJpeFxuXHRcdFx0XHR2Lm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcblxuXHRcdFx0XHRwYW5PZmZzZXQuYWRkKHYpO1xuXHRcdFx0fTtcblx0XHR9KCk7XG5cblx0XHQvLyBkZWx0YVggYW5kIGRlbHRhWSBhcmUgaW4gcGl4ZWxzOyByaWdodCBhbmQgZG93biBhcmUgcG9zaXRpdmVcblx0XHR2YXIgcGFuID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgb2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbihkZWx0YVgsIGRlbHRhWSkge1xuXG5cdFx0XHRcdHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50O1xuXG5cdFx0XHRcdGlmIChzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSkge1xuXG5cdFx0XHRcdFx0Ly8gcGVyc3BlY3RpdmVcblx0XHRcdFx0XHR2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XG5cdFx0XHRcdFx0b2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpO1xuXHRcdFx0XHRcdHZhciB0YXJnZXREaXN0YW5jZSA9IG9mZnNldC5sZW5ndGgoKTtcblxuXHRcdFx0XHRcdC8vIGhhbGYgb2YgdGhlIGZvdiBpcyBjZW50ZXIgdG8gdG9wIG9mIHNjcmVlblxuXHRcdFx0XHRcdHRhcmdldERpc3RhbmNlICo9IE1hdGgudGFuKHNjb3BlLm9iamVjdC5mb3YgLyAyICogTWF0aC5QSSAvIDE4MC4wKTtcblxuXHRcdFx0XHRcdC8vIHdlIGFjdHVhbGx5IGRvbid0IHVzZSBzY3JlZW5XaWR0aCwgc2luY2UgcGVyc3BlY3RpdmUgY2FtZXJhIGlzIGZpeGVkIHRvIHNjcmVlbiBoZWlnaHRcblx0XHRcdFx0XHRwYW5MZWZ0KDIgKiBkZWx0YVggKiB0YXJnZXREaXN0YW5jZSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4KTtcblx0XHRcdFx0XHRwYW5VcCgyICogZGVsdGFZICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoc2NvcGUub2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKSB7XG5cblx0XHRcdFx0XHQvLyBvcnRob2dyYXBoaWNcblx0XHRcdFx0XHRwYW5MZWZ0KGRlbHRhWCAqIChzY29wZS5vYmplY3QucmlnaHQgLSBzY29wZS5vYmplY3QubGVmdCkgLyBzY29wZS5vYmplY3Quem9vbSAvIGVsZW1lbnQuY2xpZW50V2lkdGgsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xuXHRcdFx0XHRcdHBhblVwKGRlbHRhWSAqIChzY29wZS5vYmplY3QudG9wIC0gc2NvcGUub2JqZWN0LmJvdHRvbSkgLyBzY29wZS5vYmplY3Quem9vbSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4KTtcblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIGNhbWVyYSBuZWl0aGVyIG9ydGhvZ3JhcGhpYyBub3IgcGVyc3BlY3RpdmVcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4nKTtcblx0XHRcdFx0XHRzY29wZS5lbmFibGVQYW4gPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KCk7XG5cblx0XHRmdW5jdGlvbiBkb2xseUluKGRvbGx5U2NhbGUpIHtcblxuXHRcdFx0aWYgKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSB7XG5cblx0XHRcdFx0c2NhbGUgLz0gZG9sbHlTY2FsZTtcblx0XHRcdH0gZWxzZSBpZiAoc2NvcGUub2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKSB7XG5cblx0XHRcdFx0c2NvcGUub2JqZWN0Lnpvb20gPSBNYXRoLm1heChzY29wZS5taW5ab29tLCBNYXRoLm1pbihzY29wZS5tYXhab29tLCBzY29wZS5vYmplY3Quem9vbSAqIGRvbGx5U2NhbGUpKTtcblx0XHRcdFx0c2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcblx0XHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuJyk7XG5cdFx0XHRcdHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkb2xseU91dChkb2xseVNjYWxlKSB7XG5cblx0XHRcdGlmIChzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSkge1xuXG5cdFx0XHRcdHNjYWxlICo9IGRvbGx5U2NhbGU7XG5cdFx0XHR9IGVsc2UgaWYgKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSkge1xuXG5cdFx0XHRcdHNjb3BlLm9iamVjdC56b29tID0gTWF0aC5tYXgoc2NvcGUubWluWm9vbSwgTWF0aC5taW4oc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gLyBkb2xseVNjYWxlKSk7XG5cdFx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0XHRcdHpvb21DaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLicpO1xuXHRcdFx0XHRzY29wZS5lbmFibGVab29tID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9cblx0XHQvLyBldmVudCBjYWxsYmFja3MgLSB1cGRhdGUgdGhlIG9iamVjdCBzdGF0ZVxuXHRcdC8vXG5cblx0XHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blJvdGF0ZScgKTtcblxuXHRcdFx0cm90YXRlU3RhcnQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZURvd25Eb2xseScgKTtcblxuXHRcdFx0ZG9sbHlTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUGFuKGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZURvd25QYW4nICk7XG5cblx0XHRcdHBhblN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZVJvdGF0ZScgKTtcblxuXHRcdFx0cm90YXRlRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcblx0XHRcdHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMocm90YXRlRW5kLCByb3RhdGVTdGFydCk7XG5cblx0XHRcdHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50O1xuXG5cdFx0XHQvLyByb3RhdGluZyBhY3Jvc3Mgd2hvbGUgc2NyZWVuIGdvZXMgMzYwIGRlZ3JlZXMgYXJvdW5kXG5cdFx0XHRyb3RhdGVMZWZ0KDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50V2lkdGggKiBzY29wZS5yb3RhdGVTcGVlZCk7XG5cblx0XHRcdC8vIHJvdGF0aW5nIHVwIGFuZCBkb3duIGFsb25nIHdob2xlIHNjcmVlbiBhdHRlbXB0cyB0byBnbyAzNjAsIGJ1dCBsaW1pdGVkIHRvIDE4MFxuXHRcdFx0cm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCk7XG5cblx0XHRcdHJvdGF0ZVN0YXJ0LmNvcHkocm90YXRlRW5kKTtcblxuXHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlRG9sbHkoZXZlbnQpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZURvbGx5JyApO1xuXG5cdFx0XHRkb2xseUVuZC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cblx0XHRcdGRvbGx5RGVsdGEuc3ViVmVjdG9ycyhkb2xseUVuZCwgZG9sbHlTdGFydCk7XG5cblx0XHRcdGlmIChkb2xseURlbHRhLnkgPiAwKSB7XG5cblx0XHRcdFx0ZG9sbHlJbihnZXRab29tU2NhbGUoKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGRvbGx5RGVsdGEueSA8IDApIHtcblxuXHRcdFx0XHRkb2xseU91dChnZXRab29tU2NhbGUoKSk7XG5cdFx0XHR9XG5cblx0XHRcdGRvbGx5U3RhcnQuY29weShkb2xseUVuZCk7XG5cblx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCkge1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VNb3ZlUGFuJyApO1xuXG5cdFx0XHRwYW5FbmQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuXG5cdFx0XHRwYW5EZWx0YS5zdWJWZWN0b3JzKHBhbkVuZCwgcGFuU3RhcnQpO1xuXG5cdFx0XHRwYW4ocGFuRGVsdGEueCwgcGFuRGVsdGEueSk7XG5cblx0XHRcdHBhblN0YXJ0LmNvcHkocGFuRW5kKTtcblxuXHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlTW91c2VVcChldmVudCkge1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VVcCcgKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZU1vdXNlV2hlZWwoZXZlbnQpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlV2hlZWwnICk7XG5cblx0XHRcdGlmIChldmVudC5kZWx0YVkgPCAwKSB7XG5cblx0XHRcdFx0ZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpO1xuXHRcdFx0fSBlbHNlIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XG5cblx0XHRcdFx0ZG9sbHlJbihnZXRab29tU2NhbGUoKSk7XG5cdFx0XHR9XG5cblx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZUtleURvd24nICk7XG5cblx0XHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXG5cdFx0XHRcdGNhc2Ugc2NvcGUua2V5cy5VUDpcblx0XHRcdFx0XHRwYW4oMCwgc2NvcGUua2V5UGFuU3BlZWQpO1xuXHRcdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2Ugc2NvcGUua2V5cy5CT1RUT006XG5cdFx0XHRcdFx0cGFuKDAsIC1zY29wZS5rZXlQYW5TcGVlZCk7XG5cdFx0XHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBzY29wZS5rZXlzLkxFRlQ6XG5cdFx0XHRcdFx0cGFuKHNjb3BlLmtleVBhblNwZWVkLCAwKTtcblx0XHRcdFx0XHRzY29wZS51cGRhdGUoKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIHNjb3BlLmtleXMuUklHSFQ6XG5cdFx0XHRcdFx0cGFuKC1zY29wZS5rZXlQYW5TcGVlZCwgMCk7XG5cdFx0XHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0Um90YXRlJyApO1xuXG5cdFx0XHRyb3RhdGVTdGFydC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5KGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0RG9sbHknICk7XG5cblx0XHRcdHZhciBkeCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSBldmVudC50b3VjaGVzWzFdLnBhZ2VYO1xuXHRcdFx0dmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7XG5cblx0XHRcdHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cblx0XHRcdGRvbGx5U3RhcnQuc2V0KDAsIGRpc3RhbmNlKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0UGFuJyApO1xuXG5cdFx0XHRwYW5TdGFydC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVSb3RhdGUnICk7XG5cblx0XHRcdHJvdGF0ZUVuZC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7XG5cdFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpO1xuXG5cdFx0XHR2YXIgZWxlbWVudCA9IHNjb3BlLmRvbUVsZW1lbnQgPT09IGRvY3VtZW50ID8gc2NvcGUuZG9tRWxlbWVudC5ib2R5IDogc2NvcGUuZG9tRWxlbWVudDtcblxuXHRcdFx0Ly8gcm90YXRpbmcgYWNyb3NzIHdob2xlIHNjcmVlbiBnb2VzIDM2MCBkZWdyZWVzIGFyb3VuZFxuXHRcdFx0cm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudFdpZHRoICogc2NvcGUucm90YXRlU3BlZWQpO1xuXG5cdFx0XHQvLyByb3RhdGluZyB1cCBhbmQgZG93biBhbG9uZyB3aG9sZSBzY3JlZW4gYXR0ZW1wdHMgdG8gZ28gMzYwLCBidXQgbGltaXRlZCB0byAxODBcblx0XHRcdHJvdGF0ZVVwKDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0ICogc2NvcGUucm90YXRlU3BlZWQpO1xuXG5cdFx0XHRyb3RhdGVTdGFydC5jb3B5KHJvdGF0ZUVuZCk7XG5cblx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVEb2xseScgKTtcblxuXHRcdFx0dmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7XG5cdFx0XHR2YXIgZHkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWTtcblxuXHRcdFx0dmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuXHRcdFx0ZG9sbHlFbmQuc2V0KDAsIGRpc3RhbmNlKTtcblxuXHRcdFx0ZG9sbHlEZWx0YS5zdWJWZWN0b3JzKGRvbGx5RW5kLCBkb2xseVN0YXJ0KTtcblxuXHRcdFx0aWYgKGRvbGx5RGVsdGEueSA+IDApIHtcblxuXHRcdFx0XHRkb2xseU91dChnZXRab29tU2NhbGUoKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGRvbGx5RGVsdGEueSA8IDApIHtcblxuXHRcdFx0XHRkb2xseUluKGdldFpvb21TY2FsZSgpKTtcblx0XHRcdH1cblxuXHRcdFx0ZG9sbHlTdGFydC5jb3B5KGRvbGx5RW5kKTtcblxuXHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUGFuKGV2ZW50KSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVQYW4nICk7XG5cblx0XHRcdHBhbkVuZC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7XG5cblx0XHRcdHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCk7XG5cblx0XHRcdHBhbihwYW5EZWx0YS54LCBwYW5EZWx0YS55KTtcblxuXHRcdFx0cGFuU3RhcnQuY29weShwYW5FbmQpO1xuXG5cdFx0XHRzY29wZS51cGRhdGUoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoYW5kbGVUb3VjaEVuZChldmVudCkge31cblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaEVuZCcgKTtcblxuXHRcdC8vXG5cdFx0Ly8gZXZlbnQgaGFuZGxlcnMgLSBGU006IGxpc3RlbiBmb3IgZXZlbnRzIGFuZCByZXNldCBzdGF0ZVxuXHRcdC8vXG5cblx0XHRmdW5jdGlvbiBvbk1vdXNlRG93bihldmVudCkge1xuXG5cdFx0XHRpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0aWYgKGV2ZW50LmJ1dHRvbiA9PT0gc2NvcGUubW91c2VCdXR0b25zLk9SQklUKSB7XG5cblx0XHRcdFx0aWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuUk9UQVRFO1xuXHRcdFx0fSBlbHNlIGlmIChldmVudC5idXR0b24gPT09IHNjb3BlLm1vdXNlQnV0dG9ucy5aT09NKSB7XG5cblx0XHRcdFx0aWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VEb3duRG9sbHkoZXZlbnQpO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuRE9MTFk7XG5cdFx0XHR9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gc2NvcGUubW91c2VCdXR0b25zLlBBTikge1xuXG5cdFx0XHRcdGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47XG5cblx0XHRcdFx0aGFuZGxlTW91c2VEb3duUGFuKGV2ZW50KTtcblxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlBBTjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHN0YXRlICE9PSBTVEFURS5OT05FKSB7XG5cblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlKTtcblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UpO1xuXG5cdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoc3RhcnRFdmVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Nb3VzZU1vdmUoZXZlbnQpIHtcblxuXHRcdFx0aWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47XG5cblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGlmIChzdGF0ZSA9PT0gU1RBVEUuUk9UQVRFKSB7XG5cblx0XHRcdFx0aWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpO1xuXHRcdFx0fSBlbHNlIGlmIChzdGF0ZSA9PT0gU1RBVEUuRE9MTFkpIHtcblxuXHRcdFx0XHRpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCk7XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSBTVEFURS5QQU4pIHtcblxuXHRcdFx0XHRpZiAoc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuO1xuXG5cdFx0XHRcdGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Nb3VzZVVwKGV2ZW50KSB7XG5cblx0XHRcdGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuXG5cdFx0XHRoYW5kbGVNb3VzZVVwKGV2ZW50KTtcblxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlKTtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlKTtcblxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7XG5cblx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvbk1vdXNlV2hlZWwoZXZlbnQpIHtcblxuXHRcdFx0aWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlIHx8IHN0YXRlICE9PSBTVEFURS5OT05FICYmIHN0YXRlICE9PSBTVEFURS5ST1RBVEUpIHJldHVybjtcblxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRoYW5kbGVNb3VzZVdoZWVsKGV2ZW50KTtcblxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudChzdGFydEV2ZW50KTsgLy8gbm90IHN1cmUgd2h5IHRoZXNlIGFyZSBoZXJlLi4uXG5cdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcblxuXHRcdFx0aWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZUtleXMgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0aGFuZGxlS2V5RG93bihldmVudCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGV2ZW50KSB7XG5cblx0XHRcdGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuXG5cdFx0XHRzd2l0Y2ggKGV2ZW50LnRvdWNoZXMubGVuZ3RoKSB7XG5cblx0XHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRcdC8vIG9uZS1maW5nZXJlZCB0b3VjaDogcm90YXRlXG5cblx0XHRcdFx0XHRpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2hTdGFydFJvdGF0ZShldmVudCk7XG5cblx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlRPVUNIX1JPVEFURTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHQvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5XG5cblx0XHRcdFx0XHRpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0XHRcdGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCk7XG5cblx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlRPVUNIX0RPTExZO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHRcdC8vIHRocmVlLWZpbmdlcmVkIHRvdWNoOiBwYW5cblxuXHRcdFx0XHRcdGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47XG5cblx0XHRcdFx0XHRoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KTtcblxuXHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfUEFOO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3RhdGUgIT09IFNUQVRFLk5PTkUpIHtcblxuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XG5cblx0XHRcdGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdHN3aXRjaCAoZXZlbnQudG91Y2hlcy5sZW5ndGgpIHtcblxuXHRcdFx0XHRjYXNlIDE6XG5cdFx0XHRcdFx0Ly8gb25lLWZpbmdlcmVkIHRvdWNoOiByb3RhdGVcblxuXHRcdFx0XHRcdGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47XG5cdFx0XHRcdFx0aWYgKHN0YXRlICE9PSBTVEFURS5UT1VDSF9ST1RBVEUpIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/Li4uXG5cblx0XHRcdFx0XHRoYW5kbGVUb3VjaE1vdmVSb3RhdGUoZXZlbnQpO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHRcdC8vIHR3by1maW5nZXJlZCB0b3VjaDogZG9sbHlcblxuXHRcdFx0XHRcdGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGlmIChzdGF0ZSAhPT0gU1RBVEUuVE9VQ0hfRE9MTFkpIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/Li4uXG5cblx0XHRcdFx0XHRoYW5kbGVUb3VjaE1vdmVEb2xseShldmVudCk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIDM6XG5cdFx0XHRcdFx0Ly8gdGhyZWUtZmluZ2VyZWQgdG91Y2g6IHBhblxuXG5cdFx0XHRcdFx0aWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcblx0XHRcdFx0XHRpZiAoc3RhdGUgIT09IFNUQVRFLlRPVUNIX1BBTikgcmV0dXJuOyAvLyBpcyB0aGlzIG5lZWRlZD8uLi5cblxuXHRcdFx0XHRcdGhhbmRsZVRvdWNoTW92ZVBhbihldmVudCk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xuXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Ub3VjaEVuZChldmVudCkge1xuXG5cdFx0XHRpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0aGFuZGxlVG91Y2hFbmQoZXZlbnQpO1xuXG5cdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTtcblxuXHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoZXZlbnQpIHtcblxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHQvL1xuXG5cdFx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUsIGZhbHNlKTtcblxuXHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlKTtcblx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSk7XG5cblx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlKTtcblx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UpO1xuXHRcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIGZhbHNlKTtcblxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSk7XG5cblx0XHQvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnRcblxuXHRcdHRoaXMudXBkYXRlKCk7XG5cdH07XG5cblx0T3JiaXRDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpO1xuXHRPcmJpdENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9yYml0Q29udHJvbHM7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoT3JiaXRDb250cm9scy5wcm90b3R5cGUsIHtcblxuXHRcdGNlbnRlcjoge1xuXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5jZW50ZXIgaGFzIGJlZW4gcmVuYW1lZCB0byAudGFyZ2V0Jyk7XG5cdFx0XHRcdHJldHVybiB0aGlzLnRhcmdldDtcblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cblx0XHRub1pvb206IHtcblxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9ab29tIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlWm9vbSBpbnN0ZWFkLicpO1xuXHRcdFx0XHRyZXR1cm4gIXRoaXMuZW5hYmxlWm9vbTtcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9ab29tIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlWm9vbSBpbnN0ZWFkLicpO1xuXHRcdFx0XHR0aGlzLmVuYWJsZVpvb20gPSAhdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0bm9Sb3RhdGU6IHtcblxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9Sb3RhdGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVSb3RhdGUgaW5zdGVhZC4nKTtcblx0XHRcdFx0cmV0dXJuICF0aGlzLmVuYWJsZVJvdGF0ZTtcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9Sb3RhdGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVSb3RhdGUgaW5zdGVhZC4nKTtcblx0XHRcdFx0dGhpcy5lbmFibGVSb3RhdGUgPSAhdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0bm9QYW46IHtcblxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9QYW4gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVQYW4gaW5zdGVhZC4nKTtcblx0XHRcdFx0cmV0dXJuICF0aGlzLmVuYWJsZVBhbjtcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9QYW4gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVQYW4gaW5zdGVhZC4nKTtcblx0XHRcdFx0dGhpcy5lbmFibGVQYW4gPSAhdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0bm9LZXlzOiB7XG5cblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUud2FybignVEhSRUUuT3JiaXRDb250cm9sczogLm5vS2V5cyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZUtleXMgaW5zdGVhZC4nKTtcblx0XHRcdFx0cmV0dXJuICF0aGlzLmVuYWJsZUtleXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXG5cdFx0XHRcdGNvbnNvbGUud2FybignVEhSRUUuT3JiaXRDb250cm9sczogLm5vS2V5cyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZUtleXMgaW5zdGVhZC4nKTtcblx0XHRcdFx0dGhpcy5lbmFibGVLZXlzID0gIXZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdHN0YXRpY01vdmluZzoge1xuXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5zdGF0aWNNb3ZpbmcgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVEYW1waW5nIGluc3RlYWQuJyk7XG5cdFx0XHRcdHJldHVybiAhdGhpcy5lbmFibGVEYW1waW5nO1xuXHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5zdGF0aWNNb3ZpbmcgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVEYW1waW5nIGluc3RlYWQuJyk7XG5cdFx0XHRcdHRoaXMuZW5hYmxlRGFtcGluZyA9ICF2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHRkeW5hbWljRGFtcGluZ0ZhY3Rvcjoge1xuXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5keW5hbWljRGFtcGluZ0ZhY3RvciBoYXMgYmVlbiByZW5hbWVkLiBVc2UgLmRhbXBpbmdGYWN0b3IgaW5zdGVhZC4nKTtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZGFtcGluZ0ZhY3Rvcjtcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCdUSFJFRS5PcmJpdENvbnRyb2xzOiAuZHluYW1pY0RhbXBpbmdGYWN0b3IgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIC5kYW1waW5nRmFjdG9yIGluc3RlYWQuJyk7XG5cdFx0XHRcdHRoaXMuZGFtcGluZ0ZhY3RvciA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdH0pO1xuXG5cdHJldHVybiBPcmJpdENvbnRyb2xzO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aHJlZS1vcmJpdC1jb250cm9scy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ })
/******/ ]);